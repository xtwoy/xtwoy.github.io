

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/lbxx.png">
  <link rel="icon" href="/img/lbxx.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="XtwoY">
  <meta name="keywords" content="">
  
    <meta name="description" content="[toc]  瑞吉外卖笔记 原文链接  概述  功能架构图   数据库建库建表  表说明   开发环境  Maven搭建 直接创建新工程 继承父工程的形式来做这个，这里新建父工程  ​    application.yml文件 1234567891011121314151617181920server:  port: 8080spring:  application:    #应用的名称，可选">
<meta property="og:type" content="article">
<meta property="og:title" content="瑞吉外卖">
<meta property="og:url" content="http://xtwoy.github.io/%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="XtwoY">
<meta property="og:description" content="[toc]  瑞吉外卖笔记 原文链接  概述  功能架构图   数据库建库建表  表说明   开发环境  Maven搭建 直接创建新工程 继承父工程的形式来做这个，这里新建父工程  ​    application.yml文件 1234567891011121314151617181920server:  port: 8080spring:  application:    #应用的名称，可选">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/%E7%91%9E%E5%90%89%E5%B0%81%E9%9D%A2.png">
<meta property="article:published_time" content="2022-11-25T14:56:00.000Z">
<meta property="article:modified_time" content="2023-03-01T06:55:40.923Z">
<meta property="article:author" content="XtwoY">
<meta property="article:tag" content="Spring Boot">
<meta property="article:tag" content="项目">
<meta property="article:tag" content="瑞吉外卖">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/%E7%91%9E%E5%90%89%E5%B0%81%E9%9D%A2.png">
  
  
  
  <title>瑞吉外卖 - XtwoY</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xtwoy.github.io","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":150,"cursorChar":"_","loop":true,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"XcZMRYxyoKLVblDJBK1NWiIm-gzGzoHsz","app_key":"0CQR4gbS0Oqa9nyaFPmaiXSw","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>XtwoYのBlog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/%E7%91%9E%E5%90%89%E5%B0%81%E9%9D%A2.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="瑞吉外卖"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-11-25 22:56" pubdate>
          November 25, 2022 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          21k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          174 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">瑞吉外卖</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on March 1, 2023 pm
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <p>[toc]</p>
<h1 id="瑞吉外卖笔记"><a class="markdownIt-Anchor" href="#瑞吉外卖笔记"></a> 瑞吉外卖笔记</h1>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46906696/article/details/125040457#comments_23962173">原文链接</a></p>
<h1 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h1>
<h2 id="功能架构图"><a class="markdownIt-Anchor" href="#功能架构图"></a> 功能架构图</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/00f39dbdd7d24d88b56c10eabeecdd7d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="数据库建库建表"><a class="markdownIt-Anchor" href="#数据库建库建表"></a> 数据库建库建表</h1>
<h2 id="表说明"><a class="markdownIt-Anchor" href="#表说明"></a> 表说明</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ee424986569f45b6a071f1556bfe10b8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="开发环境"><a class="markdownIt-Anchor" href="#开发环境"></a> 开发环境</h1>
<h2 id="maven搭建"><a class="markdownIt-Anchor" href="#maven搭建"></a> Maven搭建</h2>
<p>直接创建新工程<br />
继承父工程的形式来做这个，这里新建父工程<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6e78719f1b0e465e816e50584a93d39c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>​    application.yml文件</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-comment">#应用的名称，可选</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">reggie_take_out</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/reggie?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-comment">#在映射实体或者属性时，将数据库中表名和字段名中的下划线去掉，按照驼峰命名法映射</span><br>    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">ASSIGN_ID</span><br></code></pre></td></tr></table></figure>
<p>​</p>
<h2 id="启动测试"><a class="markdownIt-Anchor" href="#启动测试"></a> 启动测试</h2>
<p>创建测试类并启动<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8f3df341f8ed469a96de5831708a5fc5.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="导入前端页面"><a class="markdownIt-Anchor" href="#导入前端页面"></a> 导入前端页面</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d8af2e9f8b1f4c52b8b881801c5d8c3b.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="导入"><a class="markdownIt-Anchor" href="#导入"></a> 导入</h3>
<p>在默认页面和前台页面的情况下，直接把这俩拖到resource目录下直接访问是访问不到的，因为被mvc框架拦截了<br />
所以我们要编写一个映射类放行这些资源</p>
<h4 id="创建配置映射类"><a class="markdownIt-Anchor" href="#创建配置映射类"></a> 创建配置映射类</h4>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/434a4b66a3534624ae8576c71d5e43ac.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ddb9c62315e74bfba369d3812b957453.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>访问成功<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124213742999.png" srcset="/img/loading.gif" lazyload alt="image-20221124213742999" /></p>
<h1 id="后台开发"><a class="markdownIt-Anchor" href="#后台开发"></a> 后台开发</h1>
<h2 id="数据库实体类映射"><a class="markdownIt-Anchor" href="#数据库实体类映射"></a> 数据库实体类映射</h2>
<p>用mybatis plus来实现逆向工程<br />
这里是老版本的逆向工程</p>
<p>​</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.30<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--mybatis-plus 代码生成器依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p>具体怎么玩看这里<br />
<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_48678547/article/details/123379415">MP逆向工程教程</a></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124213823750.png" srcset="/img/loading.gif" lazyload alt="image-20221124213823750" /></p>
<h1 id="账户操作"><a class="markdownIt-Anchor" href="#账户操作"></a> 账户操作</h1>
<h2 id="登陆功能"><a class="markdownIt-Anchor" href="#登陆功能"></a> 登陆功能</h2>
<p>前端页面<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/018840778788414d802ec5309034a30b.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7981e9e300884b3285073d4072fdd775.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/aa04438900b64014a89cbcb2115d9463.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>数据库</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124213937545.png" srcset="/img/loading.gif" lazyload alt="image-20221124213937545" />业务逻辑<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/257ae0d260b2430b8890d054fc72b65a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<strong>这里两个字符串的比较没法用! =来实现</strong>，只能equals再取反来判断<br />
直接上代码，这里没有涉及service层的操作</p>
<p>​</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> request 如果登陆成功把对象放入Session中，方便后续拿取</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> employee 利用<span class="hljs-doctag">@RequestBody</span>注解来解析前端传来的Json，同时用对象来封装</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@PostMapping(&quot;/login&quot;)</span><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(HttpServletRequest request, <span class="hljs-meta">@RequestBody</span> Employee employee)</span> &#123;<br>    String password=employee.getPassword();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> employee.getUsername();<br>    log.info(<span class="hljs-string">&quot;登陆&quot;</span>);<br>    <span class="hljs-comment">//MD5加密</span><br>    <span class="hljs-type">MD5Util</span> <span class="hljs-variable">md5Util</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MD5Util</span>();<br>    password=MD5Util.getMD5(password);<br>    <span class="hljs-comment">//通过账户查这个员工对象，这里就不走Service层了</span><br>    LambdaQueryWrapper&lt;Employee&gt; lambdaQueryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>();<br>    lambdaQueryWrapper.eq(Employee::getUsername, username);<br>    Employee empResult=employeeService.getOne(lambdaQueryWrapper);<br>        <span class="hljs-comment">//判断用户是否存在</span><br>    <span class="hljs-keyword">if</span> (!empResult.getUsername().equals(username))&#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;账户不存在&quot;</span>);<br>        <span class="hljs-comment">//密码是否正确</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!empResult.getPassword().equals(password))&#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;账户密码错误&quot;</span>);<br>        <span class="hljs-comment">//员工账户状态是否正常，1状态正常，0封禁</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (empResult.getStatus()!=<span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;当前账户正在封禁&quot;</span>);<br>        <span class="hljs-comment">//状态正常允许登陆</span><br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>        log.info(<span class="hljs-string">&quot;登陆成功，账户存入session&quot;</span>);<br>        <span class="hljs-comment">//员工id存入session，</span><br>        request.getSession().setAttribute(<span class="hljs-string">&quot;employ&quot;</span>,empResult.getId());<br>        <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">&quot;登陆成功&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="退出功能"><a class="markdownIt-Anchor" href="#退出功能"></a> 退出功能</h2>
<p>点击退出<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/09194dda97404a7db7a4438d056df2b6.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
删除session对象</p>
<p>​</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> request 删除request作用域中的session对象，就按登陆的request.getSession().setAttribute(&quot;employ&quot;,empResult.getId());删除employee就行</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@PostMapping(&quot;/logout&quot;)</span><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br>    <span class="hljs-comment">//尝试删除</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        request.getSession().removeAttribute(<span class="hljs-string">&quot;employ&quot;</span>);<br>    &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>        <span class="hljs-comment">//删除失败</span><br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;登出失败&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">&quot;登出成功&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="完善登陆添加过滤器"><a class="markdownIt-Anchor" href="#完善登陆添加过滤器"></a> 完善登陆（添加过滤器）</h2>
<p>这里的话用户直接url+资源名可以随便访问，所以要加个拦截器，没有登陆时，不给访问，自动跳转到登陆页面<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/470f1c39f58f4cb09ee3878195622ca1.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
过滤器配置类注解<code>@WebFilter(filterName=&quot;拦截器类名首字母小写&quot;，urlPartten=“要拦截的路径，比如/*”)</code><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/4cf893fe589242eba9be0c206389bc18.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" />判断用户的登陆状态这块之前因为存入session里面有一个名为employee的对象，那么只需要看看这个session还在不在就知道他是否在登陆状态<br />
注意，想存或者想获取的话，就都得用<code>HttpServletRequest</code>的对象来进行获取，别的request对象拿不到的</p>
<p>这里提一嘴<br />
调用Spring核心包的字符串匹配类的对象，对路径进行匹配，并且返回比较结果<br />
如果相等就为true</p>
<p><code>public static final AntPathMatcher PATH_MATCHER = new AntPathMatcher();</code></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a4e9e841bb7c43179bbcb2905d172a2c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
前端拦截器完成跳转到登陆页面，不在后端做处理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f0a1667cce664c35b64925c48dfb59f0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>拦截了，但是页面跳转不了。浏览器缓存原因。<code>Ctrl+F5</code>强制刷新</p>
<blockquote>
<p>这里可能有个疑问</p>
</blockquote>
<p><strong>urls</strong>中有<code>&quot;/backend/**&quot;,</code>，就是把<mark>backend</mark>目录下全部资源进行了放行，为什么访问 <strong><a target="_blank" rel="noopener" href="http://localhost:8080/backend/index.html">http://localhost:8080/backend/index.html</a></strong>还是不行。</p>
<p>原因：</p>
<ul>
<li>​	<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124214922289.png" srcset="/img/loading.gif" lazyload alt="image-20221124214922289" /></li>
<li>访问该页面，自动发送Ajax请求。该请求不允许未登录就访问。既被拦截</li>
<li><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124215131587.png" srcset="/img/loading.gif" lazyload alt="image-20221124215131587" /></li>
<li>前端拦截器进行了页面的跳转,（因为是Ajax请求，后端直接跳转好像是不行的。）</li>
</ul>
<h2 id="新增员工"><a class="markdownIt-Anchor" href="#新增员工"></a> 新增员工</h2>
<p>新增员工功能，（前端对手机号和身份证号长度做了一个校验）<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/966dd380180a47018ed362e125406271.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
请求 URL: <a target="_blank" rel="noopener" href="http://localhost:9001/employee">http://localhost:9001/employee</a> （POST请求）<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8bae2348243f4d0ebe58ce97aff511d3.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
改造一下Employee实体类，通用id雪花自增算法来新增id<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124215527273.png" srcset="/img/loading.gif" lazyload alt="image-20221124215527273" /></p>
<h2 id="全局异常处理"><a class="markdownIt-Anchor" href="#全局异常处理"></a> 全局异常处理</h2>
<p>先看看这种代码的try catch<br />
这种try catch来捕获异常固然好， <strong>但是 ，代码量一大起来，超级多的try catch就会很乱</strong><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/232dfeaca28f420cb0fd5fae01f4ce15.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
所以我们要加入全局异常处理，在Common包下，和Result同级，这里只是示例，并不完整<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b8da6a3931714deeb724381c0ad2da41.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/33fe7337e5464cf9b07a7f0a31f67a04.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
当报错信息出现Duplicate entry时，就意味着新增员工异常了<br />
所以，我们对异常类的方法进行一些小改动，让这个异常反馈变得更人性化<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b795bb06e106477192795c9fa56e15fa.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这个时候再来客户端试试，就会提供人性化的报错，非常的快乐~<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/39454913ca2a48778c8c25281a03ff06.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<strong>这回再回到Controller ，这时就不需要再来try catch这种形式了，不用管他，因为一旦出现错误就会被我们的AOP捕获。所以，不需要再用try<br />
catch来抓了</strong><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0e1e9a3feb7c4b7c8bfa1dc61286437f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="员工信息分页查询"><a class="markdownIt-Anchor" href="#员工信息分页查询"></a> 员工信息分页查询</h2>
<h3 id="接口分析"><a class="markdownIt-Anchor" href="#接口分析"></a> 接口分析</h3>
<p>老生常谈分页查询了<br />
需求<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3899bbef468e4224b6b26fa6a13e103c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
分页请求接口<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/288dd9777c1944d195cb421038fbc885.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3b9f9ddf4a304f44923ef89fa9b22ca7.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
查询员工及显示接口<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cc0e4ee9f4b14b8d9e2c12428471889d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e339d98a293a43c19d3c6a6252da428b.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
逻辑流程<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/50fa6620581044c69049028b6921f72e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="分页插件配置类"><a class="markdownIt-Anchor" href="#分页插件配置类"></a> 分页插件配置类</h3>
<p>加入配置类<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/928faf96126040248a6c7629433b8f4a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="接口设计"><a class="markdownIt-Anchor" href="#接口设计"></a> 接口设计</h3>
<p>前端注意事项<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0e4186ba7e804ab6b1b3c6b2a3f1ce05.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/eae2123e010e4d048e3b5a1339cf41ce.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
page对象内部<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/87eab00f37584a51bcee03f83d665e32.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
里面包含了查询构造器的使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * 员工信息分页查询</span><br><span class="hljs-comment">    *</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@param</span> page     int</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@param</span> pageSize int</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@param</span> name     java.lang.String</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@return</span> com.xyy.reggie.common.R&lt;com.baomidou.mybatisplus.extension.plugins.pagination.Page&gt;</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@author</span> 席子</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@GetMapping(&quot;/page&quot;)</span><br>   <span class="hljs-keyword">public</span> R&lt;Page&gt; <span class="hljs-title function_">page</span><span class="hljs-params">(<span class="hljs-type">int</span> page, <span class="hljs-type">int</span> pageSize, String name)</span> &#123;<br>       log.info(<span class="hljs-string">&quot;page = &#123;&#125;,pageSize = &#123;&#125;,name = &#123;&#125;&quot;</span>, page, pageSize, name);<br><br>       <span class="hljs-comment">//构造分页构造器</span><br>       <span class="hljs-type">Page</span> <span class="hljs-variable">pageInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(page, pageSize);<br><br>       <span class="hljs-comment">//构造条件构造器</span><br>       LambdaQueryWrapper&lt;Employee&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>();<br>       <span class="hljs-comment">//添加过滤条件</span><br>       queryWrapper.like(StringUtils.isNotEmpty(name), Employee::getName, name);<br>       <span class="hljs-comment">//添加排序条件</span><br>       queryWrapper.orderByDesc(Employee::getUpdateTime);<br><br>       <span class="hljs-comment">//执行查询</span><br>       employeeService.page(pageInfo, queryWrapper);<br><br>       <span class="hljs-keyword">return</span> R.success(pageInfo);<br>   &#125;<br><br></code></pre></td></tr></table></figure>
<p>​</p>
<h2 id="启用-禁用员工账号"><a class="markdownIt-Anchor" href="#启用-禁用员工账号"></a> 启用、禁用员工账号</h2>
<p>无非就是修改status，0禁用，1启用<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cbc14ff5649f4c3ab58a61f6a3717d55.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/00fd8c22798a4be0935fbe4706aac1a0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这种根据登陆人物来进行判断的玩法，是前端<br />
这个页面的位置<code>resource/backend/page/member/list.html</code><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/15cb1554d5014d91a50a1d33faff5f0e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
看拿出来的对象是什么样子的，如果是admin，vue的v-if指令就会把编辑按钮显示出来<br />
如果是普通用户，就会把编辑按钮隐藏<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/1a813cac7216496c9f007b2e89e94571.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="修复一个小bug"><a class="markdownIt-Anchor" href="#修复一个小bug"></a> 修复一个小Bug</h3>
<p>前端一直不显示编辑按钮，在localStorage里没有发现admin对象<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/656ddea591c644369951b448d9437162.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这个值不应该是登陆成功，应该是Employee的对象Json<br />
猜测是登陆的时候往request里存对象没存好<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e02134f0443f4cebaf01da0bebb88be3.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
改成对象存入就好了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3695c863613643ebb7c9d2fb6f44b1f2.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这回都正常了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f291200889854951bae0025d0c96d67f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="功能编写"><a class="markdownIt-Anchor" href="#功能编写"></a> 功能编写</h3>
<p>复习一下<br />
<strong>PutMapping是Resultful风格的请求方式</strong><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0dcd79a42b334bae8337cb40a73fd17c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
当前状态是1，直接带着目标状态值（状态改禁用）进行更新<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bbc8b8c97744496491c18389cf13f2f1.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
Id精度丢失，js独有的bug，直接处理Long处理不了，要Long转String再返回去</p>
<blockquote>
<p>这个要注意，我以前写项目的时候就遇到这个bug。巨坑</p>
</blockquote>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bd851e41062148db9a7d4b84b687372f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/65954dc589544fe1bc98a70d0a878936.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
利用对象转换器JacksonObjectMapper，将对象转Json  将Long型的Id转换为String类型的数据<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7b18d09c0e75446db59dab3f6f4f505a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>在MVC配置类中扩展一个消息转换器<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bc895faafbb247eb9e580f553d32d4e6.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
测试功能正常，正常更新员工状态<br />
消息扩展器配置位置：<code>com.xyy.common.JacksonObjectMapper</code><br />
对象映射器位置：<code>com.xyy.config.WebMvcConfig</code><br />
员工状态更新位置：<code>com.xyy.controller.EmployeeController</code></p>
<h2 id="编辑员工信息"><a class="markdownIt-Anchor" href="#编辑员工信息"></a> 编辑员工信息</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/83b635aff2ca4445840f24ef5c60a22b.png" srcset="/img/loading.gif" lazyload alt=" " /><br />
请求API，这个是先发请求，查到用户，然后填充到页面上<br />
可以看出来，这种请求方式是ResultFul风格的请求方式<br />
在控制器中要用@PathVariable(“/{参数名称}”)注解来进行接收<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7f1a236c859d418eb4aa1177cbf82543.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f7b34494b2eb42b8b315e9f7c2802956.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
完美更新</p>
<h2 id="公共字段自动填充"><a class="markdownIt-Anchor" href="#公共字段自动填充"></a> 公共字段自动填充</h2>
<p>像是一部分公共字段，反复填充起来没有意义，简化填充的操作。<br />
把这个功能拿出来，单独拎出来做自动填充处理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f6b5a68d4b8646aab2b39db34fba625a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/09eaaee0510849749512ef973529a4ed.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
为实体类属性上面加入注解<code>@TableField(fill = 填充条件)</code><br />
看一下源码。fill是填充条件，用枚举来进行处理的<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c41f5a745d6c48d5b944fbe2b81e5726.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
加完注解和条件不算完，还要加入配置类进行处理，对填充的数据做规定<br />
在common包下创建一个自定义类，最关键的是要实现<code>MetaObjectHandler接口下的insertFill和updateFill</code><br />
确认填充时需要的字段。还有要加入@Component注解，将这个类交给框架来管理，否则的话容易找不到,setValue的值会根据注解加入的字段名称来锁定是否需要更新<br />
位置：<code>com.xyy.common.MyMetaObjectHandler</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjecthandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 插入操作，自动填充</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> metaObject</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;公共字段自动填充[insert]...&quot;</span>);<br>        log.info(metaObject.toString());<br><br>        metaObject.setValue(<span class="hljs-string">&quot;createTime&quot;</span>, LocalDateTime.now());<br>        metaObject.setValue(<span class="hljs-string">&quot;updateTime&quot;</span>,LocalDateTime.now());<br><span class="hljs-comment">//        metaObject.setValue(&quot;createUser&quot;, BaseContext.getCurrentId());</span><br><span class="hljs-comment">//        metaObject.setValue(&quot;updateUser&quot;,BaseContext.getCurrentId());</span><br>        metaObject.setValue(<span class="hljs-string">&quot;createUser&quot;</span>,<span class="hljs-number">1L</span>);<br>        metaObject.setValue(<span class="hljs-string">&quot;updateUser&quot;</span>,<span class="hljs-number">1L</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 更新操作，自动填充</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> metaObject</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;公共字段自动填充[update]...&quot;</span>);<br>        log.info(metaObject.toString());<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> Thread.currentThread().getId();<br>        log.info(<span class="hljs-string">&quot;线程id为：&#123;&#125;&quot;</span>,id);<br><br>        metaObject.setValue(<span class="hljs-string">&quot;updateTime&quot;</span>,LocalDateTime.now());<br><span class="hljs-comment">//        metaObject.setValue(&quot;updateUser&quot;,BaseContext.getCurrentId());</span><br>        metaObject.setValue(<span class="hljs-string">&quot;updateUser&quot;</span>,<span class="hljs-number">1L</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>但是这里有个问题，如果我想去更新管理员字段是非常困难的，因为我这里拿不到Request的作用域对象，所以要想个办法来处理。<br />
这个时候就需要<code>ThreadLocal</code>来进行对象的获取，这个线程是贯穿整个运行的，可以通过他来获取</p>
<h3 id="使用时"><a class="markdownIt-Anchor" href="#使用时"></a> 使用时</h3>
<p>何为ThreadLocal<br />
<strong>重点来了</strong><br />
这个图<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a747301972964b88a7db5dc9d84995e6.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/62ec83c598a546b89722fef26f3ca4b4.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
我的思路就是在用户登陆的时候，把这个id存进去，等到在填充字段的时候，从ThreadLocal里把这个资源再拿出来。<br />
直接操作不太好，把他封装成一个工具类，这个工具类里方法都是静态的，可以通过类直接调用、并且都是静态方法，来操作保存和读取<br />
我选择在Utils下创建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 基于ThreadLocal封装工具类，用户保存和获取当前登录用户id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseContext</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;Long&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 设置值</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCurrentId</span><span class="hljs-params">(Long id)</span>&#123;<br>        threadLocal.set(id);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取值</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    pub<br></code></pre></td></tr></table></figure>
<blockquote>
<p>注意，ThreadLocal不是一个线程，只有同一个线程才能拿到，不是一个线程拿不到的</p>
</blockquote>
<h3 id="这样也行"><a class="markdownIt-Anchor" href="#这样也行"></a> 这样也行</h3>
<p>换个思路：因为我想拿Request对象里的Id嘛，所以，只要有Request的id就行，不必过于执着一定要用ThreadLocal来存，因此，我这里选择注入一下HttpServletRequest对象来解决这个问题。<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/58b8b8d5442a4da29ef667430a521262.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="分类管理页面"><a class="markdownIt-Anchor" href="#分类管理页面"></a> 分类管理页面</h1>
<h2 id="菜品分类"><a class="markdownIt-Anchor" href="#菜品分类"></a> 菜品分类</h2>
<h3 id="菜品分类展现"><a class="markdownIt-Anchor" href="#菜品分类展现"></a> 菜品分类展现</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9dc65e03155d4e29b1dd85b73e79468c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
还是那几步</p>
<pre><code class="hljs">1. 创建分页构造器 Page pageInfo = new Page(第几页,每页几条数据);
2. 如果有需要条件过滤的加入条件过滤器LambaQueryWarpper
3. 注入的service对象（已经继承MP的BaseMapper接口）去调用Page对象  
   service对象.page(分页信息,条件过滤器)

4. 返回结果就可以了
</code></pre>
<p>分页查询位置：<code>com.xyy.controller.CategoryController.page</code></p>
<h3 id="新增菜品分类"><a class="markdownIt-Anchor" href="#新增菜品分类"></a> 新增菜品分类</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2c38b870546f49bd9a9d00572c2f1578.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>涉及的表有分类表category<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5c9af552c151402d99d419b44601110a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
业务流程<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0e55226139a848f4ba8a792c62a6feb3.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>请求方式是Post请求<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d43ee4cb2aeb4259abe4129cb1672978.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dc4cdb56b1ff40039d61b044f0259ea4.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
控制器位置：<code>com.xyy.controller.CategoryController (save)</code></p>
<h3 id="删除菜品分类"><a class="markdownIt-Anchor" href="#删除菜品分类"></a> 删除菜品分类</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d3c5ede5188a46caa8bef24e4c14b9fb.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e35caef5f5d8421aae24cfc2832fe3d0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
普通版本，没有考虑分类有关联的情况</p>
<blockquote>
<p>注意</p>
</blockquote>
<p>这里有个坑，前端传过来的请求是</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125153246807.png" srcset="/img/loading.gif" lazyload alt="image-20221125153246807" /></p>
<p>参数名字是 <strong>ids</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/62d820a820634bcc841b41bcc0bc3987.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
完善一下， <strong>如果当前菜品分类下有菜品的话 ，就不许删除</strong><br />
所以在删除之前要先做判断才可以删除，不符合条件的，我们要抛出异常进行提示<br />
因为没有返回异常信息的类，我们这里要做一个自定义的专门返回异常信息的类<code>CustomerException</code><br />
这个类的位置也在common包下<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/40de841c594443398553b1509512fa5e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
因为我们之前创建了一个全局异常处理，也要用上，因为要拦截异常统一处理<br />
还是<code>com.xyy.common.GloableExceptionHandler</code><br />
对抛出异常进行处理，就可以对新增的异常提供目标的拦截和异常通知<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/035d8b14a54f4cb1bffcd4c63673d0f8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
删除菜品分类的controller接口在：<code>com.xyy.controller.CategoryController (delCategory)</code><br />
因为业务特殊，且比较长，就分离出来把业务放在service包下<br />
service接口位置：<code>com.xyy.service.impl.CategoryServiceImpl (removeCategory)</code></p>
<h2 id="修改套餐信息"><a class="markdownIt-Anchor" href="#修改套餐信息"></a> 修改套餐信息</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e6c29b9b209c4881815bdffa24f571e8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
非常简单的CRUD，直接调用MP更新一下就行<br />
API位置</p>
<p>​<br />
​    com.xyy.controller.CategoryController (updateCategory)</p>
<h2 id="文件上传下载重点"><a class="markdownIt-Anchor" href="#文件上传下载重点"></a> 文件上传下载（重点）</h2>
<h3 id="上传逻辑"><a class="markdownIt-Anchor" href="#上传逻辑"></a> 上传逻辑</h3>
<p>第一次接触上传和下载的功能<br />
文件上传逻辑（后端）<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6fddfbb6992645358dd6f7fc9e7ed79d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
参数名有要求的<br />
接收的文件类型一定是 方法名(MultipartFile 前端上传的文件名称)<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dee0540b7de5467ea6695e058a833b7f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b0f446d645654cd89577b9ba0a369f34.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
所以后端的接收名字也得改为file<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8d04a387872f43f199fadcd1d2c79090.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="上传逻辑实现"><a class="markdownIt-Anchor" href="#上传逻辑实现"></a> 上传逻辑实现</h3>
<p>具体的存储路径写在配置文件里了</p>
<ol>
<li>
<p>application.yml</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125185250894.png" srcset="/img/loading.gif" lazyload alt="image-20221125185250894" /></p>
</li>
<li>
<p><strong>controller</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java">RestController<br><span class="hljs-meta">@RequestMapping(&quot;/common&quot;)</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonController</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;takeOutFile.fileLocation:&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String filePath;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 文件上传</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> file org.springframework.web.multipart.MultipartFile</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> com.xyy.reggie.common.R&lt;java.lang.String&gt;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> 席子</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(&quot;/upload&quot;)</span><br>    <span class="hljs-keyword">public</span> R&lt;String&gt; <span class="hljs-title function_">upload</span><span class="hljs-params">(MultipartFile file)</span> &#123;<br><br>        <span class="hljs-comment">//原始文件名</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">originalFilename</span> <span class="hljs-operator">=</span> file.getOriginalFilename();<br>        <span class="hljs-keyword">assert</span> originalFilename != <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">suffix</span> <span class="hljs-operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>));<br><br>        <span class="hljs-comment">//使用UUID重新生成文件名，防止文件名称重复造成文件覆盖</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString() + suffix;<br><br>        <span class="hljs-comment">//创建一个目录对象</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-comment">//判断当前目录是否存在</span><br>        <span class="hljs-keyword">if</span> (!dir.exists()) &#123;<br>            <span class="hljs-comment">//目录不存在，需要创建</span><br>            dir.mkdirs();<br>        &#125;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            file.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(dir.getAbsolutePath() +File.separator+ fileName));<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> R.success(fileName);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 文件下载</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name     java.lang.String</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response javax.servlet.http.HttpServletResponse</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> 席子</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(&quot;/download&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">download</span><span class="hljs-params">(String name, HttpServletResponse response)</span> &#123;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//输入流，通过输入流读取文件内容</span><br>            <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath +File.separator+  name));<br><br>            <span class="hljs-comment">//输出流，通过输出流将文件写回浏览器</span><br>            <span class="hljs-type">ServletOutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> response.getOutputStream();<br><br>            response.setContentType(<span class="hljs-string">&quot;image/jpeg&quot;</span>);<br><br>            <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-keyword">while</span> ((len = fileInputStream.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                outputStream.write(bytes, <span class="hljs-number">0</span>, len);<br>                outputStream.flush();<br>            &#125;<br><br>            <span class="hljs-comment">//关闭资源</span><br>            outputStream.close();<br>            fileInputStream.close();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
<li>
<p>效果</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125185348635.png" srcset="/img/loading.gif" lazyload alt="image-20221125185348635" /></p>
</li>
</ol>
<blockquote>
<p>SpringBoot文件上传下载怎么使用就不说了，说说怎么使用<strong>相对路径</strong>把文件存储到项目根目录去</p>
</blockquote>
<ol start="4">
<li>
<p>代码分析</p>
<ol>
<li>
<p>我们使用<code>MultipartFile的transferTo()</code>进行文件本地持久化</p>
</li>
<li>
<p>但是<code>MultipartFile的transferTo()</code>方法会监测传入其中的File对象的路径是否为绝对路径，如果不是绝对路径，<mark>会自动拼接application里设置的路径 和 \work\Tomcat\localhost\ROOT</mark>。</p>
<p>所以出现</p>
<p>java.io.FileNotFoundException: C:\Users\XXX\AppData\Local\Temp\tomcat.8080.6103676472064121995\work\Tomcat\localhost\ROOT\src\main\resources\takeOutFiled10b193c1-c840-4570-88c3-874ef18e73b5.png (系统找不到指定的路径。)</p>
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125190148520.png" srcset="/img/loading.gif" lazyload alt="image-20221125190148520" style="zoom: 100%;" />
</li>
<li>
<p>只要给它一个绝对路径就可以了</p>
</li>
<li>
<p><code>file.transferTo(new File(dir.getAbsolutePath() +File.separator+ fileName));</code></p>
<p><code>dir.getAbsolutePath()</code> 得到储存文件目录的绝对路径</p>
<p><code>File.separator</code> 就是   <strong>/</strong></p>
<p><code>fileName</code> 你要存储的文件名</p>
</li>
</ol>
</li>
</ol>
<p>具体位置在<code>com.xyy.controller.CommonController (upLoadFile)</code></p>
<h3 id="下载逻辑"><a class="markdownIt-Anchor" href="#下载逻辑"></a> 下载逻辑</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9748d9f84a224b329f2035afcf31091d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
图片回显功能<br />
用到了输入输出流<br />
位置：<code>com.xyy.controller.CommonController (fileDownload)</code></p>
<h1 id="菜品管理页面"><a class="markdownIt-Anchor" href="#菜品管理页面"></a> 菜品管理页面</h1>
<h2 id="新增菜品"><a class="markdownIt-Anchor" href="#新增菜品"></a> 新增菜品</h2>
<h3 id="需求分析"><a class="markdownIt-Anchor" href="#需求分析"></a> 需求分析</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/307c50613cf9427eb8af9ca1edf35f10.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
涉及表为dish和dish_flavor<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2bee4656682c429093d0b487f7453028.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
开发逻辑<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0c69f61ce4e84e87b2f70cef256a597c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="新增实现"><a class="markdownIt-Anchor" href="#新增实现"></a> 新增实现</h3>
<p>由于是多表的操作，MP直接干肯定不行，所以就把service层抽离出来进行处理</p>
<p>还有，因为涉及两张表，这里还要加入事务进行控制，防止多表操作崩溃</p>
<p>​    多表操作只能一个一个来，MP没有办法一次性操作多张表<br />
​    因为涉及到多表的问题，所以还要加入注解来处理事务<br />
​    @Transactional 开启事务<br />
​    @EnableTransactionManagement 在启动类加入，支持事务开启</p>
<p>Controller位置：<code>com.xyy.controller.DishController (addDish)</code><br />
Service位置：<code>com.xyy.service.DishService</code><br />
ServiceImpl位置：<code>com.xyy.service.impl.DishServiceImpl (addDishWithFlavor)</code></p>
<h3 id="新增菜品之获取菜品种类"><a class="markdownIt-Anchor" href="#新增菜品之获取菜品种类"></a> 新增菜品之获取菜品种类</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/260620e272564731a10cf74b24d47b95.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
从前端接收一个type=1的标注，目的是在分类表中，菜品分类是1，套餐分类是2，把二者区分开，获取所有的菜品类型<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c139415e958e4a4d81a9687d3f04a524.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
位置：<code>com.xyy.controller.CategoryController （listCategory）</code></p>
<h3 id="菜品分页"><a class="markdownIt-Anchor" href="#菜品分页"></a> 菜品分页</h3>
<p>顺手把菜品分页也做了，不写太多了，位置在：<code>com.xyy.controller.CategoryController （dishPage）</code><br />
记录一个知识点，如果说后端没有类和前端要的数据对应，那么自己就可以封装一个类来对前端特殊需要的数据进行封装</p>
<h2 id="dto对象"><a class="markdownIt-Anchor" href="#dto对象"></a> DTO对象</h2>
<p>这个类可以是对一些实体类进行扩展，继承于某个父类，再添加一些内容<br />
比如Dish和DishDto<br />
DishDto就继承于Dish类，并在此基础上进行了扩展<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c20e2473b88b49f684764ddab99f9cfb.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a365d359125f498799f4b96a8e43fd0a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="更新菜品信息"><a class="markdownIt-Anchor" href="#更新菜品信息"></a> 更新菜品信息</h2>
<p>就是个update<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e48ab4407978498d8321be25c5da40a0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
逻辑<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/31c8e202fea94bcf8a775644996a6cc5.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
注意，这里回显数据是要用DishDto，因为前端要显示口味等信息，这里如果用Dish是无法完美显示的，所以要用DishDto</p>
<h3 id="回显填充查询"><a class="markdownIt-Anchor" href="#回显填充查询"></a> 回显填充查询</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7fd4eb56b06542b490e056bc8989a12c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>除此之外，这是个多表联查，用MP肯定不行，得自己写<br />
Controller位置：<code>com.xyy.controller.DishController (updateDish)</code><br />
Service位置：<code>com.xyy.service.DishService</code><br />
ServiceImpl位置：<code>com.xyy.service.impl.DishServiceImpl</code></p>
<h3 id="更新实现"><a class="markdownIt-Anchor" href="#更新实现"></a> 更新实现</h3>
<p>实际上就是两个表联动更新和删除操作，所以MP直接操作是不可以的，所以要在Service层自己再封装一个删除方法，给Controller层调用删除就行<br />
对于Dish对象可以直接进行更新，因为DishDto是Dish的子类<br />
因此可以调用DishService的update方法传入DishDto对象，来实现Dish的更新<br />
Controller位置：<code>com.xyy.controller.DishController (updateDish)</code><br />
确实和上面那个一样，因为请求方式不一样<br />
Service位置：<code>com.xyy.service.DishService</code><br />
ServiceImpl位置：<code>com.xyy.service.impl.DishServiceImpl (updateDishWithFlavor)</code></p>
<h3 id="其他功能"><a class="markdownIt-Anchor" href="#其他功能"></a> 其他功能</h3>
<p>完成一些小功能的开发<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b4b59c021748427c87fa6edc48619920.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h4 id="停售功能"><a class="markdownIt-Anchor" href="#停售功能"></a> 停售功能</h4>
<p>就是把数据库的status值更新一下，两个路径，一个启售，一个停售<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f1da740301ed403399148b6d9afb31f5.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
停售请求路径<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2969987e765b4a8e8b4fd71b772bcfa0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
如果状态不一样了，会从停售变成启售，同时对应的请求路径也不一样<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/335331ee558541e089128ff2b36faa6e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f3b5006617a144c2a50cf48e91daf7db.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
Controller位置：<code>com.xyy.controller.DishController (updateStatusStop)</code>停止<br />
Controller位置：<code>com.xyy.controller.DishController (updateStatusStart)</code>启动</p>
<h4 id="删除功能"><a class="markdownIt-Anchor" href="#删除功能"></a> 删除功能</h4>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2e291e2e9a5941dbafb90caed4c894a2.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
菜品删除功能<br />
完成逻辑删除，不是真删<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2b84f5bc3cd54e1997a87f5768f0b48a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
位置：<br />
Controller位置：<code>com.xyy.controller.DishController (deleteDish)</code>停止</p>
<h1 id="套餐页面"><a class="markdownIt-Anchor" href="#套餐页面"></a> 套餐页面</h1>
<p>实际上就是一组菜品的集合</p>
<h2 id="新增套餐概述"><a class="markdownIt-Anchor" href="#新增套餐概述"></a> 新增套餐概述</h2>
<p>涉及到的数据库<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/490ee26fc870424092c6f06b3b637de2.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6ab0bc680c2d40d48da71becdf139330.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/458f7e16da474362ad0f5b49656bdc06.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
导入SetmealDto<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9f5bd7dfcecc4c5a95d3ce1a48358980.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0bb88c91dfba4c759e8cca3eb574682e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="新增套餐之菜品列表"><a class="markdownIt-Anchor" href="#新增套餐之菜品列表"></a> 新增套餐之菜品列表</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7b242922f194454cbce663c939c19fe8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/fd6a01bbfbee43a1b7ff6b420815ef7f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
Controller位置：<code>com.xyy.controller.DishController (listCategory)</code></p>
<h2 id="新增套餐实现"><a class="markdownIt-Anchor" href="#新增套餐实现"></a> 新增套餐实现</h2>
<p>和新增菜品差不多，这里也是多表的操作<br />
Controller位置：<code>com.xyy.controller.SetmealController (saveSetmeal)</code><br />
Service位置：<code>com.xyy.service.SetmealService</code><br />
ServiceImpl位置：<code>com.xyy.service.impl.SetmealServiceImpl(saveWithDish)</code></p>
<h2 id="套餐分页"><a class="markdownIt-Anchor" href="#套餐分页"></a> 套餐分页</h2>
<p>这里的套餐分页和以往不同，设计到了多表内容<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/28b34889b2e4467c9e3e4a79aa3d2d18.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
套餐分页Controller位置：<code>com.xyy.controller.SetmealController.pageList</code><br />
套餐Mapper接口位置：<code>com.xyy.mapper.SetmealMapper</code><br />
Mapper文件位置：<code>resource.mapper.SetmealMapper</code><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a02a17ef6b8648a59e2b90ef9ec70a3f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="更新套餐"><a class="markdownIt-Anchor" href="#更新套餐"></a> 更新套餐</h2>
<p>添加套餐和更新套餐是几乎完全一致的，字段巴拉巴拉的都一样<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5bf7c40f7b9147b7a093da18ae860952.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
但是注意，修改套餐的话，需要先对菜品页面进行填充，这一页都是需要填充满要修改的菜品信息的。<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/07c01da9636d4643acea8689f2579f82.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
先发请求，一看就是Restful风格请求<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cb797ab490434dd2ad5de3e282e3f4c4.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
获取套餐Controller位置：<code>com.xyy.controller.SetmealController.getSetmal</code></p>
<h2 id="更新销售状态"><a class="markdownIt-Anchor" href="#更新销售状态"></a> 更新销售状态</h2>
<p><img src="https://img-blog.csdnimg.cn/53db02cdb6fd4574b2471bdaf7825d78.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://img-blog.csdnimg.cn/f2158ec7d2924b2eb17e2ef7b92fc6f3.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
和之前一个业务逻辑很像，不想多赘述了，直接放接口位置<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bb10511b3fd14b398095865065700680.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>Controller位置：<code>com.xyy.controller.SetmealController (startSale/stopSale)</code></p>
<h2 id="删除套餐"><a class="markdownIt-Anchor" href="#删除套餐"></a> 删除套餐</h2>
<p>可以单独删，也可以批量删，接口是万金油，都能接，主要看传来的数据是几个<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/734b880bdf304e70bb9376ecebcd3d15.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/730459957d464af3827df49084205353.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
接口<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/678ea2f5eb194625a05567061bba5ad0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
== 多表删除，在Controller直接实现不太现实，所以要在Service把业务写好==<br />
Controller位置：<code>com.xyy.controller.SetmealController (deleteSetmeal)</code><br />
Service位置：<code>com.xyy.service.SetmealService</code><br />
ServiceImpl位置：<code>com.xyy.service.impl.SetmealServiceImpl(removeWithDish)</code><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bb4351bafe314861b6c775620f39641e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="前台开发手机端"><a class="markdownIt-Anchor" href="#前台开发手机端"></a> 前台开发（手机端）</h1>
<h1 id="账户登陆"><a class="markdownIt-Anchor" href="#账户登陆"></a> 账户登陆</h1>
<h2 id="短信发送"><a class="markdownIt-Anchor" href="#短信发送"></a> 短信发送</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6db71e2024264927a59a3ae59bca5890.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/56cadd94e4de4536aec20ff921842039.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_55106682/article/details/121920826">阿里云短信业务教程</a></p>
<h3 id="代码实现"><a class="markdownIt-Anchor" href="#代码实现"></a> 代码实现</h3>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/112148.html">官方文档地址</a><br />
导入Maven</p>
   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.5.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-java-sdk-dysmsapi<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ca8d01eaf61a485a9e0edae0c0307c3a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
导入短信登陆的工具类，把ACCESSKeyID和Secret更换到位就行<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/fab29b651545452b8aaf515717a3244d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="验证码发送"><a class="markdownIt-Anchor" href="#验证码发送"></a> 验证码发送</h2>
<p>数据模型user表，手机验证码专用的表<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/582420e32f9449699765ad9db8f665bc.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
开发流程<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/03e0ad86bbda4229b8985e6644e2e5f7.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
修改拦截器，放行操作<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2c136ec0905248328f25be7e137b2da0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://img-blog.csdnimg.cn/15b21dad09be44bfa030984f5f4c1731.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
controller位置：<code>com.xyy.controller.UserController （sendMsg）</code><br />
发送完还需要验证，验证就是另一个login了</p>
<h2 id="用户登陆"><a class="markdownIt-Anchor" href="#用户登陆"></a> 用户登陆</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/16f3f2b8f68948b0b4f2e01133adc6ce.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
controller位置：<code>com.xyy.controller.UserController （login）</code><br />
这里登陆还涉及到过滤器放行的功能，不要忘记了，把用户id存入session，过滤器会进行验证<br />
过滤器<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/16d1b1cf6fa54b408d9b5bcd495962f5.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
controller<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7da50768c0b043f3a9a5f3dbce6915c1.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="前台页面"><a class="markdownIt-Anchor" href="#前台页面"></a> 前台页面</h1>
<h2 id="导入用户地址簿"><a class="markdownIt-Anchor" href="#导入用户地址簿"></a> 导入用户地址簿</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/732d6d4d8bba4911b903055d7a2003cf.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
地址表<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e45d3cd4c91e4619a21a3342d4683508.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这里直接导入现成的AddressBookController，没有自己写</p>
<p>​    com.xyy.controller.AddressBookController</p>
<h2 id="菜品展示"><a class="markdownIt-Anchor" href="#菜品展示"></a> 菜品展示</h2>
<p>逻辑梳理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/db2983fb1a8a46bc85f4836dae41a24c.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c7e3567ea3f94b718e33ba680e573121.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
修改DishController的list方法，来符合前台请求的要求<br />
controller位置：<code>com.xyy.controller.DishController （listCategory）</code><br />
套餐内菜品Controller：<code>com.xyy.controller.SetmealController （list）</code></p>
<h2 id="购物车"><a class="markdownIt-Anchor" href="#购物车"></a> 购物车</h2>
<p>把菜品加入购物车<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/159ef74addd64f60bfa9d9a44bf22d64.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3b7b1d5d90d949cb94c6c4f77a2f9d96.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
逻辑梳理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/48b1358d65a8418689ada067bc6fbdd2.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
注意，这里不需要后端去管总价的计算，就是单价*数量的这个操作，不是后端的内容。前端在展示的时候自己就计算了。<br />
位置：<code>com.xyy.controller.ShoppingCartController （add）</code></p>
<h2 id="下单"><a class="markdownIt-Anchor" href="#下单"></a> 下单</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/37b2f6bb4b2e4d82942e38ceea4bbc78.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
对应的两个表，一个是orders表，另一个是orders_detail表</p>
<p>orders表<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/37f1f4d9aec2474ab3578ad01062abf9.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
orders_detail表<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d07d325b341841e787117d1f12d727e0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
交互流程<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/04bfdd8093cb41f7956332bb1561e12f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
业务比较复杂，在Service里写的<code>com.xyy.service.impl.OrdersServiceImpl</code></p>
<p>至此基础部分完成，开始对项目性能进行优化</p>
<h1 id="小知识点总结"><a class="markdownIt-Anchor" href="#小知识点总结"></a> 小知识点总结</h1>
<h3 id="requestbody的使用"><a class="markdownIt-Anchor" href="#requestbody的使用"></a> @RequestBody的使用</h3>
<p>只有传来的参数是Json才能用RequestBody接收，如果不是Json的情况（比如那种？key=value&amp;key=value）是不可以用的，会400错误<br />
<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44062380/article/details/116103642">关于RequestBody何时使用</a></p>
<h1 id="缓存优化"><a class="markdownIt-Anchor" href="#缓存优化"></a> 缓存优化</h1>
<p>基于Redis进行缓存优化<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/017c0aab4eb345d68ba9a5a309e78c7a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="环境搭建"><a class="markdownIt-Anchor" href="#环境搭建"></a> 环境搭建</h2>
<h3 id="redis进行配置"><a class="markdownIt-Anchor" href="#redis进行配置"></a> Redis进行配置</h3>
<p>加入Pom文件</p>
   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--导入Redis依赖--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>yml中加入配置<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a737f91d8934469ca405f2acf279272d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="短信验证码-登陆优化"><a class="markdownIt-Anchor" href="#短信验证码-登陆优化"></a> 短信验证码、登陆优化</h2>
<p>给验证码加入有效时间的验证，设置好短信验证码的有效时间<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dd9f7fcb4dd948b380008dd1d769e535.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
如果登陆成功，就自动删除缓存中的验证码<br />
优化位置：com.xyy.controller.UserController sendMsg和login<br />
注入RedisTemplete<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e881a9dc80a740aab43c8bc30f45a91f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
针对验证码进行优化<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/4139a4aebf384f8e958f0587c7fe4acb.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
针对登录后进行优化<br />
login方法中<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ccc12a60c924407bb8c859aa66b61c38.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/24b7a6e20b7840e1a868dea4be2f0787.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这里过滤器也要改，因为登陆的id数据由session变成了redis存放，所以要把过滤器的相关部分进行改造</p>
<p>​<br />
​    com.xyy.filter.LoginCheckFilter</p>
<p>同样要先注入RedisTemplate<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bb4030b56bd64c6dbdc5633c67e4bbfb.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="缓存前台菜品数据"><a class="markdownIt-Anchor" href="#缓存前台菜品数据"></a> 缓存前台菜品数据</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/32925b5c084942ecb5f5f9aa153a6d96.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
缓存思路，要保证缓存数据库和DBMS内的数据保持同步，避免读到脏数据（没更新的数据）<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ed16b6270e734adaaf78058373894604.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
对DishController进行优化，加入了缓存<br />
再次访问可以发现，如果已经缓存过了当前的菜品分类，就不会再查数据库了</p>
<h3 id="更新菜品同时更新缓存"><a class="markdownIt-Anchor" href="#更新菜品同时更新缓存"></a> 更新菜品同时更新缓存</h3>
<p>保证少出现脏数据，所以加入清理缓存，不及时清理的话，新数据保存上来，列表数据库无法同步更新。就会出现问题。<br />
这里清理精确数据。大面积清缓存也是比较费性能的<br />
这种就是全清理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/60b7f47bf7d24be0bec55a2309e1f227.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这种是精确清理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/958c3fd2cb824012af93adfd54d4ea24.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="springcache"><a class="markdownIt-Anchor" href="#springcache"></a> SpringCache</h2>
<h3 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a59b7272acce47e98a6bd7505772e071.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="springcache常用注解及功能"><a class="markdownIt-Anchor" href="#springcache常用注解及功能"></a> SpringCache常用注解及功能</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/768c769e2725422f88530feca96d70b8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="快速起步"><a class="markdownIt-Anchor" href="#快速起步"></a> 快速起步</h3>
<p>启动类上要加入<code>@EnableCaching</code>注解，启用缓存框架<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d29b058bff0d4269aa35202a9e35143d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h4 id="cacheput注解"><a class="markdownIt-Anchor" href="#cacheput注解"></a> @CachePut注解</h4>
<p>缓存方法返回值，缓存一条或者多条数据<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0d18d4dcaad54cc7814e3fa1a82ed8c8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h4 id="cacheevict注解"><a class="markdownIt-Anchor" href="#cacheevict注解"></a> @CacheEvict注解</h4>
<p>删除缓存<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ae87712409804775b614bebb226e8896.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h4 id="cacheable注解"><a class="markdownIt-Anchor" href="#cacheable注解"></a> @Cacheable注解</h4>
<p>先看看Spring是否已经缓存了当前数据，如果已经缓存那么直接返回。<br />
如果没有缓存就直接缓存到内存里<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c2e3aa34ea3442d894543d105ebb9b41.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
一些特殊情况，condition属性和Unless属性<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ec27f124b8c047e08a8b95af613ed922.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>前面都是用SpringCache自带的缓存容器，性能肯定比不了Redis<br />
所以现在开始引入Redis作为SpringCache缓存的产品<br />
切换为Redis作为缓存产品</p>
<h4 id="springcache-redis"><a class="markdownIt-Anchor" href="#springcache-redis"></a> SpringCache-Redis</h4>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8dae4993b8494af598d870917e46ba56.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
导入jar包<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/afdfe6133e254348a03303db222f1762.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
注入相对应的缓存产品Manager就可以了，这里以RedisManager为例<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/69344c2b79044bb7a354d96cb148d495.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="利用springcache-redis来缓存套餐数据"><a class="markdownIt-Anchor" href="#利用springcache-redis来缓存套餐数据"></a> 利用SpringCache-Redis来缓存套餐数据</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ffd8677c072d4697971562d1a96134bc.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
启动类上要加入<code>@EnableCaching</code>注解，启用缓存框架<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d29b058bff0d4269aa35202a9e35143d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
加入注解时的坑<br />
这里相当于是从Return中拿到Setmeal中的属性，但是Return时的数据是Result封装的Setmeal数据，显然无法完成序列化，这里也是需要对Result类进行序列化的改造<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f1309a8146514e37bb8078ef9b0cc7ca.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
继承序列化类，使其可以序列化<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f25595d9069441d1adf22a469e842c09.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
=此时就完成了缓存的优化，此时如果缓存中有当前value名字的缓存，就自动返回，如果没有就查询一下。当前缓存自动过期的时间在yml里面有详细配置</p>
<p>保存套餐方法缓存优化<br />
一保存套餐，对应的缓存就得删除，因为数据更新了要重新获取<br />
还有更新套餐，理由同上<br />
删除方法要加<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0896df7570f843a19afb69975c4a328f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
保存方法也要加<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3206a5c50388428ea4809425d083bc72.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="数据库优化"><a class="markdownIt-Anchor" href="#数据库优化"></a> 数据库优化</h1>
<h2 id="mysql读写分离"><a class="markdownIt-Anchor" href="#mysql读写分离"></a> MySQL读写分离</h2>
<p>将单点数据库改成分布式的数据库服务器<br />
主写从读。<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/95b2e61b3c594adeac1732bcc6d719d6.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/be32928754c8409785c39f857ee78381.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="mysql主从复制搭建"><a class="markdownIt-Anchor" href="#mysql主从复制搭建"></a> MySQL主从复制搭建</h2>
<h3 id="主库设置"><a class="markdownIt-Anchor" href="#主库设置"></a> 主库设置</h3>
<p>主从复制架构图<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c72d940c5ff143ea834e53e05fb4db83.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
以上就可以做到主库数据和从库数据保持同步</p>
<p>对主库进行配置<br />
Linux改法<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/71faca81d5524f7f81249639ec421334.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>​    log-bin=mysql-bin #启动二进制<br />
​    server-id=100 #唯一id</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/07f64dd342a54a02bb9db8055535c02d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>windows改法</p>
<p>在mysql安装路径下<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ddcf86e4bfc344c3874a528909018c4d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d85b28a9fe5c4fdebb9bef5d96717860.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>修改好了重启MySQL</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/841a999f27fe4910baf41c7ba6728ad7.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
windows版本的重启教程在这里<br />
<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_31444279/article/details/113223859">重启mysql</a></p>
<p>=======================================================</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/06539e930d864f08831019eed03e50c0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>​<br />
​    GRANT REPLICATION SLAVE ON*.*to’xiaoming’@’%'identified by ‘Root@123456’;</p>
<p>这里我把本地的MySQL作为主机，把阿里云作为从机<br />
运行一下权限SQL<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bbbc91e5cd674f60a0e3765c1e3a477b.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>查看主机状态<code>show master status;</code><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2c46f23083eb4d009cee681610f20467.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="从库设置"><a class="markdownIt-Anchor" href="#从库设置"></a> 从库设置</h3>
<p>从库这里选择了阿里云<br />
还是先修改配置文件，加入端口id<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/59c47eb35c4748948c96ac6bf1a0eb17.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b8ac44ce50c546b5bfeb507a0ab7ef4f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
第二步还是从库重启（Linux中）<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5f1f8347417441ccb00d15c08ff5cb5a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
第三部，设置连接到主机<br />
运行SQL<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dda57b14af0845aca9056e4788a34fea.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>运行一下<br />
具体的可以去从机用show master status查看</p>
<p>​<br />
​    change master to master_host=‘ip’,master_user=‘xiaoming’,master_password=‘Root@123456’,master_log_file=‘mysql-bin.eo0001’,master_log_pos=主机的position</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/1f88d8237d804843849777aa1c3e0f4e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e9080c8d03a24206a4a00b553b1c9ade.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
这里我是两台服务器，一台docker安装的mysql（从机）<br />
另一台是普通安装的mysql做主机，配置过程中遇到了很多问题，参考了下面的链接<br />
<a target="_blank" rel="noopener" href="https://blog.csdn.net/xizhen2791/article/details/123660049">参考教程</a></p>
<p>一定一定记着上面从机连接命令运行成功后要启动从机也就是</p>
<p>​<br />
​    slave start</p>
<p>最后运行<code>start slave</code>就算是执行成功了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cf6e9e14501149a197b7a6cc329cc1d0.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
查看一下从机状态</p>
<p>​<br />
​    show slave status</p>
<p>这样就算搭建好了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/54747e8178044d8c9f68a7ecf1862bb7.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="测试"><a class="markdownIt-Anchor" href="#测试"></a> 测试</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e471059730274a98a3a6b2e71728724f.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dc067197d93b4799a37e5d51f28c5736.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5657bb24170a4fbe8a9139b954934164.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
到这里就算搭建完成了</p>
<h3 id="遇到的问题"><a class="markdownIt-Anchor" href="#遇到的问题"></a> 遇到的问题</h3>
<p>这里遇到的问题，连不上<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cbb888adff9c45be994e4087e528d9dc.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
想本地当主机，外网当从机好像不太行，我就又弄了台服务器做读写分离</p>
<p>搞到了从机之后，就开始配置，安装MySQL等等</p>
<p>有的时候会提示io冲突，这是因为之前的从机没有关闭，关闭一下就可以了<br />
<code>stop slave</code> 一下 就可以运行了</p>
<p>一个从机启动命令忘记了，改了一晚上<br />
如果不运行从机启动就会变成这样<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/85ee4381b01c44ccb0777995ba042e46.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="主写从读实战"><a class="markdownIt-Anchor" href="#主写从读实战"></a> 主写从读实战</h2>
<h3 id="概述-2"><a class="markdownIt-Anchor" href="#概述-2"></a> 概述</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f141bcd96b9840bd8a4e1295055408a1.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
难么如何去确定来的SQL应该分配到哪个库上，这个就要靠Sharding-jdbc框架来读写分离的分流处理<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/83f78cd07cd848de9c4b5abd422d4b91.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="实战"><a class="markdownIt-Anchor" href="#实战"></a> 实战</h3>
<p>步骤如下<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f72981dfa9204bab9545793d04bc2ed9.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
导入Maven坐标</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sharding-jdbc-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.0-RC1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>配置yml文件</p>
  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">ccTakeOut</span><br>  <span class="hljs-attr">shardingsphere:</span><br>    <span class="hljs-attr">datasource:</span><br>      <span class="hljs-attr">names:</span><br>        <span class="hljs-string">master,slave</span><br>      <span class="hljs-comment"># 主库（增删改操作）</span><br>      <span class="hljs-attr">master:</span><br>        <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>        <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://192.168.23.132:3307/reggie?characterEncoding=utf-8</span><br>        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>        <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>      <span class="hljs-comment"># 从数据源（读操作）</span><br>      <span class="hljs-attr">slave:</span><br>        <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>        <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://192.168.23.132:3308/reggie?characterEncoding=utf-8</span><br>        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>        <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">masterslave:</span><br>      <span class="hljs-comment"># 读写分离配置</span><br>      <span class="hljs-attr">load-balance-algorithm-type:</span> <span class="hljs-string">round_robin</span> <span class="hljs-comment">#轮询（如果有多个从库会轮询着读）</span><br>      <span class="hljs-comment"># 最终的数据源名称</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">dataSource</span><br>      <span class="hljs-comment"># 主库数据源名称</span><br>      <span class="hljs-attr">master-data-source-name:</span> <span class="hljs-string">master</span><br>      <span class="hljs-comment"># 从库数据源名称列表，多个逗号分隔</span><br>      <span class="hljs-attr">slave-data-source-names:</span> <span class="hljs-string">slave</span><br>    <span class="hljs-attr">props:</span><br>      <span class="hljs-attr">sql:</span><br>        <span class="hljs-attr">show:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#开启SQL显示，默认false</span><br>  <span class="hljs-attr">main:</span><br>    <span class="hljs-attr">allow-bean-definition-overriding:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#允许bean数据源覆盖</span><br><br><br></code></pre></td></tr></table></figure>
<p>​</p>
<p>解读一下yml配置<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7e5c203773a04fdd9b9a096659db9749.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<strong>允许Bean定义覆盖很重要</strong></p>
<h3 id="测试-2"><a class="markdownIt-Anchor" href="#测试-2"></a> 测试</h3>
<p>启动项目，可以看到，读写操作分别到达了不同的主机上<br />
读写分离测试<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f647f0ab726e48f7a4ae0445970980d2.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/fd937b8b481946bba8325127319d22f9.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h1 id="nginx部署"><a class="markdownIt-Anchor" href="#nginx部署"></a> Nginx部署</h1>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46906696/article/details/125569407?csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22125569407%22,%22source%22:%22weixin_46906696%22%7D&amp;ctrtid=O48Rx">Nginx笔记</a></p>
<h1 id="前后端分离开发"><a class="markdownIt-Anchor" href="#前后端分离开发"></a> 前后端分离开发</h1>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5ae7a5c5f65049e698b47a060c9b9ac8.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9b200bae5d514949b1fed2860598906a.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="开发流程"><a class="markdownIt-Anchor" href="#开发流程"></a> 开发流程</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9d4d3ca75521432a999246d1ff68cea2.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="yapi"><a class="markdownIt-Anchor" href="#yapi"></a> YApi</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b56ddabf9931461dab56dafdd5614088.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="swagger常用"><a class="markdownIt-Anchor" href="#swagger常用"></a> Swagger（常用）</h2>
<p>主要作用就是帮助后端人员生成后端接口文档的<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7352d150c2b64d3e9c84f15ce56c7c1d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
使用方式<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b22b2f0ae0c04a4db76fe8e8fa047615.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
导入坐标</p>
  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--knife4j接口管理--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure>
<p>导入配置类</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221126213937943.png" srcset="/img/loading.gif" lazyload alt="image-20221126213937943" /></p>
<p>具体配置位置<code>com.xyy.config.WebMvcConfig</code></p>
<p>启动服务，访问路径+doc.html<br />
进入之后就可以对已有的接口进行管理了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/28fa1199bed745909c1ab3566ef46517.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h2 id="swagger常用注解"><a class="markdownIt-Anchor" href="#swagger常用注解"></a> Swagger常用注解</h2>
<p>直接生成的注解内容并不是很完善<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7b2482af3df7429ea060c692c9778524.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
Swagger常用注解<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/96378f7383e34de1a6ef9f7785989c2d.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
以实体类为例<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0fbe9d3e59ee47d0b5a9f8d6b21609af.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
Controller上的注解<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/920dcfe50e8544f0ab5a42581722b3e3.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
以上均为示例，最终完善好注解，文档会更好用，更详细。</p>
<h1 id="项目部署"><a class="markdownIt-Anchor" href="#项目部署"></a> 项目部署</h1>
<h2 id="前端"><a class="markdownIt-Anchor" href="#前端"></a> 前端</h2>
<p>前端作为一个工程，同样需要打包，打包完为dist目录<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a2cee8e970754767bf5efab50eb3d065.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
把这个dist目录，扔进Nginx里HTML文件夹就可以了，也就是那个静态资源<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e05ae7caf6ce4c82b5dd35e96ba97059.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
传上来不算完，还要好好配置一下<br />
一个是静态资源，另一个是反向代理</p>
<h3 id="静态资源配置"><a class="markdownIt-Anchor" href="#静态资源配置"></a> 静态资源配置</h3>
<p>先配置静态资源<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/85400722cc984e53bc62af167a80ba13.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<h3 id="请求代理配置"><a class="markdownIt-Anchor" href="#请求代理配置"></a> 请求代理配置</h3>
<p>重启Nginx，测试一下，访问。<br />
随便一个请求可以看到，带了前缀<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221126220228420.png" srcset="/img/loading.gif" lazyload alt="image-20221126220228420" /><br />
后端项目给的端口是9001<br />
请求路径为：<a target="_blank" rel="noopener" href="http://www.ccsmile.fun:9001/api/employee/login">http://www.ccsmile.fun:9001/api/employee/login</a><br />
我们后端是没有这个api的前缀的<br />
通过重写url，就可以把<br />
<code>http://localhost:81/api/employee/page?page=1&amp;pageSize=10</code><br />
变成<br />
<code>http://192.168.132.23:8080/employee/page?page=1&amp;pageSize=10</code>的请求地址，这样就完成了请求代理转发操作<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221126220352391.png" srcset="/img/loading.gif" lazyload alt="image-20221126220352391" /><br />
配置文件如下</p>
  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json">server<span class="hljs-punctuation">&#123;</span><br>  listen <span class="hljs-number">80</span>;<br>  server_name localhost;<br>#静态资源配置<br>  location /<span class="hljs-punctuation">&#123;</span><br>    root html/dist;<br>    index index.html;<br>  <span class="hljs-punctuation">&#125;</span><br>#请求转发代理，重写URL+转发<br>  location ^~ /api/<span class="hljs-punctuation">&#123;</span><br>          rewrite ^/api/(.*)$ /$<span class="hljs-number">1</span> break;<br>          proxy_pass http<span class="hljs-punctuation">:</span><span class="hljs-comment">//后端服务ip:端口号;</span><br>  <span class="hljs-punctuation">&#125;</span><br>#其他<br>  error_page <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span> /<span class="hljs-number">50</span>x.html;<br>  location = /<span class="hljs-number">50</span>x.html<span class="hljs-punctuation">&#123;</span><br>      root html;<br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure>
<p>最后保存文件，重启Nginx，就配置完成了</p>
<h2 id="后端"><a class="markdownIt-Anchor" href="#后端"></a> 后端</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/23e1f1e20f0b420ca3fa8856aa07efaa.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
上传脚本，自动拉取最新脚本<br />
这样在开发端和Linux端就通过Gitee间接实现同步了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c2cf53f4a6044202b5e5b7136a9bc0ef.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /><br />
脚本内容</p>
<p>​</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/sh</span><br><span class="hljs-built_in">echo</span> =================================<br><span class="hljs-built_in">echo</span>  自动化部署脚本启动<br><span class="hljs-built_in">echo</span> =================================<br><br><span class="hljs-built_in">echo</span> 停止原来运行中的工程<br>APP_NAME=reggie_take_out<br><br>tpid=`ps -ef|grep <span class="hljs-variable">$APP_NAME</span>|grep -v grep|grep -v <span class="hljs-built_in">kill</span>|awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span>`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$&#123;tpid&#125;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Stop Process...&#x27;</span><br>    <span class="hljs-built_in">kill</span> -15 <span class="hljs-variable">$tpid</span><br><span class="hljs-keyword">fi</span><br><span class="hljs-built_in">sleep</span> 2<br>tpid=`ps -ef|grep <span class="hljs-variable">$APP_NAME</span>|grep -v grep|grep -v <span class="hljs-built_in">kill</span>|awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span>`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$&#123;tpid&#125;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Kill Process!&#x27;</span><br>    <span class="hljs-built_in">kill</span> -9 <span class="hljs-variable">$tpid</span><br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Stop Success!&#x27;</span><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">echo</span> 准备从Git仓库拉取最新代码<br><span class="hljs-built_in">cd</span> /usr/local/javaapp/reggie_take_out<br><br><span class="hljs-built_in">echo</span> 开始从Git仓库拉取最新代码<br>git pull<br><span class="hljs-built_in">echo</span> 代码拉取完成<br><br><span class="hljs-built_in">echo</span> 开始打包<br>output=`mvn clean package -Dmaven.test.skip=<span class="hljs-literal">true</span>`<br><br><span class="hljs-built_in">cd</span> target<br><br><span class="hljs-built_in">echo</span> 启动项目<br><span class="hljs-built_in">nohup</span> java -jar reggie_take_out-1.0-SNAPSHOT.jar &amp;&gt; reggie_take_out.log &amp;<br><span class="hljs-built_in">echo</span> 项目启动完成<br><br><br><br></code></pre></td></tr></table></figure>
<p>​<br />
​</p>
<p>执行脚本就OK了<br />
<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/079d294160f94539b7b3db5d09af969e.png" srcset="/img/loading.gif" lazyload alt="在这里插入图片描述" /></p>
<p>记得修改yml文件中的部分内容，比如文件路径等等信息~<br />
完结撒花啦</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV13a411q753?p=176&amp;spm_id_from=pageDriver&amp;vd_source=a432f7b466d0eab98b92ac7132f5ca5c">黑马程序员Java项目实战《瑞吉外卖》，轻松掌握springboot + mybatis plus开发核心技术的真java实战项目 </a></li>
<li>风吟Pro的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46906696/article/details/125040457#comments_23962173">瑞吉外卖笔记</a></li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Spring-Boot/" class="category-chain-item">Spring Boot</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Spring-Boot/">#Spring Boot</a>
      
        <a href="/tags/%E9%A1%B9%E7%9B%AE/">#项目</a>
      
        <a href="/tags/%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96/">#瑞吉外卖</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>瑞吉外卖</div>
      <div>http://xtwoy.github.io/瑞吉外卖瑞吉外卖笔记/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>XtwoY</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>November 25, 2022</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/%E9%80%9A%E8%BF%87docker%E5%AE%9E%E7%8E%B0MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" title="通过docker实现MySQL主从复制">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">通过docker实现MySQL主从复制</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Spring%20Boot/SpringBoot%E5%B0%86%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B9%E8%B7%AF%E5%BE%84%E4%B8%AD%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84/" title="SpringBoot将文件上传到项目的根路径中，使用相对路径">
                        <span class="hidden-mobile">SpringBoot将文件上传到项目的根路径中，使用相对路径</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Spring Boot"
        id="heading-d2b84a7bb8d211a07fd6ecbf4db9d426" role="tab" data-toggle="collapse" href="#collapse-d2b84a7bb8d211a07fd6ecbf4db9d426"
        aria-expanded="true"
      >
        Spring Boot
        <span class="list-group-count">(7)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-d2b84a7bb8d211a07fd6ecbf4db9d426"
           role="tabpanel" aria-labelledby="heading-d2b84a7bb8d211a07fd6ecbf4db9d426">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/Redisson%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%818%E7%A7%8D%E9%94%81%E6%A8%A1%E5%BC%8F%E5%89%96%E6%9E%90%20SpringAop%E6%95%B4%E5%90%88/" title="Redisson分布式锁8种锁模式剖析 SpringAop整合"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Redisson分布式锁8种锁模式剖析 SpringAop整合</span>
        </a>
      
    
      
      
        <a href="/Spring%20Boot/SpringBoot2_%E5%B0%9A%E7%A1%85%E8%B0%B7/" title="SpringBoot2_尚硅谷"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">SpringBoot2_尚硅谷</span>
        </a>
      
    
      
      
        <a href="/Spring%20Boot/SpringBoot%E5%AE%9E%E7%8E%B0MySQL%E7%9A%84%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/" title="SpringBoot实现MySQL的主从复制"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">SpringBoot实现MySQL的主从复制</span>
        </a>
      
    
      
      
        <a href="/Spring%20Boot/SpringBoot%E5%B0%86%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B9%E8%B7%AF%E5%BE%84%E4%B8%AD%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84/" title="SpringBoot将文件上传到项目的根路径中，使用相对路径"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">SpringBoot将文件上传到项目的根路径中，使用相对路径</span>
        </a>
      
    
      
      
        <a href="/Spring%20Boot/Springboot%20+%20Spring%20Security%20%E5%AE%9E%E7%8E%B0%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81%E5%8F%8A%E5%9F%BA%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8A%A8%E6%80%81%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/" title="Springboot + Spring Security 实现前后端分离登录认证及基于数据库动态权限控制"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Springboot + Spring Security 实现前后端分离登录认证及基于数据库动态权限控制</span>
        </a>
      
    
      
      
        <a href="/%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/" title="瑞吉外卖"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">瑞吉外卖</span>
        </a>
      
    
      
      
        <a href="/Spring%20Boot/%E8%AE%BE%E8%AE%A1%E7%AC%AC%E4%B8%89%E6%96%B9jar%E5%8C%85%E4%B8%AD%E6%9C%89bean%E5%AF%B9%E8%B1%A1%E6%97%B6%EF%BC%8C%E8%A6%81%E5%A6%82%E4%BD%95%E8%87%AA%E5%8A%A8%E5%8A%A0%E8%BD%BD%E5%88%B0%E8%A2%AB%E5%BC%95%E7%94%A8%E7%9A%84%E5%BA%94%E7%94%A8%E4%B8%AD(EnableAutoConfiguration%E3%80%81BeanDefinitionRegistryPostProcessor%E4%BD%BF%E7%94%A8)/" title="设计第三方jar包中有bean对象时，要如何自动加载到被引用的应用中"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">设计第三方jar包中有bean对象时，要如何自动加载到被引用的应用中</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访 
        <span id="leancloud-site-uv"></span>
         次
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>




  
<script src="/js/Click_on_special_effects.js"></script>
<script src="/js/Click_on_special_effects1.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
