

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/lbxx.png">
  <link rel="icon" href="/img/lbxx.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="XtwoY">
  <meta name="keywords" content="">
  
    <meta name="description" content="ğŸŒ•æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ ğŸŒ—æ¬¡å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼   è®¾è®¡æ¨¡å¼  è®¾è®¡æ¨¡å¼ï¼ˆDesignpatternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚    åˆ›å»ºå‹ åˆ›å»ºå‹ ç»“æ„å‹ ç»“æ„å‹ è¡Œä¸ºå‹ è¡Œä¸ºå‹     å¸¸ç”¨ ä¸å¸¸ç”¨ å¸¸ç”¨ ä¸å¸¸ç”¨ å¸¸ç”¨ ä¸">
<meta property="og:type" content="article">
<meta property="og:title" content="è®¾è®¡æ¨¡å¼">
<meta property="og:url" content="http://xtwoy.github.io/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index.html">
<meta property="og:site_name" content="XtwoY">
<meta property="og:description" content="ğŸŒ•æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ ğŸŒ—æ¬¡å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼   è®¾è®¡æ¨¡å¼  è®¾è®¡æ¨¡å¼ï¼ˆDesignpatternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚    åˆ›å»ºå‹ åˆ›å»ºå‹ ç»“æ„å‹ ç»“æ„å‹ è¡Œä¸ºå‹ è¡Œä¸ºå‹     å¸¸ç”¨ ä¸å¸¸ç”¨ å¸¸ç”¨ ä¸å¸¸ç”¨ å¸¸ç”¨ ä¸">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dp.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/the-relationship-between-design-patterns.jpg">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204034839.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108203845045.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108202856132.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108200601362.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108201003713.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204621982.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204609508.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204802649.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/62576915-36E0-4B67-B078-704699CA980A.jpg">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224163121334.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224163539743.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224163606286.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224165136437.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224171144291.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20201202-prototype-pattern.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224193125327.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224213529759.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224214505679.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224220521554.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224220732126.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225155334445.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225161720849.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225161754203.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225163021962.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225172743411.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102143047364.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102144821435.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102145034564.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102151322485.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102172346775.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102173756821.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102185734930.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102190822334.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102193340583.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102193600188.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103100919853.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103110105715.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103111534525.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103111520047.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103144345369.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103144507077.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103150422044.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103151032471.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103151439028.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/commanduml.jpg">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103163835693.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103191915903.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103191809297.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103201406957.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104142333771.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104143905498.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104145432933.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104145924536.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104162405505.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104163106314.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104163634868.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104170305404.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104185525137.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105110507630.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105110700473.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105140413812.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105154135954.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105165911040.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105170757994.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105165733894.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105183130277.png">
<meta property="og:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105184409277.png">
<meta property="article:published_time" content="2023-01-05T11:31:42.000Z">
<meta property="article:modified_time" content="2023-07-02T08:19:01.856Z">
<meta property="article:author" content="XtwoY">
<meta property="article:tag" content="è®¾è®¡æ¨¡å¼">
<meta property="article:tag" content="è¿›é˜¶">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dp.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>è®¾è®¡æ¨¡å¼ - XtwoY</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"xtwoy.github.io","root":"/","version":"1.9.3","typing":{"enable":true,"typeSpeed":150,"cursorChar":"_","loop":true,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"XcZMRYxyoKLVblDJBK1NWiIm-gzGzoHsz","app_key":"0CQR4gbS0Oqa9nyaFPmaiXSw","server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  

  

  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>XtwoYã®Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                <span>Links</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="è®¾è®¡æ¨¡å¼"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-01-05 19:31" pubdate>
          January 5, 2023 pm
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          173k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          1445 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">è®¾è®¡æ¨¡å¼</h1>
            
              <p class="note note-info">
                
                  
                    Last updated on July 2, 2023 pm
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <blockquote>
<p>ğŸŒ•æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼</p>
<p>ğŸŒ—æ¬¡å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼</p>
</blockquote>
<h1 id="è®¾è®¡æ¨¡å¼"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼"></a> è®¾è®¡æ¨¡å¼</h1>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dp.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<p>è®¾è®¡æ¨¡å¼ï¼ˆDesignpatternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚</p>
<table>
<thead>
<tr>
<th>åˆ›å»ºå‹</th>
<th>åˆ›å»ºå‹</th>
<th>ç»“æ„å‹</th>
<th>ç»“æ„å‹</th>
<th>è¡Œä¸ºå‹</th>
<th>è¡Œä¸ºå‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>å¸¸ç”¨</td>
<td>ä¸å¸¸ç”¨</td>
<td>å¸¸ç”¨</td>
<td>ä¸å¸¸ç”¨</td>
<td>å¸¸ç”¨</td>
<td>ä¸å¸¸ç”¨</td>
</tr>
<tr>
<td>å•ä¾‹ï¼ˆSingleton ï¼‰å·¥å‚ï¼ˆFactoryï¼‰æŠ½è±¡å·¥å‚ï¼ˆAbstract Factoryï¼‰å»ºé€ è€…ï¼ˆBuilderï¼‰</td>
<td>åŸå‹ï¼ˆPrototype ï¼‰</td>
<td>ä»£ç†ï¼ˆProxy ï¼‰æ¡¥æ¥ï¼ˆBridgeï¼‰è£…é¥°è€…ï¼ˆDecorator ï¼‰é€‚é…å™¨ï¼ˆAdapterï¼‰</td>
<td>å¤–è§‚ï¼ˆFacade ï¼‰ç»„åˆï¼ˆComposite ï¼‰äº«å…ƒï¼ˆFlyweightï¼‰</td>
<td>è§‚å¯Ÿè€… ï¼ˆObserver ï¼‰æ¨¡æ¿ï¼ˆTemplate ï¼‰ç­–ç•¥ï¼ˆStrategy ï¼‰èŒè´£é“¾ï¼ˆChain of Responsibilityï¼‰è¿­ä»£å™¨ï¼ˆIterator ï¼‰çŠ¶æ€ï¼ˆStateï¼‰</td>
<td>è®¿é—®è€…ï¼ˆVisitor ï¼‰å¤‡å¿˜å½•ï¼ˆMemento ï¼‰å‘½ä»¤ï¼ˆCommand ï¼‰è§£é‡Šå™¨ï¼ˆInterpreter ï¼‰ä¸­ä»‹ï¼ˆMediator ï¼‰</td>
</tr>
</tbody>
</table>
<h1 id="è®¾è®¡æ¨¡å¼ç®€ä»‹"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼ç®€ä»‹"></a> è®¾è®¡æ¨¡å¼ç®€ä»‹</h1>
<p>è®¾è®¡æ¨¡å¼ï¼ˆDesignpatternï¼‰ä»£è¡¨äº†æœ€ä½³çš„å®è·µï¼Œé€šå¸¸è¢«æœ‰ç»éªŒçš„é¢å‘å¯¹è±¡çš„è½¯ä»¶å¼€å‘äººå‘˜æ‰€é‡‡ç”¨ã€‚è®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å¼€å‘äººå‘˜åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚è¿™äº›è§£å†³æ–¹æ¡ˆæ˜¯ä¼—å¤šè½¯ä»¶å¼€å‘äººå‘˜ç»è¿‡ç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´çš„è¯•éªŒå’Œé”™è¯¯æ€»ç»“å‡ºæ¥çš„ã€‚</p>
<p>è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚<br />
æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†åœ°è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾åœ°è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨ç°å®ä¸­éƒ½æœ‰ç›¸åº”çš„åŸç†æ¥ä¸ä¹‹å¯¹åº”ï¼Œæ¯ç§æ¨¡å¼éƒ½æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯è®¾è®¡æ¨¡å¼èƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŸå› ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯-gofå››äººå¸®å…¨æ‹¼-gang-of-four"><a class="markdownIt-Anchor" href="#ä»€ä¹ˆæ˜¯-gofå››äººå¸®å…¨æ‹¼-gang-of-four"></a> ä»€ä¹ˆæ˜¯ GOFï¼ˆå››äººå¸®ï¼Œå…¨æ‹¼ Gang of Fourï¼‰ï¼Ÿ</h2>
<p>åœ¨ 1994 å¹´ï¼Œç”± Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides å››äººåˆè‘—å‡ºç‰ˆäº†ä¸€æœ¬åä¸º<strong>Design Patterns - Elements of Reusable Object-Oriented Softwareï¼ˆä¸­æ–‡è¯‘åï¼šè®¾è®¡æ¨¡å¼ -å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼‰</strong> çš„ä¹¦ï¼Œè¯¥ä¹¦é¦–æ¬¡æåˆ°äº†è½¯ä»¶å¼€å‘ä¸­è®¾è®¡æ¨¡å¼çš„æ¦‚å¿µã€‚</p>
<p>å››ä½ä½œè€…åˆç§° <strong>GOFï¼ˆå››äººå¸®ï¼Œå…¨æ‹¼ Gang of Fourï¼‰</strong> ã€‚ä»–ä»¬æ‰€æå‡ºçš„è®¾è®¡æ¨¡å¼ä¸»è¦æ˜¯åŸºäºä»¥ä¸‹çš„é¢å‘å¯¹è±¡è®¾è®¡åŸåˆ™ã€‚</p>
<ul>
<li>å¯¹æ¥å£ç¼–ç¨‹è€Œä¸æ˜¯å¯¹å®ç°ç¼–ç¨‹ã€‚</li>
<li>ä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ã€‚</li>
</ul>
<h2 id="è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨"></a> è®¾è®¡æ¨¡å¼çš„ä½¿ç”¨</h2>
<p>è®¾è®¡æ¨¡å¼åœ¨è½¯ä»¶å¼€å‘ä¸­çš„ä¸¤ä¸ªä¸»è¦ç”¨é€”ã€‚</p>
<h3 id="å¼€å‘äººå‘˜çš„å…±åŒå¹³å°"><a class="markdownIt-Anchor" href="#å¼€å‘äººå‘˜çš„å…±åŒå¹³å°"></a> å¼€å‘äººå‘˜çš„å…±åŒå¹³å°</h3>
<p>è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„æœ¯è¯­ç³»ç»Ÿï¼Œä¸”å…·ä½“åˆ°ç‰¹å®šçš„æƒ…æ™¯ã€‚ä¾‹å¦‚ï¼Œå•ä¾‹è®¾è®¡æ¨¡å¼æ„å‘³ç€ä½¿ç”¨å•ä¸ªå¯¹è±¡ï¼Œè¿™æ ·æ‰€æœ‰ç†Ÿæ‚‰å•ä¾‹è®¾è®¡æ¨¡å¼çš„å¼€å‘äººå‘˜éƒ½èƒ½ä½¿ç”¨å•ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼å‘Šè¯‰å¯¹æ–¹ï¼Œç¨‹åºä½¿ç”¨çš„æ˜¯å•ä¾‹æ¨¡å¼ã€‚</p>
<h3 id="æœ€ä½³çš„å®è·µ"><a class="markdownIt-Anchor" href="#æœ€ä½³çš„å®è·µ"></a> æœ€ä½³çš„å®è·µ</h3>
<p>è®¾è®¡æ¨¡å¼å·²ç»ç»å†äº†å¾ˆé•¿ä¸€æ®µæ—¶é—´çš„å‘å±•ï¼Œå®ƒä»¬æä¾›äº†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­é¢ä¸´çš„ä¸€èˆ¬é—®é¢˜çš„æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚å­¦ä¹ è¿™äº›æ¨¡å¼æœ‰åŠ©äºç»éªŒä¸è¶³çš„å¼€å‘äººå‘˜é€šè¿‡ä¸€ç§ç®€å•å¿«æ·çš„æ–¹å¼æ¥å­¦ä¹ è½¯ä»¶è®¾è®¡ã€‚</p>
<h2 id="è®¾è®¡æ¨¡å¼çš„ç±»å‹"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼çš„ç±»å‹"></a> è®¾è®¡æ¨¡å¼çš„ç±»å‹</h2>
<p>æ ¹æ®è®¾è®¡æ¨¡å¼çš„å‚è€ƒä¹¦ <strong>Design Patterns - Elements of Reusable Object-Oriented<br />
Softwareï¼ˆä¸­æ–‡è¯‘åï¼šè®¾è®¡æ¨¡å¼ - å¯å¤ç”¨çš„é¢å‘å¯¹è±¡è½¯ä»¶å…ƒç´ ï¼‰</strong> ä¸­æ‰€æåˆ°çš„ï¼Œæ€»å…±æœ‰ 23ç§è®¾è®¡æ¨¡å¼ã€‚è¿™äº›æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸‰å¤§ç±»ï¼šåˆ›å»ºå‹æ¨¡å¼ï¼ˆCreational Patternsï¼‰ã€ç»“æ„å‹æ¨¡å¼ï¼ˆStructuralPatternsï¼‰ã€è¡Œä¸ºå‹æ¨¡å¼ï¼ˆBehavioral Patternsï¼‰ã€‚</p>
<p>1   <strong>åˆ›å»ºå‹æ¨¡å¼</strong></p>
<p>è¿™äº›è®¾è®¡æ¨¡å¼æä¾›äº†ä¸€ç§åœ¨åˆ›å»ºå¯¹è±¡çš„åŒæ—¶éšè—åˆ›å»ºé€»è¾‘çš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ newè¿ç®—ç¬¦ç›´æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚è¿™ä½¿å¾—ç¨‹åºåœ¨åˆ¤æ–­é’ˆå¯¹æŸä¸ªç»™å®šå®ä¾‹éœ€è¦åˆ›å»ºå“ªäº›å¯¹è±¡æ—¶æ›´åŠ çµæ´»ã€‚</p>
<ul>
<li>å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰</li>
<li>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factory Patternï¼‰</li>
<li>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰</li>
<li>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼‰</li>
<li>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰</li>
</ul>
<p>2 <strong>ç»“æ„å‹æ¨¡å¼</strong><br />
è¿™äº›è®¾è®¡æ¨¡å¼å…³æ³¨ç±»å’Œå¯¹è±¡çš„ç»„åˆã€‚ç»§æ‰¿çš„æ¦‚å¿µè¢«ç”¨æ¥ç»„åˆæ¥å£å’Œå®šä¹‰ç»„åˆå¯¹è±¡è·å¾—æ–°åŠŸèƒ½çš„æ–¹å¼ã€‚</p>
<ul>
<li>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰</li>
<li>æ¡¥æ¥æ¨¡å¼ï¼ˆBridge Patternï¼‰</li>
<li>è¿‡æ»¤å™¨æ¨¡å¼ï¼ˆFilterã€Criteria Patternï¼‰</li>
<li>ç»„åˆæ¨¡å¼ï¼ˆComposite Patternï¼‰</li>
<li>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰</li>
<li>å¤–è§‚æ¨¡å¼ï¼ˆFacade Patternï¼‰</li>
<li>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰</li>
<li>ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰</li>
</ul>
<p>3 <strong>è¡Œä¸ºå‹æ¨¡å¼</strong><br />
è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨å¯¹è±¡ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<ul>
<li>è´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰</li>
<li>å‘½ä»¤æ¨¡å¼ï¼ˆCommand Patternï¼‰</li>
<li>è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰</li>
<li>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰</li>
<li>ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰</li>
<li>å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰</li>
<li>è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰</li>
<li>çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰</li>
<li>ç©ºå¯¹è±¡æ¨¡å¼ï¼ˆNull Object Patternï¼‰</li>
<li>ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰</li>
<li>æ¨¡æ¿æ¨¡å¼ï¼ˆTemplate Patternï¼‰</li>
<li>è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰</li>
</ul>
<p>4  <strong>J2EE æ¨¡å¼</strong><br />
è¿™äº›è®¾è®¡æ¨¡å¼ç‰¹åˆ«å…³æ³¨è¡¨ç¤ºå±‚ã€‚è¿™äº›æ¨¡å¼æ˜¯ç”± Sun Java Center é‰´å®šçš„ã€‚</p>
<ul>
<li>MVC æ¨¡å¼ï¼ˆMVC Patternï¼‰</li>
<li>ä¸šåŠ¡ä»£è¡¨æ¨¡å¼ï¼ˆBusiness Delegate Patternï¼‰</li>
<li>ç»„åˆå®ä½“æ¨¡å¼ï¼ˆComposite Entity Patternï¼‰</li>
<li>æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼ï¼ˆData Access Object Patternï¼‰</li>
<li>å‰ç«¯æ§åˆ¶å™¨æ¨¡å¼ï¼ˆFront Controller Patternï¼‰</li>
<li>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ï¼ˆIntercepting Filter Patternï¼‰</li>
<li>æœåŠ¡å®šä½å™¨æ¨¡å¼ï¼ˆService Locator Patternï¼‰</li>
<li>ä¼ è¾“å¯¹è±¡æ¨¡å¼ï¼ˆTransfer Object Patternï¼‰</li>
</ul>
<p>ä¸‹é¢ç”¨ä¸€ä¸ªå›¾ç‰‡æ¥æ•´ä½“æè¿°ä¸€ä¸‹è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»ï¼š</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/the-relationship-between-design-patterns.jpg" srcset="/img/loading.gif" lazyload alt="è®¾è®¡æ¨¡å¼ä¹‹é—´çš„å…³ç³»" />(/</p>
<h1 id="è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™"></a> è®¾è®¡æ¨¡å¼çš„å…­å¤§åŸåˆ™</h1>
<h2 id="1-å¼€é—­åŸåˆ™open-close-principle"><a class="markdownIt-Anchor" href="#1-å¼€é—­åŸåˆ™open-close-principle"></a> <strong>1ã€å¼€é—­åŸåˆ™ï¼ˆOpen Close Principleï¼‰</strong></h2>
<p>å¼€é—­åŸåˆ™çš„æ„æ€æ˜¯ï¼š <strong>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­</strong>ã€‚åœ¨ç¨‹åºéœ€è¦è¿›è¡Œæ‹“å±•çš„æ—¶å€™ï¼Œä¸èƒ½å»ä¿®æ”¹åŸæœ‰çš„ä»£ç ï¼Œå®ç°ä¸€ä¸ªçƒ­æ’æ‹”çš„æ•ˆæœã€‚ç®€è¨€ä¹‹ï¼Œæ˜¯ä¸ºäº†ä½¿ç¨‹åºçš„æ‰©å±•æ€§å¥½ï¼Œæ˜“äºç»´æŠ¤å’Œå‡çº§ã€‚æƒ³è¦è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨æ¥å£å’ŒæŠ½è±¡ç±»ï¼Œåé¢çš„å…·ä½“è®¾è®¡ä¸­æˆ‘ä»¬ä¼šæåˆ°è¿™ç‚¹ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204034839.png" srcset="/img/loading.gif" lazyload alt="image-20230108204034839" /></p>
<p><code>Ocp.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.ocp;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ocp</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//ä½¿ç”¨çœ‹çœ‹å­˜åœ¨çš„é—®é¢˜</span><br>      <span class="hljs-type">GraphicEditor</span> <span class="hljs-variable">graphicEditor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GraphicEditor</span>();<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>());<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>());<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Triangle</span>());<br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">//è¿™æ˜¯ä¸€ä¸ªç”¨äºç»˜å›¾çš„ç±» [ä½¿ç”¨æ–¹]</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphicEditor</span> &#123;<br>   <span class="hljs-comment">//æ¥æ”¶Shapeå¯¹è±¡ï¼Œç„¶åæ ¹æ®typeï¼Œæ¥ç»˜åˆ¶ä¸åŒçš„å›¾å½¢</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawShape</span><span class="hljs-params">(Shape s)</span> &#123;<br>      <span class="hljs-keyword">if</span> (s.m_type == <span class="hljs-number">1</span>)<br>         drawRectangle(s);<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s.m_type == <span class="hljs-number">2</span>)<br>         drawCircle(s);<br>      <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s.m_type == <span class="hljs-number">3</span>)<br>         drawTriangle(s);<br>   &#125;<br><br>   <span class="hljs-comment">//ç»˜åˆ¶çŸ©å½¢</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawRectangle</span><span class="hljs-params">(Shape r)</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶çŸ©å½¢ &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-comment">//ç»˜åˆ¶åœ†å½¢</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawCircle</span><span class="hljs-params">(Shape r)</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶åœ†å½¢ &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//ç»˜åˆ¶ä¸‰è§’å½¢</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawTriangle</span><span class="hljs-params">(Shape r)</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶ä¸‰è§’å½¢ &quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//Shapeç±»ï¼ŒåŸºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br>   <span class="hljs-type">int</span> m_type;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   Rectangle() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">1</span>;<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   Circle() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">2</span>;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//æ–°å¢ç”»ä¸‰è§’å½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Triangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   Triangle() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">3</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ–¹å¼ 1 çš„ä¼˜ç¼ºç‚¹</p>
</blockquote>
<ol>
<li>
<p>ä¼˜ç‚¹æ˜¯æ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•æ˜“æ“ä½œã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹æ˜¯è¿åäº†è®¾è®¡æ¨¡å¼çš„ ocp åŸåˆ™ï¼Œå³å¯¹æ‰©å±•å¼€æ”¾(á¨€ ä¾›æ–¹)ï¼Œå¯¹ä¿®æ”¹å…³é—­(ä½¿ç”¨æ–¹)ã€‚å³å½“æˆ‘ä»¬ç»™ç±»å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå°½é‡ä¸ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å°½å¯èƒ½å°‘ä¿®æ”¹ä»£ç .</p>
</li>
<li>
<p>æ¯”å¦‚æˆ‘ä»¬è¿™æ—¶è¦æ–°å¢åŠ ä¸€ä¸ªå›¾å½¢ç§ç±» ä¸‰è§’å½¢ï¼Œæˆ‘ä»¬éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹ï¼Œä¿®æ”¹çš„åœ°æ–¹è¾ƒå¤š</p>
</li>
</ol>
<blockquote>
<p>æ”¹è¿›çš„æ€è·¯åˆ†æ</p>
</blockquote>
<p><strong>æ€è·¯</strong>ï¼šæŠŠåˆ›å»º <strong>Shape ç±»åšæˆæŠ½è±¡ç±»</strong>ï¼Œå¹¶á¨€ ä¾›ä¸€ä¸ª<strong>æŠ½è±¡çš„ draw</strong> æ–¹æ³•ï¼Œè®©<strong>å­ç±»å»å®ç°å³å¯</strong>ï¼Œè¿™æ ·æˆ‘ä»¬æœ‰æ–°çš„å›¾å½¢ç§ç±»æ—¶ï¼Œåªéœ€è¦è®©æ–°çš„å›¾å½¢ç±»ç»§æ‰¿ Shapeï¼Œå¹¶å®ç° draw æ–¹æ³•å³å¯ï¼Œ<strong>ä½¿ç”¨æ–¹çš„ä»£ç å°±ä¸éœ€è¦ä¿®</strong> -&gt; æ»¡è¶³äº†å¼€é—­åŸåˆ™</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108203845045.png" srcset="/img/loading.gif" lazyload alt="image-20230108203845045" /></p>
<p><code>Ocp.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.ocp.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ocp</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//ä½¿ç”¨çœ‹çœ‹å­˜åœ¨çš„é—®é¢˜</span><br>      <span class="hljs-type">GraphicEditor</span> <span class="hljs-variable">graphicEditor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GraphicEditor</span>();<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>());<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>());<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Triangle</span>());<br>      graphicEditor.drawShape(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OtherGraphic</span>());<br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">//è¿™æ˜¯ä¸€ä¸ªç”¨äºç»˜å›¾çš„ç±» [ä½¿ç”¨æ–¹]</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GraphicEditor</span> &#123;<br>   <span class="hljs-comment">//æ¥æ”¶Shapeå¯¹è±¡ï¼Œè°ƒç”¨drawæ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">drawShape</span><span class="hljs-params">(Shape s)</span> &#123;<br>      s.draw();<br>   &#125;<br><br>   <br>&#125;<br><br><span class="hljs-comment">//Shapeç±»ï¼ŒåŸºç±»</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> &#123;<br>   <span class="hljs-type">int</span> m_type;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;<span class="hljs-comment">//æŠ½è±¡æ–¹æ³•</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   Rectangle() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">1</span>;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶çŸ©å½¢ &quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   Circle() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">2</span>;<br>   &#125;<br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶åœ†å½¢ &quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//æ–°å¢ç”»ä¸‰è§’å½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Triangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   Triangle() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">3</span>;<br>   &#125;<br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶ä¸‰è§’å½¢ &quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//æ–°å¢ä¸€ä¸ªå›¾å½¢</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OtherGraphic</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br>   OtherGraphic() &#123;<br>      <span class="hljs-built_in">super</span>.m_type = <span class="hljs-number">4</span>;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç»˜åˆ¶å…¶å®ƒå›¾å½¢ &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="2-é‡Œæ°ä»£æ¢åŸåˆ™liskov-substitution-principle"><a class="markdownIt-Anchor" href="#2-é‡Œæ°ä»£æ¢åŸåˆ™liskov-substitution-principle"></a> <strong>2ã€é‡Œæ°ä»£æ¢åŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰</strong></h2>
<p>é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„åŸºæœ¬åŸåˆ™ä¹‹ä¸€ã€‚ é‡Œæ°ä»£æ¢åŸåˆ™ä¸­è¯´ï¼Œä»»ä½•åŸºç±»å¯ä»¥å‡ºç°çš„åœ°æ–¹ï¼Œå­ç±»ä¸€å®šå¯ä»¥å‡ºç°ã€‚LSPæ˜¯ç»§æ‰¿å¤ç”¨çš„åŸºçŸ³ï¼Œåªæœ‰å½“æ´¾ç”Ÿç±»å¯ä»¥æ›¿æ¢æ‰åŸºç±»ï¼Œä¸”è½¯ä»¶å•ä½çš„åŠŸèƒ½ä¸å—åˆ°å½±å“æ—¶ï¼ŒåŸºç±»æ‰èƒ½çœŸæ­£è¢«å¤ç”¨ï¼Œè€Œæ´¾ç”Ÿç±»ä¹Ÿèƒ½å¤Ÿåœ¨åŸºç±»çš„åŸºç¡€ä¸Šå¢åŠ æ–°çš„è¡Œä¸ºã€‚é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å¼€é—­åŸåˆ™çš„è¡¥å……ã€‚å®ç°å¼€é—­åŸåˆ™çš„å…³é”®æ­¥éª¤å°±æ˜¯æŠ½è±¡åŒ–ï¼Œè€ŒåŸºç±»ä¸å­ç±»çš„ç»§æ‰¿å…³ç³»å°±æ˜¯æŠ½è±¡åŒ–çš„å…·ä½“å®ç°ï¼Œæ‰€ä»¥é‡Œæ°ä»£æ¢åŸåˆ™æ˜¯å¯¹å®ç°æŠ½è±¡åŒ–çš„å…·ä½“æ­¥éª¤çš„è§„èŒƒã€‚</p>
<ol>
<li>
<p>é‡Œæ°æ›¿æ¢åŸåˆ™(Liskov Substitution Principle)åœ¨ 1988 å¹´ï¼Œç”±éº»çœç†å·¥å­¦é™¢çš„ä»¥ä¸ºå§“é‡Œçš„å¥³å£«á¨€ å‡ºçš„ã€‚</p>
</li>
<li>
<p>å¦‚æœå¯¹æ¯ä¸ªç±»å‹ä¸º T1 çš„å¯¹è±¡ o1ï¼Œéƒ½æœ‰ç±»å‹ä¸º T2 çš„å¯¹è±¡ o2ï¼Œä½¿å¾—ä»¥ T1 å®šä¹‰çš„æ‰€æœ‰ç¨‹åº P åœ¨æ‰€æœ‰çš„å¯¹è±¡ o1 éƒ½ä»£æ¢æˆ o2 æ—¶ï¼Œç¨‹åº P çš„è¡Œä¸ºæ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç±»å‹ T2 æ˜¯ç±»å‹ T1 çš„å­ç±»å‹ã€‚<strong>æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰å¼•ç”¨åŸºç±»çš„åœ°é¡»èƒ½é€æ˜åœ°ä½¿ç”¨å…¶å­ç±»çš„å¯¹è±¡</strong>ã€‚</p>
</li>
<li>
<p>åœ¨ä½¿ç”¨ç»§æ‰¿æ—¶ï¼Œéµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼Œåœ¨<strong>å­ç±»ä¸­å°½é‡ä¸è¦é‡å†™çˆ¶ç±»çš„æ–¹æ³•</strong></p>
</li>
<li>
<p>é‡Œæ°æ›¿æ¢åŸåˆ™å‘Šè¯‰æˆ‘ä»¬ï¼Œç»§æ‰¿å®é™…ä¸Šè®©ä¸¤ä¸ªç±»è€¦åˆæ€§å¢å¼ºäº†ï¼Œåœ¨é€‚å½“çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é€šè¿‡<strong>èšåˆï¼Œç»„åˆï¼Œä¾èµ– æ¥è§£å†³é—®é¢˜</strong>ã€‚.</p>
</li>
</ol>
<blockquote>
<p>ç»§æ‰¿æ€§çš„æ€è€ƒå’Œè¯´æ˜</p>
</blockquote>
<ol>
<li>
<p>ç»§æ‰¿åŒ…å«è¿™æ ·ä¸€å±‚å«ä¹‰ï¼šçˆ¶ç±»ä¸­å‡¡æ˜¯å·²ç»å®ç°å¥½çš„æ–¹æ³•ï¼Œå®é™…ä¸Šæ˜¯åœ¨è®¾å®šè§„èŒƒå’Œå¥‘çº¦ï¼Œè™½ç„¶å®ƒä¸å¼ºåˆ¶è¦æ±‚æ‰€æœ‰çš„å­ç±»å¿…é¡»éµå¾ªè¿™äº›å¥‘çº¦ï¼Œä½†æ˜¯å¦‚æœå­ç±»å¯¹è¿™äº›å·²ç»å®ç°çš„æ–¹æ³•ä»»æ„ä¿®æ”¹ï¼Œå°±ä¼šå¯¹æ•´ä¸ªç»§æ‰¿ä½“ç³»é€ æˆç ´åã€‚</p>
</li>
<li>
<p><strong>ç»§æ‰¿åœ¨ç»™ç¨‹åºè®¾è®¡å¸¦æ¥ä¾¿åˆ©çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†å¼Šç«¯</strong>ã€‚æ¯”å¦‚ä½¿ç”¨ç»§æ‰¿ä¼šç»™ç¨‹åºå¸¦æ¥<strong>ä¾µå…¥æ€§</strong>ï¼Œç¨‹åºçš„å¯ç§»æ¤æ€§é™ä½ï¼Œå¢åŠ å¯¹è±¡é—´çš„è€¦åˆæ€§ï¼Œå¦‚æœä¸€ä¸ªç±»è¢«å…¶ä»–çš„ç±»æ‰€ç»§æ‰¿ï¼Œåˆ™å½“è¿™ä¸ªç±»éœ€è¦ä¿®æ”¹æ—¶ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ‰€æœ‰çš„å­ç±»ï¼Œå¹¶ä¸”çˆ¶ç±»ä¿®æ”¹åï¼Œæ‰€æœ‰æ¶‰åŠåˆ°å­ç±»çš„åŠŸèƒ½éƒ½æœ‰å¯èƒ½äº§ç”Ÿæ•…éšœ</p>
</li>
<li>
<p>é—®é¢˜æ å‡ºï¼š<strong>åœ¨ç¼–ç¨‹ä¸­ï¼Œå¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨ç»§æ‰¿</strong>? =&gt; <strong>é‡Œæ°æ›¿æ¢</strong>åŸåˆ™</p>
</li>
</ol>
<h3 id="ä¸€ä¸ªç¨‹åºå¼•å‡ºçš„é—®é¢˜å’Œæ€è€ƒ"><a class="markdownIt-Anchor" href="#ä¸€ä¸ªç¨‹åºå¼•å‡ºçš„é—®é¢˜å’Œæ€è€ƒ"></a> ä¸€ä¸ªç¨‹åºå¼•å‡ºçš„é—®é¢˜å’Œæ€è€ƒ</h3>
<p><code>Liskov.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.liskov;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Liskov</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>      System.out.println(<span class="hljs-string">&quot;11-3=&quot;</span> + a.func1(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<br>      System.out.println(<span class="hljs-string">&quot;1-8=&quot;</span> + a.func1(<span class="hljs-number">1</span>, <span class="hljs-number">8</span>));<br><br>      System.out.println(<span class="hljs-string">&quot;-----------------------&quot;</span>);<br>      <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>      System.out.println(<span class="hljs-string">&quot;11-3=&quot;</span> + b.func1(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<span class="hljs-comment">//è¿™é‡Œæœ¬æ„æ˜¯æ±‚å‡º11-3</span><br>      System.out.println(<span class="hljs-string">&quot;1-8=&quot;</span> + b.func1(<span class="hljs-number">1</span>, <span class="hljs-number">8</span>));<span class="hljs-comment">// 1-8</span><br>      System.out.println(<span class="hljs-string">&quot;11+3+9=&quot;</span> + b.func2(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<br>      <br>      <br><br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">// Aç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123;<br>   <span class="hljs-comment">// è¿”å›ä¸¤ä¸ªæ•°çš„å·®</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func1</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> &#123;<br>      <span class="hljs-keyword">return</span> num1 - num2;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">// Bç±»ç»§æ‰¿äº†A</span><br><span class="hljs-comment">// å¢åŠ äº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼šå®Œæˆä¸¤ä¸ªæ•°ç›¸åŠ ,ç„¶åå’Œ9æ±‚å’Œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">A</span> &#123;<br>   <span class="hljs-comment">//è¿™é‡Œï¼Œé‡å†™äº†Aç±»çš„æ–¹æ³•, å¯èƒ½æ˜¯æ— æ„è¯†</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func1</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>      <span class="hljs-keyword">return</span> a + b;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>      <span class="hljs-keyword">return</span> func1(a, b) + <span class="hljs-number">9</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="è§£å†³æ–¹æ³•"><a class="markdownIt-Anchor" href="#è§£å†³æ–¹æ³•"></a> è§£å†³æ–¹æ³•</h3>
<ol>
<li>
<p>æˆ‘ä»¬å‘ç°åŸæ¥è¿è¡Œæ­£å¸¸çš„ç›¸å‡åŠŸèƒ½å‘ç”Ÿäº†é”™è¯¯ã€‚åŸå› å°±æ˜¯ç±» B æ— æ„ä¸­é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé€ æˆåŸæœ‰åŠŸèƒ½å‡ºç°é”™è¯¯ã€‚åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé€šè¿‡é‡å†™çˆ¶ç±»çš„æ–¹æ³•å®Œæˆæ–°çš„åŠŸèƒ½ï¼Œè¿™æ ·å†™èµ·æ¥è™½ç„¶ç®€å•ï¼Œä½†æ•´ä¸ªç»§æ‰¿ä½“ç³»çš„å¤ç”¨æ€§ä¼šæ¯”è¾ƒå·®ã€‚ç‰¹åˆ«æ˜¯è¿è¡Œå¤šæ€æ¯”è¾ƒé¢‘ç¹çš„æ—¶å€™</p>
</li>
<li>
<p>é€šç”¨çš„åšæ³•æ˜¯ï¼š<strong>åŸæ¥çš„çˆ¶ç±»å’Œå­ç±»éƒ½ç»§æ‰¿ä¸€ä¸ªæ›´é€šä¿—çš„åŸºç±»</strong>ï¼ŒåŸæœ‰çš„ç»§æ‰¿å…³ç³»å»æ‰ï¼Œé‡‡ç”¨<strong>ä¾èµ–ï¼Œèšåˆï¼Œç»„åˆ</strong>ç­‰å…³ç³»ä»£æ›¿.</p>
</li>
<li>
<p>æ”¹è¿›æ–¹æ¡ˆ</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108202856132.png" srcset="/img/loading.gif" lazyload alt="image-20230108202856132" /></p>
<p><code>Liskov.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.liskov.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Liskov</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>      System.out.println(<span class="hljs-string">&quot;11-3=&quot;</span> + a.func1(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<br>      System.out.println(<span class="hljs-string">&quot;1-8=&quot;</span> + a.func1(<span class="hljs-number">1</span>, <span class="hljs-number">8</span>));<br><br>      System.out.println(<span class="hljs-string">&quot;-----------------------&quot;</span>);<br>      <span class="hljs-type">B</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>();<br>      <span class="hljs-comment">//å› ä¸ºBç±»ä¸å†ç»§æ‰¿Aç±»ï¼Œå› æ­¤è°ƒç”¨è€…ï¼Œä¸ä¼šå†func1æ˜¯æ±‚å‡æ³•</span><br>      <span class="hljs-comment">//è°ƒç”¨å®Œæˆçš„åŠŸèƒ½å°±ä¼šå¾ˆæ˜ç¡®</span><br>      System.out.println(<span class="hljs-string">&quot;11+3=&quot;</span> + b.func1(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<span class="hljs-comment">//è¿™é‡Œæœ¬æ„æ˜¯æ±‚å‡º11+3</span><br>      System.out.println(<span class="hljs-string">&quot;1+8=&quot;</span> + b.func1(<span class="hljs-number">1</span>, <span class="hljs-number">8</span>));<span class="hljs-comment">// 1+8</span><br>      System.out.println(<span class="hljs-string">&quot;11+3+9=&quot;</span> + b.func2(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<br>      <br>      <br>      <span class="hljs-comment">//ä½¿ç”¨ç»„åˆä»ç„¶å¯ä»¥ä½¿ç”¨åˆ°Aç±»ç›¸å…³æ–¹æ³•</span><br>      System.out.println(<span class="hljs-string">&quot;11-3=&quot;</span> + b.func3(<span class="hljs-number">11</span>, <span class="hljs-number">3</span>));<span class="hljs-comment">// è¿™é‡Œæœ¬æ„æ˜¯æ±‚å‡º11-3</span><br>      <br><br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªæ›´åŠ åŸºç¡€çš„åŸºç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123;<br>   <span class="hljs-comment">//æŠŠæ›´åŠ åŸºç¡€çš„æ–¹æ³•å’Œæˆå‘˜å†™åˆ°Baseç±»</span><br>&#125;<br><br><span class="hljs-comment">// Aç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123;<br>   <span class="hljs-comment">// è¿”å›ä¸¤ä¸ªæ•°çš„å·®</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func1</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> &#123;<br>      <span class="hljs-keyword">return</span> num1 - num2;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">// Bç±»ç»§æ‰¿äº†A</span><br><span class="hljs-comment">// å¢åŠ äº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼šå®Œæˆä¸¤ä¸ªæ•°ç›¸åŠ ,ç„¶åå’Œ9æ±‚å’Œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Base</span> &#123;<br>   <span class="hljs-comment">//å¦‚æœBéœ€è¦ä½¿ç”¨Aç±»çš„æ–¹æ³•,ä½¿ç”¨ç»„åˆå…³ç³»</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>   <br>   <span class="hljs-comment">//è¿™é‡Œï¼Œé‡å†™äº†Aç±»çš„æ–¹æ³•, å¯èƒ½æ˜¯æ— æ„è¯†</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func1</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>      <span class="hljs-keyword">return</span> a + b;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func2</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>      <span class="hljs-keyword">return</span> func1(a, b) + <span class="hljs-number">9</span>;<br>   &#125;<br>   <br>   <span class="hljs-comment">//æˆ‘ä»¬ä»ç„¶æƒ³ä½¿ç”¨Açš„æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">func3</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.a.func1(a, b);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="3-ä¾èµ–å€’è½¬åŸåˆ™dependence-inversion-principle"><a class="markdownIt-Anchor" href="#3-ä¾èµ–å€’è½¬åŸåˆ™dependence-inversion-principle"></a> <strong>3ã€ä¾èµ–å€’è½¬åŸåˆ™ï¼ˆDependence Inversion Principleï¼‰</strong></h2>
<ol>
<li>
<p>é«˜å±‚æ¨¡å—ä¸åº”è¯¥ä¾èµ–ä½å±‚æ¨¡å—ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–å…¶æŠ½è±¡</p>
</li>
<li>
<p><strong>æŠ½è±¡ä¸åº”è¯¥ä¾èµ–ç»†èŠ‚ï¼Œç»†èŠ‚åº”è¯¥ä¾èµ–æŠ½è±¡</strong></p>
</li>
<li>
<p>ä¾èµ–å€’è½¬(å€’ç½®)çš„ä¸­å¿ƒæ€æƒ³æ˜¯<strong>é¢å‘æ¥å£ç¼–ç¨‹</strong></p>
</li>
<li>
<p>ä¾èµ–å€’è½¬åŸåˆ™æ˜¯åŸºäºè¿™æ ·çš„è®¾è®¡ç†å¿µï¼šç›¸å¯¹äºç»†èŠ‚çš„å¤šå˜æ€§ï¼ŒæŠ½è±¡çš„ä¸œè¥¿è¦ç¨³å®šçš„å¤šã€‚ä»¥æŠ½è±¡ä¸ºåŸºç¡€æ­å»ºçš„æ¶æ„æ¯”ä»¥ç»†èŠ‚ä¸ºåŸºç¡€çš„æ¶æ„è¦ç¨³å®šçš„å¤šã€‚åœ¨ java ä¸­ï¼ŒæŠ½è±¡æŒ‡çš„æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œç»†èŠ‚å°±æ˜¯å…·ä½“çš„å®ç°ç±»</p>
</li>
<li>
<p>ä½¿ç”¨<strong>æ¥å£æˆ–æŠ½è±¡ç±»</strong>çš„ç›®çš„æ˜¯åˆ¶å®šå¥½<strong>è§„èŒƒ</strong>ï¼Œè€Œä¸æ¶‰åŠä»»ä½•å…·ä½“çš„æ“ä½œï¼ŒæŠŠ<strong>å±•ç°ç»†èŠ‚çš„ä»»åŠ¡äº¤ç»™ä»–ä»¬çš„å®ç°ç±»</strong>å»å®Œæˆ</p>
</li>
</ol>
<h3 id="å®ç°æ–¹æ¡ˆ-1-åˆ†æè¯´æ˜"><a class="markdownIt-Anchor" href="#å®ç°æ–¹æ¡ˆ-1-åˆ†æè¯´æ˜"></a> å®ç°æ–¹æ¡ˆ 1 + åˆ†æè¯´æ˜</h3>
<p><code>DependecyInversion.java</code></p>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.inversion;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DependecyInversion</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>      person.receive(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Email</span>());<br>   &#125;<br><br>&#125;<br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Email</span> &#123;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ç”µå­é‚®ä»¶ä¿¡æ¯: hello,world&quot;</span>;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//å®ŒæˆPersonæ¥æ”¶æ¶ˆæ¯çš„åŠŸèƒ½</span><br><span class="hljs-comment">//æ–¹å¼1åˆ†æ</span><br><span class="hljs-comment">//1. ç®€å•ï¼Œæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°</span><br><span class="hljs-comment">//2. å¦‚æœæˆ‘ä»¬è·å–çš„å¯¹è±¡æ˜¯ å¾®ä¿¡ï¼ŒçŸ­ä¿¡ç­‰ç­‰ï¼Œåˆ™æ–°å¢ç±»ï¼ŒåŒæ—¶Peronsä¹Ÿè¦å¢åŠ ç›¸åº”çš„æ¥æ”¶æ–¹æ³•</span><br><span class="hljs-comment">//3. è§£å†³æ€è·¯ï¼šå¼•å…¥ä¸€ä¸ªæŠ½è±¡çš„æ¥å£IReceiver, è¡¨ç¤ºæ¥æ”¶è€…, è¿™æ ·Personç±»ä¸æ¥å£IReceiverå‘ç”Ÿä¾èµ–</span><br><span class="hljs-comment">//   å› ä¸ºEmail, WeiXin ç­‰ç­‰å±äºæ¥æ”¶çš„èŒƒå›´ï¼Œä»–ä»¬å„è‡ªå®ç°IReceiver æ¥å£å°±ok, è¿™æ ·æˆ‘ä»¬å°±ç¬¦å·ä¾èµ–å€’è½¬åŸåˆ™</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(Email email )</span> &#123;<br>      System.out.println(email.getInfo());<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="å®ç°æ–¹æ¡ˆ-2ä¾èµ–å€’è½¬-åˆ†æè¯´æ˜"><a class="markdownIt-Anchor" href="#å®ç°æ–¹æ¡ˆ-2ä¾èµ–å€’è½¬-åˆ†æè¯´æ˜"></a> å®ç°æ–¹æ¡ˆ 2(ä¾èµ–å€’è½¬) + åˆ†æè¯´æ˜</h3>
<p><code>DependecyInversion.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.inversion.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DependecyInversion</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//å®¢æˆ·ç«¯æ— éœ€æ”¹å˜</span><br>      <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>      person.receive(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Email</span>());<br>      <br>      person.receive(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeiXin</span>());<br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">//å®šä¹‰æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IReceiver</span> &#123;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Email</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IReceiver</span> &#123;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ç”µå­é‚®ä»¶ä¿¡æ¯: hello,world&quot;</span>;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//å¢åŠ å¾®ä¿¡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WeiXin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IReceiver</span> &#123;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInfo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;å¾®ä¿¡ä¿¡æ¯: hello,ok&quot;</span>;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//æ–¹å¼2</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>   <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬æ˜¯å¯¹æ¥å£çš„ä¾èµ–</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(IReceiver receiver )</span> &#123;<br>      System.out.println(receiver.getInfo());<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="ä¾èµ–å…³ç³»ä¼ é€’çš„ä¸‰ç§æ–¹å¼å’Œåº”ç”¨æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#ä¾èµ–å…³ç³»ä¼ é€’çš„ä¸‰ç§æ–¹å¼å’Œåº”ç”¨æ¡ˆä¾‹"></a> ä¾èµ–å…³ç³»ä¼ é€’çš„ä¸‰ç§æ–¹å¼å’Œåº”ç”¨æ¡ˆä¾‹</h3>
<ol>
<li>
<p>æ¥å£ä¼ é€’</p>
<p>åº”ç”¨æ¡ˆä¾‹ä»£ç </p>
</li>
<li>
<p>æ„é€ æ–¹æ³•ä¼ é€’</p>
<p>åº”ç”¨æ¡ˆä¾‹ä»£ç </p>
</li>
<li>
<p>setter æ–¹å¼ä¼ é€’</p>
</li>
</ol>
<p><code>DependencyPass.java</code></p>
   <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.inversion.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DependencyPass</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">ChangHong</span> <span class="hljs-variable">changHong</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChangHong</span>();<br><span class="hljs-comment">//    OpenAndClose openAndClose = new OpenAndClose();</span><br><span class="hljs-comment">//    openAndClose.open(changHong);</span><br>      <br>      <span class="hljs-comment">//é€šè¿‡æ„é€ å™¨è¿›è¡Œä¾èµ–ä¼ é€’</span><br><span class="hljs-comment">//    OpenAndClose openAndClose = new OpenAndClose(changHong);</span><br><span class="hljs-comment">//    openAndClose.open();</span><br>      <span class="hljs-comment">//é€šè¿‡setteræ–¹æ³•è¿›è¡Œä¾èµ–ä¼ é€’</span><br>      <span class="hljs-type">OpenAndClose</span> <span class="hljs-variable">openAndClose</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAndClose</span>();<br>      openAndClose.setTv(changHong);<br>      openAndClose.open();<br><br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">// æ–¹å¼1ï¼š é€šè¿‡æ¥å£ä¼ é€’å®ç°ä¾èµ–</span><br><span class="hljs-comment">// å¼€å…³çš„æ¥å£</span><br><span class="hljs-comment">// interface IOpenAndClose &#123;</span><br><span class="hljs-comment">// public void open(ITV tv); //æŠ½è±¡æ–¹æ³•,æ¥æ”¶æ¥å£</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">// interface ITV &#123; //ITVæ¥å£</span><br><span class="hljs-comment">// public void play();</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// </span><br><span class="hljs-comment">// class ChangHong implements ITV &#123;</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">// @Override</span><br><span class="hljs-comment">// public void play() &#123;</span><br><span class="hljs-comment">//    // TODO Auto-generated method stub</span><br><span class="hljs-comment">//    System.out.println(&quot;é•¿è™¹ç”µè§†æœºï¼Œæ‰“å¼€&quot;);</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">//  </span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">//// å®ç°æ¥å£</span><br><span class="hljs-comment">// class OpenAndClose implements IOpenAndClose&#123;</span><br><span class="hljs-comment">// public void open(ITV tv)&#123;</span><br><span class="hljs-comment">// tv.play();</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// &#125;</span><br><br><span class="hljs-comment">// æ–¹å¼2: é€šè¿‡æ„é€ æ–¹æ³•ä¾èµ–ä¼ é€’</span><br><span class="hljs-comment">// interface IOpenAndClose &#123;</span><br><span class="hljs-comment">// public void open(); //æŠ½è±¡æ–¹æ³•</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// interface ITV &#123; //ITVæ¥å£</span><br><span class="hljs-comment">// public void play();</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// class OpenAndClose implements IOpenAndClose&#123;</span><br><span class="hljs-comment">// public ITV tv; //æˆå‘˜</span><br><span class="hljs-comment">// public OpenAndClose(ITV tv)&#123; //æ„é€ å™¨</span><br><span class="hljs-comment">// this.tv = tv;</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// public void open()&#123;</span><br><span class="hljs-comment">// this.tv.play();</span><br><span class="hljs-comment">// &#125;</span><br><span class="hljs-comment">// &#125;</span><br><br><br><span class="hljs-comment">// æ–¹å¼3 , é€šè¿‡setteræ–¹æ³•ä¼ é€’</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IOpenAndClose</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span>; <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•</span><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTv</span><span class="hljs-params">(ITV tv)</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ITV</span> &#123; <span class="hljs-comment">// ITVæ¥å£</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">play</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">OpenAndClose</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IOpenAndClose</span> &#123;<br>   <span class="hljs-keyword">private</span> ITV tv;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTv</span><span class="hljs-params">(ITV tv)</span> &#123;<br>      <span class="hljs-built_in">this</span>.tv = tv;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">this</span>.tv.play();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ChangHong</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ITV</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">play</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;é•¿è™¹ç”µè§†æœºï¼Œæ‰“å¼€&quot;</span>);<br>   &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="ä¾èµ–å€’è½¬åŸåˆ™çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#ä¾èµ–å€’è½¬åŸåˆ™çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> ä¾èµ–å€’è½¬åŸåˆ™çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3>
<ol>
<li>
<p>ä½å±‚æ¨¡å—å°½é‡éƒ½è¦æœ‰æŠ½è±¡ç±»æˆ–æ¥å£ï¼Œæˆ–è€…ä¸¤è€…éƒ½æœ‰ï¼Œç¨‹åºç¨³å®šæ€§æ›´å¥½.</p>
</li>
<li>
<p>å˜é‡çš„<strong>å£°æ˜ç±»å‹å°½é‡æ˜¯æŠ½è±¡ç±»æˆ–æ¥å£</strong>, è¿™æ ·æˆ‘ä»¬çš„å˜é‡å¼•ç”¨å’Œå®é™…å¯¹è±¡é—´ï¼Œå°±å­˜åœ¨<strong>ä¸€ä¸ªç¼“å†²å±‚</strong>ï¼Œåˆ©äºç¨‹åºæ‰©å±•å’Œä¼˜åŒ–</p>
</li>
<li>
<p>ç»§æ‰¿æ—¶éµå¾ª<strong>é‡Œæ°æ›¿æ¢</strong>åŸåˆ™</p>
</li>
</ol>
<h2 id="4-æ¥å£éš”ç¦»åŸåˆ™interface-segregation-principle"><a class="markdownIt-Anchor" href="#4-æ¥å£éš”ç¦»åŸåˆ™interface-segregation-principle"></a> <strong>4ã€æ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰</strong></h2>
<p>è¿™ä¸ªåŸåˆ™çš„æ„æ€æ˜¯ï¼šä½¿ç”¨å¤šä¸ªéš”ç¦»çš„æ¥å£ï¼Œæ¯”ä½¿ç”¨å•ä¸ªæ¥å£è¦å¥½ã€‚å®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ„æ€æ˜¯ï¼šé™ä½ç±»ä¹‹é—´çš„è€¦åˆåº¦ã€‚ç”±æ­¤å¯è§ï¼Œå…¶å®è®¾è®¡æ¨¡å¼å°±æ˜¯ä»å¤§å‹è½¯ä»¶æ¶æ„å‡ºå‘ã€ä¾¿äºå‡çº§å’Œç»´æŠ¤çš„è½¯ä»¶è®¾è®¡æ€æƒ³ï¼Œå®ƒå¼ºè°ƒé™ä½ä¾èµ–ï¼Œé™ä½è€¦åˆã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108200601362.png" srcset="/img/loading.gif" lazyload alt="image-20230108200601362" /></p>
<ol>
<li>
<p>ç±» A é€šè¿‡æ¥å£ Interface1 ä¾èµ–ç±» Bï¼Œç±» C é€šè¿‡æ¥å£ Interface1 ä¾èµ–ç±» Dï¼Œå¦‚æœæ¥å£ Interface1 å¯¹äºç±» A å’Œç±» Cæ¥è¯´ä¸æ˜¯æœ€å°æ¥å£ï¼Œé‚£ä¹ˆç±» B å’Œç±» D å¿…é¡»å»å®ç°ä»–ä»¬ä¸éœ€è¦çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p>æŒ‰éš”ç¦»åŸåˆ™åº”å½“è¿™æ ·å¤„ç†ï¼š</p>
</li>
</ol>
<p><strong>å°†æ¥å£ Interface1</strong> æ‹†åˆ†ä¸º<strong>ç‹¬ç«‹çš„å‡ ä¸ªæ¥å£(è¿™é‡Œæˆ‘ä»¬æ‹†åˆ†æˆ 3 ä¸ªæ¥å£)</strong>ï¼Œç±» A å’Œç±» C åˆ†åˆ«ä¸ä»–ä»¬éœ€è¦çš„æ¥å£å»ºç«‹ä¾èµ–å…³ç³»ã€‚ä¹Ÿå°±æ˜¯é‡‡ç”¨æ¥å£éš”ç¦»åŸåˆ™</p>
<p><code>Segregation1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.segregation;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Segregation1</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br><br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface1</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface1</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation1&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation2&quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation3&quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation4&quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation5&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface1</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation1&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation2&quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation3&quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation4&quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation5&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123; <span class="hljs-comment">//A ç±»é€šè¿‡æ¥å£Interface1 ä¾èµ–(ä½¿ç”¨) Bç±»ï¼Œä½†æ˜¯åªä¼šç”¨åˆ°1,2,3æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend1</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation1();<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend2</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation2();<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend3</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation3();<br>   &#125;<br>&#125;<br>  <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123; <span class="hljs-comment">//C ç±»é€šè¿‡æ¥å£Interface1 ä¾èµ–(ä½¿ç”¨) Dç±»ï¼Œä½†æ˜¯åªä¼šç”¨åˆ°1,4,5æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend1</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation1();<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend4</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation4();<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend5</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation5();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Segregation1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.segregation.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Segregation1</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// ä½¿ç”¨ä¸€æŠŠ</span><br>      <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>      a.depend1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>()); <span class="hljs-comment">// Aç±»é€šè¿‡æ¥å£å»ä¾èµ–Bç±»</span><br>      a.depend2(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br>      a.depend3(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br><br>      <span class="hljs-type">C</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">C</span>();<br><br>      c.depend1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>()); <span class="hljs-comment">// Cç±»é€šè¿‡æ¥å£å»ä¾èµ–(ä½¿ç”¨)Dç±»</span><br>      c.depend4(<span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>());<br>      c.depend5(<span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>());<br><br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">// æ¥å£1</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface1</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br><span class="hljs-comment">// æ¥å£2</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface2</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span>;<br><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// æ¥å£3</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface3</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span>;<br><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface1</span>, Interface2 &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation1&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation2&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation3&quot;</span>);<br>   &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface1</span>, Interface3 &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation1&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation4&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation5&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123; <span class="hljs-comment">// A ç±»é€šè¿‡æ¥å£Interface1,Interface2 ä¾èµ–(ä½¿ç”¨) Bç±»ï¼Œä½†æ˜¯åªä¼šç”¨åˆ°1,2,3æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend1</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation1();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend2</span><span class="hljs-params">(Interface2 i)</span> &#123;<br>      i.operation2();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend3</span><span class="hljs-params">(Interface2 i)</span> &#123;<br>      i.operation3();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123; <span class="hljs-comment">// C ç±»é€šè¿‡æ¥å£Interface1,Interface3 ä¾èµ–(ä½¿ç”¨) Dç±»ï¼Œä½†æ˜¯åªä¼šç”¨åˆ°1,4,5æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend1</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation1();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend4</span><span class="hljs-params">(Interface3 i)</span> &#123;<br>      i.operation4();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend5</span><span class="hljs-params">(Interface3 i)</span> &#123;<br>      i.operation5();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="åº”ä¼ ç»Ÿæ–¹æ³•çš„é—®é¢˜å’Œä½¿ç”¨æ¥å£éš”ç¦»åŸåˆ™æ”¹è¿›"><a class="markdownIt-Anchor" href="#åº”ä¼ ç»Ÿæ–¹æ³•çš„é—®é¢˜å’Œä½¿ç”¨æ¥å£éš”ç¦»åŸåˆ™æ”¹è¿›"></a> åº”ä¼ ç»Ÿæ–¹æ³•çš„é—®é¢˜å’Œä½¿ç”¨æ¥å£éš”ç¦»åŸåˆ™æ”¹è¿›</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108201003713.png" srcset="/img/loading.gif" lazyload alt="image-20230108201003713" /></p>
<ol>
<li>
<p>ç±» A é€šè¿‡æ¥å£ Interface1 ä¾èµ–ç±» Bï¼Œç±» C é€šè¿‡æ¥å£ Interface1 ä¾èµ–ç±» Dï¼Œå¦‚æœæ¥å£ Interface1 å¯¹äºç±» A å’Œç±» Cæ¥è¯´ä¸æ˜¯æœ€å°æ¥å£ï¼Œé‚£ä¹ˆç±» B å’Œç±» D å¿…é¡»å»å®ç°ä»–ä»¬ä¸éœ€è¦çš„æ–¹æ³•</p>
</li>
<li>
<p>å°†æ¥å£ <strong>Interface1 æ‹†åˆ†ä¸ºç‹¬ç«‹çš„å‡ ä¸ªæ¥å£</strong>ï¼Œç±» A å’Œç±» C åˆ†åˆ«ä¸ä»–ä»¬éœ€è¦çš„æ¥å£å»ºç«‹ä¾èµ–å…³ç³»ã€‚ä¹Ÿå°±æ˜¯é‡‡ç”¨æ¥å£éš”ç¦»åŸåˆ™</p>
</li>
<li>
<p>æ¥å£ Interface1 ä¸­å‡ºç°çš„æ–¹æ³•ï¼Œæ ¹æ®å®é™…æƒ…å†µæ‹†åˆ†ä¸º<strong>ä¸‰ä¸ª</strong>æ¥å£</p>
</li>
<li>
<p><code>Segregation1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.segregation.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Segregation1</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// ä½¿ç”¨ä¸€æŠŠ</span><br>      <span class="hljs-type">A</span> <span class="hljs-variable">a</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">A</span>();<br>      a.depend1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>()); <span class="hljs-comment">// Aç±»é€šè¿‡æ¥å£å»ä¾èµ–Bç±»</span><br>      a.depend2(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br>      a.depend3(<span class="hljs-keyword">new</span> <span class="hljs-title class_">B</span>());<br><br>      <span class="hljs-type">C</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">C</span>();<br><br>      c.depend1(<span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>()); <span class="hljs-comment">// Cç±»é€šè¿‡æ¥å£å»ä¾èµ–(ä½¿ç”¨)Dç±»</span><br>      c.depend4(<span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>());<br>      c.depend5(<span class="hljs-keyword">new</span> <span class="hljs-title class_">D</span>());<br><br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">// æ¥å£1</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface1</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br><span class="hljs-comment">// æ¥å£2</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface2</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span>;<br><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// æ¥å£3</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface3</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span>;<br><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface1</span>, Interface2 &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation1&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation2</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation2&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation3</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;B å®ç°äº† operation3&quot;</span>);<br>   &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">D</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface1</span>, Interface3 &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation1</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation1&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation4</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation4&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation5</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;D å®ç°äº† operation5&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> &#123; <span class="hljs-comment">// A ç±»é€šè¿‡æ¥å£Interface1,Interface2 ä¾èµ–(ä½¿ç”¨) Bç±»ï¼Œä½†æ˜¯åªä¼šç”¨åˆ°1,2,3æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend1</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation1();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend2</span><span class="hljs-params">(Interface2 i)</span> &#123;<br>      i.operation2();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend3</span><span class="hljs-params">(Interface2 i)</span> &#123;<br>      i.operation3();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> &#123; <span class="hljs-comment">// C ç±»é€šè¿‡æ¥å£Interface1,Interface3 ä¾èµ–(ä½¿ç”¨) Dç±»ï¼Œä½†æ˜¯åªä¼šç”¨åˆ°1,4,5æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend1</span><span class="hljs-params">(Interface1 i)</span> &#123;<br>      i.operation1();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend4</span><span class="hljs-params">(Interface3 i)</span> &#123;<br>      i.operation4();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">depend5</span><span class="hljs-params">(Interface3 i)</span> &#123;<br>      i.operation5();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="5-è¿ªç±³ç‰¹æ³•åˆ™åˆç§°æœ€å°‘çŸ¥é“åŸåˆ™demeter-principle"><a class="markdownIt-Anchor" href="#5-è¿ªç±³ç‰¹æ³•åˆ™åˆç§°æœ€å°‘çŸ¥é“åŸåˆ™demeter-principle"></a> <strong>5ã€è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåˆç§°æœ€å°‘çŸ¥é“åŸåˆ™ï¼ˆDemeter Principleï¼‰</strong></h2>
<p>æœ€å°‘çŸ¥é“åŸåˆ™æ˜¯æŒ‡ï¼šä¸€ä¸ªå®ä½“åº”å½“å°½é‡å°‘åœ°ä¸å…¶ä»–å®ä½“ä¹‹é—´å‘ç”Ÿç›¸äº’ä½œç”¨ï¼Œä½¿å¾—ç³»ç»ŸåŠŸèƒ½æ¨¡å—ç›¸å¯¹ç‹¬ç«‹ã€‚</p>
<ol>
<li>
<p>ä¸€ä¸ªå¯¹è±¡åº”è¯¥å¯¹å…¶ä»–å¯¹è±¡ä¿æŒæœ€å°‘çš„äº†è§£</p>
</li>
<li>
<p>ç±»ä¸ç±»å…³ç³»è¶Šå¯†åˆ‡ï¼Œè€¦åˆåº¦è¶Šå¤§</p>
</li>
<li>
<p>è¿ªç±³ç‰¹æ³•åˆ™(Demeter Principle)åˆå«<strong>æœ€å°‘çŸ¥é“åŸåˆ™</strong>ï¼Œå³ä¸€ä¸ªç±»<strong>å¯¹è‡ªå·±ä¾èµ–çš„ç±»çŸ¥é“çš„è¶Šå°‘è¶Šå¥½</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºè¢«ä¾èµ–çš„ç±»ä¸ç®¡å¤šä¹ˆå¤æ‚ï¼Œéƒ½å°½é‡å°†é€»è¾‘å°è£…åœ¨ç±»çš„å†…éƒ¨ã€‚å¯¹å¤–é™¤äº†æä¾›çš„ public æ–¹æ³•ï¼Œä¸å¯¹å¤–æ³„éœ²ä»»ä½•ä¿¡æ¯</p>
</li>
<li>
<p>è¿ªç±³ç‰¹æ³•åˆ™è¿˜æœ‰ä¸ªæ›´ç®€å•çš„å®šä¹‰ï¼šåªä¸ç›´æ¥çš„æœ‹å‹é€šä¿¡</p>
</li>
<li>
<p><strong>ç›´æ¥çš„æœ‹å‹</strong>ï¼šæ¯ä¸ªå¯¹è±¡éƒ½ä¼šä¸å…¶ä»–å¯¹è±¡æœ‰<strong>è€¦åˆå…³ç³»</strong>ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æœ‰è€¦åˆå…³ç³»ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´æ˜¯æœ‹å‹å…³ç³»ã€‚è€¦åˆçš„æ–¹å¼å¾ˆå¤šï¼Œä¾èµ–ï¼Œå…³è”ï¼Œç»„åˆï¼Œèšåˆç­‰ã€‚å…¶ä¸­ï¼Œæˆ‘ä»¬ç§°å‡ºç°<strong>æˆå‘˜å˜é‡</strong>ï¼Œ<strong>æ–¹æ³•å‚æ•°</strong>ï¼Œ<strong>æ–¹æ³•è¿”</strong>å›å€¼ä¸­çš„ç±»ä¸ºç›´æ¥çš„æœ‹å‹ï¼Œè€Œå‡ºç°åœ¨<strong>å±€éƒ¨å˜é‡ä¸­çš„ç±»ä¸æ˜¯ç›´æ¥çš„æœ‹å‹</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™Œç”Ÿçš„ç±»æœ€å¥½ä¸è¦ä»¥å±€éƒ¨å˜é‡çš„å½¢å¼å‡ºç°åœ¨ç±»çš„å†…éƒ¨ã€‚</p>
</li>
</ol>
<h3 id="åº”ç”¨å®ä¾‹"><a class="markdownIt-Anchor" href="#åº”ç”¨å®ä¾‹"></a> åº”ç”¨å®ä¾‹</h3>
<ol>
<li>æœ‰ä¸€ä¸ªå­¦æ ¡ï¼Œä¸‹å±æœ‰å„ä¸ªå­¦é™¢å’Œæ€»éƒ¨ï¼Œç°è¦æ±‚æ‰“å°å‡ºå­¦æ ¡æ€»éƒ¨å‘˜å·¥ ID å’Œå­¦é™¢å‘˜å·¥çš„ id</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204621982.png" srcset="/img/loading.gif" lazyload alt="image-20230108204621982" /></p>
<p><code>Demeter1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.demeter;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">//å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demeter1</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//åˆ›å»ºäº†ä¸€ä¸ª SchoolManager å¯¹è±¡</span><br>      <span class="hljs-type">SchoolManager</span> <span class="hljs-variable">schoolManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SchoolManager</span>();<br>      <span class="hljs-comment">//è¾“å‡ºå­¦é™¢çš„å‘˜å·¥id å’Œ  å­¦æ ¡æ€»éƒ¨çš„å‘˜å·¥ä¿¡æ¯</span><br>      schoolManager.printAllEmployee(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CollegeManager</span>());<br><br>   &#125;<br><br>&#125;<br><br><br><span class="hljs-comment">//å­¦æ ¡æ€»éƒ¨å‘˜å·¥ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>   <span class="hljs-keyword">private</span> String id;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> &#123;<br>      <span class="hljs-built_in">this</span>.id = id;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> id;<br>   &#125;<br>&#125;<br><br><br><span class="hljs-comment">//å­¦é™¢çš„å‘˜å·¥ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CollegeEmployee</span> &#123;<br>   <span class="hljs-keyword">private</span> String id;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> &#123;<br>      <span class="hljs-built_in">this</span>.id = id;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> id;<br>   &#125;<br>&#125;<br><br><br><span class="hljs-comment">//ç®¡ç†å­¦é™¢å‘˜å·¥çš„ç®¡ç†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CollegeManager</span> &#123;<br>   <span class="hljs-comment">//è¿”å›å­¦é™¢çš„æ‰€æœ‰å‘˜å·¥</span><br>   <span class="hljs-keyword">public</span> List&lt;CollegeEmployee&gt; <span class="hljs-title function_">getAllEmployee</span><span class="hljs-params">()</span> &#123;<br>      List&lt;CollegeEmployee&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;CollegeEmployee&gt;();<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123; <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬å¢åŠ äº†10ä¸ªå‘˜å·¥åˆ° list</span><br>         <span class="hljs-type">CollegeEmployee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CollegeEmployee</span>();<br>         emp.setId(<span class="hljs-string">&quot;å­¦é™¢å‘˜å·¥id= &quot;</span> + i);<br>         list.add(emp);<br>      &#125;<br>      <span class="hljs-keyword">return</span> list;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//å­¦æ ¡ç®¡ç†ç±»</span><br><br><span class="hljs-comment">//åˆ†æ SchoolManager ç±»çš„ç›´æ¥æœ‹å‹ç±»æœ‰å“ªäº› Employeeã€CollegeManager</span><br><span class="hljs-comment">//CollegeEmployee ä¸æ˜¯ ç›´æ¥æœ‹å‹ è€Œæ˜¯ä¸€ä¸ªé™Œç”Ÿç±»ï¼Œè¿™æ ·è¿èƒŒäº† è¿ªç±³ç‰¹æ³•åˆ™ </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SchoolManager</span> &#123;<br>   <span class="hljs-comment">//è¿”å›å­¦æ ¡æ€»éƒ¨çš„å‘˜å·¥</span><br>   <span class="hljs-keyword">public</span> List&lt;Employee&gt; <span class="hljs-title function_">getAllEmployee</span><span class="hljs-params">()</span> &#123;<br>      List&lt;Employee&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Employee&gt;();<br>      <br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123; <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬å¢åŠ äº†5ä¸ªå‘˜å·¥åˆ° list</span><br>         <span class="hljs-type">Employee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>         emp.setId(<span class="hljs-string">&quot;å­¦æ ¡æ€»éƒ¨å‘˜å·¥id= &quot;</span> + i);<br>         list.add(emp);<br>      &#125;<br>      <span class="hljs-keyword">return</span> list;<br>   &#125;<br><br>   <span class="hljs-comment">//è¯¥æ–¹æ³•å®Œæˆè¾“å‡ºå­¦æ ¡æ€»éƒ¨å’Œå­¦é™¢å‘˜å·¥ä¿¡æ¯(id)</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">printAllEmployee</span><span class="hljs-params">(CollegeManager sub)</span> &#123;<br>      <br>      <span class="hljs-comment">//åˆ†æé—®é¢˜</span><br>      <span class="hljs-comment">//1. è¿™é‡Œçš„ CollegeEmployee ä¸æ˜¯  SchoolManagerçš„ç›´æ¥æœ‹å‹</span><br>      <span class="hljs-comment">//2. CollegeEmployee æ˜¯ä»¥å±€éƒ¨å˜é‡æ–¹å¼å‡ºç°åœ¨ SchoolManager</span><br>      <span class="hljs-comment">//3. è¿åäº† è¿ªç±³ç‰¹æ³•åˆ™ </span><br>      <br>      <span class="hljs-comment">//è·å–åˆ°å­¦é™¢å‘˜å·¥</span><br>      List&lt;CollegeEmployee&gt; list1 = sub.getAllEmployee();<br>      System.out.println(<span class="hljs-string">&quot;------------å­¦é™¢å‘˜å·¥------------&quot;</span>);<br>      <span class="hljs-keyword">for</span> (CollegeEmployee e : list1) &#123;<br>         System.out.println(e.getId());<br>      &#125;<br>      <span class="hljs-comment">//è·å–åˆ°å­¦æ ¡æ€»éƒ¨å‘˜å·¥</span><br>      List&lt;Employee&gt; list2 = <span class="hljs-built_in">this</span>.getAllEmployee();<br>      System.out.println(<span class="hljs-string">&quot;------------å­¦æ ¡æ€»éƒ¨å‘˜å·¥------------&quot;</span>);<br>      <span class="hljs-keyword">for</span> (Employee e : list2) &#123;<br>         System.out.println(e.getId());<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="åº”ç”¨å®ä¾‹æ”¹è¿›"><a class="markdownIt-Anchor" href="#åº”ç”¨å®ä¾‹æ”¹è¿›"></a> åº”ç”¨å®ä¾‹æ”¹è¿›</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204609508.png" srcset="/img/loading.gif" lazyload alt="image-20230108204609508" /></p>
<ol>
<li>
<p>å‰é¢è®¾è®¡çš„é—®é¢˜åœ¨äº SchoolManager ä¸­ï¼Œ<strong>CollegeEmployee ç±»å¹¶ä¸æ˜¯ SchoolManager</strong> ç±»çš„ç›´æ¥æœ‹å‹ (åˆ†æ)</p>
</li>
<li>
<p>æŒ‰ç…§è¿ªç±³ç‰¹æ³•åˆ™ï¼Œåº”è¯¥é¿å…ç±»ä¸­å‡ºç°è¿™æ ·éç›´æ¥æœ‹å‹å…³ç³»çš„è€¦åˆ</p>
</li>
</ol>
<p><code>Demeter1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.demeter.improve;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">//å®¢æˆ·ç«¯</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Demeter1</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;~~~ä½¿ç”¨è¿ªç±³ç‰¹æ³•åˆ™çš„æ”¹è¿›~~~&quot;</span>);<br>      <span class="hljs-comment">//åˆ›å»ºäº†ä¸€ä¸ª SchoolManager å¯¹è±¡</span><br>      <span class="hljs-type">SchoolManager</span> <span class="hljs-variable">schoolManager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SchoolManager</span>();<br>      <span class="hljs-comment">//è¾“å‡ºå­¦é™¢çš„å‘˜å·¥id å’Œ  å­¦æ ¡æ€»éƒ¨çš„å‘˜å·¥ä¿¡æ¯</span><br>      schoolManager.printAllEmployee(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CollegeManager</span>());<br><br>   &#125;<br><br>&#125;<br><br><br><span class="hljs-comment">//å­¦æ ¡æ€»éƒ¨å‘˜å·¥ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> &#123;<br>   <span class="hljs-keyword">private</span> String id;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> &#123;<br>      <span class="hljs-built_in">this</span>.id = id;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> id;<br>   &#125;<br>&#125;<br><br><br><span class="hljs-comment">//å­¦é™¢çš„å‘˜å·¥ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CollegeEmployee</span> &#123;<br>   <span class="hljs-keyword">private</span> String id;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> &#123;<br>      <span class="hljs-built_in">this</span>.id = id;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> id;<br>   &#125;<br>&#125;<br><br><br><span class="hljs-comment">//ç®¡ç†å­¦é™¢å‘˜å·¥çš„ç®¡ç†ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CollegeManager</span> &#123;<br>   <span class="hljs-comment">//è¿”å›å­¦é™¢çš„æ‰€æœ‰å‘˜å·¥</span><br>   <span class="hljs-keyword">public</span> List&lt;CollegeEmployee&gt; <span class="hljs-title function_">getAllEmployee</span><span class="hljs-params">()</span> &#123;<br>      List&lt;CollegeEmployee&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;CollegeEmployee&gt;();<br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123; <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬å¢åŠ äº†10ä¸ªå‘˜å·¥åˆ° list</span><br>         <span class="hljs-type">CollegeEmployee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CollegeEmployee</span>();<br>         emp.setId(<span class="hljs-string">&quot;å­¦é™¢å‘˜å·¥id= &quot;</span> + i);<br>         list.add(emp);<br>      &#125;<br>      <span class="hljs-keyword">return</span> list;<br>   &#125;<br>   <br>   <span class="hljs-comment">//è¾“å‡ºå­¦é™¢å‘˜å·¥çš„ä¿¡æ¯</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printEmployee</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">//è·å–åˆ°å­¦é™¢å‘˜å·¥</span><br>      List&lt;CollegeEmployee&gt; list1 = getAllEmployee();<br>      System.out.println(<span class="hljs-string">&quot;------------å­¦é™¢å‘˜å·¥------------&quot;</span>);<br>      <span class="hljs-keyword">for</span> (CollegeEmployee e : list1) &#123;<br>         System.out.println(e.getId());<br>      &#125;<br>   &#125;<br>&#125;<br><br><span class="hljs-comment">//å­¦æ ¡ç®¡ç†ç±»</span><br><br><span class="hljs-comment">//åˆ†æ SchoolManager ç±»çš„ç›´æ¥æœ‹å‹ç±»æœ‰å“ªäº› Employeeã€CollegeManager</span><br><span class="hljs-comment">//CollegeEmployee ä¸æ˜¯ ç›´æ¥æœ‹å‹ è€Œæ˜¯ä¸€ä¸ªé™Œç”Ÿç±»ï¼Œè¿™æ ·è¿èƒŒäº† è¿ªç±³ç‰¹æ³•åˆ™ </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SchoolManager</span> &#123;<br>   <span class="hljs-comment">//è¿”å›å­¦æ ¡æ€»éƒ¨çš„å‘˜å·¥</span><br>   <span class="hljs-keyword">public</span> List&lt;Employee&gt; <span class="hljs-title function_">getAllEmployee</span><span class="hljs-params">()</span> &#123;<br>      List&lt;Employee&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Employee&gt;();<br>      <br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123; <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬å¢åŠ äº†5ä¸ªå‘˜å·¥åˆ° list</span><br>         <span class="hljs-type">Employee</span> <span class="hljs-variable">emp</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>();<br>         emp.setId(<span class="hljs-string">&quot;å­¦æ ¡æ€»éƒ¨å‘˜å·¥id= &quot;</span> + i);<br>         list.add(emp);<br>      &#125;<br>      <span class="hljs-keyword">return</span> list;<br>   &#125;<br><br>   <span class="hljs-comment">//è¯¥æ–¹æ³•å®Œæˆè¾“å‡ºå­¦æ ¡æ€»éƒ¨å’Œå­¦é™¢å‘˜å·¥ä¿¡æ¯(id)</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">printAllEmployee</span><span class="hljs-params">(CollegeManager sub)</span> &#123;<br>      <br>      <span class="hljs-comment">//åˆ†æé—®é¢˜</span><br>      <span class="hljs-comment">//1. å°†è¾“å‡ºå­¦é™¢çš„å‘˜å·¥æ–¹æ³•ï¼Œå°è£…åˆ°CollegeManager</span><br>      sub.printEmployee();<br>   <br>      <span class="hljs-comment">//è·å–åˆ°å­¦æ ¡æ€»éƒ¨å‘˜å·¥</span><br>      List&lt;Employee&gt; list2 = <span class="hljs-built_in">this</span>.getAllEmployee();<br>      System.out.println(<span class="hljs-string">&quot;------------å­¦æ ¡æ€»éƒ¨å‘˜å·¥------------&quot;</span>);<br>      <span class="hljs-keyword">for</span> (Employee e : list2) &#123;<br>         System.out.println(e.getId());<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> è¿ªç±³ç‰¹æ³•åˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3>
<ol>
<li>
<p>è¿ªç±³ç‰¹æ³•åˆ™çš„æ ¸å¿ƒæ˜¯é™ä½ç±»ä¹‹é—´çš„è€¦åˆ</p>
</li>
<li>
<p>ä½†æ˜¯æ³¨æ„ï¼šç”±äºæ¯ä¸ªç±»éƒ½å‡å°‘äº†ä¸å¿…è¦çš„ä¾èµ–ï¼Œå› æ­¤è¿ªç±³ç‰¹æ³•åˆ™åªæ˜¯è¦æ±‚é™ä½ç±»é—´(å¯¹è±¡é—´)è€¦åˆå…³ç³»ï¼Œ å¹¶ä¸æ˜¯è¦æ±‚å®Œå…¨æ²¡æœ‰ä¾èµ–å…³ç³»</p>
</li>
</ol>
<h2 id="6-åˆæˆå¤ç”¨åŸåˆ™composite-reuse-principle"><a class="markdownIt-Anchor" href="#6-åˆæˆå¤ç”¨åŸåˆ™composite-reuse-principle"></a> <strong>6ã€åˆæˆå¤ç”¨åŸåˆ™ï¼ˆComposite Reuse Principleï¼‰</strong></h2>
<p>åˆæˆå¤ç”¨åŸåˆ™æ˜¯æŒ‡ï¼šå°½é‡ä½¿ç”¨åˆæˆ/èšåˆçš„æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»§æ‰¿ã€‚</p>
<ol>
<li>
<p>æ‰¾å‡ºåº”ç”¨ä¸­å¯èƒ½éœ€è¦å˜åŒ–ä¹‹å¤„ï¼ŒæŠŠå®ƒä»¬ç‹¬ç«‹å‡ºæ¥ï¼Œä¸è¦å’Œé‚£äº›ä¸éœ€è¦å˜åŒ–çš„ä»£ç æ··åœ¨ä¸€èµ·ã€‚</p>
</li>
<li>
<p>é’ˆå¯¹æ¥å£ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹å®ç°ç¼–ç¨‹ã€‚</p>
</li>
<li>
<p>ä¸ºäº†äº¤äº’å¯¹è±¡ä¹‹é—´çš„<strong>æ¾è€¦åˆè®¾è®¡è€ŒåŠª</strong>åŠ›</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230108204802649.png" srcset="/img/loading.gif" lazyload alt="image-20230108204802649" /></p>
<h2 id="7-å•ä¸€èŒè´£åŸåˆ™single-principle"><a class="markdownIt-Anchor" href="#7-å•ä¸€èŒè´£åŸåˆ™single-principle"></a> <strong>7ã€å•ä¸€èŒè´£åŸåˆ™ï¼ˆSingle Principleï¼‰</strong></h2>
<p>å¯¹ç±»æ¥è¯´çš„ï¼Œ<strong>å³ä¸€ä¸ªç±»åº”è¯¥åªè´Ÿè´£ä¸€é¡¹èŒè´£</strong>ã€‚å¦‚ç±» A è´Ÿè´£ä¸¤ä¸ªä¸åŒèŒè´£ï¼šèŒè´£ 1ï¼ŒèŒè´£ 2ã€‚å½“èŒè´£ 1 éœ€æ±‚å˜æ›´è€Œæ”¹å˜ A æ—¶ï¼Œå¯èƒ½é€ æˆèŒè´£ 2 æ‰§è¡Œé”™è¯¯ï¼Œæ‰€ä»¥éœ€è¦å°†ç±» A çš„ç²’åº¦åˆ†è§£ä¸º A1ï¼ŒA2</p>
<p><code>SingleResponsibility1.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.singleresponsibility;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleResponsibility1</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Vehicle</span> <span class="hljs-variable">vehicle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vehicle</span>();<br>      vehicle.run(<span class="hljs-string">&quot;æ‘©æ‰˜è½¦&quot;</span>);<br>      vehicle.run(<span class="hljs-string">&quot;æ±½è½¦&quot;</span>);<br>      vehicle.run(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">// äº¤é€šå·¥å…·ç±»</span><br><span class="hljs-comment">// æ–¹å¼1</span><br><span class="hljs-comment">// 1. åœ¨æ–¹å¼1 çš„runæ–¹æ³•ä¸­ï¼Œè¿åäº†å•ä¸€èŒè´£åŸåˆ™</span><br><span class="hljs-comment">// 2. è§£å†³çš„æ–¹æ¡ˆéå¸¸çš„ç®€å•ï¼Œæ ¹æ®äº¤é€šå·¥å…·è¿è¡Œæ–¹æ³•ä¸åŒï¼Œåˆ†è§£æˆä¸åŒç±»å³å¯</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vehicle</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      System.out.println(vehicle + <span class="hljs-string">&quot; åœ¨å…¬è·¯ä¸Šè¿è¡Œ....&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SingleResponsibility2.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.singleresponsibility;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleResponsibility2</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">RoadVehicle</span> <span class="hljs-variable">roadVehicle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RoadVehicle</span>();<br>      roadVehicle.run(<span class="hljs-string">&quot;æ‘©æ‰˜è½¦&quot;</span>);<br>      roadVehicle.run(<span class="hljs-string">&quot;æ±½è½¦&quot;</span>);<br>      <br>      <span class="hljs-type">AirVehicle</span> <span class="hljs-variable">airVehicle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AirVehicle</span>();<br>      <br>      airVehicle.run(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br>   &#125;<br><br>&#125;<br><br><span class="hljs-comment">//æ–¹æ¡ˆ2çš„åˆ†æ</span><br><span class="hljs-comment">//1. éµå®ˆå•ä¸€èŒè´£åŸåˆ™</span><br><span class="hljs-comment">//2. ä½†æ˜¯è¿™æ ·åšçš„æ”¹åŠ¨å¾ˆå¤§ï¼Œå³å°†ç±»åˆ†è§£ï¼ŒåŒæ—¶ä¿®æ”¹å®¢æˆ·ç«¯</span><br><span class="hljs-comment">//3. æ”¹è¿›ï¼šç›´æ¥ä¿®æ”¹Vehicle ç±»ï¼Œæ”¹åŠ¨çš„ä»£ç ä¼šæ¯”è¾ƒå°‘=&gt;æ–¹æ¡ˆ3</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RoadVehicle</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      System.out.println(vehicle + <span class="hljs-string">&quot;å…¬è·¯è¿è¡Œ&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AirVehicle</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      System.out.println(vehicle + <span class="hljs-string">&quot;å¤©ç©ºè¿è¡Œ&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WaterVehicle</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      System.out.println(vehicle + <span class="hljs-string">&quot;æ°´ä¸­è¿è¡Œ&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SingleResponsibility3.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.principle.singleresponsibility;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleResponsibility3</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Vehicle2</span> <span class="hljs-variable">vehicle2</span>  <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vehicle2</span>();<br>      vehicle2.run(<span class="hljs-string">&quot;æ±½è½¦&quot;</span>);<br>      vehicle2.runWater(<span class="hljs-string">&quot;è½®èˆ¹&quot;</span>);<br>      vehicle2.runAir(<span class="hljs-string">&quot;é£æœº&quot;</span>);<br>   &#125;<br><br>&#125;<br><br><br><span class="hljs-comment">//æ–¹å¼3çš„åˆ†æ</span><br><span class="hljs-comment">//1. è¿™ç§ä¿®æ”¹æ–¹æ³•æ²¡æœ‰å¯¹åŸæ¥çš„ç±»åšå¤§çš„ä¿®æ”¹ï¼Œåªæ˜¯å¢åŠ æ–¹æ³•</span><br><span class="hljs-comment">//2. è¿™é‡Œè™½ç„¶æ²¡æœ‰åœ¨ç±»è¿™ä¸ªçº§åˆ«ä¸Šéµå®ˆå•ä¸€èŒè´£åŸåˆ™ï¼Œä½†æ˜¯åœ¨æ–¹æ³•çº§åˆ«ä¸Šï¼Œä»ç„¶æ˜¯éµå®ˆå•ä¸€èŒè´£</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vehicle2</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      <span class="hljs-comment">//å¤„ç†</span><br>      <br>      System.out.println(vehicle + <span class="hljs-string">&quot; åœ¨å…¬è·¯ä¸Šè¿è¡Œ....&quot;</span>);<br>      <br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runAir</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      System.out.println(vehicle + <span class="hljs-string">&quot; åœ¨å¤©ç©ºä¸Šè¿è¡Œ....&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runWater</span><span class="hljs-params">(String vehicle)</span> &#123;<br>      System.out.println(vehicle + <span class="hljs-string">&quot; åœ¨æ°´ä¸­è¡Œ....&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//æ–¹æ³•2.</span><br>   <span class="hljs-comment">//..</span><br>   <span class="hljs-comment">//..</span><br>   <br>   <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure>
<h3 id="å•ä¸€èŒè´£åŸåˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#å•ä¸€èŒè´£åŸåˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> å•ä¸€èŒè´£åŸåˆ™æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3>
<ol>
<li>
<p>é™ä½ç±»çš„å¤æ‚åº¦ï¼Œä¸€ä¸ªç±»åªè´Ÿè´£ä¸€é¡¹èŒè´£ã€‚</p>
</li>
<li>
<p>é«˜ç±»çš„å¯è¯»æ€§ï¼Œå¯ç»´æŠ¤æ€§</p>
</li>
<li>
<p>é™ä½å˜æ›´å¼•èµ·çš„é£é™©</p>
</li>
<li>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”å½“éµå®ˆå•ä¸€èŒè´£åŸåˆ™ï¼Œåªæœ‰é€»è¾‘è¶³å¤Ÿç®€å•ï¼Œæ‰å¯ä»¥åœ¨ä»£ç çº§è¿åå•ä¸€èŒè´£åŸåˆ™ï¼›åªæœ‰ç±»ä¸­æ–¹æ³•æ•°é‡è¶³å¤Ÿå°‘ï¼Œå¯ä»¥åœ¨æ–¹æ³•çº§åˆ«ä¿æŒå•ä¸€èŒè´£åŸåˆ™</p>
</li>
</ol>
<h1 id="å•ä¾‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#å•ä¾‹æ¨¡å¼"></a> ğŸŒ•å•ä¾‹æ¨¡å¼</h1>
<p>æœ€ä¸ºé‡è¦</p>
<p>å•ä¾‹æ¨¡å¼ï¼ˆSingleton Patternï¼‰æ˜¯ Java ä¸­æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>1ã€å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚</li>
<li>2ã€å•ä¾‹ç±»å¿…é¡»è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚</li>
<li>3ã€å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ã€‚</li>
</ul>
<h2 id="ä»‹ç»"><a class="markdownIt-Anchor" href="#ä»‹ç»"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ä¿è¯ä¸€ä¸ªç±»ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªè®¿é—®å®ƒçš„å…¨å±€è®¿é—®ç‚¹ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸€ä¸ªå…¨å±€ä½¿ç”¨çš„ç±»é¢‘ç¹åœ°åˆ›å»ºä¸é”€æ¯ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> å½“æ‚¨æƒ³æ§åˆ¶å®ä¾‹æ•°ç›®ï¼ŒèŠ‚çœç³»ç»Ÿèµ„æºçš„æ—¶å€™ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> åˆ¤æ–­ç³»ç»Ÿæ˜¯å¦å·²ç»æœ‰è¿™ä¸ªå•ä¾‹ï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong></p>
<ul>
<li>1ã€ä¸€ä¸ªç­çº§åªæœ‰ä¸€ä¸ªç­ä¸»ä»»ã€‚</li>
<li>2ã€Windows æ˜¯å¤šè¿›ç¨‹å¤šçº¿ç¨‹çš„ï¼Œåœ¨æ“ä½œä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå°±ä¸å¯é¿å…åœ°å‡ºç°å¤šä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹åŒæ—¶æ“ä½œä¸€ä¸ªæ–‡ä»¶çš„ç°è±¡ï¼Œæ‰€ä»¥æ‰€æœ‰æ–‡ä»¶çš„å¤„ç†å¿…é¡»é€šè¿‡å”¯ä¸€çš„å®ä¾‹æ¥è¿›è¡Œã€‚</li>
<li>3ã€ä¸€äº›è®¾å¤‡ç®¡ç†å™¨å¸¸å¸¸è®¾è®¡ä¸ºå•ä¾‹æ¨¡å¼ï¼Œæ¯”å¦‚ä¸€ä¸ªç”µè„‘æœ‰ä¸¤å°æ‰“å°æœºï¼Œåœ¨è¾“å‡ºçš„æ—¶å€™å°±è¦å¤„ç†ä¸èƒ½ä¸¤å°æ‰“å°æœºæ‰“å°åŒä¸€ä¸ªæ–‡ä»¶ã€‚</li>
</ul>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>1ã€åœ¨å†…å­˜é‡Œåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å®ä¾‹ï¼ˆæ¯”å¦‚ç®¡ç†å­¦é™¢é¦–é¡µé¡µé¢ç¼“å­˜ï¼‰ã€‚</li>
<li>2ã€é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼ˆæ¯”å¦‚å†™æ–‡ä»¶æ“ä½œï¼‰ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong> æ²¡æœ‰æ¥å£ï¼Œä¸èƒ½ç»§æ‰¿ï¼Œä¸å•ä¸€èŒè´£åŸåˆ™å†²çªï¼Œä¸€ä¸ªç±»åº”è¯¥åªå…³å¿ƒå†…éƒ¨é€»è¾‘ï¼Œè€Œä¸å…³å¿ƒå¤–é¢æ€ä¹ˆæ ·æ¥å®ä¾‹åŒ–ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>1ã€è¦æ±‚ç”Ÿäº§å”¯ä¸€åºåˆ—å·ã€‚</li>
<li>2ã€WEB ä¸­çš„è®¡æ•°å™¨ï¼Œä¸ç”¨æ¯æ¬¡åˆ·æ–°éƒ½åœ¨æ•°æ®åº“é‡ŒåŠ ä¸€æ¬¡ï¼Œç”¨å•ä¾‹å…ˆç¼“å­˜èµ·æ¥ã€‚</li>
<li>3ã€åˆ›å»ºçš„ä¸€ä¸ªå¯¹è±¡éœ€è¦æ¶ˆè€—çš„èµ„æºè¿‡å¤šï¼Œæ¯”å¦‚ I/O ä¸æ•°æ®åº“çš„è¿æ¥ç­‰ã€‚</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> getInstance() æ–¹æ³•ä¸­éœ€è¦ä½¿ç”¨åŒæ­¥é” synchronized (Singleton.class) é˜²æ­¢å¤šçº¿ç¨‹åŒæ—¶è¿›å…¥é€ æˆ<br />
instance è¢«å¤šæ¬¡å®ä¾‹åŒ–ã€‚</p>
<h2 id="å®ç°"><a class="markdownIt-Anchor" href="#å®ç°"></a> å®ç°</h2>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª <em>SingleObject</em> ç±»ã€‚ <em>SingleObject</em> ç±»æœ‰å®ƒçš„ç§æœ‰æ„é€ å‡½æ•°å’Œæœ¬èº«çš„ä¸€ä¸ªé™æ€å®ä¾‹ã€‚</p>
<p><em>SingleObject</em> ç±»æä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œä¾›å¤–ç•Œè·å–å®ƒçš„é™æ€å®ä¾‹ã€‚ <em>SingletonPatternDemo</em> ç±»ä½¿ç”¨<br />
<em>SingleObject</em> ç±»æ¥è·å– <em>SingleObject</em> å¯¹è±¡ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/62576915-36E0-4B67-B078-704699CA980A.jpg" srcset="/img/loading.gif" lazyload alt="å•ä¾‹æ¨¡å¼çš„ UML å›¾" /></p>
<h3 id="æ­¥éª¤-1"><a class="markdownIt-Anchor" href="#æ­¥éª¤-1"></a> æ­¥éª¤ 1</h3>
<p>åˆ›å»ºä¸€ä¸ª Singleton ç±»ã€‚</p>
<p>SingleObject.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingleObject</span> &#123;<br> <br>   <span class="hljs-comment">//åˆ›å»º SingleObject çš„ä¸€ä¸ªå¯¹è±¡</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">SingleObject</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SingleObject</span>();<br> <br>   <span class="hljs-comment">//è®©æ„é€ å‡½æ•°ä¸º privateï¼Œè¿™æ ·è¯¥ç±»å°±ä¸ä¼šè¢«å®ä¾‹åŒ–</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-title function_">SingleObject</span><span class="hljs-params">()</span>&#123;&#125;<br> <br>   <span class="hljs-comment">//è·å–å”¯ä¸€å¯ç”¨çš„å¯¹è±¡</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SingleObject <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span>&#123;<br>      <span class="hljs-keyword">return</span> instance;<br>   &#125;<br> <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showMessage</span><span class="hljs-params">()</span>&#123;<br>      System.out.println(<span class="hljs-string">&quot;Hello World!&quot;</span>);<br>   &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="æ­¥éª¤-2"><a class="markdownIt-Anchor" href="#æ­¥éª¤-2"></a> æ­¥éª¤ 2</h3>
<p>ä» singleton ç±»è·å–å”¯ä¸€çš„å¯¹è±¡ã€‚</p>
<p>SingletonPatternDemo.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonPatternDemo</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br> <br>      <span class="hljs-comment">//ä¸åˆæ³•çš„æ„é€ å‡½æ•°</span><br>      <span class="hljs-comment">//ç¼–è¯‘æ—¶é”™è¯¯ï¼šæ„é€ å‡½æ•° SingleObject() æ˜¯ä¸å¯è§çš„</span><br>      <span class="hljs-comment">//SingleObject object = new SingleObject();</span><br> <br>      <span class="hljs-comment">//è·å–å”¯ä¸€å¯ç”¨çš„å¯¹è±¡</span><br>      <span class="hljs-type">SingleObject</span> <span class="hljs-variable">object</span> <span class="hljs-operator">=</span> SingleObject.getInstance();<br> <br>      <span class="hljs-comment">//æ˜¾ç¤ºæ¶ˆæ¯</span><br>      object.showMessage();<br>   &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="æ­¥éª¤-3"><a class="markdownIt-Anchor" href="#æ­¥éª¤-3"></a> æ­¥éª¤ 3</h3>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
<p>â€‹</p>
<pre><code class="hljs">Hello World!
</code></pre>
<p>â€‹</p>
<h2 id="å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼"><a class="markdownIt-Anchor" href="#å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼"></a> å•ä¾‹æ¨¡å¼çš„å‡ ç§å®ç°æ–¹å¼</h2>
<p>å•ä¾‹æ¨¡å¼çš„å®ç°æœ‰å¤šç§æ–¹å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<h3 id="1-æ‡’æ±‰å¼çº¿ç¨‹ä¸å®‰å…¨"><a class="markdownIt-Anchor" href="#1-æ‡’æ±‰å¼çº¿ç¨‹ä¸å®‰å…¨"></a> 1ã€æ‡’æ±‰å¼ï¼Œçº¿ç¨‹ä¸å®‰å…¨</h3>
<p><strong>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼š</strong> æ˜¯</p>
<p><strong>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼š</strong> å¦</p>
<p><strong>å®ç°éš¾åº¦ï¼š</strong> æ˜“</p>
<p><strong>æè¿°ï¼š</strong> è¿™ç§æ–¹å¼æ˜¯æœ€åŸºæœ¬çš„å®ç°æ–¹å¼ï¼Œè¿™ç§å®ç°æœ€å¤§çš„é—®é¢˜å°±æ˜¯ä¸æ”¯æŒå¤šçº¿ç¨‹ã€‚å› ä¸ºæ²¡æœ‰åŠ é” synchronizedï¼Œæ‰€ä»¥ä¸¥æ ¼æ„ä¹‰ä¸Šå®ƒå¹¶ä¸ç®—å•ä¾‹æ¨¡å¼ã€‚<br />
è¿™ç§æ–¹å¼ lazy loading å¾ˆæ˜æ˜¾ï¼Œä¸è¦æ±‚çº¿ç¨‹å®‰å…¨ï¼Œåœ¨å¤šçº¿ç¨‹ä¸èƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span> <span class="hljs-params">()</span>&#123;&#125;  <br>  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;  <br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;  <br>            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();  <br>        &#125;  <br>        <span class="hljs-keyword">return</span> instance;  <br>    &#125;  <br>&#125;<br><br></code></pre></td></tr></table></figure>
<p><strong>æ¥ä¸‹æ¥ä»‹ç»çš„å‡ ç§å®ç°æ–¹å¼éƒ½æ”¯æŒå¤šçº¿ç¨‹ï¼Œä½†æ˜¯åœ¨æ€§èƒ½ä¸Šæœ‰æ‰€å·®å¼‚ã€‚</strong></p>
<h3 id="2-æ‡’æ±‰å¼çº¿ç¨‹å®‰å…¨"><a class="markdownIt-Anchor" href="#2-æ‡’æ±‰å¼çº¿ç¨‹å®‰å…¨"></a> 2ã€æ‡’æ±‰å¼ï¼Œçº¿ç¨‹å®‰å…¨</h3>
<p><strong>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼š</strong> æ˜¯</p>
<p><strong>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼š</strong> æ˜¯</p>
<p><strong>å®ç°éš¾åº¦ï¼š</strong> æ˜“</p>
<p><strong>æè¿°ï¼š</strong> è¿™ç§æ–¹å¼å…·å¤‡å¾ˆå¥½çš„ lazy loadingï¼Œèƒ½å¤Ÿåœ¨å¤šçº¿ç¨‹ä¸­å¾ˆå¥½çš„å·¥ä½œï¼Œä½†æ˜¯ï¼Œæ•ˆç‡å¾ˆä½ï¼Œ99% æƒ…å†µä¸‹ä¸éœ€è¦åŒæ­¥ã€‚<br />
ä¼˜ç‚¹ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨æ‰åˆå§‹åŒ–ï¼Œé¿å…å†…å­˜æµªè´¹ã€‚<br />
ç¼ºç‚¹ï¼šå¿…é¡»åŠ é” synchronized æ‰èƒ½ä¿è¯å•ä¾‹ï¼Œä½†åŠ é”ä¼šå½±å“æ•ˆç‡ã€‚<br />
getInstance() çš„æ€§èƒ½å¯¹åº”ç”¨ç¨‹åºä¸æ˜¯å¾ˆå…³é”®ï¼ˆè¯¥æ–¹æ³•ä½¿ç”¨ä¸å¤ªé¢‘ç¹ï¼‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span> <span class="hljs-params">()</span>&#123;&#125;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;  <br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;  <br>            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();  <br>        &#125;  <br>        <span class="hljs-keyword">return</span> instance;  <br>    &#125;  <br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="3-é¥¿æ±‰å¼"><a class="markdownIt-Anchor" href="#3-é¥¿æ±‰å¼"></a> 3ã€é¥¿æ±‰å¼</h3>
<p><strong>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼š</strong> å¦</p>
<p><strong>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼š</strong> æ˜¯</p>
<p><strong>å®ç°éš¾åº¦ï¼š</strong> æ˜“</p>
<p><strong>æè¿°ï¼š</strong> è¿™ç§æ–¹å¼æ¯”è¾ƒå¸¸ç”¨ï¼Œä½†å®¹æ˜“äº§ç”Ÿåƒåœ¾å¯¹è±¡ã€‚<br />
ä¼˜ç‚¹ï¼šæ²¡æœ‰åŠ é”ï¼Œæ‰§è¡Œæ•ˆç‡ä¼šæé«˜ã€‚<br />
ç¼ºç‚¹ï¼šç±»åŠ è½½æ—¶å°±åˆå§‹åŒ–ï¼Œæµªè´¹å†…å­˜ã€‚<br />
å®ƒåŸºäº classloader æœºåˆ¶é¿å…äº†å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œä¸è¿‡ï¼Œinstance<br />
åœ¨ç±»è£…è½½æ—¶å°±å®ä¾‹åŒ–ï¼Œè™½ç„¶å¯¼è‡´ç±»è£…è½½çš„åŸå› æœ‰å¾ˆå¤šç§ï¼Œåœ¨å•ä¾‹æ¨¡å¼ä¸­å¤§å¤šæ•°éƒ½æ˜¯è°ƒç”¨ getInstance æ–¹æ³•ï¼Œä½†æ˜¯ä¹Ÿä¸èƒ½ç¡®å®šæœ‰å…¶ä»–çš„æ–¹å¼ï¼ˆæˆ–è€…å…¶ä»–çš„é™æ€æ–¹æ³•ï¼‰å¯¼è‡´ç±»è£…è½½ï¼Œè¿™æ—¶å€™åˆå§‹åŒ– instance æ˜¾ç„¶æ²¡æœ‰è¾¾åˆ° lazy loading çš„æ•ˆæœã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Singleton</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();  <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span> <span class="hljs-params">()</span>&#123;&#125;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;  <br>    <span class="hljs-keyword">return</span> instance;  <br>    &#125;  <br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="4-åŒæ£€é”åŒé‡æ ¡éªŒé”dclå³-double-checked-locking"><a class="markdownIt-Anchor" href="#4-åŒæ£€é”åŒé‡æ ¡éªŒé”dclå³-double-checked-locking"></a> 4ã€åŒæ£€é”/åŒé‡æ ¡éªŒé”ï¼ˆDCLï¼Œå³ double-checked lockingï¼‰</h3>
<p><strong>JDK ç‰ˆæœ¬ï¼š</strong> JDK1.5 èµ·</p>
<p><strong>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼š</strong> æ˜¯</p>
<p><strong>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼š</strong> æ˜¯</p>
<p><strong>å®ç°éš¾åº¦ï¼š</strong> è¾ƒå¤æ‚</p>
<p><strong>æè¿°ï¼š</strong> è¿™ç§æ–¹å¼é‡‡ç”¨åŒé”æœºåˆ¶ï¼Œå®‰å…¨ä¸”åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹èƒ½ä¿æŒé«˜æ€§èƒ½ã€‚<br />
getInstance() çš„æ€§èƒ½å¯¹åº”ç”¨ç¨‹åºå¾ˆå…³é”®ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">static</span> Singleton singleton;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span> <span class="hljs-params">()</span>&#123;&#125;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton <span class="hljs-title function_">getSingleton</span><span class="hljs-params">()</span> &#123;  <br>    <span class="hljs-keyword">if</span> (singleton == <span class="hljs-literal">null</span>) &#123;  <br>        <span class="hljs-keyword">synchronized</span> (Singleton.class) &#123;  <br>            <span class="hljs-keyword">if</span> (singleton == <span class="hljs-literal">null</span>) &#123;  <br>                singleton = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();  <br>            &#125;  <br>        &#125;  <br>    &#125;  <br>    <span class="hljs-keyword">return</span> singleton;  <br>    &#125;  <br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="5-ç™»è®°å¼é™æ€å†…éƒ¨ç±»"><a class="markdownIt-Anchor" href="#5-ç™»è®°å¼é™æ€å†…éƒ¨ç±»"></a> 5ã€ç™»è®°å¼/é™æ€å†…éƒ¨ç±»</h3>
<p><strong>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼š</strong> æ˜¯</p>
<p><strong>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼š</strong> æ˜¯</p>
<p><strong>å®ç°éš¾åº¦ï¼š</strong> ä¸€èˆ¬</p>
<p><strong>æè¿°ï¼š</strong><br />
è¿™ç§æ–¹å¼èƒ½è¾¾åˆ°åŒæ£€é”æ–¹å¼ä¸€æ ·çš„åŠŸæ•ˆï¼Œä½†å®ç°æ›´ç®€å•ã€‚å¯¹é™æ€åŸŸä½¿ç”¨å»¶è¿Ÿåˆå§‹åŒ–ï¼Œåº”ä½¿ç”¨è¿™ç§æ–¹å¼è€Œä¸æ˜¯åŒæ£€é”æ–¹å¼ã€‚è¿™ç§æ–¹å¼åªé€‚ç”¨äºé™æ€åŸŸçš„æƒ…å†µï¼ŒåŒæ£€é”æ–¹å¼å¯åœ¨å®ä¾‹åŸŸéœ€è¦å»¶è¿Ÿåˆå§‹åŒ–æ—¶ä½¿ç”¨ã€‚<br />
è¿™ç§æ–¹å¼åŒæ ·åˆ©ç”¨äº† classloader æœºåˆ¶æ¥ä¿è¯åˆå§‹åŒ– instance æ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒè·Ÿç¬¬ 3 ç§æ–¹å¼ä¸åŒçš„æ˜¯ï¼šç¬¬ 3 ç§æ–¹å¼åªè¦Singleton ç±»è¢«è£…è½½äº†ï¼Œé‚£ä¹ˆ instance å°±ä¼šè¢«å®ä¾‹åŒ–ï¼ˆæ²¡æœ‰è¾¾åˆ° lazy loading æ•ˆæœï¼‰ï¼Œè€Œè¿™ç§æ–¹å¼æ˜¯ Singletonç±»è¢«è£…è½½äº†ï¼Œinstance ä¸ä¸€å®šè¢«åˆå§‹åŒ–ã€‚å› ä¸º SingletonHolder ç±»æ²¡æœ‰è¢«ä¸»åŠ¨ä½¿ç”¨ï¼Œåªæœ‰é€šè¿‡æ˜¾å¼è°ƒç”¨ getInstanceæ–¹æ³•æ—¶ï¼Œæ‰ä¼šæ˜¾å¼è£…è½½ SingletonHolder ç±»ï¼Œä»è€Œå®ä¾‹åŒ– instanceã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœå®ä¾‹åŒ– instanceå¾ˆæ¶ˆè€—èµ„æºï¼Œæ‰€ä»¥æƒ³è®©å®ƒå»¶è¿ŸåŠ è½½ï¼Œå¦å¤–ä¸€æ–¹é¢ï¼Œåˆä¸å¸Œæœ›åœ¨ Singleton ç±»åŠ è½½æ—¶å°±å®ä¾‹åŒ–ï¼Œå› ä¸ºä¸èƒ½ç¡®ä¿ Singletonç±»è¿˜å¯èƒ½åœ¨å…¶ä»–çš„åœ°æ–¹è¢«ä¸»åŠ¨ä½¿ç”¨ä»è€Œè¢«åŠ è½½ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å®ä¾‹åŒ– instance æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œè¿™ç§æ–¹å¼ç›¸æ¯”ç¬¬ 3 ç§æ–¹å¼å°±æ˜¾å¾—å¾ˆåˆç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SingletonHolder</span> &#123;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Singleton</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();  <br>    &#125;  <br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span> <span class="hljs-params">()</span>&#123;&#125;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;  <br>        <span class="hljs-keyword">return</span> SingletonHolder.INSTANCE;  <br>    &#125;  <br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="6-æšä¸¾"><a class="markdownIt-Anchor" href="#6-æšä¸¾"></a> 6ã€æšä¸¾</h3>
<p><strong>JDK ç‰ˆæœ¬ï¼š</strong> JDK1.5 èµ·</p>
<p><strong>æ˜¯å¦ Lazy åˆå§‹åŒ–ï¼š</strong> å¦</p>
<p><strong>æ˜¯å¦å¤šçº¿ç¨‹å®‰å…¨ï¼š</strong> æ˜¯</p>
<p><strong>å®ç°éš¾åº¦ï¼š</strong> æ˜“</p>
<p><strong>æè¿°ï¼š</strong> è¿™ç§å®ç°æ–¹å¼è¿˜æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œä½†è¿™æ˜¯å®ç°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ã€‚å®ƒæ›´ç®€æ´ï¼Œè‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚<br />
è¿™ç§æ–¹å¼æ˜¯ Effective Java ä½œè€… Josh Blochæå€¡çš„æ–¹å¼ï¼Œå®ƒä¸ä»…èƒ½é¿å…å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œè€Œä¸”è¿˜è‡ªåŠ¨æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œé˜²æ­¢ååºåˆ—åŒ–é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ï¼Œç»å¯¹é˜²æ­¢å¤šæ¬¡å®ä¾‹åŒ–ã€‚ä¸è¿‡ï¼Œç”±äº JDK1.5 ä¹‹åæ‰åŠ å…¥enum ç‰¹æ€§ï¼Œç”¨è¿™ç§æ–¹å¼å†™ä¸å…è®©äººæ„Ÿè§‰ç”Ÿç–ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œä¹Ÿå¾ˆå°‘ç”¨ã€‚<br />
ä¸èƒ½é€šè¿‡ reflection attack æ¥è°ƒç”¨ç§æœ‰æ„é€ æ–¹æ³•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Singleton</span> &#123;  <br>    INSTANCE;  <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">whateverMethod</span><span class="hljs-params">()</span> &#123;  <br>    &#125;  <br>&#125;<br><br></code></pre></td></tr></table></figure>
<p><strong>ç»éªŒä¹‹è°ˆï¼š</strong> ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸å»ºè®®ä½¿ç”¨ç¬¬ 1 ç§å’Œç¬¬ 2 ç§æ‡’æ±‰æ–¹å¼ï¼Œå»ºè®®ä½¿ç”¨ç¬¬ 3 ç§é¥¿æ±‰æ–¹å¼ã€‚åªæœ‰åœ¨è¦æ˜ç¡®å®ç° lazy loadingæ•ˆæœæ—¶ï¼Œæ‰ä¼šä½¿ç”¨ç¬¬ 5 ç§ç™»è®°æ–¹å¼ã€‚å¦‚æœæ¶‰åŠåˆ°ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡æ—¶ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ç¬¬ 6 ç§æšä¸¾æ–¹å¼ã€‚å¦‚æœæœ‰å…¶ä»–ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç¬¬ 4 ç§åŒæ£€é”æ–¹å¼ã€‚</p>
<h1 id="å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#å·¥å‚æ¨¡å¼"></a> ğŸŒ•å·¥å‚æ¨¡å¼</h1>
<p>å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰æ˜¯ Java ä¸­æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>åœ¨å·¥å‚æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚</p>
<h2 id="ä»‹ç»-2"><a class="markdownIt-Anchor" href="#ä»‹ç»-2"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å…¶å­ç±»è‡ªå·±å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªå·¥å‚ç±»ï¼Œå·¥å‚æ¨¡å¼ä½¿å…¶åˆ›å»ºè¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸»è¦è§£å†³æ¥å£é€‰æ‹©çš„é—®é¢˜ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> æˆ‘ä»¬æ˜ç¡®åœ°è®¡åˆ’ä¸åŒæ¡ä»¶ä¸‹åˆ›å»ºä¸åŒå®ä¾‹æ—¶ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> è®©å…¶å­ç±»å®ç°å·¥å‚æ¥å£ï¼Œè¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡çš„äº§å“ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> åˆ›å»ºè¿‡ç¨‹åœ¨å…¶å­ç±»æ‰§è¡Œã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€æ‚¨éœ€è¦ä¸€è¾†æ±½è½¦ï¼Œå¯ä»¥ç›´æ¥ä»å·¥å‚é‡Œé¢æè´§ï¼Œè€Œä¸ç”¨å»ç®¡è¿™è¾†æ±½è½¦æ˜¯æ€ä¹ˆåšå‡ºæ¥çš„ï¼Œä»¥åŠè¿™ä¸ªæ±½è½¦é‡Œé¢çš„å…·ä½“å®ç°ã€‚ 2ã€Hibernateæ¢æ•°æ®åº“åªéœ€æ¢æ–¹è¨€å’Œé©±åŠ¨å°±å¯ä»¥ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ä¸€ä¸ªè°ƒç”¨è€…æƒ³åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦çŸ¥é“å…¶åç§°å°±å¯ä»¥äº†ã€‚ 2ã€æ‰©å±•æ€§é«˜ï¼Œå¦‚æœæƒ³å¢åŠ ä¸€ä¸ªäº§å“ï¼Œåªè¦æ‰©å±•ä¸€ä¸ªå·¥å‚ç±»å°±å¯ä»¥ã€‚<br />
3ã€å±è”½äº§å“çš„å…·ä½“å®ç°ï¼Œè°ƒç”¨è€…åªå…³å¿ƒäº§å“çš„æ¥å£ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong><br />
æ¯æ¬¡å¢åŠ ä¸€ä¸ªäº§å“æ—¶ï¼Œéƒ½éœ€è¦å¢åŠ ä¸€ä¸ªå…·ä½“ç±»å’Œå¯¹è±¡å®ç°å·¥å‚ï¼Œä½¿å¾—ç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°æˆå€å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼ŒåŒæ—¶ä¹Ÿå¢åŠ äº†ç³»ç»Ÿå…·ä½“ç±»çš„ä¾èµ–ã€‚è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¥½äº‹ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<p>1ã€æ—¥å¿—è®°å½•å™¨ï¼šè®°å½•å¯èƒ½è®°å½•åˆ°æœ¬åœ°ç¡¬ç›˜ã€ç³»ç»Ÿäº‹ä»¶ã€è¿œç¨‹æœåŠ¡å™¨ç­‰ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©è®°å½•æ—¥å¿—åˆ°ä»€ä¹ˆåœ°æ–¹ã€‚<br />
2ã€æ•°æ®åº“è®¿é—®ï¼Œå½“ç”¨æˆ·ä¸çŸ¥é“æœ€åç³»ç»Ÿé‡‡ç”¨å“ªä¸€ç±»æ•°æ®åº“ï¼Œä»¥åŠæ•°æ®åº“å¯èƒ½æœ‰å˜åŒ–æ—¶ã€‚<br />
3ã€è®¾è®¡ä¸€ä¸ªè¿æ¥æœåŠ¡å™¨çš„æ¡†æ¶ï¼Œéœ€è¦ä¸‰ä¸ªåè®®ï¼Œâ€œPOP3â€ã€â€œIMAPâ€ã€â€œHTTPâ€ï¼Œå¯ä»¥æŠŠè¿™ä¸‰ä¸ªä½œä¸ºäº§å“ç±»ï¼Œå…±åŒå®ç°ä¸€ä¸ªæ¥å£ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong><br />
ä½œä¸ºä¸€ç§åˆ›å»ºç±»æ¨¡å¼ï¼Œåœ¨ä»»ä½•éœ€è¦ç”Ÿæˆå¤æ‚å¯¹è±¡çš„åœ°æ–¹ï¼Œéƒ½å¯ä»¥ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„åœ°æ–¹å°±æ˜¯å¤æ‚å¯¹è±¡é€‚åˆä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œè€Œç®€å•å¯¹è±¡ï¼Œç‰¹åˆ«æ˜¯åªéœ€è¦é€šè¿‡new å°±å¯ä»¥å®Œæˆåˆ›å»ºçš„å¯¹è±¡ï¼Œæ— éœ€ä½¿ç”¨å·¥å‚æ¨¡å¼ã€‚å¦‚æœä½¿ç”¨å·¥å‚æ¨¡å¼ï¼Œå°±éœ€è¦å¼•å…¥ä¸€ä¸ªå·¥å‚ç±»ï¼Œä¼šå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚</p>
<h2 id="å®ç°å››ç§æ–¹å¼"><a class="markdownIt-Anchor" href="#å®ç°å››ç§æ–¹å¼"></a> å®ç°å››ç§æ–¹å¼</h2>
<p>â€‹    çœ‹ä¸€ä¸ªæŠ«è¨çš„é¡¹ç›®ï¼šè¦ä¾¿äºæŠ«è¨ç§ç±»çš„æ‰©å±•ï¼Œè¦ä¾¿äºç»´æŠ¤</p>
<ol>
<li>æŠ«è¨çš„ç§ç±»å¾ˆå¤š(æ¯”å¦‚ GreekPizzã€CheesePizz ç­‰)</li>
<li>æŠ«è¨çš„åˆ¶ä½œæœ‰ prepareï¼Œbake, cut, box</li>
<li>å®ŒæˆæŠ«è¨åº—è®¢è´­åŠŸèƒ½ã€‚</li>
</ol>
<h3 id="ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼æ¥å®Œæˆ"><a class="markdownIt-Anchor" href="#ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼æ¥å®Œæˆ"></a> ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹å¼æ¥å®Œæˆ</h3>
<ol>
<li>æ€è·¯åˆ†æ(ç±»å›¾)</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224163121334.png" srcset="/img/loading.gif" lazyload alt="image-20221224163121334" /></p>
<p>ç¼–å†™ OrderPizza.java å»è®¢è´­éœ€è¦çš„å„ç§ Pizza</p>
<p>ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br>    <span class="hljs-comment">//	 æ„é€ å™¨</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		String orderType; <span class="hljs-comment">// è®¢è´­æŠ«è¨çš„ç±»å‹</span><br>		<span class="hljs-keyword">do</span> &#123;<br>			orderType = getType();<br>			<span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;greek&quot;</span>)) &#123;<br>				pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GreekPizza</span>();<br>				pizza.setName(<span class="hljs-string">&quot; å¸Œè…ŠæŠ«è¨ &quot;</span>);<br>			&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>				pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CheesePizza</span>();<br>				pizza.setName(<span class="hljs-string">&quot; å¥¶é…ªæŠ«è¨ &quot;</span>);<br>			&#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>				pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PepperPizza</span>();<br>				pizza.setName(<span class="hljs-string">&quot;èƒ¡æ¤’æŠ«è¨&quot;</span>);<br>			&#125; <span class="hljs-keyword">else</span> &#123;<br>				<span class="hljs-keyword">break</span>;<br>			&#125;<br>			<span class="hljs-comment">//è¾“å‡ºpizza åˆ¶ä½œè¿‡ç¨‹</span><br>			pizza.prepare();<br>			pizza.bake();<br>			pizza.cut();<br>			pizza.box();<br><br>		&#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);<br>	&#125;<br>    <span class="hljs-comment">// å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–å®¢æˆ·å¸Œæœ›è®¢è´­çš„æŠ«è¨ç§ç±»</span><br>	<span class="hljs-keyword">private</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>			System.out.println(<span class="hljs-string">&quot;input pizza ç§ç±»:&quot;</span>);<br>			<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> strin.readLine();<br>			<span class="hljs-keyword">return</span> str;<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>			<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>		&#125;<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<ol>
<li>
<p>ä¼˜ç‚¹æ˜¯æ¯”è¾ƒå¥½ç†è§£ï¼Œç®€å•æ˜“æ“ä½œã€‚</p>
</li>
<li>
<p>ç¼ºç‚¹æ˜¯è¿åäº†è®¾è®¡æ¨¡å¼çš„ <strong>ocp åŸåˆ™</strong>ï¼Œå³å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚å³å½“æˆ‘ä»¬ç»™ç±»å¢åŠ æ–°åŠŸèƒ½çš„æ—¶å€™ï¼Œå°½é‡ä¸ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å°½å¯èƒ½å°‘ä¿®æ”¹ä»£ç .</p>
</li>
<li>
<p>æ¯”å¦‚æˆ‘ä»¬è¿™æ—¶<strong>è¦æ–°å¢åŠ ä¸€ä¸ª Pizza çš„ç§ç±»(Pepper æŠ«è¨)</strong>ï¼Œæˆ‘ä»¬éœ€è¦åšå¦‚ä¸‹ä¿®æ”¹.</p>
</li>
</ol>
<p>å¦‚æœæˆ‘ä»¬å¢åŠ ä¸€ä¸ª Pizza ç±»ï¼Œåªè¦æ˜¯è®¢è´­ Pizza çš„ä»£ç éƒ½éœ€è¦ä¿®æ”¹.</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224163539743.png" srcset="/img/loading.gif" lazyload alt="image-20221224163539743" /></p>
<ol start="4">
<li>æ”¹è¿›çš„æ€è·¯åˆ†æ</li>
</ol>
<p>åˆ†æï¼šä¿®æ”¹ä»£ç å¯ä»¥æ¥å—ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬åœ¨å…¶å®ƒçš„åœ°æ–¹ä¹Ÿæœ‰åˆ›å»º Pizza çš„ä»£ç ï¼Œå°±æ„å‘³ç€ï¼Œä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œè€Œåˆ›å»º Pizzaçš„ä»£ç ï¼Œå¾€å¾€æœ‰å¤šå¤„ã€‚</p>
<p>æ€è·¯ï¼š<strong>æŠŠåˆ›å»º Pizza å¯¹è±¡å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬æœ‰æ–°çš„ Pizza ç§ç±»æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹è¯¥ç±»å°±å¯</strong>ï¼Œå…¶å®ƒæœ‰åˆ›å»ºåˆ° Pizzaå¯¹è±¡çš„ä»£ç å°±ä¸éœ€è¦ä¿®æ”¹äº†.-&gt; <strong>ç®€å•å·¥å‚</strong>æ¨¡å¼</p>
<h3 id="ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼"></a> ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224163606286.png" srcset="/img/loading.gif" lazyload alt="image-20221224163606286" /></p>
<p><strong>ä»£ç </strong></p>
<p><code>SimpleFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">package</span> io.xtwoy.factory.simplefactory.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.CheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.GreekPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.PepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.Pizza;<br><br><span class="hljs-comment">//ç®€å•å·¥å‚ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleFactory</span> &#123;<br><br>   <span class="hljs-comment">//æ›´åŠ orderType è¿”å›å¯¹åº”çš„Pizza å¯¹è±¡</span><br>   <span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br><br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>      System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼&quot;</span>);<br>      <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;greek&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GreekPizza</span>();<br>         pizza.setName(<span class="hljs-string">&quot; å¸Œè…ŠæŠ«è¨ &quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CheesePizza</span>();<br>         pizza.setName(<span class="hljs-string">&quot; å¥¶é…ªæŠ«è¨ &quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PepperPizza</span>();<br>         pizza.setName(<span class="hljs-string">&quot;èƒ¡æ¤’æŠ«è¨&quot;</span>);<br>      &#125;<br>      <br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br>   <br>   <span class="hljs-comment">//ç®€å•å·¥å‚æ¨¡å¼ ä¹Ÿå« é™æ€å·¥å‚æ¨¡å¼ </span><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Pizza <span class="hljs-title function_">createPizza2</span><span class="hljs-params">(String orderType)</span> &#123;<br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>      System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼2&quot;</span>);<br>      <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;greek&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GreekPizza</span>();<br>         pizza.setName(<span class="hljs-string">&quot; å¸Œè…ŠæŠ«è¨ &quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CheesePizza</span>();<br>         pizza.setName(<span class="hljs-string">&quot; å¥¶é…ªæŠ«è¨ &quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PepperPizza</span>();<br>         pizza.setName(<span class="hljs-string">&quot;èƒ¡æ¤’æŠ«è¨&quot;</span>);<br>      &#125;<br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>OrderPizza</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.simplefactory.pizzastore.order;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.CheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.GreekPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.PepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.Pizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br><span class="hljs-comment">////    æ„é€ å™¨</span><br><span class="hljs-comment">// public OrderPizza() &#123;</span><br><span class="hljs-comment">//    Pizza pizza = null;</span><br><span class="hljs-comment">//    String orderType; // è®¢è´­æŠ«è¨çš„ç±»å‹</span><br><span class="hljs-comment">//    do &#123;</span><br><span class="hljs-comment">//       orderType = getType();</span><br><span class="hljs-comment">//       if (orderType.equals(&quot;greek&quot;)) &#123;</span><br><span class="hljs-comment">//          pizza = new GreekPizza();</span><br><span class="hljs-comment">//          pizza.setName(&quot; å¸Œè…ŠæŠ«è¨ &quot;);</span><br><span class="hljs-comment">//       &#125; else if (orderType.equals(&quot;cheese&quot;)) &#123;</span><br><span class="hljs-comment">//          pizza = new CheesePizza();</span><br><span class="hljs-comment">//          pizza.setName(&quot; å¥¶é…ªæŠ«è¨ &quot;);</span><br><span class="hljs-comment">//       &#125; else if (orderType.equals(&quot;pepper&quot;)) &#123;</span><br><span class="hljs-comment">//          pizza = new PepperPizza();</span><br><span class="hljs-comment">//          pizza.setName(&quot;èƒ¡æ¤’æŠ«è¨&quot;);</span><br><span class="hljs-comment">//       &#125; else &#123;</span><br><span class="hljs-comment">//          break;</span><br><span class="hljs-comment">//       &#125;</span><br><span class="hljs-comment">//       //è¾“å‡ºpizza åˆ¶ä½œè¿‡ç¨‹</span><br><span class="hljs-comment">//       pizza.prepare();</span><br><span class="hljs-comment">//       pizza.bake();</span><br><span class="hljs-comment">//       pizza.cut();</span><br><span class="hljs-comment">//       pizza.box();</span><br><span class="hljs-comment">//</span><br><span class="hljs-comment">//    &#125; while (true);</span><br><span class="hljs-comment">// &#125;</span><br><br>   <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªç®€å•å·¥å‚å¯¹è±¡</span><br>   SimpleFactory simpleFactory;<br>   <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>   <br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza</span><span class="hljs-params">(SimpleFactory simpleFactory)</span> &#123;<br>      setFactory(simpleFactory);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFactory</span><span class="hljs-params">(SimpleFactory simpleFactory)</span> &#123;<br>      <span class="hljs-type">String</span> <span class="hljs-variable">orderType</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">//ç”¨æˆ·è¾“å…¥çš„</span><br>      <br>      <span class="hljs-built_in">this</span>.simpleFactory = simpleFactory; <span class="hljs-comment">//è®¾ç½®ç®€å•å·¥å‚å¯¹è±¡</span><br>      <br>      <span class="hljs-keyword">do</span> &#123;<br>         orderType = getType(); <br>         pizza = <span class="hljs-built_in">this</span>.simpleFactory.createPizza(orderType);<br>         <br>         <span class="hljs-comment">//è¾“å‡ºpizza</span><br>         <span class="hljs-keyword">if</span>(pizza != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">//è®¢è´­æˆåŠŸ</span><br>            pizza.prepare();<br>            pizza.bake();<br>            pizza.cut();<br>            pizza.box();<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot; è®¢è´­æŠ«è¨å¤±è´¥ &quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>         &#125;<br>      &#125;<span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">// å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–å®¢æˆ·å¸Œæœ›è®¢è´­çš„æŠ«è¨ç§ç±»</span><br>   <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>         <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>         System.out.println(<span class="hljs-string">&quot;input pizza ç§ç±»:&quot;</span>);<br>         <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> strin.readLine();<br>         <span class="hljs-keyword">return</span> str;<br>      &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>         e.printStackTrace();<br>         <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>      &#125;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>OrderPizza2</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.simplefactory.pizzastore.order;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.simplefactory.pizzastore.pizza.Pizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza2</span> &#123;<br><br>	<span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>	<span class="hljs-type">String</span> <span class="hljs-variable">orderType</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>;<br>	<span class="hljs-comment">// æ„é€ å™¨</span><br>	<span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza2</span><span class="hljs-params">()</span> &#123;<br>		<br>		<span class="hljs-keyword">do</span> &#123;<br>			orderType = getType();<br>			pizza = SimpleFactory.createPizza2(orderType);<br><br>			<span class="hljs-comment">// è¾“å‡ºpizza</span><br>			<span class="hljs-keyword">if</span> (pizza != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// è®¢è´­æˆåŠŸ</span><br>				pizza.prepare();<br>				pizza.bake();<br>				pizza.cut();<br>				pizza.box();<br>			&#125; <span class="hljs-keyword">else</span> &#123;<br>				System.out.println(<span class="hljs-string">&quot; è®¢è´­æŠ«è¨å¤±è´¥ &quot;</span>);<br>				<span class="hljs-keyword">break</span>;<br>			&#125;<br>		&#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);<br>	&#125;<br><br>	<span class="hljs-comment">// å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–å®¢æˆ·å¸Œæœ›è®¢è´­çš„æŠ«è¨ç§ç±»</span><br>	<span class="hljs-keyword">private</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> &#123;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>			System.out.println(<span class="hljs-string">&quot;input pizza ç§ç±»:&quot;</span>);<br>			<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> strin.readLine();<br>			<span class="hljs-keyword">return</span> str;<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>			<span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>		&#125;<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<p><code>PizzaStore</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.simplefactory.pizzastore.order;<br><br><span class="hljs-comment">//ç›¸å½“äºä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå‘å‡ºè®¢è´­</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PizzaStore</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//new OrderPizza();</span><br>      <br>      <span class="hljs-comment">//ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼</span><br>      <span class="hljs-comment">//new OrderPizza(new SimpleFactory());</span><br>      <span class="hljs-comment">//System.out.println(&quot;~~é€€å‡ºç¨‹åº~~&quot;);</span><br>      <br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderPizza2</span>();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ‰§è¡Œæ•ˆæœ</p>
<p>input pizza ç§ç±»:<br />
greek<br />
ä½¿ç”¨ç®€å•å·¥å‚æ¨¡å¼2<br />
ç»™å¸Œè…ŠæŠ«è¨ å‡†å¤‡åŸææ–™<br />
å¸Œè…ŠæŠ«è¨  baking;<br />
å¸Œè…ŠæŠ«è¨  cutting;<br />
å¸Œè…ŠæŠ«è¨  boxing;<br />
input pizza ç§ç±»:</p>
<h3 id="å·¥å‚æ–¹æ³•æ¨¡å¼"><a class="markdownIt-Anchor" href="#å·¥å‚æ–¹æ³•æ¨¡å¼"></a> <mark>å·¥å‚æ–¹æ³•æ¨¡å¼</mark></h3>
<p>çœ‹ä¸€ä¸ªæ–°çš„éœ€æ±‚</p>
<p>æŠ«è¨é¡¹ç›®æ–°çš„éœ€æ±‚ï¼šå®¢æˆ·åœ¨ç‚¹æŠ«è¨æ—¶ï¼Œå¯ä»¥ç‚¹<strong>ä¸åŒå£å‘³çš„æŠ«è¨</strong>ï¼Œæ¯”å¦‚ åŒ—äº¬çš„å¥¶é…ª pizzaã€åŒ—äº¬çš„èƒ¡æ¤’ pizza æˆ–è€…æ˜¯ä¼¦æ•¦çš„å¥¶é…ª pizzaã€ä¼¦æ•¦çš„èƒ¡æ¤’ pizzaã€‚</p>
<ol>
<li>
<p>æ€è·¯ 1</p>
<p>ä½¿ç”¨<strong>ç®€å•å·¥å‚æ¨¡å¼</strong>ï¼Œåˆ›å»º<strong>ä¸åŒçš„ç®€å•å·¥å‚ç±»</strong>ï¼Œæ¯”å¦‚ BJPizzaSimpleFactoryã€LDPizzaSimpleFactory ç­‰ç­‰.ä»å½“å‰è¿™ä¸ªæ¡ˆä¾‹æ¥è¯´ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯è€ƒè™‘åˆ°é¡¹ç›®çš„è§„æ¨¡ï¼Œä»¥åŠè½¯ä»¶çš„å¯ç»´æŠ¤æ€§ã€å¯æ‰©å±•æ€§å¹¶ä¸æ˜¯ç‰¹åˆ«å¥½</p>
</li>
<li>
<p>æ€è·¯ 2</p>
<p>ä½¿ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼</p>
</li>
</ol>
<blockquote>
<p>å·¥å‚æ–¹æ³•æ¨¡å¼ä»‹ç»</p>
</blockquote>
<ol>
<li>
<p>å·¥å‚æ–¹æ³•æ¨¡å¼è®¾è®¡æ–¹æ¡ˆï¼šå°†æŠ«è¨é¡¹ç›®çš„å®ä¾‹åŒ–åŠŸèƒ½æŠ½è±¡æˆæŠ½è±¡æ–¹æ³•ï¼Œåœ¨ä¸åŒçš„å£å‘³ç‚¹é¤å­ç±»ä¸­å…·ä½“å®ç°ã€‚</p>
</li>
<li>
<p>å·¥å‚æ–¹æ³•æ¨¡å¼ï¼š<strong>å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡æ–¹æ³•</strong>ï¼Œç”±å­<strong>ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»</strong>ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼å°†<strong>å¯¹è±¡çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»</strong>ã€‚</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224165136437.png" srcset="/img/loading.gif" lazyload alt="image-20221224165136437" /></p>
<p><strong>ä»£ç </strong></p>
<p><code>OrderPizza</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.factorymethod.pizzastore.order;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.Pizza;<br><br><br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br>   <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼ŒcreatePizza , è®©å„ä¸ªå·¥å‚å­ç±»è‡ªå·±å®ç°</span><br>   <span class="hljs-keyword">abstract</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span>;<br>   <br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      String orderType; <span class="hljs-comment">// è®¢è´­æŠ«è¨çš„ç±»å‹</span><br>      <span class="hljs-keyword">do</span> &#123;<br>         orderType = getType();<br>         pizza = createPizza(orderType); <span class="hljs-comment">//æŠ½è±¡æ–¹æ³•ï¼Œç”±å·¥å‚å­ç±»å®Œæˆ</span><br>         <span class="hljs-comment">//è¾“å‡ºpizza åˆ¶ä½œè¿‡ç¨‹</span><br>         pizza.prepare();<br>         pizza.bake();<br>         pizza.cut();<br>         pizza.box();<br>         <br>      &#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);<br>   &#125;<br><br>   <br><br>   <span class="hljs-comment">// å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–å®¢æˆ·å¸Œæœ›è®¢è´­çš„æŠ«è¨ç§ç±»</span><br>   <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>         <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>         System.out.println(<span class="hljs-string">&quot;input pizza ç§ç±»:&quot;</span>);<br>         <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> strin.readLine();<br>         <span class="hljs-keyword">return</span> str;<br>      &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>         e.printStackTrace();<br>         <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>      &#125;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>LDOrderPizza</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.factorymethod.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.LDCheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.LDPepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.Pizza;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LDOrderPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br>   <br>   <span class="hljs-meta">@Override</span><br>   Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br>   <br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LDCheesePizza</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LDPepperPizza</span>();<br>      &#125;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>BJOrderPizza</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.factorymethod.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.BJCheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.BJPepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.Pizza;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJOrderPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br>   <br>   <span class="hljs-meta">@Override</span><br>    Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br>   <br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>      &#125;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PizzaStore</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.factorymethod.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.BJCheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.BJPepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.Pizza;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJOrderPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br>   <br>   <span class="hljs-meta">@Override</span><br>    Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br>   <br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>      &#125;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ‰§è¡Œæ•ˆæœ</p>
<p>input pizza ç§ç±»:<br />
pepper<br />
åŒ—äº¬çš„èƒ¡æ¤’pizza å‡†å¤‡åŸææ–™<br />
åŒ—äº¬çš„èƒ¡æ¤’pizza baking;<br />
åŒ—äº¬çš„èƒ¡æ¤’pizza cutting;<br />
åŒ—äº¬çš„èƒ¡æ¤’pizza boxing;<br />
input pizza ç§ç±»:</p>
<h3 id="æŠ½è±¡å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#æŠ½è±¡å·¥å‚æ¨¡å¼"></a> <mark>æŠ½è±¡å·¥å‚æ¨¡å¼</mark></h3>
<ol>
<li>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼ï¼šå®šä¹‰äº†ä¸€ä¸ª <strong>interface ç”¨äºåˆ›å»ºç›¸å…³æˆ–æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡ç°‡</strong>ï¼Œè€Œæ— éœ€æŒ‡æ˜å…·ä½“çš„ç±»</p>
</li>
<li>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼å¯ä»¥å°†ç®€å•å·¥å‚æ¨¡å¼å’Œå·¥å‚æ–¹æ³•æ¨¡å¼è¿›è¡Œæ•´åˆã€‚</p>
</li>
<li>
<p>ä»è®¾è®¡å±‚é¢çœ‹ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼å°±æ˜¯å¯¹ç®€å•å·¥å‚æ¨¡å¼çš„æ”¹è¿›(æˆ–è€…ç§°ä¸ºè¿›ä¸€æ­¥çš„æŠ½è±¡)ã€‚</p>
</li>
<li>
<p>å°†å·¥å‚æŠ½è±¡æˆ<strong>ä¸¤å±‚</strong>ï¼Œ<strong>AbsFactory(æŠ½è±¡å·¥å‚)</strong> å’Œ <strong>å…·ä½“å®ç°çš„å·¥å‚å­ç±»</strong>ã€‚ç¨‹åºå‘˜å¯ä»¥æ ¹æ®åˆ›å»ºå¯¹è±¡ç±»å‹ä½¿ç”¨å¯¹åº”çš„å·¥å‚å­ç±»ã€‚è¿™æ ·å°†å•ä¸ªçš„ç®€å•å·¥å‚ç±»å˜æˆäº†å·¥å‚ç°‡ï¼Œæ›´åˆ©äºä»£ç çš„ç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
</li>
<li>
<p>ç±»å›¾</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224171144291.png" srcset="/img/loading.gif" lazyload alt="image-20221224171144291" /></p>
<p><strong>ä»£ç </strong></p>
<p><code>AbsFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.factorymethod.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.BJCheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.BJPepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.factorymethod.pizzastore.pizza.Pizza;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJOrderPizza</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br>   <br>   <span class="hljs-meta">@Override</span><br>    Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br>   <br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>      &#125;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>BJFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.absfactory.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.BJCheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.BJPepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.Pizza;<br><br><span class="hljs-comment">//è¿™æ˜¯å·¥å‚å­ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AbsFactory</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;~ä½¿ç”¨çš„æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼~&quot;</span>);<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>))&#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>      &#125;<br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>LDFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.absfactory.pizzastore.order;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.BJCheesePizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.BJPepperPizza;<br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.Pizza;<br><br><span class="hljs-comment">//è¿™æ˜¯å·¥å‚å­ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BJFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AbsFactory</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> Pizza <span class="hljs-title function_">createPizza</span><span class="hljs-params">(String orderType)</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;~ä½¿ç”¨çš„æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼~&quot;</span>);<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-keyword">if</span>(orderType.equals(<span class="hljs-string">&quot;cheese&quot;</span>)) &#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJCheesePizza</span>();<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (orderType.equals(<span class="hljs-string">&quot;pepper&quot;</span>))&#123;<br>         pizza = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BJPepperPizza</span>();<br>      &#125;<br>      <span class="hljs-keyword">return</span> pizza;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>OrderPizza</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.absfactory.pizzastore.order;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><br><span class="hljs-keyword">import</span> io.xtwoy.factory.absfactory.pizzastore.pizza.Pizza;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderPizza</span> &#123;<br><br>   AbsFactory factory;<br><br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderPizza</span><span class="hljs-params">(AbsFactory factory)</span> &#123;<br>      setFactory(factory);<br>   &#125;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFactory</span><span class="hljs-params">(AbsFactory factory)</span> &#123;<br>      <span class="hljs-type">Pizza</span> <span class="hljs-variable">pizza</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">String</span> <span class="hljs-variable">orderType</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// ç”¨æˆ·è¾“å…¥</span><br>      <span class="hljs-built_in">this</span>.factory = factory;<br>      <span class="hljs-keyword">do</span> &#123;<br>         orderType = getType();<br>         <span class="hljs-comment">// factory å¯èƒ½æ˜¯åŒ—äº¬çš„å·¥å‚å­ç±»ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¼¦æ•¦çš„å·¥å‚å­ç±»</span><br>         pizza = factory.createPizza(orderType);<br>         <span class="hljs-keyword">if</span> (pizza != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// è®¢è´­ok</span><br>            pizza.prepare();<br>            pizza.bake();<br>            pizza.cut();<br>            pizza.box();<br>         &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;è®¢è´­å¤±è´¥&quot;</span>);<br>            <span class="hljs-keyword">break</span>;<br>         &#125;<br>      &#125; <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>);<br>   &#125;<br><br>   <span class="hljs-comment">// å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è·å–å®¢æˆ·å¸Œæœ›è®¢è´­çš„æŠ«è¨ç§ç±»</span><br>   <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">try</span> &#123;<br>         <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">strin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in));<br>         System.out.println(<span class="hljs-string">&quot;input pizza ç§ç±»:&quot;</span>);<br>         <span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> strin.readLine();<br>         <span class="hljs-keyword">return</span> str;<br>      &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>         e.printStackTrace();<br>         <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PizzaStore</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.factory.absfactory.pizzastore.order;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PizzaStore</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//new OrderPizza(new BJFactory());</span><br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderPizza</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LDFactory</span>());<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p>æ‰§è¡Œæ•ˆæœ</p>
<p>input pizza ç§ç±»:<br />
cheese<br />
<sub>ä½¿ç”¨çš„æ˜¯æŠ½è±¡å·¥å‚æ¨¡å¼</sub><br />
ä¼¦æ•¦çš„å¥¶é…ªpizza å‡†å¤‡åŸææ–™<br />
ä¼¦æ•¦çš„å¥¶é…ªpizza baking;<br />
ä¼¦æ•¦çš„å¥¶é…ªpizza cutting;<br />
ä¼¦æ•¦çš„å¥¶é…ªpizza boxing;<br />
input pizza ç§ç±»:</p>
<h1 id="åŸå‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#åŸå‹æ¨¡å¼"></a> åŸå‹æ¨¡å¼</h1>
<p>åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æ˜¯ç”¨äºåˆ›å»ºé‡å¤çš„å¯¹è±¡ï¼ŒåŒæ—¶åˆèƒ½ä¿è¯æ€§èƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>è¿™ç§æ¨¡å¼æ˜¯å®ç°äº†ä¸€ä¸ªåŸå‹æ¥å£ï¼Œè¯¥æ¥å£ç”¨äºåˆ›å»ºå½“å‰å¯¹è±¡çš„å…‹éš†ã€‚å½“ç›´æ¥åˆ›å»ºå¯¹è±¡çš„ä»£ä»·æ¯”è¾ƒå¤§æ—¶ï¼Œåˆ™é‡‡ç”¨è¿™ç§æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¹è±¡éœ€è¦åœ¨ä¸€ä¸ªé«˜ä»£ä»·çš„æ•°æ®åº“æ“ä½œä¹‹åè¢«åˆ›å»ºã€‚æˆ‘ä»¬å¯ä»¥ç¼“å­˜è¯¥å¯¹è±¡ï¼Œåœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚æ—¶è¿”å›å®ƒçš„å…‹éš†ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æ›´æ–°æ•°æ®åº“ï¼Œä»¥æ­¤æ¥å‡å°‘æ•°æ®åº“è°ƒç”¨ã€‚</p>
<h2 id="ä»‹ç»-3"><a class="markdownIt-Anchor" href="#ä»‹ç»-3"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> åœ¨è¿è¡ŒæœŸå»ºç«‹å’Œåˆ é™¤åŸå‹ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> 1ã€å½“ä¸€ä¸ªç³»ç»Ÿåº”è¯¥ç‹¬ç«‹äºå®ƒçš„äº§å“åˆ›å»ºï¼Œæ„æˆå’Œè¡¨ç¤ºæ—¶ã€‚ 2ã€å½“è¦å®ä¾‹åŒ–çš„ç±»æ˜¯åœ¨è¿è¡Œæ—¶åˆ»æŒ‡å®šæ—¶ï¼Œä¾‹å¦‚ï¼Œé€šè¿‡åŠ¨æ€è£…è½½ã€‚<br />
3ã€ä¸ºäº†é¿å…åˆ›å»ºä¸€ä¸ªä¸äº§å“ç±»å±‚æ¬¡å¹³è¡Œçš„å·¥å‚ç±»å±‚æ¬¡æ—¶ã€‚<br />
4ã€å½“ä¸€ä¸ªç±»çš„å®ä¾‹åªèƒ½æœ‰å‡ ä¸ªä¸åŒçŠ¶æ€ç»„åˆä¸­çš„ä¸€ç§æ—¶ã€‚å»ºç«‹ç›¸åº”æ•°ç›®çš„åŸå‹å¹¶å…‹éš†å®ƒä»¬å¯èƒ½æ¯”æ¯æ¬¡ç”¨åˆé€‚çš„çŠ¶æ€æ‰‹å·¥å®ä¾‹åŒ–è¯¥ç±»æ›´æ–¹ä¾¿ä¸€äº›ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> åˆ©ç”¨å·²æœ‰çš„ä¸€ä¸ªåŸå‹å¯¹è±¡ï¼Œå¿«é€Ÿåœ°ç”Ÿæˆå’ŒåŸå‹å¯¹è±¡ä¸€æ ·çš„å®ä¾‹ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> 1ã€å®ç°å…‹éš†æ“ä½œï¼Œåœ¨ JAVA å®ç° Cloneable æ¥å£ï¼Œé‡å†™ clone()ï¼Œåœ¨ .NET ä¸­å¯ä»¥ä½¿ç”¨ Object ç±»çš„MemberwiseClone() æ–¹æ³•æ¥å®ç°å¯¹è±¡çš„æµ…æ‹·è´æˆ–é€šè¿‡åºåˆ—åŒ–çš„æ–¹å¼æ¥å®ç°æ·±æ‹·è´ã€‚<br />
2ã€åŸå‹æ¨¡å¼åŒæ ·ç”¨äºéš”ç¦»ç±»å¯¹è±¡çš„ä½¿ç”¨è€…å’Œå…·ä½“ç±»å‹ï¼ˆæ˜“å˜ç±»ï¼‰ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå®ƒåŒæ ·è¦æ±‚è¿™äº›&quot;æ˜“å˜ç±»&quot;æ‹¥æœ‰ç¨³å®šçš„æ¥å£ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€ç»†èƒåˆ†è£‚ã€‚ 2ã€JAVA ä¸­çš„ Object clone() æ–¹æ³•ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€æ€§èƒ½æé«˜ã€‚ 2ã€é€ƒé¿æ„é€ å‡½æ•°çš„çº¦æŸã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong><br />
1ã€é…å¤‡å…‹éš†æ–¹æ³•éœ€è¦å¯¹ç±»çš„åŠŸèƒ½è¿›è¡Œé€šç›˜è€ƒè™‘ï¼Œè¿™å¯¹äºå…¨æ–°çš„ç±»ä¸æ˜¯å¾ˆéš¾ï¼Œä½†å¯¹äºå·²æœ‰çš„ç±»ä¸ä¸€å®šå¾ˆå®¹æ˜“ï¼Œç‰¹åˆ«å½“ä¸€ä¸ªç±»å¼•ç”¨ä¸æ”¯æŒä¸²è¡ŒåŒ–çš„é—´æ¥å¯¹è±¡ï¼Œæˆ–è€…å¼•ç”¨å«æœ‰å¾ªç¯ç»“æ„çš„æ—¶å€™ã€‚<br />
2ã€å¿…é¡»å®ç° Cloneable æ¥å£ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€èµ„æºä¼˜åŒ–åœºæ™¯ã€‚ 2ã€ç±»åˆå§‹åŒ–éœ€è¦æ¶ˆåŒ–éå¸¸å¤šçš„èµ„æºï¼Œè¿™ä¸ªèµ„æºåŒ…æ‹¬æ•°æ®ã€ç¡¬ä»¶èµ„æºç­‰ã€‚ 3ã€æ€§èƒ½å’Œå®‰å…¨è¦æ±‚çš„åœºæ™¯ã€‚ 4ã€é€šè¿‡ new<br />
äº§ç”Ÿä¸€ä¸ªå¯¹è±¡éœ€è¦éå¸¸ç¹ççš„æ•°æ®å‡†å¤‡æˆ–è®¿é—®æƒé™ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚ 5ã€ä¸€ä¸ªå¯¹è±¡å¤šä¸ªä¿®æ”¹è€…çš„åœºæ™¯ã€‚<br />
6ã€ä¸€ä¸ªå¯¹è±¡éœ€è¦æä¾›ç»™å…¶ä»–å¯¹è±¡è®¿é—®ï¼Œè€Œä¸”å„ä¸ªè°ƒç”¨è€…å¯èƒ½éƒ½éœ€è¦ä¿®æ”¹å…¶å€¼æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŸå‹æ¨¡å¼æ‹·è´å¤šä¸ªå¯¹è±¡ä¾›è°ƒç”¨è€…ä½¿ç”¨ã€‚<br />
7ã€åœ¨å®é™…é¡¹ç›®ä¸­ï¼ŒåŸå‹æ¨¡å¼å¾ˆå°‘å•ç‹¬å‡ºç°ï¼Œä¸€èˆ¬æ˜¯å’Œå·¥å‚æ–¹æ³•æ¨¡å¼ä¸€èµ·å‡ºç°ï¼Œé€šè¿‡ clone çš„æ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åç”±å·¥å‚æ–¹æ³•æä¾›ç»™è°ƒç”¨è€…ã€‚åŸå‹æ¨¡å¼å·²ç»ä¸<br />
Java èä¸ºæµ‘ç„¶ä¸€ä½“ï¼Œå¤§å®¶å¯ä»¥éšæ‰‹æ‹¿æ¥ä½¿ç”¨ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ä¸é€šè¿‡å¯¹ä¸€ä¸ªç±»è¿›è¡Œå®ä¾‹åŒ–æ¥æ„é€ æ–°å¯¹è±¡ä¸åŒçš„æ˜¯ï¼ŒåŸå‹æ¨¡å¼æ˜¯é€šè¿‡æ‹·è´ä¸€ä¸ªç°æœ‰å¯¹è±¡ç”Ÿæˆæ–°å¯¹è±¡çš„ã€‚æµ…æ‹·è´å®ç°<br />
Cloneableï¼Œé‡å†™ï¼Œæ·±æ‹·è´æ˜¯é€šè¿‡å®ç° Serializable è¯»å–äºŒè¿›åˆ¶æµã€‚</p>
<h2 id="å®ç°-2"><a class="markdownIt-Anchor" href="#å®ç°-2"></a> å®ç°</h2>
<p>æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±» <em>Shape</em> å’Œæ‰©å±•äº† <em>Shape</em> ç±»çš„å®ä½“ç±»ã€‚ä¸‹ä¸€æ­¥æ˜¯å®šä¹‰ç±» <em>ShapeCache</em> ï¼Œè¯¥ç±»æŠŠ shape å¯¹è±¡å­˜å‚¨åœ¨ä¸€ä¸ª_Hashtable_ ä¸­ï¼Œå¹¶åœ¨è¯·æ±‚çš„æ—¶å€™è¿”å›å®ƒä»¬çš„å…‹éš†ã€‚</p>
<p><em>PrototypePatternDemo</em> ç±»ä½¿ç”¨ <em>ShapeCache</em> ç±»æ¥è·å– <em>Shape</em> å¯¹è±¡ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20201202-prototype-pattern.png" srcset="/img/loading.gif" lazyload alt="åŸå‹æ¨¡å¼çš„ UML å›¾" /></p>
<p><code>Shape</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.cn;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ›å»ºä¸€ä¸ªå®ç°äº† Cloneable æ¥å£çš„æŠ½è±¡ç±»ã€‚</span><br><span class="hljs-comment"> * [io.xtwoy.prototype.cn]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2022/12/24 17:26]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String id;<br>    <span class="hljs-keyword">protected</span> String type;<br><br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getType</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> type;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> id;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> &#123;<br>        <span class="hljs-built_in">this</span>.id = id;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">clone</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            clone = <span class="hljs-built_in">super</span>.clone();<br>        &#125; <span class="hljs-keyword">catch</span> (CloneNotSupportedException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> clone;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Circle</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.cn;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * [io.xtwoy.prototype.cn]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2022/12/24 17:27]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Circle</span><span class="hljs-params">()</span>&#123;<br>        type = <span class="hljs-string">&quot;Circle&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Inside Circle::draw() method.&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Rectangle</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.cn;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * [io.xtwoy.prototype.cn]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2022/12/24 17:27]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Rectangle</span><span class="hljs-params">()</span>&#123;<br>        type = <span class="hljs-string">&quot;Rectangle&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Inside Rectangle::draw() method.&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Square</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.cn;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * [io.xtwoy.prototype.cn]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2022/12/24 17:27]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Square</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Shape</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Square</span><span class="hljs-params">()</span>&#123;<br>        type = <span class="hljs-string">&quot;Square&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Inside Square::draw() method.&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ShapeCache</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.cn;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ›å»ºä¸€ä¸ªç±»ï¼Œä»æ•°æ®åº“è·å–å®ä½“ç±»ï¼Œå¹¶æŠŠå®ƒä»¬å­˜å‚¨åœ¨ä¸€ä¸ª Hashtable ä¸­ã€‚</span><br><span class="hljs-comment"> * [io.xtwoy.prototype.cn]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2022/12/24 17:28]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">import</span> java.util.Hashtable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ShapeCache</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Hashtable&lt;String, Shape&gt; shapeMap<br>            = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hashtable</span>&lt;String, Shape&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Shape <span class="hljs-title function_">getShape</span><span class="hljs-params">(String shapeId)</span> &#123;<br>        <span class="hljs-type">Shape</span> <span class="hljs-variable">cachedShape</span> <span class="hljs-operator">=</span> shapeMap.get(shapeId);<br>        <span class="hljs-keyword">return</span> (Shape) cachedShape.clone();<br>    &#125;<br><br>    <span class="hljs-comment">// å¯¹æ¯ç§å½¢çŠ¶éƒ½è¿è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼Œå¹¶åˆ›å»ºè¯¥å½¢çŠ¶</span><br>    <span class="hljs-comment">// shapeMap.put(shapeKey, shape);</span><br>    <span class="hljs-comment">// ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦æ·»åŠ ä¸‰ç§å½¢çŠ¶</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadCache</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">Circle</span> <span class="hljs-variable">circle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>();<br>        circle.setId(<span class="hljs-string">&quot;1&quot;</span>);<br>        shapeMap.put(circle.getId(),circle);<br><br>        <span class="hljs-type">Square</span> <span class="hljs-variable">square</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Square</span>();<br>        square.setId(<span class="hljs-string">&quot;2&quot;</span>);<br>        shapeMap.put(square.getId(),square);<br><br>        <span class="hljs-type">Rectangle</span> <span class="hljs-variable">rectangle</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rectangle</span>();<br>        rectangle.setId(<span class="hljs-string">&quot;3&quot;</span>);<br>        shapeMap.put(rectangle.getId(),rectangle);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PrototypePatternDemo</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.cn;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * PrototypePatternDemo ä½¿ç”¨ ShapeCache ç±»æ¥è·å–å­˜å‚¨åœ¨ Hashtable ä¸­çš„å½¢çŠ¶çš„å…‹éš†ã€‚</span><br><span class="hljs-comment"> * [io.xtwoy.prototype.cn]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2022/12/24 17:29]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrototypePatternDemo</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        ShapeCache.loadCache();<br><br>        <span class="hljs-type">Shape</span> <span class="hljs-variable">clonedShape</span> <span class="hljs-operator">=</span> (Shape) ShapeCache.getShape(<span class="hljs-string">&quot;1&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;Shape : &quot;</span> + clonedShape.getType());<br><br>        <span class="hljs-type">Shape</span> <span class="hljs-variable">clonedShape2</span> <span class="hljs-operator">=</span> (Shape) ShapeCache.getShape(<span class="hljs-string">&quot;2&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;Shape : &quot;</span> + clonedShape2.getType());<br><br>        <span class="hljs-type">Shape</span> <span class="hljs-variable">clonedShape3</span> <span class="hljs-operator">=</span> (Shape) ShapeCache.getShape(<span class="hljs-string">&quot;3&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;Shape : &quot;</span> + clonedShape3.getType());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>Shape : Circle<br />
Shape : Square<br />
Shape : Rectangle</p>
<h2 id="æ·±å…¥è®¨è®º-æµ…æ‹·è´å’Œæ·±æ‹·è´"><a class="markdownIt-Anchor" href="#æ·±å…¥è®¨è®º-æµ…æ‹·è´å’Œæ·±æ‹·è´"></a> æ·±å…¥è®¨è®º-æµ…æ‹·è´å’Œæ·±æ‹·è´</h2>
<h3 id="æµ…æ‹·è´çš„ä»‹ç»"><a class="markdownIt-Anchor" href="#æµ…æ‹·è´çš„ä»‹ç»"></a> æµ…æ‹·è´çš„ä»‹ç»</h3>
<ol>
<li>
<p>å¯¹äºæ•°æ®ç±»å‹æ˜¯åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæµ…æ‹·è´ä¼šç›´æ¥è¿›è¡Œå€¼ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯å°†è¯¥å±æ€§å€¼å¤åˆ¶ä¸€ä»½ç»™æ–°çš„å¯¹è±¡ã€‚</p>
</li>
<li>
<p>å¯¹äºæ•°æ®ç±»å‹æ˜¯å¼•ç”¨æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæ¯”å¦‚è¯´æˆå‘˜å˜é‡æ˜¯æŸä¸ªæ•°ç»„ã€æŸä¸ªç±»çš„å¯¹è±¡ç­‰ï¼Œé‚£ä¹ˆæµ…æ‹·è´ä¼šè¿›è¡Œå¼•ç”¨ä¼ é€’ï¼Œä¹Ÿå°±æ˜¯åªæ˜¯å°†è¯¥æˆå‘˜å˜é‡çš„å¼•ç”¨å€¼ï¼ˆå†…å­˜åœ°å€ï¼‰å¤åˆ¶ä¸€ä»½ç»™æ–°çš„å¯¹è±¡ã€‚å› ä¸ºå®é™…ä¸Šä¸¤ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡éƒ½æŒ‡å‘åŒä¸€ä¸ªå®ä¾‹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä¿®æ”¹è¯¥æˆå‘˜å˜é‡ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„è¯¥æˆå‘˜å˜é‡å€¼</p>
</li>
<li>
<p>å‰é¢æˆ‘ä»¬å…‹éš†Shape å°±æ˜¯æµ…æ‹·è´</p>
</li>
<li>
<p>æµ…æ‹·è´æ˜¯ä½¿ç”¨é»˜è®¤çš„ clone()æ–¹æ³•æ¥å®ç°</p>
</li>
</ol>
<p>sheep = (Sheep) super.clone();</p>
<h3 id="æ·±æ‹·è´åŸºæœ¬ä»‹ç»"><a class="markdownIt-Anchor" href="#æ·±æ‹·è´åŸºæœ¬ä»‹ç»"></a> æ·±æ‹·è´åŸºæœ¬ä»‹ç»</h3>
<ol>
<li>
<p>å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰åŸºæœ¬æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡å€¼</p>
</li>
<li>
<p>ä¸ºæ‰€æœ‰å¼•ç”¨æ•°æ®ç±»å‹çš„æˆå‘˜å˜é‡ç”³è¯·å­˜å‚¨ç©ºé—´ï¼Œå¹¶å¤åˆ¶æ¯ä¸ªå¼•ç”¨æ•°æ®ç±»å‹æˆå‘˜å˜é‡æ‰€å¼•ç”¨çš„å¯¹è±¡ï¼Œç›´åˆ°è¯¥å¯¹è±¡å¯è¾¾çš„æ‰€æœ‰å¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¯¹è±¡è¿›è¡Œæ·±æ‹·è´è¦å¯¹æ•´ä¸ªå¯¹è±¡(åŒ…æ‹¬å¯¹è±¡çš„å¼•ç”¨ç±»å‹)è¿›è¡Œæ‹·è´</strong></p>
</li>
<li>
<p>æ·±æ‹·è´å®ç°æ–¹å¼ 1ï¼šé‡å†™ <strong>clone</strong> æ–¹æ³•æ¥å®ç°æ·±æ‹·è´</p>
</li>
<li>
<p>æ·±æ‹·è´å®ç°æ–¹å¼ 2ï¼šé€šè¿‡<strong>å¯¹è±¡åºåˆ—åŒ–</strong>å®ç°æ·±æ‹·è´(æ¨è)</p>
</li>
</ol>
<p><code>DeepCloneableTarget</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.deepclone;<br><br><span class="hljs-keyword">import</span> java.io.Serializable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeepCloneableTarget</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>, Cloneable &#123;<br>   <br>   <span class="hljs-comment">/**</span><br><span class="hljs-comment">    * </span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;<br><br>   <span class="hljs-keyword">private</span> String cloneName;<br><br>   <span class="hljs-keyword">private</span> String cloneClass;<br><br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeepCloneableTarget</span><span class="hljs-params">(String cloneName, String cloneClass)</span> &#123;<br>      <span class="hljs-built_in">this</span>.cloneName = cloneName;<br>      <span class="hljs-built_in">this</span>.cloneClass = cloneClass;<br>   &#125;<br><br>   <span class="hljs-comment">//å› ä¸ºè¯¥ç±»çš„å±æ€§ï¼Œéƒ½æ˜¯String , å› æ­¤æˆ‘ä»¬è¿™é‡Œä½¿ç”¨é»˜è®¤çš„cloneå®Œæˆå³å¯</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.clone();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DeepProtoType</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.deepclone;<br><br><span class="hljs-keyword">import</span> java.io.ByteArrayInputStream;<br><span class="hljs-keyword">import</span> java.io.ByteArrayOutputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectInputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectOutputStream;<br><span class="hljs-keyword">import</span> java.io.Serializable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeepProtoType</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span>, Cloneable&#123;<br>   <br>   <span class="hljs-keyword">public</span> String name; <span class="hljs-comment">//String å±æ€§</span><br>   <span class="hljs-keyword">public</span> DeepCloneableTarget deepCloneableTarget;<span class="hljs-comment">// å¼•ç”¨ç±»å‹</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeepProtoType</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>   &#125;<br><br><br><br>   <span class="hljs-comment">//æ·±æ‹·è´ - æ–¹å¼ 1 ä½¿ç”¨clone æ–¹æ³•</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException &#123;<br><br>      <span class="hljs-type">Object</span> <span class="hljs-variable">deep</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-comment">//è¿™é‡Œå®Œæˆå¯¹åŸºæœ¬æ•°æ®ç±»å‹(å±æ€§)å’ŒStringçš„å…‹éš†</span><br>      deep = <span class="hljs-built_in">super</span>.clone();<br>      <span class="hljs-comment">//å¯¹å¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œè¿›è¡Œå•ç‹¬å¤„ç†</span><br>      <span class="hljs-type">DeepProtoType</span> <span class="hljs-variable">deepProtoType</span> <span class="hljs-operator">=</span> (DeepProtoType)deep;<br>      deepProtoType.deepCloneableTarget  = (DeepCloneableTarget)deepCloneableTarget.clone();<br><br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> deepProtoType;<br>   &#125;<br>   <br>   <span class="hljs-comment">//æ·±æ‹·è´ - æ–¹å¼2 é€šè¿‡å¯¹è±¡çš„åºåˆ—åŒ–å®ç° (æ¨è)</span><br>   <br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">deepClone</span><span class="hljs-params">()</span> &#123;<br>      <br>      <span class="hljs-comment">//åˆ›å»ºæµå¯¹è±¡</span><br>      <span class="hljs-type">ByteArrayOutputStream</span> <span class="hljs-variable">bos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">ByteArrayInputStream</span> <span class="hljs-variable">bis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <br>      <span class="hljs-keyword">try</span> &#123;<br>         <br>         <span class="hljs-comment">//åºåˆ—åŒ–</span><br>         bos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayOutputStream</span>();<br>         oos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(bos);<br>         oos.writeObject(<span class="hljs-built_in">this</span>); <span class="hljs-comment">//å½“å‰è¿™ä¸ªå¯¹è±¡ä»¥å¯¹è±¡æµçš„æ–¹å¼è¾“å‡º</span><br>         <br>         <span class="hljs-comment">//ååºåˆ—åŒ–</span><br>         bis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayInputStream</span>(bos.toByteArray());<br>         ois = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(bis);<br>         <span class="hljs-type">DeepProtoType</span> <span class="hljs-variable">copyObj</span> <span class="hljs-operator">=</span> (DeepProtoType)ois.readObject();<br>         <br>         <span class="hljs-keyword">return</span> copyObj;<br>         <br>      &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>         <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> handle exception</span><br>         e.printStackTrace();<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>      &#125; <span class="hljs-keyword">finally</span> &#123;<br>         <span class="hljs-comment">//å…³é—­æµ</span><br>         <span class="hljs-keyword">try</span> &#123;<br>            bos.close();<br>            oos.close();<br>            bis.close();<br>            ois.close();<br>         &#125; <span class="hljs-keyword">catch</span> (Exception e2) &#123;<br>            <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> handle exception</span><br>            System.out.println(e2.getMessage());<br>         &#125;<br>      &#125;<br>      <br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.prototype.deepclone;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">DeepProtoType</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeepProtoType</span>();<br>      p.name = <span class="hljs-string">&quot;å®‹æ±Ÿ&quot;</span>;<br>      p.deepCloneableTarget = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeepCloneableTarget</span>(<span class="hljs-string">&quot;å¤§ç‰›&quot;</span>, <span class="hljs-string">&quot;å°ç‰›&quot;</span>);<br>      <br><span class="hljs-comment">//    æ–¹å¼1 å®Œæˆæ·±æ‹·è´</span><br>      <br>      <span class="hljs-type">DeepProtoType</span> <span class="hljs-variable">p1</span> <span class="hljs-operator">=</span> (DeepProtoType) p.clone();<br><br>      System.out.println(<span class="hljs-string">&quot;p.name=&quot;</span> + p.name + <span class="hljs-string">&quot;p.deepCloneableTarget=&quot;</span> + p.deepCloneableTarget.hashCode());<br>      System.out.println(<span class="hljs-string">&quot;p2.name=&quot;</span> + p.name + <span class="hljs-string">&quot;p2.deepCloneableTarget=&quot;</span> + p1.deepCloneableTarget.hashCode());<br>   <br>      <span class="hljs-comment">//æ–¹å¼2 å®Œæˆæ·±æ‹·è´</span><br>      <span class="hljs-type">DeepProtoType</span> <span class="hljs-variable">p2</span> <span class="hljs-operator">=</span> (DeepProtoType) p.deepClone();<br>      <br>      System.out.println(<span class="hljs-string">&quot;p.name=&quot;</span> + p.name + <span class="hljs-string">&quot;p.deepCloneableTarget=&quot;</span> + p.deepCloneableTarget.hashCode());<br>      System.out.println(<span class="hljs-string">&quot;p2.name=&quot;</span> + p.name + <span class="hljs-string">&quot;p2.deepCloneableTarget=&quot;</span> + p2.deepCloneableTarget.hashCode());<br>   <br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>p.name=å®‹æ±Ÿp.deepCloneableTarget=1360875712<br />
p2.name=å®‹æ±Ÿp2.deepCloneableTarget=1625635731<br />
p.name=å®‹æ±Ÿp.deepCloneableTarget=1360875712<br />
p2.name=å®‹æ±Ÿp2.deepCloneableTarget=824909230</p>
<p>æ³¨é‡Š<code>DeepProtoType</code>ä¸­çš„ä¸€ä¸‹ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//å¯¹å¼•ç”¨ç±»å‹çš„å±æ€§ï¼Œè¿›è¡Œå•ç‹¬å¤„ç†</span><br>     <span class="hljs-type">DeepProtoType</span> <span class="hljs-variable">deepProtoType</span> <span class="hljs-operator">=</span> (DeepProtoType)deep;<br>     deepProtoType.deepCloneableTarget  = (DeepCloneableTarget)deepCloneableTarget.clone();<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>p.name=å®‹æ±Ÿp.deepCloneableTarget=1360875712<br />
p2.name=å®‹æ±Ÿp2.deepCloneableTarget=1360875712<br />
p.name=å®‹æ±Ÿp.deepCloneableTarget=1360875712<br />
p2.name=å®‹æ±Ÿp2.deepCloneableTarget=664223387</p>
<h1 id="å»ºé€ è€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#å»ºé€ è€…æ¨¡å¼"></a> ğŸŒ—å»ºé€ è€…æ¨¡å¼</h1>
<p>å»ºé€ è€…æ¨¡å¼ï¼ˆBuilderPatternï¼‰ä½¿ç”¨å¤šä¸ªç®€å•çš„å¯¹è±¡ä¸€æ­¥ä¸€æ­¥æ„å»ºæˆä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚</p>
<p>å»ºé€ è€…æ¨¡å¼ï¼ˆ<strong>Builder Pattern</strong>ï¼‰ åˆå«<strong>ç”Ÿæˆå™¨æ¨¡å¼</strong>ï¼Œæ˜¯ä¸€ç§å¯¹è±¡<strong>æ„å»ºæ¨¡å¼</strong>ã€‚å®ƒå¯ä»¥å°†å¤æ‚å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼ˆæŠ½è±¡ç±»åˆ«ï¼‰ï¼Œä½¿è¿™ä¸ªæŠ½è±¡è¿‡ç¨‹çš„ä¸åŒå®ç°æ–¹æ³•å¯ä»¥æ„é€ å‡ºä¸åŒè¡¨ç°ï¼ˆå±æ€§ï¼‰çš„å¯¹è±¡ã€‚</p>
<p>å»ºé€ è€…æ¨¡å¼ æ˜¯ä¸€æ­¥ä¸€æ­¥åˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œå®ƒå…è®¸ç”¨æˆ·åªé€šè¿‡æŒ‡å®šå¤æ‚å¯¹è±¡çš„ç±»å‹å’Œå†…å®¹å°±å¯ä»¥æ„å»ºå®ƒä»¬ï¼Œç”¨æˆ·ä¸éœ€è¦çŸ¥é“å†…éƒ¨çš„å…·ä½“æ„å»ºç»†èŠ‚ã€‚</p>
<p>ä¸€ä¸ª Builder ç±»ä¼šä¸€æ­¥ä¸€æ­¥æ„é€ æœ€ç»ˆçš„å¯¹è±¡ã€‚è¯¥ Builder ç±»æ˜¯ç‹¬ç«‹äºå…¶ä»–å¯¹è±¡çš„ã€‚</p>
<h2 id="ä»‹ç»-4"><a class="markdownIt-Anchor" href="#ä»‹ç»-4"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å°†ä¸€ä¸ªå¤æ‚çš„æ„å»ºä¸å…¶è¡¨ç¤ºç›¸åˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤ºã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong><br />
ä¸»è¦è§£å†³åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰æ—¶å€™é¢ä¸´ç€&quot;ä¸€ä¸ªå¤æ‚å¯¹è±¡&quot;çš„åˆ›å»ºå·¥ä½œï¼Œå…¶é€šå¸¸ç”±å„ä¸ªéƒ¨åˆ†çš„å­å¯¹è±¡ç”¨ä¸€å®šçš„ç®—æ³•æ„æˆï¼›ç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œè¿™ä¸ªå¤æ‚å¯¹è±¡çš„å„ä¸ªéƒ¨åˆ†ç»å¸¸é¢ä¸´ç€å‰§çƒˆçš„å˜åŒ–ï¼Œä½†æ˜¯å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·çš„ç®—æ³•å´ç›¸å¯¹ç¨³å®šã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> ä¸€äº›åŸºæœ¬éƒ¨ä»¶ä¸ä¼šå˜ï¼Œè€Œå…¶ç»„åˆç»å¸¸å˜åŒ–çš„æ—¶å€™ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†å˜ä¸ä¸å˜åˆ†ç¦»å¼€ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å»ºé€ è€…ï¼šåˆ›å»ºå’Œæä¾›å®ä¾‹ï¼Œå¯¼æ¼”ï¼šç®¡ç†å»ºé€ å‡ºæ¥çš„å®ä¾‹çš„ä¾èµ–å…³ç³»ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€å»è‚¯å¾·åŸºï¼Œæ±‰å ¡ã€å¯ä¹ã€è–¯æ¡ã€ç‚¸é¸¡ç¿…ç­‰æ˜¯ä¸å˜çš„ï¼Œè€Œå…¶ç»„åˆæ˜¯ç»å¸¸å˜åŒ–çš„ï¼Œç”Ÿæˆå‡ºæ‰€è°“çš„&quot;å¥—é¤&quot;ã€‚ 2ã€JAVA ä¸­çš„StringBuilderã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å»ºé€ è€…ç‹¬ç«‹ï¼Œæ˜“æ‰©å±•ã€‚ 2ã€ä¾¿äºæ§åˆ¶ç»†èŠ‚é£é™©ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€äº§å“å¿…é¡»æœ‰å…±åŒç‚¹ï¼ŒèŒƒå›´æœ‰é™åˆ¶ã€‚ 2ã€å¦‚å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œä¼šæœ‰å¾ˆå¤šçš„å»ºé€ ç±»ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€éœ€è¦ç”Ÿæˆçš„å¯¹è±¡å…·æœ‰å¤æ‚çš„å†…éƒ¨ç»“æ„ã€‚ 2ã€éœ€è¦ç”Ÿæˆçš„å¯¹è±¡å†…éƒ¨å±æ€§æœ¬èº«ç›¸äº’ä¾èµ–ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ä¸å·¥å‚æ¨¡å¼çš„åŒºåˆ«æ˜¯ï¼šå»ºé€ è€…æ¨¡å¼æ›´åŠ å…³æ³¨ä¸é›¶ä»¶è£…é…çš„é¡ºåºã€‚</p>
<p><strong>å»ºé€ è€…æ¨¡å¼çš„å››ä¸ªè§’è‰²ï¼š</strong></p>
<p>1ã€Productï¼ˆäº§å“è§’è‰²ï¼‰ï¼š ä¸€ä¸ªå…·ä½“çš„äº§å“å¯¹è±¡ã€‚</p>
<p>2ã€ Builderï¼ˆæŠ½è±¡å»ºé€ è€…ï¼‰ï¼š åˆ›å»ºä¸€ä¸ª Product å¯¹è±¡çš„å„ä¸ªéƒ¨ä»¶æŒ‡å®šçš„ <strong>æ¥å£/æŠ½è±¡ç±»</strong>ã€‚</p>
<p>3ã€ConcreteBuilderï¼ˆå…·ä½“å»ºé€ è€…ï¼‰ï¼š å®ç°æ¥å£ï¼Œæ„å»ºå’Œè£…é…å„ä¸ªéƒ¨ä»¶ã€‚</p>
<p>4ã€Directorï¼ˆæŒ‡æŒ¥è€…ï¼‰ï¼š æ„å»ºä¸€ä¸ªä½¿ç”¨ Builder æ¥å£çš„å¯¹è±¡ã€‚å®ƒä¸»è¦æ˜¯ç”¨äºåˆ›å»ºä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ã€‚å®ƒä¸»è¦æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯ï¼šéš”ç¦»äº†å®¢æˆ·ä¸å¯¹è±¡çš„ç”Ÿäº§è¿‡ç¨‹ï¼ŒäºŒæ˜¯ï¼šè´Ÿè´£æ§åˆ¶äº§å“å¯¹è±¡çš„ç”Ÿäº§è¿‡ç¨‹ã€‚</p>
<p><strong>å»ºé€ è€…æ¨¡å¼åŸç†ç±»å›¾ï¼š</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224193125327.png" srcset="/img/loading.gif" lazyload alt="image-20221224193125327" /></p>
<ol>
<li>éœ€è¦å»ºæˆ¿å­ï¼šè¿™ä¸€è¿‡ç¨‹ä¸ºæ‰“æ¡©ã€ç Œå¢™ã€å°é¡¶ã€‚ä¸ç®¡æ˜¯æ™®é€šæˆ¿å­ä¹Ÿå¥½ï¼Œåˆ«å¢…ä¹Ÿå¥½éƒ½éœ€è¦ç»å†è¿™äº›è¿‡ç¨‹ï¼Œä¸‹é¢æˆ‘ä»¬</li>
</ol>
<p>ä½¿ç”¨å»ºé€ è€…æ¨¡å¼(Builder Pattern)æ¥å®Œæˆ</p>
<ol start="2">
<li>æ€è·¯åˆ†æå›¾è§£(ç±»å›¾)</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224213529759.png" srcset="/img/loading.gif" lazyload alt="image-20221224213529759" /></p>
<h2 id="å®ç°-3"><a class="markdownIt-Anchor" href="#å®ç°-3"></a> å®ç°</h2>
<p><code>House</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.builder.improve;<br><br><span class="hljs-comment">//äº§å“-&gt;Product</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">House</span> &#123;<br>   <span class="hljs-keyword">private</span> String baise;<br>   <span class="hljs-keyword">private</span> String wall;<br>   <span class="hljs-keyword">private</span> String roofed;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getBaise</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> baise;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBaise</span><span class="hljs-params">(String baise)</span> &#123;<br>      <span class="hljs-built_in">this</span>.baise = baise;<br>   &#125;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getWall</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> wall;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setWall</span><span class="hljs-params">(String wall)</span> &#123;<br>      <span class="hljs-built_in">this</span>.wall = wall;<br>   &#125;<br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRoofed</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> roofed;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRoofed</span><span class="hljs-params">(String roofed)</span> &#123;<br>      <span class="hljs-built_in">this</span>.roofed = roofed;<br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>HouseBuilder</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.builder.improve;<br><br><br><span class="hljs-comment">// æŠ½è±¡çš„å»ºé€ è€…</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HouseBuilder</span> &#123;<br><br>   <span class="hljs-keyword">protected</span> <span class="hljs-type">House</span> <span class="hljs-variable">house</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">House</span>();<br>   <br>   <span class="hljs-comment">//å°†å»ºé€ çš„æµç¨‹å†™å¥½, æŠ½è±¡çš„æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span>;<br>   <br>   <span class="hljs-comment">//å»ºé€ æˆ¿å­å¥½ï¼Œ å°†äº§å“(æˆ¿å­) è¿”å›</span><br>   <span class="hljs-keyword">public</span> House <span class="hljs-title function_">buildHouse</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> house;<br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>CommonHouse</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.builder.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonHouse</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HouseBuilder</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; æ™®é€šæˆ¿å­æ‰“åœ°åŸº5ç±³ &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; æ™®é€šæˆ¿å­ç Œå¢™10cm &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; æ™®é€šæˆ¿å­å±‹é¡¶ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>HighBuilding</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.builder.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HighBuilding</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HouseBuilder</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildBasic</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; é«˜æ¥¼çš„æ‰“åœ°åŸº100ç±³ &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildWalls</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; é«˜æ¥¼çš„ç Œå¢™20cm &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">roofed</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; é«˜æ¥¼çš„é€æ˜å±‹é¡¶ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>HouseDirector</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.builder.improve;<br><br><span class="hljs-comment">//æŒ‡æŒ¥è€…ï¼Œè¿™é‡Œå»æŒ‡å®šåˆ¶ä½œæµç¨‹ï¼Œè¿”å›äº§å“</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HouseDirector</span> &#123;<br>   <br>   <span class="hljs-type">HouseBuilder</span> <span class="hljs-variable">houseBuilder</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>   <span class="hljs-comment">//æ„é€ å™¨ä¼ å…¥ houseBuilder</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">HouseDirector</span><span class="hljs-params">(HouseBuilder houseBuilder)</span> &#123;<br>      <span class="hljs-built_in">this</span>.houseBuilder = houseBuilder;<br>   &#125;<br><br>   <span class="hljs-comment">//é€šè¿‡setter ä¼ å…¥ houseBuilder</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHouseBuilder</span><span class="hljs-params">(HouseBuilder houseBuilder)</span> &#123;<br>      <span class="hljs-built_in">this</span>.houseBuilder = houseBuilder;<br>   &#125;<br>   <br>   <span class="hljs-comment">//å¦‚ä½•å¤„ç†å»ºé€ æˆ¿å­çš„æµç¨‹ï¼Œäº¤ç»™æŒ‡æŒ¥è€…</span><br>   <span class="hljs-keyword">public</span> House <span class="hljs-title function_">constructHouse</span><span class="hljs-params">()</span> &#123;<br>      houseBuilder.buildBasic();<br>      houseBuilder.buildWalls();<br>      houseBuilder.roofed();<br>      <span class="hljs-keyword">return</span> houseBuilder.buildHouse();<br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.builder.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <br>      <span class="hljs-comment">//ç›–æ™®é€šæˆ¿å­</span><br>      <span class="hljs-type">CommonHouse</span> <span class="hljs-variable">commonHouse</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CommonHouse</span>();<br>      <span class="hljs-comment">//å‡†å¤‡åˆ›å»ºæˆ¿å­çš„æŒ‡æŒ¥è€…</span><br>      <span class="hljs-type">HouseDirector</span> <span class="hljs-variable">houseDirector</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HouseDirector</span>(commonHouse);<br>      <br>      <span class="hljs-comment">//å®Œæˆç›–æˆ¿å­ï¼Œè¿”å›äº§å“(æ™®é€šæˆ¿å­)</span><br>      <span class="hljs-type">House</span> <span class="hljs-variable">house</span> <span class="hljs-operator">=</span> houseDirector.constructHouse();<br>      <br>      <span class="hljs-comment">//System.out.println(&quot;è¾“å‡ºæµç¨‹&quot;);</span><br>      <br>      System.out.println(<span class="hljs-string">&quot;--------------------------&quot;</span>);<br>      <span class="hljs-comment">//ç›–é«˜æ¥¼</span><br>      <span class="hljs-type">HighBuilding</span> <span class="hljs-variable">highBuilding</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HighBuilding</span>();<br>      <span class="hljs-comment">//é‡ç½®å»ºé€ è€…</span><br>      houseDirector.setHouseBuilder(highBuilding);<br>      <span class="hljs-comment">//å®Œæˆç›–æˆ¿å­ï¼Œè¿”å›äº§å“(é«˜æ¥¼)</span><br>      houseDirector.constructHouse();<br><br>         &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>æ™®é€šæˆ¿å­æ‰“åœ°åŸº5ç±³<br />
æ™®é€šæˆ¿å­ç Œå¢™10cm</p>
<p>æ™®é€šæˆ¿å­å±‹é¡¶</p>
<p>é«˜æ¥¼çš„æ‰“åœ°åŸº100ç±³<br />
é«˜æ¥¼çš„ç Œå¢™20cm<br />
é«˜æ¥¼çš„é€æ˜å±‹é¡¶</p>
<h2 id="å»ºé€ è€…æ¨¡å¼åœ¨-jdk-çš„åº”ç”¨å’Œæºç åˆ†æ"><a class="markdownIt-Anchor" href="#å»ºé€ è€…æ¨¡å¼åœ¨-jdk-çš„åº”ç”¨å’Œæºç åˆ†æ"></a> å»ºé€ è€…æ¨¡å¼åœ¨ JDK çš„åº”ç”¨å’Œæºç åˆ†æ</h2>
<ol>
<li>
<p>java.lang.StringBuilder ä¸­çš„å»ºé€ è€…æ¨¡å¼</p>
</li>
<li>
<p>ä»£ç è¯´æ˜+Debug æºç </p>
</li>
</ol>
<ol>
<li>
<p>Appendable æ¥å£å®šä¹‰äº†å¤šä¸ª append æ–¹æ³•(æŠ½è±¡æ–¹æ³•), å³ Appendable ä¸ºæŠ½è±¡å»ºé€ è€…, å®šä¹‰äº†æŠ½è±¡æ–¹æ³•</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224214505679.png" srcset="/img/loading.gif" lazyload alt="image-20221224214505679" /></p>
</li>
<li>
<p>AbstractStringBuilder å®ç°äº† Appendable æ¥å£æ–¹æ³•ï¼Œè¿™é‡Œçš„ AbstractStringBuilder</p>
<p>å·²ç»æ˜¯å»ºé€ è€…ï¼Œåªæ˜¯ä¸èƒ½å®ä¾‹åŒ–</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224220521554.png" srcset="/img/loading.gif" lazyload alt="image-20221224220521554" /></p>
</li>
<li>
<p>StringBuilder å³å……å½“äº†æŒ‡æŒ¥è€…è§’è‰²ï¼ŒåŒæ—¶å……å½“äº†å…·ä½“çš„å»ºé€ è€…ï¼Œå»ºé€ æ–¹æ³•çš„å®ç°æ˜¯ç”± AbstractStringBuilder å®Œæˆ, è€Œ StringBuilder ç»§æ‰¿äº† AbstractStringBuilder</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221224220732126.png" srcset="/img/loading.gif" lazyload alt="image-20221224220732126" /></p>
</li>
</ol>
<h2 id="å»ºé€ è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#å»ºé€ è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> å»ºé€ è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>å®¢æˆ·ç«¯(ä½¿ç”¨ç¨‹åº)ä¸å¿…çŸ¥é“äº§å“å†…éƒ¨ç»„æˆçš„ç»†èŠ‚ï¼Œå°†äº§å“æœ¬èº«ä¸äº§å“çš„åˆ›å»ºè¿‡ç¨‹è§£è€¦ï¼Œä½¿å¾—ç›¸åŒçš„åˆ›å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„äº§å“å¯¹è±¡</p>
</li>
<li>
<p>æ¯ä¸€ä¸ªå…·ä½“å»ºé€ è€…éƒ½ç›¸å¯¹ç‹¬ç«‹ï¼Œè€Œä¸å…¶ä»–çš„å…·ä½“å»ºé€ è€…æ— å…³ï¼Œå› æ­¤å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ›¿æ¢å…·ä½“å»ºé€ è€…æˆ–å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…ï¼Œ ç”¨æˆ·ä½¿ç”¨ä¸åŒçš„å…·ä½“å»ºé€ è€…å³å¯å¾—åˆ°ä¸åŒçš„äº§å“å¯¹è±¡</p>
</li>
<li>
<p>å¯ä»¥æ›´åŠ ç²¾ç»†åœ°æ§åˆ¶äº§å“çš„åˆ›å»ºè¿‡ç¨‹ ã€‚å°†å¤æ‚äº§å“çš„åˆ›å»ºæ­¥éª¤åˆ†è§£åœ¨ä¸åŒçš„æ–¹æ³•ä¸­ï¼Œä½¿å¾—åˆ›å»ºè¿‡ç¨‹æ›´åŠ æ¸…æ™°ï¼Œä¹Ÿæ›´æ–¹ä¾¿ä½¿ç”¨ç¨‹åºæ¥æ§åˆ¶åˆ›å»ºè¿‡ç¨‹</p>
</li>
<li>
<p>å¢åŠ æ–°çš„å…·ä½“å»ºé€ è€…æ— é¡»ä¿®æ”¹åŸæœ‰ç±»åº“çš„ä»£ç ï¼ŒæŒ‡æŒ¥è€…ç±»é’ˆå¯¹æŠ½è±¡å»ºé€ è€…ç±»ç¼–ç¨‹ï¼Œç³»ç»Ÿæ‰©å±•æ–¹ä¾¿ï¼Œç¬¦åˆâ€œå¼€é—­åŸåˆ™â€</p>
</li>
<li>
<p>å»ºé€ è€…æ¨¡å¼æ‰€åˆ›å»ºçš„äº§å“ä¸€èˆ¬å…·æœ‰è¾ƒå¤šçš„å…±åŒç‚¹ï¼Œå…¶ç»„æˆéƒ¨åˆ†ç›¸ä¼¼ï¼Œå¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚æ€§å¾ˆå¤§ï¼Œåˆ™ä¸é€‚åˆä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´å—åˆ°ä¸€å®šçš„é™åˆ¶ã€‚</p>
</li>
<li>
<p>å¦‚æœäº§å“çš„å†…éƒ¨å˜åŒ–å¤æ‚ï¼Œå¯èƒ½ä¼šå¯¼è‡´éœ€è¦å®šä¹‰å¾ˆå¤šå…·ä½“å»ºé€ è€…ç±»æ¥å®ç°è¿™ç§å˜åŒ–ï¼Œå¯¼è‡´ç³»ç»Ÿå˜å¾—å¾ˆåºå¤§ï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦è€ƒè™‘æ˜¯å¦é€‰æ‹©å»ºé€ è€…æ¨¡å¼.</p>
</li>
<li>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼ VS å»ºé€ è€…æ¨¡å¼</p>
<p>æŠ½è±¡å·¥å‚æ¨¡å¼å®ç°å¯¹äº§å“å®¶æ—çš„åˆ›å»ºï¼Œä¸€ä¸ªäº§å“å®¶æ—æ˜¯è¿™æ ·çš„ä¸€ç³»åˆ—äº§å“ï¼šå…·æœ‰ä¸åŒåˆ†ç±»ç»´åº¦çš„äº§å“ç»„åˆï¼Œé‡‡ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸éœ€è¦å…³å¿ƒæ„å»ºè¿‡ç¨‹ï¼Œåªå…³å¿ƒä»€ä¹ˆäº§å“ç”±ä»€ä¹ˆå·¥å‚ç”Ÿäº§å³å¯ã€‚è€Œå»ºé€ è€…æ¨¡å¼åˆ™æ˜¯è¦æ±‚æŒ‰ç…§æŒ‡å®šçš„è“å›¾å»ºé€ äº§å“ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯é€šè¿‡ç»„è£…é›¶é…ä»¶è€Œäº§ç”Ÿä¸€ä¸ªæ–°äº§å“</p>
</li>
</ol>
<h1 id="é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#é€‚é…å™¨æ¨¡å¼"></a> ğŸŒ•é€‚é…å™¨æ¨¡å¼</h1>
<p>é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰æ˜¯ä½œä¸ºä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£ä¹‹é—´çš„æ¡¥æ¢ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒç»“åˆäº†ä¸¤ä¸ªç‹¬ç«‹æ¥å£çš„åŠŸèƒ½ã€‚</p>
<p>è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åŠ å…¥ç‹¬ç«‹çš„æˆ–ä¸å…¼å®¹çš„æ¥å£åŠŸèƒ½ã€‚ä¸¾ä¸ªçœŸå®çš„ä¾‹å­ï¼Œè¯»å¡å™¨æ˜¯ä½œä¸ºå†…å­˜å¡å’Œç¬”è®°æœ¬ä¹‹é—´çš„é€‚é…å™¨ã€‚æ‚¨å°†å†…å­˜å¡æ’å…¥è¯»å¡å™¨ï¼Œå†å°†è¯»å¡å™¨æ’å…¥ç¬”è®°æœ¬ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡ç¬”è®°æœ¬æ¥è¯»å–å†…å­˜å¡ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å®ä¾‹æ¥æ¼”ç¤ºé€‚é…å™¨æ¨¡å¼çš„ä½¿ç”¨ã€‚å…¶ä¸­ï¼ŒéŸ³é¢‘æ’­æ”¾å™¨è®¾å¤‡åªèƒ½æ’­æ”¾ mp3 æ–‡ä»¶ï¼Œé€šè¿‡ä½¿ç”¨ä¸€ä¸ªæ›´é«˜çº§çš„éŸ³é¢‘æ’­æ”¾å™¨æ¥æ’­æ”¾ vlc å’Œ mp4 æ–‡ä»¶ã€‚</p>
<h2 id="ä»‹ç»-5"><a class="markdownIt-Anchor" href="#ä»‹ç»-5"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ã€‚é€‚é…å™¨æ¨¡å¼ä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸»è¦è§£å†³åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œå¸¸å¸¸è¦å°†ä¸€äº›&quot;ç°å­˜çš„å¯¹è±¡&quot;æ”¾åˆ°æ–°çš„ç¯å¢ƒä¸­ï¼Œè€Œæ–°ç¯å¢ƒè¦æ±‚çš„æ¥å£æ˜¯ç°å¯¹è±¡ä¸èƒ½æ»¡è¶³çš„ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong></p>
<p>1ã€ç³»ç»Ÿéœ€è¦ä½¿ç”¨ç°æœ‰çš„ç±»ï¼Œè€Œæ­¤ç±»çš„æ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦ã€‚</p>
<p>2ã€æƒ³è¦å»ºç«‹ä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„ç±»ï¼Œç”¨äºä¸ä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ä¸€äº›ç±»ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½åœ¨å°†æ¥å¼•è¿›çš„ç±»ä¸€èµ·å·¥ä½œï¼Œè¿™äº›æºç±»ä¸ä¸€å®šæœ‰ä¸€è‡´çš„æ¥å£ã€‚</p>
<p>3ã€é€šè¿‡æ¥å£è½¬æ¢ï¼Œå°†ä¸€ä¸ªç±»æ’å…¥å¦ä¸€ä¸ªç±»ç³»ä¸­ã€‚ï¼ˆæ¯”å¦‚è€è™å’Œé£ç¦½ï¼Œç°åœ¨å¤šäº†ä¸€ä¸ªé£è™ï¼Œåœ¨ä¸å¢åŠ å®ä½“çš„éœ€æ±‚ä¸‹ï¼Œå¢åŠ ä¸€ä¸ªé€‚é…å™¨ï¼Œåœ¨é‡Œé¢åŒ…å®¹ä¸€ä¸ªè™å¯¹è±¡ï¼Œå®ç°é£çš„æ¥å£ã€‚ï¼‰</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> ç»§æ‰¿æˆ–ä¾èµ–ï¼ˆæ¨èï¼‰ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> é€‚é…å™¨ç»§æ‰¿æˆ–ä¾èµ–å·²æœ‰çš„å¯¹è±¡ï¼Œå®ç°æƒ³è¦çš„ç›®æ ‡æ¥å£ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong></p>
<p>1ã€ç¾å›½ç”µå™¨ 110Vï¼Œä¸­å›½ 220Vï¼Œå°±è¦æœ‰ä¸€ä¸ªé€‚é…å™¨å°† 110V è½¬åŒ–ä¸º 220Vã€‚</p>
<p>2ã€JAVA JDK 1.1 æä¾›äº†Enumeration æ¥å£ï¼Œè€Œåœ¨ 1.2 ä¸­æä¾›äº† Iterator æ¥å£ï¼Œæƒ³è¦ä½¿ç”¨ 1.2 çš„ JDKï¼Œåˆ™è¦å°†ä»¥å‰ç³»ç»Ÿçš„ Enumerationæ¥å£è½¬åŒ–ä¸º Iterator æ¥å£ï¼Œè¿™æ—¶å°±éœ€è¦é€‚é…å™¨æ¨¡å¼ã€‚</p>
<p>3ã€åœ¨ LINUX ä¸Šè¿è¡Œ WINDOWS ç¨‹åºã€‚</p>
<p>4ã€JAVA ä¸­çš„ jdbcã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>1ã€å¯ä»¥è®©ä»»ä½•ä¸¤ä¸ªæ²¡æœ‰å…³è”çš„ç±»ä¸€èµ·è¿è¡Œã€‚</p>
<p>2ã€æé«˜äº†ç±»çš„å¤ç”¨ã€‚</p>
<p>3ã€å¢åŠ äº†ç±»çš„é€æ˜åº¦ã€‚</p>
<p>4ã€çµæ´»æ€§å¥½ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>1ã€è¿‡å¤šåœ°ä½¿ç”¨é€‚é…å™¨ï¼Œä¼šè®©ç³»ç»Ÿéå¸¸é›¶ä¹±ï¼Œä¸æ˜“æ•´ä½“è¿›è¡ŒæŠŠæ¡ã€‚æ¯”å¦‚ï¼Œæ˜æ˜çœ‹åˆ°è°ƒç”¨çš„æ˜¯ A æ¥å£ï¼Œå…¶å®å†…éƒ¨è¢«é€‚é…æˆäº† Bæ¥å£çš„å®ç°ï¼Œä¸€ä¸ªç³»ç»Ÿå¦‚æœå¤ªå¤šå‡ºç°è¿™ç§æƒ…å†µï¼Œæ— å¼‚äºä¸€åœºç¾éš¾ã€‚å› æ­¤å¦‚æœä¸æ˜¯å¾ˆæœ‰å¿…è¦ï¼Œå¯ä»¥ä¸ä½¿ç”¨é€‚é…å™¨ï¼Œè€Œæ˜¯ç›´æ¥å¯¹ç³»ç»Ÿè¿›è¡Œé‡æ„ã€‚</p>
<p>2.ç”±äº JAVAè‡³å¤šç»§æ‰¿ä¸€ä¸ªç±»ï¼Œæ‰€ä»¥è‡³å¤šåªèƒ½é€‚é…ä¸€ä¸ªé€‚é…è€…ç±»ï¼Œè€Œä¸”ç›®æ ‡ç±»å¿…é¡»æ˜¯æŠ½è±¡ç±»ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> æœ‰åŠ¨æœºåœ°ä¿®æ”¹ä¸€ä¸ªæ­£å¸¸è¿è¡Œçš„ç³»ç»Ÿçš„æ¥å£ï¼Œè¿™æ—¶åº”è¯¥è€ƒè™‘ä½¿ç”¨é€‚é…å™¨æ¨¡å¼ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> é€‚é…å™¨ä¸æ˜¯åœ¨è¯¦ç»†è®¾è®¡æ—¶æ·»åŠ çš„ï¼Œè€Œæ˜¯è§£å†³æ­£åœ¨æœå½¹çš„é¡¹ç›®çš„é—®é¢˜ã€‚</p>
<p><strong>ç”¨æˆ·æ”¶åˆ°åé¦ˆç»“æœï¼Œæ„Ÿè§‰åªæ˜¯å’Œç›®æ ‡æ¥å£äº¤äº’</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225155334445.png" srcset="/img/loading.gif" lazyload alt="image-20221225155334445" /></p>
<h2 id="ç±»é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#ç±»é€‚é…å™¨æ¨¡å¼"></a> ç±»é€‚é…å™¨æ¨¡å¼</h2>
<h3 id="ç±»é€‚é…å™¨æ¨¡å¼ä»‹ç»"><a class="markdownIt-Anchor" href="#ç±»é€‚é…å™¨æ¨¡å¼ä»‹ç»"></a> ç±»é€‚é…å™¨æ¨¡å¼ä»‹ç»</h3>
<p>åŸºæœ¬ä»‹ç»ï¼šAdapter ç±»ï¼Œé€šè¿‡ç»§æ‰¿ src ç±»ï¼Œå®ç° dst ç±»æ¥å£ï¼Œå®Œæˆ src-&gt;dst çš„é€‚é…ã€‚</p>
<h3 id="ç±»é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹"><a class="markdownIt-Anchor" href="#ç±»é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹"></a> ç±»é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹</h3>
<p>åº”ç”¨å®ä¾‹è¯´æ˜</p>
<p>ä»¥ç”Ÿæ´»ä¸­å……ç”µå™¨çš„ä¾‹å­æ¥è®²è§£é€‚é…å™¨ï¼Œå……ç”µå™¨æœ¬èº«ç›¸å½“äº Adapterï¼Œ220V äº¤æµç”µç›¸å½“äº src (å³è¢«é€‚é…è€…)ï¼Œæˆ‘ä»¬çš„ç›® dst(å³ ç›®æ ‡)æ˜¯ 5V ç›´æµç”µ</p>
<p>æ€è·¯åˆ†æ(ç±»å›¾)</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225161720849.png" srcset="/img/loading.gif" lazyload alt="image-20221225161720849" /></p>
<p><code>IVoltage5V</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.objectadapter;<br><br><br><span class="hljs-comment">//é€‚é…æ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IVoltage5V</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Voltage220V</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.objectadapter;<br><br><span class="hljs-comment">//è¢«é€‚é…çš„ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Voltage220V</span> &#123;<br>   <span class="hljs-comment">//è¾“å‡º220Vçš„ç”µå‹ï¼Œä¸å˜</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output220V</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-type">int</span> <span class="hljs-variable">src</span> <span class="hljs-operator">=</span> <span class="hljs-number">220</span>;<br>      System.out.println(<span class="hljs-string">&quot;ç”µå‹=&quot;</span> + src + <span class="hljs-string">&quot;ä¼&quot;</span>);<br>      <span class="hljs-keyword">return</span> src;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>VoltageAdapter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.classadapter;<br><br><span class="hljs-comment">//é€‚é…å™¨ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoltageAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Voltage220V</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IVoltage5V</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//è·å–åˆ°220Vç”µå‹</span><br>      <span class="hljs-type">int</span> <span class="hljs-variable">srcV</span> <span class="hljs-operator">=</span> output220V();<br>      <span class="hljs-type">int</span> <span class="hljs-variable">dstV</span> <span class="hljs-operator">=</span> srcV / <span class="hljs-number">44</span> ; <span class="hljs-comment">//è½¬æˆ 5v</span><br>      <span class="hljs-keyword">return</span> dstV;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Phone</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.objectadapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br><br>   <span class="hljs-comment">//å……ç”µ</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">charging</span><span class="hljs-params">(IVoltage5V iVoltage5V)</span> &#123;<br>      <span class="hljs-keyword">if</span>(iVoltage5V.output5V() == <span class="hljs-number">5</span>) &#123;<br>         System.out.println(<span class="hljs-string">&quot;ç”µå‹ä¸º5V, å¯ä»¥å……ç”µ~~&quot;</span>);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (iVoltage5V.output5V() &gt; <span class="hljs-number">5</span>) &#123;<br>         System.out.println(<span class="hljs-string">&quot;ç”µå‹å¤§äº5V, ä¸èƒ½å……ç”µ~~&quot;</span>);<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.classadapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot;  ç±»é€‚é…å™¨æ¨¡å¼ &quot;</span>);<br>		<span class="hljs-type">Phone</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br>		phone.charging(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VoltageAdapter</span>());<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>ç±»é€‚é…å™¨æ¨¡å¼<br />
ç”µå‹=220ä¼<br />
ç”µå‹ä¸º5V, å¯ä»¥å……ç”µ~~</p>
<h3 id="ç±»é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#ç±»é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> ç±»é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3>
<ol>
<li>
<p>Java æ˜¯å•ç»§æ‰¿æœºåˆ¶ï¼Œæ‰€ä»¥ç±»é€‚é…å™¨éœ€è¦ç»§æ‰¿ src ç±»è¿™ä¸€ç‚¹ç®—æ˜¯ä¸€ä¸ªç¼ºç‚¹, å› ä¸ºè¿™è¦æ±‚ dst å¿…é¡»æ˜¯æ¥å£ï¼Œæœ‰ä¸€å®šå±€é™æ€§;</p>
</li>
<li>
<p>src ç±»çš„æ–¹æ³•åœ¨ Adapter ä¸­éƒ½ä¼šæš´éœ²å‡ºæ¥ï¼Œä¹Ÿå¢åŠ äº†ä½¿ç”¨çš„æˆæœ¬ã€‚</p>
</li>
<li>
<p>ç”±äºå…¶ç»§æ‰¿äº† src ç±»ï¼Œæ‰€ä»¥å®ƒå¯ä»¥æ ¹æ®éœ€æ±‚é‡å†™ src ç±»çš„æ–¹æ³•ï¼Œä½¿å¾— Adapter çš„çµæ´»æ€§å¢å¼ºäº†ã€‚</p>
</li>
</ol>
<h2 id="å¯¹è±¡é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#å¯¹è±¡é€‚é…å™¨æ¨¡å¼"></a> å¯¹è±¡é€‚é…å™¨æ¨¡å¼</h2>
<h3 id="å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä»‹ç»"><a class="markdownIt-Anchor" href="#å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä»‹ç»"></a> å¯¹è±¡é€‚é…å™¨æ¨¡å¼ä»‹ç»</h3>
<ol>
<li>
<p>åŸºæœ¬æ€è·¯å’Œç±»çš„é€‚é…å™¨æ¨¡å¼ç›¸åŒï¼Œåªæ˜¯å°† Adapter ç±»ä½œä¿®æ”¹ï¼Œä¸æ˜¯ç»§æ‰¿ src ç±»ï¼Œè€Œæ˜¯æŒæœ‰ src ç±»çš„å®ä¾‹ï¼Œä»¥è§£å†³å…¼å®¹æ€§çš„é—®é¢˜ã€‚ å³ï¼šæŒæœ‰ src ç±»ï¼Œå®ç° dst ç±»æ¥å£ï¼Œå®Œæˆ src-&gt;dst çš„é€‚é…</p>
</li>
<li>
<p>æ ¹æ®â€œ<strong>åˆæˆå¤ç”¨åŸåˆ™</strong>â€ï¼Œåœ¨ç³»ç»Ÿä¸­å°½é‡ä½¿ç”¨<strong>å…³è”å…³ç³»ï¼ˆèšåˆï¼‰æ¥æ›¿ä»£ç»§æ‰¿</strong>å…³ç³»ã€‚</p>
</li>
<li>
<p>å¯¹è±¡é€‚é…å™¨æ¨¡å¼æ˜¯é€‚é…å™¨æ¨¡å¼å¸¸ç”¨çš„ä¸€ç§</p>
</li>
</ol>
<h3 id="å¯¹è±¡é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹"><a class="markdownIt-Anchor" href="#å¯¹è±¡é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹"></a> å¯¹è±¡é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹</h3>
<ol>
<li>åº”ç”¨å®ä¾‹è¯´æ˜</li>
</ol>
<p>ä»¥ç”Ÿæ´»ä¸­å……ç”µå™¨çš„ä¾‹å­æ¥è®²è§£é€‚é…å™¨ï¼Œå……ç”µå™¨æœ¬èº«ç›¸å½“äº Adapterï¼Œ220V äº¤æµç”µç›¸å½“äº src (å³è¢«é€‚é…è€…)ï¼Œæˆ‘ä»¬çš„ç›® dst(å³ç›®æ ‡)æ˜¯ 5V ç›´æµç”µï¼Œä½¿ç”¨å¯¹è±¡é€‚é…å™¨æ¨¡å¼å®Œæˆã€‚</p>
<ol start="2">
<li>æ€è·¯åˆ†æ(ç±»å›¾)ï¼šåªéœ€ä¿®æ”¹é€‚é…å™¨å³å¯, å¦‚ä¸‹</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225161754203.png" srcset="/img/loading.gif" lazyload alt="image-20221225161754203" /></p>
<p><code>VoltageAdapter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.classadapter;<br><br><span class="hljs-comment">//é€‚é…å™¨ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VoltageAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Voltage220V</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IVoltage5V</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">output5V</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//è·å–åˆ°220Vç”µå‹</span><br>      <span class="hljs-type">int</span> <span class="hljs-variable">srcV</span> <span class="hljs-operator">=</span> output220V();<br>      <span class="hljs-type">int</span> <span class="hljs-variable">dstV</span> <span class="hljs-operator">=</span> srcV / <span class="hljs-number">44</span> ; <span class="hljs-comment">//è½¬æˆ 5v</span><br>      <span class="hljs-keyword">return</span> dstV;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.objectadapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		System.out.println(<span class="hljs-string">&quot; å¯¹è±¡é€‚é…å™¨æ¨¡å¼ &quot;</span>);<br>		<span class="hljs-type">Phone</span> <span class="hljs-variable">phone</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Phone</span>();<br>		phone.charging(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VoltageAdapter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Voltage220V</span>()));<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>å¯¹è±¡é€‚é…å™¨æ¨¡å¼<br />
ç”µå‹=220ä¼<br />
ä½¿ç”¨å¯¹è±¡é€‚é…å™¨ï¼Œè¿›è¡Œé€‚é…~~<br />
é€‚é…å®Œæˆï¼Œè¾“å‡ºçš„ç”µå‹ä¸º=5<br />
ç”µå‹ä¸º5V, å¯ä»¥å……ç”µ~~</p>
<h3 id="å¯¹è±¡é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#å¯¹è±¡é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> å¯¹è±¡é€‚é…å™¨æ¨¡å¼æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3>
<ol>
<li>å¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨å…¶å®ç®—æ˜¯åŒä¸€ç§æ€æƒ³ï¼Œåªä¸è¿‡å®ç°æ–¹å¼ä¸åŒã€‚</li>
</ol>
<p>æ ¹æ®åˆæˆå¤ç”¨åŸåˆ™ï¼Œä½¿ç”¨ç»„åˆæ›¿ä»£ç»§æ‰¿ï¼Œ æ‰€ä»¥å®ƒè§£å†³äº†ç±»é€‚é…å™¨å¿…é¡»ç»§æ‰¿ src çš„å±€é™æ€§é—®é¢˜ï¼Œä¹Ÿä¸å†è¦æ±‚ dstå¿…é¡»æ˜¯æ¥å£ã€‚</p>
<ol start="2">
<li>ä½¿ç”¨æˆæœ¬æ›´ä½ï¼Œæ›´çµæ´»</li>
</ol>
<h2 id="æ¥å£é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#æ¥å£é€‚é…å™¨æ¨¡å¼"></a> æ¥å£é€‚é…å™¨æ¨¡å¼</h2>
<h3 id="æ¥å£é€‚é…å™¨æ¨¡å¼ä»‹ç»"><a class="markdownIt-Anchor" href="#æ¥å£é€‚é…å™¨æ¨¡å¼ä»‹ç»"></a> æ¥å£é€‚é…å™¨æ¨¡å¼ä»‹ç»</h3>
<ol>
<li>
<p>ä¸€äº›ä¹¦ç±ç§°ä¸ºï¼šé€‚é…å™¨æ¨¡å¼(Default Adapter Pattern)æˆ–<strong>ç¼ºçœé€‚é…å™¨æ¨¡å¼</strong>ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒæ€è·¯ï¼šå½“<strong>ä¸éœ€è¦å…¨éƒ¨å®ç°æ¥å£á¨€ ä¾›çš„æ–¹æ³•</strong>æ—¶ï¼Œå¯å…ˆ<strong>è®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»</strong>å®ç°<strong>æ¥å£</strong>ï¼Œå¹¶ä¸ºè¯¥æ¥å£ä¸­æ¯ä¸ªæ–¹æ³• ä¾›ä¸€ä¸ª<strong>é»˜è®¤å®ç°ï¼ˆç©ºæ–¹æ³•ï¼‰</strong>ï¼Œé‚£ä¹ˆè¯¥<strong>æŠ½è±¡ç±»çš„å­ç±»å¯æœ‰é€‰æ‹©åœ°è¦†ç›–çˆ¶ç±»çš„æŸäº›æ–¹æ³•</strong>æ¥å®ç°éœ€æ±‚</p>
</li>
<li>
<p>é€‚ç”¨äºä¸€ä¸ªæ¥å£ä¸æƒ³ä½¿ç”¨å…¶æ‰€æœ‰çš„æ–¹æ³•çš„æƒ…å†µã€‚</p>
</li>
</ol>
<h3 id="æ¥å£é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹"><a class="markdownIt-Anchor" href="#æ¥å£é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹"></a> æ¥å£é€‚é…å™¨æ¨¡å¼åº”ç”¨å®ä¾‹</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225163021962.png" srcset="/img/loading.gif" lazyload alt="image-20221225163021962" /></p>
<p><code>Interface4</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.interfaceadapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interface4</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>AbsAdapter</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.interfaceadapter;<br><br><span class="hljs-comment">//åœ¨AbsAdapter æˆ‘ä»¬å°† Interface4 çš„æ–¹æ³•è¿›è¡Œé»˜è®¤å®ç°</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbsAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interface4</span> &#123;<br><br>   <span class="hljs-comment">//é»˜è®¤å®ç°</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br><br>   &#125;<br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m2</span><span class="hljs-params">()</span> &#123;<br><br>   &#125;<br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m3</span><span class="hljs-params">()</span> &#123;<br><br>   &#125;<br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m4</span><span class="hljs-params">()</span> &#123;<br><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.interfaceadapter;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<br>		<span class="hljs-type">AbsAdapter</span> <span class="hljs-variable">absAdapter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbsAdapter</span>() &#123;<br>			<span class="hljs-comment">//åªéœ€è¦å»è¦†ç›–æˆ‘ä»¬ éœ€è¦ä½¿ç”¨ æ¥å£æ–¹æ³•</span><br>			<span class="hljs-meta">@Override</span><br>			<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">m1</span><span class="hljs-params">()</span> &#123;<br>				<span class="hljs-comment">// TODO Auto-generated method stub</span><br>				System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨äº†m1çš„æ–¹æ³•&quot;</span>);<br>			&#125;<br>		&#125;;<br><br>		System.out.println(<span class="hljs-string">&quot;è¦ä½¿ç”¨çš„æ–¹æ³•è¾“å‡ºï¼š&quot;</span>);<br>		absAdapter.m1();<br>		System.out.println(<span class="hljs-string">&quot;ä¸è¦ä½¿ç”¨çš„æ–¹æ³•è¾“å‡ºï¼š&quot;</span>);<br>		absAdapter.m2();<br>		System.out.println(<span class="hljs-string">&quot;ä½¿ç”¨ç»“æŸ&quot;</span>);<br>	&#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<p>è¦ä½¿ç”¨çš„æ–¹æ³•è¾“å‡ºï¼š<br />
ä½¿ç”¨äº†m1çš„æ–¹æ³•<br />
ä¸è¦ä½¿ç”¨çš„æ–¹æ³•è¾“å‡ºï¼š<br />
ä½¿ç”¨ç»“æŸ</p>
<h2 id="é€‚é…å™¨æ¨¡å¼åœ¨-springmvc-æ¡†æ¶åº”ç”¨çš„æºç å‰–æ"><a class="markdownIt-Anchor" href="#é€‚é…å™¨æ¨¡å¼åœ¨-springmvc-æ¡†æ¶åº”ç”¨çš„æºç å‰–æ"></a> é€‚é…å™¨æ¨¡å¼åœ¨ SpringMVC æ¡†æ¶åº”ç”¨çš„æºç å‰–æ</h2>
<ol>
<li>
<p>SpringMvc ä¸­çš„ <strong>HandlerAdapter,</strong> å°±ä½¿ç”¨äº†é€‚é…å™¨æ¨¡å¼</p>
</li>
<li>
<p>SpringMVC å¤„ç†è¯·æ±‚çš„æµç¨‹å›é¡¾</p>
</li>
<li>
<p>ä½¿ç”¨ HandlerAdapter çš„åŸå› åˆ†æ:</p>
</li>
</ol>
<p>å¯ä»¥çœ‹åˆ°å¤„ç†å™¨çš„ç±»å‹ä¸åŒï¼Œæœ‰å¤šé‡å®ç°æ–¹å¼ï¼Œé‚£ä¹ˆè°ƒç”¨æ–¹å¼å°±ä¸æ˜¯ç¡®å®šçš„ï¼Œå¦‚æœéœ€è¦ç›´æ¥è°ƒç”¨ Controller æ–¹æ³•ï¼Œéœ€è¦è°ƒç”¨çš„æ—¶å€™å°±å¾—ä¸æ–­æ˜¯ä½¿ç”¨ if else æ¥è¿›è¡Œåˆ¤æ–­æ˜¯å“ªä¸€ç§å­ç±»ç„¶åæ‰§è¡Œã€‚é‚£ä¹ˆå¦‚æœåé¢è¦æ‰©å±• Controllerï¼Œå°±å¾—ä¿®æ”¹åŸæ¥çš„ä»£ç ï¼Œè¿™æ ·è¿èƒŒäº† OCP åŸåˆ™ã€‚</p>
<ol start="4">
<li>
<p>ä»£ç åˆ†æ+Debug æºç </p>
</li>
<li>
<p>åŠ¨æ‰‹å†™ SpringMVC é€šè¿‡é€‚é…å™¨è®¾è®¡æ¨¡å¼è·å–åˆ°å¯¹åº”çš„ Controller çš„æºç </p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221225172743411.png" srcset="/img/loading.gif" lazyload alt="image-20221225172743411" /></p>
<p><code>å„ç±»Controller</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.springmvc;<br><br><span class="hljs-comment">//å¤šç§Controllerå®ç°  </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Controller</span> &#123;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Controller</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doHttpHandler</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;http...&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Controller</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSimplerHandler</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;simple...&quot;</span>);<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationController</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Controller</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doAnnotationHandler</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;annotation...&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>å„ç±»é€‚é…å™¨</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.springmvc;<br><br><span class="hljs-comment">///å®šä¹‰ä¸€ä¸ªAdapteræ¥å£ </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HandlerAdapter</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(Object handler)</span>;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Object handler)</span>;<br>&#125;<br><br><span class="hljs-comment">// å¤šç§é€‚é…å™¨ç±»</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleHandlerAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerAdapter</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Object handler)</span> &#123;<br>      ((SimpleController) handler).doSimplerHandler();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(Object handler)</span> &#123;<br>      <span class="hljs-keyword">return</span> (handler <span class="hljs-keyword">instanceof</span> SimpleController);<br>   &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpHandlerAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerAdapter</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Object handler)</span> &#123;<br>      ((HttpController) handler).doHttpHandler();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(Object handler)</span> &#123;<br>      <span class="hljs-keyword">return</span> (handler <span class="hljs-keyword">instanceof</span> HttpController);<br>   &#125;<br><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationHandlerAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerAdapter</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handle</span><span class="hljs-params">(Object handler)</span> &#123;<br>      ((AnnotationController) handler).doAnnotationHandler();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supports</span><span class="hljs-params">(Object handler)</span> &#123;<br><br>      <span class="hljs-keyword">return</span> (handler <span class="hljs-keyword">instanceof</span> AnnotationController);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DispatchServlet</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.adapter.springmvc;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatchServlet</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> List&lt;HandlerAdapter&gt; handlerAdapters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;HandlerAdapter&gt;();<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">DispatchServlet</span><span class="hljs-params">()</span> &#123;<br>      handlerAdapters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationHandlerAdapter</span>());<br>      handlerAdapters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHandlerAdapter</span>());<br>      handlerAdapters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleHandlerAdapter</span>());<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">()</span> &#123;<br><br>      <span class="hljs-comment">// æ­¤å¤„æ¨¡æ‹ŸSpringMVCä»requestå–handlerçš„å¯¹è±¡ï¼Œ</span><br>      <span class="hljs-comment">// é€‚é…å™¨å¯ä»¥è·å–åˆ°å¸Œæœ›çš„Controller</span><br>       <span class="hljs-type">HttpController</span> <span class="hljs-variable">controller</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpController</span>();<br>      <span class="hljs-comment">// AnnotationController controller = new AnnotationController();</span><br>      <span class="hljs-comment">//SimpleController controller = new SimpleController();</span><br>      <span class="hljs-comment">// å¾—åˆ°å¯¹åº”é€‚é…å™¨</span><br>      <span class="hljs-type">HandlerAdapter</span> <span class="hljs-variable">adapter</span> <span class="hljs-operator">=</span> getHandler(controller);<br>      <span class="hljs-comment">// é€šè¿‡é€‚é…å™¨æ‰§è¡Œå¯¹åº”çš„controllerå¯¹åº”æ–¹æ³•</span><br>      adapter.handle(controller);<br><br>   &#125;<br><br>   <span class="hljs-keyword">public</span> HandlerAdapter <span class="hljs-title function_">getHandler</span><span class="hljs-params">(Controller controller)</span> &#123;<br>      <span class="hljs-comment">//éå†ï¼šæ ¹æ®å¾—åˆ°çš„controller(handler), è¿”å›å¯¹åº”é€‚é…å™¨</span><br>      <span class="hljs-keyword">for</span> (HandlerAdapter adapter : <span class="hljs-built_in">this</span>.handlerAdapters) &#123;<br>         <span class="hljs-keyword">if</span> (adapter.supports(controller)) &#123;<br>            <span class="hljs-keyword">return</span> adapter;<br>         &#125;<br>      &#125;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">DispatchServlet</span>().doDispatch(); <span class="hljs-comment">// http...</span><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<h2 id="é€‚é…å™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#é€‚é…å™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> é€‚é…å™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>ä¸‰ç§å‘½åæ–¹å¼ï¼Œæ˜¯æ ¹æ® src æ˜¯ä»¥æ€æ ·çš„å½¢å¼ç»™åˆ° Adapterï¼ˆåœ¨ Adapter é‡Œçš„å½¢å¼ï¼‰æ¥å‘½åçš„ã€‚</p>
</li>
<li></li>
</ol>
<ol>
<li>ç±»é€‚é…å™¨ï¼šä»¥ç±»ç»™åˆ°ï¼Œåœ¨ Adapter é‡Œï¼Œå°±æ˜¯å°† src å½“åšç±»ï¼Œç»§æ‰¿</li>
<li>å¯¹è±¡é€‚é…å™¨ï¼šä»¥å¯¹è±¡ç»™åˆ°ï¼Œåœ¨ Adapter é‡Œï¼Œå°† src ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒæŒæœ‰</li>
<li>æ¥å£é€‚é…å™¨ï¼šä»¥æ¥å£ç»™åˆ°ï¼Œåœ¨ Adapter é‡Œï¼Œå°† src ä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œå®ç°</li>
</ol>
<ol start="3">
<li>
<p>Adapter æ¨¡å¼æœ€å¤§çš„ä½œç”¨è¿˜æ˜¯å°†åŸæœ¬ä¸å…¼å®¹çš„æ¥å£èåˆåœ¨ä¸€èµ·å·¥ä½œã€‚</p>
</li>
<li>
<p>å®é™…å¼€å‘ä¸­ï¼Œå®ç°èµ·æ¥ä¸æ‹˜æ³¥äºæˆ‘ä»¬è®²è§£çš„ä¸‰ç§ç»å…¸å½¢å¼</p>
</li>
</ol>
<h1 id="æ¡¥æ¥æ¨¡å¼"><a class="markdownIt-Anchor" href="#æ¡¥æ¥æ¨¡å¼"></a> ğŸŒ—æ¡¥æ¥æ¨¡å¼</h1>
<p>æ¡¥æ¥ï¼ˆBridgeï¼‰æ˜¯ç”¨äºæŠŠæŠ½è±¡åŒ–ä¸å®ç°åŒ–è§£è€¦ï¼Œä½¿å¾—äºŒè€…å¯ä»¥ç‹¬ç«‹å˜åŒ–ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒé€šè¿‡æä¾›æŠ½è±¡åŒ–å’Œå®ç°åŒ–ä¹‹é—´çš„æ¡¥æ¥ç»“æ„ï¼Œæ¥å®ç°äºŒè€…çš„è§£è€¦ã€‚</p>
<p>è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªä½œä¸ºæ¡¥æ¥çš„æ¥å£ï¼Œä½¿å¾—å®ä½“ç±»çš„åŠŸèƒ½ç‹¬ç«‹äºæ¥å£å®ç°ç±»ã€‚è¿™ä¸¤ç§ç±»å‹çš„ç±»å¯è¢«ç»“æ„åŒ–æ”¹å˜è€Œäº’ä¸å½±å“ã€‚</p>
<hr />
<h2 id="ä»‹ç»-6"><a class="markdownIt-Anchor" href="#ä»‹ç»-6"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> åœ¨æœ‰å¤šç§å¯èƒ½ä¼šå˜åŒ–çš„æƒ…å†µä¸‹ï¼Œç”¨ç»§æ‰¿ä¼šé€ æˆç±»çˆ†ç‚¸é—®é¢˜ï¼Œæ‰©å±•èµ·æ¥ä¸çµæ´»ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> å®ç°ç³»ç»Ÿå¯èƒ½æœ‰å¤šä¸ªè§’åº¦åˆ†ç±»ï¼Œæ¯ä¸€ç§è§’åº¦éƒ½å¯èƒ½å˜åŒ–ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> æŠŠè¿™ç§å¤šè§’åº¦åˆ†ç±»åˆ†ç¦»å‡ºæ¥ï¼Œè®©å®ƒä»¬ç‹¬ç«‹å˜åŒ–ï¼Œå‡å°‘å®ƒä»¬ä¹‹é—´è€¦åˆã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> æŠ½è±¡ç±»ä¾èµ–å®ç°ç±»ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong><br />
1ã€çŒªå…«æˆ’ä»å¤©è“¬å…ƒå¸…è½¬ä¸–æŠ•èƒåˆ°çŒªï¼Œè½¬ä¸–æŠ•èƒçš„æœºåˆ¶å°†å°˜ä¸–åˆ’åˆ†ä¸ºä¸¤ä¸ªç­‰çº§ï¼Œå³ï¼šçµé­‚å’Œè‚‰ä½“ï¼Œå‰è€…ç›¸å½“äºæŠ½è±¡åŒ–ï¼Œåè€…ç›¸å½“äºå®ç°åŒ–ã€‚ç”Ÿçµé€šè¿‡åŠŸèƒ½çš„å§”æ´¾ï¼Œè°ƒç”¨è‚‰ä½“å¯¹è±¡çš„åŠŸèƒ½ï¼Œä½¿å¾—ç”Ÿçµå¯ä»¥åŠ¨æ€åœ°é€‰æ‹©ã€‚<br />
2ã€å¢™ä¸Šçš„å¼€å…³ï¼Œå¯ä»¥çœ‹åˆ°çš„å¼€å…³æ˜¯æŠ½è±¡çš„ï¼Œä¸ç”¨ç®¡é‡Œé¢å…·ä½“æ€ä¹ˆå®ç°çš„ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€æŠ½è±¡å’Œå®ç°çš„åˆ†ç¦»ã€‚ 2ã€ä¼˜ç§€çš„æ‰©å±•èƒ½åŠ›ã€‚ 3ã€å®ç°ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> æ¡¥æ¥æ¨¡å¼çš„å¼•å…¥ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong><br />
1ã€å¦‚æœä¸€ä¸ªç³»ç»Ÿéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§ï¼Œé¿å…åœ¨ä¸¤ä¸ªå±‚æ¬¡ä¹‹é—´å»ºç«‹é™æ€çš„ç»§æ‰¿è”ç³»ï¼Œé€šè¿‡æ¡¥æ¥æ¨¡å¼å¯ä»¥ä½¿å®ƒä»¬åœ¨æŠ½è±¡å±‚å»ºç«‹ä¸€ä¸ªå…³è”å…³ç³»ã€‚<br />
2ã€å¯¹äºé‚£äº›ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿï¼Œæ¡¥æ¥æ¨¡å¼å°¤ä¸ºé€‚ç”¨ã€‚ 3ã€ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> å¯¹äºä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä½¿ç”¨æ¡¥æ¥æ¨¡å¼å†é€‚åˆä¸è¿‡äº†ã€‚</p>
<p><strong>åŸç†ç±»å›¾ï¼š</strong><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102143047364.png" srcset="/img/loading.gif" lazyload alt="image-20230102143047364" /></p>
<h2 id="å®ç°-4"><a class="markdownIt-Anchor" href="#å®ç°-4"></a> å®ç°</h2>
<p>æ‰‹æœºæ“ä½œé—®é¢˜</p>
<p>ç°åœ¨å¯¹ä¸åŒæ‰‹æœºç±»å‹çš„ä¸åŒå“ç‰Œå®ç°æ“ä½œç¼–ç¨‹(æ¯”å¦‚:å¼€æœºã€å…³æœºã€ä¸Šç½‘ï¼Œæ‰“ç”µè¯ç­‰)ï¼Œå¦‚å›¾:</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102144821435.png" srcset="/img/loading.gif" lazyload alt="image-20230102144821435" /></p>
<p>ä½¿ç”¨æ¡¥æ¥æ¨¡å¼å¯¹åº”çš„ç±»å›¾</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102145034564.png" srcset="/img/loading.gif" lazyload alt="image-20230102145034564" /></p>
<p><code>Brand</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Brand</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>XiaoMi</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">XiaoMi</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; å°ç±³æ‰‹æœºå¼€æœº &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; å°ç±³æ‰‹æœºå…³æœº &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; å°ç±³æ‰‹æœºæ‰“ç”µè¯ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Vivo</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Vivo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; Vivoæ‰‹æœºå¼€æœº &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; Vivoæ‰‹æœºå…³æœº &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; Vivoæ‰‹æœºæ‰“ç”µè¯ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Phone</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Phone</span> &#123;<br>   <br>   <span class="hljs-comment">//ç»„åˆå“ç‰Œ</span><br>   <span class="hljs-keyword">private</span> Brand brand;<br><br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Phone</span><span class="hljs-params">(Brand brand)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.brand = brand;<br>   &#125;<br>   <br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">this</span>.brand.open();<br>   &#125;<br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>      brand.close();<br>   &#125;<br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>      brand.call();<br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>FoldedPhone</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><br><span class="hljs-comment">//æŠ˜å å¼æ‰‹æœºç±»ï¼Œç»§æ‰¿ æŠ½è±¡ç±» Phone</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FoldedPhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Phone</span> &#123;<br><br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">FoldedPhone</span><span class="hljs-params">(Brand brand)</span> &#123;<br>      <span class="hljs-built_in">super</span>(brand);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">super</span>.open();<br>      System.out.println(<span class="hljs-string">&quot; æŠ˜å æ ·å¼æ‰‹æœº &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">super</span>.close();<br>      System.out.println(<span class="hljs-string">&quot; æŠ˜å æ ·å¼æ‰‹æœº &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">super</span>.call();<br>      System.out.println(<span class="hljs-string">&quot; æŠ˜å æ ·å¼æ‰‹æœº &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>UpRightPhone</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UpRightPhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Phone</span> &#123;<br>   <br>      <span class="hljs-comment">//æ„é€ å™¨</span><br>      <span class="hljs-keyword">public</span> <span class="hljs-title function_">UpRightPhone</span><span class="hljs-params">(Brand brand)</span> &#123;<br>         <span class="hljs-built_in">super</span>(brand);<br>      &#125;<br>      <br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>         <span class="hljs-built_in">super</span>.open();<br>         System.out.println(<span class="hljs-string">&quot; ç›´ç«‹æ ·å¼æ‰‹æœº &quot;</span>);<br>      &#125;<br>      <br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>         <span class="hljs-built_in">super</span>.close();<br>         System.out.println(<span class="hljs-string">&quot; ç›´ç«‹æ ·å¼æ‰‹æœº &quot;</span>);<br>      &#125;<br>      <br>      <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>         <span class="hljs-built_in">super</span>.call();<br>         System.out.println(<span class="hljs-string">&quot; ç›´ç«‹æ ·å¼æ‰‹æœº &quot;</span>);<br>      &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <br>      <span class="hljs-comment">//è·å–æŠ˜å å¼æ‰‹æœº (æ ·å¼ + å“ç‰Œ )</span><br>      <br>      <span class="hljs-type">Phone</span> <span class="hljs-variable">phone1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FoldedPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XiaoMi</span>());<br>      <br>      phone1.open();<br>      phone1.call();<br>      phone1.close();<br>      <br>      System.out.println(<span class="hljs-string">&quot;----------------------&quot;</span>);<br>      <br>      <span class="hljs-type">Phone</span> <span class="hljs-variable">phone2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FoldedPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vivo</span>());<br>      <br>      phone2.open();<br>      phone2.call();<br>      phone2.close();<br>      <br>      System.out.println(<span class="hljs-string">&quot;--------------&quot;</span>);<br><br>      <span class="hljs-type">Phone</span> <span class="hljs-variable">phone3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpRightPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XiaoMi</span>());<br>      <br>      phone3.open();<br>      phone3.call();<br>      phone3.close();<br>      <br>      System.out.println(<span class="hljs-string">&quot;--------------&quot;</span>);<br><br>      <span class="hljs-type">Phone</span> <span class="hljs-variable">phone4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpRightPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vivo</span>());<br>      <br>      phone4.open();<br>      phone4.call();<br>      phone4.close();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">å°ç±³æ‰‹æœºå¼€æœº <br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå…³æœº </span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><br>++++++++++++++++++++++<br><br> Vivoæ‰‹æœºå¼€æœº <br> æŠ˜å æ ·å¼æ‰‹æœº <br> Vivoæ‰‹æœºæ‰“ç”µè¯ <br> æŠ˜å æ ·å¼æ‰‹æœº <br> Vivoæ‰‹æœºå…³æœº <br> æŠ˜å æ ·å¼æ‰‹æœº <br><br>++++++++++++++<br><br><span class="hljs-code"> å°ç±³æ‰‹æœºå¼€æœº </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå…³æœº </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><br>++++++++++++++<br><br> Vivoæ‰‹æœºå¼€æœº <br> ç›´ç«‹æ ·å¼æ‰‹æœº <br> Vivoæ‰‹æœºæ‰“ç”µè¯ <br> ç›´ç«‹æ ·å¼æ‰‹æœº <br> Vivoæ‰‹æœºå…³æœº <br> ç›´ç«‹æ ·å¼æ‰‹æœº <br></code></pre></td></tr></table></figure>
<p>å¢åŠ æ‰‹æœºæ ·å¼ç±»</p>
<p><code>SildePhone</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ–°æ·»æ—‹è½¬æ ·å¼æ‰‹æœº</span><br><span class="hljs-comment"> * [io.xtwoy.bridge]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2023/1/2 15:06]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SildePhone</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Phone</span>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SildePhone</span><span class="hljs-params">(Brand brand)</span> &#123;<br>        <span class="hljs-built_in">super</span>(brand);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.open();<br>        System.out.println(<span class="hljs-string">&quot; æ—‹è½¬æ ·å¼æ‰‹æœº &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.close();<br>        System.out.println(<span class="hljs-string">&quot; æ—‹è½¬æ ·å¼æ‰‹æœº &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">super</span>.call();<br>        System.out.println(<span class="hljs-string">&quot; æ—‹è½¬æ ·å¼æ‰‹æœº &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>å¢åŠ æ‰‹æœºå“ç‰Œ</p>
<p><code>iPhone</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * [io.xtwoy.bridge]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> : [å¸­å­ä¸ä¼šæ•²ä»£ç ]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> : [V1.0]</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> : [2023/1/2 14:56]</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">iPhone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Brand</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">open</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot; è‹¹æœå¼€æœº&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot; è‹¹æœå…³æœº&quot;</span>);<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">call</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot; è‹¹æœæ‰“ç”µè¯&quot;</span>);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.bridge;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">//è·å–æŠ˜å å¼æ‰‹æœº (æ ·å¼ + å“ç‰Œ )</span><br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FoldedPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XiaoMi</span>());<br><br>        phone1.open();<br>        phone1.call();<br>        phone1.close();<br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++++++++++&quot;</span>);<br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FoldedPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vivo</span>());<br><br>        phone2.open();<br>        phone2.call();<br>        phone2.close();<br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++&quot;</span>);<br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpRightPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XiaoMi</span>());<br><br>        phone3.open();<br>        phone3.call();<br>        phone3.close();<br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++&quot;</span>);<br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpRightPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Vivo</span>());<br><br>        phone4.open();<br>        phone4.call();<br>        phone4.close();<br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++&quot;</span>);<br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone5</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FoldedPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">iPhone</span>());<br><br>        phone5.open();<br>        phone5.call();<br>        phone5.close();<br><br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++&quot;</span>);<br><br>        <span class="hljs-type">Phone</span> <span class="hljs-variable">phone6</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpRightPhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">iPhone</span>());<br><br>        phone6.open();<br>        phone6.call();<br>        phone6.close();<br><br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++&quot;</span>);<br><br>        <span class="hljs-type">SildePhone</span> <span class="hljs-variable">phone7</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SildePhone</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">XiaoMi</span>());<br><br>        phone7.open();<br>        phone7.call();<br>        phone7.close();<br><br>        System.out.println(<span class="hljs-string">&quot;++++++++++++++&quot;</span>);<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> å°ç±³æ‰‹æœºå¼€æœº </span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå…³æœº </span><br><span class="hljs-section"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++++++++++</span><br><span class="hljs-code"> Vivoæ‰‹æœºå¼€æœº </span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> Vivoæ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> Vivoæ‰‹æœºå…³æœº </span><br><span class="hljs-section"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++</span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå¼€æœº </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå…³æœº </span><br><span class="hljs-section"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++</span><br><span class="hljs-code"> Vivoæ‰‹æœºå¼€æœº </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> Vivoæ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> Vivoæ‰‹æœºå…³æœº </span><br><span class="hljs-section"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++</span><br><span class="hljs-code"> è‹¹æœå¼€æœº</span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> è‹¹æœæ‰“ç”µè¯</span><br><span class="hljs-code"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> è‹¹æœå…³æœº</span><br><span class="hljs-section"> æŠ˜å æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++</span><br><span class="hljs-code"> è‹¹æœå¼€æœº</span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> è‹¹æœæ‰“ç”µè¯</span><br><span class="hljs-code"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> è‹¹æœå…³æœº</span><br><span class="hljs-section"> ç›´ç«‹æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++</span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå¼€æœº </span><br><span class="hljs-code"> æ—‹è½¬æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºæ‰“ç”µè¯ </span><br><span class="hljs-code"> æ—‹è½¬æ ·å¼æ‰‹æœº </span><br><span class="hljs-code"> å°ç±³æ‰‹æœºå…³æœº </span><br><span class="hljs-section"> æ—‹è½¬æ ·å¼æ‰‹æœº </span><br><span class="hljs-section">++++++++++++++</span><br></code></pre></td></tr></table></figure>
<p>æ–°çš„ç±»å›¾</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102151322485.png" srcset="/img/loading.gif" lazyload alt="image-20230102151322485" /></p>
<h3 id="æ¡¥æ¥æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#æ¡¥æ¥æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> æ¡¥æ¥æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h3>
<ol>
<li>
<p>å®ç°äº†æŠ½è±¡å’Œå®ç°éƒ¨åˆ†çš„åˆ†ç¦»ï¼Œä»è€Œæå¤§çš„æä¾›äº†ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œè®©æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†ç‹¬ç«‹å¼€æ¥ï¼Œè¿™æœ‰åŠ©äºç³»ç»Ÿè¿›è¡Œåˆ†å±‚è®¾è®¡ï¼Œä»è€Œäº§ç”Ÿæ›´å¥½çš„ç»“æ„åŒ–ç³»ç»Ÿã€‚</p>
</li>
<li>
<p>å¯¹äºç³»ç»Ÿçš„é«˜å±‚éƒ¨åˆ†ï¼Œåªéœ€è¦çŸ¥é“æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†çš„æ¥å£å°±å¯ä»¥äº†ï¼Œå…¶å®ƒçš„éƒ¨åˆ†ç”±å…·ä½“ä¸šåŠ¡æ¥å®Œæˆã€‚</p>
</li>
<li>
<p><strong>æ¡¥æ¥æ¨¡å¼æ›¿ä»£å¤šå±‚ç»§æ‰¿æ–¹æ¡ˆ</strong>ï¼Œå¯ä»¥å‡å°‘<strong>å­ç±»çš„ä¸ªæ•°</strong>ï¼Œé™ä½ç³»ç»Ÿçš„ç®¡ç†å’Œç»´æŠ¤æˆæœ¬</p>
</li>
<li>
<p>æ¡¥æ¥æ¨¡å¼çš„å¼•å…¥å¢åŠ äº†ç³»ç»Ÿçš„ç†è§£å’Œè®¾è®¡éš¾åº¦ï¼Œç”±äºèšåˆå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…é’ˆå¯¹æŠ½è±¡è¿›è¡Œè®¾è®¡å’Œç¼–ç¨‹</p>
</li>
<li>
<p>æ¡¥æ¥æ¨¡å¼è¦æ±‚<strong>æ­£ç¡®è¯†åˆ«å‡ºç³»ç»Ÿä¸­ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦(æŠ½è±¡ã€å’Œå®ç°)</strong>ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´æœ‰ä¸€å®šçš„å±€é™æ€§ï¼Œå³éœ€è¦æœ‰è¿™æ ·çš„åº”ç”¨åœºæ™¯ã€‚</p>
</li>
<li>
<p>æ¡¥æ¥æ¨¡å¼å…¶å®ƒåº”ç”¨åœºæ™¯å¯¹äºé‚£äº›ä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿï¼Œæ¡¥æ¥æ¨¡å¼å°¤ä¸ºé€‚ç”¨</p>
</li>
</ol>
<h1 id="è£…é¥°å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#è£…é¥°å™¨æ¨¡å¼"></a> ğŸŒ•è£…é¥°å™¨æ¨¡å¼</h1>
<p>è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorPatternï¼‰å…è®¸å‘ä¸€ä¸ªç°æœ‰çš„å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼ŒåŒæ—¶åˆä¸æ”¹å˜å…¶ç»“æ„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæ˜¯ä½œä¸ºç°æœ‰çš„ç±»çš„ä¸€ä¸ªåŒ…è£…ã€‚</p>
<p>è¿™ç§æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªè£…é¥°ç±»ï¼Œç”¨æ¥åŒ…è£…åŸæœ‰çš„ç±»ï¼Œå¹¶åœ¨ä¿æŒç±»æ–¹æ³•ç­¾åå®Œæ•´æ€§çš„å‰æä¸‹ï¼Œæä¾›äº†é¢å¤–çš„åŠŸèƒ½ã€‚</p>
<h2 id="ä»‹ç»-7"><a class="markdownIt-Anchor" href="#ä»‹ç»-7"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬ä¸ºäº†æ‰©å±•ä¸€ä¸ªç±»ç»å¸¸ä½¿ç”¨ç»§æ‰¿æ–¹å¼å®ç°ï¼Œç”±äºç»§æ‰¿ä¸ºç±»å¼•å…¥é™æ€ç‰¹å¾ï¼Œå¹¶ä¸”éšç€æ‰©å±•åŠŸèƒ½çš„å¢å¤šï¼Œå­ç±»ä¼šå¾ˆè†¨èƒ€ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> åœ¨ä¸æƒ³å¢åŠ å¾ˆå¤šå­ç±»çš„æƒ…å†µä¸‹æ‰©å±•ç±»ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†å…·ä½“åŠŸèƒ½èŒè´£åˆ’åˆ†ï¼ŒåŒæ—¶ç»§æ‰¿è£…é¥°è€…æ¨¡å¼ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> 1ã€Component ç±»å……å½“æŠ½è±¡è§’è‰²ï¼Œä¸åº”è¯¥å…·ä½“å®ç°ã€‚ 2ã€ä¿®é¥°ç±»å¼•ç”¨å’Œç»§æ‰¿ Component ç±»ï¼Œå…·ä½“æ‰©å±•ç±»é‡å†™çˆ¶ç±»æ–¹æ³•ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€å­™æ‚Ÿç©ºæœ‰ 72 å˜ï¼Œå½“ä»–å˜æˆ&quot;åº™å®‡&quot;åï¼Œä»–çš„æ ¹æœ¬è¿˜æ˜¯ä¸€åªçŒ´å­ï¼Œä½†æ˜¯ä»–åˆæœ‰äº†åº™å®‡çš„åŠŸèƒ½ã€‚<br />
2ã€ä¸è®ºä¸€å¹…ç”»æœ‰æ²¡æœ‰ç”»æ¡†éƒ½å¯ä»¥æŒ‚åœ¨å¢™ä¸Šï¼Œä½†æ˜¯é€šå¸¸éƒ½æ˜¯æœ‰ç”»æ¡†çš„ï¼Œå¹¶ä¸”å®é™…ä¸Šæ˜¯ç”»æ¡†è¢«æŒ‚åœ¨å¢™ä¸Šã€‚åœ¨æŒ‚åœ¨å¢™ä¸Šä¹‹å‰ï¼Œç”»å¯ä»¥è¢«è’™ä¸Šç»ç’ƒï¼Œè£…åˆ°æ¡†å­é‡Œï¼›è¿™æ—¶ç”»ã€ç»ç’ƒå’Œç”»æ¡†å½¢æˆäº†ä¸€ä¸ªç‰©ä½“ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> è£…é¥°ç±»å’Œè¢«è£…é¥°ç±»å¯ä»¥ç‹¬ç«‹å‘å±•ï¼Œä¸ä¼šç›¸äº’è€¦åˆï¼Œè£…é¥°æ¨¡å¼æ˜¯ç»§æ‰¿çš„ä¸€ä¸ªæ›¿ä»£æ¨¡å¼ï¼Œè£…é¥°æ¨¡å¼å¯ä»¥åŠ¨æ€æ‰©å±•ä¸€ä¸ªå®ç°ç±»çš„åŠŸèƒ½ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> å¤šå±‚è£…é¥°æ¯”è¾ƒå¤æ‚ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€æ‰©å±•ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚ 2ã€åŠ¨æ€å¢åŠ åŠŸèƒ½ï¼ŒåŠ¨æ€æ’¤é”€ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> å¯ä»£æ›¿ç»§æ‰¿ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102172346775.png" srcset="/img/loading.gif" lazyload alt="image-20230102172346775" /></p>
<p>åˆçœ‹ä¸Šå›¾æ„Ÿè§‰è£…é¥°å™¨æ¨¡å¼æœ‰ç‚¹åƒä¿„ç½—æ–¯å¥—å¨ƒï¼Œâ½½è£…é¥°å™¨çš„æ ¸â¼¼å°±æ˜¯å†ä¸æ”¹åŸæœ‰ç±»çš„åŸºç¡€ä¸Šç»™ç±»æ–°å¢åŠŸèƒ½ã€‚<strong>ä¸æ”¹å˜åŸæœ‰ç±»</strong>ï¼Œå¯èƒ½æœ‰çš„â¼©ä¼™ä¼´ä¼šæƒ³åˆ°ç»§æ‰¿ã€AOPåˆ‡â¾¯ï¼Œå½“ç„¶è¿™äº›â½…å¼éƒ½å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä½¿â½¤è£…é¥°å™¨æ¨¡å¼ä¼šæ˜¯å¦å¤–â¼€ç§æ€è·¯æ›´ä¸ºçµæ´»ï¼Œå¯ä»¥é¿å…ç»§æ‰¿å¯¼è‡´çš„â¼¦ç±»è¿‡å¤šï¼Œä¹Ÿå¯ä»¥é¿å…AOPå¸¦æ¥çš„å¤æ‚æ€§ã€‚</p>
<h2 id="å®ç°-5"><a class="markdownIt-Anchor" href="#å®ç°-5"></a> å®ç°</h2>
<p>æ˜Ÿå·´å…‹å’–å•¡è®¢å•é¡¹ç›®ï¼ˆå’–å•¡é¦†ï¼‰ï¼š</p>
<ol>
<li>
<p>å’–å•¡ç§ç±»/å•å“å’–å•¡ï¼šEspresso(æ„å¤§åˆ©æµ“å’–å•¡)ã€ShortBlackã€LongBlack(ç¾å¼å’–å•¡)ã€Decaf(æ— å› å’–å•¡)ã€‚</p>
</li>
<li>
<p>è°ƒæ–™ï¼šMilkã€Soy(è±†æµ†)ã€Chocolateã€‚</p>
</li>
<li>
<p>è¦æ±‚åœ¨æ‰©å±•æ–°çš„å’–å•¡ç§ç±»æ—¶ï¼Œå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§ã€æ”¹åŠ¨æ–¹ä¾¿ã€ç»´æŠ¤æ–¹ä¾¿ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨ OO çš„æ¥è®¡ç®—ä¸åŒç§ç±»å’–å•¡çš„è´¹ç”¨: å®¢æˆ·å¯ä»¥ç‚¹å•å“å’–å•¡ï¼Œä¹Ÿå¯ä»¥å•å“å’–å•¡+è°ƒæ–™ç»„åˆã€‚</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102173756821.png" srcset="/img/loading.gif" lazyload alt="image-20230102173756821" /></p>
<p>ä¸€éƒ¨åˆ†ä»£ç </p>
<p><code>Drink</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Drink</span> &#123;<br><br>    <span class="hljs-keyword">public</span> String des; <span class="hljs-comment">// æè¿°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0f</span>;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> des;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDes</span><span class="hljs-params">(String des)</span> &#123;<br>        <span class="hljs-built_in">this</span>.des = des;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> price;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrice</span><span class="hljs-params">(<span class="hljs-type">float</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-comment">//è®¡ç®—è´¹ç”¨çš„æŠ½è±¡æ–¹æ³•</span><br>    <span class="hljs-comment">//å­ç±»æ¥å®ç°</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">float</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Coffee</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Coffee</span>  <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Drink</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getPrice();<br>   &#125;<br><br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>LongBlack</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LongBlack</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Coffee</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">LongBlack</span><span class="hljs-params">()</span> &#123;<br>      setDes(<span class="hljs-string">&quot; longblack &quot;</span>);<br>      setPrice(<span class="hljs-number">5.0f</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DeCaf</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DeCaf</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Coffee</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">DeCaf</span><span class="hljs-params">()</span> &#123;<br>      setDes(<span class="hljs-string">&quot; æ— å› å’–å•¡ &quot;</span>);<br>      setPrice(<span class="hljs-number">1.0f</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Decorator</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Decorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Drink</span> &#123;<br>    <span class="hljs-keyword">private</span> Drink obj;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Decorator</span><span class="hljs-params">(Drink obj)</span> &#123; <span class="hljs-comment">//ç»„åˆ</span><br>        <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>        <span class="hljs-built_in">this</span>.obj = obj;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        <span class="hljs-comment">// getPrice è‡ªå·±ä»·æ ¼</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getPrice() + obj.cost();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        <span class="hljs-comment">// obj.getDes() è¾“å‡ºè¢«è£…é¥°è€…çš„ä¿¡æ¯</span><br>        <span class="hljs-keyword">return</span> des + <span class="hljs-string">&quot; &quot;</span> + getPrice() + <span class="hljs-string">&quot; &amp;&amp; &quot;</span> + obj.getDes();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Milk</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Milk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Decorator</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Milk</span><span class="hljs-params">(Drink obj)</span> &#123;<br>      <span class="hljs-built_in">super</span>(obj);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      setDes(<span class="hljs-string">&quot; ç‰›å¥¶ &quot;</span>);<br>      setPrice(<span class="hljs-number">2.0f</span>); <br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Chocolate</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-comment">//å…·ä½“çš„Decoratorï¼Œ è¿™é‡Œå°±æ˜¯è°ƒå‘³å“</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Chocolate</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Decorator</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Chocolate</span><span class="hljs-params">(Drink obj)</span> &#123;<br>      <span class="hljs-built_in">super</span>(obj);<br>      setDes(<span class="hljs-string">&quot; å·§å…‹åŠ› &quot;</span>);<br>      setPrice(<span class="hljs-number">3.0f</span>); <span class="hljs-comment">// è°ƒå‘³å“ çš„ä»·æ ¼</span><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>CoffeeBar</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.decorator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CoffeeBar</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è£…é¥°è€…æ¨¡å¼ä¸‹çš„è®¢å•ï¼š2ä»½å·§å…‹åŠ›+ä¸€ä»½ç‰›å¥¶çš„LongBlack</span><br><br>      <span class="hljs-comment">// 1. ç‚¹ä¸€ä»½ LongBlack</span><br>      <span class="hljs-type">Drink</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LongBlack</span>();<br>      System.out.println(<span class="hljs-string">&quot;è´¹ç”¨1=&quot;</span> + order.cost());<br>      System.out.println(<span class="hljs-string">&quot;æè¿°=&quot;</span> + order.getDes());<br><br>      <span class="hljs-comment">// 2. order åŠ å…¥ä¸€ä»½ç‰›å¥¶</span><br>      order = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Milk</span>(order);<br><br>      System.out.println(<span class="hljs-string">&quot;order åŠ å…¥ä¸€ä»½ç‰›å¥¶ è´¹ç”¨ =&quot;</span> + order.cost());<br>      System.out.println(<span class="hljs-string">&quot;order åŠ å…¥ä¸€ä»½ç‰›å¥¶ æè¿° = &quot;</span> + order.getDes());<br><br>      <span class="hljs-comment">// 3. order åŠ å…¥ä¸€ä»½å·§å…‹åŠ›</span><br><br>      order = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chocolate</span>(order);<br><br>      System.out.println(<span class="hljs-string">&quot;order åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥ä¸€ä»½å·§å…‹åŠ›  è´¹ç”¨ =&quot;</span> + order.cost());<br>      System.out.println(<span class="hljs-string">&quot;order åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥ä¸€ä»½å·§å…‹åŠ› æè¿° = &quot;</span> + order.getDes());<br><br>      <span class="hljs-comment">// 3. order åŠ å…¥ä¸€ä»½å·§å…‹åŠ›</span><br><br>      order = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Chocolate</span>(order);<br><br>      System.out.println(<span class="hljs-string">&quot;order åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥2ä»½å·§å…‹åŠ›   è´¹ç”¨ =&quot;</span> + order.cost());<br>      System.out.println(<span class="hljs-string">&quot;order åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥2ä»½å·§å…‹åŠ› æè¿° = &quot;</span> + order.getDes());<br>   <br>      System.out.println(<span class="hljs-string">&quot;===========================&quot;</span>);<br>      <br>      <span class="hljs-type">Drink</span> <span class="hljs-variable">order2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DeCaf</span>();<br>      <br>      System.out.println(<span class="hljs-string">&quot;order2 æ— å› å’–å•¡  è´¹ç”¨ =&quot;</span> + order2.cost());<br>      System.out.println(<span class="hljs-string">&quot;order2 æ— å› å’–å•¡ æè¿° = &quot;</span> + order2.getDes());<br>      <br>      order2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Milk</span>(order2);<br>      <br>      System.out.println(<span class="hljs-string">&quot;order2 æ— å› å’–å•¡ åŠ å…¥ä¸€ä»½ç‰›å¥¶  è´¹ç”¨ =&quot;</span> + order2.cost());<br>      System.out.println(<span class="hljs-string">&quot;order2 æ— å› å’–å•¡ åŠ å…¥ä¸€ä»½ç‰›å¥¶ æè¿° = &quot;</span> + order2.getDes());<br><br>   <br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">è´¹ç”¨<span class="hljs-number">1</span>=<span class="hljs-number">5.0</span><br>æè¿°= longblack <br><span class="hljs-keyword">order</span> <span class="hljs-title">åŠ å…¥ä¸€ä»½ç‰›å¥¶ è´¹ç”¨ =7</span>.<span class="hljs-number">0</span><br><span class="hljs-keyword">order</span> <span class="hljs-title">åŠ å…¥ä¸€ä»½ç‰›å¥¶ æè¿° =  ç‰›å¥¶  2</span>.<span class="hljs-number">0</span> &amp;&amp;  longblack <br><span class="hljs-keyword">order</span> <span class="hljs-title">åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥ä¸€ä»½å·§å…‹åŠ›  è´¹ç”¨ =10</span>.<span class="hljs-number">0</span><br><span class="hljs-keyword">order</span> <span class="hljs-title">åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥ä¸€ä»½å·§å…‹åŠ› æè¿° =  å·§å…‹åŠ›  3</span>.<span class="hljs-number">0</span> &amp;&amp;  ç‰›å¥¶  <span class="hljs-number">2.0</span> &amp;&amp;  longblack <br><span class="hljs-keyword">order</span> <span class="hljs-title">åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥2</span>ä»½å·§å…‹åŠ›   è´¹ç”¨ =<span class="hljs-number">13.0</span><br><span class="hljs-keyword">order</span> <span class="hljs-title">åŠ å…¥ä¸€ä»½ç‰›å¥¶ åŠ å…¥2</span>ä»½å·§å…‹åŠ› æè¿° =  å·§å…‹åŠ›  <span class="hljs-number">3.0</span> &amp;&amp;  å·§å…‹åŠ›  <span class="hljs-number">3.0</span> &amp;&amp;  ç‰›å¥¶  <span class="hljs-number">2.0</span> &amp;&amp;  longblack <br>===========================<br>order2 æ— å› å’–å•¡  è´¹ç”¨ =<span class="hljs-number">1.0</span><br>order2 æ— å› å’–å•¡ æè¿° =  æ— å› å’–å•¡ <br>order2 æ— å› å’–å•¡ åŠ å…¥ä¸€ä»½ç‰›å¥¶  è´¹ç”¨ =<span class="hljs-number">3.0</span><br>order2 æ— å› å’–å•¡ åŠ å…¥ä¸€ä»½ç‰›å¥¶ æè¿° =  ç‰›å¥¶  <span class="hljs-number">2.0</span> &amp;&amp;  æ— å› å’–å•¡ <br></code></pre></td></tr></table></figure>
<h1 id="ç»„åˆæ¨¡å¼"><a class="markdownIt-Anchor" href="#ç»„åˆæ¨¡å¼"></a> ç»„åˆæ¨¡å¼</h1>
<p>ç»„åˆæ¨¡å¼ï¼ˆCompositePatternï¼‰ï¼Œåˆå«éƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œæ˜¯ç”¨äºæŠŠä¸€ç»„ç›¸ä¼¼çš„å¯¹è±¡å½“ä½œä¸€ä¸ªå•ä¸€çš„å¯¹è±¡ã€‚ç»„åˆæ¨¡å¼ä¾æ®æ ‘å½¢ç»“æ„æ¥ç»„åˆå¯¹è±¡ï¼Œç”¨æ¥è¡¨ç¤ºéƒ¨åˆ†ä»¥åŠæ•´ä½“å±‚æ¬¡ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒåˆ›å»ºäº†å¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ã€‚</p>
<p>è¿™ç§æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«è‡ªå·±å¯¹è±¡ç»„çš„ç±»ã€‚è¯¥ç±»æä¾›äº†ä¿®æ”¹ç›¸åŒå¯¹è±¡ç»„çš„æ–¹å¼ã€‚</p>
<h2 id="ä»‹ç»-8"><a class="markdownIt-Anchor" href="#ä»‹ç»-8"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º&quot;éƒ¨åˆ†-æ•´ä½“&quot;çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ï¼Œå³ï¼šç»„åˆèƒ½è®©å®¢æˆ·ä»¥ä¸€è‡´çš„æ–¹å¼å¤„ç†ä¸ªåˆ«å¯¹è±¡ä»¥åŠç»„åˆå¯¹è±¡ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong><br />
å®ƒåœ¨æˆ‘ä»¬æ ‘å‹ç»“æ„çš„é—®é¢˜ä¸­ï¼Œæ¨¡ç³Šäº†ç®€å•å…ƒç´ å’Œå¤æ‚å…ƒç´ çš„æ¦‚å¿µï¼Œå®¢æˆ·ç¨‹åºå¯ä»¥åƒå¤„ç†ç®€å•å…ƒç´ ä¸€æ ·æ¥å¤„ç†å¤æ‚å…ƒç´ ï¼Œä»è€Œä½¿å¾—å®¢æˆ·ç¨‹åºä¸å¤æ‚å…ƒç´ çš„å†…éƒ¨ç»“æ„è§£è€¦ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> 1ã€æ‚¨æƒ³è¡¨ç¤ºå¯¹è±¡çš„éƒ¨åˆ†-æ•´ä½“å±‚æ¬¡ç»“æ„ï¼ˆæ ‘å½¢ç»“æ„ï¼‰ã€‚ 2ã€æ‚¨å¸Œæœ›ç”¨æˆ·å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> æ ‘æå’Œå¶å­å®ç°ç»Ÿä¸€æ¥å£ï¼Œæ ‘æå†…éƒ¨ç»„åˆè¯¥æ¥å£ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> æ ‘æå†…éƒ¨ç»„åˆè¯¥æ¥å£ï¼Œå¹¶ä¸”å«æœ‰å†…éƒ¨å±æ€§ Listï¼Œé‡Œé¢æ”¾ Componentã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€ç®—æœ¯è¡¨è¾¾å¼åŒ…æ‹¬æ“ä½œæ•°ã€æ“ä½œç¬¦å’Œå¦ä¸€ä¸ªæ“ä½œæ•°ï¼Œå…¶ä¸­ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°ä¹Ÿå¯ä»¥æ˜¯æ“ä½œæ•°ã€æ“ä½œç¬¦å’Œå¦ä¸€ä¸ªæ“ä½œæ•°ã€‚ 2ã€åœ¨ JAVA AWT å’Œ SWING ä¸­ï¼Œå¯¹äº Button å’Œ Checkbox æ˜¯æ ‘å¶ï¼ŒContainer æ˜¯æ ‘æã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€é«˜å±‚æ¨¡å—è°ƒç”¨ç®€å•ã€‚ 2ã€èŠ‚ç‚¹è‡ªç”±å¢åŠ ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> åœ¨ä½¿ç”¨ç»„åˆæ¨¡å¼æ—¶ï¼Œå…¶å¶å­å’Œæ ‘æçš„å£°æ˜éƒ½æ˜¯å®ç°ç±»ï¼Œè€Œä¸æ˜¯æ¥å£ï¼Œè¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> éƒ¨åˆ†ã€æ•´ä½“åœºæ™¯ï¼Œå¦‚æ ‘å½¢èœå•ï¼Œæ–‡ä»¶ã€æ–‡ä»¶å¤¹çš„ç®¡ç†ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> å®šä¹‰æ—¶ä¸ºå…·ä½“ç±»ã€‚</p>
<p><strong>ç»„åˆæ¨¡å¼åŸç†ç±»å›¾ï¼š</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102185734930.png" srcset="/img/loading.gif" lazyload alt="image-20230102185734930" /></p>
<p>å¯¹åŸç†ç»“æ„å›¾çš„è¯´æ˜-å³(ç»„åˆæ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p><strong>Component</strong> :è¿™æ˜¯ç»„åˆä¸­å¯¹è±¡å£°æ˜æ¥å£ï¼Œåœ¨é€‚å½“æƒ…å†µä¸‹ï¼Œå®ç°æ‰€æœ‰ç±»å…±æœ‰çš„æ¥å£é»˜è®¤è¡Œä¸º,ç”¨äºè®¿é—®å’Œç®¡ç†Component å­éƒ¨ä»¶, Component å¯ä»¥æ˜¯æŠ½è±¡ç±»æˆ–è€…æ¥å£</p>
</li>
<li>
<p><strong>Leaf :</strong> åœ¨ç»„åˆä¸­è¡¨ç¤ºå¶å­èŠ‚ç‚¹ï¼Œå¶å­èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹</p>
</li>
<li>
<p><strong>Composite</strong> :éå¶å­èŠ‚ç‚¹ï¼Œ ç”¨äºå­˜å‚¨å­éƒ¨ä»¶ï¼Œ åœ¨ Component æ¥å£ä¸­å®ç° å­éƒ¨ä»¶çš„ç›¸å…³æ“ä½œï¼Œæ¯”å¦‚å¢åŠ (add),åˆ é™¤ã€‚</p>
</li>
</ol>
<h2 id="å®ç°-6"><a class="markdownIt-Anchor" href="#å®ç°-6"></a> å®ç°</h2>
<ol>
<li>
<p><strong>ç¼–å†™ç¨‹åº</strong>å±•ç¤ºä¸€ä¸ªå­¦æ ¡é™¢ç³»ç»“æ„ï¼šéœ€æ±‚æ˜¯è¿™æ ·ï¼Œè¦åœ¨ä¸€ä¸ªé¡µé¢ä¸­å±•ç¤ºå‡ºå­¦æ ¡çš„é™¢ç³»ç»„æˆï¼Œä¸€ä¸ªå­¦æ ¡æœ‰å¤šä¸ªå­¦é™¢ï¼Œä¸€ä¸ªå­¦é™¢æœ‰å¤šä¸ªç³»ã€‚</p>
</li>
<li>
<p>æ€è·¯åˆ†æå’Œå›¾è§£(ç±»å›¾)</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102190822334.png" srcset="/img/loading.gif" lazyload alt="image-20230102190822334" /></p>
<p><code>OrganizationComponent</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.composite;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrganizationComponent</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åå­—</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è¯´æ˜</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String des;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> &#123;<br>        <span class="hljs-comment">//é»˜è®¤å®ç°</span><br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> &#123;<br>        <span class="hljs-comment">//é»˜è®¤å®ç°</span><br>        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();<br>    &#125;<br><br>    <span class="hljs-comment">//æ„é€ å™¨</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrganizationComponent</span><span class="hljs-params">(String name, String des)</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.des = des;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> des;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDes</span><span class="hljs-params">(String des)</span> &#123;<br>        <span class="hljs-built_in">this</span>.des = des;<br>    &#125;<br><br>    <span class="hljs-comment">//æ–¹æ³•print, åšæˆæŠ½è±¡çš„, å­ç±»éƒ½éœ€è¦å®ç°</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span>;<br><br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Department</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.composite;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Department</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrganizationComponent</span> &#123;<br><br>   <span class="hljs-comment">//æ²¡æœ‰é›†åˆ</span><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Department</span><span class="hljs-params">(String name, String des)</span> &#123;<br>      <span class="hljs-built_in">super</span>(name, des);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>   &#125;<br><br>   <br>   <span class="hljs-comment">//add , remove å°±ä¸ç”¨å†™äº†ï¼Œå› ä¸ºä»–æ˜¯å¶å­èŠ‚ç‚¹</span><br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getName();<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getDes();<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(getName());<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>College</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.composite;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">College</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrganizationComponent</span> &#123;<br><br>   <span class="hljs-comment">//List ä¸­ å­˜æ”¾çš„Department</span><br>   List&lt;OrganizationComponent&gt; organizationComponents = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;OrganizationComponent&gt;();<br><br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">College</span><span class="hljs-params">(String name, String des)</span> &#123;<br>      <span class="hljs-built_in">super</span>(name, des);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>   &#125;<br><br>   <span class="hljs-comment">// é‡å†™add</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//  å°†æ¥å®é™…ä¸šåŠ¡ä¸­ï¼ŒColleage çš„ add å’Œ  University add ä¸ä¸€å®šå®Œå…¨ä¸€æ ·</span><br>      organizationComponents.add(organizationComponent);<br>   &#125;<br><br>   <span class="hljs-comment">// é‡å†™remove</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      organizationComponents.remove(organizationComponent);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getName();<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getDes();<br>   &#125;<br><br>   <span class="hljs-comment">// printæ–¹æ³•ï¼Œå°±æ˜¯è¾“å‡ºUniversity åŒ…å«çš„å­¦é™¢</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;--------------&quot;</span> + getName() + <span class="hljs-string">&quot;--------------&quot;</span>);<br>      <span class="hljs-comment">//éå† organizationComponents </span><br>      <span class="hljs-keyword">for</span> (OrganizationComponent organizationComponent : organizationComponents) &#123;<br>         organizationComponent.print();<br>      &#125;<br>   &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>University</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.composite;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">//University å°±æ˜¯ Composite , å¯ä»¥ç®¡ç†College</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">University</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OrganizationComponent</span> &#123;<br><br>   List&lt;OrganizationComponent&gt; organizationComponents = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;OrganizationComponent&gt;();<br><br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">University</span><span class="hljs-params">(String name, String des)</span> &#123;<br>      <span class="hljs-built_in">super</span>(name, des);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>   &#125;<br><br>   <span class="hljs-comment">// é‡å†™add</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      organizationComponents.add(organizationComponent);<br>   &#125;<br><br>   <span class="hljs-comment">// é‡å†™remove</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(OrganizationComponent organizationComponent)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      organizationComponents.remove(organizationComponent);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getName();<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDes</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getDes();<br>   &#125;<br><br>   <span class="hljs-comment">// printæ–¹æ³•ï¼Œå°±æ˜¯è¾“å‡ºUniversity åŒ…å«çš„å­¦é™¢</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">print</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;--------------&quot;</span> + getName() + <span class="hljs-string">&quot;--------------&quot;</span>);<br>      <span class="hljs-comment">//éå† organizationComponents </span><br>      <span class="hljs-keyword">for</span> (OrganizationComponent organizationComponent : organizationComponents) &#123;<br>         organizationComponent.print();<br>      &#125;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.composite;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <br>      <span class="hljs-comment">//ä»å¤§åˆ°å°åˆ›å»ºå¯¹è±¡ å­¦æ ¡</span><br>      <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">university</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">University</span>(<span class="hljs-string">&quot;æ¸…åå¤§å­¦&quot;</span>, <span class="hljs-string">&quot; ä¸­å›½é¡¶çº§å¤§å­¦ &quot;</span>);<br>      <br>      <span class="hljs-comment">//åˆ›å»º å­¦é™¢</span><br>      <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">computerCollege</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">College</span>(<span class="hljs-string">&quot;è®¡ç®—æœºå­¦é™¢&quot;</span>, <span class="hljs-string">&quot; è®¡ç®—æœºå­¦é™¢ &quot;</span>);<br>      <span class="hljs-type">OrganizationComponent</span> <span class="hljs-variable">infoEngineercollege</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">College</span>(<span class="hljs-string">&quot;ä¿¡æ¯å·¥ç¨‹å­¦é™¢&quot;</span>, <span class="hljs-string">&quot; ä¿¡æ¯å·¥ç¨‹å­¦é™¢ &quot;</span>);<br>      <br>      <br>      <span class="hljs-comment">//åˆ›å»ºå„ä¸ªå­¦é™¢ä¸‹é¢çš„ç³»(ä¸“ä¸š)</span><br>      computerCollege.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;è½¯ä»¶å·¥ç¨‹&quot;</span>, <span class="hljs-string">&quot; è½¯ä»¶å·¥ç¨‹ä¸é”™ &quot;</span>));<br>      computerCollege.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;ç½‘ç»œå·¥ç¨‹&quot;</span>, <span class="hljs-string">&quot; ç½‘ç»œå·¥ç¨‹ä¸é”™ &quot;</span>));<br>      computerCollege.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯&quot;</span>, <span class="hljs-string">&quot; è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯æ˜¯è€ç‰Œçš„ä¸“ä¸š &quot;</span>));<br>      <br>      <span class="hljs-comment">//</span><br>      infoEngineercollege.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;é€šä¿¡å·¥ç¨‹&quot;</span>, <span class="hljs-string">&quot; é€šä¿¡å·¥ç¨‹ä¸å¥½å­¦ &quot;</span>));<br>      infoEngineercollege.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(<span class="hljs-string">&quot;ä¿¡æ¯å·¥ç¨‹&quot;</span>, <span class="hljs-string">&quot; ä¿¡æ¯å·¥ç¨‹å¥½å­¦ &quot;</span>));<br>      <br>      <span class="hljs-comment">//å°†å­¦é™¢åŠ å…¥åˆ° å­¦æ ¡</span><br>      university.add(computerCollege);<br>      university.add(infoEngineercollege);<br><br>      university.print();<br>      System.out.println(<span class="hljs-string">&quot;~~~~~~~~~~~~~~~~~~~~&quot;</span>);<br>      infoEngineercollege.print();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc">----------------------æ¸…åå¤§å­¦----------------------<br>--------------è®¡ç®—æœºå­¦é™¢--------------<br>è½¯ä»¶å·¥ç¨‹<br>ç½‘ç»œå·¥ç¨‹<br>è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯<br>--------------ä¿¡æ¯å·¥ç¨‹å­¦é™¢--------------<br>é€šä¿¡å·¥ç¨‹<br><span class="hljs-section">ä¿¡æ¯å·¥ç¨‹</span><br><span class="hljs-section">~~~~~~~~~~~~~~~~~~~~</span><br>--------------ä¿¡æ¯å·¥ç¨‹å­¦é™¢--------------<br>é€šä¿¡å·¥ç¨‹<br>ä¿¡æ¯å·¥ç¨‹<br></code></pre></td></tr></table></figure>
<h2 id="ç»„åˆæ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#ç»„åˆæ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> ç»„åˆæ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>ç®€åŒ–å®¢æˆ·ç«¯æ“ä½œã€‚å®¢æˆ·ç«¯åªéœ€è¦é¢å¯¹ä¸€è‡´çš„å¯¹è±¡è€Œä¸ç”¨è€ƒè™‘æ•´ä½“éƒ¨åˆ†æˆ–è€…èŠ‚ç‚¹å¶å­çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p>å…·æœ‰è¾ƒå¼ºçš„æ‰©å±•æ€§ã€‚å½“æˆ‘ä»¬è¦æ›´æ”¹ç»„åˆå¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒæ•´å†…éƒ¨çš„å±‚æ¬¡å…³ç³»ï¼Œå®¢æˆ·ç«¯ä¸ç”¨åšå‡ºä»»ä½•æ”¹åŠ¨.</p>
</li>
<li>
<p>æ–¹ä¾¿åˆ›å»ºå‡ºå¤æ‚çš„å±‚æ¬¡ç»“æ„ã€‚å®¢æˆ·ç«¯ä¸ç”¨ç†ä¼šç»„åˆé‡Œé¢çš„ç»„æˆç»†èŠ‚ï¼Œå®¹æ˜“æ·»åŠ èŠ‚ç‚¹æˆ–è€…å¶å­ä»è€Œåˆ›å»ºå‡ºå¤æ‚çš„æ ‘å½¢ç»“æ„</p>
</li>
<li>
<p>éœ€<strong>è¦éå†ç»„ç»‡æœºæ„ï¼Œæˆ–è€…å¤„ç†çš„å¯¹è±¡å…·æœ‰æ ‘å½¢ç»“æ„æ—¶</strong>, éå¸¸<strong>é€‚åˆä½¿ç”¨ç»„åˆæ¨¡å¼</strong>.</p>
</li>
<li>
<p>è¦æ±‚è¾ƒé«˜çš„æŠ½è±¡æ€§ï¼Œå¦‚æœ<strong>èŠ‚ç‚¹å’Œå¶å­æœ‰å¾ˆå¤šå·®å¼‚æ€§çš„è¯</strong>ï¼Œæ¯”å¦‚å¾ˆå¤šæ–¹æ³•å’Œå±æ€§éƒ½ä¸ä¸€æ ·**ï¼Œä¸é€‚åˆä½¿ç”¨ç»„åˆæ¨¡**å¼</p>
</li>
</ol>
<h1 id="å¤–è§‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#å¤–è§‚æ¨¡å¼"></a> å¤–è§‚æ¨¡å¼</h1>
<p>å¤–è§‚æ¨¡å¼ï¼ˆFacadePatternï¼‰éšè—ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå®¢æˆ·ç«¯å¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ¥å£ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒå‘ç°æœ‰çš„ç³»ç»Ÿæ·»åŠ ä¸€ä¸ªæ¥å£ï¼Œæ¥éšè—ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p>
<p>ä¹Ÿå«é—¨é¢æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-9"><a class="markdownIt-Anchor" href="#ä»‹ç»-9"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå¤–è§‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> é™ä½è®¿é—®å¤æ‚ç³»ç»Ÿçš„å†…éƒ¨å­ç³»ç»Ÿæ—¶çš„å¤æ‚åº¦ï¼Œç®€åŒ–å®¢æˆ·ç«¯ä¹‹é—´çš„æ¥å£ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> 1ã€å®¢æˆ·ç«¯ä¸éœ€è¦çŸ¥é“ç³»ç»Ÿå†…éƒ¨çš„å¤æ‚è”ç³»ï¼Œæ•´ä¸ªç³»ç»Ÿåªéœ€æä¾›ä¸€ä¸ª&quot;æ¥å¾…å‘˜&quot;å³å¯ã€‚ 2ã€å®šä¹‰ç³»ç»Ÿçš„å…¥å£ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å®¢æˆ·ç«¯ä¸ä¸ç³»ç»Ÿè€¦åˆï¼Œå¤–è§‚ç±»ä¸ç³»ç»Ÿè€¦åˆã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> åœ¨å®¢æˆ·ç«¯å’Œå¤æ‚ç³»ç»Ÿä¹‹é—´å†åŠ ä¸€å±‚ï¼Œè¿™ä¸€å±‚å°†è°ƒç”¨é¡ºåºã€ä¾èµ–å…³ç³»ç­‰å¤„ç†å¥½ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€å»åŒ»é™¢çœ‹ç—…ï¼Œå¯èƒ½è¦å»æŒ‚å·ã€é—¨è¯Šã€åˆ’ä»·ã€å–è¯ï¼Œè®©æ‚£è€…æˆ–æ‚£è€…å®¶å±è§‰å¾—å¾ˆå¤æ‚ï¼Œå¦‚æœæœ‰æä¾›æ¥å¾…äººå‘˜ï¼Œåªè®©æ¥å¾…äººå‘˜æ¥å¤„ç†ï¼Œå°±å¾ˆæ–¹ä¾¿ã€‚<br />
2ã€JAVA çš„ä¸‰å±‚å¼€å‘æ¨¡å¼ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å‡å°‘ç³»ç»Ÿç›¸äº’ä¾èµ–ã€‚ 2ã€æé«˜çµæ´»æ€§ã€‚ 3ã€æé«˜äº†å®‰å…¨æ€§ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> ä¸ç¬¦åˆå¼€é—­åŸåˆ™ï¼Œå¦‚æœè¦æ”¹ä¸œè¥¿å¾ˆéº»çƒ¦ï¼Œç»§æ‰¿é‡å†™éƒ½ä¸åˆé€‚ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€ä¸ºå¤æ‚çš„æ¨¡å—æˆ–å­ç³»ç»Ÿæä¾›å¤–ç•Œè®¿é—®çš„æ¨¡å—ã€‚ 2ã€å­ç³»ç»Ÿç›¸å¯¹ç‹¬ç«‹ã€‚ 3ã€é¢„é˜²ä½æ°´å¹³äººå‘˜å¸¦æ¥çš„é£é™©ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> åœ¨å±‚æ¬¡åŒ–ç»“æ„ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤–è§‚æ¨¡å¼å®šä¹‰ç³»ç»Ÿä¸­æ¯ä¸€å±‚çš„å…¥å£ã€‚</p>
<p><strong>å¤–è§‚æ¨¡å¼åŸç†ç±»å›¾:</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102193340583.png" srcset="/img/loading.gif" lazyload alt="image-20230102193340583" /></p>
<p>å¯¹ç±»å›¾è¯´æ˜(åˆ†ç±»å¤–è§‚æ¨¡å¼çš„è§’è‰²)</p>
<ol>
<li>
<p>å¤–è§‚ç±»(Facade): ä¸ºè°ƒç”¨ç«¯á¨€ ä¾›ç»Ÿä¸€çš„è°ƒç”¨æ¥å£, å¤–è§‚ç±»çŸ¥é“å“ªäº›å­ç³»ç»Ÿè´Ÿè´£å¤„ç†è¯·æ±‚,ä»è€Œå°†è°ƒç”¨ç«¯çš„è¯·æ±‚ä»£ç†ç»™é€‚å½“å­ç³»ç»Ÿå¯¹è±¡</p>
</li>
<li>
<p>è°ƒç”¨è€…(Client): å¤–è§‚æ¥å£çš„è°ƒç”¨è€…</p>
</li>
<li>
<p>å­ç³»ç»Ÿçš„é›†åˆï¼šæŒ‡æ¨¡å—æˆ–è€…å­ç³»ç»Ÿï¼Œå¤„ç† Facade å¯¹è±¡æŒ‡æ´¾çš„ä»»åŠ¡ï¼Œä»–æ˜¯åŠŸèƒ½çš„å®é™…<strong>ä¾›è€…</strong></p>
</li>
</ol>
<h2 id="å®ç°-7"><a class="markdownIt-Anchor" href="#å®ç°-7"></a> å®ç°</h2>
<p>ç»„å»ºä¸€ä¸ªå®¶åº­å½±é™¢ï¼š</p>
<p>DVDæ’­æ”¾å™¨ã€æŠ•å½±ä»ªã€è‡ªåŠ¨å±å¹•ã€ç¯ç»•ç«‹ä½“å£°ã€çˆ†ç±³èŠ±æœº,è¦æ±‚å®Œæˆä½¿ç”¨å®¶åº­å½±é™¢çš„åŠŸèƒ½ï¼Œå…¶è¿‡ç¨‹ä¸ºï¼š</p>
<p>ç›´æ¥ç”¨é¥æ§å™¨ï¼šç»Ÿç­¹å„è®¾å¤‡å¼€å…³</p>
<p>å¼€çˆ†ç±³èŠ±æœº</p>
<p>æ”¾ä¸‹å±å¹•</p>
<p>å¼€æŠ•å½±ä»ª</p>
<p>å¼€éŸ³å“</p>
<p>å¼€DVDï¼Œé€‰dvd</p>
<p>å»æ‹¿çˆ†ç±³èŠ±</p>
<p>è°ƒæš—ç¯å…‰</p>
<p>æ’­æ”¾</p>
<p>è§‚å½±ç»“æŸåï¼Œå…³é—­å„ç§è®¾å¤‡</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230102193600188.png" srcset="/img/loading.gif" lazyload alt="image-20230102193600188" /></p>
<p><code>HomeTheaterFacade</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeTheaterFacade</span> &#123;<br>   <br>   <span class="hljs-comment">//å®šä¹‰å„ä¸ªå­ç³»ç»Ÿå¯¹è±¡</span><br>   <span class="hljs-keyword">private</span> TheaterLight theaterLight;<br>   <span class="hljs-keyword">private</span> Popcorn popcorn;<br>   <span class="hljs-keyword">private</span> Stereo stereo;<br>   <span class="hljs-keyword">private</span> Projector projector;<br>   <span class="hljs-keyword">private</span> Screen screen;<br>   <span class="hljs-keyword">private</span> DVDPlayer dVDPlayer;<br>   <br>   <br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">HomeTheaterFacade</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.theaterLight = TheaterLight.getInstance();<br>      <span class="hljs-built_in">this</span>.popcorn = Popcorn.getInstance();<br>      <span class="hljs-built_in">this</span>.stereo = Stereo.getInstance();<br>      <span class="hljs-built_in">this</span>.projector = Projector.getInstance();<br>      <span class="hljs-built_in">this</span>.screen = Screen.getInstance();<br>      <span class="hljs-built_in">this</span>.dVDPlayer = DVDPlayer.getInstanc();<br>   &#125;<br><br>   <span class="hljs-comment">//æ“ä½œåˆ†æˆ 4 æ­¥</span><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">ready</span><span class="hljs-params">()</span> &#123;<br>      popcorn.on();<br>      popcorn.pop();<br>      screen.down();<br>      projector.on();<br>      stereo.on();<br>      dVDPlayer.on();<br>      theaterLight.dim();<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">play</span><span class="hljs-params">()</span> &#123;<br>      dVDPlayer.play();<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pause</span><span class="hljs-params">()</span> &#123;<br>      dVDPlayer.pause();<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">end</span><span class="hljs-params">()</span> &#123;<br>      popcorn.off();<br>      theaterLight.bright();<br>      screen.up();<br>      projector.off();<br>      stereo.off();<br>      dVDPlayer.off();<br>   &#125;   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DVDPlayer</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DVDPlayer</span> &#123;<br>   <br>   <span class="hljs-comment">//ä½¿ç”¨å•ä¾‹æ¨¡å¼, ä½¿ç”¨é¥¿æ±‰å¼</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">DVDPlayer</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DVDPlayer</span>();<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DVDPlayer <span class="hljs-title function_">getInstanc</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> instance;<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; dvd on &quot;</span>);<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; dvd off &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">play</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; dvd is playing &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//....</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pause</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; dvd pause ..&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Popcorn</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Popcorn</span> &#123;<br>   <br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Popcorn</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Popcorn</span>();<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Popcorn <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> instance;<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; popcorn on &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; popcorn ff &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; popcorn is poping  &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Projector</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Projector</span> &#123;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Projector</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Projector</span>();<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Projector <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> instance;<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; Projector on &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; Projector ff &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">focus</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; Projector is Projector  &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//...</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Screen</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span> &#123;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">Screen</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Screen</span>();<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Screen <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> instance;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">up</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; Screen up &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">down</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; Screen down &quot;</span>);<br>   &#125;<br>   <br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TheaterLight</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TheaterLight</span> &#123;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">TheaterLight</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TheaterLight</span>();<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> TheaterLight <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> instance;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; TheaterLight on &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; TheaterLight off &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dim</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; TheaterLight dim.. &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">bright</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; TheaterLight bright.. &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.facade;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-comment">//è¿™é‡Œç›´æ¥è°ƒç”¨ã€‚ã€‚ å¾ˆéº»çƒ¦</span><br>		<span class="hljs-type">HomeTheaterFacade</span> <span class="hljs-variable">homeTheaterFacade</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HomeTheaterFacade</span>();<br>		homeTheaterFacade.ready();<br>		System.out.println(<span class="hljs-string">&quot;~~~~~~~~~~~~~&quot;</span>);<br>		homeTheaterFacade.play();<br>		System.out.println(<span class="hljs-string">&quot;~~~~~~~~~~~~~&quot;</span>);<br>		homeTheaterFacade.end();<br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> popcorn on </span><br><span class="hljs-code"> popcorn is poping  </span><br><span class="hljs-code"> Screen down </span><br><span class="hljs-code"> Projector on </span><br><span class="hljs-code"> Stereo on </span><br><span class="hljs-code"> dvd on </span><br><span class="hljs-section"> TheaterLight dim.. </span><br><span class="hljs-section">~~~~~~~~~~~~~</span><br><span class="hljs-section"> dvd is playing </span><br><span class="hljs-section">~~~~~~~~~~~~~</span><br><span class="hljs-code"> popcorn ff </span><br><span class="hljs-code"> TheaterLight bright.. </span><br><span class="hljs-code"> Screen up </span><br><span class="hljs-code"> Projector ff </span><br><span class="hljs-code"> Screen off </span><br><span class="hljs-code"> dvd off </span><br></code></pre></td></tr></table></figure>
<h2 id="å¤–è§‚æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#å¤–è§‚æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> å¤–è§‚æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>å¤–è§‚æ¨¡å¼å¯¹å¤–å±è”½äº†å­ç³»ç»Ÿçš„ç»†èŠ‚ï¼Œå› æ­¤å¤–è§‚æ¨¡å¼é™ä½äº†å®¢æˆ·ç«¯å¯¹å­ç³»ç»Ÿä½¿ç”¨çš„å¤æ‚æ€§</li>
<li>å¤–è§‚æ¨¡å¼å¯¹å®¢æˆ·ç«¯ä¸å­ç³»ç»Ÿçš„è€¦åˆå…³ç³» - è§£è€¦ï¼Œè®©å­ç³»ç»Ÿå†…éƒ¨çš„æ¨¡å—æ›´æ˜“ç»´æŠ¤å’Œæ‰©å±•</li>
<li>é€šè¿‡åˆç†çš„ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œå¯ä»¥å¸®æˆ‘ä»¬æ›´å¥½çš„åˆ’åˆ†è®¿é—®çš„å±‚æ¬¡</li>
<li>å½“ç³»ç»Ÿéœ€è¦è¿›è¡Œåˆ†å±‚è®¾è®¡æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Facade æ¨¡å¼</li>
<li>åœ¨ç»´æŠ¤ä¸€ä¸ªé—ç•™çš„å¤§å‹ç³»ç»Ÿæ—¶ï¼Œå¯èƒ½è¿™ä¸ªç³»ç»Ÿå·²ç»å˜å¾—éå¸¸éš¾ä»¥ç»´æŠ¤å’Œæ‰©å±•ï¼Œæ­¤æ—¶å¯ä»¥è€ƒè™‘ä¸ºæ–°ç³»ç»Ÿå¼€å‘ä¸€ä¸ªFacade ç±»ï¼Œæ¥æä¾›é—ç•™ç³»ç»Ÿçš„æ¯”è¾ƒæ¸…æ™°ç®€å•çš„æ¥å£ï¼Œè®©æ–°ç³»ç»Ÿä¸ Facade ç±»äº¤äº’ï¼Œæé«˜å¤ç”¨æ€§ã€‚</li>
<li>ä¸èƒ½è¿‡å¤šçš„æˆ–è€…ä¸åˆç†çš„ä½¿ç”¨å¤–è§‚æ¨¡å¼ï¼Œä½¿ç”¨å¤–è§‚æ¨¡å¼å¥½ï¼Œè¿˜æ˜¯ç›´æ¥è°ƒç”¨æ¨¡å—å¥½ã€‚è¦ä»¥è®©ç³»ç»Ÿæœ‰å±‚æ¬¡ï¼Œåˆ©äºç»´æŠ¤ä¸ºç›®çš„ã€‚</li>
</ol>
<h1 id="äº«å…ƒæ¨¡å¼"><a class="markdownIt-Anchor" href="#äº«å…ƒæ¨¡å¼"></a> äº«å…ƒæ¨¡å¼</h1>
<p>äº«å…ƒæ¨¡å¼ï¼ˆFlyweightPatternï¼‰ä¹Ÿå« è‡é‡æ¨¡å¼ä¸»è¦ç”¨äºå‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»¥å‡å°‘å†…å­˜å ç”¨å’Œæé«˜æ€§èƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†å‡å°‘å¯¹è±¡æ•°é‡ä»è€Œæ”¹å–„åº”ç”¨æ‰€éœ€çš„å¯¹è±¡ç»“æ„çš„æ–¹å¼ã€‚</p>
<p>äº«å…ƒæ¨¡å¼å°è¯•é‡ç”¨ç°æœ‰çš„åŒç±»å¯¹è±¡ï¼Œå¦‚æœæœªæ‰¾åˆ°åŒ¹é…çš„å¯¹è±¡ï¼Œåˆ™åˆ›å»ºæ–°å¯¹è±¡ã€‚æˆ‘ä»¬å°†é€šè¿‡åˆ›å»º 5 ä¸ªå¯¹è±¡æ¥ç”»å‡º 20 ä¸ªåˆ†å¸ƒäºä¸åŒä½ç½®çš„åœ†æ¥æ¼”ç¤ºè¿™ç§æ¨¡å¼ã€‚ç”±äºåªæœ‰ 5ç§å¯ç”¨çš„é¢œè‰²ï¼Œæ‰€ä»¥ color å±æ€§è¢«ç”¨æ¥æ£€æŸ¥ç°æœ‰çš„ <em>Circle</em> å¯¹è±¡ã€‚</p>
<h2 id="ä»‹ç»-10"><a class="markdownIt-Anchor" href="#ä»‹ç»-10"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> è¿ç”¨å…±äº«æŠ€æœ¯æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> åœ¨æœ‰å¤§é‡å¯¹è±¡æ—¶ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æº¢å‡ºï¼Œæˆ‘ä»¬æŠŠå…¶ä¸­å…±åŒçš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œå¦‚æœæœ‰ç›¸åŒçš„ä¸šåŠ¡è¯·æ±‚ï¼Œç›´æ¥è¿”å›åœ¨å†…å­˜ä¸­å·²æœ‰çš„å¯¹è±¡ï¼Œé¿å…é‡æ–°åˆ›å»ºã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> 1ã€ç³»ç»Ÿä¸­æœ‰å¤§é‡å¯¹è±¡ã€‚ 2ã€è¿™äº›å¯¹è±¡æ¶ˆè€—å¤§é‡å†…å­˜ã€‚ 3ã€è¿™äº›å¯¹è±¡çš„çŠ¶æ€å¤§éƒ¨åˆ†å¯ä»¥å¤–éƒ¨åŒ–ã€‚4ã€è¿™äº›å¯¹è±¡å¯ä»¥æŒ‰ç…§å†…è•´çŠ¶æ€åˆ†ä¸ºå¾ˆå¤šç»„ï¼Œå½“æŠŠå¤–è•´å¯¹è±¡ä»å¯¹è±¡ä¸­å‰”é™¤å‡ºæ¥æ—¶ï¼Œæ¯ä¸€ç»„å¯¹è±¡éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æ¥ä»£æ›¿ã€‚5ã€ç³»ç»Ÿä¸ä¾èµ–äºè¿™äº›å¯¹è±¡èº«ä»½ï¼Œè¿™äº›å¯¹è±¡æ˜¯ä¸å¯åˆ†è¾¨çš„ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> ç”¨å”¯ä¸€æ ‡è¯†ç åˆ¤æ–­ï¼Œå¦‚æœåœ¨å†…å­˜ä¸­æœ‰ï¼Œåˆ™è¿”å›è¿™ä¸ªå”¯ä¸€æ ‡è¯†ç æ‰€æ ‡è¯†çš„å¯¹è±¡ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> ç”¨ HashMap å­˜å‚¨è¿™äº›å¯¹è±¡ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€JAVA ä¸­çš„ Stringï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ä¿å­˜åœ¨å­—ç¬¦ä¸²ç¼“å­˜æ± é‡Œé¢ã€‚ 2ã€æ•°æ®åº“çš„æ•°æ®æ± ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> å¤§å¤§å‡å°‘å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½ç³»ç»Ÿçš„å†…å­˜ï¼Œä½¿æ•ˆç‡æé«˜ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> æé«˜äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œéœ€è¦åˆ†ç¦»å‡ºå¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºæœ‰åŒ–çš„æ€§è´¨ï¼Œä¸åº”è¯¥éšç€å†…éƒ¨çŠ¶æ€çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå¦åˆ™ä¼šé€ æˆç³»ç»Ÿçš„æ··ä¹±ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€ç³»ç»Ÿæœ‰å¤§é‡ç›¸ä¼¼å¯¹è±¡ã€‚ 2ã€éœ€è¦ç¼“å†²æ± çš„åœºæ™¯ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> 1ã€æ³¨æ„åˆ’åˆ†å¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œå¦åˆ™å¯èƒ½ä¼šå¼•èµ·çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ 2ã€è¿™äº›ç±»å¿…é¡»æœ‰ä¸€ä¸ªå·¥å‚å¯¹è±¡åŠ ä»¥æ§åˆ¶ã€‚</p>
<p><strong>äº«å…ƒæ¨¡å¼çš„åŸç†ç±»å›¾ï¼š</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103100919853.png" srcset="/img/loading.gif" lazyload alt="image-20230103100919853" /></p>
<p>å¯¹åŸç†å›¾çš„è¯´æ˜-å³(æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>FlyWeight æ˜¯æŠ½è±¡çš„äº«å…ƒè§’è‰², ä»–æ˜¯äº§å“çš„æŠ½è±¡ç±», åŒæ—¶å®šä¹‰å‡ºå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€(åé¢ä»‹ç») çš„æ¥å£æˆ–å®ç°</p>
</li>
<li>
<p>ConcreteFlyWeight æ˜¯å…·ä½“çš„äº«å…ƒè§’è‰²ï¼Œæ˜¯å…·ä½“çš„äº§å“ç±»ï¼Œå®ç°æŠ½è±¡è§’è‰²å®šä¹‰ç›¸å…³ä¸šåŠ¡</p>
</li>
<li>
<p>UnSharedConcreteFlyWeight æ˜¯ä¸å¯å…±äº«çš„è§’è‰²ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°åœ¨äº«å…ƒå·¥å‚ã€‚</p>
</li>
<li>
<p>FlyWeightFactory äº«å…ƒå·¥å‚ç±»ï¼Œç”¨äºæ„å»ºä¸€ä¸ªæ± å®¹å™¨(é›†åˆ)ï¼Œ åŒæ—¶æä¾›ä»æ± ä¸­è·å–å¯¹è±¡æ–¹æ³•</p>
</li>
</ol>
<h2 id="å®ç°-8"><a class="markdownIt-Anchor" href="#å®ç°-8"></a> å®ç°</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103110105715.png" srcset="/img/loading.gif" lazyload alt="image-20230103110105715" /></p>
<p><code>WebSite</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.flyweight;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSite</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">(User user)</span>;<span class="hljs-comment">//æŠ½è±¡æ–¹æ³•</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * //å…±äº«æ–¹æ³•</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span></span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> å¸­å­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">showMe</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ¬¢è¿ä½¿ç”¨xtwoyç³»ç»Ÿ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ConcreteWebSite</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.flyweight;<br><br><span class="hljs-comment">//å…·ä½“ç½‘ç«™</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteWebSite</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">WebSite</span> &#123;<br><br>   <span class="hljs-comment">//å…±äº«çš„éƒ¨åˆ†ï¼Œå†…éƒ¨çŠ¶æ€</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">//ç½‘ç«™å‘å¸ƒçš„å½¢å¼(ç±»å‹)</span><br><br>   <br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteWebSite</span><span class="hljs-params">(String type)</span> &#123;<br>      <br>      <span class="hljs-built_in">this</span>.type = type;<br>   &#125;<br><br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">use</span><span class="hljs-params">(User user)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      showMe();<br>      System.out.println(<span class="hljs-string">&quot;ç½‘ç«™çš„å‘å¸ƒå½¢å¼ä¸º:&quot;</span> + type + <span class="hljs-string">&quot; åœ¨ä½¿ç”¨ä¸­ .. ä½¿ç”¨è€…æ˜¯&quot;</span> + user.getName());<br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>WebSiteFactory</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.flyweight;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-comment">// ç½‘ç«™å·¥å‚ç±»ï¼Œæ ¹æ®éœ€è¦è¿”å›å‹ä¸€ä¸ªç½‘ç«™</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebSiteFactory</span> &#123;<br><br>   <br>   <span class="hljs-comment">//é›†åˆï¼Œ å……å½“æ± çš„ä½œç”¨</span><br>   <span class="hljs-keyword">private</span> HashMap&lt;String, ConcreteWebSite&gt; pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>   <br>   <span class="hljs-comment">//æ ¹æ®ç½‘ç«™çš„ç±»å‹ï¼Œè¿”å›ä¸€ä¸ªç½‘ç«™, å¦‚æœæ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªç½‘ç«™ï¼Œå¹¶æ”¾å…¥åˆ°æ± ä¸­,å¹¶è¿”å›</span><br>   <span class="hljs-keyword">public</span> WebSite <span class="hljs-title function_">getWebSiteCategory</span><span class="hljs-params">(String type)</span> &#123;<br>      <span class="hljs-keyword">if</span>(!pool.containsKey(type)) &#123;<br>         <span class="hljs-comment">//å°±åˆ›å»ºä¸€ä¸ªç½‘ç«™ï¼Œå¹¶æ”¾å…¥åˆ°æ± ä¸­</span><br>         pool.put(type, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteWebSite</span>(type));<br>      &#125;<br>      <br>      <span class="hljs-keyword">return</span> (WebSite)pool.get(type);<br>   &#125;<br>   <br>   <span class="hljs-comment">//è·å–ç½‘ç«™åˆ†ç±»çš„æ€»æ•° (æ± ä¸­æœ‰å¤šå°‘ä¸ªç½‘ç«™ç±»å‹)</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getWebSiteCount</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> pool.size();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>User</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.flyweight;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>   <br>   <span class="hljs-keyword">private</span> String name;<br><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String name)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.name = name;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> name;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>      <span class="hljs-built_in">this</span>.name = name;<br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.flyweight;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br><br>      <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå·¥å‚ç±»</span><br>      <span class="hljs-type">WebSiteFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSiteFactory</span>();<br><br>      <span class="hljs-comment">// å®¢æˆ·è¦ä¸€ä¸ªä»¥æ–°é—»å½¢å¼å‘å¸ƒçš„ç½‘ç«™</span><br>      <span class="hljs-type">WebSite</span> <span class="hljs-variable">webSite1</span> <span class="hljs-operator">=</span> factory.getWebSiteCategory(<span class="hljs-string">&quot;æ–°é—»&quot;</span>);<br><br>      <br>      webSite1.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;tom&quot;</span>));<br><br>      <span class="hljs-comment">// å®¢æˆ·è¦ä¸€ä¸ªä»¥åšå®¢å½¢å¼å‘å¸ƒçš„ç½‘ç«™</span><br>      <span class="hljs-type">WebSite</span> <span class="hljs-variable">webSite2</span> <span class="hljs-operator">=</span> factory.getWebSiteCategory(<span class="hljs-string">&quot;åšå®¢&quot;</span>);<br><br>      webSite2.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;jack&quot;</span>));<br><br>      <span class="hljs-comment">// å®¢æˆ·è¦ä¸€ä¸ªä»¥åšå®¢å½¢å¼å‘å¸ƒçš„ç½‘ç«™</span><br>      <span class="hljs-type">WebSite</span> <span class="hljs-variable">webSite3</span> <span class="hljs-operator">=</span> factory.getWebSiteCategory(<span class="hljs-string">&quot;åšå®¢&quot;</span>);<br><br>      webSite3.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;smith&quot;</span>));<br><br>      <span class="hljs-comment">// å®¢æˆ·è¦ä¸€ä¸ªä»¥åšå®¢å½¢å¼å‘å¸ƒçš„ç½‘ç«™</span><br>      <span class="hljs-type">WebSite</span> <span class="hljs-variable">webSite4</span> <span class="hljs-operator">=</span> factory.getWebSiteCategory(<span class="hljs-string">&quot;åšå®¢&quot;</span>);<br><br>      webSite4.use(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;king&quot;</span>));<br>      <br>      System.out.println(<span class="hljs-string">&quot;ç½‘ç«™çš„åˆ†ç±»å…±=&quot;</span> + factory.getWebSiteCount());<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli">æ¬¢è¿ä½¿ç”¨xtwoyç³»ç»Ÿ<br>ç½‘ç«™çš„å‘å¸ƒå½¢å¼ä¸º:æ–°é—» åœ¨ä½¿ç”¨ä¸­ <span class="hljs-string">..</span> ä½¿ç”¨è€…æ˜¯tom<br>æ¬¢è¿ä½¿ç”¨xtwoyç³»ç»Ÿ<br>ç½‘ç«™çš„å‘å¸ƒå½¢å¼ä¸º:åšå®¢ åœ¨ä½¿ç”¨ä¸­ <span class="hljs-string">..</span> ä½¿ç”¨è€…æ˜¯jack<br>æ¬¢è¿ä½¿ç”¨xtwoyç³»ç»Ÿ<br>ç½‘ç«™çš„å‘å¸ƒå½¢å¼ä¸º:åšå®¢ åœ¨ä½¿ç”¨ä¸­ <span class="hljs-string">..</span> ä½¿ç”¨è€…æ˜¯smith<br>æ¬¢è¿ä½¿ç”¨xtwoyç³»ç»Ÿ<br>ç½‘ç«™çš„å‘å¸ƒå½¢å¼ä¸º:åšå®¢ åœ¨ä½¿ç”¨ä¸­ <span class="hljs-string">..</span> ä½¿ç”¨è€…æ˜¯king<br>ç½‘ç«™çš„åˆ†ç±»å…±=2<br></code></pre></td></tr></table></figure>
<h2 id="äº«å…ƒæ¨¡å¼åœ¨-jdk-interger-çš„åº”ç”¨æºç åˆ†æ"><a class="markdownIt-Anchor" href="#äº«å…ƒæ¨¡å¼åœ¨-jdk-interger-çš„åº”ç”¨æºç åˆ†æ"></a> äº«å…ƒæ¨¡å¼åœ¨ JDK-Interger çš„åº”ç”¨æºç åˆ†æ</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.atguigu.jdk;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FlyWeight</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//å¦‚æœ Integer.valueOf(x) x åœ¨  -128 --- 127 ç›´æ¥ï¼Œå°±æ˜¯ä½¿ç”¨äº«å…ƒæ¨¡å¼è¿”å›,å¦‚æœä¸åœ¨</span><br>      <span class="hljs-comment">//èŒƒå›´ç±»ï¼Œåˆ™ä»ç„¶ new </span><br>      <br>      <span class="hljs-comment">//å°ç»“:</span><br>      <span class="hljs-comment">//1. åœ¨valueOf æ–¹æ³•ä¸­ï¼Œå…ˆåˆ¤æ–­å€¼æ˜¯å¦åœ¨ IntegerCache ä¸­ï¼Œå¦‚æœä¸åœ¨ï¼Œå°±åˆ›å»ºæ–°çš„Integer(new), å¦åˆ™ï¼Œå°±ç›´æ¥ä» ç¼“å­˜æ± è¿”å›</span><br>      <span class="hljs-comment">//2. valueOf æ–¹æ³•ï¼Œå°±ä½¿ç”¨åˆ°äº«å…ƒæ¨¡å¼</span><br>      <span class="hljs-comment">//3. å¦‚æœä½¿ç”¨valueOf æ–¹æ³•å¾—åˆ°ä¸€ä¸ªInteger å®ä¾‹ï¼ŒèŒƒå›´åœ¨ -128 - 127 ï¼Œæ‰§è¡Œé€Ÿåº¦æ¯” new å¿«</span><br>      <br>      <br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">x</span> <span class="hljs-operator">=</span> Integer.valueOf(<span class="hljs-number">127</span>); <span class="hljs-comment">// å¾—åˆ° xå®ä¾‹ï¼Œç±»å‹ Integer</span><br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">y</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>); <span class="hljs-comment">// å¾—åˆ° y å®ä¾‹ï¼Œç±»å‹ Integer</span><br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">z</span> <span class="hljs-operator">=</span> Integer.valueOf(<span class="hljs-number">127</span>);<span class="hljs-comment">//..</span><br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">127</span>);<br>      <br>      <br>      System.out.println(x.equals(y)); <span class="hljs-comment">// å¤§å°ï¼Œtrue</span><br>      System.out.println(x == y ); <span class="hljs-comment">//  false</span><br>      System.out.println(x == z ); <span class="hljs-comment">// true</span><br>      System.out.println(w == x ); <span class="hljs-comment">// false</span><br>      System.out.println(w == y ); <span class="hljs-comment">// false</span><br>      <br>      <br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">x1</span> <span class="hljs-operator">=</span> Integer.valueOf(<span class="hljs-number">200</span>);<br>      <span class="hljs-type">Integer</span> <span class="hljs-variable">x2</span> <span class="hljs-operator">=</span> Integer.valueOf(<span class="hljs-number">200</span>);<br>      System.out.println(<span class="hljs-string">&quot;x1==x2&quot;</span> + (x1 == x2)); <span class="hljs-comment">// false</span><br><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103111534525.png" srcset="/img/loading.gif" lazyload alt="image-20230103111534525" /></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103111520047.png" srcset="/img/loading.gif" lazyload alt="image-20230103111516626" /></p>
<h2 id="äº«å…ƒæ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#äº«å…ƒæ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> äº«å…ƒæ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>åœ¨äº«å…ƒæ¨¡å¼è¿™æ ·ç†è§£ï¼Œâ€œäº«â€å°±è¡¨ç¤ºå…±äº«ï¼Œâ€œå…ƒâ€è¡¨ç¤ºå¯¹è±¡</p>
</li>
<li>
<p>ç³»ç»Ÿä¸­æœ‰å¤§é‡å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡æ¶ˆè€—å¤§é‡å†…å­˜ï¼Œå¹¶ä¸”å¯¹è±¡çš„çŠ¶æ€å¤§éƒ¨åˆ†å¯ä»¥å¤–éƒ¨åŒ–æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è€ƒè™‘é€‰ç”¨äº«å…ƒæ¨¡å¼</p>
</li>
<li>
<p>ç”¨å”¯ä¸€æ ‡è¯†ç åˆ¤æ–­ï¼Œå¦‚æœåœ¨å†…å­˜ä¸­æœ‰ï¼Œåˆ™è¿”å›è¿™ä¸ªå”¯ä¸€æ ‡è¯†ç æ‰€æ ‡è¯†çš„å¯¹è±¡ï¼Œç”¨ HashMap/HashTable å­˜å‚¨</p>
</li>
<li>
<p>äº«å…ƒæ¨¡å¼å¤§å¤§å‡å°‘äº†å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½äº†ç¨‹åºå†…å­˜çš„å ç”¨ï¼Œæé«˜æ•ˆç‡</p>
</li>
<li>
<p>äº«å…ƒæ¨¡å¼æé«˜äº†<strong>ç³»ç»Ÿçš„å¤æ‚åº¦</strong>ã€‚éœ€è¦åˆ†ç¦»å‡º<strong>å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€</strong>ï¼Œè€Œå¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºåŒ–ç‰¹æ€§ï¼Œä¸åº”è¯¥éšç€å†…éƒ¨çŠ¶æ€çš„æ”¹å˜è€Œæ”¹å˜ï¼Œè¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨äº«å…ƒæ¨¡å¼éœ€è¦æ³¨æ„çš„åœ°æ–¹.</p>
</li>
<li>
<p>ä½¿ç”¨äº«å…ƒæ¨¡å¼æ—¶ï¼Œæ³¨æ„åˆ’åˆ†å†…éƒ¨çŠ¶æ€å’Œå¤–éƒ¨çŠ¶æ€ï¼Œå¹¶ä¸”éœ€è¦æœ‰ä¸€ä¸ªå·¥å‚ç±»åŠ ä»¥æ§åˆ¶ã€‚</p>
</li>
<li>
<p>äº«å…ƒæ¨¡å¼ç»å…¸çš„åº”ç”¨åœºæ™¯æ˜¯éœ€è¦ç¼“å†²æ± çš„åœºæ™¯ï¼Œæ¯”å¦‚ String å¸¸é‡æ± ã€æ•°æ®åº“è¿æ¥æ± </p>
</li>
</ol>
<h1 id="ä»£ç†æ¨¡å¼"><a class="markdownIt-Anchor" href="#ä»£ç†æ¨¡å¼"></a> ğŸŒ—ä»£ç†æ¨¡å¼</h1>
<p>åœ¨ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰ä¸­ï¼Œä¸€ä¸ªç±»ä»£è¡¨å¦ä¸€ä¸ªç±»çš„åŠŸèƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºç»“æ„å‹æ¨¡å¼ã€‚</p>
<p>åœ¨ä»£ç†æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºå…·æœ‰ç°æœ‰å¯¹è±¡çš„å¯¹è±¡ï¼Œä»¥ä¾¿å‘å¤–ç•Œæä¾›åŠŸèƒ½æ¥å£ã€‚</p>
<h2 id="ä»‹ç»-11"><a class="markdownIt-Anchor" href="#ä»‹ç»-11"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong><br />
åœ¨ç›´æ¥è®¿é—®å¯¹è±¡æ—¶å¸¦æ¥çš„é—®é¢˜ï¼Œæ¯”å¦‚è¯´ï¼šè¦è®¿é—®çš„å¯¹è±¡åœ¨è¿œç¨‹çš„æœºå™¨ä¸Šã€‚åœ¨é¢å‘å¯¹è±¡ç³»ç»Ÿä¸­ï¼Œæœ‰äº›å¯¹è±¡ç”±äºæŸäº›åŸå› ï¼ˆæ¯”å¦‚å¯¹è±¡åˆ›å»ºå¼€é”€å¾ˆå¤§ï¼Œæˆ–è€…æŸäº›æ“ä½œéœ€è¦å®‰å…¨æ§åˆ¶ï¼Œæˆ–è€…éœ€è¦è¿›ç¨‹å¤–çš„è®¿é—®ï¼‰ï¼Œç›´æ¥è®¿é—®ä¼šç»™ä½¿ç”¨è€…æˆ–è€…ç³»ç»Ÿç»“æ„å¸¦æ¥å¾ˆå¤šéº»çƒ¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è®¿é—®æ­¤å¯¹è±¡æ—¶åŠ ä¸Šä¸€ä¸ªå¯¹æ­¤å¯¹è±¡çš„è®¿é—®å±‚ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> æƒ³åœ¨è®¿é—®ä¸€ä¸ªç±»æ—¶åšä¸€äº›æ§åˆ¶ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å¢åŠ ä¸­é—´å±‚ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å®ç°ä¸è¢«ä»£ç†ç±»ç»„åˆã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€Windows é‡Œé¢çš„å¿«æ·æ–¹å¼ã€‚2ã€çŒªå…«æˆ’å»æ‰¾é«˜ç¿ å…°ç»“æœæ˜¯å­™æ‚Ÿç©ºå˜çš„ï¼Œå¯ä»¥è¿™æ ·ç†è§£ï¼šæŠŠé«˜ç¿ å…°çš„å¤–è²ŒæŠ½è±¡å‡ºæ¥ï¼Œé«˜ç¿ å…°æœ¬äººå’Œå­™æ‚Ÿç©ºéƒ½å®ç°äº†è¿™ä¸ªæ¥å£ï¼ŒçŒªå…«æˆ’è®¿é—®é«˜ç¿ å…°çš„æ—¶å€™çœ‹ä¸å‡ºæ¥è¿™ä¸ªæ˜¯å­™æ‚Ÿç©ºï¼Œæ‰€ä»¥è¯´å­™æ‚Ÿç©ºæ˜¯é«˜ç¿ å…°ä»£ç†ç±»ã€‚3ã€ä¹°ç«è½¦ç¥¨ä¸ä¸€å®šåœ¨ç«è½¦ç«™ä¹°ï¼Œä¹Ÿå¯ä»¥å»ä»£å”®ç‚¹ã€‚ 4ã€ä¸€å¼ æ”¯ç¥¨æˆ–é“¶è¡Œå­˜å•æ˜¯è´¦æˆ·ä¸­èµ„é‡‘çš„ä»£ç†ã€‚æ”¯ç¥¨åœ¨å¸‚åœºäº¤æ˜“ä¸­ç”¨æ¥ä»£æ›¿ç°é‡‘ï¼Œå¹¶æä¾›å¯¹ç­¾å‘äººè´¦å·ä¸Šèµ„é‡‘çš„æ§åˆ¶ã€‚5ã€spring aopã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€èŒè´£æ¸…æ™°ã€‚ 2ã€é«˜æ‰©å±•æ€§ã€‚ 3ã€æ™ºèƒ½åŒ–ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€ç”±äºåœ¨å®¢æˆ·ç«¯å’ŒçœŸå®ä¸»é¢˜ä¹‹é—´å¢åŠ äº†ä»£ç†å¯¹è±¡ï¼Œå› æ­¤æœ‰äº›ç±»å‹çš„ä»£ç†æ¨¡å¼å¯èƒ½ä¼šé€ æˆè¯·æ±‚çš„å¤„ç†é€Ÿåº¦å˜æ…¢ã€‚2ã€å®ç°ä»£ç†æ¨¡å¼éœ€è¦é¢å¤–çš„å·¥ä½œï¼Œæœ‰äº›ä»£ç†æ¨¡å¼çš„å®ç°éå¸¸å¤æ‚ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> æŒ‰èŒè´£æ¥åˆ’åˆ†ï¼Œé€šå¸¸æœ‰ä»¥ä¸‹ä½¿ç”¨åœºæ™¯ï¼š 1ã€è¿œç¨‹ä»£ç†ã€‚ 2ã€è™šæ‹Ÿä»£ç†ã€‚ 3ã€Copy-on-Write ä»£ç†ã€‚ 4ã€ä¿æŠ¤ï¼ˆProtector Accessï¼‰ä»£ç†ã€‚ 5ã€Cacheä»£ç†ã€‚ 6ã€é˜²ç«å¢™ï¼ˆFirewallï¼‰ä»£ç†ã€‚ 7ã€åŒæ­¥åŒ–ï¼ˆSynchronizationï¼‰ä»£ç†ã€‚8ã€æ™ºèƒ½å¼•ç”¨ï¼ˆSmart Referenceï¼‰ä»£ç†ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> 1ã€å’Œé€‚é…å™¨æ¨¡å¼çš„åŒºåˆ«ï¼šé€‚é…å™¨æ¨¡å¼ä¸»è¦æ”¹å˜æ‰€è€ƒè™‘å¯¹è±¡çš„æ¥å£ï¼Œè€Œä»£ç†æ¨¡å¼ä¸èƒ½æ”¹å˜æ‰€ä»£ç†ç±»çš„æ¥å£ã€‚2ã€å’Œè£…é¥°å™¨æ¨¡å¼çš„åŒºåˆ«ï¼šè£…é¥°å™¨æ¨¡å¼ä¸ºäº†å¢å¼ºåŠŸèƒ½ï¼Œè€Œä»£ç†æ¨¡å¼æ˜¯ä¸ºäº†åŠ ä»¥æ§åˆ¶ã€‚</p>
<h2 id="å®ç°-9"><a class="markdownIt-Anchor" href="#å®ç°-9"></a> å®ç°</h2>
<h3 id="é™æ€ä»£ç†"><a class="markdownIt-Anchor" href="#é™æ€ä»£ç†"></a> é™æ€ä»£ç†</h3>
<blockquote>
<p>é™æ€ä»£ç æ¨¡å¼çš„åŸºæœ¬ä»‹ç»</p>
</blockquote>
<p>é™æ€ä»£ç†åœ¨ä½¿ç”¨æ—¶,éœ€è¦å®šä¹‰æ¥å£æˆ–è€…çˆ¶ç±»,è¢«ä»£ç†å¯¹è±¡(å³ç›®æ ‡å¯¹è±¡)ä¸ä»£ç†å¯¹è±¡ä¸€èµ·å®ç°ç›¸åŒçš„æ¥å£æˆ–è€…æ˜¯ç»§æ‰¿ç›¸åŒçˆ¶ç±»</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103144345369.png" srcset="/img/loading.gif" lazyload alt="image-20230103144345369" /></p>
<p><code>ITeacherDao.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.staticproxy;<br><br><br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ITeacherDao</span> &#123;<br>   <br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>; <span class="hljs-comment">// æˆè¯¾çš„æ–¹æ³•</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TeacherDao.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.staticproxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDao</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ITeacherDao</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; è€å¸ˆæˆè¯¾ä¸­  ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TeacherDaoProxy.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.staticproxy;<br><br><span class="hljs-comment">//ä»£ç†å¯¹è±¡,é™æ€ä»£ç†</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDaoProxy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ITeacherDao</span>&#123;<br>   <br>   <span class="hljs-keyword">private</span> ITeacherDao target; <span class="hljs-comment">// ç›®æ ‡å¯¹è±¡ï¼Œé€šè¿‡æ¥å£æ¥èšåˆ</span><br>   <br>   <br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">TeacherDaoProxy</span><span class="hljs-params">(ITeacherDao target)</span> &#123;<br>      <span class="hljs-built_in">this</span>.target = target;<br>   &#125;<br><br><br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;å¼€å§‹ä»£ç†  å®ŒæˆæŸäº›æ“ä½œã€‚ã€‚ã€‚ã€‚ã€‚ &quot;</span>);<span class="hljs-comment">//æ–¹æ³•</span><br>      target.teach();<br>      System.out.println(<span class="hljs-string">&quot;æäº¤ã€‚ã€‚ã€‚ã€‚ã€‚&quot;</span>);<span class="hljs-comment">//æ–¹æ³•</span><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.staticproxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºç›®æ ‡å¯¹è±¡(è¢«ä»£ç†å¯¹è±¡)</span><br>      <span class="hljs-type">TeacherDao</span> <span class="hljs-variable">teacherDao</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDao</span>();<br>      <br>      <span class="hljs-comment">//åˆ›å»ºä»£ç†å¯¹è±¡, åŒæ—¶å°†è¢«ä»£ç†å¯¹è±¡ä¼ é€’ç»™ä»£ç†å¯¹è±¡</span><br>      <span class="hljs-type">TeacherDaoProxy</span> <span class="hljs-variable">teacherDaoProxy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDaoProxy</span>(teacherDao);<br>      <br>      <span class="hljs-comment">//é€šè¿‡ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨åˆ°è¢«ä»£ç†å¯¹è±¡çš„æ–¹æ³•</span><br>      <span class="hljs-comment">//å³ï¼šæ‰§è¡Œçš„æ˜¯ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œä»£ç†å¯¹è±¡å†å»è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³• </span><br>      teacherDaoProxy.teach();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs">å¼€å§‹ä»£ç†  å®ŒæˆæŸäº›æ“ä½œã€‚ã€‚ã€‚ã€‚ã€‚ <br> è€å¸ˆæˆè¯¾ä¸­  ã€‚ã€‚ã€‚ã€‚ã€‚<br>æäº¤ã€‚ã€‚ã€‚ã€‚ã€‚<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>é™æ€ä»£ç†ä¼˜ç¼ºç‚¹</p>
</blockquote>
<ol>
<li>
<p>ä¼˜ç‚¹ï¼šåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡çš„åŠŸèƒ½å‰æä¸‹, èƒ½é€šè¿‡ä»£ç†å¯¹è±¡å¯¹ç›®æ ‡åŠŸèƒ½æ‰©å±•</p>
</li>
<li>
<p>ç¼ºç‚¹ï¼šå› ä¸ºä»£ç†å¯¹è±¡éœ€è¦ä¸ç›®æ ‡å¯¹è±¡å®ç°ä¸€æ ·çš„æ¥å£,æ‰€ä»¥ä¼šæœ‰å¾ˆå¤šä»£ç†ç±»</p>
</li>
<li>
<p>ä¸€æ—¦æ¥å£å¢åŠ æ–¹æ³•,ç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦ç»´æŠ¤</p>
</li>
</ol>
<h3 id="åŠ¨æ€ä»£ç†"><a class="markdownIt-Anchor" href="#åŠ¨æ€ä»£ç†"></a> åŠ¨æ€ä»£ç†</h3>
<blockquote>
<p>åŠ¨æ€ä»£ç†æ¨¡å¼çš„åŸºæœ¬ä»‹ç»</p>
</blockquote>
<ol>
<li>ä»£ç†å¯¹è±¡,ä¸éœ€è¦å®ç°æ¥å£ï¼Œä½†æ˜¯ç›®æ ‡å¯¹è±¡è¦å®ç°æ¥å£ï¼Œå¦åˆ™ä¸èƒ½ç”¨åŠ¨æ€ä»£ç†</li>
<li>ä»£ç†å¯¹è±¡çš„ç”Ÿæˆï¼Œæ˜¯åˆ©ç”¨ JDK çš„ APIï¼ŒåŠ¨æ€çš„åœ¨å†…å­˜ä¸­æ„å»ºä»£ç†å¯¹è±¡</li>
<li>åŠ¨æ€ä»£ç†ä¹Ÿå«åšï¼šJDK ä»£ç†ã€æ¥å£ä»£ç†</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103144507077.png" srcset="/img/loading.gif" lazyload alt="image-20230103144507077" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.dynamic;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºç›®æ ‡å¯¹è±¡</span><br>      <span class="hljs-type">ITeacherDao</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDao</span>();<br>      <br>      <span class="hljs-comment">//ç»™ç›®æ ‡å¯¹è±¡ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡, å¯ä»¥è½¬æˆ ITeacherDao</span><br>      <span class="hljs-type">ITeacherDao</span> <span class="hljs-variable">proxyInstance</span> <span class="hljs-operator">=</span> (ITeacherDao)<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>(target).getProxyInstance();<br>   <br>      <span class="hljs-comment">// proxyInstance=class com.sun.proxy.$Proxy0 å†…å­˜ä¸­åŠ¨æ€ç”Ÿæˆäº†ä»£ç†å¯¹è±¡</span><br>      System.out.println(<span class="hljs-string">&quot;proxyInstance=&quot;</span> + proxyInstance.getClass());<br>      <br>      <span class="hljs-comment">//é€šè¿‡ä»£ç†å¯¹è±¡ï¼Œè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><br>      proxyInstance.teach();<br>      <br>      proxyInstance.sayHello(<span class="hljs-string">&quot; tom &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ITeacherDao.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.dynamic;<br><br><span class="hljs-comment">//æ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ITeacherDao</span> &#123;<br><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span>; <span class="hljs-comment">// æˆè¯¾æ–¹æ³•</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">(String name)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ProxyFactory.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.dynamic;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.InvocationHandler;<br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><span class="hljs-keyword">import</span> java.lang.reflect.Proxy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> &#123;<br><br>   <span class="hljs-comment">//ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡ , Object</span><br>   <span class="hljs-keyword">private</span> Object target;<br><br>   <span class="hljs-comment">//æ„é€ å™¨ ï¼Œ å¯¹target è¿›è¡Œåˆå§‹åŒ–</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object target)</span> &#123;<br>      <br>      <span class="hljs-built_in">this</span>.target = target;<br>   &#125; <br>   <br>   <span class="hljs-comment">//ç»™ç›®æ ‡å¯¹è±¡ ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">()</span> &#123;<br>      <br>      <span class="hljs-comment">//è¯´æ˜</span><br>      <span class="hljs-comment">/*</span><br><span class="hljs-comment">       *  public static Object newProxyInstance(ClassLoader loader,</span><br><span class="hljs-comment">                                          Class&lt;?&gt;[] interfaces,</span><br><span class="hljs-comment">                                          InvocationHandler h)</span><br><span class="hljs-comment">                                          </span><br><span class="hljs-comment">            //1. ClassLoader loader ï¼š æŒ‡å®šå½“å‰ç›®æ ‡å¯¹è±¡ä½¿ç”¨çš„ç±»åŠ è½½å™¨, è·å–åŠ è½½å™¨çš„æ–¹æ³•å›ºå®š</span><br><span class="hljs-comment">            //2. Class&lt;?&gt;[] interfaces: ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£ç±»å‹ï¼Œä½¿ç”¨æ³›å‹æ–¹æ³•ç¡®è®¤ç±»å‹</span><br><span class="hljs-comment">            //3. InvocationHandler h : äº‹æƒ…å¤„ç†ï¼Œæ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶ï¼Œä¼šè§¦å‘äº‹æƒ…å¤„ç†å™¨æ–¹æ³•, ä¼šæŠŠå½“å‰æ‰§è¡Œçš„ç›®æ ‡å¯¹è±¡æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥</span><br><span class="hljs-comment">       */</span><br>      <span class="hljs-keyword">return</span> Proxy.newProxyInstance(target.getClass().getClassLoader(), <br>            target.getClass().getInterfaces(), <br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() &#123;<br>               <br>               <span class="hljs-meta">@Override</span><br>               <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>                  <span class="hljs-comment">// TODO Auto-generated method stub</span><br>                  System.out.println(<span class="hljs-string">&quot;JDKä»£ç†å¼€å§‹~~&quot;</span>);<br>                  <span class="hljs-comment">//åå°„æœºåˆ¶è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><br>                  <span class="hljs-type">Object</span> <span class="hljs-variable">returnVal</span> <span class="hljs-operator">=</span> method.invoke(target, args);<br>                  System.out.println(<span class="hljs-string">&quot;JDKä»£ç†æäº¤&quot;</span>);<br>                  <span class="hljs-keyword">return</span> returnVal;<br>               &#125;<br>            &#125;); <br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TeacherDao.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.dynamic;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDao</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ITeacherDao</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; è€å¸ˆæˆè¯¾ä¸­.... &quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sayHello</span><span class="hljs-params">(String name)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;hello &quot;</span> + name);<br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">proxyInstance=class com.sun.proxy.$Proxy0<br><span class="hljs-keyword">JDKä»£ç†å¼€å§‹~~</span><br><span class="hljs-keyword"></span> è€å¸ˆæˆè¯¾ä¸­.... <br><span class="hljs-keyword">JDKä»£ç†æäº¤</span><br><span class="hljs-keyword"></span><span class="hljs-keyword">JDKä»£ç†å¼€å§‹~~</span><br><span class="hljs-keyword"></span>hello  tom <br><span class="hljs-keyword">JDKä»£ç†æäº¤</span><br></code></pre></td></tr></table></figure>
<h3 id="cglib-ä»£ç†"><a class="markdownIt-Anchor" href="#cglib-ä»£ç†"></a> Cglib ä»£ç†</h3>
<blockquote>
<p>Cglib ä»£ç†æ¨¡å¼çš„åŸºæœ¬ä»‹ç»</p>
</blockquote>
<ol>
<li>
<p>é™æ€ä»£ç†å’Œ JDK ä»£ç†æ¨¡å¼éƒ½è¦æ±‚ç›®æ ‡å¯¹è±¡æ˜¯å®ç°ä¸€ä¸ªæ¥å£,ä½†æ˜¯æœ‰æ—¶å€™ç›®æ ‡å¯¹è±¡åªæ˜¯ä¸€ä¸ª<strong>å•ç‹¬çš„å¯¹è±¡</strong>,å¹¶æ²¡<strong>æœ‰å®****ç°ä»»ä½•çš„æ¥å£</strong>,è¿™ä¸ªæ—¶å€™å¯ä½¿ç”¨ç›®æ ‡å¯¹è±¡å­ç±»æ¥å®ç°ä»£ç†-è¿™å°±æ˜¯ <strong>Cglib ä»£ç†</strong></p>
</li>
<li>
<p>Cglibä»£ç†ä¹Ÿå«ä½œ**å­ç±»ä»£ç†,**å®ƒæ˜¯åœ¨å†…å­˜ä¸­æ„å»ºä¸€ä¸ªå­ç±»å¯¹è±¡ä»è€Œå®ç°å¯¹ç›®æ ‡å¯¹è±¡åŠŸèƒ½æ‰©å±•, æœ‰äº›ä¹¦ä¹Ÿå°†Cglibä»£ç†å½’å±åˆ°åŠ¨æ€ä»£ç†ã€‚</p>
</li>
<li>
<p>Cglib æ˜¯ä¸€ä¸ªå¼ºå¤§çš„é«˜æ€§èƒ½çš„ä»£ç ç”ŸæˆåŒ…,å®ƒå¯ä»¥åœ¨è¿è¡ŒæœŸæ‰©å±• java ç±»ä¸å®ç° java æ¥å£.å®ƒå¹¿æ³›çš„è¢«è®¸å¤š AOP çš„æ¡†æ¶ä½¿ç”¨,ä¾‹å¦‚ Spring AOPï¼Œå®ç°æ–¹æ³•æ‹¦æˆª</p>
</li>
<li>
<p>åœ¨ AOP ç¼–ç¨‹ä¸­å¦‚ä½•é€‰æ‹©ä»£ç†æ¨¡å¼ï¼š</p>
<ul>
<li>
<p>ç›®æ ‡å¯¹è±¡éœ€è¦å®ç°æ¥å£ï¼Œç”¨ JDK ä»£ç†</p>
</li>
<li>
<p>ç›®æ ‡å¯¹è±¡ä¸éœ€è¦å®ç°æ¥å£ï¼Œç”¨ Cglib ä»£ç†</p>
</li>
</ul>
</li>
<li>
<p>Cglib åŒ…çš„åº•å±‚æ˜¯é€šè¿‡ä½¿ç”¨å­—èŠ‚ç å¤„ç†æ¡†æ¶ ASM æ¥è½¬æ¢å­—èŠ‚ç å¹¶ç”Ÿæˆæ–°çš„ç±»</p>
</li>
</ol>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.cglib;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºç›®æ ‡å¯¹è±¡</span><br>      <span class="hljs-type">TeacherDao</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TeacherDao</span>();<br>      <span class="hljs-comment">//è·å–åˆ°ä»£ç†å¯¹è±¡ï¼Œå¹¶ä¸”å°†ç›®æ ‡å¯¹è±¡ä¼ é€’ç»™ä»£ç†å¯¹è±¡</span><br>      <span class="hljs-type">TeacherDao</span> <span class="hljs-variable">proxyInstance</span> <span class="hljs-operator">=</span> (TeacherDao)<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyFactory</span>(target).getProxyInstance();<br><br>      <span class="hljs-comment">//æ‰§è¡Œä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œè§¦å‘intecept æ–¹æ³•ï¼Œä»è€Œå®ç° å¯¹ç›®æ ‡å¯¹è±¡çš„è°ƒç”¨</span><br>      <span class="hljs-type">String</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> proxyInstance.teach();<br>      System.out.println(<span class="hljs-string">&quot;res=&quot;</span> + res);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ProxyFactory.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.cglib;<br><br><br><br><br><span class="hljs-keyword">import</span> net.sf.cglib.proxy.Enhancer;<br><span class="hljs-keyword">import</span> net.sf.cglib.proxy.MethodInterceptor;<br><span class="hljs-keyword">import</span> net.sf.cglib.proxy.MethodProxy;<br><br><span class="hljs-keyword">import</span> java.lang.reflect.Method;<br><br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MethodInterceptor</span> &#123;<br><br>   <span class="hljs-comment">//ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡</span><br>   <span class="hljs-keyword">private</span> Object target;<br>   <br>   <span class="hljs-comment">//æ„é€ å™¨ï¼Œä¼ å…¥ä¸€ä¸ªè¢«ä»£ç†çš„å¯¹è±¡</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyFactory</span><span class="hljs-params">(Object target)</span> &#123;<br>      <span class="hljs-built_in">this</span>.target = target;<br>   &#125;<br><br>   <span class="hljs-comment">//è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡:  æ˜¯ target å¯¹è±¡çš„ä»£ç†å¯¹è±¡</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getProxyInstance</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">//1. åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»</span><br>      <span class="hljs-type">Enhancer</span> <span class="hljs-variable">enhancer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Enhancer</span>();<br>      <span class="hljs-comment">//2. è®¾ç½®çˆ¶ç±»</span><br>      enhancer.setSuperclass(target.getClass());<br>      <span class="hljs-comment">//3. è®¾ç½®å›è°ƒå‡½æ•°</span><br>      enhancer.setCallback(<span class="hljs-built_in">this</span>);<br>      <span class="hljs-comment">//4. åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œå³ä»£ç†å¯¹è±¡</span><br>      <span class="hljs-keyword">return</span> enhancer.create();<br>      <br>   &#125;<br>   <br><br>   <span class="hljs-comment">//é‡å†™  intercept æ–¹æ³•ï¼Œä¼šè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Object arg0, Method method, Object[] args, MethodProxy arg3)</span> <span class="hljs-keyword">throws</span> Throwable &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;Cglibä»£ç†æ¨¡å¼ ~~ å¼€å§‹&quot;</span>);<br>      <span class="hljs-type">Object</span> <span class="hljs-variable">returnVal</span> <span class="hljs-operator">=</span> method.invoke(target, args);<br>      System.out.println(<span class="hljs-string">&quot;Cglibä»£ç†æ¨¡å¼ ~~ æäº¤&quot;</span>);<br>      <span class="hljs-keyword">return</span> returnVal;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TeacherDao.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.proxy.cglib;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TeacherDao</span> &#123;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">teach</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; è€å¸ˆæˆè¯¾ä¸­  ï¼Œ æˆ‘æ˜¯cglibä»£ç†ï¼Œä¸éœ€è¦å®ç°æ¥å£ &quot;</span>);<br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;hello&quot;</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Cglibä»£ç†æ¨¡å¼ ~~ å¼€å§‹<br> è€å¸ˆæˆè¯¾ä¸­  ï¼Œ æˆ‘æ˜¯cglibä»£ç†ï¼Œä¸éœ€è¦å®ç°æ¥å£ <br>Cglibä»£ç†æ¨¡å¼ ~~ æäº¤<br><span class="hljs-attribute">res</span>=hello<br></code></pre></td></tr></table></figure>
<h1 id="æ¨¡æ¿æ¨¡å¼"><a class="markdownIt-Anchor" href="#æ¨¡æ¿æ¨¡å¼"></a> ğŸŒ—æ¨¡æ¿æ¨¡å¼</h1>
<p>åœ¨æ¨¡æ¿æ¨¡å¼ï¼ˆTemplatePatternï¼‰ä¸­ï¼Œä¸€ä¸ªæŠ½è±¡ç±»å…¬å¼€å®šä¹‰äº†æ‰§è¡Œå®ƒçš„æ–¹æ³•çš„æ–¹å¼/æ¨¡æ¿ã€‚å®ƒçš„å­ç±»å¯ä»¥æŒ‰éœ€è¦é‡å†™æ–¹æ³•å®ç°ï¼Œä½†è°ƒç”¨å°†ä»¥æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æ–¹å¼è¿›è¡Œã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-12"><a class="markdownIt-Anchor" href="#ä»‹ç»-12"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­çš„ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸€äº›æ–¹æ³•é€šç”¨ï¼Œå´åœ¨æ¯ä¸€ä¸ªå­ç±»éƒ½é‡æ–°å†™äº†è¿™ä¸€æ–¹æ³•ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> æœ‰ä¸€äº›é€šç”¨çš„æ–¹æ³•ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†è¿™äº›é€šç”¨ç®—æ³•æŠ½è±¡å‡ºæ¥ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> åœ¨æŠ½è±¡ç±»å®ç°ï¼Œå…¶ä»–æ­¥éª¤åœ¨å­ç±»å®ç°ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€åœ¨é€ æˆ¿å­çš„æ—¶å€™ï¼Œåœ°åŸºã€èµ°çº¿ã€æ°´ç®¡éƒ½ä¸€æ ·ï¼Œåªæœ‰åœ¨å»ºç­‘çš„åæœŸæ‰æœ‰åŠ å£æ©±åŠ æ …æ ç­‰å·®å¼‚ã€‚ 2ã€è¥¿æ¸¸è®°é‡Œé¢è©è¨å®šå¥½çš„ 81éš¾ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªé¡¶å±‚çš„é€»è¾‘éª¨æ¶ã€‚ 3ã€spring ä¸­å¯¹ Hibernate çš„æ”¯æŒï¼Œå°†ä¸€äº›å·²ç»å®šå¥½çš„æ–¹æ³•å°è£…èµ·æ¥ï¼Œæ¯”å¦‚å¼€å¯äº‹åŠ¡ã€è·å– Sessionã€å…³é—­Session ç­‰ï¼Œç¨‹åºå‘˜ä¸é‡å¤å†™é‚£äº›å·²ç»è§„èŒƒå¥½çš„ä»£ç ï¼Œç›´æ¥ä¸¢ä¸€ä¸ªå®ä½“å°±å¯ä»¥ä¿å­˜ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å°è£…ä¸å˜éƒ¨åˆ†ï¼Œæ‰©å±•å¯å˜éƒ¨åˆ†ã€‚ 2ã€æå–å…¬å…±ä»£ç ï¼Œä¾¿äºç»´æŠ¤ã€‚ 3ã€è¡Œä¸ºç”±çˆ¶ç±»æ§åˆ¶ï¼Œå­ç±»å®ç°ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> æ¯ä¸€ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªå­ç±»æ¥å®ç°ï¼Œå¯¼è‡´ç±»çš„ä¸ªæ•°å¢åŠ ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ åºå¤§ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€æœ‰å¤šä¸ªå­ç±»å…±æœ‰çš„æ–¹æ³•ï¼Œä¸”é€»è¾‘ç›¸åŒã€‚ 2ã€é‡è¦çš„ã€å¤æ‚çš„æ–¹æ³•ï¼Œå¯ä»¥è€ƒè™‘ä½œä¸ºæ¨¡æ¿æ–¹æ³•ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ä¸ºé˜²æ­¢æ¶æ„æ“ä½œï¼Œä¸€èˆ¬æ¨¡æ¿æ–¹æ³•éƒ½åŠ ä¸Š final å…³é”®è¯ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103150422044.png" srcset="/img/loading.gif" lazyload alt="image-20230103150422044" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>AbstractClass æŠ½è±¡ç±»ï¼Œ ç±»ä¸­å®ç°äº†æ¨¡æ¿æ–¹æ³•(template)ï¼Œå®šä¹‰äº†ç®—æ³•çš„éª¨æ¶ï¼Œå…·ä½“å­ç±»éœ€è¦å»å®ç° å…¶å®ƒçš„æŠ½è±¡æ–¹æ³• operationr2,3,4</p>
</li>
<li>
<p>ConcreteClass å®ç°æŠ½è±¡æ–¹æ³• operationr2,3,4, ä»¥å®Œæˆç®—æ³•ä¸­ç‰¹ç‚¹å­ç±»çš„æ­¥éª¤</p>
</li>
</ol>
<h2 id="å®ç°-10"><a class="markdownIt-Anchor" href="#å®ç°-10"></a> å®ç°</h2>
<ol>
<li>åº”ç”¨å®ä¾‹è¦æ±‚</li>
</ol>
<ul>
<li>ç¼–å†™åˆ¶ä½œè±†æµ†çš„ç¨‹åºï¼Œè¯´æ˜å¦‚ä¸‹:</li>
<li>åˆ¶ä½œè±†æµ†çš„æµç¨‹ é€‰æâ€”&gt;æ·»åŠ é…æ–™â€”&gt;æµ¸æ³¡â€”&gt;æ”¾åˆ°è±†æµ†æœºæ‰“ç¢</li>
<li>é€šè¿‡æ·»åŠ ä¸åŒçš„é…æ–™ï¼Œå¯ä»¥åˆ¶ä½œå‡ºä¸åŒå£å‘³çš„è±†æµ†</li>
<li>é€‰æã€æµ¸æ³¡å’Œæ”¾åˆ°è±†æµ†æœºæ‰“ç¢è¿™å‡ ä¸ªæ­¥éª¤å¯¹äºåˆ¶ä½œæ¯ç§å£å‘³çš„è±†æµ†éƒ½æ˜¯ä¸€æ ·çš„(çº¢è±†ã€èŠ±ç”Ÿè±†æµ†ã€‚ã€‚ã€‚)</li>
</ul>
<ol start="2">
<li>æ€è·¯åˆ†æå’Œå›¾è§£(ç±»å›¾)</li>
</ol>
<h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸€"><a class="markdownIt-Anchor" href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸€"></a> æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä¸€</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103151032471.png" srcset="/img/loading.gif" lazyload alt="image-20230103151032471" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ¶ä½œçº¢è±†è±†æµ†</span><br>      <br>      System.out.println(<span class="hljs-string">&quot;----åˆ¶ä½œçº¢è±†è±†æµ†----&quot;</span>);<br>      <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">redBeanSoyaMilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedBeanSoyaMilk</span>();<br>      redBeanSoyaMilk.make();<br>      <br>      System.out.println(<span class="hljs-string">&quot;----åˆ¶ä½œèŠ±ç”Ÿè±†æµ†----&quot;</span>);<br>      <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">peanutSoyaMilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PeanutSoyaMilk</span>();<br>      peanutSoyaMilk.make();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PeanutSoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PeanutSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; åŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>RedBeanSoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedBeanSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; åŠ å…¥ä¸Šå¥½çš„çº¢è±† &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template;<br><br><span class="hljs-comment">//æŠ½è±¡ç±»ï¼Œè¡¨ç¤ºè±†æµ†</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SoyaMilk</span> &#123;<br><br>   <span class="hljs-comment">//æ¨¡æ¿æ–¹æ³•, make , æ¨¡æ¿æ–¹æ³•å¯ä»¥åšæˆfinal , ä¸è®©å­ç±»å»è¦†ç›–.</span><br>   <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span> &#123;<br>      <br>      select(); <br>      addCondiments();<br>      soak();<br>      beat();<br>      <br>   &#125;<br>   <br>   <span class="hljs-comment">//é€‰ææ–™</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">select</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†  &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//æ·»åŠ ä¸åŒçš„é…æ–™ï¼Œ æŠ½è±¡æ–¹æ³•, å­ç±»å…·ä½“å®ç°</span><br>   <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span>;<br>   <br>   <span class="hljs-comment">//æµ¸æ³¡</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">soak</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶ &quot;</span>);<br>   &#125;<br>    <br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">beat</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢  &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-literal">----</span><span class="hljs-comment">åˆ¶ä½œçº¢è±†è±†æµ†</span><span class="hljs-literal">----</span><br><span class="hljs-comment">ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†</span>  <br> <span class="hljs-comment">åŠ å…¥ä¸Šå¥½çš„çº¢è±†</span> <br><span class="hljs-comment">ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶</span> <br><span class="hljs-comment">ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢</span>  <br><span class="hljs-literal">----</span><span class="hljs-comment">åˆ¶ä½œèŠ±ç”Ÿè±†æµ†</span><span class="hljs-literal">----</span><br><span class="hljs-comment">ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†</span>  <br> <span class="hljs-comment">åŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ</span> <br><span class="hljs-comment">ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶</span> <br><span class="hljs-comment">ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢</span> <br></code></pre></td></tr></table></figure>
<h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„é’©å­æ–¹æ³•"><a class="markdownIt-Anchor" href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„é’©å­æ–¹æ³•"></a> æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„é’©å­æ–¹æ³•</h3>
<ol>
<li>
<p>åœ¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„<strong>çˆ¶ç±»</strong>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥<strong>å®šä¹‰ä¸€ä¸ªæ–¹æ³•</strong>ï¼Œå®ƒ<strong>é»˜è®¤ä¸åšä»»ä½•äº‹</strong>ï¼Œå­ç±»å¯ä»¥è§†æƒ…å†µè¦ä¸è¦è¦†ç›–å®ƒï¼Œè¯¥æ–¹æ³•ç§°ä¸ºâ€œé’©å­â€ã€‚</p>
</li>
<li>
<p>è¿˜æ˜¯ç”¨ä¸Šé¢åšè±†æµ†çš„ä¾‹å­æ¥è®²è§£ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬è¿˜å¸Œæœ›<strong>åˆ¶ä½œçº¯è±†æµ†</strong>ï¼Œ<strong>ä¸æ·»åŠ ä»»ä½•çš„é…æ–™</strong>ï¼Œè¯·ä½¿ç”¨é’©å­æ–¹æ³•å¯¹å‰é¢çš„æ¨¡æ¿æ–¹æ³•è¿›è¡Œæ”¹é€ </p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103151439028.png" srcset="/img/loading.gif" lazyload alt="image-20230103151439028" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ¶ä½œçº¢è±†è±†æµ†</span><br>      <br>      System.out.println(<span class="hljs-string">&quot;----åˆ¶ä½œçº¢è±†è±†æµ†----&quot;</span>);<br>      <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">redBeanSoyaMilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedBeanSoyaMilk</span>();<br>      redBeanSoyaMilk.make();<br>      <br>      System.out.println(<span class="hljs-string">&quot;----åˆ¶ä½œèŠ±ç”Ÿè±†æµ†----&quot;</span>);<br>      <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">peanutSoyaMilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PeanutSoyaMilk</span>();<br>      peanutSoyaMilk.make();<br>      <br>      System.out.println(<span class="hljs-string">&quot;----åˆ¶ä½œçº¯è±†æµ†----&quot;</span>);<br>      <span class="hljs-type">SoyaMilk</span> <span class="hljs-variable">pureSoyaMilk</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PureSoyaMilk</span>();<br>      pureSoyaMilk.make();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PeanutSoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PeanutSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; åŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PureSoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PureSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span>&#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//ç©ºå®ç°</span><br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-type">boolean</span> <span class="hljs-title function_">customerWantCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>   &#125;<br> <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>RedBeanSoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedBeanSoyaMilk</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SoyaMilk</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; åŠ å…¥ä¸Šå¥½çš„çº¢è±† &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SoyaMilk.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.template.improve;<br><br><span class="hljs-comment">//æŠ½è±¡ç±»ï¼Œè¡¨ç¤ºè±†æµ†</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SoyaMilk</span> &#123;<br><br>   <span class="hljs-comment">//æ¨¡æ¿æ–¹æ³•, make , æ¨¡æ¿æ–¹æ³•å¯ä»¥åšæˆfinal , ä¸è®©å­ç±»å»è¦†ç›–.</span><br>   <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span> &#123;<br>      <br>      select(); <br>      <span class="hljs-keyword">if</span>(customerWantCondiments()) &#123;<br>         addCondiments();<br>      &#125;<br>      soak();<br>      beat();<br>      <br>   &#125;<br>   <br>   <span class="hljs-comment">//é€‰ææ–™</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">select</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†  &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//æ·»åŠ ä¸åŒçš„é…æ–™ï¼Œ æŠ½è±¡æ–¹æ³•, å­ç±»å…·ä½“å®ç°</span><br>   <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addCondiments</span><span class="hljs-params">()</span>;<br>   <br>   <span class="hljs-comment">//æµ¸æ³¡</span><br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">soak</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶ &quot;</span>);<br>   &#125;<br>    <br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">beat</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢  &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//é’©å­æ–¹æ³•ï¼Œå†³å®šæ˜¯å¦éœ€è¦æ·»åŠ é…æ–™</span><br>   <span class="hljs-type">boolean</span> <span class="hljs-title function_">customerWantCondiments</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-literal">----</span><span class="hljs-comment">åˆ¶ä½œçº¢è±†è±†æµ†</span><span class="hljs-literal">----</span><br><span class="hljs-comment">ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†</span>  <br> <span class="hljs-comment">åŠ å…¥ä¸Šå¥½çš„çº¢è±†</span> <br><span class="hljs-comment">ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶</span> <br><span class="hljs-comment">ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢</span>  <br><span class="hljs-literal">----</span><span class="hljs-comment">åˆ¶ä½œèŠ±ç”Ÿè±†æµ†</span><span class="hljs-literal">----</span><br><span class="hljs-comment">ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†</span>  <br> <span class="hljs-comment">åŠ å…¥ä¸Šå¥½çš„èŠ±ç”Ÿ</span> <br><span class="hljs-comment">ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶</span> <br><span class="hljs-comment">ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢</span>  <br><span class="hljs-literal">----</span><span class="hljs-comment">åˆ¶ä½œçº¯è±†æµ†</span><span class="hljs-literal">----</span><br><span class="hljs-comment">ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©å¥½çš„æ–°é²œé»„è±†</span>  <br><span class="hljs-comment">ç¬¬ä¸‰æ­¥ï¼Œ é»„è±†å’Œé…æ–™å¼€å§‹æµ¸æ³¡ï¼Œ éœ€è¦3å°æ—¶</span> <br><span class="hljs-comment">ç¬¬å››æ­¥ï¼šé»„è±†å’Œé…æ–™æ”¾åˆ°è±†æµ†æœºå»æ‰“ç¢</span> <br></code></pre></td></tr></table></figure>
<h2 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>åŸºæœ¬æ€æƒ³æ˜¯ï¼šç®—æ³•åªå­˜åœ¨äºä¸€ä¸ªåœ°æ–¹ï¼Œä¹Ÿå°±æ˜¯åœ¨çˆ¶ç±»ä¸­ï¼Œå®¹æ˜“ä¿®æ”¹ã€‚éœ€è¦ä¿®æ”¹ç®—æ³•æ—¶ï¼Œåªè¦ä¿®æ”¹çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³•æˆ–è€…å·²ç»å®ç°çš„æŸäº›æ­¥éª¤ï¼Œå­ç±»å°±ä¼šç»§æ‰¿è¿™äº›ä¿®æ”¹</p>
</li>
<li>
<p>å®ç°äº†æœ€å¤§åŒ–ä»£ç å¤ç”¨ã€‚çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³•å’Œå·²å®ç°çš„æŸäº›æ­¥éª¤ä¼šè¢«å­ç±»ç»§æ‰¿è€Œç›´æ¥ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>æ—¢ç»Ÿä¸€äº†ç®—æ³•ï¼Œä¹Ÿæä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³•ç¡®ä¿äº†ç®—æ³•çš„ç»“æ„ä¿æŒä¸å˜ï¼ŒåŒæ—¶ç”±å­ç±»æä¾›éƒ¨åˆ†æ­¥éª¤çš„å®ç°ã€‚</p>
</li>
<li>
<p>è¯¥æ¨¡å¼çš„ä¸è¶³ä¹‹å¤„ï¼šæ¯ä¸€ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦ä¸€ä¸ªå­ç±»å®ç°ï¼Œå¯¼è‡´ç±»çš„ä¸ªæ•°å¢åŠ ï¼Œä½¿å¾—ç³»ç»Ÿæ›´åŠ åºå¤§</p>
</li>
<li>
<p>ä¸€èˆ¬æ¨¡æ¿æ–¹æ³•éƒ½åŠ ä¸Š final å…³é”®å­—ï¼Œ é˜²æ­¢å­ç±»é‡å†™æ¨¡æ¿æ–¹æ³•.</p>
</li>
<li>
<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ä½¿ç”¨åœºæ™¯ï¼šå½“è¦å®Œæˆåœ¨æŸä¸ªè¿‡ç¨‹ï¼Œè¯¥è¿‡ç¨‹è¦æ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ ï¼Œè¿™ä¸€ç³»åˆ—çš„æ­¥éª¤åŸºæœ¬ç›¸åŒï¼Œä½†å…¶ä¸ªåˆ«æ­¥éª¤åœ¨å®ç°æ—¶ å¯èƒ½ä¸åŒï¼Œé€šå¸¸è€ƒè™‘ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ¥å¤„ç†</p>
</li>
</ol>
<h1 id="å‘½ä»¤æ¨¡å¼"><a class="markdownIt-Anchor" href="#å‘½ä»¤æ¨¡å¼"></a> å‘½ä»¤æ¨¡å¼</h1>
<p>å‘½ä»¤æ¨¡å¼ï¼ˆCommandPatternï¼‰æ˜¯ä¸€ç§æ•°æ®é©±åŠ¨çš„è®¾è®¡æ¨¡å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚è¯·æ±‚ä»¥å‘½ä»¤çš„å½¢å¼åŒ…è£¹åœ¨å¯¹è±¡ä¸­ï¼Œå¹¶ä¼ ç»™è°ƒç”¨å¯¹è±¡ã€‚è°ƒç”¨å¯¹è±¡å¯»æ‰¾å¯ä»¥å¤„ç†è¯¥å‘½ä»¤çš„åˆé€‚çš„å¯¹è±¡ï¼Œå¹¶æŠŠè¯¥å‘½ä»¤ä¼ ç»™ç›¸åº”çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ‰§è¡Œå‘½ä»¤ã€‚</p>
<h2 id="ä»‹ç»-13"><a class="markdownIt-Anchor" href="#ä»‹ç»-13"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿æ‚¨å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong><br />
åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œè¡Œä¸ºè¯·æ±‚è€…ä¸è¡Œä¸ºå®ç°è€…é€šå¸¸æ˜¯ä¸€ç§ç´§è€¦åˆçš„å…³ç³»ï¼Œä½†æŸäº›åœºåˆï¼Œæ¯”å¦‚éœ€è¦å¯¹è¡Œä¸ºè¿›è¡Œè®°å½•ã€æ’¤é”€æˆ–é‡åšã€äº‹åŠ¡ç­‰å¤„ç†æ—¶ï¼Œè¿™ç§æ— æ³•æŠµå¾¡å˜åŒ–çš„ç´§è€¦åˆçš„è®¾è®¡å°±ä¸å¤ªåˆé€‚ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong><br />
åœ¨æŸäº›åœºåˆï¼Œæ¯”å¦‚è¦å¯¹è¡Œä¸ºè¿›è¡Œ&quot;è®°å½•ã€æ’¤é”€/é‡åšã€äº‹åŠ¡&quot;ç­‰å¤„ç†ï¼Œè¿™ç§æ— æ³•æŠµå¾¡å˜åŒ–çš„ç´§è€¦åˆæ˜¯ä¸åˆé€‚çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚ä½•å°†&quot;è¡Œä¸ºè¯·æ±‚è€…&quot;ä¸&quot;è¡Œä¸ºå®ç°è€…&quot;è§£è€¦ï¼Ÿå°†ä¸€ç»„è¡Œä¸ºæŠ½è±¡ä¸ºå¯¹è±¡ï¼Œå¯ä»¥å®ç°äºŒè€…ä¹‹é—´çš„æ¾è€¦åˆã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> é€šè¿‡è°ƒç”¨è€…è°ƒç”¨æ¥å—è€…æ‰§è¡Œå‘½ä»¤ï¼Œé¡ºåºï¼šè°ƒç”¨è€…â†’å‘½ä»¤â†’æ¥å—è€…ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å®šä¹‰ä¸‰ä¸ªè§’è‰²ï¼š1ã€received çœŸæ­£çš„å‘½ä»¤æ‰§è¡Œå¯¹è±¡ 2ã€Command 3ã€invoker ä½¿ç”¨å‘½ä»¤å¯¹è±¡çš„å…¥å£</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> struts 1 ä¸­çš„ action æ ¸å¿ƒæ§åˆ¶å™¨ ActionServlet åªæœ‰ä¸€ä¸ªï¼Œç›¸å½“äº<br />
Invokerï¼Œè€Œæ¨¡å‹å±‚çš„ç±»ä¼šéšç€ä¸åŒçš„åº”ç”¨æœ‰ä¸åŒçš„æ¨¡å‹ç±»ï¼Œç›¸å½“äºå…·ä½“çš„ Commandã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€é™ä½äº†ç³»ç»Ÿè€¦åˆåº¦ã€‚ 2ã€æ–°çš„å‘½ä»¤å¯ä»¥å¾ˆå®¹æ˜“æ·»åŠ åˆ°ç³»ç»Ÿä¸­å»ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> ä½¿ç”¨å‘½ä»¤æ¨¡å¼å¯èƒ½ä¼šå¯¼è‡´æŸäº›ç³»ç»Ÿæœ‰è¿‡å¤šçš„å…·ä½“å‘½ä»¤ç±»ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> è®¤ä¸ºæ˜¯å‘½ä»¤çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å‘½ä»¤æ¨¡å¼ï¼Œæ¯”å¦‚ï¼š 1ã€GUI ä¸­æ¯ä¸€ä¸ªæŒ‰é’®éƒ½æ˜¯ä¸€æ¡å‘½ä»¤ã€‚ 2ã€æ¨¡æ‹Ÿ CMDã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ç³»ç»Ÿéœ€è¦æ”¯æŒå‘½ä»¤çš„æ’¤é”€(Undo)æ“ä½œå’Œæ¢å¤(Redo)æ“ä½œï¼Œä¹Ÿå¯ä»¥è€ƒè™‘ä½¿ç”¨å‘½ä»¤æ¨¡å¼ï¼Œè§å‘½ä»¤æ¨¡å¼çš„æ‰©å±•ã€‚</p>
<p>å‘½ä»¤æ¨¡å¼ç»“æ„ç¤ºæ„å›¾:</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/commanduml.jpg" srcset="/img/loading.gif" lazyload alt="" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(å‘½åæ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>Invoker æ˜¯è°ƒç”¨è€…è§’è‰²</p>
</li>
<li>
<p>Command: æ˜¯å‘½ä»¤è§’è‰²ï¼Œéœ€è¦æ‰§è¡Œçš„æ‰€æœ‰å‘½ä»¤éƒ½åœ¨è¿™é‡Œï¼Œå¯ä»¥æ˜¯æ¥å£æˆ–æŠ½è±¡ç±»</p>
</li>
<li>
<p>Receiver: æ¥å—è€…è§’è‰²ï¼ŒçŸ¥é“å¦‚ä½•å®æ–½å’Œæ‰§è¡Œä¸€ä¸ªè¯·æ±‚ç›¸å…³çš„æ“ä½œ</p>
</li>
<li>
<p>ConcreteCommand: å°†ä¸€ä¸ªæ¥å—è€…å¯¹è±¡ä¸ä¸€ä¸ªåŠ¨ä½œç»‘å®šï¼Œè°ƒç”¨æ¥å—è€…ç›¸åº”çš„æ“ä½œï¼Œå®ç° execute</p>
</li>
</ol>
<h2 id="å®ç°-11"><a class="markdownIt-Anchor" href="#å®ç°-11"></a> å®ç°</h2>
<p>æ™ºèƒ½ç”Ÿæ´»é¡¹ç›®éœ€æ±‚</p>
<p>çœ‹ä¸€ä¸ªå…·ä½“çš„éœ€æ±‚</p>
<ol>
<li>
<p>æˆ‘ä»¬ä¹°äº†ä¸€å¥—æ™ºèƒ½å®¶ç”µï¼Œæœ‰ç…§æ˜ç¯ã€é£æ‰‡ã€å†°ç®±ã€æ´—è¡£æœºï¼Œæˆ‘ä»¬åªè¦åœ¨æ‰‹æœºä¸Šå®‰è£… app å°±å¯ä»¥æ§åˆ¶å¯¹è¿™äº›å®¶ç”µå·¥ä½œã€‚</p>
</li>
<li>
<p>è¿™äº›æ™ºèƒ½å®¶ç”µæ¥è‡ªä¸åŒçš„å‚å®¶ï¼Œæˆ‘ä»¬ä¸æƒ³é’ˆå¯¹æ¯ä¸€ç§å®¶ç”µéƒ½å®‰è£…ä¸€ä¸ª Appï¼Œåˆ†åˆ«æ§åˆ¶ï¼Œæˆ‘ä»¬å¸Œæœ›åªè¦ä¸€ä¸ª appå°±å¯ä»¥æ§åˆ¶å…¨éƒ¨æ™ºèƒ½å®¶ç”µã€‚</p>
</li>
<li>
<p>è¦å®ç°ä¸€ä¸ª app æ§åˆ¶æ‰€æœ‰æ™ºèƒ½å®¶ç”µçš„éœ€è¦ï¼Œåˆ™æ¯ä¸ªæ™ºèƒ½å®¶ç”µå‚å®¶éƒ½è¦æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ç»™ app è°ƒç”¨ï¼Œè¿™æ—¶ å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨å‘½ä»¤æ¨¡å¼ã€‚</p>
</li>
<li>
<p>å‘½ä»¤æ¨¡å¼å¯å°†â€œåŠ¨ä½œçš„è¯·æ±‚è€…â€ä»â€œåŠ¨ä½œçš„æ‰§è¡Œè€…â€å¯¹è±¡ä¸­è§£è€¦å‡ºæ¥.</p>
</li>
<li>
<p>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼ŒåŠ¨ä½œçš„è¯·æ±‚è€…æ˜¯æ‰‹æœº appï¼ŒåŠ¨ä½œçš„æ‰§è¡Œè€…æ˜¯æ¯ä¸ªå‚å•†çš„ä¸€ä¸ªå®¶ç”µäº§å“</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103163835693.png" srcset="/img/loading.gif" lazyload alt="image-20230103163835693" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <br>      <span class="hljs-comment">//ä½¿ç”¨å‘½ä»¤è®¾è®¡æ¨¡å¼ï¼Œå®Œæˆé€šè¿‡é¥æ§å™¨ï¼Œå¯¹ç”µç¯çš„æ“ä½œ</span><br>      <br>      <span class="hljs-comment">//åˆ›å»ºç”µç¯çš„å¯¹è±¡(æ¥å—è€…)</span><br>      <span class="hljs-type">LightReceiver</span> <span class="hljs-variable">lightReceiver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightReceiver</span>();<br>      <br>      <span class="hljs-comment">//åˆ›å»ºç”µç¯ç›¸å…³çš„å¼€å…³å‘½ä»¤</span><br>      <span class="hljs-type">LightOnCommand</span> <span class="hljs-variable">lightOnCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightOnCommand</span>(lightReceiver);<br>      <span class="hljs-type">LightOffCommand</span> <span class="hljs-variable">lightOffCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightOffCommand</span>(lightReceiver);<br>      <br>      <span class="hljs-comment">//éœ€è¦ä¸€ä¸ªé¥æ§å™¨</span><br>      <span class="hljs-type">RemoteController</span> <span class="hljs-variable">remoteController</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RemoteController</span>();<br>      <br>      <span class="hljs-comment">//ç»™æˆ‘ä»¬çš„é¥æ§å™¨è®¾ç½®å‘½ä»¤, æ¯”å¦‚ no = 0 æ˜¯ç”µç¯çš„å¼€å’Œå…³çš„æ“ä½œ</span><br>      remoteController.setCommand(<span class="hljs-number">0</span>, lightOnCommand, lightOffCommand);<br>      <br>      System.out.println(<span class="hljs-string">&quot;--------æŒ‰ä¸‹ç¯çš„å¼€æŒ‰é’®-----------&quot;</span>);<br>      remoteController.onButtonWasPushed(<span class="hljs-number">0</span>);<br>      System.out.println(<span class="hljs-string">&quot;--------æŒ‰ä¸‹ç¯çš„å…³æŒ‰é’®-----------&quot;</span>);<br>      remoteController.offButtonWasPushed(<span class="hljs-number">0</span>);<br>      System.out.println(<span class="hljs-string">&quot;--------æŒ‰ä¸‹æ’¤é”€æŒ‰é’®-----------&quot;</span>);<br>      remoteController.undoButtonWasPushed();<br>      <br>      <br>      System.out.println(<span class="hljs-string">&quot;=========ä½¿ç”¨é¥æ§å™¨æ“ä½œç”µè§†æœº==========&quot;</span>);<br>      <br>      <span class="hljs-type">TVReceiver</span> <span class="hljs-variable">tvReceiver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TVReceiver</span>();<br>      <br>      <span class="hljs-type">TVOffCommand</span> <span class="hljs-variable">tvOffCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TVOffCommand</span>(tvReceiver);<br>      <span class="hljs-type">TVOnCommand</span> <span class="hljs-variable">tvOnCommand</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TVOnCommand</span>(tvReceiver);<br>      <br>      <span class="hljs-comment">//ç»™æˆ‘ä»¬çš„é¥æ§å™¨è®¾ç½®å‘½ä»¤, æ¯”å¦‚ no = 1 æ˜¯ç”µè§†æœºçš„å¼€å’Œå…³çš„æ“ä½œ</span><br>      remoteController.setCommand(<span class="hljs-number">1</span>, tvOnCommand, tvOffCommand);<br>      <br>      System.out.println(<span class="hljs-string">&quot;--------æŒ‰ä¸‹ç”µè§†æœºçš„å¼€æŒ‰é’®-----------&quot;</span>);<br>      remoteController.onButtonWasPushed(<span class="hljs-number">1</span>);<br>      System.out.println(<span class="hljs-string">&quot;--------æŒ‰ä¸‹ç”µè§†æœºçš„å…³æŒ‰é’®-----------&quot;</span>);<br>      remoteController.offButtonWasPushed(<span class="hljs-number">1</span>);<br>      System.out.println(<span class="hljs-string">&quot;--------æŒ‰ä¸‹æ’¤é”€æŒ‰é’®-----------&quot;</span>);<br>      remoteController.undoButtonWasPushed();<br><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Command.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><br><span class="hljs-comment">//åˆ›å»ºå‘½ä»¤æ¥å£</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Command</span> &#123;<br><br>   <span class="hljs-comment">//æ‰§è¡ŒåŠ¨ä½œ(æ“ä½œ)</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span>;<br>   <span class="hljs-comment">//æ’¤é”€åŠ¨ä½œ(æ“ä½œ)</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>LightOffCommand.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightOffCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br><br>   <span class="hljs-comment">// èšåˆLightReceiver</span><br><br>   LightReceiver light;<br><br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">LightOffCommand</span><span class="hljs-params">(LightReceiver light)</span> &#123;<br>         <span class="hljs-built_in">super</span>();<br>         <span class="hljs-built_in">this</span>.light = light;<br>      &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      light.off();<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      light.on();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>LightOnCommand.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightOnCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br><br>   <span class="hljs-comment">//èšåˆLightReceiver</span><br>   <br>   LightReceiver light;<br>   <br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">LightOnCommand</span><span class="hljs-params">(LightReceiver light)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.light = light;<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      light.on();<br>   &#125;<br><br>   <br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      light.off();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>LightReceiver.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightReceiver</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç”µç¯æ‰“å¼€äº†.. &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç”µç¯å…³é—­äº†.. &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>NoCommand.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ²¡æœ‰ä»»ä½•å‘½ä»¤ï¼Œå³ç©ºæ‰§è¡Œ: ç”¨äºåˆå§‹åŒ–æ¯ä¸ªæŒ‰é’®, å½“è°ƒç”¨ç©ºå‘½ä»¤æ—¶ï¼Œå¯¹è±¡ä»€ä¹ˆéƒ½ä¸åš</span><br><span class="hljs-comment"> * å…¶å®ï¼Œè¿™æ ·æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼, å¯ä»¥çœæ‰å¯¹ç©ºåˆ¤æ–­</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>RemoteController.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RemoteController</span> &#123;<br><br>   <span class="hljs-comment">// å¼€ æŒ‰é’®çš„å‘½ä»¤æ•°ç»„</span><br>   Command[] onCommands;<br>   Command[] offCommands;<br><br>   <span class="hljs-comment">// æ‰§è¡Œæ’¤é”€çš„å‘½ä»¤</span><br>   Command undoCommand;<br><br>   <span class="hljs-comment">// æ„é€ å™¨ï¼Œå®Œæˆå¯¹æŒ‰é’®åˆå§‹åŒ–</span><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">RemoteController</span><span class="hljs-params">()</span> &#123;<br><br>      onCommands = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>[<span class="hljs-number">5</span>];<br>      offCommands = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>[<span class="hljs-number">5</span>];<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) &#123;<br>         onCommands[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoCommand</span>();<br>         offCommands[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoCommand</span>();<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-comment">// ç»™æˆ‘ä»¬çš„æŒ‰é’®è®¾ç½®ä½ éœ€è¦çš„å‘½ä»¤</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCommand</span><span class="hljs-params">(<span class="hljs-type">int</span> no, Command onCommand, Command offCommand)</span> &#123;<br>      onCommands[no] = onCommand;<br>      offCommands[no] = offCommand;<br>   &#125;<br><br>   <span class="hljs-comment">// æŒ‰ä¸‹å¼€æŒ‰é’®</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onButtonWasPushed</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span> &#123; <span class="hljs-comment">// no 0</span><br>      <span class="hljs-comment">// æ‰¾åˆ°ä½ æŒ‰ä¸‹çš„å¼€çš„æŒ‰é’®ï¼Œ å¹¶è°ƒç”¨å¯¹åº”æ–¹æ³•</span><br>      onCommands[no].execute();<br>      <span class="hljs-comment">// è®°å½•è¿™æ¬¡çš„æ“ä½œï¼Œç”¨äºæ’¤é”€</span><br>      undoCommand = onCommands[no];<br><br>   &#125;<br><br>   <span class="hljs-comment">// æŒ‰ä¸‹å¼€æŒ‰é’®</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">offButtonWasPushed</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span> &#123; <span class="hljs-comment">// no 0</span><br>      <span class="hljs-comment">// æ‰¾åˆ°ä½ æŒ‰ä¸‹çš„å…³çš„æŒ‰é’®ï¼Œ å¹¶è°ƒç”¨å¯¹åº”æ–¹æ³•</span><br>      offCommands[no].execute();<br>      <span class="hljs-comment">// è®°å½•è¿™æ¬¡çš„æ“ä½œï¼Œç”¨äºæ’¤é”€</span><br>      undoCommand = offCommands[no];<br><br>   &#125;<br>   <br>   <span class="hljs-comment">// æŒ‰ä¸‹æ’¤é”€æŒ‰é’®</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undoButtonWasPushed</span><span class="hljs-params">()</span> &#123;<br>      undoCommand.undo();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TVOffCommand.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TVOffCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br><br>   <span class="hljs-comment">// èšåˆTVReceiver</span><br><br>   TVReceiver tv;<br><br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">TVOffCommand</span><span class="hljs-params">(TVReceiver tv)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.tv = tv;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      tv.off();<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      tv.on();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TVOnCommand.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TVOnCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br><br>   <span class="hljs-comment">// èšåˆTVReceiver</span><br><br>   TVReceiver tv;<br><br>   <span class="hljs-comment">// æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">TVOnCommand</span><span class="hljs-params">(TVReceiver tv)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.tv = tv;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      tv.on();<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">undo</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// è°ƒç”¨æ¥æ”¶è€…çš„æ–¹æ³•</span><br>      tv.off();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TVReceiver.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.command;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TVReceiver</span> &#123;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">on</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç”µè§†æœºæ‰“å¼€äº†.. &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">off</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot; ç”µè§†æœºå…³é—­äº†.. &quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs abnf">--------æŒ‰ä¸‹ç¯çš„å¼€æŒ‰é’®-----------<br> ç”µç¯æ‰“å¼€äº†.. <br>--------æŒ‰ä¸‹ç¯çš„å…³æŒ‰é’®-----------<br> ç”µç¯å…³é—­äº†.. <br>--------æŒ‰ä¸‹æ’¤é”€æŒ‰é’®-----------<br> ç”µç¯æ‰“å¼€äº†.. <br><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>ä½¿ç”¨é¥æ§å™¨æ“ä½œç”µè§†æœº<span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><br>--------æŒ‰ä¸‹ç”µè§†æœºçš„å¼€æŒ‰é’®-----------<br> ç”µè§†æœºæ‰“å¼€äº†.. <br>--------æŒ‰ä¸‹ç”µè§†æœºçš„å…³æŒ‰é’®-----------<br> ç”µè§†æœºå…³é—­äº†.. <br>--------æŒ‰ä¸‹æ’¤é”€æŒ‰é’®-----------<br> ç”µè§†æœºæ‰“å¼€äº†..<br></code></pre></td></tr></table></figure>
<h2 id="å‘½ä»¤æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#å‘½ä»¤æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> å‘½ä»¤æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>å°†å‘èµ·è¯·æ±‚çš„å¯¹è±¡ä¸æ‰§è¡Œè¯·æ±‚çš„å¯¹è±¡è§£è€¦ã€‚å‘èµ·è¯·æ±‚çš„å¯¹è±¡æ˜¯è°ƒç”¨è€…ï¼Œè°ƒç”¨è€…åªè¦è°ƒç”¨å‘½ä»¤å¯¹è±¡çš„ execute()æ–¹æ³•å°±å¯ä»¥è®©æ¥æ”¶è€…å·¥ä½œï¼Œè€Œä¸å¿…çŸ¥é“å…·ä½“çš„æ¥æ”¶è€…å¯¹è±¡æ˜¯è°ã€æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå‘½ä»¤å¯¹è±¡ä¼šè´Ÿè´£è®©æ¥æ”¶è€…æ‰§è¡Œè¯·æ±‚çš„åŠ¨ä½œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼šâ€è¯·æ±‚å‘èµ·è€…â€å’Œâ€œè¯·æ±‚æ‰§è¡Œè€…â€ä¹‹é—´çš„è§£è€¦æ˜¯é€šè¿‡å‘½ä»¤å¯¹è±¡å®ç°çš„ï¼Œå‘½ä»¤å¯¹è±¡èµ·åˆ°äº†çº½å¸¦æ¡¥æ¢çš„ä½œç”¨ã€‚</p>
</li>
<li>
<p>å®¹æ˜“è®¾è®¡ä¸€ä¸ªå‘½ä»¤é˜Ÿåˆ—ã€‚åªè¦æŠŠå‘½ä»¤å¯¹è±¡æ”¾åˆ°åˆ—é˜Ÿï¼Œå°±å¯ä»¥å¤šçº¿ç¨‹çš„æ‰§è¡Œå‘½ä»¤</p>
</li>
<li>
<p>å®¹æ˜“å®ç°å¯¹è¯·æ±‚çš„æ’¤é”€å’Œé‡åš</p>
</li>
<li>
<p><strong>å‘½ä»¤æ¨¡å¼ä¸è¶³</strong>ï¼šå¯èƒ½å¯¼è‡´æŸäº›ç³»ç»Ÿæœ‰è¿‡å¤šçš„å…·ä½“å‘½ä»¤ç±»ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œè¿™ç‚¹åœ¨åœ¨ä½¿ç”¨çš„æ—¶å€™è¦æ³¨æ„</p>
</li>
<li>
<p><strong>ç©ºå‘½ä»¤ä¹Ÿæ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼</strong>ï¼Œå®ƒä¸ºæˆ‘ä»¬<strong>çœå»äº†åˆ¤ç©ºçš„æ“ä½œ</strong>ã€‚åœ¨ä¸Šé¢çš„å®ä¾‹ä¸­ï¼Œå¦‚æœæ²¡æœ‰ç”¨ç©ºå‘½ä»¤ï¼Œæˆ‘ä»¬æ¯æŒ‰ä¸‹ä¸€ä¸ªæŒ‰é”®éƒ½è¦åˆ¤ç©ºï¼Œè¿™ç»™æˆ‘ä»¬ç¼–ç å¸¦æ¥ä¸€å®šçš„éº»çƒ¦ã€‚</p>
</li>
<li>
<p>å‘½ä»¤æ¨¡å¼ç»å…¸çš„åº”ç”¨åœºæ™¯ï¼šç•Œé¢çš„ä¸€ä¸ªæŒ‰é’®éƒ½æ˜¯ä¸€æ¡å‘½ä»¤ã€æ¨¡æ‹Ÿ CMDï¼ˆDOS å‘½ä»¤ï¼‰è®¢å•çš„æ’¤é”€/æ¢å¤ã€è§¦å‘-åé¦ˆæœºåˆ¶</p>
</li>
</ol>
<h1 id="è®¿é—®è€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#è®¿é—®è€…æ¨¡å¼"></a> è®¿é—®è€…æ¨¡å¼</h1>
<p>åœ¨è®¿é—®è€…æ¨¡å¼ï¼ˆVisitor Patternï¼‰ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªè®¿é—®è€…ç±»ï¼Œå®ƒæ”¹å˜äº†å…ƒç´ ç±»çš„æ‰§è¡Œç®—æ³•ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå…ƒç´ çš„æ‰§è¡Œç®—æ³•å¯ä»¥éšç€è®¿é—®è€…æ”¹å˜è€Œæ”¹å˜ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚æ ¹æ®æ¨¡å¼ï¼Œå…ƒç´ å¯¹è±¡å·²æ¥å—è®¿é—®è€…å¯¹è±¡ï¼Œè¿™æ ·è®¿é—®è€…å¯¹è±¡å°±å¯ä»¥å¤„ç†å…ƒç´ å¯¹è±¡ä¸Šçš„æ“ä½œã€‚</p>
<h2 id="ä»‹ç»-14"><a class="markdownIt-Anchor" href="#ä»‹ç»-14"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ä¸»è¦å°†æ•°æ®ç»“æ„ä¸æ•°æ®æ“ä½œåˆ†ç¦»ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ç¨³å®šçš„æ•°æ®ç»“æ„å’Œæ˜“å˜çš„æ“ä½œè€¦åˆé—®é¢˜ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œéœ€è¦é¿å…è®©è¿™äº›æ“ä½œ&quot;æ±¡æŸ“&quot;è¿™äº›å¯¹è±¡çš„ç±»ï¼Œä½¿ç”¨è®¿é—®è€…æ¨¡å¼å°†è¿™äº›å°è£…åˆ°ç±»ä¸­ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> åœ¨è¢«è®¿é—®çš„ç±»é‡Œé¢åŠ ä¸€ä¸ªå¯¹å¤–æä¾›æ¥å¾…è®¿é—®è€…çš„æ¥å£ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> åœ¨æ•°æ®åŸºç¡€ç±»é‡Œé¢æœ‰ä¸€ä¸ªæ–¹æ³•æ¥å—è®¿é—®è€…ï¼Œå°†è‡ªèº«å¼•ç”¨ä¼ å…¥è®¿é—®è€…ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> æ‚¨åœ¨æœ‹å‹å®¶åšå®¢ï¼Œæ‚¨æ˜¯è®¿é—®è€…ï¼Œæœ‹å‹æ¥å—æ‚¨çš„è®¿é—®ï¼Œæ‚¨é€šè¿‡æœ‹å‹çš„æè¿°ï¼Œç„¶åå¯¹æœ‹å‹çš„æè¿°åšå‡ºä¸€ä¸ªåˆ¤æ–­ï¼Œè¿™å°±æ˜¯è®¿é—®è€…æ¨¡å¼ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚ 2ã€ä¼˜ç§€çš„æ‰©å±•æ€§ã€‚ 3ã€çµæ´»æ€§ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œè¿åäº†è¿ªç±³ç‰¹åŸåˆ™ã€‚ 2ã€å…·ä½“å…ƒç´ å˜æ›´æ¯”è¾ƒå›°éš¾ã€‚ 3ã€è¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ï¼Œä¾èµ–äº†å…·ä½“ç±»ï¼Œæ²¡æœ‰ä¾èµ–æŠ½è±¡ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€å¯¹è±¡ç»“æ„ä¸­å¯¹è±¡å¯¹åº”çš„ç±»å¾ˆå°‘æ”¹å˜ï¼Œä½†ç»å¸¸éœ€è¦åœ¨æ­¤å¯¹è±¡ç»“æ„ä¸Šå®šä¹‰æ–°çš„æ“ä½œã€‚<br />
2ã€éœ€è¦å¯¹ä¸€ä¸ªå¯¹è±¡ç»“æ„ä¸­çš„å¯¹è±¡è¿›è¡Œå¾ˆå¤šä¸åŒçš„å¹¶ä¸”ä¸ç›¸å…³çš„æ“ä½œï¼Œè€Œéœ€è¦é¿å…è®©è¿™äº›æ“ä½œ&quot;æ±¡æŸ“&quot;è¿™äº›å¯¹è±¡çš„ç±»ï¼Œä¹Ÿä¸å¸Œæœ›åœ¨å¢åŠ æ–°æ“ä½œæ—¶ä¿®æ”¹è¿™äº›ç±»ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> è®¿é—®è€…å¯ä»¥å¯¹åŠŸèƒ½è¿›è¡Œç»Ÿä¸€ï¼Œå¯ä»¥åšæŠ¥è¡¨ã€UIã€æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨ã€‚</p>
<p><strong>è®¿é—®è€…æ¨¡å¼çš„åŸç†ç±»å›¾:</strong><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103191915903.png" srcset="/img/loading.gif" lazyload alt="image-20230103191915903" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(è®¿é—®è€…æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>Visitor æ˜¯æŠ½è±¡è®¿é—®è€…ï¼Œä¸ºè¯¥å¯¹è±¡ç»“æ„ä¸­çš„ ConcreteElement çš„æ¯ä¸€ä¸ªç±»å£°æ˜ä¸€ä¸ª visit æ“ä½œ</p>
</li>
<li>
<p>ConcreteVisitor ï¼šæ˜¯ä¸€ä¸ªå…·ä½“çš„è®¿é—®å€¼ å®ç°æ¯ä¸ªæœ‰ Visitor å£°æ˜çš„æ“ä½œï¼Œæ˜¯æ¯ä¸ªæ“ä½œå®ç°çš„éƒ¨åˆ†.</p>
</li>
<li>
<p>ObjectStructure èƒ½æšä¸¾å®ƒçš„å…ƒç´ ï¼Œ å¯ä»¥æä¾›ä¸€ä¸ªé«˜å±‚çš„æ¥å£ï¼Œç”¨æ¥å…è®¸è®¿é—®è€…è®¿é—®å…ƒç´ </p>
</li>
<li>
<p>Element å®šä¹‰ä¸€ä¸ª accept æ–¹æ³•ï¼Œæ¥æ”¶ä¸€ä¸ªè®¿é—®è€…å¯¹è±¡</p>
</li>
<li>
<p>ConcreteElement ä¸ºå…·ä½“å…ƒç´ ï¼Œå®ç°äº† accept æ–¹æ³•</p>
</li>
</ol>
<h2 id="å®ç°-12"><a class="markdownIt-Anchor" href="#å®ç°-12"></a> å®ç°</h2>
<p>å®Œæˆæµ‹è¯„ç³»ç»Ÿéœ€æ±‚</p>
<ol>
<li>å°†è§‚ä¼—åˆ†ä¸ºç”·äººå’Œå¥³äººï¼Œå¯¹æ­Œæ‰‹è¿›è¡Œæµ‹è¯„ï¼Œå½“çœ‹å®ŒæŸä¸ªæ­Œæ‰‹è¡¨æ¼”åï¼Œå¾—åˆ°ä»–ä»¬å¯¹è¯¥æ­Œæ‰‹ä¸åŒçš„è¯„ä»·(è¯„ä»· æœ‰ä¸åŒçš„ç§ç±»ï¼Œæ¯”å¦‚ æˆåŠŸã€å¤±è´¥ ç­‰)</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103191809297.png" srcset="/img/loading.gif" lazyload alt="image-20230103191809297" /></p>
<p><code>Action.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Action</span> &#123;<br>   <br>   <span class="hljs-comment">//å¾—åˆ°ç”·æ€§ çš„æµ‹è¯„</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span>;<br>   <br>   <span class="hljs-comment">//å¾—åˆ°å¥³çš„ æµ‹è¯„</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman woman)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºObjectStructure</span><br>      <span class="hljs-type">ObjectStructure</span> <span class="hljs-variable">objectStructure</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectStructure</span>();<br>      <br>      objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Man</span>());<br>      objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Woman</span>());<br>      <br>      <br>      <span class="hljs-comment">//æˆåŠŸ</span><br>      <span class="hljs-type">Success</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Success</span>();<br>      objectStructure.display(success);<br>      <br>      System.out.println(<span class="hljs-string">&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;</span>);<br>      <span class="hljs-type">Fail</span> <span class="hljs-variable">fail</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fail</span>();<br>      objectStructure.display(fail);<br>      <br>      System.out.println(<span class="hljs-string">&quot;~~~~~~~~~~~ç»™çš„æ˜¯å¾…å®šçš„æµ‹è¯„~~~~~~~~~~~&quot;</span>);<br>      <br>      <span class="hljs-type">Wait</span> <span class="hljs-variable">wait</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Wait</span>();<br>      objectStructure.display(wait);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Fail.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Fail</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç”·äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¤±è´¥ !&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman woman)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; å¥³äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¤±è´¥ !&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Man.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Man</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Action action)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      action.getManResult(<span class="hljs-built_in">this</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ObjectStructure.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">//æ•°æ®ç»“æ„ï¼Œç®¡ç†å¾ˆå¤šäººï¼ˆMan , Womanï¼‰</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectStructure</span> &#123;<br><br>   <span class="hljs-comment">//ç»´æŠ¤äº†ä¸€ä¸ªé›†åˆ</span><br>   <span class="hljs-keyword">private</span> List&lt;Person&gt; persons = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>   <br>   <span class="hljs-comment">//å¢åŠ åˆ°list</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(Person p)</span> &#123;<br>      persons.add(p);<br>   &#125;<br>   <span class="hljs-comment">//ç§»é™¤</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">(Person p)</span> &#123;<br>      persons.remove(p);<br>   &#125;<br>   <br>   <span class="hljs-comment">//æ˜¾ç¤ºæµ‹è¯„æƒ…å†µ</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">(Action action)</span> &#123;<br>      <span class="hljs-keyword">for</span>(Person p: persons) &#123;<br>         p.accept(action);<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Person.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>   <br>   <span class="hljs-comment">//æä¾›ä¸€ä¸ªæ–¹æ³•ï¼Œè®©è®¿é—®è€…å¯ä»¥è®¿é—®</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Action action)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Success.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Success</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç”·äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¾ˆæˆåŠŸ !&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman woman)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; å¥³äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¾ˆæˆåŠŸ !&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Wait.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Wait</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Action</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getManResult</span><span class="hljs-params">(Man man)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ç”·äººç»™çš„è¯„ä»·æ˜¯è¯¥æ­Œæ‰‹å¾…å®š ..&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getWomanResult</span><span class="hljs-params">(Woman woman)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; å¥³äººç»™çš„è¯„ä»·æ˜¯è¯¥æ­Œæ‰‹å¾…å®š ..&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Woman.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.visitor;<br><br><span class="hljs-comment">//è¯´æ˜</span><br><span class="hljs-comment">//1. è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†åŒåˆ†æ´¾, å³é¦–å…ˆåœ¨å®¢æˆ·ç«¯ç¨‹åºä¸­ï¼Œå°†å…·ä½“çŠ¶æ€ä½œä¸ºå‚æ•°ä¼ é€’Womanä¸­(ç¬¬ä¸€æ¬¡åˆ†æ´¾)</span><br><span class="hljs-comment">//2. ç„¶åWoman ç±»è°ƒç”¨ä½œä¸ºå‚æ•°çš„ &quot;å…·ä½“æ–¹æ³•&quot; ä¸­æ–¹æ³•getWomanResult, åŒæ—¶å°†è‡ªå·±(this)ä½œä¸ºå‚æ•°</span><br><span class="hljs-comment">//   ä¼ å…¥ï¼Œå®Œæˆç¬¬äºŒæ¬¡çš„åˆ†æ´¾</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Woman</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Person</span>&#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Action action)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      action.getWomanResult(<span class="hljs-built_in">this</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-code"> ç”·äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¾ˆæˆåŠŸ !</span><br><span class="hljs-section"> å¥³äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¾ˆæˆåŠŸ !</span><br><span class="hljs-section">~~~~~~~~~~~~~~~~~~~~~~~~~~</span><br><span class="hljs-code"> ç”·äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¤±è´¥ !</span><br><span class="hljs-code"> å¥³äººç»™çš„è¯„ä»·è¯¥æ­Œæ‰‹å¤±è´¥ !</span><br>~~~~~~~~~~~ç»™çš„æ˜¯å¾…å®šçš„æµ‹è¯„~~~~~~~~~~~<br><span class="hljs-code"> ç”·äººç»™çš„è¯„ä»·æ˜¯è¯¥æ­Œæ‰‹å¾…å®š ..</span><br><span class="hljs-code"> å¥³äººç»™çš„è¯„ä»·æ˜¯è¯¥æ­Œæ‰‹å¾…å®š ..</span><br></code></pre></td></tr></table></figure>
<blockquote>
<p>åº”ç”¨æ¡ˆä¾‹çš„å°ç»“-åŒåˆ†æ´¾</p>
</blockquote>
<ol>
<li>
<p>ä¸Šé¢æåˆ°äº†åŒåˆ†æ´¾ï¼Œæ‰€è°“åŒåˆ†æ´¾æ˜¯æŒ‡ä¸ç®¡ç±»æ€ä¹ˆå˜åŒ–ï¼Œæˆ‘ä»¬éƒ½èƒ½æ‰¾åˆ°æœŸæœ›çš„æ–¹æ³•è¿è¡Œã€‚åŒåˆ†æ´¾æ„å‘³ç€å¾—åˆ°æ‰§è¡Œçš„æ“ä½œå–å†³äºè¯·æ±‚çš„ç§ç±»å’Œä¸¤ä¸ªæ¥æ”¶è€…çš„ç±»å‹</p>
</li>
<li>
<p>ä»¥ä¸Šè¿°å®ä¾‹ä¸ºä¾‹ï¼Œ<strong>å‡è®¾æˆ‘ä»¬è¦æ·»åŠ ä¸€ä¸ª Wait çš„çŠ¶æ€ç±»ï¼Œè€ƒå¯Ÿ Man ç±»å’Œ Woman ç±»çš„ååº”</strong>ï¼Œç”±äºä½¿ç”¨äº†åŒåˆ†æ´¾ï¼Œåªéœ€å¢åŠ ä¸€ä¸ª Action å­ç±»å³å¯åœ¨å®¢æˆ·ç«¯è°ƒç”¨å³å¯ï¼Œ<strong>ä¸éœ€è¦æ”¹åŠ¨ä»»ä½•å…¶ä»–ç±»çš„ä»£ç </strong>ã€‚</p>
</li>
</ol>
<h2 id="è®¿é—®è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#è®¿é—®è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> è®¿é—®è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>ä¼˜ç‚¹</p>
<ul>
<li>
<p>è®¿é—®è€…æ¨¡å¼ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€è®©ç¨‹åºå…·æœ‰ä¼˜ç§€çš„æ‰©å±•æ€§ã€çµæ´»æ€§éå¸¸é«˜</p>
</li>
<li>
<p>è®¿é—®è€…æ¨¡å¼å¯ä»¥å¯¹åŠŸèƒ½è¿›è¡Œç»Ÿä¸€ï¼Œå¯ä»¥åšæŠ¥è¡¨ã€UIã€æ‹¦æˆªå™¨ä¸è¿‡æ»¤å™¨ï¼Œé€‚ç”¨äºæ•°æ®ç»“æ„ç›¸å¯¹ç¨³å®šçš„ç³»ç»Ÿ</p>
</li>
</ul>
</li>
<li>
<p>ç¼ºç‚¹</p>
</li>
</ol>
<ul>
<li>
<p>å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œä¹Ÿå°±æ˜¯è¯´è®¿é—®è€…å…³æ³¨äº†å…¶ä»–ç±»çš„å†…éƒ¨ç»†èŠ‚ï¼Œè¿™æ˜¯è¿ªç±³ç‰¹æ³•åˆ™æ‰€ä¸å»ºè®®çš„, è¿™æ ·é€ æˆäº†å…·ä½“å…ƒç´ å˜æ›´æ¯”è¾ƒå›°éš¾</p>
</li>
<li>
<p>è¿èƒŒäº†ä¾èµ–å€’è½¬åŸåˆ™ã€‚è®¿é—®è€…ä¾èµ–çš„æ˜¯å…·ä½“å…ƒç´ ï¼Œè€Œä¸æ˜¯æŠ½è±¡å…ƒç´ </p>
</li>
<li>
<p>å› æ­¤ï¼Œ<strong>å¦‚æœä¸€ä¸ªç³»ç»Ÿæœ‰æ¯”è¾ƒç¨³å®šçš„æ•°æ®ç»“æ„</strong>ï¼Œåˆæœ‰ç»å¸¸å˜åŒ–çš„åŠŸèƒ½éœ€æ±‚ï¼Œé‚£ä¹ˆ<strong>è®¿é—®è€…æ¨¡å¼å°±æ˜¯æ¯”è¾ƒåˆé€‚</strong>çš„</p>
</li>
</ul>
<h1 id="è¿­ä»£å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#è¿­ä»£å™¨æ¨¡å¼"></a> ğŸŒ—è¿­ä»£å™¨æ¨¡å¼</h1>
<p>è¿­ä»£å™¨æ¨¡å¼ï¼ˆIterator Patternï¼‰æ˜¯ Java å’Œ .Net ç¼–ç¨‹ç¯å¢ƒä¸­éå¸¸å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ç”¨äºé¡ºåºè®¿é—®é›†åˆå¯¹è±¡çš„å…ƒç´ ï¼Œä¸éœ€è¦çŸ¥é“é›†åˆå¯¹è±¡çš„åº•å±‚è¡¨ç¤ºã€‚</p>
<p>è¿­ä»£å™¨æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-15"><a class="markdownIt-Anchor" href="#ä»‹ç»-15"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ , è€Œåˆæ— é¡»æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸åŒçš„æ–¹å¼æ¥éå†æ•´ä¸ªæ•´åˆå¯¹è±¡ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> éå†ä¸€ä¸ªèšåˆå¯¹è±¡ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> æŠŠåœ¨å…ƒç´ ä¹‹é—´æ¸¸èµ°çš„è´£ä»»äº¤ç»™è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯èšåˆå¯¹è±¡ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å®šä¹‰æ¥å£ï¼šhasNext, nextã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> JAVA ä¸­çš„ iteratorã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å®ƒæ”¯æŒä»¥ä¸åŒçš„æ–¹å¼éå†ä¸€ä¸ªèšåˆå¯¹è±¡ã€‚ 2ã€è¿­ä»£å™¨ç®€åŒ–äº†èšåˆç±»ã€‚ 3ã€åœ¨åŒä¸€ä¸ªèšåˆä¸Šå¯ä»¥æœ‰å¤šä¸ªéå†ã€‚<br />
4ã€åœ¨è¿­ä»£å™¨æ¨¡å¼ä¸­ï¼Œå¢åŠ æ–°çš„èšåˆç±»å’Œè¿­ä»£å™¨ç±»éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> ç”±äºè¿­ä»£å™¨æ¨¡å¼å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®çš„èŒè´£åˆ†ç¦»ï¼Œå¢åŠ æ–°çš„èšåˆç±»éœ€è¦å¯¹åº”å¢åŠ æ–°çš„è¿­ä»£å™¨ç±»ï¼Œç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€è®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡çš„å†…å®¹è€Œæ— é¡»æš´éœ²å®ƒçš„å†…éƒ¨è¡¨ç¤ºã€‚ 2ã€éœ€è¦ä¸ºèšåˆå¯¹è±¡æä¾›å¤šç§éå†æ–¹å¼ã€‚ 3ã€ä¸ºéå†ä¸åŒçš„èšåˆç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong><br />
è¿­ä»£å™¨æ¨¡å¼å°±æ˜¯åˆ†ç¦»äº†é›†åˆå¯¹è±¡çš„éå†è¡Œä¸ºï¼ŒæŠ½è±¡å‡ºä¸€ä¸ªè¿­ä»£å™¨ç±»æ¥è´Ÿè´£ï¼Œè¿™æ ·æ—¢å¯ä»¥åšåˆ°ä¸æš´éœ²é›†åˆçš„å†…éƒ¨ç»“æ„ï¼Œåˆå¯è®©å¤–éƒ¨ä»£ç é€æ˜åœ°è®¿é—®é›†åˆå†…éƒ¨çš„æ•°æ®ã€‚</p>
<h2 id="å®ç°-13"><a class="markdownIt-Anchor" href="#å®ç°-13"></a> å®ç°</h2>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230103201406957.png" srcset="/img/loading.gif" lazyload alt="image-20230103201406957" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-comment">/**</span><br><span class="hljs-comment">         * ç›¸å½“äºä¸€ä¸ªå¤§å­¦</span><br><span class="hljs-comment">         *</span><br><span class="hljs-comment">         */</span><br>        List&lt;College&gt; collegeList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;College&gt;();<br><br>        <span class="hljs-comment">//åˆ›å»ºå­¦é™¢</span><br>        <span class="hljs-type">ComputerCollege</span> <span class="hljs-variable">computerCollege</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerCollege</span>();<br>        <span class="hljs-type">InfoCollege</span> <span class="hljs-variable">infoCollege</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InfoCollege</span>();<br><br>        collegeList.add(computerCollege);<br>        collegeList.add(infoCollege);<br><br>        <span class="hljs-type">OutPutImpl</span> <span class="hljs-variable">outPutImpl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OutPutImpl</span>(collegeList);<br>        outPutImpl.printCollege();<br><br>    &#125;<br><br><br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>College.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">College</span> &#123;<br>   <br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;<br>   <br>   <span class="hljs-comment">//å¢åŠ ç³»çš„æ–¹æ³•</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDepartment</span><span class="hljs-params">(String name, String desc)</span>;<br>   <br>   <span class="hljs-comment">//è¿”å›ä¸€ä¸ªè¿­ä»£å™¨,éå†</span><br>   <span class="hljs-keyword">public</span> Iterator  <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ComputerCollege.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerCollege</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">College</span> &#123;<br><br>   Department[] departments;<br>   <span class="hljs-type">int</span> <span class="hljs-variable">numOfDepartment</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span> ;<span class="hljs-comment">// ä¿å­˜å½“å‰æ•°ç»„çš„å¯¹è±¡ä¸ªæ•°</span><br>   <br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ComputerCollege</span><span class="hljs-params">()</span> &#123;<br>      departments = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>[<span class="hljs-number">5</span>];<br>      addDepartment(<span class="hljs-string">&quot;Javaä¸“ä¸š&quot;</span>, <span class="hljs-string">&quot; Javaä¸“ä¸š &quot;</span>);<br>      addDepartment(<span class="hljs-string">&quot;PHPä¸“ä¸š&quot;</span>, <span class="hljs-string">&quot; PHPä¸“ä¸š &quot;</span>);<br>      addDepartment(<span class="hljs-string">&quot;å¤§æ•°æ®ä¸“ä¸š&quot;</span>, <span class="hljs-string">&quot; å¤§æ•°æ®ä¸“ä¸š &quot;</span>);<br>      <br>   &#125;<br>   <br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;è®¡ç®—æœºå­¦é™¢&quot;</span>;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDepartment</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Department</span> <span class="hljs-variable">department</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(name, desc);<br>      departments[numOfDepartment] = department;<br>      numOfDepartment += <span class="hljs-number">1</span>;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ComputerCollegeIterator</span>(departments);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ComputerCollegeIterator.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ComputerCollegeIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span> &#123;<br><br>   <span class="hljs-comment">//è¿™é‡Œæˆ‘ä»¬éœ€è¦Department æ˜¯ä»¥æ€æ ·çš„æ–¹å¼å­˜æ”¾=&gt;æ•°ç»„</span><br>   Department[] departments;<br>   <span class="hljs-type">int</span> <span class="hljs-variable">position</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//éå†çš„ä½ç½®</span><br>   <br>   <br>   <br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ComputerCollegeIterator</span><span class="hljs-params">(Department[] departments)</span> &#123;<br>      <span class="hljs-built_in">this</span>.departments = departments;<br>   &#125;<br><br>   <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">if</span>(position &gt;= departments.length || departments[position] == <span class="hljs-literal">null</span>) &#123;<br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>      <br>         <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Department</span> <span class="hljs-variable">department</span> <span class="hljs-operator">=</span> departments[position];<br>      position += <span class="hljs-number">1</span>;<br>      <span class="hljs-keyword">return</span> department;<br>   &#125;<br>   <br>   <span class="hljs-comment">//åˆ é™¤çš„æ–¹æ³•ï¼Œé»˜è®¤ç©ºå®ç°</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br>      <br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Department.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-comment">//ç³»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Department</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String desc;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Department</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>        <span class="hljs-built_in">super</span>();<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDesc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> desc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDesc</span><span class="hljs-params">(String desc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.desc = desc;<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>InfoColleageIterator.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InfoColleageIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span> &#123;<br><br><br>    List&lt;Department&gt; departmentList; <span class="hljs-comment">// ä¿¡æ¯å·¥ç¨‹å­¦é™¢æ˜¯ä»¥Listæ–¹å¼å­˜æ”¾ç³»</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> -<span class="hljs-number">1</span>;<span class="hljs-comment">//ç´¢å¼•</span><br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InfoColleageIterator</span><span class="hljs-params">(List&lt;Department&gt; departmentList)</span> &#123;<br>        <span class="hljs-built_in">this</span>.departmentList = departmentList;<br>    &#125;<br><br>    <span class="hljs-comment">//åˆ¤æ–­listä¸­è¿˜æœ‰æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ </span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        <span class="hljs-keyword">if</span> (index &gt;= departmentList.size() - <span class="hljs-number">1</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            index += <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        <span class="hljs-keyword">return</span> departmentList.get(index);<br>    &#125;<br><br>    <span class="hljs-comment">//ç©ºå®ç°remove</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>InfoCollege.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InfoCollege</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">College</span> &#123;<br><br>   List&lt;Department&gt; departmentList;<br>   <br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">InfoCollege</span><span class="hljs-params">()</span> &#123;<br>      departmentList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Department&gt;();<br>      addDepartment(<span class="hljs-string">&quot;ä¿¡æ¯å®‰å…¨ä¸“ä¸š&quot;</span>, <span class="hljs-string">&quot; ä¿¡æ¯å®‰å…¨ä¸“ä¸š &quot;</span>);<br>      addDepartment(<span class="hljs-string">&quot;ç½‘ç»œå®‰å…¨ä¸“ä¸š&quot;</span>, <span class="hljs-string">&quot; ç½‘ç»œå®‰å…¨ä¸“ä¸š &quot;</span>);<br>      addDepartment(<span class="hljs-string">&quot;æœåŠ¡å™¨å®‰å…¨ä¸“ä¸š&quot;</span>, <span class="hljs-string">&quot; æœåŠ¡å™¨å®‰å…¨ä¸“ä¸š &quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;ä¿¡æ¯å·¥ç¨‹å­¦é™¢&quot;</span>;<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addDepartment</span><span class="hljs-params">(String name, String desc)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">Department</span> <span class="hljs-variable">department</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Department</span>(name, desc);<br>      departmentList.add(department);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InfoColleageIterator</span>(departmentList);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>OutPutImpl.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.iterator;<br><br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OutPutImpl</span> &#123;<br>   <br>   <span class="hljs-comment">//å­¦é™¢é›†åˆ</span><br>   List&lt;College&gt; collegeList;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">OutPutImpl</span><span class="hljs-params">(List&lt;College&gt; collegeList)</span> &#123;<br>      <br>      <span class="hljs-built_in">this</span>.collegeList = collegeList;<br>   &#125;<br>   <span class="hljs-comment">//éå†æ‰€æœ‰å­¦é™¢,ç„¶åè°ƒç”¨printDepartment è¾“å‡ºå„ä¸ªå­¦é™¢çš„ç³»</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printCollege</span><span class="hljs-params">()</span> &#123;<br>      <br>      <span class="hljs-comment">//ä»collegeList å–å‡ºæ‰€æœ‰å­¦é™¢, Java ä¸­çš„ List å·²ç»å®ç°Iterator</span><br>      Iterator&lt;College&gt; iterator = collegeList.iterator();<br>      <br>      <span class="hljs-keyword">while</span>(iterator.hasNext()) &#123;<br>         <span class="hljs-comment">//å–å‡ºä¸€ä¸ªå­¦é™¢</span><br>         <span class="hljs-type">College</span> <span class="hljs-variable">college</span> <span class="hljs-operator">=</span> iterator.next();<br>         System.out.println(<span class="hljs-string">&quot;=== &quot;</span>+college.getName() +<span class="hljs-string">&quot;=====&quot;</span> );<br>         printDepartment(college.createIterator()); <span class="hljs-comment">//å¾—åˆ°å¯¹åº”è¿­ä»£å™¨</span><br>      &#125;<br>   &#125;<br>   <br>   <br>   <span class="hljs-comment">//è¾“å‡º å­¦é™¢è¾“å‡º ç³»</span><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printDepartment</span><span class="hljs-params">(Iterator iterator)</span> &#123;<br>      <span class="hljs-keyword">while</span>(iterator.hasNext()) &#123;<br>         <span class="hljs-type">Department</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> (Department)iterator.next();<br>         System.out.println(d.getName());<br>      &#125;<br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asciidoc"><span class="hljs-section">=== è®¡ç®—æœºå­¦é™¢=====</span><br>Javaä¸“ä¸š<br>PHPä¸“ä¸š<br>å¤§æ•°æ®ä¸“ä¸š<br><span class="hljs-section">=== ä¿¡æ¯å·¥ç¨‹å­¦é™¢=====</span><br>ä¿¡æ¯å®‰å…¨ä¸“ä¸š<br>ç½‘ç»œå®‰å…¨ä¸“ä¸š<br>æœåŠ¡å™¨å®‰å…¨ä¸“ä¸š<br></code></pre></td></tr></table></figure>
<h2 id="è¿­ä»£å™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#è¿­ä»£å™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> è¿­ä»£å™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>ä¼˜ç‚¹</li>
</ol>
<ul>
<li>
<p>æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ–¹æ³•éå†å¯¹è±¡ï¼Œå®¢æˆ·ä¸ç”¨å†è€ƒè™‘èšåˆçš„ç±»å‹ï¼Œä½¿ç”¨ä¸€ç§æ–¹æ³•å°±å¯ä»¥éå†å¯¹è±¡äº†ã€‚</p>
</li>
<li>
<p>éšè—äº†èšåˆçš„å†…éƒ¨ç»“æ„ï¼Œå®¢æˆ·ç«¯è¦éå†èšåˆçš„æ—¶å€™åªèƒ½å–åˆ°è¿­ä»£å™¨ï¼Œè€Œä¸ä¼šçŸ¥é“èšåˆçš„å…·ä½“ç»„æˆã€‚</p>
</li>
<li>
<p>æä¾›äº†ä¸€ç§<strong>è®¾è®¡æ€æƒ³</strong>ï¼Œå°±æ˜¯ä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·å˜åŒ–çš„åŸå› ï¼ˆå«åšå•ä¸€è´£ä»»åŸåˆ™ï¼‰ã€‚åœ¨èšåˆç±»ä¸­ï¼Œæˆ‘ä»¬æŠŠè¿­ä»£å™¨åˆ†å¼€ï¼Œå°±æ˜¯è¦æŠŠ<strong>ç®¡ç†å¯¹è±¡é›†åˆ</strong>å’Œ<strong>éå†å¯¹è±¡é›†åˆ</strong>çš„è´£ä»»åˆ†å¼€ï¼Œè¿™æ ·ä¸€æ¥é›†åˆæ”¹å˜çš„è¯ï¼Œåªå½±å“åˆ°èšåˆå¯¹è±¡ã€‚è€Œå¦‚æœéå†æ–¹å¼æ”¹å˜çš„è¯ï¼Œåªå½±å“åˆ°äº†è¿­ä»£å™¨ã€‚</p>
</li>
<li>
<p>å½“è¦å±•ç¤ºä¸€ç»„ç›¸ä¼¼å¯¹è±¡ï¼Œæˆ–è€…éå†ä¸€ç»„ç›¸åŒå¯¹è±¡æ—¶ä½¿ç”¨, é€‚åˆä½¿ç”¨è¿­ä»£å™¨æ¨¡å¼</p>
</li>
</ul>
<ol start="2">
<li>ç¼ºç‚¹
<ul>
<li>æ¯ä¸ªèšåˆå¯¹è±¡éƒ½è¦ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¼šç”Ÿæˆå¤šä¸ªè¿­ä»£å™¨ä¸å¥½ç®¡ç†ç±»</li>
</ul>
</li>
</ol>
<h1 id="è§‚å¯Ÿè€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#è§‚å¯Ÿè€…æ¨¡å¼"></a> ğŸŒ•è§‚å¯Ÿè€…æ¨¡å¼</h1>
<p>å½“å¯¹è±¡é—´å­˜åœ¨ä¸€å¯¹å¤šå…³ç³»æ—¶ï¼Œåˆ™ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œåˆ™ä¼šè‡ªåŠ¨é€šçŸ¥ä¾èµ–å®ƒçš„å¯¹è±¡ã€‚è§‚å¯Ÿè€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-16"><a class="markdownIt-Anchor" href="#ä»‹ç»-16"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜ç»™å…¶ä»–å¯¹è±¡é€šçŸ¥çš„é—®é¢˜ï¼Œè€Œä¸”è¦è€ƒè™‘åˆ°æ˜“ç”¨å’Œä½è€¦åˆï¼Œä¿è¯é«˜åº¦çš„åä½œã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> ä¸€ä¸ªå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…å¯¹è±¡ï¼‰éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè¿›è¡Œå¹¿æ’­é€šçŸ¥ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> ä½¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯ï¼Œå¯ä»¥å°†è¿™ç§ä¾èµ–å…³ç³»å¼±åŒ–ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> åœ¨æŠ½è±¡ç±»é‡Œæœ‰ä¸€ä¸ª ArrayList å­˜æ”¾è§‚å¯Ÿè€…ä»¬ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€æ‹å–çš„æ—¶å€™ï¼Œæ‹å–å¸ˆè§‚å¯Ÿæœ€é«˜æ ‡ä»·ï¼Œç„¶åé€šçŸ¥ç»™å…¶ä»–ç«ä»·è€…ç«ä»·ã€‚<br />
2ã€è¥¿æ¸¸è®°é‡Œé¢æ‚Ÿç©ºè¯·æ±‚è©è¨é™æœçº¢å­©å„¿ï¼Œè©è¨æ´’äº†ä¸€åœ°æ°´æ‹›æ¥ä¸€ä¸ªè€ä¹Œé¾Ÿï¼Œè¿™ä¸ªä¹Œé¾Ÿå°±æ˜¯è§‚å¯Ÿè€…ï¼Œä»–è§‚å¯Ÿè©è¨æ´’æ°´è¿™ä¸ªåŠ¨ä½œã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…æ˜¯æŠ½è±¡è€¦åˆçš„ã€‚ 2ã€å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€å¦‚æœä¸€ä¸ªè¢«è§‚å¯Ÿè€…å¯¹è±¡æœ‰å¾ˆå¤šçš„ç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚2ã€å¦‚æœåœ¨è§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚3ã€è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œä»…ä»…åªæ˜¯çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ä¸€ä¸ªæŠ½è±¡æ¨¡å‹æœ‰ä¸¤ä¸ªæ–¹é¢ï¼Œå…¶ä¸­ä¸€ä¸ªæ–¹é¢ä¾èµ–äºå¦ä¸€ä¸ªæ–¹é¢ã€‚å°†è¿™äº›æ–¹é¢å°è£…åœ¨ç‹¬ç«‹çš„å¯¹è±¡ä¸­ä½¿å®ƒä»¬å¯ä»¥å„è‡ªç‹¬ç«‹åœ°æ”¹å˜å’Œå¤ç”¨ã€‚</li>
<li>ä¸€ä¸ªå¯¹è±¡çš„æ”¹å˜å°†å¯¼è‡´å…¶ä»–ä¸€ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ä¹Ÿå‘ç”Ÿæ”¹å˜ï¼Œè€Œä¸çŸ¥é“å…·ä½“æœ‰å¤šå°‘å¯¹è±¡å°†å‘ç”Ÿæ”¹å˜ï¼Œå¯ä»¥é™ä½å¯¹è±¡ä¹‹é—´çš„è€¦åˆåº¦ã€‚</li>
<li>ä¸€ä¸ªå¯¹è±¡å¿…é¡»é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼Œè€Œå¹¶ä¸çŸ¥é“è¿™äº›å¯¹è±¡æ˜¯è°ã€‚</li>
<li>éœ€è¦åœ¨ç³»ç»Ÿä¸­åˆ›å»ºä¸€ä¸ªè§¦å‘é“¾ï¼ŒAå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Bå¯¹è±¡ï¼ŒBå¯¹è±¡çš„è¡Œä¸ºå°†å½±å“Cå¯¹è±¡â€¦â€¦ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼åˆ›å»ºä¸€ç§é“¾å¼è§¦å‘æœºåˆ¶ã€‚</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> 1ã€JAVA ä¸­å·²ç»æœ‰äº†å¯¹è§‚å¯Ÿè€…æ¨¡å¼çš„æ”¯æŒç±»ã€‚ 2ã€é¿å…å¾ªç¯å¼•ç”¨ã€‚ 3ã€å¦‚æœé¡ºåºæ‰§è¡Œï¼ŒæŸä¸€è§‚å¯Ÿè€…é”™è¯¯ä¼šå¯¼è‡´ç³»ç»Ÿå¡å£³ï¼Œä¸€èˆ¬é‡‡ç”¨å¼‚æ­¥æ–¹å¼ã€‚</p>
<h2 id="å®ç°-14"><a class="markdownIt-Anchor" href="#å®ç°-14"></a> å®ç°</h2>
<h3 id="å¤©æ°”é¢„æŠ¥è®¾è®¡æ–¹æ¡ˆ-1-æ™®é€šæ–¹æ¡ˆ"><a class="markdownIt-Anchor" href="#å¤©æ°”é¢„æŠ¥è®¾è®¡æ–¹æ¡ˆ-1-æ™®é€šæ–¹æ¡ˆ"></a> å¤©æ°”é¢„æŠ¥è®¾è®¡æ–¹æ¡ˆ 1-æ™®é€šæ–¹æ¡ˆ</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104142333771.png" srcset="/img/loading.gif" lazyload alt="image-20230104142333771" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//åˆ›å»ºæ¥å…¥æ–¹ currentConditions</span><br>      <span class="hljs-type">CurrentConditions</span> <span class="hljs-variable">currentConditions</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CurrentConditions</span>();<br>      <span class="hljs-comment">//åˆ›å»º WeatherData å¹¶å°† æ¥å…¥æ–¹ currentConditions ä¼ é€’åˆ° WeatherDataä¸­</span><br>      <span class="hljs-type">WeatherData</span> <span class="hljs-variable">weatherData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherData</span>(currentConditions);<br>      <br>      <span class="hljs-comment">//æ›´æ–°å¤©æ°”æƒ…å†µ</span><br>      weatherData.setData(<span class="hljs-number">30</span>, <span class="hljs-number">150</span>, <span class="hljs-number">40</span>);<br>      <br>      <span class="hljs-comment">//å¤©æ°”æƒ…å†µå˜åŒ–</span><br>      System.out.println(<span class="hljs-string">&quot;============å¤©æ°”æƒ…å†µå˜åŒ–=============&quot;</span>);<br>      weatherData.setData(<span class="hljs-number">40</span>, <span class="hljs-number">160</span>, <span class="hljs-number">20</span>);<br>      <br><br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>CurrentConditions.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ˜¾ç¤ºå½“å‰å¤©æ°”æƒ…å†µï¼ˆå¯ä»¥ç†è§£æˆæ˜¯æ°”è±¡ç«™è‡ªå·±çš„ç½‘ç«™ï¼‰</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurrentConditions</span> &#123;<br>    <span class="hljs-comment">// æ¸©åº¦ï¼Œæ°”å‹ï¼Œæ¹¿åº¦</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperature;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br><br>    <span class="hljs-comment">//æ›´æ–° å¤©æ°”æƒ…å†µï¼Œæ˜¯ç”± WeatherData æ¥è°ƒç”¨ï¼Œæˆ‘ä½¿ç”¨æ¨é€æ¨¡å¼</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.temperature = temperature;<br>        <span class="hljs-built_in">this</span>.pressure = pressure;<br>        <span class="hljs-built_in">this</span>.humidity = humidity;<br>        display();<br>    &#125;<br><br>    <span class="hljs-comment">//æ˜¾ç¤º</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;***Today mTemperature: &quot;</span> + temperature + <span class="hljs-string">&quot;***&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;***Today mPressure: &quot;</span> + pressure + <span class="hljs-string">&quot;***&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;***Today mHumidity: &quot;</span> + humidity + <span class="hljs-string">&quot;***&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>WeatherData.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç±»æ˜¯æ ¸å¿ƒ</span><br><span class="hljs-comment"> * 1. åŒ…å«æœ€æ–°çš„å¤©æ°”æƒ…å†µä¿¡æ¯ </span><br><span class="hljs-comment"> * 2. å«æœ‰ CurrentConditions å¯¹è±¡</span><br><span class="hljs-comment"> * 3. å½“æ•°æ®æœ‰æ›´æ–°æ—¶ï¼Œå°±ä¸»åŠ¨çš„è°ƒç”¨   CurrentConditionså¯¹è±¡updateæ–¹æ³•(å« display), è¿™æ ·ä»–ä»¬ï¼ˆæ¥å…¥æ–¹ï¼‰å°±çœ‹åˆ°æœ€æ–°çš„ä¿¡æ¯</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherData</span> &#123;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperatrue;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br>   <span class="hljs-keyword">private</span> CurrentConditions currentConditions;<br>   <span class="hljs-comment">//åŠ å…¥æ–°çš„ç¬¬ä¸‰æ–¹</span><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">WeatherData</span><span class="hljs-params">(CurrentConditions currentConditions)</span> &#123;<br>      <span class="hljs-built_in">this</span>.currentConditions = currentConditions;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getTemperature</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> temperatrue;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getPressure</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> pressure;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getHumidity</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> humidity;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dataChange</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">//è°ƒç”¨ æ¥å…¥æ–¹çš„ update</span><br>      currentConditions.update(getTemperature(), getPressure(), getHumidity());<br>   &#125;<br><br>   <span class="hljs-comment">//å½“æ•°æ®æœ‰æ›´æ–°æ—¶ï¼Œå°±è°ƒç”¨ setData</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setData</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span> &#123;<br>      <span class="hljs-built_in">this</span>.temperatrue = temperature;<br>      <span class="hljs-built_in">this</span>.pressure = pressure;<br>      <span class="hljs-built_in">this</span>.humidity = humidity;<br>      <span class="hljs-comment">//è°ƒç”¨dataChangeï¼Œ å°†æœ€æ–°çš„ä¿¡æ¯ æ¨é€ç»™ æ¥å…¥æ–¹ currentConditions</span><br>      dataChange();<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-strong">**<span class="hljs-emphasis">*Today mTemperature: 30.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mPressure: 150.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mHumidity: 40.0*</span>**</span><br>============å¤©æ°”æƒ…å†µå˜åŒ–=============<br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mTemperature: 40.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mPressure: 160.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mHumidity: 20.0*</span>**</span><br></code></pre></td></tr></table></figure>
<h3 id="è§‚å¯Ÿè€…æ¨¡å¼è§£å†³å¤©æ°”é¢„æŠ¥éœ€æ±‚"><a class="markdownIt-Anchor" href="#è§‚å¯Ÿè€…æ¨¡å¼è§£å†³å¤©æ°”é¢„æŠ¥éœ€æ±‚"></a> è§‚å¯Ÿè€…æ¨¡å¼è§£å†³å¤©æ°”é¢„æŠ¥éœ€æ±‚</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104143905498.png" srcset="/img/loading.gif" lazyload alt="image-20230104143905498" /></p>
<p><code>BaiduSite.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaiduSite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span> &#123;<br><br>   <span class="hljs-comment">// æ¸©åº¦ï¼Œæ°”å‹ï¼Œæ¹¿åº¦</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperature;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br><br>   <span class="hljs-comment">// æ›´æ–° å¤©æ°”æƒ…å†µï¼Œæ˜¯ç”± WeatherData æ¥è°ƒç”¨ï¼Œæˆ‘ä½¿ç”¨æ¨é€æ¨¡å¼</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span> &#123;<br>      <span class="hljs-built_in">this</span>.temperature = temperature;<br>      <span class="hljs-built_in">this</span>.pressure = pressure;<br>      <span class="hljs-built_in">this</span>.humidity = humidity;<br>      display();<br>   &#125;<br><br>   <span class="hljs-comment">// æ˜¾ç¤º</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;===ç™¾åº¦ç½‘ç«™====&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;***ç™¾åº¦ç½‘ç«™ æ°”æ¸© : &quot;</span> + temperature + <span class="hljs-string">&quot;***&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;***ç™¾åº¦ç½‘ç«™ æ°”å‹: &quot;</span> + pressure + <span class="hljs-string">&quot;***&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;***ç™¾åº¦ç½‘ç«™ æ¹¿åº¦: &quot;</span> + humidity + <span class="hljs-string">&quot;***&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªWeatherData</span><br>      <span class="hljs-type">WeatherData</span> <span class="hljs-variable">weatherData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherData</span>();<br>      <br>      <span class="hljs-comment">//åˆ›å»ºè§‚å¯Ÿè€…</span><br>      <span class="hljs-type">CurrentConditions</span> <span class="hljs-variable">currentConditions</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CurrentConditions</span>();<br>      <span class="hljs-type">BaiduSite</span> <span class="hljs-variable">baiduSite</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BaiduSite</span>();<br>      <br>      <span class="hljs-comment">//æ³¨å†Œåˆ°weatherData</span><br>      weatherData.registerObserver(currentConditions);<br>      weatherData.registerObserver(baiduSite);<br>      <br>      <span class="hljs-comment">//æµ‹è¯•</span><br>      System.out.println(<span class="hljs-string">&quot;é€šçŸ¥å„ä¸ªæ³¨å†Œçš„è§‚å¯Ÿè€…, çœ‹çœ‹ä¿¡æ¯&quot;</span>);<br>      weatherData.setData(<span class="hljs-number">10f</span>, <span class="hljs-number">100f</span>, <span class="hljs-number">30.3f</span>);<br>      <br>      <br>      weatherData.removeObserver(currentConditions);<br>      <span class="hljs-comment">//æµ‹è¯•</span><br>      System.out.println();<br>      System.out.println(<span class="hljs-string">&quot;é€šçŸ¥å„ä¸ªæ³¨å†Œçš„è§‚å¯Ÿè€…, çœ‹çœ‹ä¿¡æ¯&quot;</span>);<br>      weatherData.setData(<span class="hljs-number">10f</span>, <span class="hljs-number">100f</span>, <span class="hljs-number">30.3f</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>CurrentConditions.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CurrentConditions</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span> &#123;<br><br>   <span class="hljs-comment">// æ¸©åº¦ï¼Œæ°”å‹ï¼Œæ¹¿åº¦</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperature;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br><br>   <span class="hljs-comment">// æ›´æ–° å¤©æ°”æƒ…å†µï¼Œæ˜¯ç”± WeatherData æ¥è°ƒç”¨ï¼Œæˆ‘ä½¿ç”¨æ¨é€æ¨¡å¼</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span> &#123;<br>      <span class="hljs-built_in">this</span>.temperature = temperature;<br>      <span class="hljs-built_in">this</span>.pressure = pressure;<br>      <span class="hljs-built_in">this</span>.humidity = humidity;<br>      display();<br>   &#125;<br><br>   <span class="hljs-comment">// æ˜¾ç¤º</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;***Today mTemperature: &quot;</span> + temperature + <span class="hljs-string">&quot;***&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;***Today mPressure: &quot;</span> + pressure + <span class="hljs-string">&quot;***&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;***Today mHumidity: &quot;</span> + humidity + <span class="hljs-string">&quot;***&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Observer.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer.improve;<br><br><span class="hljs-comment">//è§‚å¯Ÿè€…æ¥å£ï¼Œæœ‰è§‚å¯Ÿè€…æ¥å®ç°</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Observer</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Subject.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer.improve;<br><br><span class="hljs-comment">//æ¥å£, è®©WeatherData æ¥å®ç° </span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Subject</span> &#123;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerObserver</span><span class="hljs-params">(Observer o)</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeObserver</span><span class="hljs-params">(Observer o)</span>;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObservers</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>WeatherData.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.observer.improve;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ç±»æ˜¯æ ¸å¿ƒ</span><br><span class="hljs-comment"> * 1. åŒ…å«æœ€æ–°çš„å¤©æ°”æƒ…å†µä¿¡æ¯ </span><br><span class="hljs-comment"> * 2. å«æœ‰ è§‚å¯Ÿè€…é›†åˆï¼Œä½¿ç”¨ArrayListç®¡ç†</span><br><span class="hljs-comment"> * 3. å½“æ•°æ®æœ‰æ›´æ–°æ—¶ï¼Œå°±ä¸»åŠ¨çš„è°ƒç”¨   ArrayList, é€šçŸ¥æ‰€æœ‰çš„ï¼ˆæ¥å…¥æ–¹ï¼‰å°±çœ‹åˆ°æœ€æ–°çš„ä¿¡æ¯</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WeatherData</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Subject</span> &#123;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> temperatrue;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> pressure;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> humidity;<br>   <span class="hljs-comment">//è§‚å¯Ÿè€…é›†åˆ</span><br>   <span class="hljs-keyword">private</span> ArrayList&lt;Observer&gt; observers;<br>   <br>   <span class="hljs-comment">//åŠ å…¥æ–°çš„ç¬¬ä¸‰æ–¹</span><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">WeatherData</span><span class="hljs-params">()</span> &#123;<br>      observers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Observer&gt;();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getTemperature</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> temperatrue;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getPressure</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> pressure;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getHumidity</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> humidity;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dataChange</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">//è°ƒç”¨ æ¥å…¥æ–¹çš„ update</span><br>      <br>      notifyObservers();<br>   &#125;<br><br>   <span class="hljs-comment">//å½“æ•°æ®æœ‰æ›´æ–°æ—¶ï¼Œå°±è°ƒç”¨ setData</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setData</span><span class="hljs-params">(<span class="hljs-type">float</span> temperature, <span class="hljs-type">float</span> pressure, <span class="hljs-type">float</span> humidity)</span> &#123;<br>      <span class="hljs-built_in">this</span>.temperatrue = temperature;<br>      <span class="hljs-built_in">this</span>.pressure = pressure;<br>      <span class="hljs-built_in">this</span>.humidity = humidity;<br>      <span class="hljs-comment">//è°ƒç”¨dataChangeï¼Œ å°†æœ€æ–°çš„ä¿¡æ¯ æ¨é€ç»™ æ¥å…¥æ–¹ currentConditions</span><br>      dataChange();<br>   &#125;<br><br>   <span class="hljs-comment">//æ³¨å†Œä¸€ä¸ªè§‚å¯Ÿè€…</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerObserver</span><span class="hljs-params">(Observer o)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      observers.add(o);<br>   &#125;<br><br>   <span class="hljs-comment">//ç§»é™¤ä¸€ä¸ªè§‚å¯Ÿè€…</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeObserver</span><span class="hljs-params">(Observer o)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">if</span>(observers.contains(o)) &#123;<br>         observers.remove(o);<br>      &#125;<br>   &#125;<br><br>   <span class="hljs-comment">//éå†æ‰€æœ‰çš„è§‚å¯Ÿè€…ï¼Œå¹¶é€šçŸ¥</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObservers</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; observers.size(); i++) &#123;<br>         observers.get(i).update(<span class="hljs-built_in">this</span>.temperatrue, <span class="hljs-built_in">this</span>.pressure, <span class="hljs-built_in">this</span>.humidity);<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs markdown">é€šçŸ¥å„ä¸ªæ³¨å†Œçš„è§‚å¯Ÿè€…, çœ‹çœ‹ä¿¡æ¯<br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mTemperature: 10.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mPressure: 100.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*Today mHumidity: 30.3*</span>**</span><br>===ç™¾åº¦ç½‘ç«™====<br><span class="hljs-strong">**<span class="hljs-emphasis">*ç™¾åº¦ç½‘ç«™ æ°”æ¸© : 10.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*ç™¾åº¦ç½‘ç«™ æ°”å‹: 100.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*ç™¾åº¦ç½‘ç«™ æ¹¿åº¦: 30.3*</span>**</span><br><br>é€šçŸ¥å„ä¸ªæ³¨å†Œçš„è§‚å¯Ÿè€…, çœ‹çœ‹ä¿¡æ¯<br>===ç™¾åº¦ç½‘ç«™====<br><span class="hljs-strong">**<span class="hljs-emphasis">*ç™¾åº¦ç½‘ç«™ æ°”æ¸© : 10.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*ç™¾åº¦ç½‘ç«™ æ°”å‹: 100.0*</span>**</span><br><span class="hljs-strong">**<span class="hljs-emphasis">*ç™¾åº¦ç½‘ç«™ æ¹¿åº¦: 30.3*</span>**</span><br></code></pre></td></tr></table></figure>
<h1 id="ä¸­ä»‹è€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#ä¸­ä»‹è€…æ¨¡å¼"></a> ä¸­ä»‹è€…æ¨¡å¼</h1>
<p>ä¸­ä»‹è€…æ¨¡å¼ï¼ˆMediator Patternï¼‰æ˜¯ç”¨æ¥é™ä½å¤šä¸ªå¯¹è±¡å’Œç±»ä¹‹é—´çš„é€šä¿¡å¤æ‚æ€§ã€‚è¿™ç§æ¨¡å¼æä¾›äº†ä¸€ä¸ªä¸­ä»‹ç±»ï¼Œè¯¥ç±»é€šå¸¸å¤„ç†ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶æ”¯æŒæ¾è€¦åˆï¼Œä½¿ä»£ç æ˜“äºç»´æŠ¤ã€‚ä¸­ä»‹è€…æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-17"><a class="markdownIt-Anchor" href="#ä»‹ç»-17"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ï¼Œä¸­ä»‹è€…ä½¿å„å¯¹è±¡ä¸éœ€è¦æ˜¾å¼åœ°ç›¸äº’å¼•ç”¨ï¼Œä»è€Œä½¿å…¶è€¦åˆæ¾æ•£ï¼Œè€Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong><br />
å¯¹è±¡ä¸å¯¹è±¡ä¹‹é—´å­˜åœ¨å¤§é‡çš„å…³è”å…³ç³»ï¼Œè¿™æ ·åŠ¿å¿…ä¼šå¯¼è‡´ç³»ç»Ÿçš„ç»“æ„å˜å¾—å¾ˆå¤æ‚ï¼ŒåŒæ—¶è‹¥ä¸€ä¸ªå¯¹è±¡å‘ç”Ÿæ”¹å˜ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦è·Ÿè¸ªä¸ä¹‹ç›¸å…³è”çš„å¯¹è±¡ï¼ŒåŒæ—¶åšå‡ºç›¸åº”çš„å¤„ç†ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> å¤šä¸ªç±»ç›¸äº’è€¦åˆï¼Œå½¢æˆäº†ç½‘çŠ¶ç»“æ„ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†ä¸Šè¿°ç½‘çŠ¶ç»“æ„åˆ†ç¦»ä¸ºæ˜Ÿå‹ç»“æ„ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å¯¹è±¡ Colleague ä¹‹é—´çš„é€šä¿¡å°è£…åˆ°ä¸€ä¸ªç±»ä¸­å•ç‹¬å¤„ç†ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€ä¸­å›½åŠ å…¥ WTO ä¹‹å‰æ˜¯å„ä¸ªå›½å®¶ç›¸äº’è´¸æ˜“ï¼Œç»“æ„å¤æ‚ï¼Œç°åœ¨æ˜¯å„ä¸ªå›½å®¶é€šè¿‡ WTO æ¥äº’ç›¸è´¸æ˜“ã€‚ 2ã€æœºåœºè°ƒåº¦ç³»ç»Ÿã€‚ 3ã€MVC æ¡†æ¶ï¼Œå…¶ä¸­Cï¼ˆæ§åˆ¶å™¨ï¼‰å°±æ˜¯ Mï¼ˆæ¨¡å‹ï¼‰å’Œ Vï¼ˆè§†å›¾ï¼‰çš„ä¸­ä»‹è€…ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€é™ä½äº†ç±»çš„å¤æ‚åº¦ï¼Œå°†ä¸€å¯¹å¤šè½¬åŒ–æˆäº†ä¸€å¯¹ä¸€ã€‚ 2ã€å„ä¸ªç±»ä¹‹é—´çš„è§£è€¦ã€‚ 3ã€ç¬¦åˆè¿ªç±³ç‰¹åŸåˆ™ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> ä¸­ä»‹è€…ä¼šåºå¤§ï¼Œå˜å¾—å¤æ‚éš¾ä»¥ç»´æŠ¤ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€ç³»ç»Ÿä¸­å¯¹è±¡ä¹‹é—´å­˜åœ¨æ¯”è¾ƒå¤æ‚çš„å¼•ç”¨å…³ç³»ï¼Œå¯¼è‡´å®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ç»“æ„æ··ä¹±è€Œä¸”éš¾ä»¥å¤ç”¨è¯¥å¯¹è±¡ã€‚2ã€æƒ³é€šè¿‡ä¸€ä¸ªä¸­é—´ç±»æ¥å°è£…å¤šä¸ªç±»ä¸­çš„è¡Œä¸ºï¼Œè€Œåˆä¸æƒ³ç”Ÿæˆå¤ªå¤šçš„å­ç±»ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> ä¸åº”å½“åœ¨èŒè´£æ··ä¹±çš„æ—¶å€™ä½¿ç”¨ã€‚</p>
<p><strong>ä¸­ä»‹è€…æ¨¡å¼çš„åŸç†ç±»å›¾:</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104145432933.png" srcset="/img/loading.gif" lazyload alt="image-20230104145432933" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(ä¸­ä»‹è€…æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>Mediator å°±æ˜¯æŠ½è±¡ä¸­ä»‹è€…,å®šä¹‰äº†åŒäº‹å¯¹è±¡åˆ°ä¸­ä»‹è€…å¯¹è±¡çš„æ¥å£</p>
</li>
<li>
<p>Colleague æ˜¯æŠ½è±¡åŒäº‹ç±»</p>
</li>
<li>
<p>ConcreteMediator å…·ä½“çš„ä¸­ä»‹è€…å¯¹è±¡, å®ç°æŠ½è±¡æ–¹æ³•, ä»–éœ€è¦çŸ¥é“æ‰€æœ‰çš„å…·ä½“çš„åŒäº‹ç±»,å³ä»¥ä¸€ä¸ªé›†åˆæ¥ç®¡ç†HashMap,å¹¶æ¥å—æŸä¸ªåŒäº‹å¯¹è±¡æ¶ˆæ¯ï¼Œå®Œæˆç›¸åº”çš„ä»»åŠ¡</p>
</li>
<li>
<p>ConcreteColleague å…·ä½“çš„åŒäº‹ç±»ï¼Œä¼šæœ‰å¾ˆå¤š, æ¯ä¸ªåŒäº‹åªçŸ¥é“è‡ªå·±çš„è¡Œä¸ºï¼Œè€Œä¸äº†è§£å…¶ä»–åŒäº‹ç±»çš„è¡Œä¸º(æ–¹æ³•)ï¼Œä½†æ˜¯ä»–ä»¬éƒ½ä¾èµ–ä¸­ä»‹è€…å¯¹è±¡</p>
</li>
</ol>
<h2 id="å®ç°-15"><a class="markdownIt-Anchor" href="#å®ç°-15"></a> å®ç°</h2>
<p>æ™ºèƒ½å®¶åº­é¡¹ç›®ï¼š</p>
<ol>
<li>
<p>æ™ºèƒ½å®¶åº­åŒ…æ‹¬å„ç§è®¾å¤‡ï¼Œé—¹é’Ÿã€å’–å•¡æœºã€ç”µè§†æœºã€çª—å¸˜ ç­‰</p>
</li>
<li>
<p>ä¸»äººè¦çœ‹ç”µè§†æ—¶ï¼Œå„ä¸ªè®¾å¤‡å¯ä»¥ååŒå·¥ä½œï¼Œè‡ªåŠ¨å®Œæˆçœ‹ç”µè§†çš„å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚æµç¨‹ä¸ºï¼šé—¹é“ƒå“èµ·-&gt;å’–å•¡æœºå¼€å§‹åšå’–å•¡-&gt;çª—å¸˜è‡ªåŠ¨è½ä¸‹-&gt;ç”µè§†æœºå¼€å§‹æ’­æ”¾</p>
</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104145924536.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<p><code>Alarm.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-comment">//å…·ä½“çš„åŒäº‹ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Alarm</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span> &#123;<br><br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Alarm</span><span class="hljs-params">(Mediator mediator, String name)</span> &#123;<br>      <span class="hljs-built_in">super</span>(mediator, name);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      <span class="hljs-comment">//åœ¨åˆ›å»ºAlarm åŒäº‹å¯¹è±¡æ—¶ï¼Œå°†è‡ªå·±æ”¾å…¥åˆ°ConcreteMediator å¯¹è±¡ä¸­[é›†åˆ]</span><br>      mediator.Register(name, <span class="hljs-built_in">this</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendAlarm</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange)</span> &#123;<br>      SendMessage(stateChange);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//è°ƒç”¨çš„ä¸­ä»‹è€…å¯¹è±¡çš„getMessage</span><br>      <span class="hljs-built_in">this</span>.GetMediator().GetMessage(stateChange, <span class="hljs-built_in">this</span>.name);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ClientTest.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientTest</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡</span><br>      <span class="hljs-type">Mediator</span> <span class="hljs-variable">mediator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteMediator</span>();<br>      <br>      <span class="hljs-comment">//åˆ›å»ºAlarm å¹¶ä¸”åŠ å…¥åˆ°  ConcreteMediator å¯¹è±¡çš„HashMap</span><br>      <span class="hljs-type">Alarm</span> <span class="hljs-variable">alarm</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Alarm</span>(mediator, <span class="hljs-string">&quot;alarm&quot;</span>);<br>      <br>      <span class="hljs-comment">//åˆ›å»ºäº†CoffeeMachine å¯¹è±¡ï¼Œå¹¶  ä¸”åŠ å…¥åˆ°  ConcreteMediator å¯¹è±¡çš„HashMap</span><br>      <span class="hljs-type">CoffeeMachine</span> <span class="hljs-variable">coffeeMachine</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CoffeeMachine</span>(mediator,<br>            <span class="hljs-string">&quot;coffeeMachine&quot;</span>);<br>      <br>      <span class="hljs-comment">//åˆ›å»º Curtains , å¹¶  ä¸”åŠ å…¥åˆ°  ConcreteMediator å¯¹è±¡çš„HashMap</span><br>      <span class="hljs-type">Curtains</span> <span class="hljs-variable">curtains</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Curtains</span>(mediator, <span class="hljs-string">&quot;curtains&quot;</span>);<br>      <span class="hljs-type">TV</span> <span class="hljs-variable">tV</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TV</span>(mediator, <span class="hljs-string">&quot;TV&quot;</span>);<br>      <br>      <span class="hljs-comment">//è®©é—¹é’Ÿå‘å‡ºæ¶ˆæ¯</span><br>      alarm.SendAlarm(<span class="hljs-number">0</span>);<br>      coffeeMachine.FinishCoffee();<br>      alarm.SendAlarm(<span class="hljs-number">1</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>CoffeeMachine.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CoffeeMachine</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">CoffeeMachine</span><span class="hljs-params">(Mediator mediator, String name)</span> &#123;<br>      <span class="hljs-built_in">super</span>(mediator, name);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      mediator.Register(name, <span class="hljs-built_in">this</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-built_in">this</span>.GetMediator().GetMessage(stateChange, <span class="hljs-built_in">this</span>.name);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">StartCoffee</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;It&#x27;s time to startcoffee!&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">FinishCoffee</span><span class="hljs-params">()</span> &#123;<br><br>      System.out.println(<span class="hljs-string">&quot;After 5 minutes!&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;Coffee is ok!&quot;</span>);<br>      SendMessage(<span class="hljs-number">0</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Colleague.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-comment">//åŒäº‹æŠ½è±¡ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Colleague</span> &#123;<br>   <span class="hljs-keyword">private</span> Mediator mediator;<br>   <span class="hljs-keyword">public</span> String name;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Colleague</span><span class="hljs-params">(Mediator mediator, String name)</span> &#123;<br><br>      <span class="hljs-built_in">this</span>.mediator = mediator;<br>      <span class="hljs-built_in">this</span>.name = name;<br><br>   &#125;<br><br>   <span class="hljs-keyword">public</span> Mediator <span class="hljs-title function_">GetMediator</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.mediator;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ConcreteMediator.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-comment">//å…·ä½“çš„ä¸­ä»‹è€…ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteMediator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Mediator</span> &#123;<br>   <span class="hljs-comment">//é›†åˆï¼Œæ”¾å…¥æ‰€æœ‰çš„åŒäº‹å¯¹è±¡</span><br>   <span class="hljs-keyword">private</span> HashMap&lt;String, Colleague&gt; colleagueMap;<br>   <span class="hljs-keyword">private</span> HashMap&lt;String, String&gt; interMap;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteMediator</span><span class="hljs-params">()</span> &#123;<br>      colleagueMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, Colleague&gt;();<br>      interMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;String, String&gt;();<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Register</span><span class="hljs-params">(String colleagueName, Colleague colleague)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      colleagueMap.put(colleagueName, colleague);<br><br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br><br>      <span class="hljs-keyword">if</span> (colleague <span class="hljs-keyword">instanceof</span> Alarm) &#123;<br>         interMap.put(<span class="hljs-string">&quot;Alarm&quot;</span>, colleagueName);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colleague <span class="hljs-keyword">instanceof</span> CoffeeMachine) &#123;<br>         interMap.put(<span class="hljs-string">&quot;CoffeeMachine&quot;</span>, colleagueName);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colleague <span class="hljs-keyword">instanceof</span> TV) &#123;<br>         interMap.put(<span class="hljs-string">&quot;TV&quot;</span>, colleagueName);<br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colleague <span class="hljs-keyword">instanceof</span> Curtains) &#123;<br>         interMap.put(<span class="hljs-string">&quot;Curtains&quot;</span>, colleagueName);<br>      &#125;<br><br>   &#125;<br><br>   <span class="hljs-comment">//å…·ä½“ä¸­ä»‹è€…çš„æ ¸å¿ƒæ–¹æ³•</span><br>   <span class="hljs-comment">//1. æ ¹æ®å¾—åˆ°æ¶ˆæ¯ï¼Œå®Œæˆå¯¹åº”ä»»åŠ¡</span><br>   <span class="hljs-comment">//2. ä¸­ä»‹è€…åœ¨è¿™ä¸ªæ–¹æ³•ï¼Œåè°ƒå„ä¸ªå…·ä½“çš„åŒäº‹å¯¹è±¡ï¼Œå®Œæˆä»»åŠ¡</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">GetMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange, String colleagueName)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br><br>      <span class="hljs-comment">//å¤„ç†é—¹é’Ÿå‘å‡ºçš„æ¶ˆæ¯</span><br>      <span class="hljs-keyword">if</span> (colleagueMap.get(colleagueName) <span class="hljs-keyword">instanceof</span> Alarm) &#123;<br>         <span class="hljs-keyword">if</span> (stateChange == <span class="hljs-number">0</span>) &#123;<br>            ((CoffeeMachine) (colleagueMap.get(interMap<br>                  .get(<span class="hljs-string">&quot;CoffeeMachine&quot;</span>)))).StartCoffee();<br>            ((TV) (colleagueMap.get(interMap.get(<span class="hljs-string">&quot;TV&quot;</span>)))).StartTv();<br>         &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (stateChange == <span class="hljs-number">1</span>) &#123;<br>            ((TV) (colleagueMap.get(interMap.get(<span class="hljs-string">&quot;TV&quot;</span>)))).StopTv();<br>         &#125;<br><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colleagueMap.get(colleagueName) <span class="hljs-keyword">instanceof</span> CoffeeMachine) &#123;<br>         ((Curtains) (colleagueMap.get(interMap.get(<span class="hljs-string">&quot;Curtains&quot;</span>))))<br>               .UpCurtains();<br><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colleagueMap.get(colleagueName) <span class="hljs-keyword">instanceof</span> TV) &#123;<span class="hljs-comment">//å¦‚æœTVå‘ç°æ¶ˆæ¯</span><br><br>      &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (colleagueMap.get(colleagueName) <span class="hljs-keyword">instanceof</span> Curtains) &#123;<br>         <span class="hljs-comment">//å¦‚æœæ˜¯ä»¥çª—å¸˜å‘å‡ºçš„æ¶ˆæ¯ï¼Œè¿™é‡Œå¤„ç†...</span><br>      &#125;<br><br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Curtains.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Curtains</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Curtains</span><span class="hljs-params">(Mediator mediator, String name)</span> &#123;<br>      <span class="hljs-built_in">super</span>(mediator, name);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      mediator.Register(name, <span class="hljs-built_in">this</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-built_in">this</span>.GetMediator().GetMessage(stateChange, <span class="hljs-built_in">this</span>.name);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">UpCurtains</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;I am holding Up Curtains!&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Mediator.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Mediator</span> &#123;<br>   <span class="hljs-comment">//å°†ç»™ä¸­ä»‹è€…å¯¹è±¡ï¼ŒåŠ å…¥åˆ°é›†åˆä¸­</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">Register</span><span class="hljs-params">(String colleagueName, Colleague colleague)</span>;<br><br>   <span class="hljs-comment">//æ¥æ”¶æ¶ˆæ¯, å…·ä½“çš„åŒäº‹å¯¹è±¡å‘å‡º</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">GetMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange, String colleagueName)</span>;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>TV.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.mediator.smarthouse;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TV</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Colleague</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">TV</span><span class="hljs-params">(Mediator mediator, String name)</span> &#123;<br>      <span class="hljs-built_in">super</span>(mediator, name);<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      mediator.Register(name, <span class="hljs-built_in">this</span>);<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">SendMessage</span><span class="hljs-params">(<span class="hljs-type">int</span> stateChange)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-built_in">this</span>.GetMediator().GetMessage(stateChange, <span class="hljs-built_in">this</span>.name);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">StartTv</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;It&#x27;s time to StartTv!&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">StopTv</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;StopTv!&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs vhdl">It<span class="hljs-symbol">&#x27;s</span> <span class="hljs-built_in">time</span> <span class="hljs-keyword">to</span> startcoffee!<br>It<span class="hljs-symbol">&#x27;s</span> <span class="hljs-built_in">time</span> <span class="hljs-keyword">to</span> StartTv!<br><span class="hljs-keyword">After</span> <span class="hljs-number">5</span> minutes!<br>Coffee <span class="hljs-keyword">is</span> ok!<br>I am holding Up Curtains!<br>StopTv!<br></code></pre></td></tr></table></figure>
<h2 id="ä¸­ä»‹è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#ä¸­ä»‹è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> ä¸­ä»‹è€…æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>å¤šä¸ªç±»ç›¸äº’è€¦åˆï¼Œä¼šå½¢æˆç½‘çŠ¶ç»“æ„, ä½¿ç”¨ä¸­ä»‹è€…æ¨¡å¼å°†ç½‘çŠ¶ç»“æ„åˆ†ç¦»ä¸ºæ˜Ÿå‹ç»“æ„ï¼Œè¿›è¡Œè§£è€¦</p>
</li>
<li>
<p>å‡å°‘ç±»é—´ä¾èµ–ï¼Œé™ä½äº†è€¦åˆï¼Œç¬¦åˆè¿ªç±³ç‰¹åŸåˆ™</p>
</li>
<li>
<p><mark>ä¸­ä»‹è€…</mark><strong>æ‰¿æ‹…äº†è¾ƒå¤šçš„è´£ä»»ï¼Œä¸€æ—¦ä¸­ä»‹è€…å‡ºç°äº†é—®é¢˜ï¼Œæ•´ä¸ªç³»ç»Ÿå°±ä¼šå—åˆ°å½±å“</strong></p>
</li>
<li>
<p>å¦‚æœè®¾è®¡ä¸å½“ï¼Œä¸­ä»‹è€…å¯¹è±¡æœ¬èº«å˜å¾—è¿‡äºå¤æ‚ï¼Œè¿™ç‚¹åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„</p>
</li>
</ol>
<h1 id="å¤‡å¿˜å½•æ¨¡å¼"><a class="markdownIt-Anchor" href="#å¤‡å¿˜å½•æ¨¡å¼"></a> å¤‡å¿˜å½•æ¨¡å¼</h1>
<p>å¤‡å¿˜å½•æ¨¡å¼ï¼ˆMemento Patternï¼‰ä¿å­˜ä¸€ä¸ªå¯¹è±¡çš„æŸä¸ªçŠ¶æ€ï¼Œä»¥ä¾¿åœ¨é€‚å½“çš„æ—¶å€™æ¢å¤å¯¹è±¡ã€‚å¤‡å¿˜å½•æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-18"><a class="markdownIt-Anchor" href="#ä»‹ç»-18"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> æ‰€è°“å¤‡å¿˜å½•æ¨¡å¼å°±æ˜¯åœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œè¿™æ ·å¯ä»¥åœ¨ä»¥åå°†å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong><br />
å¾ˆå¤šæ—¶å€™æˆ‘ä»¬æ€»æ˜¯éœ€è¦è®°å½•ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œè¿™æ ·åšçš„ç›®çš„å°±æ˜¯ä¸ºäº†å…è®¸ç”¨æˆ·å–æ¶ˆä¸ç¡®å®šæˆ–è€…é”™è¯¯çš„æ“ä½œï¼Œèƒ½å¤Ÿæ¢å¤åˆ°ä»–åŸå…ˆçš„çŠ¶æ€ï¼Œä½¿å¾—ä»–æœ‰&quot;åæ‚”è¯&quot;å¯åƒã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> é€šè¿‡ä¸€ä¸ªå¤‡å¿˜å½•ç±»ä¸“é—¨å­˜å‚¨å¯¹è±¡çŠ¶æ€ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å®¢æˆ·ä¸ä¸å¤‡å¿˜å½•ç±»è€¦åˆï¼Œä¸å¤‡å¿˜å½•ç®¡ç†ç±»è€¦åˆã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€åæ‚”è¯ã€‚ 2ã€æ‰“æ¸¸æˆæ—¶çš„å­˜æ¡£ã€‚ 3ã€Windows é‡Œçš„ ctrl + zã€‚ 4ã€IE ä¸­çš„åé€€ã€‚ 5ã€æ•°æ®åº“çš„äº‹åŠ¡ç®¡ç†ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ç»™ç”¨æˆ·æä¾›äº†ä¸€ç§å¯ä»¥æ¢å¤çŠ¶æ€çš„æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨æˆ·èƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿åœ°å›åˆ°æŸä¸ªå†å²çš„çŠ¶æ€ã€‚2ã€å®ç°äº†ä¿¡æ¯çš„å°è£…ï¼Œä½¿å¾—ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒçŠ¶æ€çš„ä¿å­˜ç»†èŠ‚ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> æ¶ˆè€—èµ„æºã€‚å¦‚æœç±»çš„æˆå‘˜å˜é‡è¿‡å¤šï¼ŒåŠ¿å¿…ä¼šå ç”¨æ¯”è¾ƒå¤§çš„èµ„æºï¼Œè€Œä¸”æ¯ä¸€æ¬¡ä¿å­˜éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„å†…å­˜ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€éœ€è¦ä¿å­˜/æ¢å¤æ•°æ®çš„ç›¸å…³çŠ¶æ€åœºæ™¯ã€‚ 2ã€æä¾›ä¸€ä¸ªå¯å›æ»šçš„æ“ä½œã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> 1ã€ä¸ºäº†ç¬¦åˆè¿ªç±³ç‰¹åŸåˆ™ï¼Œè¿˜è¦å¢åŠ ä¸€ä¸ªç®¡ç†å¤‡å¿˜å½•çš„ç±»ã€‚ 2ã€ä¸ºäº†èŠ‚çº¦å†…å­˜ï¼Œå¯ä½¿ç”¨åŸå‹æ¨¡å¼+å¤‡å¿˜å½•æ¨¡å¼ã€‚</p>
<p><strong>å¤‡å¿˜å½•æ¨¡å¼çš„åŸç†ç±»å›¾:</strong></p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104162405505.png" srcset="/img/loading.gif" lazyload alt="image-20230104162405505" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(å¤‡å¿˜å½•æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>originator : å¯¹è±¡(éœ€è¦ä¿å­˜çŠ¶æ€çš„å¯¹è±¡)</p>
</li>
<li>
<p>Memento ï¼š å¤‡å¿˜å½•å¯¹è±¡,è´Ÿè´£ä¿å­˜å¥½è®°å½•ï¼Œå³ Originator å†…éƒ¨çŠ¶æ€</p>
</li>
<li>
<p>Caretaker: å®ˆæŠ¤è€…å¯¹è±¡,è´Ÿè´£ä¿å­˜å¤šä¸ªå¤‡å¿˜å½•å¯¹è±¡ï¼Œ ä½¿ç”¨é›†åˆç®¡ç†ï¼Œæé«˜æ•ˆç‡</p>
</li>
<li>
<p>è¯´æ˜ï¼šå¦‚æœå¸Œæœ›ä¿å­˜å¤šä¸ª originator å¯¹è±¡çš„ä¸åŒæ—¶é—´çš„çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ï¼Œåªéœ€è¦è¦ HashMap &lt;String, é›†åˆ&gt;</p>
</li>
</ol>
<h2 id="å®ç°-16"><a class="markdownIt-Anchor" href="#å®ç°-16"></a> å®ç°</h2>
<h3 id="ç®€å•å®ç°"><a class="markdownIt-Anchor" href="#ç®€å•å®ç°"></a> ç®€å•å®ç°</h3>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104163106314.png" srcset="/img/loading.gif" lazyload alt="image-20230104163106314" /></p>
<p><code>Caretaker.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.theory;<br><br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretaker</span> &#123;<br>   <br>   <span class="hljs-comment">//åœ¨List é›†åˆä¸­ä¼šæœ‰å¾ˆå¤šçš„å¤‡å¿˜å½•å¯¹è±¡</span><br>   <span class="hljs-keyword">private</span> List&lt;Memento&gt; mementoList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;Memento&gt;();<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Memento memento)</span> &#123;<br>      mementoList.add(memento);<br>   &#125;<br>   <br>   <span class="hljs-comment">//è·å–åˆ°ç¬¬indexä¸ªOriginator çš„ å¤‡å¿˜å½•å¯¹è±¡(å³ä¿å­˜çŠ¶æ€)</span><br>   <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">get</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> &#123;<br>      <span class="hljs-keyword">return</span> mementoList.get(index);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.theory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <br>      <span class="hljs-type">Originator</span> <span class="hljs-variable">originator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Originator</span>();<br>      <span class="hljs-type">Caretaker</span> <span class="hljs-variable">caretaker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Caretaker</span>();<br>      <br>      originator.setState(<span class="hljs-string">&quot; çŠ¶æ€#1 æ”»å‡»åŠ› 100 &quot;</span>);<br>      <br>      <span class="hljs-comment">//ä¿å­˜äº†å½“å‰çš„çŠ¶æ€</span><br>      caretaker.add(originator.saveStateMemento());<br>      <br>      originator.setState(<span class="hljs-string">&quot; çŠ¶æ€#2 æ”»å‡»åŠ› 80 &quot;</span>);<br>      <br>      caretaker.add(originator.saveStateMemento());<br>      <br>      originator.setState(<span class="hljs-string">&quot; çŠ¶æ€#3 æ”»å‡»åŠ› 50 &quot;</span>);<br>      caretaker.add(originator.saveStateMemento());<br>      <br>      <br>      <br>      System.out.println(<span class="hljs-string">&quot;å½“å‰çš„çŠ¶æ€æ˜¯ =&quot;</span> + originator.getState());<br>      <br>      <span class="hljs-comment">//å¸Œæœ›å¾—åˆ°çŠ¶æ€ 1, å°† originator æ¢å¤åˆ°çŠ¶æ€1</span><br>      <br>      originator.getStateFromMemento(caretaker.get(<span class="hljs-number">0</span>));<br>      System.out.println(<span class="hljs-string">&quot;æ¢å¤åˆ°çŠ¶æ€1 , å½“å‰çš„çŠ¶æ€æ˜¯&quot;</span>);<br>      System.out.println(<span class="hljs-string">&quot;å½“å‰çš„çŠ¶æ€æ˜¯ =&quot;</span> + originator.getState());<br><br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Memento.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.theory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> &#123;<br>   <span class="hljs-keyword">private</span> String state;<br><br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Memento</span><span class="hljs-params">(String state)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.state = state;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> state;<br>   &#125;<br>   <br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Originator.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.theory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Originator</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String state;<span class="hljs-comment">//çŠ¶æ€ä¿¡æ¯</span><br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(String state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-comment">//ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä¿å­˜ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ Memento</span><br>    <span class="hljs-comment">//å› æ­¤ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å› Memento</span><br>    <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">saveStateMemento</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memento</span>(state);<br>    &#125;<br><br>    <span class="hljs-comment">//é€šè¿‡å¤‡å¿˜å½•å¯¹è±¡ï¼Œæ¢å¤çŠ¶æ€</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getStateFromMemento</span><span class="hljs-params">(Memento memento)</span> &#123;<br>        state = memento.getState();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c">å½“å‰çš„çŠ¶æ€æ˜¯ = çŠ¶æ€<span class="hljs-meta">#3 æ”»å‡»åŠ› 50 </span><br>æ¢å¤åˆ°çŠ¶æ€<span class="hljs-number">1</span> , å½“å‰çš„çŠ¶æ€æ˜¯<br>å½“å‰çš„çŠ¶æ€æ˜¯ = çŠ¶æ€<span class="hljs-meta">#1 æ”»å‡»åŠ› 100 </span><br></code></pre></td></tr></table></figure>
<h3 id="æ¸¸æˆè§’è‰²æ¢å¤çŠ¶æ€"><a class="markdownIt-Anchor" href="#æ¸¸æˆè§’è‰²æ¢å¤çŠ¶æ€"></a> æ¸¸æˆè§’è‰²æ¢å¤çŠ¶æ€</h3>
<p>æ¸¸æˆè§’è‰²æœ‰æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›ï¼Œåœ¨å¤§æˆ˜ Boss å‰ä¿å­˜è‡ªèº«çš„çŠ¶æ€(æ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›)ï¼Œå½“å¤§æˆ˜ Boss åæ”»å‡»åŠ›å’Œé˜²å¾¡åŠ›ä¸‹é™ï¼Œä»å¤‡å¿˜å½•å¯¹è±¡æ¢å¤åˆ°å¤§æˆ˜å‰çš„çŠ¶æ€</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104163634868.png" srcset="/img/loading.gif" lazyload alt="image-20230104163634868" /></p>
<p><code>Caretaker.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.game;<br><br><span class="hljs-comment">//å®ˆæŠ¤è€…å¯¹è±¡, ä¿å­˜æ¸¸æˆè§’è‰²çš„çŠ¶æ€</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretaker</span> &#123;<br><br>   <span class="hljs-comment">//å¦‚æœåªä¿å­˜ä¸€æ¬¡çŠ¶æ€</span><br>   <span class="hljs-keyword">private</span> Memento  memento;<br>   <span class="hljs-comment">//å¯¹GameRole ä¿å­˜å¤šæ¬¡çŠ¶æ€</span><br>   <span class="hljs-comment">//private ArrayList&lt;Memento&gt; mementos;</span><br>   <span class="hljs-comment">//å¯¹å¤šä¸ªæ¸¸æˆè§’è‰²ä¿å­˜å¤šä¸ªçŠ¶æ€</span><br>   <span class="hljs-comment">//private HashMap&lt;String, ArrayList&lt;Memento&gt;&gt; rolesMementos;</span><br><br>   <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">getMemento</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> memento;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMemento</span><span class="hljs-params">(Memento memento)</span> &#123;<br>      <span class="hljs-built_in">this</span>.memento = memento;<br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.game;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºæ¸¸æˆè§’è‰²</span><br>      <span class="hljs-type">GameRole</span> <span class="hljs-variable">gameRole</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GameRole</span>();<br>      gameRole.setVit(<span class="hljs-number">100</span>);<br>      gameRole.setDef(<span class="hljs-number">100</span>);<br>      <br>      System.out.println(<span class="hljs-string">&quot;å’Œbosså¤§æˆ˜å‰çš„çŠ¶æ€&quot;</span>);<br>      gameRole.display();<br>      <br>      <span class="hljs-comment">//æŠŠå½“å‰çŠ¶æ€ä¿å­˜caretaker</span><br>      <span class="hljs-type">Caretaker</span> <span class="hljs-variable">caretaker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Caretaker</span>();<br>      caretaker.setMemento(gameRole.createMemento());<br>      <br>      System.out.println(<span class="hljs-string">&quot;å’Œbosså¤§æˆ˜~~~&quot;</span>);<br>      gameRole.setDef(<span class="hljs-number">30</span>);<br>      gameRole.setVit(<span class="hljs-number">30</span>);<br>      <br>      gameRole.display();<br>      <br>      System.out.println(<span class="hljs-string">&quot;å¤§æˆ˜åï¼Œä½¿ç”¨å¤‡å¿˜å½•å¯¹è±¡æ¢å¤åˆ°ç«™å‰&quot;</span>);<br>      <br>      gameRole.recoverGameRoleFromMemento(caretaker.getMemento());<br>      System.out.println(<span class="hljs-string">&quot;æ¢å¤åçš„çŠ¶æ€&quot;</span>);<br>      gameRole.display();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>GameRole.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.game;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GameRole</span> &#123;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> vit;<br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> def;<br>   <br>   <span class="hljs-comment">//åˆ›å»ºMemento ,å³æ ¹æ®å½“å‰çš„çŠ¶æ€å¾—åˆ°Memento</span><br>   <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">createMemento</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memento</span>(vit, def);<br>   &#125;<br>   <br>   <span class="hljs-comment">//ä»å¤‡å¿˜å½•å¯¹è±¡ï¼Œæ¢å¤GameRoleçš„çŠ¶æ€</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">recoverGameRoleFromMemento</span><span class="hljs-params">(Memento memento)</span> &#123;<br>      <span class="hljs-built_in">this</span>.vit = memento.getVit();<br>      <span class="hljs-built_in">this</span>.def = memento.getDef();<br>   &#125;<br>   <br>   <span class="hljs-comment">//æ˜¾ç¤ºå½“å‰æ¸¸æˆè§’è‰²çš„çŠ¶æ€</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;æ¸¸æˆè§’è‰²å½“å‰çš„æ”»å‡»åŠ›ï¼š&quot;</span> + <span class="hljs-built_in">this</span>.vit + <span class="hljs-string">&quot; é˜²å¾¡åŠ›: &quot;</span> + <span class="hljs-built_in">this</span>.def);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVit</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> vit;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVit</span><span class="hljs-params">(<span class="hljs-type">int</span> vit)</span> &#123;<br>      <span class="hljs-built_in">this</span>.vit = vit;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDef</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> def;<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDef</span><span class="hljs-params">(<span class="hljs-type">int</span> def)</span> &#123;<br>      <span class="hljs-built_in">this</span>.def = def;<br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Memento.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.memento.game;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> &#123;<br><br>   <span class="hljs-comment">//æ”»å‡»åŠ›</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> vit;<br>   <span class="hljs-comment">//é˜²å¾¡åŠ›</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> def;<br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Memento</span><span class="hljs-params">(<span class="hljs-type">int</span> vit, <span class="hljs-type">int</span> def)</span> &#123;<br>      <span class="hljs-built_in">super</span>();<br>      <span class="hljs-built_in">this</span>.vit = vit;<br>      <span class="hljs-built_in">this</span>.def = def;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getVit</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> vit;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setVit</span><span class="hljs-params">(<span class="hljs-type">int</span> vit)</span> &#123;<br>      <span class="hljs-built_in">this</span>.vit = vit;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDef</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> def;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDef</span><span class="hljs-params">(<span class="hljs-type">int</span> def)</span> &#123;<br>      <span class="hljs-built_in">this</span>.def = def;<br>   &#125;<br>   <br>   <br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">å’Œbosså¤§æˆ˜å‰çš„çŠ¶æ€</span><br><span class="hljs-attribute">æ¸¸æˆè§’è‰²å½“å‰çš„æ”»å‡»åŠ›ï¼š100 é˜²å¾¡åŠ›</span><span class="hljs-punctuation">:</span> <span class="hljs-string">100</span><br><span class="hljs-attribute">å’Œbosså¤§æˆ˜~~~</span><br><span class="hljs-attribute">æ¸¸æˆè§’è‰²å½“å‰çš„æ”»å‡»åŠ›ï¼š30 é˜²å¾¡åŠ›</span><span class="hljs-punctuation">:</span> <span class="hljs-string">30</span><br><span class="hljs-attribute">å¤§æˆ˜åï¼Œä½¿ç”¨å¤‡å¿˜å½•å¯¹è±¡æ¢å¤åˆ°ç«™å‰</span><br><span class="hljs-attribute">æ¢å¤åçš„çŠ¶æ€</span><br><span class="hljs-attribute">æ¸¸æˆè§’è‰²å½“å‰çš„æ”»å‡»åŠ›ï¼š100 é˜²å¾¡åŠ›</span><span class="hljs-punctuation">:</span> <span class="hljs-string">100</span><br></code></pre></td></tr></table></figure>
<h2 id="å¤‡å¿˜å½•æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#å¤‡å¿˜å½•æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> å¤‡å¿˜å½•æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>ç»™ç”¨æˆ·æä¾›äº†ä¸€ç§å¯ä»¥æ¢å¤çŠ¶æ€çš„æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨æˆ·èƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿åœ°å›åˆ°æŸä¸ªå†å²çš„çŠ¶æ€</p>
</li>
<li>
<p>å®ç°äº†ä¿¡æ¯çš„å°è£…ï¼Œä½¿å¾—ç”¨æˆ·ä¸éœ€è¦å…³å¿ƒçŠ¶æ€çš„ä¿å­˜ç»†èŠ‚</p>
</li>
<li>
<p>å¦‚æœç±»çš„æˆå‘˜å˜é‡è¿‡å¤šï¼ŒåŠ¿å¿…ä¼šå ç”¨æ¯”è¾ƒå¤§çš„èµ„æºï¼Œè€Œä¸”æ¯ä¸€æ¬¡ä¿å­˜éƒ½ä¼šæ¶ˆè€—ä¸€å®šçš„å†…å­˜, è¿™ä¸ªéœ€è¦æ³¨æ„</p>
</li>
<li>
<p>é€‚ç”¨çš„åº”ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>1ã€åæ‚”è¯ã€‚</li>
<li>2ã€æ‰“æ¸¸æˆæ—¶çš„å­˜æ¡£ã€‚</li>
<li>3ã€Windows é‡Œçš„ ctri + zã€‚</li>
<li>4ã€IE ä¸­çš„åé€€ã€‚</li>
<li>5ã€æ•°æ®åº“çš„äº‹åŠ¡ç®¡ç†</li>
</ul>
</li>
</ol>
<h1 id="è§£é‡Šå™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#è§£é‡Šå™¨æ¨¡å¼"></a> è§£é‡Šå™¨æ¨¡å¼</h1>
<p>è§£é‡Šå™¨æ¨¡å¼ï¼ˆInterpreter Patternï¼‰æä¾›äº†è¯„ä¼°è¯­è¨€çš„è¯­æ³•æˆ–è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œå®ƒå±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼å®ç°äº†ä¸€ä¸ªè¡¨è¾¾å¼æ¥å£ï¼Œè¯¥æ¥å£è§£é‡Šä¸€ä¸ªç‰¹å®šçš„ä¸Šä¸‹æ–‡ã€‚è¿™ç§æ¨¡å¼è¢«ç”¨åœ¨ SQL<br />
è§£æã€ç¬¦å·å¤„ç†å¼•æ“ç­‰ã€‚</p>
<h2 id="ä»‹ç»-19"><a class="markdownIt-Anchor" href="#ä»‹ç»-19"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> ç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¿™ä¸ªè§£é‡Šå™¨ä½¿ç”¨è¯¥æ ‡è¯†æ¥è§£é‡Šè¯­è¨€ä¸­çš„å¥å­ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> å¯¹äºä¸€äº›å›ºå®šæ–‡æ³•æ„å»ºä¸€ä¸ªè§£é‡Šå¥å­çš„è§£é‡Šå™¨ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong><br />
å¦‚æœä¸€ç§ç‰¹å®šç±»å‹çš„é—®é¢˜å‘ç”Ÿçš„é¢‘ç‡è¶³å¤Ÿé«˜ï¼Œé‚£ä¹ˆå¯èƒ½å°±å€¼å¾—å°†è¯¥é—®é¢˜çš„å„ä¸ªå®ä¾‹è¡¨è¿°ä¸ºä¸€ä¸ªç®€å•è¯­è¨€ä¸­çš„å¥å­ã€‚è¿™æ ·å°±å¯ä»¥æ„å»ºä¸€ä¸ªè§£é‡Šå™¨ï¼Œè¯¥è§£é‡Šå™¨é€šè¿‡è§£é‡Šè¿™äº›å¥å­æ¥è§£å†³è¯¥é—®é¢˜ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> æ„å»ºè¯­æ³•æ ‘ï¼Œå®šä¹‰ç»ˆç»“ç¬¦ä¸éç»ˆç»“ç¬¦ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> æ„å»ºç¯å¢ƒç±»ï¼ŒåŒ…å«è§£é‡Šå™¨ä¹‹å¤–çš„ä¸€äº›å…¨å±€ä¿¡æ¯ï¼Œä¸€èˆ¬æ˜¯ HashMapã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> ç¼–è¯‘å™¨ã€è¿ç®—è¡¨è¾¾å¼è®¡ç®—ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å¯æ‰©å±•æ€§æ¯”è¾ƒå¥½ï¼Œçµæ´»ã€‚ 2ã€å¢åŠ äº†æ–°çš„è§£é‡Šè¡¨è¾¾å¼çš„æ–¹å¼ã€‚ 3ã€æ˜“äºå®ç°ç®€å•æ–‡æ³•ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€å¯åˆ©ç”¨åœºæ™¯æ¯”è¾ƒå°‘ã€‚ 2ã€å¯¹äºå¤æ‚çš„æ–‡æ³•æ¯”è¾ƒéš¾ç»´æŠ¤ã€‚ 3ã€è§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€ã€‚ 4ã€è§£é‡Šå™¨æ¨¡å¼é‡‡ç”¨é€’å½’è°ƒç”¨æ–¹æ³•ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€å¯ä»¥å°†ä¸€ä¸ªéœ€è¦è§£é‡Šæ‰§è¡Œçš„è¯­è¨€ä¸­çš„å¥å­è¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘ã€‚ 2ã€ä¸€äº›é‡å¤å‡ºç°çš„é—®é¢˜å¯ä»¥ç”¨ä¸€ç§ç®€å•çš„è¯­è¨€æ¥è¿›è¡Œè¡¨è¾¾ã€‚<br />
3ã€ä¸€ä¸ªç®€å•è¯­æ³•éœ€è¦è§£é‡Šçš„åœºæ™¯ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> å¯åˆ©ç”¨åœºæ™¯æ¯”è¾ƒå°‘ï¼ŒJAVA ä¸­å¦‚æœç¢°åˆ°å¯ä»¥ç”¨ expression4J ä»£æ›¿ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104170305404.png" srcset="/img/loading.gif" lazyload alt="image-20230104170305404" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(è§£é‡Šå™¨æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>Context: æ˜¯ç¯å¢ƒè§’è‰²,å«æœ‰è§£é‡Šå™¨ä¹‹å¤–çš„å…¨å±€ä¿¡æ¯.</p>
</li>
<li>
<p>AbstractExpression: æŠ½è±¡è¡¨è¾¾å¼ï¼Œ å£°æ˜ä¸€ä¸ªæŠ½è±¡çš„è§£é‡Šæ“ä½œ,è¿™ä¸ªæ–¹æ³•ä¸ºæŠ½è±¡è¯­æ³•æ ‘ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹æ‰€å…±äº«</p>
</li>
<li>
<p>TerminalExpression: ä¸ºç»ˆç»“ç¬¦è¡¨è¾¾å¼, å®ç°ä¸æ–‡æ³•ä¸­çš„ç»ˆç»“ç¬¦ç›¸å…³çš„è§£é‡Šæ“ä½œ</p>
</li>
<li>
<p>NonTermialExpression: ä¸ºéç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼Œä¸ºæ–‡æ³•ä¸­çš„éç»ˆç»“ç¬¦å®ç°è§£é‡Šæ“ä½œ.</p>
</li>
<li>
<p>è¯´æ˜ï¼š è¾“å…¥ Context he TerminalExpression ä¿¡æ¯é€šè¿‡ Client è¾“å…¥å³å¯</p>
</li>
</ol>
<h2 id="å®ç°-17"><a class="markdownIt-Anchor" href="#å®ç°-17"></a> å®ç°</h2>
<p>åº”ç”¨å®ä¾‹è¦æ±‚</p>
<p>é€šè¿‡è§£é‡Šå™¨æ¨¡å¼æ¥å®ç°å››åˆ™è¿ç®—ï¼Œ</p>
<p>å¦‚è®¡ç®— a+b-c çš„å€¼</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230104185525137.png" srcset="/img/loading.gif" lazyload alt="image-20230104185525137" /></p>
<p><code>AddExpression.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŠ æ³•è§£é‡Šå™¨</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AddExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SymbolExpression</span>  &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">AddExpression</span><span class="hljs-params">(Expression left, Expression right)</span> &#123;<br>      <span class="hljs-built_in">super</span>(left, right);<br>   &#125;<br><br>   <span class="hljs-comment">//å¤„ç†ç›¸åŠ </span><br>   <span class="hljs-comment">//var ä»ç„¶æ˜¯ &#123;a=10,b=20&#125;..</span><br>   <span class="hljs-comment">//ä¸€ä¼šæˆ‘ä»¬debug æºç ,å°±ok</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpreter</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span>)</span> &#123;<br>      <span class="hljs-comment">//super.left.interpreter(var) ï¼š è¿”å› left è¡¨è¾¾å¼å¯¹åº”çš„å€¼ a = 10</span><br>      <span class="hljs-comment">//super.right.interpreter(var): è¿”å›right è¡¨è¾¾å¼å¯¹åº”å€¼ b = 20</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.left.interpreter(<span class="hljs-keyword">var</span>) + <span class="hljs-built_in">super</span>.right.interpreter(<span class="hljs-keyword">var</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Calculator.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Stack;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> &#123;<br><br>   <span class="hljs-comment">// å®šä¹‰è¡¨è¾¾å¼</span><br>   <span class="hljs-keyword">private</span> Expression expression;<br><br>   <span class="hljs-comment">// æ„é€ å‡½æ•°ä¼ å‚ï¼Œå¹¶è§£æ</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Calculator</span><span class="hljs-params">(String expStr)</span> &#123; <span class="hljs-comment">// expStr = a+b</span><br>      <span class="hljs-comment">// å®‰æ’è¿ç®—å…ˆåé¡ºåº</span><br>      Stack&lt;Expression&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>      <span class="hljs-comment">// è¡¨è¾¾å¼æ‹†åˆ†æˆå­—ç¬¦æ•°ç»„ </span><br>      <span class="hljs-type">char</span>[] charArray = expStr.toCharArray();<span class="hljs-comment">// [a, +, b]</span><br><br>      <span class="hljs-type">Expression</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-type">Expression</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>      <span class="hljs-comment">//éå†æˆ‘ä»¬çš„å­—ç¬¦æ•°ç»„ï¼Œ å³éå†  [a, +, b]</span><br>      <span class="hljs-comment">//é’ˆå¯¹ä¸åŒçš„æƒ…å†µï¼Œåšå¤„ç†</span><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; charArray.length; i++) &#123;<br>         <span class="hljs-keyword">switch</span> (charArray[i]) &#123;<br>         <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;+&#x27;</span>: <span class="hljs-comment">//</span><br>            left = stack.pop();<span class="hljs-comment">// ä»stackå–å‡ºleft =&gt; &quot;a&quot;</span><br>            right = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VarExpression</span>(String.valueOf(charArray[++i]));<span class="hljs-comment">// å–å‡ºå³è¡¨è¾¾å¼ &quot;b&quot;</span><br>            stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AddExpression</span>(left, right));<span class="hljs-comment">// ç„¶åæ ¹æ®å¾—åˆ°left å’Œ right æ„å»º AddExpressonåŠ å…¥stack</span><br>            <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;-&#x27;</span>: <span class="hljs-comment">// </span><br>            left = stack.pop();<br>            right = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VarExpression</span>(String.valueOf(charArray[++i]));<br>            stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SubExpression</span>(left, right));<br>            <span class="hljs-keyword">break</span>;<br>         <span class="hljs-keyword">default</span>: <br>            <span class="hljs-comment">//å¦‚æœæ˜¯ä¸€ä¸ª Var å°±åˆ›å»ºè¦ç»™ VarExpression å¯¹è±¡ï¼Œå¹¶pushåˆ° stack</span><br>            stack.push(<span class="hljs-keyword">new</span> <span class="hljs-title class_">VarExpression</span>(String.valueOf(charArray[i])));<br>            <span class="hljs-keyword">break</span>;<br>         &#125;<br>      &#125;<br>      <span class="hljs-comment">//å½“éå†å®Œæ•´ä¸ª charArray æ•°ç»„åï¼Œstack å°±å¾—åˆ°æœ€åExpression</span><br>      <span class="hljs-built_in">this</span>.expression = stack.pop();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">run</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span>)</span> &#123;<br>      <span class="hljs-comment">//æœ€åå°†è¡¨è¾¾å¼a+bå’Œ var = &#123;a=10,b=20&#125;</span><br>      <span class="hljs-comment">//ç„¶åä¼ é€’ç»™expressionçš„interpreterè¿›è¡Œè§£é‡Šæ‰§è¡Œ</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.expression.interpreter(<span class="hljs-keyword">var</span>);<br>   &#125;<br>&#125;```<br>`Client.java`<br>â€‹```java<br><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">String</span> <span class="hljs-variable">expStr</span> <span class="hljs-operator">=</span> getExpStr(); <span class="hljs-comment">// a+b</span><br>      HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span> = getValue(expStr);<span class="hljs-comment">// var &#123;a=10, b=20&#125;</span><br>      <span class="hljs-type">Calculator</span> <span class="hljs-variable">calculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>(expStr);<br>      System.out.println(<span class="hljs-string">&quot;è¿ç®—ç»“æœï¼š&quot;</span> + expStr + <span class="hljs-string">&quot;=&quot;</span> + calculator.run(<span class="hljs-keyword">var</span>));<br>   &#125;<br><br>   <span class="hljs-comment">// è·å¾—è¡¨è¾¾å¼</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getExpStr</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥è¡¨è¾¾å¼ï¼š&quot;</span>);<br>      <span class="hljs-keyword">return</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in))).readLine();<br>   &#125;<br><br>   <span class="hljs-comment">// è·å¾—å€¼æ˜ å°„</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> HashMap&lt;String, Integer&gt; <span class="hljs-title function_">getValue</span><span class="hljs-params">(String expStr)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>      HashMap&lt;String, Integer&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>      <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> ch : expStr.toCharArray()) &#123;<br>         <span class="hljs-keyword">if</span> (ch != <span class="hljs-string">&#x27;+&#x27;</span> &amp;&amp; ch != <span class="hljs-string">&#x27;-&#x27;</span>) &#123;<br>            <span class="hljs-keyword">if</span> (!map.containsKey(String.valueOf(ch))) &#123;<br>               System.out.print(<span class="hljs-string">&quot;è¯·è¾“å…¥&quot;</span> + String.valueOf(ch) + <span class="hljs-string">&quot;çš„å€¼ï¼š&quot;</span>);<br>               <span class="hljs-type">String</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> (<span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(System.in))).readLine();<br>               map.put(String.valueOf(ch), Integer.valueOf(in));<br>            &#125;<br>         &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> map;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Expression.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æŠ½è±¡ç±»è¡¨è¾¾å¼ï¼Œé€šè¿‡HashMap é”®å€¼å¯¹, å¯ä»¥è·å–åˆ°å˜é‡çš„å€¼</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Expression</span> &#123;<br>   <span class="hljs-comment">// a + b - c</span><br>   <span class="hljs-comment">// è§£é‡Šå…¬å¼å’Œæ•°å€¼, key å°±æ˜¯å…¬å¼(è¡¨è¾¾å¼) å‚æ•°[a,b,c], valueå°±æ˜¯å°±æ˜¯å…·ä½“å€¼</span><br>   <span class="hljs-comment">// HashMap &#123;a=10, b=20&#125;</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpreter</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span>)</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SubExpression.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SubExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SymbolExpression</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">SubExpression</span><span class="hljs-params">(Expression left, Expression right)</span> &#123;<br>      <span class="hljs-built_in">super</span>(left, right);<br>   &#125;<br><br>   <span class="hljs-comment">//æ±‚å‡ºleft å’Œ right è¡¨è¾¾å¼ç›¸å‡åçš„ç»“æœ</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpreter</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.left.interpreter(<span class="hljs-keyword">var</span>) - <span class="hljs-built_in">super</span>.right.interpreter(<span class="hljs-keyword">var</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SymbolExpression.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æŠ½è±¡è¿ç®—ç¬¦å·è§£æå™¨ è¿™é‡Œï¼Œæ¯ä¸ªè¿ç®—ç¬¦å·ï¼Œéƒ½åªå’Œè‡ªå·±å·¦å³ä¸¤ä¸ªæ•°å­—æœ‰å…³ç³»ï¼Œ</span><br><span class="hljs-comment"> * ä½†å·¦å³ä¸¤ä¸ªæ•°å­—æœ‰å¯èƒ½ä¹Ÿæ˜¯ä¸€ä¸ªè§£æçš„ç»“æœï¼Œæ— è®ºä½•ç§ç±»å‹ï¼Œéƒ½æ˜¯Expressionç±»çš„å®ç°ç±»</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SymbolExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Expression</span> &#123;<br><br>   <span class="hljs-keyword">protected</span> Expression left;<br>   <span class="hljs-keyword">protected</span> Expression right;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">SymbolExpression</span><span class="hljs-params">(Expression left, Expression right)</span> &#123;<br>      <span class="hljs-built_in">this</span>.left = left;<br>      <span class="hljs-built_in">this</span>.right = right;<br>   &#125;<br><br>   <span class="hljs-comment">//å› ä¸º SymbolExpression æ˜¯è®©å…¶å­ç±»æ¥å®ç°ï¼Œå› æ­¤ interpreter æ˜¯ä¸€ä¸ªé»˜è®¤å®ç°</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpreter</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span>)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>VarExpression.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.interpreter;<br><br><span class="hljs-keyword">import</span> java.util.HashMap;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å˜é‡çš„è§£é‡Šå™¨</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VarExpression</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Expression</span> &#123;<br><br>   <span class="hljs-keyword">private</span> String key; <span class="hljs-comment">// key=a,key=b,key=c</span><br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">VarExpression</span><span class="hljs-params">(String key)</span> &#123;<br>      <span class="hljs-built_in">this</span>.key = key;<br>   &#125;<br><br>   <span class="hljs-comment">// var å°±æ˜¯&#123;a=10, b=20&#125;</span><br>   <span class="hljs-comment">// interpreter æ ¹æ® å˜é‡åç§°ï¼Œè¿”å›å¯¹åº”å€¼</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpreter</span><span class="hljs-params">(HashMap&lt;String, Integer&gt; <span class="hljs-keyword">var</span>)</span> &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">var</span>.get(<span class="hljs-built_in">this</span>.key);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">è¯·è¾“å…¥è¡¨è¾¾å¼ï¼š<span class="hljs-keyword">a</span>+b-c<br>è¯·è¾“å…¥<span class="hljs-keyword">a</span>çš„å€¼ï¼š<span class="hljs-number">10</span><br>è¯·è¾“å…¥bçš„å€¼ï¼š<span class="hljs-number">1</span><br>è¯·è¾“å…¥cçš„å€¼ï¼š<span class="hljs-number">5</span><br>è¿ç®—ç»“æœï¼š<span class="hljs-keyword">a</span>+b-c=<span class="hljs-number">6</span><br></code></pre></td></tr></table></figure>
<h2 id="è§£é‡Šå™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#è§£é‡Šå™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> è§£é‡Šå™¨æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>å½“æœ‰ä¸€ä¸ªè¯­è¨€éœ€è¦è§£é‡Šæ‰§è¡Œï¼Œå¯å°†è¯¥è¯­è¨€ä¸­çš„å¥å­è¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨è§£é‡Šå™¨æ¨¡å¼ï¼Œè®©ç¨‹åºå…·æœ‰è‰¯å¥½çš„æ‰©å±•æ€§</p>
</li>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šç¼–è¯‘å™¨ã€è¿ç®—è¡¨è¾¾å¼è®¡ç®—ã€æ­£åˆ™è¡¨è¾¾å¼ã€æœºå™¨äººç­‰</p>
</li>
<li>
<p>ä½¿ç”¨è§£é‡Šå™¨å¯èƒ½å¸¦æ¥çš„é—®é¢˜ï¼šè§£é‡Šå™¨æ¨¡å¼ä¼šå¼•èµ·ç±»è†¨èƒ€ã€è§£é‡Šå™¨æ¨¡å¼é‡‡ç”¨é€’å½’è°ƒç”¨æ–¹æ³•ï¼Œå°†ä¼šå¯¼è‡´è°ƒè¯•éå¸¸å¤æ‚ã€æ•ˆç‡å¯èƒ½é™ä½</p>
</li>
</ol>
<h1 id="çŠ¶æ€æ¨¡å¼"><a class="markdownIt-Anchor" href="#çŠ¶æ€æ¨¡å¼"></a> çŠ¶æ€æ¨¡å¼</h1>
<p>åœ¨çŠ¶æ€æ¨¡å¼ï¼ˆState Patternï¼‰ä¸­ï¼Œç±»çš„è¡Œä¸ºæ˜¯åŸºäºå®ƒçš„çŠ¶æ€æ”¹å˜çš„ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-20"><a class="markdownIt-Anchor" href="#ä»‹ç»-20"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> å¯¹è±¡çš„è¡Œä¸ºä¾èµ–äºå®ƒçš„çŠ¶æ€ï¼ˆå±æ€§ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å®ƒçš„çŠ¶æ€æ”¹å˜è€Œæ”¹å˜å®ƒçš„ç›¸å…³è¡Œä¸ºã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> ä»£ç ä¸­åŒ…å«å¤§é‡ä¸å¯¹è±¡çŠ¶æ€æœ‰å…³çš„æ¡ä»¶è¯­å¥ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†å„ç§å…·ä½“çš„çŠ¶æ€ç±»æŠ½è±¡å‡ºæ¥ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong><br />
é€šå¸¸å‘½ä»¤æ¨¡å¼çš„æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ã€‚è€ŒçŠ¶æ€æ¨¡å¼çš„æ¥å£ä¸­æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–¹æ³•ã€‚è€Œä¸”ï¼ŒçŠ¶æ€æ¨¡å¼çš„å®ç°ç±»çš„æ–¹æ³•ï¼Œä¸€èˆ¬è¿”å›å€¼ï¼Œæˆ–è€…æ˜¯æ”¹å˜å®ä¾‹å˜é‡çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçŠ¶æ€æ¨¡å¼ä¸€èˆ¬å’Œå¯¹è±¡çš„çŠ¶æ€æœ‰å…³ã€‚å®ç°ç±»çš„æ–¹æ³•æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¦†ç›–æ¥å£ä¸­çš„æ–¹æ³•ã€‚çŠ¶æ€æ¨¡å¼å’Œå‘½ä»¤æ¨¡å¼ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ¶ˆé™¤<br />
ifâ€¦else ç­‰æ¡ä»¶é€‰æ‹©è¯­å¥ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€æ‰“ç¯®çƒçš„æ—¶å€™è¿åŠ¨å‘˜å¯ä»¥æœ‰æ­£å¸¸çŠ¶æ€ã€ä¸æ­£å¸¸çŠ¶æ€å’Œè¶…å¸¸çŠ¶æ€ã€‚<br />
2ã€æ›¾ä¾¯ä¹™ç¼–é’Ÿä¸­ï¼Œâ€˜é’Ÿæ˜¯æŠ½è±¡æ¥å£â€™,'é’ŸAâ€™ç­‰æ˜¯å…·ä½“çŠ¶æ€ï¼Œ'æ›¾ä¾¯ä¹™ç¼–é’Ÿâ€™æ˜¯å…·ä½“ç¯å¢ƒï¼ˆContextï¼‰ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å°è£…äº†è½¬æ¢è§„åˆ™ã€‚ 2ã€æšä¸¾å¯èƒ½çš„çŠ¶æ€ï¼Œåœ¨æšä¸¾çŠ¶æ€ä¹‹å‰éœ€è¦ç¡®å®šçŠ¶æ€ç§ç±»ã€‚<br />
3ã€å°†æ‰€æœ‰ä¸æŸä¸ªçŠ¶æ€æœ‰å…³çš„è¡Œä¸ºæ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°å¢åŠ æ–°çš„çŠ¶æ€ï¼Œåªéœ€è¦æ”¹å˜å¯¹è±¡çŠ¶æ€å³å¯æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºã€‚<br />
4ã€å…è®¸çŠ¶æ€è½¬æ¢é€»è¾‘ä¸çŠ¶æ€å¯¹è±¡åˆæˆä¸€ä½“ï¼Œè€Œä¸æ˜¯æŸä¸€ä¸ªå·¨å¤§çš„æ¡ä»¶è¯­å¥å—ã€‚ 5ã€å¯ä»¥è®©å¤šä¸ªç¯å¢ƒå¯¹è±¡å…±äº«ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œä»è€Œå‡å°‘ç³»ç»Ÿä¸­å¯¹è±¡çš„ä¸ªæ•°ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€çŠ¶æ€æ¨¡å¼çš„ä½¿ç”¨å¿…ç„¶ä¼šå¢åŠ ç³»ç»Ÿç±»å’Œå¯¹è±¡çš„ä¸ªæ•°ã€‚ 2ã€çŠ¶æ€æ¨¡å¼çš„ç»“æ„ä¸å®ç°éƒ½è¾ƒä¸ºå¤æ‚ï¼Œå¦‚æœä½¿ç”¨ä¸å½“å°†å¯¼è‡´ç¨‹åºç»“æ„å’Œä»£ç çš„æ··ä¹±ã€‚<br />
3ã€çŠ¶æ€æ¨¡å¼å¯¹&quot;å¼€é—­åŸåˆ™&quot;çš„æ”¯æŒå¹¶ä¸å¤ªå¥½ï¼Œå¯¹äºå¯ä»¥åˆ‡æ¢çŠ¶æ€çš„çŠ¶æ€æ¨¡å¼ï¼Œå¢åŠ æ–°çš„çŠ¶æ€ç±»éœ€è¦ä¿®æ”¹é‚£äº›è´Ÿè´£çŠ¶æ€è½¬æ¢çš„æºä»£ç ï¼Œå¦åˆ™æ— æ³•åˆ‡æ¢åˆ°æ–°å¢çŠ¶æ€ï¼Œè€Œä¸”ä¿®æ”¹æŸä¸ªçŠ¶æ€ç±»çš„è¡Œä¸ºä¹Ÿéœ€ä¿®æ”¹å¯¹åº”ç±»çš„æºä»£ç ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€è¡Œä¸ºéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜çš„åœºæ™¯ã€‚ 2ã€æ¡ä»¶ã€åˆ†æ”¯è¯­å¥çš„ä»£æ›¿è€…ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> åœ¨è¡Œä¸ºå—çŠ¶æ€çº¦æŸçš„æ—¶å€™ä½¿ç”¨çŠ¶æ€æ¨¡å¼ï¼Œè€Œä¸”çŠ¶æ€ä¸è¶…è¿‡ 5 ä¸ªã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105110507630.png" srcset="/img/loading.gif" lazyload alt="image-20230105110507630" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(çŠ¶æ€æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>Context ç±»ä¸ºç¯å¢ƒè§’è‰², ç”¨äºç»´æŠ¤ State å®ä¾‹,è¿™ä¸ªå®ä¾‹å®šä¹‰å½“å‰çŠ¶æ€</p>
</li>
<li>
<p>State æ˜¯æŠ½è±¡çŠ¶æ€è§’è‰²,å®šä¹‰ä¸€ä¸ªæ¥å£å°è£…ä¸ Context çš„ä¸€ä¸ªç‰¹ç‚¹æ¥å£ç›¸å…³è¡Œä¸º</p>
</li>
<li>
<p>ConcreteState å…·ä½“çš„çŠ¶æ€è§’è‰²ï¼Œæ¯ä¸ªå­ç±»å®ç°ä¸€ä¸ªä¸ Context çš„ä¸€ä¸ªçŠ¶æ€ç›¸å…³è¡Œä¸º</p>
</li>
</ol>
<h2 id="å®ç°-18"><a class="markdownIt-Anchor" href="#å®ç°-18"></a> å®ç°</h2>
<h3 id="çŠ¶æ€æ¨¡å¼è§£å†³-app-æŠ½å¥–é—®"><a class="markdownIt-Anchor" href="#çŠ¶æ€æ¨¡å¼è§£å†³-app-æŠ½å¥–é—®"></a> çŠ¶æ€æ¨¡å¼è§£å†³ APP æŠ½å¥–é—®</h3>
<ol>
<li>åº”ç”¨å®ä¾‹è¦æ±‚</li>
</ol>
<p>â€‹	1) å‡å¦‚æ¯å‚åŠ ä¸€æ¬¡è¿™ä¸ªæ´»åŠ¨è¦æ‰£é™¤ç”¨æˆ· 50 ç§¯åˆ†ï¼Œä¸­å¥–æ¦‚ç‡æ˜¯ 10%</p>
<p>â€‹	2) å¥–å“æ•°é‡å›ºå®šï¼ŒæŠ½å®Œå°±ä¸èƒ½æŠ½å¥–</p>
<p>â€‹	3) æ´»åŠ¨æœ‰å››ä¸ªçŠ¶æ€: å¯ä»¥æŠ½å¥–ã€ä¸èƒ½æŠ½å¥–ã€å‘æ”¾å¥–å“å’Œå¥–å“é¢†å®Œ</p>
<p>â€‹	4) æ´»åŠ¨çš„å››ä¸ªçŠ¶æ€è½¬æ¢å…³ç³»å›¾(å³å›¾)</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105110700473.png" srcset="/img/loading.gif" lazyload alt="image-20230105110700473" /></p>
<p>å®Œæˆ APP æŠ½å¥–æ´»åŠ¨é¡¹ç›®ï¼Œä½¿ç”¨çŠ¶æ€æ¨¡å¼.</p>
<ol start="2">
<li>æ€è·¯åˆ†æå’Œå›¾è§£(ç±»å›¾)</li>
</ol>
<p>-å®šä¹‰å‡ºä¸€ä¸ªæ¥å£å«çŠ¶æ€æ¥å£ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½å®ç°å®ƒã€‚</p>
<p>-æ¥å£æœ‰æ‰£é™¤ç§¯åˆ†æ–¹æ³•ã€æŠ½å¥–æ–¹æ³•ã€å‘æ”¾å¥–å“æ–¹æ³•</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105140413812.png" srcset="/img/loading.gif" lazyload alt="image-20230105140413812" /></p>
<p><code>CanRaffleState.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-keyword">import</span> java.util.Random;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¯ä»¥æŠ½å¥–çš„çŠ¶æ€</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CanRaffleState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">State</span> &#123;<br><br>    RaffleActivity activity;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CanRaffleState</span><span class="hljs-params">(RaffleActivity activity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.activity = activity;<br>    &#125;<br><br>    <span class="hljs-comment">//å·²ç»æ‰£é™¤äº†ç§¯åˆ†ï¼Œä¸èƒ½å†æ‰£</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductMoney</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å·²ç»æ‰£å–è¿‡äº†ç§¯åˆ†&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-comment">//å¯ä»¥æŠ½å¥–, æŠ½å®Œå¥–åï¼Œæ ¹æ®å®é™…æƒ…å†µï¼Œæ”¹æˆæ–°çš„çŠ¶æ€</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">raffle</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ­£åœ¨æŠ½å¥–ï¼Œè¯·ç¨ç­‰ï¼&quot;</span>);<br>        <span class="hljs-type">Random</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> r.nextInt(<span class="hljs-number">10</span>);<br>        <span class="hljs-comment">// 10%ä¸­å¥–æœºä¼š</span><br>        <span class="hljs-keyword">if</span>(num == <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-comment">// æ”¹å˜æ´»åŠ¨çŠ¶æ€ä¸ºå‘æ”¾å¥–å“ context</span><br>            activity.setState(activity.getDispenseState());<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;å¾ˆé—æ†¾æ²¡æœ‰æŠ½ä¸­å¥–å“ï¼&quot;</span>);<br>            <span class="hljs-comment">// æ”¹å˜çŠ¶æ€ä¸ºä¸èƒ½æŠ½å¥–</span><br>            activity.setState(activity.getNoRafflleState());<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// ä¸èƒ½å‘æ”¾å¥–å“</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispensePrize</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ²¡ä¸­å¥–ï¼Œä¸èƒ½å‘æ”¾å¥–å“&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * çŠ¶æ€æ¨¡å¼æµ‹è¯•ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">// åˆ›å»ºæ´»åŠ¨å¯¹è±¡ï¼Œå¥–å“æœ‰1ä¸ªå¥–å“</span><br>        <span class="hljs-type">RaffleActivity</span> <span class="hljs-variable">activity</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RaffleActivity</span>(<span class="hljs-number">1</span>);<br><br>        <span class="hljs-comment">// æˆ‘ä»¬è¿ç»­æŠ½30æ¬¡å¥–</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">30</span>; i++) &#123;<br>            System.out.println(<span class="hljs-string">&quot;--------ç¬¬&quot;</span> + (i + <span class="hljs-number">1</span>) + <span class="hljs-string">&quot;æ¬¡æŠ½å¥–----------&quot;</span>);<br>            <span class="hljs-comment">// å‚åŠ æŠ½å¥–ï¼Œç¬¬ä¸€æ­¥ç‚¹å‡»æ‰£é™¤ç§¯åˆ†</span><br>            activity.debuctMoney();<br><br>            <span class="hljs-comment">// ç¬¬äºŒæ­¥æŠ½å¥–</span><br>            activity.raffle();<br>        &#125;<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DispenseOutState.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å¥–å“å‘æ”¾å®Œæ¯•çŠ¶æ€</span><br><span class="hljs-comment"> * è¯´æ˜ï¼Œå½“æˆ‘ä»¬activity æ”¹å˜æˆ DispenseOutStateï¼Œ æŠ½å¥–æ´»åŠ¨ç»“æŸ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispenseOutState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">State</span> &#123;<br><br>   <span class="hljs-comment">// åˆå§‹åŒ–æ—¶ä¼ å…¥æ´»åŠ¨å¼•ç”¨</span><br>    RaffleActivity activity;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DispenseOutState</span><span class="hljs-params">(RaffleActivity activity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.activity = activity;<br>    &#125;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductMoney</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ &quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">raffle</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ &quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispensePrize</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DispenseState.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‘æ”¾å¥–å“çš„çŠ¶æ€</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispenseState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">State</span> &#123;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–æ—¶ä¼ å…¥æ´»åŠ¨å¼•ç”¨ï¼Œå‘æ”¾å¥–å“åæ”¹å˜å…¶çŠ¶æ€</span><br>    RaffleActivity activity;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DispenseState</span><span class="hljs-params">(RaffleActivity activity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.activity = activity;<br>    &#125;<br>    <br>    <span class="hljs-comment">//</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductMoney</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¸èƒ½æ‰£é™¤ç§¯åˆ†&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">raffle</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¸èƒ½æŠ½å¥–&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//å‘æ”¾å¥–å“</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispensePrize</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span>(activity.getCount() &gt; <span class="hljs-number">0</span>)&#123;<br>            System.out.println(<span class="hljs-string">&quot;æ­å–œä¸­å¥–äº†&quot;</span>);<br>            <span class="hljs-comment">// æ”¹å˜çŠ¶æ€ä¸ºä¸èƒ½æŠ½å¥–</span><br>            activity.setState(activity.getNoRafflleState());<br>        &#125;<span class="hljs-keyword">else</span>&#123;<br>            System.out.println(<span class="hljs-string">&quot;å¾ˆé—æ†¾ï¼Œå¥–å“å‘é€å®Œäº†&quot;</span>);<br>            <span class="hljs-comment">// æ”¹å˜çŠ¶æ€ä¸ºå¥–å“å‘é€å®Œæ¯•, åé¢æˆ‘ä»¬å°±ä¸å¯ä»¥æŠ½å¥–</span><br>            activity.setState(activity.getDispensOutState());<br>            <span class="hljs-comment">//System.out.println(&quot;æŠ½å¥–æ´»åŠ¨ç»“æŸ&quot;);</span><br>            <span class="hljs-comment">//System.exit(0);</span><br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>NoRaffleState.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä¸èƒ½æŠ½å¥–çŠ¶æ€</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoRaffleState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">State</span> &#123;<br><br>    <span class="hljs-comment">// åˆå§‹åŒ–æ—¶ä¼ å…¥æ´»åŠ¨å¼•ç”¨ï¼Œæ‰£é™¤ç§¯åˆ†åæ”¹å˜å…¶çŠ¶æ€</span><br>    RaffleActivity activity;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NoRaffleState</span><span class="hljs-params">(RaffleActivity activity)</span> &#123;<br>        <span class="hljs-built_in">this</span>.activity = activity;<br>    &#125;<br><br>    <span class="hljs-comment">// å½“å‰çŠ¶æ€å¯ä»¥æ‰£ç§¯åˆ† , æ‰£é™¤åï¼Œå°†çŠ¶æ€è®¾ç½®æˆå¯ä»¥æŠ½å¥–çŠ¶æ€</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductMoney</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰£é™¤50ç§¯åˆ†æˆåŠŸï¼Œæ‚¨å¯ä»¥æŠ½å¥–äº†&quot;</span>);<br>        activity.setState(activity.getCanRaffleState());<br>    &#125;<br><br>    <span class="hljs-comment">// å½“å‰çŠ¶æ€ä¸èƒ½æŠ½å¥–</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">raffle</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰£äº†ç§¯åˆ†æ‰èƒ½æŠ½å¥–å–”ï¼&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// å½“å‰çŠ¶æ€ä¸èƒ½å‘å¥–å“</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispensePrize</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ä¸èƒ½å‘æ”¾å¥–å“&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>RaffleActivity.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æŠ½å¥–æ´»åŠ¨ //</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RaffleActivity</span> &#123;<br><br>    <span class="hljs-comment">// state è¡¨ç¤ºæ´»åŠ¨å½“å‰çš„çŠ¶æ€ï¼Œæ˜¯å˜åŒ–</span><br>    <span class="hljs-type">State</span> <span class="hljs-variable">state</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-comment">// å¥–å“æ•°é‡</span><br>    <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-comment">// å››ä¸ªå±æ€§ï¼Œè¡¨ç¤ºå››ç§çŠ¶æ€</span><br>    <span class="hljs-type">State</span> <span class="hljs-variable">noRafflleState</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoRaffleState</span>(<span class="hljs-built_in">this</span>);<br>    <span class="hljs-type">State</span> <span class="hljs-variable">canRaffleState</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanRaffleState</span>(<span class="hljs-built_in">this</span>);<br><br>    <span class="hljs-type">State</span> <span class="hljs-variable">dispenseState</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DispenseState</span>(<span class="hljs-built_in">this</span>);<br>    <span class="hljs-type">State</span> <span class="hljs-variable">dispensOutState</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DispenseOutState</span>(<span class="hljs-built_in">this</span>);<br><br>    <span class="hljs-comment">//æ„é€ å™¨</span><br>    <span class="hljs-comment">//1. åˆå§‹åŒ–å½“å‰çš„çŠ¶æ€ä¸º noRafflleStateï¼ˆå³ä¸èƒ½æŠ½å¥–çš„çŠ¶æ€ï¼‰</span><br>    <span class="hljs-comment">//2. åˆå§‹åŒ–å¥–å“çš„æ•°é‡ </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RaffleActivity</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = getNoRafflleState();<br>        <span class="hljs-built_in">this</span>.count = count;<br>    &#125;<br><br>    <span class="hljs-comment">//æ‰£åˆ†, è°ƒç”¨å½“å‰çŠ¶æ€çš„ deductMoney</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">debuctMoney</span><span class="hljs-params">()</span> &#123;<br>        state.deductMoney();<br>    &#125;<br><br>    <span class="hljs-comment">//æŠ½å¥– </span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">raffle</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// å¦‚æœå½“å‰çš„çŠ¶æ€æ˜¯æŠ½å¥–æˆåŠŸ</span><br>        <span class="hljs-keyword">if</span> (state.raffle()) &#123;<br>            <span class="hljs-comment">//é¢†å–å¥–å“</span><br>            state.dispensePrize();<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(State state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-comment">//è¿™é‡Œè¯·å¤§å®¶æ³¨æ„ï¼Œæ¯é¢†å–ä¸€æ¬¡å¥–å“ï¼Œcount--</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getCount</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">curCount</span> <span class="hljs-operator">=</span> count;<br>        count--;<br>        <span class="hljs-keyword">return</span> curCount;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCount</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> &#123;<br>        <span class="hljs-built_in">this</span>.count = count;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getNoRafflleState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> noRafflleState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNoRafflleState</span><span class="hljs-params">(State noRafflleState)</span> &#123;<br>        <span class="hljs-built_in">this</span>.noRafflleState = noRafflleState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getCanRaffleState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> canRaffleState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCanRaffleState</span><span class="hljs-params">(State canRaffleState)</span> &#123;<br>        <span class="hljs-built_in">this</span>.canRaffleState = canRaffleState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getDispenseState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> dispenseState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDispenseState</span><span class="hljs-params">(State dispenseState)</span> &#123;<br>        <span class="hljs-built_in">this</span>.dispenseState = dispenseState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getDispensOutState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> dispensOutState;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDispensOutState</span><span class="hljs-params">(State dispensOutState)</span> &#123;<br>        <span class="hljs-built_in">this</span>.dispensOutState = dispensOutState;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>State.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * çŠ¶æ€æŠ½è±¡ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">State</span> &#123;<br><br>   <br>   <span class="hljs-comment">// æ‰£é™¤ç§¯åˆ† - 50</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deductMoney</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">// æ˜¯å¦æŠ½ä¸­å¥–å“</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">raffle</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">// å‘æ”¾å¥–å“</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span>  <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispensePrize</span><span class="hljs-params">()</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs brainfuck"><span class="hljs-literal">--------</span><span class="hljs-comment">ç¬¬1æ¬¡æŠ½å¥–</span><span class="hljs-literal">----------</span><br><span class="hljs-comment">æ‰£é™¤50ç§¯åˆ†æˆåŠŸï¼Œæ‚¨å¯ä»¥æŠ½å¥–äº†</span><br><span class="hljs-comment">æ­£åœ¨æŠ½å¥–ï¼Œè¯·ç¨ç­‰ï¼</span><br><span class="hljs-comment">æ­å–œä¸­å¥–äº†</span><br><span class="hljs-literal">--------</span><span class="hljs-comment">ç¬¬2æ¬¡æŠ½å¥–</span><span class="hljs-literal">----------</span><br><span class="hljs-comment">æ‰£é™¤50ç§¯åˆ†æˆåŠŸï¼Œæ‚¨å¯ä»¥æŠ½å¥–äº†</span><br><span class="hljs-comment">æ­£åœ¨æŠ½å¥–ï¼Œè¯·ç¨ç­‰ï¼</span><br><span class="hljs-comment">å¾ˆé—æ†¾ï¼Œå¥–å“å‘é€å®Œäº†</span><br><span class="hljs-literal">--------</span><span class="hljs-comment">ç¬¬3æ¬¡æŠ½å¥–</span><span class="hljs-literal">----------</span><br><span class="hljs-comment">å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ </span><br><span class="hljs-comment">å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ </span><br><span class="hljs-literal">--------</span><span class="hljs-comment">ç¬¬4æ¬¡æŠ½å¥–</span><span class="hljs-literal">----------</span><br><span class="hljs-comment">å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ </span><br><span class="hljs-comment">å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ </span><br><span class="hljs-literal">--------</span><span class="hljs-comment">ç¬¬5æ¬¡æŠ½å¥–</span><span class="hljs-literal">----------</span><br><span class="hljs-comment">å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ </span><br><span class="hljs-comment">å¥–å“å‘é€å®Œäº†ï¼Œè¯·ä¸‹æ¬¡å†å‚åŠ </span><br></code></pre></td></tr></table></figure>
<h3 id="çŠ¶æ€æ¨¡å¼åœ¨å®é™…é¡¹ç›®-å€Ÿè´·å¹³å°-æºç å‰–æ"><a class="markdownIt-Anchor" href="#çŠ¶æ€æ¨¡å¼åœ¨å®é™…é¡¹ç›®-å€Ÿè´·å¹³å°-æºç å‰–æ"></a> çŠ¶æ€æ¨¡å¼åœ¨å®é™…é¡¹ç›®-å€Ÿè´·å¹³å° æºç å‰–æ</h3>
<ol>
<li>å€Ÿè´·å¹³å°çš„è®¢å•ï¼Œæœ‰å®¡æ ¸-å‘å¸ƒ-æŠ¢å• ç­‰ç­‰ æ­¥éª¤ï¼Œéšç€æ“ä½œçš„ä¸åŒï¼Œä¼šæ”¹å˜è®¢å•çš„çŠ¶æ€, é¡¹ç›®ä¸­çš„è¿™ä¸ªæ¨¡å—å®ç°å°±ä¼šä½¿ç”¨åˆ°çŠ¶æ€æ¨¡å¼</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105154135954.png" srcset="/img/loading.gif" lazyload alt="image-20230105154135954" /></p>
<p><code>AbstractState.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state.money;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractState</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">State</span> &#123;<br><br>   <span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">RuntimeException</span> <span class="hljs-variable">EXCEPTION</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">&quot;æ“ä½œæµç¨‹ä¸å…è®¸&quot;</span>);<br><br>   <span class="hljs-comment">//æŠ½è±¡ç±»ï¼Œé»˜è®¤å®ç°äº† State æ¥å£çš„æ‰€æœ‰æ–¹æ³•</span><br>   <span class="hljs-comment">//è¯¥ç±»çš„æ‰€æœ‰æ–¹æ³•ï¼Œå…¶å­ç±»(å…·ä½“çš„çŠ¶æ€ç±»)ï¼Œå¯ä»¥æœ‰é€‰æ‹©çš„è¿›è¡Œé‡å†™</span><br>   <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkFailEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makePriceEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">acceptOrderEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notPeopleAcceptEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payOrderEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">orderFailureEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">feedBackEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        <span class="hljs-keyword">throw</span> EXCEPTION;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>AllState.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state.money;<br><br><span class="hljs-comment">//å„ç§å…·ä½“çŠ¶æ€ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FeedBackState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> StateEnum.FEED_BACKED.getValue();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GenerateState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ReviewState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkFailEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FeedBackState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> StateEnum.GENERATE.getValue();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NotPayState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payOrderEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PaidState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">feedBackEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FeedBackState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> StateEnum.NOT_PAY.getValue();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PaidState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">feedBackEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FeedBackState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> StateEnum.PAID.getValue();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PublishState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">acceptOrderEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      <span class="hljs-comment">//æŠŠå½“å‰çŠ¶æ€è®¾ç½®ä¸º  NotPayStateã€‚ã€‚ã€‚</span><br>      <span class="hljs-comment">//è‡³äºåº”è¯¥å˜æˆå“ªä¸ªçŠ¶æ€ï¼Œæœ‰æµç¨‹å›¾æ¥å†³å®š</span><br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NotPayState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notPeopleAcceptEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FeedBackState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> StateEnum.PUBLISHED.getValue();<br>   &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ReviewState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makePriceEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PublishState</span>());<br>   &#125;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> StateEnum.REVIEWED.getValue();<br>   &#125;<br><br>&#125;```<br>`ClientTest.java`<br>â€‹```java<br><span class="hljs-keyword">package</span> io.xtwoy.state.money;<br><br><span class="hljs-comment">/**æµ‹è¯•ç±»*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientTest</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºcontext å¯¹è±¡</span><br>      <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Context</span>();<br>        <span class="hljs-comment">//å°†å½“å‰çŠ¶æ€è®¾ç½®ä¸º PublishState</span><br>      context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PublishState</span>());<br>        System.out.println(context.getCurrentState());<br>        <br><span class="hljs-comment">//        //publish --&gt; not pay</span><br>        context.acceptOrderEvent(context);<br><span class="hljs-comment">//        //not pay --&gt; paid</span><br>        context.payOrderEvent(context);<br><span class="hljs-comment">//        // å¤±è´¥, æ£€æµ‹å¤±è´¥æ—¶ï¼Œä¼šæŠ›å‡ºå¼‚å¸¸</span><br><span class="hljs-comment">//        try &#123;</span><br><span class="hljs-comment">//         context.checkFailEvent(context);</span><br><span class="hljs-comment">//         System.out.println(&quot;æµç¨‹æ­£å¸¸..&quot;);</span><br><span class="hljs-comment">//    &#125; catch (Exception e) &#123;</span><br><span class="hljs-comment">//       // <span class="hljs-doctag">TODO:</span> handle exception</span><br><span class="hljs-comment">//       System.out.println(e.getMessage());</span><br><span class="hljs-comment">//    &#125;</span><br>        <br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Context.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state.money;<br><br><span class="hljs-comment">//ç¯å¢ƒä¸Šä¸‹æ–‡</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractState</span>&#123;<br>   <span class="hljs-comment">//å½“å‰çš„çŠ¶æ€ state, æ ¹æ®æˆ‘ä»¬çš„ä¸šåŠ¡æµç¨‹å¤„ç†ï¼Œä¸åœçš„å˜åŒ–</span><br>   <span class="hljs-keyword">private</span> State state;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.checkEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkFailEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.checkFailEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makePriceEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.makePriceEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">acceptOrderEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.acceptOrderEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notPeopleAcceptEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.notPeopleAcceptEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">payOrderEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.payOrderEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">orderFailureEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.orderFailureEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">feedBackEvent</span><span class="hljs-params">(Context context)</span> &#123;<br>        state.feedBackEvent(<span class="hljs-built_in">this</span>);<br>        getCurrentState();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> State <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(State state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;å½“å‰çŠ¶æ€ : &quot;</span> + state.getCurrentState());<br>        <span class="hljs-keyword">return</span> state.getCurrentState();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>State.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state.money;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * çŠ¶æ€æ¥å£</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">State</span> &#123;<br><br>   <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå®¡</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç”µå®¡å¤±è´¥</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkFailEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å®šä»·å‘å¸ƒ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makePriceEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¥å•</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">acceptOrderEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ— äººæ¥å•å¤±æ•ˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">notPeopleAcceptEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ä»˜æ¬¾</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">payOrderEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¥å•æœ‰äººæ”¯ä»˜å¤±æ•ˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">orderFailureEvent</span><span class="hljs-params">(Context context)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * åé¦ˆ</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">feedBackEvent</span><span class="hljs-params">(Context context)</span>;<br><br><br>    String <span class="hljs-title function_">getCurrentState</span><span class="hljs-params">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>StateEnum.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.state.money;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * çŠ¶æ€æšä¸¾ç±»</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Administrator</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">StateEnum</span> &#123;<br><br>    <span class="hljs-comment">//è®¢å•ç”Ÿæˆ</span><br>    GENERATE(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;GENERATE&quot;</span>),<br><br>    <span class="hljs-comment">//å·²å®¡æ ¸</span><br>    REVIEWED(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;REVIEWED&quot;</span>),<br><br>    <span class="hljs-comment">//å·²å‘å¸ƒ</span><br>    PUBLISHED(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;PUBLISHED&quot;</span>),<br><br>    <span class="hljs-comment">//å¾…ä»˜æ¬¾</span><br>    NOT_PAY(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;NOT_PAY&quot;</span>),<br><br>    <span class="hljs-comment">//å·²ä»˜æ¬¾</span><br>    PAID(<span class="hljs-number">5</span>, <span class="hljs-string">&quot;PAID&quot;</span>),<br><br>    <span class="hljs-comment">//å·²å®Œç»“</span><br>    FEED_BACKED(<span class="hljs-number">6</span>, <span class="hljs-string">&quot;FEED_BACKED&quot;</span>);<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> key;<br>    <span class="hljs-keyword">private</span> String value;<br><br>    StateEnum(<span class="hljs-type">int</span> key, String value) &#123;<br>        <span class="hljs-built_in">this</span>.key = key;<br>        <span class="hljs-built_in">this</span>.value = value;<br>    &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getKey</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> key;&#125;<br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getValue</span><span class="hljs-params">()</span> &#123;<span class="hljs-keyword">return</span> value;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ada">å½“å‰çŠ¶æ€ : <span class="hljs-type">PUBLISHED</span><br>PUBLISHED<br>å½“å‰çŠ¶æ€ : <span class="hljs-type">NOT_PAY</span><br>å½“å‰çŠ¶æ€ : <span class="hljs-type">PAID</span><br></code></pre></td></tr></table></figure>
<h2 id="çŠ¶æ€æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#çŠ¶æ€æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> çŠ¶æ€æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>ä»£ç æœ‰å¾ˆå¼ºçš„<strong>å¯è¯»æ€§</strong>ã€‚çŠ¶æ€æ¨¡å¼å°†æ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºå°è£…åˆ°å¯¹åº”çš„ä¸€ä¸ªç±»ä¸­</p>
</li>
<li>
<p><strong>æ–¹ä¾¿ç»´æŠ¤</strong>ã€‚å°†å®¹æ˜“äº§ç”Ÿé—®é¢˜çš„ if-else è¯­å¥åˆ é™¤äº†ï¼Œå¦‚æœæŠŠæ¯ä¸ªçŠ¶æ€çš„è¡Œä¸ºéƒ½æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨æ–¹æ³•æ—¶éƒ½è¦åˆ¤æ–­å½“å‰æ˜¯ä»€ä¹ˆçŠ¶æ€ï¼Œä¸ä½†ä¼šäº§å‡ºå¾ˆå¤š if-else è¯­å¥ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™</p>
</li>
<li>
<p>ç¬¦åˆâ€œå¼€é—­åŸåˆ™â€ã€‚å®¹æ˜“å¢åˆ çŠ¶æ€</p>
</li>
<li>
<p>ä¼šäº§ç”Ÿå¾ˆå¤šç±»ã€‚æ¯ä¸ªçŠ¶æ€éƒ½è¦ä¸€ä¸ªå¯¹åº”çš„ç±»ï¼Œå½“çŠ¶æ€è¿‡å¤šæ—¶ä¼šäº§ç”Ÿå¾ˆå¤šç±»ï¼ŒåŠ å¤§ç»´æŠ¤éš¾åº¦</p>
</li>
<li>
<p>åº”ç”¨åœºæ™¯ï¼šå½“ä¸€ä¸ªäº‹ä»¶æˆ–è€…å¯¹è±¡æœ‰å¾ˆå¤šç§çŠ¶æ€ï¼ŒçŠ¶æ€ä¹‹é—´ä¼šç›¸äº’è½¬æ¢ï¼Œå¯¹ä¸åŒçš„çŠ¶æ€è¦æ±‚æœ‰ä¸åŒçš„è¡Œä¸ºçš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨çŠ¶æ€æ¨¡å¼</p>
</li>
</ol>
<h1 id="ç­–ç•¥æ¨¡å¼"><a class="markdownIt-Anchor" href="#ç­–ç•¥æ¨¡å¼"></a> ğŸŒ•ç­–ç•¥æ¨¡å¼</h1>
<p>åœ¨ç­–ç•¥æ¨¡å¼ï¼ˆStrategy Patternï¼‰ä¸­ï¼Œä¸€ä¸ªç±»çš„è¡Œä¸ºæˆ–å…¶ç®—æ³•å¯ä»¥åœ¨è¿è¡Œæ—¶æ›´æ”¹ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<h2 id="ä»‹ç»-21"><a class="markdownIt-Anchor" href="#ä»‹ç»-21"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•,æŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥, å¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong> åœ¨æœ‰å¤šç§ç®—æ³•ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ ifâ€¦else æ‰€å¸¦æ¥çš„å¤æ‚å’Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> ä¸€ä¸ªç³»ç»Ÿæœ‰è®¸å¤šè®¸å¤šç±»ï¼Œè€ŒåŒºåˆ†å®ƒä»¬çš„åªæ˜¯ä»–ä»¬ç›´æ¥çš„è¡Œä¸ºã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> å°†è¿™äº›ç®—æ³•å°è£…æˆä¸€ä¸ªä¸€ä¸ªçš„ç±»ï¼Œä»»æ„åœ°æ›¿æ¢ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> å®ç°åŒä¸€ä¸ªæ¥å£ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€è¯¸è‘›äº®çš„é”¦å›Šå¦™è®¡ï¼Œæ¯ä¸€ä¸ªé”¦å›Šå°±æ˜¯ä¸€ä¸ªç­–ç•¥ã€‚ 2ã€æ—…è¡Œçš„å‡ºæ¸¸æ–¹å¼ï¼Œé€‰æ‹©éª‘è‡ªè¡Œè½¦ã€åæ±½è½¦ï¼Œæ¯ä¸€ç§æ—…è¡Œæ–¹å¼éƒ½æ˜¯ä¸€ä¸ªç­–ç•¥ã€‚ 3ã€JAVA AWT ä¸­çš„ LayoutManagerã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚ 2ã€é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ã€‚ 3ã€æ‰©å±•æ€§è‰¯å¥½ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€ç­–ç•¥ç±»ä¼šå¢å¤šã€‚ 2ã€æ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€å¦‚æœåœ¨ä¸€ä¸ªç³»ç»Ÿé‡Œé¢æœ‰è®¸å¤šç±»ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä»…åœ¨äºå®ƒä»¬çš„è¡Œä¸ºï¼Œé‚£ä¹ˆä½¿ç”¨ç­–ç•¥æ¨¡å¼å¯ä»¥åŠ¨æ€åœ°è®©ä¸€ä¸ªå¯¹è±¡åœ¨è®¸å¤šè¡Œä¸ºä¸­é€‰æ‹©ä¸€ç§è¡Œä¸ºã€‚<br />
2ã€ä¸€ä¸ªç³»ç»Ÿéœ€è¦åŠ¨æ€åœ°åœ¨å‡ ç§ç®—æ³•ä¸­é€‰æ‹©ä¸€ç§ã€‚ 3ã€å¦‚æœä¸€ä¸ªå¯¹è±¡æœ‰å¾ˆå¤šçš„è¡Œä¸ºï¼Œå¦‚æœä¸ç”¨æ°å½“çš„æ¨¡å¼ï¼Œè¿™äº›è¡Œä¸ºå°±åªå¥½ä½¿ç”¨å¤šé‡çš„æ¡ä»¶é€‰æ‹©è¯­å¥æ¥å®ç°ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> å¦‚æœä¸€ä¸ªç³»ç»Ÿçš„ç­–ç•¥å¤šäºå››ä¸ªï¼Œå°±éœ€è¦è€ƒè™‘ä½¿ç”¨æ··åˆæ¨¡å¼ï¼Œè§£å†³ç­–ç•¥ç±»è†¨èƒ€çš„é—®é¢˜ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105165911040.png" srcset="/img/loading.gif" lazyload alt="image-20230105165911040" /></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ· context æœ‰æˆå‘˜å˜é‡ strategy æˆ–è€…å…¶ä»–çš„ç­–ç•¥æ¥å£,è‡³äºéœ€è¦ä½¿ç”¨åˆ°å“ªä¸ªç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ„é€ å™¨ä¸­æŒ‡å®š</p>
<h2 id="å®ç°-19"><a class="markdownIt-Anchor" href="#å®ç°-19"></a> å®ç°</h2>
<ol>
<li>åº”ç”¨å®ä¾‹è¦æ±‚</li>
</ol>
<p>â€‹	1) æœ‰å„ç§é¸­å­(æ¯”å¦‚ é‡é¸­ã€åŒ—äº¬é¸­ã€æ°´é¸­ç­‰ï¼Œ é¸­å­æœ‰å„ç§è¡Œä¸ºï¼Œæ¯”å¦‚ å«ã€é£è¡Œç­‰)</p>
<p>â€‹	2) æ˜¾ç¤ºé¸­å­çš„ä¿¡æ¯</p>
<p>ç¼–å†™ç¨‹åºå®Œæˆå‰é¢çš„é¸­å­é¡¹ç›®ï¼Œè¦æ±‚ä½¿ç”¨ç­–ç•¥æ¨¡å¼</p>
<ol start="2">
<li>æ€è·¯åˆ†æ(ç±»å›¾)</li>
</ol>
<p>ç­–ç•¥æ¨¡å¼ï¼šåˆ†åˆ«å°è£…è¡Œä¸ºæ¥å£ï¼Œå®ç°ç®—æ³•æ—ï¼Œè¶…ç±»é‡Œæ”¾è¡Œä¸ºæ¥å£å¯¹è±¡ï¼Œåœ¨å­ç±»é‡Œå…·ä½“è®¾å®šè¡Œä¸ºå¯¹è±¡ã€‚åŸåˆ™å°±æ˜¯ï¼šåˆ†ç¦»å˜åŒ–éƒ¨åˆ†ï¼Œå°è£…æ¥å£ï¼ŒåŸºäºæ¥å£ç¼–ç¨‹å„ç§åŠŸèƒ½ã€‚æ­¤æ¨¡å¼è®©è¡Œä¸ºçš„å˜åŒ–ç‹¬ç«‹äºç®—æ³•çš„ä½¿ç”¨è€…</p>
<p>ä¼ ç»Ÿæ¨¡å¼ç±»å›¾ï¼š</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105170757994.png" srcset="/img/loading.gif" lazyload alt="image-20230105170757994" /></p>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-comment">// TODO Auto-generated method stub</span><br>		<span class="hljs-comment">//æµ‹è¯•</span><br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">PekingDuck</span>().fly();<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">WildDuck</span>().fly();<br>		<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToyDuck</span>().fly();<br>		<span class="hljs-comment">//ToyDuckæ²¡æœ‰é£è¡Œèƒ½åŠ›</span><br>	&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<p><code>Duck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">Duck</span><span class="hljs-params">()</span> &#123;<br>   <br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span>;<span class="hljs-comment">//æ˜¾ç¤ºé¸­å­ä¿¡æ¯</span><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;é¸­å­å˜å˜å«~~&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;é¸­å­ä¼šæ¸¸æ³³~~&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;é¸­å­ä¼šé£ç¿”~~~&quot;</span>);<br>   &#125;<br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PekingDuck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PekingDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;~~åŒ—äº¬é¸­~~~&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-comment">//å› ä¸ºåŒ—äº¬é¸­ä¸èƒ½é£ç¿”ï¼Œå› æ­¤éœ€è¦é‡å†™fly</span><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;åŒ—äº¬é¸­ä¸èƒ½é£ç¿”&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ToyDuck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToyDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span>&#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-comment">//éœ€è¦é‡å†™çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•</span><br>   <br>   <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­ä¸èƒ½å«~~&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­ä¸ä¼šæ¸¸æ³³~~&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­ä¸ä¼šé£ç¿”~~~&quot;</span>);<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>WildDuck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WildDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; è¿™æ˜¯é‡é¸­ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown">åŒ—äº¬é¸­ä¸èƒ½é£ç¿”<br>é¸­å­ä¼šé£ç¿”<span class="hljs-code">~~~</span><br><span class="hljs-code">ç©å…·é¸­ä¸ä¼šé£ç¿”~~~</span><br></code></pre></td></tr></table></figure>
<p>ç­–ç•¥æ¨¡å¼ç±»å›¾ï¼š</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105165733894.png" srcset="/img/loading.gif" lazyload alt="" /></p>
<p><code>BadFlyBehavior.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BadFlyBehavior</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlyBehavior</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; é£ç¿”æŠ€æœ¯ä¸€èˆ¬ &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-type">WildDuck</span> <span class="hljs-variable">wildDuck</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WildDuck</span>();<br>      wildDuck.fly();<span class="hljs-comment">//</span><br>      <br>      <span class="hljs-type">ToyDuck</span> <span class="hljs-variable">toyDuck</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ToyDuck</span>();<br>      toyDuck.fly();<br>      <br>      <span class="hljs-type">PekingDuck</span> <span class="hljs-variable">pekingDuck</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PekingDuck</span>();<br>      pekingDuck.fly();<br>      <br>      <span class="hljs-comment">//åŠ¨æ€æ”¹å˜æŸä¸ªå¯¹è±¡çš„è¡Œä¸º, åŒ—äº¬é¸­ ä¸èƒ½é£</span><br>      pekingDuck.setFlyBehavior(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NoFlyBehavior</span>());<br>      System.out.println(<span class="hljs-string">&quot;åŒ—äº¬é¸­çš„å®é™…é£ç¿”èƒ½åŠ›&quot;</span>);<br>      pekingDuck.fly();<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Duck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Duck</span> &#123;<br><br>    <span class="hljs-comment">//å±æ€§, ç­–ç•¥æ¥å£</span><br>    FlyBehavior flyBehavior;<br>    <span class="hljs-comment">//å…¶å®ƒå±æ€§&lt;-&gt;ç­–ç•¥æ¥å£</span><br>    QuackBehavior quackBehavior;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Duck</span><span class="hljs-params">()</span> &#123;<br><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span>;<span class="hljs-comment">//æ˜¾ç¤ºé¸­å­ä¿¡æ¯</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;é¸­å­å˜å˜å«~~&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;é¸­å­ä¼šæ¸¸æ³³~~&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br><br>      display();<br>        <span class="hljs-comment">//æ”¹è¿›</span><br>        <span class="hljs-keyword">if</span> (flyBehavior != <span class="hljs-literal">null</span>) &#123;<br>            flyBehavior.fly();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFlyBehavior</span><span class="hljs-params">(FlyBehavior flyBehavior)</span> &#123;<br>        <span class="hljs-built_in">this</span>.flyBehavior = flyBehavior;<br>    &#125;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setQuackBehavior</span><span class="hljs-params">(QuackBehavior quackBehavior)</span> &#123;<br>        <span class="hljs-built_in">this</span>.quackBehavior = quackBehavior;<br>    &#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>FlyBehavior.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">FlyBehavior</span> &#123;<br>   <br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span>; <span class="hljs-comment">// å­ç±»å…·ä½“å®ç°</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>GoodFlyBehavior.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GoodFlyBehavior</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlyBehavior</span> &#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; é£ç¿”æŠ€æœ¯é«˜è¶… ~~~&quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>NoFlyBehavior.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NoFlyBehavior</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">FlyBehavior</span>&#123;<br><br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">fly</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; ä¸ä¼šé£ç¿”  &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PekingDuck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PekingDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span> &#123;<br><br>   <br>   <span class="hljs-comment">//å‡å¦‚åŒ—äº¬é¸­å¯ä»¥é£ç¿”ï¼Œä½†æ˜¯é£ç¿”æŠ€æœ¯ä¸€èˆ¬</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">PekingDuck</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      flyBehavior = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BadFlyBehavior</span>();<br>      <br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.print(<span class="hljs-string">&quot;åŒ—äº¬é¸­=&gt;&quot;</span>);<br>   &#125;<br>   <br>   <br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>QuackBehavior.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">QuackBehavior</span> &#123;<br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span>;<span class="hljs-comment">//å­ç±»å®ç°</span><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ToyDuck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToyDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span>&#123;<br><br>   <br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ToyDuck</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      flyBehavior = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoFlyBehavior</span>();<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­=&gt;&quot;</span>);<br>   &#125;<br><br>   <span class="hljs-comment">//éœ€è¦é‡å†™çˆ¶ç±»çš„æ‰€æœ‰æ–¹æ³•</span><br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">quack</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­ä¸èƒ½å«~~&quot;</span>);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">()</span> &#123;<br>      System.out.println(<span class="hljs-string">&quot;ç©å…·é¸­ä¸ä¼šæ¸¸æ³³~~&quot;</span>);<br>   &#125;<br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>WildDuck.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.strategy.improve;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WildDuck</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Duck</span> &#123;<br><br>   <br>   <span class="hljs-comment">//æ„é€ å™¨ï¼Œä¼ å…¥FlyBehavor çš„å¯¹è±¡</span><br>   <span class="hljs-keyword">public</span>  <span class="hljs-title function_">WildDuck</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      flyBehavior = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GoodFlyBehavior</span>();<br>   &#125;<br>   <br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      System.out.println(<span class="hljs-string">&quot; é‡é¸­=&gt; &quot;</span>);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs coq"> é‡é¸­=&gt; <br> é£ç¿”æŠ€æœ¯é«˜è¶… ~~~<br>ç©å…·é¸­=&gt;<br> ä¸ä¼šé£ç¿”  <br>åŒ—äº¬é¸­=&gt; é£ç¿”æŠ€æœ¯ä¸€èˆ¬ <br>åŒ—äº¬é¸­çš„å®é™…é£ç¿”èƒ½åŠ›<br>åŒ—äº¬é¸­=&gt; ä¸ä¼šé£ç¿” <br></code></pre></td></tr></table></figure>
<h2 id="ç­–ç•¥æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#ç­–ç•¥æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> ç­–ç•¥æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>ç­–ç•¥æ¨¡å¼çš„å…³é”®æ˜¯ï¼šåˆ†æé¡¹ç›®ä¸­å˜åŒ–éƒ¨åˆ†ä¸ä¸å˜éƒ¨åˆ†</p>
</li>
<li>
<p>ç­–ç•¥æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå¤šç”¨ç»„åˆ/èšåˆ å°‘ç”¨ç»§æ‰¿ï¼›ç”¨è¡Œä¸ºç±»ç»„åˆï¼Œè€Œä¸æ˜¯è¡Œä¸ºçš„ç»§æ‰¿ã€‚æ›´æœ‰å¼¹æ€§</p>
</li>
<li>
<p>ä½“ç°äº†â€œå¯¹ä¿®æ”¹å…³é—­ï¼Œå¯¹æ‰©å±•å¼€æ”¾â€åŸåˆ™ï¼Œå®¢æˆ·ç«¯å¢åŠ è¡Œä¸ºä¸ç”¨ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œåªè¦æ·»åŠ ä¸€ç§ç­–ç•¥ï¼ˆæˆ–è€…è¡Œä¸ºï¼‰å³å¯ï¼Œé¿å…äº†ä½¿ç”¨å¤šé‡è½¬ç§»è¯­å¥ï¼ˆifâ€¦else ifâ€¦elseï¼‰</p>
</li>
<li>
<p>æä¾›äº†å¯ä»¥æ›¿æ¢ç»§æ‰¿å…³ç³»çš„åŠæ³•ï¼š ç­–ç•¥æ¨¡å¼å°†ç®—æ³•å°è£…åœ¨ç‹¬ç«‹çš„ Strategy ç±»ä¸­ä½¿å¾—ä½ å¯ä»¥ç‹¬ç«‹äºå…¶ Context æ”¹å˜å®ƒï¼Œä½¿å®ƒæ˜“äºåˆ‡æ¢ã€æ˜“äºç†è§£ã€æ˜“äºæ‰©å±•</p>
</li>
<li>
<p><strong>éœ€è¦æ³¨æ„çš„æ˜¯</strong>ï¼šæ¯æ·»åŠ ä¸€ä¸ªç­–ç•¥å°±è¦å¢åŠ ä¸€ä¸ªç±»ï¼Œå½“ç­–ç•¥è¿‡å¤šæ˜¯ä¼šå¯¼è‡´ç±»æ•°ç›®åº</p>
</li>
</ol>
<h1 id="è´£ä»»é“¾æ¨¡å¼"><a class="markdownIt-Anchor" href="#è´£ä»»é“¾æ¨¡å¼"></a> ğŸŒ—è´£ä»»é“¾æ¨¡å¼</h1>
<p>é¡¾åæ€ä¹‰ï¼Œè´£ä»»é“¾æ¨¡å¼ï¼ˆChain of Responsibility Patternï¼‰ä¸ºè¯·æ±‚åˆ›å»ºäº†ä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚è¿™ç§æ¨¡å¼ç»™äºˆè¯·æ±‚çš„ç±»å‹ï¼Œå¯¹è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è¿›è¡Œè§£è€¦ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ã€‚</p>
<p>åœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œé€šå¸¸æ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡ä¸èƒ½å¤„ç†è¯¥è¯·æ±‚ï¼Œé‚£ä¹ˆå®ƒä¼šæŠŠç›¸åŒçš„è¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ï¼Œä¾æ­¤ç±»æ¨ã€‚</p>
<h2 id="ä»‹ç»-22"><a class="markdownIt-Anchor" href="#ä»‹ç»-22"></a> ä»‹ç»</h2>
<p><strong>æ„å›¾ï¼š</strong> é¿å…è¯·æ±‚å‘é€è€…ä¸æ¥æ”¶è€…è€¦åˆåœ¨ä¸€èµ·ï¼Œè®©å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¯èƒ½æ¥æ”¶è¯·æ±‚ï¼Œå°†è¿™äº›å¯¹è±¡è¿æ¥æˆä¸€æ¡é“¾ï¼Œå¹¶ä¸”æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯·æ±‚ï¼Œç›´åˆ°æœ‰å¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢ã€‚</p>
<p><strong>ä¸»è¦è§£å†³ï¼š</strong><br />
èŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> åœ¨å¤„ç†æ¶ˆæ¯çš„æ—¶å€™ä»¥è¿‡æ»¤å¾ˆå¤šé“ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong> æ‹¦æˆªçš„ç±»éƒ½å®ç°ç»Ÿä¸€æ¥å£ã€‚</p>
<p><strong>å…³é”®ä»£ç ï¼š</strong> Handler é‡Œé¢èšåˆå®ƒè‡ªå·±ï¼Œåœ¨ HandlerRequest é‡Œåˆ¤æ–­æ˜¯å¦åˆé€‚ï¼Œå¦‚æœæ²¡è¾¾åˆ°æ¡ä»¶åˆ™å‘ä¸‹ä¼ é€’ï¼Œå‘è°ä¼ é€’ä¹‹å‰ set è¿›å»ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€çº¢æ¥¼æ¢¦ä¸­çš„&quot;å‡»é¼“ä¼ èŠ±&quot;ã€‚ 2ã€JS ä¸­çš„äº‹ä»¶å†’æ³¡ã€‚ 3ã€JAVA WEB ä¸­ Apache Tomcat å¯¹ Encoding çš„å¤„ç†ï¼ŒStruts2 çš„æ‹¦æˆªå™¨ï¼Œjsp servlet çš„ Filterã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€é™ä½è€¦åˆåº¦ã€‚å®ƒå°†è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…è§£è€¦ã€‚ 2ã€ç®€åŒ–äº†å¯¹è±¡ã€‚ä½¿å¾—å¯¹è±¡ä¸éœ€è¦çŸ¥é“é“¾çš„ç»“æ„ã€‚3ã€å¢å¼ºç»™å¯¹è±¡æŒ‡æ´¾èŒè´£çš„çµæ´»æ€§ã€‚é€šè¿‡æ”¹å˜é“¾å†…çš„æˆå‘˜æˆ–è€…è°ƒåŠ¨å®ƒä»¬çš„æ¬¡åºï¼Œå…è®¸åŠ¨æ€åœ°æ–°å¢æˆ–è€…åˆ é™¤è´£ä»»ã€‚ 4ã€å¢åŠ æ–°çš„è¯·æ±‚å¤„ç†ç±»å¾ˆæ–¹ä¾¿ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€ä¸èƒ½ä¿è¯è¯·æ±‚ä¸€å®šè¢«æ¥æ”¶ã€‚ 2ã€ç³»ç»Ÿæ€§èƒ½å°†å—åˆ°ä¸€å®šå½±å“ï¼Œè€Œä¸”åœ¨è¿›è¡Œä»£ç è°ƒè¯•æ—¶ä¸å¤ªæ–¹ä¾¿ï¼Œå¯èƒ½ä¼šé€ æˆå¾ªç¯è°ƒç”¨ã€‚<br />
3ã€å¯èƒ½ä¸å®¹æ˜“è§‚å¯Ÿè¿è¡Œæ—¶çš„ç‰¹å¾ï¼Œæœ‰ç¢äºé™¤é”™ã€‚</p>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong> 1ã€æœ‰å¤šä¸ªå¯¹è±¡å¯ä»¥å¤„ç†åŒä¸€ä¸ªè¯·æ±‚ï¼Œå…·ä½“å“ªä¸ªå¯¹è±¡å¤„ç†è¯¥è¯·æ±‚ç”±è¿è¡Œæ—¶åˆ»è‡ªåŠ¨ç¡®å®šã€‚<br />
2ã€åœ¨ä¸æ˜ç¡®æŒ‡å®šæ¥æ”¶è€…çš„æƒ…å†µä¸‹ï¼Œå‘å¤šä¸ªå¯¹è±¡ä¸­çš„ä¸€ä¸ªæäº¤ä¸€ä¸ªè¯·æ±‚ã€‚ 3ã€å¯åŠ¨æ€æŒ‡å®šä¸€ç»„å¯¹è±¡å¤„ç†è¯·æ±‚ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong> åœ¨ JAVA WEB ä¸­é‡åˆ°å¾ˆå¤šåº”ç”¨ã€‚</p>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105183130277.png" srcset="/img/loading.gif" lazyload alt="image-20230105183130277" /></p>
<p>å¯¹åŸç†ç±»å›¾çš„è¯´æ˜-å³(èŒè´£é“¾æ¨¡å¼çš„è§’è‰²åŠèŒè´£)</p>
<ol>
<li>
<p>Handler : æŠ½è±¡çš„å¤„ç†è€…, å®šä¹‰äº†ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£, åŒæ—¶å«ä¹‰å¦å¤– Handler</p>
</li>
<li>
<p>ConcreteHandlerA , B æ˜¯å…·ä½“çš„å¤„ç†è€…, å¤„ç†å®ƒè‡ªå·±è´Ÿè´£çš„è¯·æ±‚ï¼Œ å¯ä»¥è®¿é—®å®ƒçš„åç»§è€…(å³ä¸‹ä¸€ä¸ªå¤„ç†è€…), å¦‚æœå¯ä»¥å¤„ç†å½“å‰è¯·æ±‚ï¼Œåˆ™å¤„ç†ï¼Œå¦åˆ™å°±å°†è¯¥è¯·æ±‚äº¤ä¸ª åç»§è€…å»å¤„ç†ï¼Œä»è€Œå½¢æˆä¸€ä¸ªèŒè´£é“¾</p>
</li>
<li>
<p>Request ï¼Œ å«ä¹‰å¾ˆå¤šå±æ€§ï¼Œè¡¨ç¤ºä¸€ä¸ªè¯·æ±‚</p>
</li>
</ol>
<h2 id="å®ç°-20"><a class="markdownIt-Anchor" href="#å®ç°-20"></a> å®ç°</h2>
<ol>
<li>åº”ç”¨å®ä¾‹è¦æ±‚</li>
</ol>
<p>ç¼–å†™ç¨‹åºå®Œæˆå­¦æ ¡ OA ç³»ç»Ÿçš„é‡‡è´­å®¡æ‰¹é¡¹ç›®ï¼šéœ€æ±‚</p>
<p>é‡‡è´­å‘˜é‡‡è´­æ•™å­¦å™¨æ</p>
<p>å¦‚æœé‡‘é¢ å°äºç­‰äº 5000, ç”±æ•™å­¦ä¸»ä»»å®¡æ‰¹</p>
<p>å¦‚æœé‡‘é¢ å°äºç­‰äº 10000, ç”±é™¢é•¿å®¡æ‰¹</p>
<p>å¦‚æœé‡‘é¢ å°äºç­‰äº 30000, ç”±å‰¯æ ¡é•¿å®¡æ‰¹</p>
<p>å¦‚æœé‡‘é¢ è¶…è¿‡ 30000 ä»¥ä¸Šï¼Œæœ‰æ ¡é•¿å®¡æ‰¹</p>
<ol start="2">
<li>æ€è·¯åˆ†æå’Œå›¾è§£(ç±»å›¾)</li>
</ol>
<p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20230105184409277.png" srcset="/img/loading.gif" lazyload alt="image-20230105184409277" /></p>
<p><code>Approver.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Approver</span> &#123;<br><br>    Approver approver;  <span class="hljs-comment">//ä¸‹ä¸€ä¸ªå¤„ç†è€…</span><br>    String name; <span class="hljs-comment">// åå­—</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Approver</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-comment">//ä¸‹ä¸€ä¸ªå¤„ç†è€…</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApprover</span><span class="hljs-params">(Approver approver)</span> &#123;<br>        <span class="hljs-built_in">this</span>.approver = approver;<br>    &#125;<br><br>    <span class="hljs-comment">//å¤„ç†å®¡æ‰¹è¯·æ±‚çš„æ–¹æ³•ï¼Œå¾—åˆ°ä¸€ä¸ªè¯·æ±‚, å¤„ç†æ˜¯å­ç±»å®Œæˆï¼Œå› æ­¤è¯¥æ–¹æ³•åšæˆæŠ½è±¡</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest purchaseRequest)</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>Client.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªè¯·æ±‚</span><br>      <span class="hljs-type">PurchaseRequest</span> <span class="hljs-variable">purchaseRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PurchaseRequest</span>(<span class="hljs-number">1</span>, <span class="hljs-number">31000</span>, <span class="hljs-number">1</span>);<br>      <br>      <span class="hljs-comment">//åˆ›å»ºç›¸å…³çš„å®¡æ‰¹äºº</span><br>      <span class="hljs-type">DepartmentApprover</span> <span class="hljs-variable">departmentApprover</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DepartmentApprover</span>(<span class="hljs-string">&quot;å¼ ä¸»ä»»&quot;</span>);<br>      <span class="hljs-type">CollegeApprover</span> <span class="hljs-variable">collegeApprover</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CollegeApprover</span>(<span class="hljs-string">&quot;æé™¢é•¿&quot;</span>);<br>      <span class="hljs-type">ViceSchoolMasterApprover</span> <span class="hljs-variable">viceSchoolMasterApprover</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViceSchoolMasterApprover</span>(<span class="hljs-string">&quot;ç‹å‰¯æ ¡&quot;</span>);<br>      <span class="hljs-type">SchoolMasterApprover</span> <span class="hljs-variable">schoolMasterApprover</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SchoolMasterApprover</span>(<span class="hljs-string">&quot;ä½Ÿæ ¡é•¿&quot;</span>);<br>   <br>   <br>      <span class="hljs-comment">//éœ€è¦å°†å„ä¸ªå®¡æ‰¹çº§åˆ«çš„ä¸‹ä¸€ä¸ªè®¾ç½®å¥½ (å¤„ç†äººæ„æˆç¯å½¢: )</span><br>      departmentApprover.setApprover(collegeApprover);<br>      collegeApprover.setApprover(viceSchoolMasterApprover);<br>      viceSchoolMasterApprover.setApprover(schoolMasterApprover);<br>      schoolMasterApprover.setApprover(departmentApprover);<br>      <br><br>      departmentApprover.processRequest(purchaseRequest);<br>      viceSchoolMasterApprover.processRequest(purchaseRequest);<br><br>      <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªè¯·æ±‚</span><br>      <span class="hljs-type">PurchaseRequest</span> <span class="hljs-variable">purchaseRequest1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PurchaseRequest</span>(<span class="hljs-number">2</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">2</span>);<br><br><br>      departmentApprover.processRequest(purchaseRequest1);<br>      viceSchoolMasterApprover.processRequest(purchaseRequest1);<br>   &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>CollegeApprover.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é™¢é•¿</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CollegeApprover</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approver</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">CollegeApprover</span><span class="hljs-params">(String name)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      <span class="hljs-built_in">super</span>(name);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest purchaseRequest)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">if</span>(purchaseRequest.getPrice() &gt; <span class="hljs-number">5000</span> &amp;&amp; purchaseRequest.getPrice() &lt;= <span class="hljs-number">10000</span>) &#123;<br>         System.out.println(<span class="hljs-string">&quot; è¯·æ±‚ç¼–å· id= &quot;</span> + purchaseRequest.getId() + <span class="hljs-string">&quot; è¢« &quot;</span> + <span class="hljs-built_in">this</span>.name + <span class="hljs-string">&quot; å¤„ç†&quot;</span>);<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>         approver.processRequest(purchaseRequest);<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>DepartmentApprover.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * ä¸»ä»»</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DepartmentApprover</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approver</span> &#123;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DepartmentApprover</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>        <span class="hljs-built_in">super</span>(name);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest purchaseRequest)</span> &#123;<br>        <span class="hljs-comment">// TODO Auto-generated method stub</span><br>        <span class="hljs-keyword">if</span> (purchaseRequest.getPrice() &lt;= <span class="hljs-number">5000</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot; è¯·æ±‚ç¼–å· id= &quot;</span> + purchaseRequest.getId() + <span class="hljs-string">&quot; è¢« &quot;</span> + <span class="hljs-built_in">this</span>.name + <span class="hljs-string">&quot; å¤„ç†&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            approver.processRequest(purchaseRequest);<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>PurchaseRequest.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><br><span class="hljs-comment">//è¯·æ±‚ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PurchaseRequest</span> &#123;<br><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; <span class="hljs-comment">//è¯·æ±‚ç±»å‹</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">float</span> <span class="hljs-variable">price</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.0f</span>; <span class="hljs-comment">//è¯·æ±‚é‡‘é¢</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>   <span class="hljs-comment">//æ„é€ å™¨</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">PurchaseRequest</span><span class="hljs-params">(<span class="hljs-type">int</span> type, <span class="hljs-type">float</span> price, <span class="hljs-type">int</span> id)</span> &#123;<br>      <span class="hljs-built_in">this</span>.type = type;<br>      <span class="hljs-built_in">this</span>.price = price;<br>      <span class="hljs-built_in">this</span>.id = id;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getType</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> type;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">float</span> <span class="hljs-title function_">getPrice</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> price;<br>   &#125;<br>   <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> &#123;<br>      <span class="hljs-keyword">return</span> id;<br>   &#125;<br>   <br>   <br>   <br>   <br>   <br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>SchoolMasterApprover.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ ¡é•¿</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SchoolMasterApprover</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approver</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">SchoolMasterApprover</span><span class="hljs-params">(String name)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      <span class="hljs-built_in">super</span>(name);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest purchaseRequest)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">if</span>(purchaseRequest.getPrice() &gt; <span class="hljs-number">30000</span>) &#123;<br>         System.out.println(<span class="hljs-string">&quot; è¯·æ±‚ç¼–å· id= &quot;</span> + purchaseRequest.getId() + <span class="hljs-string">&quot; è¢« &quot;</span> + <span class="hljs-built_in">this</span>.name + <span class="hljs-string">&quot; å¤„ç†&quot;</span>);<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>         approver.processRequest(purchaseRequest);<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p><code>ViceSchoolMasterApprover.java</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> io.xtwoy.responsibilitychain;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * å‰¯æ ¡</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViceSchoolMasterApprover</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Approver</span> &#123;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">ViceSchoolMasterApprover</span><span class="hljs-params">(String name)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated constructor stub</span><br>      <span class="hljs-built_in">super</span>(name);<br>   &#125;<br>   <br>   <span class="hljs-meta">@Override</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processRequest</span><span class="hljs-params">(PurchaseRequest purchaseRequest)</span> &#123;<br>      <span class="hljs-comment">// TODO Auto-generated method stub</span><br>      <span class="hljs-keyword">if</span>(purchaseRequest.getPrice() &gt; <span class="hljs-number">10000</span> &amp;&amp; purchaseRequest.getPrice() &lt;= <span class="hljs-number">30000</span>) &#123;<br>         System.out.println(<span class="hljs-string">&quot; è¯·æ±‚ç¼–å· id= &quot;</span> + purchaseRequest.getId() + <span class="hljs-string">&quot; è¢« &quot;</span> + <span class="hljs-built_in">this</span>.name + <span class="hljs-string">&quot; å¤„ç†&quot;</span>);<br>      &#125;<span class="hljs-keyword">else</span> &#123;<br>         approver.processRequest(purchaseRequest);<br>      &#125;<br>   &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>æ‰§è¡Œç¨‹åºï¼Œè¾“å‡ºç»“æœï¼š</p>
</blockquote>
<figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs abnf">è¯·æ±‚ç¼–å· id<span class="hljs-operator">=</span> <span class="hljs-number">1</span> è¢« ä½Ÿæ ¡é•¿ å¤„ç†<br>è¯·æ±‚ç¼–å· id<span class="hljs-operator">=</span> <span class="hljs-number">1</span> è¢« ä½Ÿæ ¡é•¿ å¤„ç†<br>è¯·æ±‚ç¼–å· id<span class="hljs-operator">=</span> <span class="hljs-number">2</span> è¢« æé™¢é•¿ å¤„ç†<br>è¯·æ±‚ç¼–å· id<span class="hljs-operator">=</span> <span class="hljs-number">2</span> è¢« æé™¢é•¿ å¤„ç†<br></code></pre></td></tr></table></figure>
<h2 id="èŒè´£é“¾æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"><a class="markdownIt-Anchor" href="#èŒè´£é“¾æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚"></a> èŒè´£é“¾æ¨¡å¼çš„æ³¨æ„äº‹é¡¹å’Œç»†èŠ‚</h2>
<ol>
<li>
<p>å°†è¯·æ±‚å’Œå¤„ç†åˆ†å¼€ï¼Œå®ç°è§£è€¦ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§</p>
</li>
<li>
<p>ç®€åŒ–äº†å¯¹è±¡ï¼Œä½¿å¯¹è±¡ä¸éœ€è¦çŸ¥é“é“¾çš„ç»“æ„</p>
</li>
<li>
<p>æ€§èƒ½ä¼šå—åˆ°å½±å“ï¼Œç‰¹åˆ«æ˜¯åœ¨<strong>é“¾æ¯”è¾ƒé•¿çš„æ—¶å€™</strong>ï¼Œå› æ­¤éœ€æ§åˆ¶é“¾ä¸­æœ€å¤§èŠ‚ç‚¹æ•°é‡ï¼Œä¸€èˆ¬é€šè¿‡åœ¨ Handler ä¸­è®¾ç½®ä¸€ä¸ªæœ€å¤§èŠ‚ç‚¹æ•°é‡ï¼Œåœ¨ setNext()æ–¹æ³•ä¸­åˆ¤æ–­æ˜¯å¦å·²ç»è¶…è¿‡é˜€å€¼ï¼Œè¶…è¿‡åˆ™ä¸å…è®¸è¯¥é“¾å»ºç«‹ï¼Œé¿å…å‡ºç°è¶…é•¿é“¾æ— æ„è¯†åœ°ç ´åç³»ç»Ÿæ€§èƒ½</p>
</li>
<li>
<p>å‚è€ƒç¬”è®°ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.runoob.com/design-pattern/design-pattern-tutorial.html">èœé¸Ÿæ•™ç¨‹è®¾è®¡æ¨¡å¼</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1G4411c7N4?p=148&amp;vd_source=a432f7b466d0eab98b92ac7132f5ca5c">å°šç¡…è°·Javaè®¾è®¡æ¨¡å¼ï¼ˆå›¾è§£+æ¡†æ¶æºç å‰–æï¼‰ç¬”è®°èµ„æ–™</a></li>
</ul>
</li>
<li>
<p>å­¦ä¹ è§†é¢‘</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1G4411c7N4?p=148&amp;vd_source=a432f7b466d0eab98b92ac7132f5ca5c">å°šç¡…è°·Javaè®¾è®¡æ¨¡å¼ï¼ˆå›¾è§£+æ¡†æ¶æºç å‰–æ</a></li>
</ul>
</li>
</ol>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="category-chain-item">è®¾è®¡æ¨¡å¼</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">#è®¾è®¡æ¨¡å¼</a>
      
        <a href="/tags/%E8%BF%9B%E9%98%B6/">#è¿›é˜¶</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>è®¾è®¡æ¨¡å¼</div>
      <div>http://xtwoy.github.io/è®¾è®¡æ¨¡å¼/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>XtwoY</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>January 5, 2023</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/RabbitMQ/" title="RabbitMQ">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">RabbitMQ</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" title="å‡½æ•°å¼ç¼–ç¨‹-Streamæµ">
                        <span class="hidden-mobile">å‡½æ•°å¼ç¼–ç¨‹-Streamæµ</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-left: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="è®¾è®¡æ¨¡å¼"
        id="heading-301a19970448f8e4f27ddae7a7d415fe" role="tab" data-toggle="collapse" href="#collapse-301a19970448f8e4f27ddae7a7d415fe"
        aria-expanded="true"
      >
        è®¾è®¡æ¨¡å¼
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-301a19970448f8e4f27ddae7a7d415fe"
           role="tabpanel" aria-labelledby="heading-301a19970448f8e4f27ddae7a7d415fe">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="è®¾è®¡æ¨¡å¼"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">è®¾è®¡æ¨¡å¼</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  
<script src="/js/Click_on_special_effects.js"></script>
<script src="/js/Click_on_special_effects1.js"></script>



<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
