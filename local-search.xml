<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Axioså’ŒAjaxå‘é€POSTä½¿ç”¨</title>
    <link href="/2022/12/13/Axios%E5%92%8CAjax%E5%8F%91%E9%80%81POST%E4%BD%BF%E7%94%A8/"/>
    <url>/2022/12/13/Axios%E5%92%8CAjax%E5%8F%91%E9%80%81POST%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="ajax"><a class="markdownIt-Anchor" href="#ajax"></a> Ajax</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>            $.<span class="hljs-title function_">ajax</span>(&#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>                <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://localhost:8080/get1&quot;</span>,<br>                <span class="hljs-attr">data</span>: &#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>                &#125;,<br>                <span class="hljs-comment">// contentType: &quot;application/json&quot;,</span><br>                <span class="hljs-comment">// dataType:&quot;json&quot;, //è¡¨ç¤ºå¯ä»¥è·¨åŸŸè®¿é—®jsonæ•°æ®</span><br>                <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>                <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                    <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>                &#125;,<br>                <span class="hljs-attr">error</span>: &#123;&#125;<br>            &#125;)<br>        &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213215749518.png" alt="image-20221213215749518" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213215929173.png" alt="" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>           $.<span class="hljs-title function_">ajax</span>(&#123;<br>               <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://localhost:8080/get1&quot;</span>,<br>               <span class="hljs-attr">data</span>: &#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>               &#125;,<br>               <span class="hljs-attr">contentType</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>               <span class="hljs-comment">// dataType:&quot;json&quot;, //è¡¨ç¤ºå¯ä»¥è·¨åŸŸè®¿é—®jsonæ•°æ®</span><br>               <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>               <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                   <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>               &#125;,<br>               <span class="hljs-attr">error</span>: &#123;&#125;<br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213215929173.png" alt="image-20221213215929173" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>           $.<span class="hljs-title function_">ajax</span>(&#123;<br>               <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>               <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>               &#125;),<br>               <span class="hljs-comment">// contentType: &quot;application/json&quot;,</span><br>               <span class="hljs-comment">// dataType:&quot;json&quot;, //è¡¨ç¤ºå¯ä»¥è·¨åŸŸè®¿é—®jsonæ•°æ®</span><br>               <span class="hljs-attr">headers</span>: &#123;<br>               &#125;,<br>               <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>               <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                   <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>               &#125;,<br>               <span class="hljs-attr">error</span>: &#123;&#125;<br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213220541531.png" alt="image-20221213220541531" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213220553995.png" alt="image-20221213220553995" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>           $.<span class="hljs-title function_">ajax</span>(&#123;<br>               <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>               <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>               &#125;),<br>               <span class="hljs-attr">contentType</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>               <span class="hljs-comment">// dataType:&quot;json&quot;, //è¡¨ç¤ºå¯ä»¥è·¨åŸŸè®¿é—®jsonæ•°æ®</span><br>               <span class="hljs-attr">headers</span>: &#123;<br>               &#125;,<br>               <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>               <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                   <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>               &#125;,<br>               <span class="hljs-attr">error</span>: &#123;&#125;<br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213220754987.png" alt="image-20221213220754987" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213220807735.png" alt="image-20221213220807735" /></p><h2 id="axios"><a class="markdownIt-Anchor" href="#axios"></a> Axios</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>           <span class="hljs-title function_">axios</span>(&#123;<br>               <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>               <span class="hljs-comment">/* headers: &#123;</span><br><span class="hljs-comment">                   &quot;Content-Type&quot;: &quot;application/json;charset=UTF-8&quot;</span><br><span class="hljs-comment">               &#125;, */</span><br>               <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Axios_test1&quot;</span><br>               &#125;)<br>           &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>               <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221558251.png" alt="image-20221213221558251" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221607686.png" alt="image-20221213221607686" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>            <span class="hljs-title function_">axios</span>(&#123;<br>                <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>                <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>                <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>,<br>                <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Axios_test1&quot;</span><br>                &#125;),<br>                <br>            &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>                <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>            &#125;)<br>        &#125;<br></code></pre></td></tr></table></figure><p><strong>Axios:</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213222323951.png" alt="image-20221213222323951" /></p><p><strong>Ajax:</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213222545937.png" alt="image-20221213222545937" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221558251.png" alt="image-20221213221558251" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221607686.png" alt="image-20221213221607686" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>            <span class="hljs-title function_">axios</span>(&#123;<br>                <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>                <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>                <span class="hljs-attr">headers</span>: &#123;<br>                    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span><br>                &#125;,<br>                <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Axios_test1&quot;</span><br>                &#125;)<br>            &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>                <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>            &#125;)<br>        &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213222249241.png" alt="image-20221213222249241" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221406905.png" alt="image-20221213221406905" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221415247.png" alt="image-20221213221415247" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>           <span class="hljs-title function_">axios</span>(&#123;<br>               <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>               <span class="hljs-attr">headers</span>: &#123;<br>                   <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span><br>               &#125;,<br>               <span class="hljs-attr">data</span>:&#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test3&quot;</span><br>                &#125;,<br>           &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>               <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221654371.png" alt="image-20221213221654371" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221702039.png" alt="image-20221213221702039" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>          <span class="hljs-title function_">axios</span>(&#123;<br>              <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>              <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>             <span class="hljs-comment">/*  headers: &#123;</span><br><span class="hljs-comment">                  &quot;Content-Type&quot;: &quot;application/json;charset=UTF-8&quot;</span><br><span class="hljs-comment">              &#125;, */</span><br>              <span class="hljs-attr">data</span>:&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test3&quot;</span><br>               &#125;,<br>          &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>              <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>          &#125;)<br>      &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221730556.png" alt="image-20221213221730556" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213221737768.png" alt="image-20221213221737768" /></p><p><mark>contentType</mark>å¦‚ä½•è®¾ç½®</p><p>Ajax</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>            $.<span class="hljs-title function_">ajax</span>(&#123;<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>                <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>                <span class="hljs-attr">contentType</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>                <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>                &#125;),<br>                <span class="hljs-comment">// data:JSON.stringify(data),</span><br>                <span class="hljs-comment">/* headers: &#123;</span><br><span class="hljs-comment">                   &#x27;contentType&#x27;: &quot;application/json&quot;,</span><br><span class="hljs-comment">                &#125;, */</span><br>                <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>                <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                    <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>                &#125;,<br>            &#125;)<br>        &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213225427165.png" alt="image-20221213225427165" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>               <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>           $.<span class="hljs-title function_">ajax</span>(&#123;<br>               <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>               <span class="hljs-comment">//  contentType: &quot;application/json&quot;,</span><br>               <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>               &#125;),<br>               <span class="hljs-comment">// data:JSON.stringify(data),</span><br>               <span class="hljs-attr">headers</span>: &#123;<br>                  <span class="hljs-string">&#x27;contentType&#x27;</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>               &#125;,<br>               <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>               <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                   <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>               &#125;,<br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213225509717.png" alt="image-20221213225509717" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Ajax_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Ajax_test&quot;</span>);<br>               <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>           $.<span class="hljs-title function_">ajax</span>(&#123;<br>               <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;/&quot;</span>,<br>               <span class="hljs-comment">//  contentType: &quot;application/json&quot;,</span><br>               <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Ajax_test2&quot;</span><br>               &#125;),<br>               <span class="hljs-comment">// data:JSON.stringify(data),</span><br>               <span class="hljs-attr">headers</span>: &#123;<br>                   <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span><br>               &#125;,<br>               <span class="hljs-attr">async</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">//é”å®šæµè§ˆå™¨ï¼Œåªæœ‰è¯·æ±‚å¤„ç†å®Œæ¯•ä¹‹åï¼ˆå›è°ƒå‡½æ•°è°ƒç”¨å®Œæˆä¹‹åï¼‰ï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„ä»£ç </span><br>               <span class="hljs-attr">success</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>                   <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>               &#125;,<br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213225614536.png" alt="image-20221213225614536" /></p><p>Axios</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>           <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>           <span class="hljs-title function_">axios</span>(&#123;<br>               <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>               <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>               <span class="hljs-attr">contentType</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>               <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                   <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Axios_test1&quot;</span><br>               &#125;),<br>               <br>           &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>               <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>           &#125;)<br>       &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213225732777.png" alt="image-20221213225732777" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>            <span class="hljs-title function_">axios</span>(&#123;<br>                <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>                <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>                <span class="hljs-comment">// contentType: &quot;application/json&quot;,</span><br>                <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Axios_test1&quot;</span><br>                &#125;),<br>                <span class="hljs-attr">headers</span>: &#123;<br>                    <span class="hljs-attr">contentType</span>: <span class="hljs-string">&quot;application/json&quot;</span>,<br>                    <span class="hljs-comment">// &quot;Content-Type&quot;: &quot;application/json;charset=UTF-8&quot;</span><br>                &#125;,<br>                <br>            &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>                <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>            &#125;)<br>        &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213225830608.png" alt="image-20221213225830608" /></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Axios_test</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Axios_test1&quot;</span>);<br>            <span class="hljs-title function_">axios</span>(&#123;<br>                <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;post&quot;</span>,<br>                <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;http://192.168.3.24:8080/get1&quot;</span>,<br>                <span class="hljs-comment">// contentType: &quot;application/json&quot;,</span><br>                <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(&#123;<br>                    <span class="hljs-string">&#x27;content&#x27;</span>: <span class="hljs-string">&quot;Axios_test1&quot;</span><br>                &#125;),<br>                <span class="hljs-attr">headers</span>: &#123;<br>                    <span class="hljs-comment">// contentType: &quot;application/json&quot;,</span><br>                    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span><br>                &#125;,<br>                <br>            &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;<br>                <span class="hljs-comment">//å¤„ç†è¿”å›æ•°æ®</span><br>            &#125;)<br>        &#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221213225905831.png" alt="image-20221213225905831" /></p><h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“"></a> æ€»ç»“</h2><blockquote><p>æ³¨æ„</p></blockquote><p><strong>Ajax</strong>è®¾ç½®<code>Content-Type</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">contentType<span class="hljs-string">&#x27;: &quot;application/json&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">headers</span>: &#123;<br>                    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span><br>                &#125;,<br></code></pre></td></tr></table></figure><p><strong>Axios</strong>è®¾ç½®<code>Content-Type</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">headers</span>: &#123;<br>                    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span><br>                &#125;,<br></code></pre></td></tr></table></figure><table><thead><tr><th style="text-align:center">æ–¹å¼\æ•°æ®ç±»å‹</th><th style="text-align:center">JSONå¯¹è±¡</th><th style="text-align:center">JSONå­—ç¬¦ä¸²</th></tr></thead><tbody><tr><td style="text-align:center">Ajaxï¼ˆæœªè®¾ç½®Content-Typeï¼‰</td><td style="text-align:center">Fromdata</td><td style="text-align:center">Fromdata(è¿˜æœ‰é”™è¯¯)</td></tr><tr><td style="text-align:center">Ajaxï¼ˆè®¾ç½®Content-Typeï¼‰</td><td style="text-align:center">payload</td><td style="text-align:center">Json</td></tr><tr><td style="text-align:center">Axiosï¼ˆæœªè®¾ç½®Content-Typeï¼‰</td><td style="text-align:center">Json</td><td style="text-align:center">Fromdata(è¿˜æœ‰é”™è¯¯)</td></tr><tr><td style="text-align:center">Axiosï¼ˆè®¾ç½®Content-Typeï¼‰</td><td style="text-align:center">Json</td><td style="text-align:center">Json</td></tr></tbody></table><p>åœ¨springbootå¼€å‘æ—¶</p><ol><li><strong>Fromdata</strong>ä½¿ç”¨æ³¨è§£ <code>@RequestParam</code> ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>servletRequest.getAttribute(&quot;å‚æ•°å&quot;)</code>è·å–</li><li>Jsonä½¿ç”¨æ³¨è§£ <code>@RequestBody</code></li></ol>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ajax</tag>
      
      <tag>Axios</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gitè§£å†³error-The following untracked working tree files would be overwritten by checkout</title>
    <link href="/2022/11/29/git%E8%A7%A3%E5%86%B3error%20The%20following%20untracked%20working%20tree%20files%20would%20be%20overwritten%20by%20checkout/"/>
    <url>/2022/11/29/git%E8%A7%A3%E5%86%B3error%20The%20following%20untracked%20working%20tree%20files%20would%20be%20overwritten%20by%20checkout/</url>
    
    <content type="html"><![CDATA[<h3 id="The-following-untracked-working-tree-files-would-be-overwritten-by-checkout"><a href="#The-following-untracked-working-tree-files-would-be-overwritten-by-checkout" class="headerlink" title="The following untracked working tree files would be overwritten by checkout:"></a>The following untracked working tree files would be overwritten by checkout:</h3><blockquote><p>å¯èƒ½åªèƒ½è§£å†³æˆ‘ä¸€ä¸ªæˆ‘çš„é—®é¢˜</p></blockquote><p>ç½‘ä¸Šå¤§éƒ½è¯´æ˜¯ä»€ä¹ˆåˆ‡æ¢åˆ†æ”¯æ—¶å‡ºç°è¿™ä¸ªé”™è¯¯ã€‚wnmï¼Œæˆ‘å°±ä¸€ä¸ªåˆ†æ”¯Masterã€‚</p><p>æ£€æŸ¥åå‡ åˆ†é’Ÿå‘ç°</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221129090836068.png" alt="image-20221129090836068"></p><blockquote><p><strong>Gç›˜</strong>é‡Œçš„<strong>Javacode</strong>æ‰æ˜¯æˆ‘å¹³æ—¶ç”¨åˆ°çš„æ–‡ä»¶å¤¹ã€‚è¯¥ç›®å½•ä¸‹ <code>.git</code> ä¸­çš„ä¿¡æ¯æ‰å’Œgitè¿œç¨‹ä»“åº“ä¿¡æ¯ä¸€è‡´ã€‚</p></blockquote><blockquote><p><strong>Fç›˜</strong>ä¸‹<strong>Javacode</strong>ï¼Œæ˜¯æˆ‘å¥½ä¹…ä¹‹å‰gitç‰ˆæœ¬å›é€€çš„å¤‡ä»½ã€‚</p></blockquote><ol><li><p>åŸå› ï¼š</p><p>æˆ‘åœ¨<strong>Fç›˜</strong>ä¸‹<strong>Javacode</strong>æ–°å»ºäº†ä¸€ä¸ªé¡¹ç›®(ç³Šæ¶‚å•Š :sob::sob::sob:ï¼‰ï¼Œåœ¨pushå°±å‡ºç°<code>The following untracked working tree files would be overwritten by checkout:</code></p></li><li><p>è§£å†³ï¼š</p><p>æŠŠæ–°å»ºçš„é¡¹ç›®ç§»åŠ¨åˆ°<strong>Gç›˜</strong>é‡Œçš„<strong>Javacode</strong>ï¼Œé‡æ–°add commit push è¿œç¨‹ä»“åº“æäº¤æˆåŠŸ</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å°é—®é¢˜</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æˆ‘çš„1128_01</title>
    <link href="/2022/11/29/%E6%88%91%E7%9A%841128-01/"/>
    <url>/2022/11/29/%E6%88%91%E7%9A%841128-01/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿™ä¸€å¹´"><a class="markdownIt-Anchor" href="#è¿™ä¸€å¹´"></a> è¿™ä¸€å¹´</h1><p>ğŸ±</p><p>çœŸæ­£çš„å¼€å§‹è®¡ç®—æœºçš„å­¦ä¹ ï¼ï¼ï¼</p><p>â€‹å¼€å§‹å·äº† ğŸ˜œğŸ˜œğŸ˜œ</p><p>å¼€å§‹çœ‹äº†èœ¡ç¬”å°æ–°ï¼Œæˆä¸ºèœ¡ç¬”å°æ–°çš„å¿ å®ç²‰ä¸ ï¼ï¼ï¼</p><p>â€‹å¥½ä¸‹é¥­ â€‹ ğŸ˜ğŸ˜ğŸ˜</p><p>å’Œè€æœ‹å‹è”ç³»å˜å°‘äº†è®¸å¤šï¼Œå¶å°”è”ç³»çš„è¯ï¼ŒåˆèŠå¾—ä¼šå¿˜è®°æ—¶é—´ï¼Œå¤šäº†å‡ ä¸ªæ–°æœ‹å‹ ï¼ï¼ï¼</p><p>â€‹å‹è°Šä¸‡å² â˜ºï¸â˜ºï¸â˜ºï¸</p>]]></content>
    
    
    <categories>
      
      <category>è®°å½•ç±»</category>
      
    </categories>
    
    
  </entry>
  
  
  
  <entry>
    <title>Java-æšä¸¾(enum)</title>
    <link href="/2022/11/28/%E6%9E%9A%E4%B8%BE-enum/"/>
    <url>/2022/11/28/%E6%9E%9A%E4%B8%BE-enum/</url>
    
    <content type="html"><![CDATA[<h1 id="Java-æšä¸¾-enum"><a href="#Java-æšä¸¾-enum" class="headerlink" title="Java æšä¸¾(enum)"></a>Java æšä¸¾(enum)</h1><p>Java æšä¸¾æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç±»ï¼Œä¸€èˆ¬è¡¨ç¤ºä¸€ç»„å¸¸é‡ï¼Œæ¯”å¦‚ä¸€å¹´çš„ 4 ä¸ªå­£èŠ‚ï¼Œä¸€ä¸ªå¹´çš„ 12 ä¸ªæœˆä»½ï¼Œä¸€ä¸ªæ˜ŸæœŸçš„ 7 å¤©ï¼Œæ–¹å‘æœ‰ä¸œå—è¥¿åŒ—ç­‰ã€‚</p><p>Java æšä¸¾ç±»ä½¿ç”¨ enum å…³é”®å­—æ¥å®šä¹‰ï¼Œå„ä¸ªå¸¸é‡ä½¿ç”¨é€—å· <strong>,</strong> æ¥åˆ†å‰²ã€‚</p><h2 id="å®šä¹‰ä¸€ä¸ªæšä¸¾"><a href="#å®šä¹‰ä¸€ä¸ªæšä¸¾" class="headerlink" title="å®šä¹‰ä¸€ä¸ªæšä¸¾"></a>å®šä¹‰ä¸€ä¸ªæšä¸¾</h2><p>ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªé¢œè‰²çš„æšä¸¾ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span> <br>&#123; <br>    RED, GREEN, BLUE; <br>&#125; <br></code></pre></td></tr></table></figure><p>ä»¥ä¸Šæšä¸¾ç±» Color é¢œè‰²å¸¸é‡æœ‰ RED, GREEN, BLUEï¼Œåˆ†åˆ«è¡¨ç¤ºçº¢è‰²ï¼Œç»¿è‰²ï¼Œè“è‰²ã€‚</p><p>ä½¿ç”¨å®ä¾‹ï¼š</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span><br>&#123;<br>    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span><br>    &#123;<br>        RED, GREEN, BLUE;<br>    &#125;<br> <br>    <span class="hljs-comment">// æ‰§è¡Œè¾“å‡ºç»“æœ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Color</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> Color.RED;<br>        System.out.println(c1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">RED</span><br></code></pre></td></tr></table></figure><h2 id="å†…éƒ¨ç±»ä¸­ä½¿ç”¨æšä¸¾"><a href="#å†…éƒ¨ç±»ä¸­ä½¿ç”¨æšä¸¾" class="headerlink" title="å†…éƒ¨ç±»ä¸­ä½¿ç”¨æšä¸¾"></a>å†…éƒ¨ç±»ä¸­ä½¿ç”¨æšä¸¾</h2><p>æšä¸¾ç±»ä¹Ÿå¯ä»¥å£°æ˜åœ¨å†…éƒ¨ç±»ä¸­ï¼š</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span><br>&#123;<br>    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span><br>    &#123;<br>        RED, GREEN, BLUE;<br>    &#125;<br> <br>    <span class="hljs-comment">// æ‰§è¡Œè¾“å‡ºç»“æœ</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Color</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> Color.RED;<br>        System.out.println(c1);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">RED</span><br></code></pre></td></tr></table></figure><p>æ¯ä¸ªæšä¸¾éƒ½æ˜¯é€šè¿‡ Class åœ¨å†…éƒ¨å®ç°çš„ï¼Œä¸”æ‰€æœ‰çš„æšä¸¾å€¼éƒ½æ˜¯ public static final çš„ã€‚</p><p>ä»¥ä¸Šçš„æšä¸¾ç±» Color è½¬åŒ–åœ¨å†…éƒ¨ç±»å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Color</span><br>&#123;<br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Color</span> <span class="hljs-variable">RED</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>();<br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Color</span> <span class="hljs-variable">BLUE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>();<br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Color</span> <span class="hljs-variable">GREEN</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>();<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="è¿­ä»£æšä¸¾å…ƒç´ "><a href="#è¿­ä»£æšä¸¾å…ƒç´ " class="headerlink" title="è¿­ä»£æšä¸¾å…ƒç´ "></a>è¿­ä»£æšä¸¾å…ƒç´ </h2><p>å¯ä»¥ä½¿ç”¨ for è¯­å¥æ¥è¿­ä»£æšä¸¾å…ƒç´ ï¼š</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span><br>&#123;<br>    RED, GREEN, BLUE;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-keyword">for</span> (Color myVar : Color.values()) &#123;<br>      System.out.println(myVar);<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">RED</span><br><span class="hljs-attribute">GREEN</span><br><span class="hljs-attribute">BLUE</span><br></code></pre></td></tr></table></figure><h2 id="åœ¨-switch-ä¸­ä½¿ç”¨æšä¸¾ç±»"><a href="#åœ¨-switch-ä¸­ä½¿ç”¨æšä¸¾ç±»" class="headerlink" title="åœ¨ switch ä¸­ä½¿ç”¨æšä¸¾ç±»"></a>åœ¨ switch ä¸­ä½¿ç”¨æšä¸¾ç±»</h2><p>æšä¸¾ç±»å¸¸åº”ç”¨äº switch è¯­å¥ä¸­ï¼š</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span><br>&#123;<br>    RED, GREEN, BLUE;<br>&#125;<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-type">Color</span> <span class="hljs-variable">myVar</span> <span class="hljs-operator">=</span> Color.BLUE;<br><br>    <span class="hljs-keyword">switch</span>(myVar) &#123;<br>      <span class="hljs-keyword">case</span> RED:<br>        System.out.println(<span class="hljs-string">&quot;çº¢è‰²&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> GREEN:<br>         System.out.println(<span class="hljs-string">&quot;ç»¿è‰²&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>      <span class="hljs-keyword">case</span> BLUE:<br>        System.out.println(<span class="hljs-string">&quot;è“è‰²&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">è“è‰²<br></code></pre></td></tr></table></figure><h2 id="values-ordinal-valueOf-å’ŒcompareTo-æ–¹æ³•"><a href="#values-ordinal-valueOf-å’ŒcompareTo-æ–¹æ³•" class="headerlink" title="values(), ordinal() , valueOf()å’ŒcompareTo() æ–¹æ³•"></a>values(), ordinal() , valueOf()å’ŒcompareTo() æ–¹æ³•</h2><p>enum å®šä¹‰çš„æšä¸¾ç±»é»˜è®¤ç»§æ‰¿äº† java.lang.Enum ç±»ï¼Œå¹¶å®ç°äº† java.lang.Serializable å’Œ java.lang.Comparable ä¸¤ä¸ªæ¥å£ã€‚</p><p>Java ä¸­çš„æ¯ä¸€ä¸ªæšä¸¾éƒ½ç»§æ‰¿è‡ª java.lang.Enum ç±»ã€‚å½“å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»å‹æ—¶ï¼Œæ¯ä¸€ä¸ªæšä¸¾ç±»å‹æˆå‘˜éƒ½å¯ä»¥çœ‹ä½œæ˜¯ Enum ç±»çš„å®ä¾‹ï¼Œè¿™äº›æšä¸¾æˆå‘˜é»˜è®¤éƒ½è¢« finalã€public, static ä¿®é¥°ï¼Œå½“ä½¿ç”¨æšä¸¾ç±»å‹æˆå‘˜æ—¶ï¼Œç›´æ¥ä½¿ç”¨æšä¸¾åç§°è°ƒç”¨æˆå‘˜å³å¯ã€‚</p><p>æ‰€æœ‰æšä¸¾å®ä¾‹éƒ½å¯ä»¥è°ƒç”¨ Enum ç±»çš„æ–¹æ³•ï¼Œå¸¸ç”¨æ–¹æ³•å¦‚è¡¨ 1 æ‰€ç¤ºã€‚</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>values()</td><td>ä»¥æ•°ç»„å½¢å¼è¿”å›æšä¸¾ç±»å‹çš„æ‰€æœ‰æˆå‘˜</td></tr><tr><td>valueOf()</td><td>å°†æ™®é€šå­—ç¬¦ä¸²è½¬æ¢ä¸ºæšä¸¾å®ä¾‹</td></tr><tr><td>compareTo()</td><td>æ¯”è¾ƒä¸¤ä¸ªæšä¸¾æˆå‘˜åœ¨å®šä¹‰æ—¶çš„é¡ºåº</td></tr><tr><td>ordinal()</td><td>è·å–æšä¸¾æˆå‘˜çš„ç´¢å¼•ä½ç½®</td></tr></tbody></table><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestEnum</span> &#123;<br>    <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span> &#123;<br>        <span class="hljs-comment">//å®šä¹‰ä¸€ä¸ªæšä¸¾</span><br>        RED, GREEN, BLUE;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// è°ƒç”¨ values()</span><br>        Color[] arr = Color.values();<br><br>        <span class="hljs-comment">// è¿­ä»£æšä¸¾</span><br>        <span class="hljs-keyword">for</span> (Color col : arr) &#123;<br>            <span class="hljs-comment">// æŸ¥çœ‹ç´¢å¼•</span><br>            System.out.println(col + <span class="hljs-string">&quot; at index &quot;</span> + col.ordinal());<br>        &#125;<br><br>        <span class="hljs-comment">// ä½¿ç”¨ valueOf() è¿”å›æšä¸¾å¸¸é‡ï¼Œä¸å­˜åœ¨çš„ä¼šæŠ¥é”™ IllegalArgumentException</span><br>        System.out.println(Color.valueOf(<span class="hljs-string">&quot;RED&quot;</span>));<br>        System.out.println(Color.valueOf(<span class="hljs-string">&quot;BLUE&quot;</span>));<br>        compare(Color.valueOf(<span class="hljs-string">&quot;GREEN&quot;</span>));<br>    &#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compare</span><span class="hljs-params">(Color s)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; Color.values().length; i++) &#123;<br>            <span class="hljs-comment">//è°ƒç”¨compareTo()æ¯”è¾ƒ</span><br>            System.out.println(s + <span class="hljs-string">&quot;ä¸&quot;</span> + Color.values()[i] + <span class="hljs-string">&quot;çš„æ¯”è¾ƒç»“æœæ˜¯ï¼š&quot;</span> + s.compareTo(Color.values()[i]));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœä¸ºï¼š</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">RED</span> at index <span class="hljs-number">0</span><br><span class="hljs-attribute">GREEN</span> at index <span class="hljs-number">1</span><br><span class="hljs-attribute">BLUE</span> at index <span class="hljs-number">2</span><br><span class="hljs-attribute">RED</span><br><span class="hljs-attribute">BLUE</span><br><span class="hljs-attribute">GREEN</span>ä¸REDçš„æ¯”è¾ƒç»“æœæ˜¯ï¼š<span class="hljs-number">1</span><br><span class="hljs-attribute">GREEN</span>ä¸GREENçš„æ¯”è¾ƒç»“æœæ˜¯ï¼š<span class="hljs-number">0</span><br><span class="hljs-attribute">GREEN</span>ä¸BLUEçš„æ¯”è¾ƒç»“æœæ˜¯ï¼š-<span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><h2 id="æšä¸¾ç±»æˆå‘˜"><a href="#æšä¸¾ç±»æˆå‘˜" class="headerlink" title="æšä¸¾ç±»æˆå‘˜"></a>æšä¸¾ç±»æˆå‘˜</h2><p>æšä¸¾è·Ÿæ™®é€šç±»ä¸€æ ·å¯ä»¥ç”¨è‡ªå·±çš„å˜é‡ã€æ–¹æ³•å’Œæ„é€ å‡½æ•°ï¼Œæ„é€ å‡½æ•°åªèƒ½ä½¿ç”¨ private è®¿é—®ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥å¤–éƒ¨æ— æ³•è°ƒç”¨ã€‚</p><p>æšä¸¾æ—¢å¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥åŒ…å«æŠ½è±¡æ–¹æ³•ã€‚ å¦‚æœæšä¸¾ç±»å…·æœ‰æŠ½è±¡æ–¹æ³•ï¼Œåˆ™æšä¸¾ç±»çš„æ¯ä¸ªå®ä¾‹éƒ½å¿…é¡»å®ç°å®ƒã€‚</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Color</span><br>&#123;<br>    RED, GREEN, BLUE;<br> <br>    <span class="hljs-comment">// æ„é€ å‡½æ•°</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Color</span><span class="hljs-params">()</span><br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;Constructor called for : &quot;</span> + <span class="hljs-built_in">this</span>.toString());<br>    &#125;<br> <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">colorInfo</span><span class="hljs-params">()</span><br>    &#123;<br>        System.out.println(<span class="hljs-string">&quot;Universal Color&quot;</span>);<br>    &#125;<br>&#125;<br> <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span><br>&#123;    <br>    <span class="hljs-comment">// è¾“å‡º</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span><br>    &#123;<br>        <span class="hljs-type">Color</span> <span class="hljs-variable">c1</span> <span class="hljs-operator">=</span> Color.RED;<br>        System.out.println(c1);<br>        c1.colorInfo();<br>    &#125;<br>&#125;<br><br><br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-function"><span class="hljs-keyword">Constructor</span> <span class="hljs-title">called</span> <span class="hljs-title">for</span> :</span> RED<br><span class="hljs-function"><span class="hljs-keyword">Constructor</span> <span class="hljs-title">called</span> <span class="hljs-title">for</span> :</span> GREEN<br><span class="hljs-function"><span class="hljs-keyword">Constructor</span> <span class="hljs-title">called</span> <span class="hljs-title">for</span> :</span> BLUE<br>RED<br>Universal Color<br></code></pre></td></tr></table></figure><h2 id="ä¸ºæšä¸¾æ·»åŠ æ–¹æ³•"><a href="#ä¸ºæšä¸¾æ·»åŠ æ–¹æ³•" class="headerlink" title="ä¸ºæšä¸¾æ·»åŠ æ–¹æ³•"></a>ä¸ºæšä¸¾æ·»åŠ æ–¹æ³•</h2><p>Java ä¸ºæšä¸¾ç±»å‹æä¾›äº†ä¸€äº›å†…ç½®çš„æ–¹æ³•ï¼ŒåŒæ—¶æšä¸¾å¸¸é‡ä¹Ÿå¯ä»¥æœ‰è‡ªå·±çš„æ–¹æ³•ã€‚æ­¤æ—¶è¦æ³¨æ„å¿…é¡»åœ¨æšä¸¾å®ä¾‹çš„æœ€åä¸€ä¸ªæˆå‘˜åæ·»åŠ åˆ†å·ï¼Œè€Œä¸”å¿…é¡»å…ˆå®šä¹‰æšä¸¾å®ä¾‹ã€‚</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">WeekDay</span> &#123;<br>    <span class="hljs-comment">//ä»¥ä¸Šæ˜¯æšä¸¾çš„æˆå‘˜ï¼Œå¿…é¡»å…ˆå®šä¹‰ï¼Œè€Œä¸”ä½¿ç”¨åˆ†å·ç»“æŸ</span><br>    Mon(<span class="hljs-string">&quot;Monday&quot;</span>), Tue(<span class="hljs-string">&quot;Tuesday&quot;</span>), Wed(<span class="hljs-string">&quot;Wednesday&quot;</span>), Thu(<span class="hljs-string">&quot;Thursday&quot;</span>), Fri(<span class="hljs-string">&quot;Friday&quot;</span>), Sat(<span class="hljs-string">&quot;Saturday&quot;</span>), Sun(<span class="hljs-string">&quot;Sunday&quot;</span>);<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String day;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">WeekDay</span><span class="hljs-params">(String day)</span> &#123;<br>        <span class="hljs-built_in">this</span>.day = day;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printDay</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> &#123;<br>        <span class="hljs-keyword">switch</span> (i) &#123;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>                System.out.println(WeekDay.Mon);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:<br>                System.out.println(WeekDay.Tue);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:<br>                System.out.println(WeekDay.Wed);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>:<br>                System.out.println(WeekDay.Thu);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:<br>                System.out.println(WeekDay.Fri);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">6</span>:<br>                System.out.println(WeekDay.Sat);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:<br>                System.out.println(WeekDay.Sun);<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">default</span>:<br>                System.out.println(<span class="hljs-string">&quot;wrong number!&quot;</span>);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDay</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> day;<br>    &#125;<br>&#125;<br><span class="hljs-meta">@Test</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test1</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">for</span> (WeekDay day : WeekDay.values()) &#123;<br>        System.out.println(day + <span class="hljs-string">&quot;====&gt;&quot;</span> + day.getDay());<br>    &#125;<br>    WeekDay.printDay(<span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">Mon</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Monday<br><span class="hljs-attribute">Tue</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Tuesday<br><span class="hljs-attribute">Wed</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Wednesday<br><span class="hljs-attribute">Thu</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Thursday<br><span class="hljs-attribute">Fri</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Friday<br><span class="hljs-attribute">Sat</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Saturday<br><span class="hljs-attribute">Sun</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span><span class="hljs-operator">=</span>&gt;Sunday<br>Fri<br></code></pre></td></tr></table></figure><blockquote><p>Java ä¸­çš„ enum è¿˜å¯ä»¥è·Ÿ Class ç±»ä¸€æ ·è¦†ç›–åŸºç±»çš„æ–¹æ³•ã€‚</p></blockquote><h2 id="EnumMap-ä¸-EnumSet"><a href="#EnumMap-ä¸-EnumSet" class="headerlink" title="EnumMap ä¸ EnumSet"></a>EnumMap ä¸ EnumSet</h2><p>ä¸ºäº†æ›´å¥½åœ°æ”¯æŒæšä¸¾ç±»å‹ï¼Œjava.util ä¸­æ·»åŠ äº†ä¸¤ä¸ªæ–°ç±»ï¼šEnumMap å’Œ EnumSetã€‚ä½¿ç”¨å®ƒä»¬å¯ä»¥æ›´é«˜æ•ˆåœ°æ“ä½œæšä¸¾ç±»å‹ã€‚</p><h3 id="EnumMap-ç±»"><a href="#EnumMap-ç±»" class="headerlink" title="EnumMap ç±»"></a>EnumMap ç±»</h3><p>EnumMap æ˜¯ä¸“é—¨ä¸ºæšä¸¾ç±»å‹é‡èº«å®šåšçš„ Map å®ç°ã€‚è™½ç„¶ä½¿ç”¨å…¶ä»–çš„ Mapï¼ˆå¦‚ HashMapï¼‰å®ç°ä¹Ÿèƒ½å®Œæˆæšä¸¾ç±»å‹å®ä¾‹åˆ°å€¼çš„æ˜ å°„ï¼Œä½†æ˜¯ä½¿ç”¨ EnumMap ä¼šæ›´åŠ é«˜æ•ˆã€‚</p><p>HashMap åªèƒ½æ¥æ”¶åŒä¸€æšä¸¾ç±»å‹çš„å®ä¾‹ä½œä¸ºé”®å€¼ï¼Œå¹¶ä¸”ç”±äºæšä¸¾ç±»å‹å®ä¾‹çš„æ•°é‡ç›¸å¯¹å›ºå®šå¹¶ä¸”æœ‰é™ï¼Œæ‰€ä»¥ EnumMap ä½¿ç”¨æ•°ç»„æ¥å­˜æ”¾ä¸æšä¸¾ç±»å‹å¯¹åº”çš„å€¼ï¼Œä½¿å¾— EnumMap çš„æ•ˆç‡éå¸¸é«˜ã€‚</p><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">DataBaseType</span> &#123;<br>    <span class="hljs-comment">//å®šä¹‰æ•°æ®åº“ç±»å‹æšä¸¾</span><br>    DB2,MYSQL,ORACLE,SQLSERVER<br>&#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>         EnumMap&lt;DataBaseType,String&gt; urls=<span class="hljs-keyword">new</span> <span class="hljs-title class_">EnumMap</span>&lt;DataBaseType,String&gt;(DataBaseType.class);<br>        urls.put(DataBaseType.DB2,<span class="hljs-string">&quot;jdbc:db2://localhost:5000/sample&quot;</span>);<br>        urls.put(DataBaseType.MYSQL,<span class="hljs-string">&quot;jdbc:mysql://localhost/mydb&quot;</span>);<br>        urls.put(DataBaseType.ORACLE,<span class="hljs-string">&quot;jdbc:oracle:thin:@localhost:1521:sample&quot;</span>);<br>        urls.put(DataBaseType.SQLSERVER,<span class="hljs-string">&quot;jdbc:microsoft:sqlserver://sql:1433;Database=mydb&quot;</span>);<br>        System.out.println(urls.get(DataBaseType.DB2));<br>        System.out.println(urls.get(DataBaseType.SQLSERVER));<br>    &#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">jdbc:db2:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">5000</span>/sample<br>jdbc:microsoft:sqlserver:<span class="hljs-regexp">//</span>sql:<span class="hljs-number">1433</span>;Database=mydb<br></code></pre></td></tr></table></figure><h3 id="EnumSet-ç±»"><a href="#EnumSet-ç±»" class="headerlink" title="EnumSet ç±»"></a>EnumSet ç±»</h3><p>EnumSet æ˜¯æšä¸¾ç±»å‹çš„é«˜æ€§èƒ½ Set å®ç°ï¼Œå®ƒè¦æ±‚æ”¾å…¥å®ƒçš„æšä¸¾å¸¸é‡å¿…é¡»å±äºåŒä¸€æšä¸¾ç±»å‹ã€‚EnumSet æä¾›äº†è®¸å¤šå·¥å‚æ–¹æ³•ä»¥ä¾¿äºåˆå§‹åŒ–ã€‚</p><p>EnumSet ç±»çš„å¸¸ç”¨æ–¹æ³•</p><table><thead><tr><th>æ–¹æ³•åç§°</th><th>æè¿°</th></tr></thead><tbody><tr><td>allOf(Class element type)</td><td>åˆ›å»ºä¸€ä¸ªåŒ…å«æŒ‡å®šæšä¸¾ç±»å‹ä¸­æ‰€æœ‰æšä¸¾æˆå‘˜çš„ EnumSet å¯¹è±¡</td></tr><tr><td>complementOf(EnumSet s)</td><td>åˆ›å»ºä¸€ä¸ªä¸æŒ‡å®š EnumSet å¯¹è±¡ s ç›¸åŒçš„æšä¸¾ç±»å‹ EnumSet å¯¹è±¡ï¼Œå¹¶åŒ…å«æ‰€æœ‰ s ä¸­æœªåŒ…å«çš„æšä¸¾æˆå‘˜</td></tr><tr><td>copyOf(EnumSet s)</td><td>åˆ›å»ºä¸€ä¸ªä¸æŒ‡å®š EnumSet å¯¹è±¡ s ç›¸åŒçš„æšä¸¾ç±»å‹ EnumSet å¯¹è±¡ï¼Œå¹¶ä¸ s åŒ…å«ç›¸åŒçš„æšä¸¾æˆå‘˜</td></tr><tr><td>noneOf(&lt;Class elementType)</td><td>åˆ›å»ºæŒ‡å®šæšä¸¾ç±»å‹çš„ç©º EnumSet å¯¹è±¡</td></tr><tr><td>of(E first,eâ€¦rest)</td><td>åˆ›å»ºåŒ…å«æŒ‡å®šæšä¸¾æˆå‘˜çš„ EnumSet å¯¹è±¡</td></tr><tr><td>range(E from ,E to)</td><td>åˆ›å»ºä¸€ä¸ª EnumSet å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«äº† from åˆ° to ä¹‹é—´çš„æ‰€æœ‰æšä¸¾æˆå‘˜</td></tr></tbody></table><p>å®ä¾‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test4</span><span class="hljs-params">()</span> &#123;<br>       EnumMap&lt;DataBaseType,String&gt; urls=<span class="hljs-keyword">new</span> <span class="hljs-title class_">EnumMap</span>&lt;DataBaseType,String&gt;(DataBaseType.class);<br>       urls.put(DataBaseType.DB2,<span class="hljs-string">&quot;jdbc:db2://localhost:5000/sample&quot;</span>);<br>       urls.put(DataBaseType.MYSQL,<span class="hljs-string">&quot;jdbc:mysql://localhost/mysql&quot;</span>);<br>       urls.put(DataBaseType.ORACLE,<span class="hljs-string">&quot;jdbc:oracle:thin:@localhost:1521:sample&quot;</span>);<br>       urls.put(DataBaseType.SQLSERVER,<span class="hljs-string">&quot;jdbc:microsoft:sqlserver://sql:1433;Database=mydb&quot;</span>);<br><br>       <span class="hljs-keyword">for</span> (DataBaseType baseType : EnumSet.range(DataBaseType.MYSQL, DataBaseType.ORACLE)) &#123;<br>           System.out.println(urls.get(baseType));<br>       &#125;<br>   &#125;<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸Šä»£ç è¾“å‡ºç»“æœä¸ºï¼š</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">jdbc:</span>mysql:<span class="hljs-comment">//localhost/mysql</span><br><span class="hljs-symbol">jdbc:</span>oracle:thin:@localhost:<span class="hljs-number">1521</span>:sample<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>basis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä»é›¶å¼€å§‹ï¼Œé€šè¿‡dockerå®ç°MySQLä¸»ä»å¤åˆ¶</title>
    <link href="/2022/11/27/%E9%80%9A%E8%BF%87docker%E5%AE%9E%E7%8E%B0MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/"/>
    <url>/2022/11/27/%E9%80%9A%E8%BF%87docker%E5%AE%9E%E7%8E%B0MySQL%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/</url>
    
    <content type="html"><![CDATA[<h1 id="ä»é›¶å¼€å§‹ï¼Œé€šè¿‡dockerå®ç°mysql-ä¸»ä»å¤åˆ¶"><a href="#ä»é›¶å¼€å§‹ï¼Œé€šè¿‡dockerå®ç°mysql-ä¸»ä»å¤åˆ¶" class="headerlink" title="ä»é›¶å¼€å§‹ï¼Œé€šè¿‡dockerå®ç°mysql ä¸»ä»å¤åˆ¶"></a>ä»é›¶å¼€å§‹ï¼Œé€šè¿‡dockerå®ç°mysql ä¸»ä»å¤åˆ¶</h1><h2 id="1-å®‰è£…docker"><a href="#1-å®‰è£…docker" class="headerlink" title="1.å®‰è£…docker"></a>1.å®‰è£…docker</h2><p> å¾ˆç®€å•ï¼Œå‘½ä»¤ï¼š</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">yum <span class="hljs-keyword">install</span> -y docker<br></code></pre></td></tr></table></figure><p>å¯åŠ¨docker:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html">systemctl start docker //centos7åŠä»¥åç‰ˆæœ¬<br><br># service docker start //centos6åŠä¹‹å‰çš„ç‰ˆæœ¬<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹é•œåƒ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">docker images<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127204452372.png" alt="image-20221127204452372"></p><p>åˆ›å»ºdocker å®¹å™¨ï¼ˆå¯ä»¥æ ¹æ®ä¸€ä¸ªé•œåƒåˆ›å»ºå¤šä¸ªå®¹å™¨ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">docker run -tid é•œåƒID/usr/sbin/init  //centos7ç‰ˆæœ¬ã€‚ä½¿ç”¨/usr/sbin/initè§£å†³systemctlæŠ¥é”™ä¸èƒ½ä½¿ç”¨çš„é—®é¢˜<br></code></pre></td></tr></table></figure><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker run -tid é•œåƒID<span class="hljs-regexp">/bin/</span>bash     <span class="hljs-regexp">//</span>écentos7<br></code></pre></td></tr></table></figure><p>æŸ¥çœ‹å®¹å™¨åˆ—è¡¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">docker ps -a<br></code></pre></td></tr></table></figure><p>é€€å‡ºå®¹å™¨</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-keyword">exit</span><br></code></pre></td></tr></table></figure><p>è¿›å…¥å®¹å™¨</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html">docker exec -it å®¹å™¨åç§° /bin/bash<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127204853468.png" alt="image-20221127204853468"></p><p>è¿›å…¥å®¹å™¨åï¼Œæ³¨æ„å˜åŒ–ï¼Œä¹‹å‰æ˜¯root@localhstï¼Œç°åœ¨å˜æˆroot@å®¹å™¨idï¼Œä¹Ÿå°±æ˜¯å®¹å™¨IDï¼Œç°åœ¨è¿›å…¥å®¹å™¨åï¼Œä½ å¯ä»¥ç†è§£æˆï¼Œä¸€ä¸ªå…¨æ–°çš„linuxæ“ä½œç³»ç»Ÿï¼Œå°±åƒæˆ‘ä»¬wondowä¸‹å®‰è£…VMware Workstationåï¼ŒæˆåŠŸé€šè¿‡é•œåƒå®‰è£…ä¸€å°linuxçš„é“ç†æ˜¯æ ·çš„ï¼ä½ åœ¨å®¹å™¨çš„å¹²ä»€ä¹ˆï¼Œè£…ä»€ä¹ˆä¸ä¼šå½±å“åˆ°å®¿ä¸»ï¼Œä¸¤ä¸ªæ“ä½œç³»ç»Ÿæ˜¯éš”ç¦»çš„ï¼Œç‹¬ç«‹çš„ã€‚</p><h2 id="2-ä½¿ç”¨dockerå®‰è£…MySQL"><a href="#2-ä½¿ç”¨dockerå®‰è£…MySQL" class="headerlink" title="2.ä½¿ç”¨dockerå®‰è£…MySQL"></a>2.ä½¿ç”¨dockerå®‰è£…MySQL</h2><ol><li>åœ¨docker hub ä¸ŠæŸ¥çœ‹è¦ä¸‹è½½çš„mysqlé•œåƒåç§°:<br>æ‰“å¼€<a href="https://registry.hub.docker.com/">dockerHubå®˜ç½‘åœ°å€</a> åœ¨ä¸Šæ–¹æœç´¢æ é‡Œè¾“å…¥mysql</li></ol><p>ä¸æŒ‡å®šç‰ˆæœ¬å·ï¼Œé»˜è®¤ä¸‹è½½æœ€æ–°ç‰ˆæœ¬:</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">sudo docker pull mysql</span><br></code></pre></td></tr></table></figure><p>æŒ‡å®šç‰ˆæœ¬å·:</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">sudo</span> docker pull mysql:<span class="hljs-number">5</span>.<span class="hljs-number">7</span>ã€‚<span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><p>å¦‚æœä¸‹è½½å¤ªæ…¢çš„è¯ï¼Œæˆ‘è¿™é‡Œæä¾›<a href="https://pan.baidu.com/s/10hiDEDnxNovqzhXdrRnPEg?pwd=283l">MySQLtaråŒ…</a><br>åœ¨å°†mysql.taræ–‡ä»¶ä¸Šä¼ åˆ°è™šæ‹Ÿæœºï¼Œé€šè¿‡loadå‘½ä»¤åŠ è½½ä¸ºé•œåƒ</p><p><code>docker load -i nginx.tar</code></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127205803009.png" alt="image-20221127205803009"></p><ol start="2"><li><p>é•œåƒåŠ è½½å®Œæˆä¹‹åï¼Œç”¨è¯¥é•œåƒåˆ›å»ºmysqlå®ä¾‹,ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥åˆ›å»º</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">sudo docker run -d -p <span class="hljs-number">3306</span>:<span class="hljs-number">3306</span> -v <span class="hljs-regexp">/usr/</span>local<span class="hljs-regexp">/mysql/</span>conf:<span class="hljs-regexp">/etc/my</span>sql<span class="hljs-regexp">/conf.d -v /u</span>sr<span class="hljs-regexp">/local/my</span>sql<span class="hljs-regexp">/data:/</span>var<span class="hljs-regexp">/lib/my</span>sql -e MYSQL_ROOT_PASSWORD=root --name  mysql mysql:<span class="hljs-number">5.7</span>.<span class="hljs-number">25</span><br></code></pre></td></tr></table></figure><blockquote><p>é…ç½®ç«¯å£æ˜ å°„ï¼š</p></blockquote><p>-p 3306:3306 â€“name mysql<br>å°†å®¹å™¨çš„3306ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„3306ç«¯å£</p><blockquote><p>é…ç½®mysqlæ•°æ®å·æŒ‚è½½</p></blockquote><ol><li>-v &#x2F;mydata&#x2F;mysql&#x2F;log:&#x2F;var&#x2F;log&#x2F;mysql(æ—¥å¿—æ–‡ä»¶æŒ‚è½½)<br>å°†å®¹å™¨ä¸­çš„æ—¥å¿—æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºå¯¹åº”çš„&#x2F;var&#x2F;log&#x2F;mysqlæ–‡ä»¶å¤¹ä¸­</li><li>-v &#x2F;mydata&#x2F;mysql&#x2F;data:&#x2F;var&#x2F;lib&#x2F;mysql(æ•°æ®æ–‡ä»¶æŒ‚è½½)<br>å°†å®¹å™¨ä¸­çš„æ•°æ®æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºå¯¹åº”çš„&#x2F;var&#x2F;lib&#x2F;mysqlæ–‡ä»¶å¤¹ä¸­</li><li>-v &#x2F;mydata&#x2F;mysql&#x2F;conf:&#x2F;etc&#x2F;mysql(é…ç½®æ–‡ä»¶æŒ‚è½½)<br>å°†å®¹å™¨çš„é…ç½®æ–‡ä»¶å¤¹æŒ‚è½½åˆ°ä¸»æœºå¯¹åº”çš„&#x2F;etc&#x2F;mysqlæ–‡ä»¶å¤¹ä¸­<br>æ³¨(è¿™é‡Œæ‰€æçš„ä¸»æœºæŒ‡çš„æ˜¯å½“å‰çš„linuxä¸»æœº)</li></ol><blockquote><p>é…ç½®ç”¨æˆ·</p></blockquote><p>â€‹-e MYSQL_ROOT_PASSWORD&#x3D;root<br>â€‹è®¾ç½®åˆå§‹åŒ–rootç”¨æˆ·çš„å¯†ç </p><blockquote><p>æŒ‡å®šé•œåƒèµ„æº </p></blockquote><ol><li>-d mysql:5.7.25</li><li>-dï¼šä»¥åå°æ–¹å¼è¿è¡Œå®ä¾‹</li><li>mysql:5.7.25ï¼šæŒ‡å®šç”¨è¿™ä¸ªé•œåƒæ¥åˆ›å»ºè¿è¡Œå®ä¾‹</li></ol></li></ol><p><code>docker ps -a</code></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127210618489.png" alt="image-20221127210618489"></p><h2 id="3-ä¸»æœåŠ¡å™¨æ­å»º"><a href="#3-ä¸»æœåŠ¡å™¨æ­å»º" class="headerlink" title="3.ä¸»æœåŠ¡å™¨æ­å»º"></a>3.ä¸»æœåŠ¡å™¨æ­å»º</h2><h3 id="3-1-æ–°å»ºmysql-masterå®¹å™¨å®ä¾‹3307"><a href="#3-1-æ–°å»ºmysql-masterå®¹å™¨å®ä¾‹3307" class="headerlink" title="3.1 æ–°å»ºmysql-masterå®¹å™¨å®ä¾‹3307"></a>3.1 æ–°å»ºmysql-masterå®¹å™¨å®ä¾‹3307</h3><pre><code class="hljs"># åˆ›å»ºmasterã€slaveé…ç½®æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹mkdir -p /usr/local/repository/mysql/mysql-master/confmkdir -p /usr/local/repository/mysql/mysql-slave/conf# åˆ›å»ºä¸»å®¹å™¨å®ä¾‹docker run -p 3307:3306 --name mysql-master -v /usr/local/repository/mysql/mysql-master/log:/var/log/mysql -v /usr/local/repository/mysql/mysql-master/data:/var/lib/mysql -v /usr/local/repository/mysql/mysql-master/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:5.7.25</code></pre><h3 id="3-2-ä¸»æœåŠ¡å™¨mysql-masteræ·»åŠ å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶my-cnf"><a href="#3-2-ä¸»æœåŠ¡å™¨mysql-masteræ·»åŠ å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶my-cnf" class="headerlink" title="3.2 ä¸»æœåŠ¡å™¨mysql-masteræ·»åŠ å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶my.cnf"></a>3.2 ä¸»æœåŠ¡å™¨mysql-masteræ·»åŠ å¹¶ä¿®æ”¹é…ç½®æ–‡ä»¶my.cnf</h3><pre><code class="hljs"># ç¼–è¾‘é…ç½®æ–‡ä»¶å†…å®¹vim /usr/local/repository/mysql/mysql-master/conf/my.cnf</code></pre><p>é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="hljs">[client]default_character_set=utf8[mysqld]collation_server = utf8_general_cicharacter_set_server = utf8## è®¾ç½®server_idï¼ŒåŒä¸€å±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€server_id=101 ## æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°binlog-ignore-db=mysql  ## å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½log-bin=mall-mysql-bin  ## è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰binlog_cache_size=1M  ## è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰binlog_format=mixed  ## äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†ã€‚expire_logs_days=7  ## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´slave_skip_errors=1062</code></pre><h3 id="3-3-æ·»åŠ å®Œä¹‹åé‡å¯mysql-masterå®¹å™¨"><a href="#3-3-æ·»åŠ å®Œä¹‹åé‡å¯mysql-masterå®¹å™¨" class="headerlink" title="3.3 æ·»åŠ å®Œä¹‹åé‡å¯mysql-masterå®¹å™¨"></a>3.3 æ·»åŠ å®Œä¹‹åé‡å¯mysql-masterå®¹å™¨</h3><pre><code class="hljs">docker restart mysql-master</code></pre><h3 id="3-4-è¿›å…¥mysql-masterå®¹å™¨"><a href="#3-4-è¿›å…¥mysql-masterå®¹å™¨" class="headerlink" title="3.4 è¿›å…¥mysql-masterå®¹å™¨"></a>3.4 è¿›å…¥mysql-masterå®¹å™¨</h3><pre><code class="hljs">docker exec -it mysql-master /bin/bashmysql -uroot -proot</code></pre><h3 id="3-5-masterå®¹å™¨å®ä¾‹å†…åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·"><a href="#3-5-masterå®¹å™¨å®ä¾‹å†…åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·" class="headerlink" title="3.5 masterå®¹å™¨å®ä¾‹å†…åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·"></a>3.5 masterå®¹å™¨å®ä¾‹å†…åˆ›å»ºæ•°æ®åŒæ­¥ç”¨æˆ·</h3><pre><code class="hljs">CREATE USER &#39;slave&#39;@&#39;%&#39; IDENTIFIED BY &#39;123456&#39;;GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO &#39;slave&#39;@&#39;%&#39;;</code></pre><h2 id="4-ä»æœåŠ¡å™¨æ­å»º"><a href="#4-ä»æœåŠ¡å™¨æ­å»º" class="headerlink" title="4.ä»æœåŠ¡å™¨æ­å»º"></a>4.ä»æœåŠ¡å™¨æ­å»º</h2><h3 id="4-1-åˆ›å»ºmysqlä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹"><a href="#4-1-åˆ›å»ºmysqlä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹" class="headerlink" title="4.1 åˆ›å»ºmysqlä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹"></a>4.1 åˆ›å»ºmysqlä»æœåŠ¡å™¨å®¹å™¨å®ä¾‹</h3><pre><code class="hljs">docker run -p 3308:3306 --name mysql-slave -v /usr/local/repository/mysql/mysql-slave/log:/var/log/mysql -v /usr/local/repository/mysql/mysql-slave/data:/var/lib/mysql -v /usr/local/repository/mysql/mysql-slave/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=root -d mysql:5.7.25</code></pre><h3 id="4-2-ä¿®æ”¹ä»æœåŠ¡å™¨é…ç½®æ–‡ä»¶my-cnf"><a href="#4-2-ä¿®æ”¹ä»æœåŠ¡å™¨é…ç½®æ–‡ä»¶my-cnf" class="headerlink" title="4.2 ä¿®æ”¹ä»æœåŠ¡å™¨é…ç½®æ–‡ä»¶my.cnf"></a>4.2 ä¿®æ”¹ä»æœåŠ¡å™¨é…ç½®æ–‡ä»¶my.cnf</h3><pre><code class="hljs">vim /usr/local/repository/mysql/mysql-slave/conf/my.cnf</code></pre><p>é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š </p><pre><code class="hljs">[client]default_character_set=utf8[mysqld]collation_server = utf8_general_cicharacter_set_server = utf8## è®¾ç½®server_idï¼ŒåŒä¸€å±€åŸŸç½‘ä¸­éœ€è¦å”¯ä¸€server_id=102## æŒ‡å®šä¸éœ€è¦åŒæ­¥çš„æ•°æ®åº“åç§°binlog-ignore-db=mysql  ## å¼€å¯äºŒè¿›åˆ¶æ—¥å¿—åŠŸèƒ½ï¼Œä»¥å¤‡Slaveä½œä¸ºå…¶å®ƒæ•°æ®åº“å®ä¾‹çš„Masteræ—¶ä½¿ç”¨log-bin=mall-mysql-slave1-bin  ## è®¾ç½®äºŒè¿›åˆ¶æ—¥å¿—ä½¿ç”¨å†…å­˜å¤§å°ï¼ˆäº‹åŠ¡ï¼‰binlog_cache_size=1M  ## è®¾ç½®ä½¿ç”¨çš„äºŒè¿›åˆ¶æ—¥å¿—æ ¼å¼ï¼ˆmixed,statement,rowï¼‰binlog_format=mixed  ## äºŒè¿›åˆ¶æ—¥å¿—è¿‡æœŸæ¸…ç†æ—¶é—´ã€‚é»˜è®¤å€¼ä¸º0ï¼Œè¡¨ç¤ºä¸è‡ªåŠ¨æ¸…ç†ã€‚expire_logs_days=7  ## è·³è¿‡ä¸»ä»å¤åˆ¶ä¸­é‡åˆ°çš„æ‰€æœ‰é”™è¯¯æˆ–æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œé¿å…slaveç«¯å¤åˆ¶ä¸­æ–­ã€‚## å¦‚ï¼š1062é”™è¯¯æ˜¯æŒ‡ä¸€äº›ä¸»é”®é‡å¤ï¼Œ1032é”™è¯¯æ˜¯å› ä¸ºä¸»ä»æ•°æ®åº“æ•°æ®ä¸ä¸€è‡´slave_skip_errors=1062  ## relay_logé…ç½®ä¸­ç»§æ—¥å¿—relay_log=mall-mysql-relay-bin  ## log_slave_updatesè¡¨ç¤ºslaveå°†å¤åˆ¶äº‹ä»¶å†™è¿›è‡ªå·±çš„äºŒè¿›åˆ¶æ—¥å¿—log_slave_updates=1  ## slaveè®¾ç½®ä¸ºåªè¯»ï¼ˆå…·æœ‰superæƒé™çš„ç”¨æˆ·é™¤å¤–ï¼‰read_only=1</code></pre><h3 id="4-3-ä¿®æ”¹å®Œé…ç½®åé‡å¯slaveå®ä¾‹"><a href="#4-3-ä¿®æ”¹å®Œé…ç½®åé‡å¯slaveå®ä¾‹" class="headerlink" title="4.3 ä¿®æ”¹å®Œé…ç½®åé‡å¯slaveå®ä¾‹"></a>4.3 ä¿®æ”¹å®Œé…ç½®åé‡å¯slaveå®ä¾‹</h3><pre><code class="hljs">docker restart mysql-slave</code></pre><h3 id="4-4-åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€"><a href="#4-4-åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€" class="headerlink" title="4.4 åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€"></a>4.4 åœ¨ä¸»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»åŒæ­¥çŠ¶æ€</h3><pre><code class="hljs">show master status;</code></pre><h3 id="4-5-è¿›å…¥ä»æ•°æ®åº“"><a href="#4-5-è¿›å…¥ä»æ•°æ®åº“" class="headerlink" title="4.5 è¿›å…¥ä»æ•°æ®åº“"></a>4.5 è¿›å…¥ä»æ•°æ®åº“</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk">docker exec -it mysql-slave <span class="hljs-regexp">/bin/</span>bash<br>mysql -uroot -proot<br></code></pre></td></tr></table></figure><h3 id="4-6-åœ¨ä»æ•°æ®åº“ä¸­é…ç½®ä¸»ä»å¤åˆ¶"><a href="#4-6-åœ¨ä»æ•°æ®åº“ä¸­é…ç½®ä¸»ä»å¤åˆ¶" class="headerlink" title="4.6 åœ¨ä»æ•°æ®åº“ä¸­é…ç½®ä¸»ä»å¤åˆ¶"></a>4.6 åœ¨ä»æ•°æ®åº“ä¸­é…ç½®ä¸»ä»å¤åˆ¶</h3><pre><code class="hljs">change master to master_host=&#39;å®¿ä¸»æœºip&#39;, master_user=&#39;slave&#39;, master_password=&#39;123456&#39;, master_port=3307, master_log_file=&#39;mall-mysql-bin.000001&#39;, master_log_pos=617, master_connect_retry=30;## å‚æ•°è¯´æ˜master_hostï¼šä¸»æ•°æ®åº“çš„IPåœ°å€ï¼›master_portï¼šä¸»æ•°æ®åº“çš„è¿è¡Œç«¯å£ï¼›master_userï¼šåœ¨ä¸»æ•°æ®åº“åˆ›å»ºçš„ç”¨äºåŒæ­¥æ•°æ®çš„ç”¨æˆ·è´¦å·ï¼›master_passwordï¼šåœ¨ä¸»æ•°æ®åº“åˆ›å»ºçš„ç”¨äºåŒæ­¥æ•°æ®çš„ç”¨æˆ·å¯†ç ï¼›master_log_fileï¼šæŒ‡å®šä»æ•°æ®åº“è¦å¤åˆ¶æ•°æ®çš„æ—¥å¿—æ–‡ä»¶ï¼Œé€šè¿‡æŸ¥çœ‹ä¸»æ•°æ®çš„çŠ¶æ€ï¼Œè·å–Fileå‚æ•°ï¼›master_log_posï¼šæŒ‡å®šä»æ•°æ®åº“ä»å“ªä¸ªä½ç½®å¼€å§‹å¤åˆ¶æ•°æ®ï¼Œé€šè¿‡æŸ¥çœ‹ä¸»æ•°æ®çš„çŠ¶æ€ï¼Œè·å–Positionå‚æ•°ï¼›master_connect_retryï¼šè¿æ¥å¤±è´¥é‡è¯•çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºç§’ã€‚</code></pre><h3 id="4-7-åœ¨ä»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»çŠ¶æ€"><a href="#4-7-åœ¨ä»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»çŠ¶æ€" class="headerlink" title="4.7 åœ¨ä»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»çŠ¶æ€"></a>4.7 åœ¨ä»æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸»ä»çŠ¶æ€</h3><pre><code class="hljs">show slave status \G;</code></pre><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127211307681.png" alt="image-20221127211307681"></p><h3 id="4-8-åœ¨ä»æ•°æ®åº“ä¸­å¼€å¯ä¸»ä»åŒæ­¥"><a href="#4-8-åœ¨ä»æ•°æ®åº“ä¸­å¼€å¯ä¸»ä»åŒæ­¥" class="headerlink" title="4.8 åœ¨ä»æ•°æ®åº“ä¸­å¼€å¯ä¸»ä»åŒæ­¥"></a>4.8 åœ¨ä»æ•°æ®åº“ä¸­å¼€å¯ä¸»ä»åŒæ­¥</h3><pre><code class="hljs">start slave;</code></pre><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127211354655.png" alt="image-20221127211354655"></p><blockquote><p>æ³¨æ„</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127211601944.png" alt="image-20221127211601944"></p><p>è¿™ä¸ªæƒ…å†µæ˜¯å‰é¢çš„</p><p><code>change master to master_host=&#39;å®¿ä¸»æœºip&#39;, master_user=&#39;slave&#39;, master_password=&#39;123456&#39;, master_port=3307, master_log_file=&#39;mall-mysql-bin.000001&#39;, master_log_pos=617, master_connect_retry=30;</code>  &#x3D;&#x3D;<strong>å®¿ä¸»æœºip</strong>&#x3D;&#x3D;é…ç½®å‡ºé”™</p><p>åœæ­¢<code>Slave</code></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-literal">stop</span> <span class="hljs-literal">slave</span><br></code></pre></td></tr></table></figure><p>é‡æ–°<strong>4.6æ­¥éª¤</strong>å¼€å§‹</p><h2 id="5-æµ‹è¯•"><a href="#5-æµ‹è¯•" class="headerlink" title="5.æµ‹è¯•"></a>5.æµ‹è¯•</h2><h3 id="5-1-ä¸»åº“æ–°å¢æ•°æ®"><a href="#5-1-ä¸»åº“æ–°å¢æ•°æ®" class="headerlink" title="5.1 ä¸»åº“æ–°å¢æ•°æ®"></a>5.1 ä¸»åº“æ–°å¢æ•°æ®</h3><p>ä¸»åº“æ–°å¢</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127212405620.png" alt="image-20221127212405620"></p><p>ä»åº“å®Œæˆäº†å¤åˆ¶</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221127212512996.png" alt="image-20221127212512996"></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
      <category>docker</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
      <tag>Linux</tag>
      
      <tag>docker</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ç‘å‰å¤–å–</title>
    <link href="/2022/11/25/%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/11/25/%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%91%9E%E5%90%89%E5%A4%96%E5%8D%96%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>[toc]</p><h1 id="ç‘å‰å¤–å–ç¬”è®°"><a class="markdownIt-Anchor" href="#ç‘å‰å¤–å–ç¬”è®°"></a> ç‘å‰å¤–å–ç¬”è®°</h1><p><a href="https://blog.csdn.net/weixin_46906696/article/details/125040457#comments_23962173">åŸæ–‡é“¾æ¥</a></p><h1 id="æ¦‚è¿°"><a class="markdownIt-Anchor" href="#æ¦‚è¿°"></a> æ¦‚è¿°</h1><h2 id="åŠŸèƒ½æ¶æ„å›¾"><a class="markdownIt-Anchor" href="#åŠŸèƒ½æ¶æ„å›¾"></a> åŠŸèƒ½æ¶æ„å›¾</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/00f39dbdd7d24d88b56c10eabeecdd7d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="æ•°æ®åº“å»ºåº“å»ºè¡¨"><a class="markdownIt-Anchor" href="#æ•°æ®åº“å»ºåº“å»ºè¡¨"></a> æ•°æ®åº“å»ºåº“å»ºè¡¨</h1><h2 id="è¡¨è¯´æ˜"><a class="markdownIt-Anchor" href="#è¡¨è¯´æ˜"></a> è¡¨è¯´æ˜</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ee424986569f45b6a071f1556bfe10b8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="å¼€å‘ç¯å¢ƒ"><a class="markdownIt-Anchor" href="#å¼€å‘ç¯å¢ƒ"></a> å¼€å‘ç¯å¢ƒ</h1><h2 id="mavenæ­å»º"><a class="markdownIt-Anchor" href="#mavenæ­å»º"></a> Mavenæ­å»º</h2><p>ç›´æ¥åˆ›å»ºæ–°å·¥ç¨‹<br />ç»§æ‰¿çˆ¶å·¥ç¨‹çš„å½¢å¼æ¥åšè¿™ä¸ªï¼Œè¿™é‡Œæ–°å»ºçˆ¶å·¥ç¨‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6e78719f1b0e465e816e50584a93d39c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>â€‹    application.ymlæ–‡ä»¶</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span><br><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-comment">#åº”ç”¨çš„åç§°ï¼Œå¯é€‰</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">reggie_take_out</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/reggie?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=false&amp;allowPublicKeyRetrieval=true</span><br>      <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>      <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br><span class="hljs-attr">mybatis-plus:</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-comment">#åœ¨æ˜ å°„å®ä½“æˆ–è€…å±æ€§æ—¶ï¼Œå°†æ•°æ®åº“ä¸­è¡¨åå’Œå­—æ®µåä¸­çš„ä¸‹åˆ’çº¿å»æ‰ï¼ŒæŒ‰ç…§é©¼å³°å‘½åæ³•æ˜ å°„</span><br>    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">log-impl:</span> <span class="hljs-string">org.apache.ibatis.logging.stdout.StdOutImpl</span><br>  <span class="hljs-attr">global-config:</span><br>    <span class="hljs-attr">db-config:</span><br>      <span class="hljs-attr">id-type:</span> <span class="hljs-string">ASSIGN_ID</span><br></code></pre></td></tr></table></figure><p>â€‹</p><h2 id="å¯åŠ¨æµ‹è¯•"><a class="markdownIt-Anchor" href="#å¯åŠ¨æµ‹è¯•"></a> å¯åŠ¨æµ‹è¯•</h2><p>åˆ›å»ºæµ‹è¯•ç±»å¹¶å¯åŠ¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8f3df341f8ed469a96de5831708a5fc5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="å¯¼å…¥å‰ç«¯é¡µé¢"><a class="markdownIt-Anchor" href="#å¯¼å…¥å‰ç«¯é¡µé¢"></a> å¯¼å…¥å‰ç«¯é¡µé¢</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d8af2e9f8b1f4c52b8b881801c5d8c3b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="å¯¼å…¥"><a class="markdownIt-Anchor" href="#å¯¼å…¥"></a> å¯¼å…¥</h3><p>åœ¨é»˜è®¤é¡µé¢å’Œå‰å°é¡µé¢çš„æƒ…å†µä¸‹ï¼Œç›´æ¥æŠŠè¿™ä¿©æ‹–åˆ°resourceç›®å½•ä¸‹ç›´æ¥è®¿é—®æ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œå› ä¸ºè¢«mvcæ¡†æ¶æ‹¦æˆªäº†<br />æ‰€ä»¥æˆ‘ä»¬è¦ç¼–å†™ä¸€ä¸ªæ˜ å°„ç±»æ”¾è¡Œè¿™äº›èµ„æº</p><h4 id="åˆ›å»ºé…ç½®æ˜ å°„ç±»"><a class="markdownIt-Anchor" href="#åˆ›å»ºé…ç½®æ˜ å°„ç±»"></a> åˆ›å»ºé…ç½®æ˜ å°„ç±»</h4><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/434a4b66a3534624ae8576c71d5e43ac.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ddb9c62315e74bfba369d3812b957453.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>è®¿é—®æˆåŠŸ<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124213742999.png" alt="image-20221124213742999" /></p><h1 id="åå°å¼€å‘"><a class="markdownIt-Anchor" href="#åå°å¼€å‘"></a> åå°å¼€å‘</h1><h2 id="æ•°æ®åº“å®ä½“ç±»æ˜ å°„"><a class="markdownIt-Anchor" href="#æ•°æ®åº“å®ä½“ç±»æ˜ å°„"></a> æ•°æ®åº“å®ä½“ç±»æ˜ å°„</h2><p>ç”¨mybatis plusæ¥å®ç°é€†å‘å·¥ç¨‹<br />è¿™é‡Œæ˜¯è€ç‰ˆæœ¬çš„é€†å‘å·¥ç¨‹</p><p>â€‹</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>freemarker<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.30<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--mybatis-plus ä»£ç ç”Ÿæˆå™¨ä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-generator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å…·ä½“æ€ä¹ˆç©çœ‹è¿™é‡Œ<br /><a href="https://blog.csdn.net/weixin_48678547/article/details/123379415">MPé€†å‘å·¥ç¨‹æ•™ç¨‹</a></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124213823750.png" alt="image-20221124213823750" /></p><h1 id="è´¦æˆ·æ“ä½œ"><a class="markdownIt-Anchor" href="#è´¦æˆ·æ“ä½œ"></a> è´¦æˆ·æ“ä½œ</h1><h2 id="ç™»é™†åŠŸèƒ½"><a class="markdownIt-Anchor" href="#ç™»é™†åŠŸèƒ½"></a> ç™»é™†åŠŸèƒ½</h2><p>å‰ç«¯é¡µé¢<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/018840778788414d802ec5309034a30b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7981e9e300884b3285073d4072fdd775.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/aa04438900b64014a89cbcb2115d9463.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>æ•°æ®åº“</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124213937545.png" alt="image-20221124213937545" />ä¸šåŠ¡é€»è¾‘<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/257ae0d260b2430b8890d054fc72b65a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><strong>è¿™é‡Œä¸¤ä¸ªå­—ç¬¦ä¸²çš„æ¯”è¾ƒæ²¡æ³•ç”¨! =æ¥å®ç°</strong>ï¼Œåªèƒ½equalså†å–åæ¥åˆ¤æ–­<br />ç›´æ¥ä¸Šä»£ç ï¼Œè¿™é‡Œæ²¡æœ‰æ¶‰åŠserviceå±‚çš„æ“ä½œ</p><p>â€‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> request å¦‚æœç™»é™†æˆåŠŸæŠŠå¯¹è±¡æ”¾å…¥Sessionä¸­ï¼Œæ–¹ä¾¿åç»­æ‹¿å–</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> employee åˆ©ç”¨<span class="hljs-doctag">@RequestBody</span>æ³¨è§£æ¥è§£æå‰ç«¯ä¼ æ¥çš„Jsonï¼ŒåŒæ—¶ç”¨å¯¹è±¡æ¥å°è£…</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@PostMapping(&quot;/login&quot;)</span><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(HttpServletRequest request, <span class="hljs-meta">@RequestBody</span> Employee employee)</span> &#123;<br>    String password=employee.getPassword();<br>    <span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> employee.getUsername();<br>    log.info(<span class="hljs-string">&quot;ç™»é™†&quot;</span>);<br>    <span class="hljs-comment">//MD5åŠ å¯†</span><br>    <span class="hljs-type">MD5Util</span> <span class="hljs-variable">md5Util</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MD5Util</span>();<br>    password=MD5Util.getMD5(password);<br>    <span class="hljs-comment">//é€šè¿‡è´¦æˆ·æŸ¥è¿™ä¸ªå‘˜å·¥å¯¹è±¡ï¼Œè¿™é‡Œå°±ä¸èµ°Serviceå±‚äº†</span><br>    LambdaQueryWrapper&lt;Employee&gt; lambdaQueryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>();<br>    lambdaQueryWrapper.eq(Employee::getUsername, username);<br>    Employee empResult=employeeService.getOne(lambdaQueryWrapper);<br>        <span class="hljs-comment">//åˆ¤æ–­ç”¨æˆ·æ˜¯å¦å­˜åœ¨</span><br>    <span class="hljs-keyword">if</span> (!empResult.getUsername().equals(username))&#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;è´¦æˆ·ä¸å­˜åœ¨&quot;</span>);<br>        <span class="hljs-comment">//å¯†ç æ˜¯å¦æ­£ç¡®</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!empResult.getPassword().equals(password))&#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;è´¦æˆ·å¯†ç é”™è¯¯&quot;</span>);<br>        <span class="hljs-comment">//å‘˜å·¥è´¦æˆ·çŠ¶æ€æ˜¯å¦æ­£å¸¸ï¼Œ1çŠ¶æ€æ­£å¸¸ï¼Œ0å°ç¦</span><br>    &#125;<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (empResult.getStatus()!=<span class="hljs-number">1</span>)&#123;<br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;å½“å‰è´¦æˆ·æ­£åœ¨å°ç¦&quot;</span>);<br>        <span class="hljs-comment">//çŠ¶æ€æ­£å¸¸å…è®¸ç™»é™†</span><br>    &#125;<span class="hljs-keyword">else</span> &#123;<br>        log.info(<span class="hljs-string">&quot;ç™»é™†æˆåŠŸï¼Œè´¦æˆ·å­˜å…¥session&quot;</span>);<br>        <span class="hljs-comment">//å‘˜å·¥idå­˜å…¥sessionï¼Œ</span><br>        request.getSession().setAttribute(<span class="hljs-string">&quot;employ&quot;</span>,empResult.getId());<br>        <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">&quot;ç™»é™†æˆåŠŸ&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="é€€å‡ºåŠŸèƒ½"><a class="markdownIt-Anchor" href="#é€€å‡ºåŠŸèƒ½"></a> é€€å‡ºåŠŸèƒ½</h2><p>ç‚¹å‡»é€€å‡º<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/09194dda97404a7db7a4438d056df2b6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åˆ é™¤sessionå¯¹è±¡</p><p>â€‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> request åˆ é™¤requestä½œç”¨åŸŸä¸­çš„sessionå¯¹è±¡ï¼Œå°±æŒ‰ç™»é™†çš„request.getSession().setAttribute(&quot;employ&quot;,empResult.getId());åˆ é™¤employeeå°±è¡Œ</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@PostMapping(&quot;/logout&quot;)</span><br><span class="hljs-keyword">public</span> Result <span class="hljs-title function_">login</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br>    <span class="hljs-comment">//å°è¯•åˆ é™¤</span><br>    <span class="hljs-keyword">try</span> &#123;<br>        request.getSession().removeAttribute(<span class="hljs-string">&quot;employ&quot;</span>);<br>    &#125;<span class="hljs-keyword">catch</span> (Exception e)&#123;<br>        <span class="hljs-comment">//åˆ é™¤å¤±è´¥</span><br>        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-string">&quot;ç™»å‡ºå¤±è´¥&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> Result.success(<span class="hljs-string">&quot;ç™»å‡ºæˆåŠŸ&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="å®Œå–„ç™»é™†æ·»åŠ è¿‡æ»¤å™¨"><a class="markdownIt-Anchor" href="#å®Œå–„ç™»é™†æ·»åŠ è¿‡æ»¤å™¨"></a> å®Œå–„ç™»é™†ï¼ˆæ·»åŠ è¿‡æ»¤å™¨ï¼‰</h2><p>è¿™é‡Œçš„è¯ç”¨æˆ·ç›´æ¥url+èµ„æºåå¯ä»¥éšä¾¿è®¿é—®ï¼Œæ‰€ä»¥è¦åŠ ä¸ªæ‹¦æˆªå™¨ï¼Œæ²¡æœ‰ç™»é™†æ—¶ï¼Œä¸ç»™è®¿é—®ï¼Œè‡ªåŠ¨è·³è½¬åˆ°ç™»é™†é¡µé¢<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/470f1c39f58f4cb09ee3878195622ca1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿‡æ»¤å™¨é…ç½®ç±»æ³¨è§£<code>@WebFilter(filterName=&quot;æ‹¦æˆªå™¨ç±»åé¦–å­—æ¯å°å†™&quot;ï¼ŒurlPartten=â€œè¦æ‹¦æˆªçš„è·¯å¾„ï¼Œæ¯”å¦‚/*â€)</code><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/4cf893fe589242eba9be0c206389bc18.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" />åˆ¤æ–­ç”¨æˆ·çš„ç™»é™†çŠ¶æ€è¿™å—ä¹‹å‰å› ä¸ºå­˜å…¥sessioné‡Œé¢æœ‰ä¸€ä¸ªåä¸ºemployeeçš„å¯¹è±¡ï¼Œé‚£ä¹ˆåªéœ€è¦çœ‹çœ‹è¿™ä¸ªsessionè¿˜åœ¨ä¸åœ¨å°±çŸ¥é“ä»–æ˜¯å¦åœ¨ç™»é™†çŠ¶æ€<br />æ³¨æ„ï¼Œæƒ³å­˜æˆ–è€…æƒ³è·å–çš„è¯ï¼Œå°±éƒ½å¾—ç”¨<code>HttpServletRequest</code>çš„å¯¹è±¡æ¥è¿›è¡Œè·å–ï¼Œåˆ«çš„requestå¯¹è±¡æ‹¿ä¸åˆ°çš„</p><p>è¿™é‡Œæä¸€å˜´<br />è°ƒç”¨Springæ ¸å¿ƒåŒ…çš„å­—ç¬¦ä¸²åŒ¹é…ç±»çš„å¯¹è±¡ï¼Œå¯¹è·¯å¾„è¿›è¡ŒåŒ¹é…ï¼Œå¹¶ä¸”è¿”å›æ¯”è¾ƒç»“æœ<br />å¦‚æœç›¸ç­‰å°±ä¸ºtrue</p><p><code>public static final AntPathMatcher PATH_MATCHER = new AntPathMatcher();</code></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a4e9e841bb7c43179bbcb2905d172a2c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å‰ç«¯æ‹¦æˆªå™¨å®Œæˆè·³è½¬åˆ°ç™»é™†é¡µé¢ï¼Œä¸åœ¨åç«¯åšå¤„ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f0a1667cce664c35b64925c48dfb59f0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>æ‹¦æˆªäº†ï¼Œä½†æ˜¯é¡µé¢è·³è½¬ä¸äº†ã€‚æµè§ˆå™¨ç¼“å­˜åŸå› ã€‚<code>Ctrl+F5</code>å¼ºåˆ¶åˆ·æ–°</p><blockquote><p>è¿™é‡Œå¯èƒ½æœ‰ä¸ªç–‘é—®</p></blockquote><p><strong>urls</strong>ä¸­æœ‰<code>&quot;/backend/**&quot;,</code>ï¼Œå°±æ˜¯æŠŠ<mark>backend</mark>ç›®å½•ä¸‹å…¨éƒ¨èµ„æºè¿›è¡Œäº†æ”¾è¡Œï¼Œä¸ºä»€ä¹ˆè®¿é—® <strong><a href="http://localhost:8080/backend/index.html">http://localhost:8080/backend/index.html</a></strong>è¿˜æ˜¯ä¸è¡Œã€‚</p><p>åŸå› ï¼š</p><ul><li>â€‹<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124214922289.png" alt="image-20221124214922289" /></li><li>è®¿é—®è¯¥é¡µé¢ï¼Œè‡ªåŠ¨å‘é€Ajaxè¯·æ±‚ã€‚è¯¥è¯·æ±‚ä¸å…è®¸æœªç™»å½•å°±è®¿é—®ã€‚æ—¢è¢«æ‹¦æˆª</li><li><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124215131587.png" alt="image-20221124215131587" /></li><li>å‰ç«¯æ‹¦æˆªå™¨è¿›è¡Œäº†é¡µé¢çš„è·³è½¬,ï¼ˆå› ä¸ºæ˜¯Ajaxè¯·æ±‚ï¼Œåç«¯ç›´æ¥è·³è½¬å¥½åƒæ˜¯ä¸è¡Œçš„ã€‚ï¼‰</li></ul><h2 id="æ–°å¢å‘˜å·¥"><a class="markdownIt-Anchor" href="#æ–°å¢å‘˜å·¥"></a> æ–°å¢å‘˜å·¥</h2><p>æ–°å¢å‘˜å·¥åŠŸèƒ½ï¼Œï¼ˆå‰ç«¯å¯¹æ‰‹æœºå·å’Œèº«ä»½è¯å·é•¿åº¦åšäº†ä¸€ä¸ªæ ¡éªŒï¼‰<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/966dd380180a47018ed362e125406271.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¯·æ±‚ URL: <a href="http://localhost:9001/employee">http://localhost:9001/employee</a> ï¼ˆPOSTè¯·æ±‚ï¼‰<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8bae2348243f4d0ebe58ce97aff511d3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ”¹é€ ä¸€ä¸‹Employeeå®ä½“ç±»ï¼Œé€šç”¨idé›ªèŠ±è‡ªå¢ç®—æ³•æ¥æ–°å¢id<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124215527273.png" alt="image-20221124215527273" /></p><h2 id="å…¨å±€å¼‚å¸¸å¤„ç†"><a class="markdownIt-Anchor" href="#å…¨å±€å¼‚å¸¸å¤„ç†"></a> å…¨å±€å¼‚å¸¸å¤„ç†</h2><p>å…ˆçœ‹çœ‹è¿™ç§ä»£ç çš„try catch<br />è¿™ç§try catchæ¥æ•è·å¼‚å¸¸å›ºç„¶å¥½ï¼Œ <strong>ä½†æ˜¯ ï¼Œä»£ç é‡ä¸€å¤§èµ·æ¥ï¼Œè¶…çº§å¤šçš„try catchå°±ä¼šå¾ˆä¹±</strong><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/232dfeaca28f420cb0fd5fae01f4ce15.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ‰€ä»¥æˆ‘ä»¬è¦åŠ å…¥å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œåœ¨CommonåŒ…ä¸‹ï¼Œå’ŒResultåŒçº§ï¼Œè¿™é‡Œåªæ˜¯ç¤ºä¾‹ï¼Œå¹¶ä¸å®Œæ•´<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b8da6a3931714deeb724381c0ad2da41.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/33fe7337e5464cf9b07a7f0a31f67a04.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å½“æŠ¥é”™ä¿¡æ¯å‡ºç°Duplicate entryæ—¶ï¼Œå°±æ„å‘³ç€æ–°å¢å‘˜å·¥å¼‚å¸¸äº†<br />æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯¹å¼‚å¸¸ç±»çš„æ–¹æ³•è¿›è¡Œä¸€äº›å°æ”¹åŠ¨ï¼Œè®©è¿™ä¸ªå¼‚å¸¸åé¦ˆå˜å¾—æ›´äººæ€§åŒ–<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b795bb06e106477192795c9fa56e15fa.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™ä¸ªæ—¶å€™å†æ¥å®¢æˆ·ç«¯è¯•è¯•ï¼Œå°±ä¼šæä¾›äººæ€§åŒ–çš„æŠ¥é”™ï¼Œéå¸¸çš„å¿«ä¹~<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/39454913ca2a48778c8c25281a03ff06.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><strong>è¿™å›å†å›åˆ°Controller ï¼Œè¿™æ—¶å°±ä¸éœ€è¦å†æ¥try catchè¿™ç§å½¢å¼äº†ï¼Œä¸ç”¨ç®¡ä»–ï¼Œå› ä¸ºä¸€æ—¦å‡ºç°é”™è¯¯å°±ä¼šè¢«æˆ‘ä»¬çš„AOPæ•è·ã€‚æ‰€ä»¥ï¼Œä¸éœ€è¦å†ç”¨try<br />catchæ¥æŠ“äº†</strong><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0e1e9a3feb7c4b7c8bfa1dc61286437f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="å‘˜å·¥ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å‘˜å·¥ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢"></a> å‘˜å·¥ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢</h2><h3 id="æ¥å£åˆ†æ"><a class="markdownIt-Anchor" href="#æ¥å£åˆ†æ"></a> æ¥å£åˆ†æ</h3><p>è€ç”Ÿå¸¸è°ˆåˆ†é¡µæŸ¥è¯¢äº†<br />éœ€æ±‚<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3899bbef468e4224b6b26fa6a13e103c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åˆ†é¡µè¯·æ±‚æ¥å£<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/288dd9777c1944d195cb421038fbc885.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3b9f9ddf4a304f44923ef89fa9b22ca7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æŸ¥è¯¢å‘˜å·¥åŠæ˜¾ç¤ºæ¥å£<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cc0e4ee9f4b14b8d9e2c12428471889d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e339d98a293a43c19d3c6a6252da428b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />é€»è¾‘æµç¨‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/50fa6620581044c69049028b6921f72e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="åˆ†é¡µæ’ä»¶é…ç½®ç±»"><a class="markdownIt-Anchor" href="#åˆ†é¡µæ’ä»¶é…ç½®ç±»"></a> åˆ†é¡µæ’ä»¶é…ç½®ç±»</h3><p>åŠ å…¥é…ç½®ç±»<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/928faf96126040248a6c7629433b8f4a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="æ¥å£è®¾è®¡"><a class="markdownIt-Anchor" href="#æ¥å£è®¾è®¡"></a> æ¥å£è®¾è®¡</h3><p>å‰ç«¯æ³¨æ„äº‹é¡¹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0e4186ba7e804ab6b1b3c6b2a3f1ce05.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/eae2123e010e4d048e3b5a1339cf41ce.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />pageå¯¹è±¡å†…éƒ¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/87eab00f37584a51bcee03f83d665e32.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />é‡Œé¢åŒ…å«äº†æŸ¥è¯¢æ„é€ å™¨çš„ä½¿ç”¨</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">    * å‘˜å·¥ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢</span><br><span class="hljs-comment">    *</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@param</span> page     int</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@param</span> pageSize int</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@param</span> name     java.lang.String</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@return</span> com.xyy.reggie.common.R&lt;com.baomidou.mybatisplus.extension.plugins.pagination.Page&gt;</span><br><span class="hljs-comment">    * <span class="hljs-doctag">@author</span> å¸­å­</span><br><span class="hljs-comment">    */</span><br>   <span class="hljs-meta">@GetMapping(&quot;/page&quot;)</span><br>   <span class="hljs-keyword">public</span> R&lt;Page&gt; <span class="hljs-title function_">page</span><span class="hljs-params">(<span class="hljs-type">int</span> page, <span class="hljs-type">int</span> pageSize, String name)</span> &#123;<br>       log.info(<span class="hljs-string">&quot;page = &#123;&#125;,pageSize = &#123;&#125;,name = &#123;&#125;&quot;</span>, page, pageSize, name);<br><br>       <span class="hljs-comment">//æ„é€ åˆ†é¡µæ„é€ å™¨</span><br>       <span class="hljs-type">Page</span> <span class="hljs-variable">pageInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>(page, pageSize);<br><br>       <span class="hljs-comment">//æ„é€ æ¡ä»¶æ„é€ å™¨</span><br>       LambdaQueryWrapper&lt;Employee&gt; queryWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaQueryWrapper</span>();<br>       <span class="hljs-comment">//æ·»åŠ è¿‡æ»¤æ¡ä»¶</span><br>       queryWrapper.like(StringUtils.isNotEmpty(name), Employee::getName, name);<br>       <span class="hljs-comment">//æ·»åŠ æ’åºæ¡ä»¶</span><br>       queryWrapper.orderByDesc(Employee::getUpdateTime);<br><br>       <span class="hljs-comment">//æ‰§è¡ŒæŸ¥è¯¢</span><br>       employeeService.page(pageInfo, queryWrapper);<br><br>       <span class="hljs-keyword">return</span> R.success(pageInfo);<br>   &#125;<br><br></code></pre></td></tr></table></figure><p>â€‹</p><h2 id="å¯ç”¨-ç¦ç”¨å‘˜å·¥è´¦å·"><a class="markdownIt-Anchor" href="#å¯ç”¨-ç¦ç”¨å‘˜å·¥è´¦å·"></a> å¯ç”¨ã€ç¦ç”¨å‘˜å·¥è´¦å·</h2><p>æ— éå°±æ˜¯ä¿®æ”¹statusï¼Œ0ç¦ç”¨ï¼Œ1å¯ç”¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cbc14ff5649f4c3ab58a61f6a3717d55.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/00fd8c22798a4be0935fbe4706aac1a0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™ç§æ ¹æ®ç™»é™†äººç‰©æ¥è¿›è¡Œåˆ¤æ–­çš„ç©æ³•ï¼Œæ˜¯å‰ç«¯<br />è¿™ä¸ªé¡µé¢çš„ä½ç½®<code>resource/backend/page/member/list.html</code><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/15cb1554d5014d91a50a1d33faff5f0e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />çœ‹æ‹¿å‡ºæ¥çš„å¯¹è±¡æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œå¦‚æœæ˜¯adminï¼Œvueçš„v-ifæŒ‡ä»¤å°±ä¼šæŠŠç¼–è¾‘æŒ‰é’®æ˜¾ç¤ºå‡ºæ¥<br />å¦‚æœæ˜¯æ™®é€šç”¨æˆ·ï¼Œå°±ä¼šæŠŠç¼–è¾‘æŒ‰é’®éšè—<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/1a813cac7216496c9f007b2e89e94571.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="ä¿®å¤ä¸€ä¸ªå°bug"><a class="markdownIt-Anchor" href="#ä¿®å¤ä¸€ä¸ªå°bug"></a> ä¿®å¤ä¸€ä¸ªå°Bug</h3><p>å‰ç«¯ä¸€ç›´ä¸æ˜¾ç¤ºç¼–è¾‘æŒ‰é’®ï¼Œåœ¨localStorageé‡Œæ²¡æœ‰å‘ç°adminå¯¹è±¡<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/656ddea591c644369951b448d9437162.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™ä¸ªå€¼ä¸åº”è¯¥æ˜¯ç™»é™†æˆåŠŸï¼Œåº”è¯¥æ˜¯Employeeçš„å¯¹è±¡Json<br />çŒœæµ‹æ˜¯ç™»é™†çš„æ—¶å€™å¾€requesté‡Œå­˜å¯¹è±¡æ²¡å­˜å¥½<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e02134f0443f4cebaf01da0bebb88be3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ”¹æˆå¯¹è±¡å­˜å…¥å°±å¥½äº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3695c863613643ebb7c9d2fb6f44b1f2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™å›éƒ½æ­£å¸¸äº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f291200889854951bae0025d0c96d67f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="åŠŸèƒ½ç¼–å†™"><a class="markdownIt-Anchor" href="#åŠŸèƒ½ç¼–å†™"></a> åŠŸèƒ½ç¼–å†™</h3><p>å¤ä¹ ä¸€ä¸‹<br /><strong>PutMappingæ˜¯Resultfulé£æ ¼çš„è¯·æ±‚æ–¹å¼</strong><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0dcd79a42b334bae8337cb40a73fd17c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å½“å‰çŠ¶æ€æ˜¯1ï¼Œç›´æ¥å¸¦ç€ç›®æ ‡çŠ¶æ€å€¼ï¼ˆçŠ¶æ€æ”¹ç¦ç”¨ï¼‰è¿›è¡Œæ›´æ–°<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bbc8b8c97744496491c18389cf13f2f1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />Idç²¾åº¦ä¸¢å¤±ï¼Œjsç‹¬æœ‰çš„bugï¼Œç›´æ¥å¤„ç†Longå¤„ç†ä¸äº†ï¼Œè¦Longè½¬Stringå†è¿”å›å»</p><blockquote><p>è¿™ä¸ªè¦æ³¨æ„ï¼Œæˆ‘ä»¥å‰å†™é¡¹ç›®çš„æ—¶å€™å°±é‡åˆ°è¿™ä¸ªbugã€‚å·¨å‘</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bd851e41062148db9a7d4b84b687372f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/65954dc589544fe1bc98a70d0a878936.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åˆ©ç”¨å¯¹è±¡è½¬æ¢å™¨JacksonObjectMapperï¼Œå°†å¯¹è±¡è½¬Json  å°†Longå‹çš„Idè½¬æ¢ä¸ºStringç±»å‹çš„æ•°æ®<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7b18d09c0e75446db59dab3f6f4f505a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>åœ¨MVCé…ç½®ç±»ä¸­æ‰©å±•ä¸€ä¸ªæ¶ˆæ¯è½¬æ¢å™¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bc895faafbb247eb9e580f553d32d4e6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æµ‹è¯•åŠŸèƒ½æ­£å¸¸ï¼Œæ­£å¸¸æ›´æ–°å‘˜å·¥çŠ¶æ€<br />æ¶ˆæ¯æ‰©å±•å™¨é…ç½®ä½ç½®ï¼š<code>com.xyy.common.JacksonObjectMapper</code><br />å¯¹è±¡æ˜ å°„å™¨ä½ç½®ï¼š<code>com.xyy.config.WebMvcConfig</code><br />å‘˜å·¥çŠ¶æ€æ›´æ–°ä½ç½®ï¼š<code>com.xyy.controller.EmployeeController</code></p><h2 id="ç¼–è¾‘å‘˜å·¥ä¿¡æ¯"><a class="markdownIt-Anchor" href="#ç¼–è¾‘å‘˜å·¥ä¿¡æ¯"></a> ç¼–è¾‘å‘˜å·¥ä¿¡æ¯</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/83b635aff2ca4445840f24ef5c60a22b.png" alt=" " /><br />è¯·æ±‚APIï¼Œè¿™ä¸ªæ˜¯å…ˆå‘è¯·æ±‚ï¼ŒæŸ¥åˆ°ç”¨æˆ·ï¼Œç„¶åå¡«å……åˆ°é¡µé¢ä¸Š<br />å¯ä»¥çœ‹å‡ºæ¥ï¼Œè¿™ç§è¯·æ±‚æ–¹å¼æ˜¯ResultFulé£æ ¼çš„è¯·æ±‚æ–¹å¼<br />åœ¨æ§åˆ¶å™¨ä¸­è¦ç”¨@PathVariable(â€œ/{å‚æ•°åç§°}â€)æ³¨è§£æ¥è¿›è¡Œæ¥æ”¶<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7f1a236c859d418eb4aa1177cbf82543.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f7b34494b2eb42b8b315e9f7c2802956.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å®Œç¾æ›´æ–°</p><h2 id="å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……"><a class="markdownIt-Anchor" href="#å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……"></a> å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……</h2><p>åƒæ˜¯ä¸€éƒ¨åˆ†å…¬å…±å­—æ®µï¼Œåå¤å¡«å……èµ·æ¥æ²¡æœ‰æ„ä¹‰ï¼Œç®€åŒ–å¡«å……çš„æ“ä½œã€‚<br />æŠŠè¿™ä¸ªåŠŸèƒ½æ‹¿å‡ºæ¥ï¼Œå•ç‹¬æ‹å‡ºæ¥åšè‡ªåŠ¨å¡«å……å¤„ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f6b5a68d4b8646aab2b39db34fba625a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/09eaaee0510849749512ef973529a4ed.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¸ºå®ä½“ç±»å±æ€§ä¸Šé¢åŠ å…¥æ³¨è§£<code>@TableField(fill = å¡«å……æ¡ä»¶)</code><br />çœ‹ä¸€ä¸‹æºç ã€‚fillæ˜¯å¡«å……æ¡ä»¶ï¼Œç”¨æšä¸¾æ¥è¿›è¡Œå¤„ç†çš„<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c41f5a745d6c48d5b944fbe2b81e5726.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åŠ å®Œæ³¨è§£å’Œæ¡ä»¶ä¸ç®—å®Œï¼Œè¿˜è¦åŠ å…¥é…ç½®ç±»è¿›è¡Œå¤„ç†ï¼Œå¯¹å¡«å……çš„æ•°æ®åšè§„å®š<br />åœ¨commonåŒ…ä¸‹åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ç±»ï¼Œæœ€å…³é”®çš„æ˜¯è¦å®ç°<code>MetaObjectHandleræ¥å£ä¸‹çš„insertFillå’ŒupdateFill</code><br />ç¡®è®¤å¡«å……æ—¶éœ€è¦çš„å­—æ®µã€‚è¿˜æœ‰è¦åŠ å…¥@Componentæ³¨è§£ï¼Œå°†è¿™ä¸ªç±»äº¤ç»™æ¡†æ¶æ¥ç®¡ç†ï¼Œå¦åˆ™çš„è¯å®¹æ˜“æ‰¾ä¸åˆ°,setValueçš„å€¼ä¼šæ ¹æ®æ³¨è§£åŠ å…¥çš„å­—æ®µåç§°æ¥é”å®šæ˜¯å¦éœ€è¦æ›´æ–°<br />ä½ç½®ï¼š<code>com.xyy.common.MyMetaObjectHandler</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjecthandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ’å…¥æ“ä½œï¼Œè‡ªåŠ¨å¡«å……</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> metaObject</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……[insert]...&quot;</span>);<br>        log.info(metaObject.toString());<br><br>        metaObject.setValue(<span class="hljs-string">&quot;createTime&quot;</span>, LocalDateTime.now());<br>        metaObject.setValue(<span class="hljs-string">&quot;updateTime&quot;</span>,LocalDateTime.now());<br><span class="hljs-comment">//        metaObject.setValue(&quot;createUser&quot;, BaseContext.getCurrentId());</span><br><span class="hljs-comment">//        metaObject.setValue(&quot;updateUser&quot;,BaseContext.getCurrentId());</span><br>        metaObject.setValue(<span class="hljs-string">&quot;createUser&quot;</span>,<span class="hljs-number">1L</span>);<br>        metaObject.setValue(<span class="hljs-string">&quot;updateUser&quot;</span>,<span class="hljs-number">1L</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ›´æ–°æ“ä½œï¼Œè‡ªåŠ¨å¡«å……</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> metaObject</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……[update]...&quot;</span>);<br>        log.info(metaObject.toString());<br><br>        <span class="hljs-type">long</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> Thread.currentThread().getId();<br>        log.info(<span class="hljs-string">&quot;çº¿ç¨‹idä¸ºï¼š&#123;&#125;&quot;</span>,id);<br><br>        metaObject.setValue(<span class="hljs-string">&quot;updateTime&quot;</span>,LocalDateTime.now());<br><span class="hljs-comment">//        metaObject.setValue(&quot;updateUser&quot;,BaseContext.getCurrentId());</span><br>        metaObject.setValue(<span class="hljs-string">&quot;updateUser&quot;</span>,<span class="hljs-number">1L</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘æƒ³å»æ›´æ–°ç®¡ç†å‘˜å­—æ®µæ˜¯éå¸¸å›°éš¾çš„ï¼Œå› ä¸ºæˆ‘è¿™é‡Œæ‹¿ä¸åˆ°Requestçš„ä½œç”¨åŸŸå¯¹è±¡ï¼Œæ‰€ä»¥è¦æƒ³ä¸ªåŠæ³•æ¥å¤„ç†ã€‚<br />è¿™ä¸ªæ—¶å€™å°±éœ€è¦<code>ThreadLocal</code>æ¥è¿›è¡Œå¯¹è±¡çš„è·å–ï¼Œè¿™ä¸ªçº¿ç¨‹æ˜¯è´¯ç©¿æ•´ä¸ªè¿è¡Œçš„ï¼Œå¯ä»¥é€šè¿‡ä»–æ¥è·å–</p><h3 id="ä½¿ç”¨æ—¶"><a class="markdownIt-Anchor" href="#ä½¿ç”¨æ—¶"></a> ä½¿ç”¨æ—¶</h3><p>ä½•ä¸ºThreadLocal<br /><strong>é‡ç‚¹æ¥äº†</strong><br />è¿™ä¸ªå›¾<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a747301972964b88a7db5dc9d84995e6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/62ec83c598a546b89722fef26f3ca4b4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æˆ‘çš„æ€è·¯å°±æ˜¯åœ¨ç”¨æˆ·ç™»é™†çš„æ—¶å€™ï¼ŒæŠŠè¿™ä¸ªidå­˜è¿›å»ï¼Œç­‰åˆ°åœ¨å¡«å……å­—æ®µçš„æ—¶å€™ï¼Œä»ThreadLocalé‡ŒæŠŠè¿™ä¸ªèµ„æºå†æ‹¿å‡ºæ¥ã€‚<br />ç›´æ¥æ“ä½œä¸å¤ªå¥½ï¼ŒæŠŠä»–å°è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œè¿™ä¸ªå·¥å…·ç±»é‡Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼Œå¯ä»¥é€šè¿‡ç±»ç›´æ¥è°ƒç”¨ã€å¹¶ä¸”éƒ½æ˜¯é™æ€æ–¹æ³•ï¼Œæ¥æ“ä½œä¿å­˜å’Œè¯»å–<br />æˆ‘é€‰æ‹©åœ¨Utilsä¸‹åˆ›å»º</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åŸºäºThreadLocalå°è£…å·¥å…·ç±»ï¼Œç”¨æˆ·ä¿å­˜å’Œè·å–å½“å‰ç™»å½•ç”¨æˆ·id</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseContext</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ThreadLocal&lt;Long&gt; threadLocal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadLocal</span>&lt;&gt;();<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è®¾ç½®å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCurrentId</span><span class="hljs-params">(Long id)</span>&#123;<br>        threadLocal.set(id);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è·å–å€¼</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    pub<br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼ŒThreadLocalä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹ï¼Œåªæœ‰åŒä¸€ä¸ªçº¿ç¨‹æ‰èƒ½æ‹¿åˆ°ï¼Œä¸æ˜¯ä¸€ä¸ªçº¿ç¨‹æ‹¿ä¸åˆ°çš„</p></blockquote><h3 id="è¿™æ ·ä¹Ÿè¡Œ"><a class="markdownIt-Anchor" href="#è¿™æ ·ä¹Ÿè¡Œ"></a> è¿™æ ·ä¹Ÿè¡Œ</h3><p>æ¢ä¸ªæ€è·¯ï¼šå› ä¸ºæˆ‘æƒ³æ‹¿Requestå¯¹è±¡é‡Œçš„Idå˜›ï¼Œæ‰€ä»¥ï¼Œåªè¦æœ‰Requestçš„idå°±è¡Œï¼Œä¸å¿…è¿‡äºæ‰§ç€ä¸€å®šè¦ç”¨ThreadLocalæ¥å­˜ï¼Œå› æ­¤ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©æ³¨å…¥ä¸€ä¸‹HttpServletRequestå¯¹è±¡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/58b8b8d5442a4da29ef667430a521262.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="åˆ†ç±»ç®¡ç†é¡µé¢"><a class="markdownIt-Anchor" href="#åˆ†ç±»ç®¡ç†é¡µé¢"></a> åˆ†ç±»ç®¡ç†é¡µé¢</h1><h2 id="èœå“åˆ†ç±»"><a class="markdownIt-Anchor" href="#èœå“åˆ†ç±»"></a> èœå“åˆ†ç±»</h2><h3 id="èœå“åˆ†ç±»å±•ç°"><a class="markdownIt-Anchor" href="#èœå“åˆ†ç±»å±•ç°"></a> èœå“åˆ†ç±»å±•ç°</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9dc65e03155d4e29b1dd85b73e79468c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿˜æ˜¯é‚£å‡ æ­¥</p><pre><code class="hljs">1. åˆ›å»ºåˆ†é¡µæ„é€ å™¨ Page pageInfo = new Page(ç¬¬å‡ é¡µ,æ¯é¡µå‡ æ¡æ•°æ®);2. å¦‚æœæœ‰éœ€è¦æ¡ä»¶è¿‡æ»¤çš„åŠ å…¥æ¡ä»¶è¿‡æ»¤å™¨LambaQueryWarpper3. æ³¨å…¥çš„serviceå¯¹è±¡ï¼ˆå·²ç»ç»§æ‰¿MPçš„BaseMapperæ¥å£ï¼‰å»è°ƒç”¨Pageå¯¹è±¡     serviceå¯¹è±¡.page(åˆ†é¡µä¿¡æ¯,æ¡ä»¶è¿‡æ»¤å™¨)4. è¿”å›ç»“æœå°±å¯ä»¥äº†</code></pre><p>åˆ†é¡µæŸ¥è¯¢ä½ç½®ï¼š<code>com.xyy.controller.CategoryController.page</code></p><h3 id="æ–°å¢èœå“åˆ†ç±»"><a class="markdownIt-Anchor" href="#æ–°å¢èœå“åˆ†ç±»"></a> æ–°å¢èœå“åˆ†ç±»</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2c38b870546f49bd9a9d00572c2f1578.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>æ¶‰åŠçš„è¡¨æœ‰åˆ†ç±»è¡¨category<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5c9af552c151402d99d419b44601110a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¸šåŠ¡æµç¨‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0e55226139a848f4ba8a792c62a6feb3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>è¯·æ±‚æ–¹å¼æ˜¯Postè¯·æ±‚<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d43ee4cb2aeb4259abe4129cb1672978.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dc4cdb56b1ff40039d61b044f0259ea4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ§åˆ¶å™¨ä½ç½®ï¼š<code>com.xyy.controller.CategoryController (save)</code></p><h3 id="åˆ é™¤èœå“åˆ†ç±»"><a class="markdownIt-Anchor" href="#åˆ é™¤èœå“åˆ†ç±»"></a> åˆ é™¤èœå“åˆ†ç±»</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d3c5ede5188a46caa8bef24e4c14b9fb.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e35caef5f5d8421aae24cfc2832fe3d0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ™®é€šç‰ˆæœ¬ï¼Œæ²¡æœ‰è€ƒè™‘åˆ†ç±»æœ‰å…³è”çš„æƒ…å†µ</p><blockquote><p>æ³¨æ„</p></blockquote><p>è¿™é‡Œæœ‰ä¸ªå‘ï¼Œå‰ç«¯ä¼ è¿‡æ¥çš„è¯·æ±‚æ˜¯</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125153246807.png" alt="image-20221125153246807" /></p><p>å‚æ•°åå­—æ˜¯ <strong>ids</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/62d820a820634bcc841b41bcc0bc3987.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å®Œå–„ä¸€ä¸‹ï¼Œ <strong>å¦‚æœå½“å‰èœå“åˆ†ç±»ä¸‹æœ‰èœå“çš„è¯ ï¼Œå°±ä¸è®¸åˆ é™¤</strong><br />æ‰€ä»¥åœ¨åˆ é™¤ä¹‹å‰è¦å…ˆåšåˆ¤æ–­æ‰å¯ä»¥åˆ é™¤ï¼Œä¸ç¬¦åˆæ¡ä»¶çš„ï¼Œæˆ‘ä»¬è¦æŠ›å‡ºå¼‚å¸¸è¿›è¡Œæç¤º<br />å› ä¸ºæ²¡æœ‰è¿”å›å¼‚å¸¸ä¿¡æ¯çš„ç±»ï¼Œæˆ‘ä»¬è¿™é‡Œè¦åšä¸€ä¸ªè‡ªå®šä¹‰çš„ä¸“é—¨è¿”å›å¼‚å¸¸ä¿¡æ¯çš„ç±»<code>CustomerException</code><br />è¿™ä¸ªç±»çš„ä½ç½®ä¹Ÿåœ¨commonåŒ…ä¸‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/40de841c594443398553b1509512fa5e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å› ä¸ºæˆ‘ä»¬ä¹‹å‰åˆ›å»ºäº†ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†ï¼Œä¹Ÿè¦ç”¨ä¸Šï¼Œå› ä¸ºè¦æ‹¦æˆªå¼‚å¸¸ç»Ÿä¸€å¤„ç†<br />è¿˜æ˜¯<code>com.xyy.common.GloableExceptionHandler</code><br />å¯¹æŠ›å‡ºå¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå°±å¯ä»¥å¯¹æ–°å¢çš„å¼‚å¸¸æä¾›ç›®æ ‡çš„æ‹¦æˆªå’Œå¼‚å¸¸é€šçŸ¥<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/035d8b14a54f4cb1bffcd4c63673d0f8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åˆ é™¤èœå“åˆ†ç±»çš„controlleræ¥å£åœ¨ï¼š<code>com.xyy.controller.CategoryController (delCategory)</code><br />å› ä¸ºä¸šåŠ¡ç‰¹æ®Šï¼Œä¸”æ¯”è¾ƒé•¿ï¼Œå°±åˆ†ç¦»å‡ºæ¥æŠŠä¸šåŠ¡æ”¾åœ¨serviceåŒ…ä¸‹<br />serviceæ¥å£ä½ç½®ï¼š<code>com.xyy.service.impl.CategoryServiceImpl (removeCategory)</code></p><h2 id="ä¿®æ”¹å¥—é¤ä¿¡æ¯"><a class="markdownIt-Anchor" href="#ä¿®æ”¹å¥—é¤ä¿¡æ¯"></a> ä¿®æ”¹å¥—é¤ä¿¡æ¯</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e6c29b9b209c4881815bdffa24f571e8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />éå¸¸ç®€å•çš„CRUDï¼Œç›´æ¥è°ƒç”¨MPæ›´æ–°ä¸€ä¸‹å°±è¡Œ<br />APIä½ç½®</p><p>â€‹<br />â€‹    com.xyy.controller.CategoryController (updateCategory)</p><h2 id="æ–‡ä»¶ä¸Šä¼ ä¸‹è½½é‡ç‚¹"><a class="markdownIt-Anchor" href="#æ–‡ä»¶ä¸Šä¼ ä¸‹è½½é‡ç‚¹"></a> æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼ˆé‡ç‚¹ï¼‰</h2><h3 id="ä¸Šä¼ é€»è¾‘"><a class="markdownIt-Anchor" href="#ä¸Šä¼ é€»è¾‘"></a> ä¸Šä¼ é€»è¾‘</h3><p>ç¬¬ä¸€æ¬¡æ¥è§¦ä¸Šä¼ å’Œä¸‹è½½çš„åŠŸèƒ½<br />æ–‡ä»¶ä¸Šä¼ é€»è¾‘ï¼ˆåç«¯ï¼‰<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6fddfbb6992645358dd6f7fc9e7ed79d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å‚æ•°åæœ‰è¦æ±‚çš„<br />æ¥æ”¶çš„æ–‡ä»¶ç±»å‹ä¸€å®šæ˜¯ æ–¹æ³•å(MultipartFile å‰ç«¯ä¸Šä¼ çš„æ–‡ä»¶åç§°)<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dee0540b7de5467ea6695e058a833b7f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b0f446d645654cd89577b9ba0a369f34.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ‰€ä»¥åç«¯çš„æ¥æ”¶åå­—ä¹Ÿå¾—æ”¹ä¸ºfile<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8d04a387872f43f199fadcd1d2c79090.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="ä¸Šä¼ é€»è¾‘å®ç°"><a class="markdownIt-Anchor" href="#ä¸Šä¼ é€»è¾‘å®ç°"></a> ä¸Šä¼ é€»è¾‘å®ç°</h3><p>å…·ä½“çš„å­˜å‚¨è·¯å¾„å†™åœ¨é…ç½®æ–‡ä»¶é‡Œäº†</p><ol><li><p>application.yml</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125185250894.png" alt="image-20221125185250894" /></p></li><li><p><strong>controller</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java">RestController<br><span class="hljs-meta">@RequestMapping(&quot;/common&quot;)</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonController</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;takeOutFile.fileLocation:&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String filePath;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–‡ä»¶ä¸Šä¼ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> file org.springframework.web.multipart.MultipartFile</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> com.xyy.reggie.common.R&lt;java.lang.String&gt;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> å¸­å­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(&quot;/upload&quot;)</span><br>    <span class="hljs-keyword">public</span> R&lt;String&gt; <span class="hljs-title function_">upload</span><span class="hljs-params">(MultipartFile file)</span> &#123;<br><br>        <span class="hljs-comment">//åŸå§‹æ–‡ä»¶å</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">originalFilename</span> <span class="hljs-operator">=</span> file.getOriginalFilename();<br>        <span class="hljs-keyword">assert</span> originalFilename != <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">suffix</span> <span class="hljs-operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>));<br><br>        <span class="hljs-comment">//ä½¿ç”¨UUIDé‡æ–°ç”Ÿæˆæ–‡ä»¶åï¼Œé˜²æ­¢æ–‡ä»¶åç§°é‡å¤é€ æˆæ–‡ä»¶è¦†ç›–</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString() + suffix;<br><br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç›®å½•å¯¹è±¡</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-comment">//åˆ¤æ–­å½“å‰ç›®å½•æ˜¯å¦å­˜åœ¨</span><br>        <span class="hljs-keyword">if</span> (!dir.exists()) &#123;<br>            <span class="hljs-comment">//ç›®å½•ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º</span><br>            dir.mkdirs();<br>        &#125;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            file.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(dir.getAbsolutePath() +File.separator+ fileName));<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> R.success(fileName);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–‡ä»¶ä¸‹è½½</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name     java.lang.String</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response javax.servlet.http.HttpServletResponse</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> å¸­å­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(&quot;/download&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">download</span><span class="hljs-params">(String name, HttpServletResponse response)</span> &#123;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è¾“å…¥æµï¼Œé€šè¿‡è¾“å…¥æµè¯»å–æ–‡ä»¶å†…å®¹</span><br>            <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath +File.separator+  name));<br><br>            <span class="hljs-comment">//è¾“å‡ºæµï¼Œé€šè¿‡è¾“å‡ºæµå°†æ–‡ä»¶å†™å›æµè§ˆå™¨</span><br>            <span class="hljs-type">ServletOutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> response.getOutputStream();<br><br>            response.setContentType(<span class="hljs-string">&quot;image/jpeg&quot;</span>);<br><br>            <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-keyword">while</span> ((len = fileInputStream.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                outputStream.write(bytes, <span class="hljs-number">0</span>, len);<br>                outputStream.flush();<br>            &#125;<br><br>            <span class="hljs-comment">//å…³é—­èµ„æº</span><br>            outputStream.close();<br>            fileInputStream.close();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ•ˆæœ</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125185348635.png" alt="image-20221125185348635" /></p></li></ol><blockquote><p>SpringBootæ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ€ä¹ˆä½¿ç”¨å°±ä¸è¯´äº†ï¼Œè¯´è¯´æ€ä¹ˆä½¿ç”¨<strong>ç›¸å¯¹è·¯å¾„</strong>æŠŠæ–‡ä»¶å­˜å‚¨åˆ°é¡¹ç›®æ ¹ç›®å½•å»</p></blockquote><ol start="4"><li><p>ä»£ç åˆ†æ</p><ol><li><p>æˆ‘ä»¬ä½¿ç”¨<code>MultipartFileçš„transferTo()</code>è¿›è¡Œæ–‡ä»¶æœ¬åœ°æŒä¹…åŒ–</p></li><li><p>ä½†æ˜¯<code>MultipartFileçš„transferTo()</code>æ–¹æ³•ä¼šç›‘æµ‹ä¼ å…¥å…¶ä¸­çš„Fileå¯¹è±¡çš„è·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ï¼Œå¦‚æœä¸æ˜¯ç»å¯¹è·¯å¾„ï¼Œ<mark>ä¼šè‡ªåŠ¨æ‹¼æ¥applicationé‡Œè®¾ç½®çš„è·¯å¾„ å’Œ \work\Tomcat\localhost\ROOT</mark>ã€‚</p><p>æ‰€ä»¥å‡ºç°</p><p>java.io.FileNotFoundException: C:\Users\XXX\AppData\Local\Temp\tomcat.8080.6103676472064121995\work\Tomcat\localhost\ROOT\src\main\resources\takeOutFiled10b193c1-c840-4570-88c3-874ef18e73b5.png (ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚)</p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125190148520.png" alt="image-20221125190148520" style="zoom: 100%;" /></li><li><p>åªè¦ç»™å®ƒä¸€ä¸ªç»å¯¹è·¯å¾„å°±å¯ä»¥äº†</p></li><li><p><code>file.transferTo(new File(dir.getAbsolutePath() +File.separator+ fileName));</code></p><p><code>dir.getAbsolutePath()</code> å¾—åˆ°å‚¨å­˜æ–‡ä»¶ç›®å½•çš„ç»å¯¹è·¯å¾„</p><p><code>File.separator</code> å°±æ˜¯   <strong>/</strong></p><p><code>fileName</code> ä½ è¦å­˜å‚¨çš„æ–‡ä»¶å</p></li></ol></li></ol><p>å…·ä½“ä½ç½®åœ¨<code>com.xyy.controller.CommonController (upLoadFile)</code></p><h3 id="ä¸‹è½½é€»è¾‘"><a class="markdownIt-Anchor" href="#ä¸‹è½½é€»è¾‘"></a> ä¸‹è½½é€»è¾‘</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9748d9f84a224b329f2035afcf31091d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å›¾ç‰‡å›æ˜¾åŠŸèƒ½<br />ç”¨åˆ°äº†è¾“å…¥è¾“å‡ºæµ<br />ä½ç½®ï¼š<code>com.xyy.controller.CommonController (fileDownload)</code></p><h1 id="èœå“ç®¡ç†é¡µé¢"><a class="markdownIt-Anchor" href="#èœå“ç®¡ç†é¡µé¢"></a> èœå“ç®¡ç†é¡µé¢</h1><h2 id="æ–°å¢èœå“"><a class="markdownIt-Anchor" href="#æ–°å¢èœå“"></a> æ–°å¢èœå“</h2><h3 id="éœ€æ±‚åˆ†æ"><a class="markdownIt-Anchor" href="#éœ€æ±‚åˆ†æ"></a> éœ€æ±‚åˆ†æ</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/307c50613cf9427eb8af9ca1edf35f10.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ¶‰åŠè¡¨ä¸ºdishå’Œdish_flavor<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2bee4656682c429093d0b487f7453028.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¼€å‘é€»è¾‘<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0c69f61ce4e84e87b2f70cef256a597c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="æ–°å¢å®ç°"><a class="markdownIt-Anchor" href="#æ–°å¢å®ç°"></a> æ–°å¢å®ç°</h3><p>ç”±äºæ˜¯å¤šè¡¨çš„æ“ä½œï¼ŒMPç›´æ¥å¹²è‚¯å®šä¸è¡Œï¼Œæ‰€ä»¥å°±æŠŠserviceå±‚æŠ½ç¦»å‡ºæ¥è¿›è¡Œå¤„ç†</p><p>è¿˜æœ‰ï¼Œå› ä¸ºæ¶‰åŠä¸¤å¼ è¡¨ï¼Œè¿™é‡Œè¿˜è¦åŠ å…¥äº‹åŠ¡è¿›è¡Œæ§åˆ¶ï¼Œé˜²æ­¢å¤šè¡¨æ“ä½œå´©æºƒ</p><p>â€‹    å¤šè¡¨æ“ä½œåªèƒ½ä¸€ä¸ªä¸€ä¸ªæ¥ï¼ŒMPæ²¡æœ‰åŠæ³•ä¸€æ¬¡æ€§æ“ä½œå¤šå¼ è¡¨<br />â€‹    å› ä¸ºæ¶‰åŠåˆ°å¤šè¡¨çš„é—®é¢˜ï¼Œæ‰€ä»¥è¿˜è¦åŠ å…¥æ³¨è§£æ¥å¤„ç†äº‹åŠ¡<br />â€‹    @Transactional å¼€å¯äº‹åŠ¡<br />â€‹    @EnableTransactionManagement åœ¨å¯åŠ¨ç±»åŠ å…¥ï¼Œæ”¯æŒäº‹åŠ¡å¼€å¯</p><p>Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (addDish)</code><br />Serviceä½ç½®ï¼š<code>com.xyy.service.DishService</code><br />ServiceImplä½ç½®ï¼š<code>com.xyy.service.impl.DishServiceImpl (addDishWithFlavor)</code></p><h3 id="æ–°å¢èœå“ä¹‹è·å–èœå“ç§ç±»"><a class="markdownIt-Anchor" href="#æ–°å¢èœå“ä¹‹è·å–èœå“ç§ç±»"></a> æ–°å¢èœå“ä¹‹è·å–èœå“ç§ç±»</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/260620e272564731a10cf74b24d47b95.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä»å‰ç«¯æ¥æ”¶ä¸€ä¸ªtype=1çš„æ ‡æ³¨ï¼Œç›®çš„æ˜¯åœ¨åˆ†ç±»è¡¨ä¸­ï¼Œèœå“åˆ†ç±»æ˜¯1ï¼Œå¥—é¤åˆ†ç±»æ˜¯2ï¼ŒæŠŠäºŒè€…åŒºåˆ†å¼€ï¼Œè·å–æ‰€æœ‰çš„èœå“ç±»å‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c139415e958e4a4d81a9687d3f04a524.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä½ç½®ï¼š<code>com.xyy.controller.CategoryController ï¼ˆlistCategoryï¼‰</code></p><h3 id="èœå“åˆ†é¡µ"><a class="markdownIt-Anchor" href="#èœå“åˆ†é¡µ"></a> èœå“åˆ†é¡µ</h3><p>é¡ºæ‰‹æŠŠèœå“åˆ†é¡µä¹Ÿåšäº†ï¼Œä¸å†™å¤ªå¤šäº†ï¼Œä½ç½®åœ¨ï¼š<code>com.xyy.controller.CategoryController ï¼ˆdishPageï¼‰</code><br />è®°å½•ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œå¦‚æœè¯´åç«¯æ²¡æœ‰ç±»å’Œå‰ç«¯è¦çš„æ•°æ®å¯¹åº”ï¼Œé‚£ä¹ˆè‡ªå·±å°±å¯ä»¥å°è£…ä¸€ä¸ªç±»æ¥å¯¹å‰ç«¯ç‰¹æ®Šéœ€è¦çš„æ•°æ®è¿›è¡Œå°è£…</p><h2 id="dtoå¯¹è±¡"><a class="markdownIt-Anchor" href="#dtoå¯¹è±¡"></a> DTOå¯¹è±¡</h2><p>è¿™ä¸ªç±»å¯ä»¥æ˜¯å¯¹ä¸€äº›å®ä½“ç±»è¿›è¡Œæ‰©å±•ï¼Œç»§æ‰¿äºæŸä¸ªçˆ¶ç±»ï¼Œå†æ·»åŠ ä¸€äº›å†…å®¹<br />æ¯”å¦‚Dishå’ŒDishDto<br />DishDtoå°±ç»§æ‰¿äºDishç±»ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäº†æ‰©å±•<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c20e2473b88b49f684764ddab99f9cfb.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a365d359125f498799f4b96a8e43fd0a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="æ›´æ–°èœå“ä¿¡æ¯"><a class="markdownIt-Anchor" href="#æ›´æ–°èœå“ä¿¡æ¯"></a> æ›´æ–°èœå“ä¿¡æ¯</h2><p>å°±æ˜¯ä¸ªupdate<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e48ab4407978498d8321be25c5da40a0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />é€»è¾‘<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/31c8e202fea94bcf8a775644996a6cc5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ³¨æ„ï¼Œè¿™é‡Œå›æ˜¾æ•°æ®æ˜¯è¦ç”¨DishDtoï¼Œå› ä¸ºå‰ç«¯è¦æ˜¾ç¤ºå£å‘³ç­‰ä¿¡æ¯ï¼Œè¿™é‡Œå¦‚æœç”¨Dishæ˜¯æ— æ³•å®Œç¾æ˜¾ç¤ºçš„ï¼Œæ‰€ä»¥è¦ç”¨DishDto</p><h3 id="å›æ˜¾å¡«å……æŸ¥è¯¢"><a class="markdownIt-Anchor" href="#å›æ˜¾å¡«å……æŸ¥è¯¢"></a> å›æ˜¾å¡«å……æŸ¥è¯¢</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7fd4eb56b06542b490e056bc8989a12c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿™æ˜¯ä¸ªå¤šè¡¨è”æŸ¥ï¼Œç”¨MPè‚¯å®šä¸è¡Œï¼Œå¾—è‡ªå·±å†™<br />Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (updateDish)</code><br />Serviceä½ç½®ï¼š<code>com.xyy.service.DishService</code><br />ServiceImplä½ç½®ï¼š<code>com.xyy.service.impl.DishServiceImpl</code></p><h3 id="æ›´æ–°å®ç°"><a class="markdownIt-Anchor" href="#æ›´æ–°å®ç°"></a> æ›´æ–°å®ç°</h3><p>å®é™…ä¸Šå°±æ˜¯ä¸¤ä¸ªè¡¨è”åŠ¨æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œæ‰€ä»¥MPç›´æ¥æ“ä½œæ˜¯ä¸å¯ä»¥çš„ï¼Œæ‰€ä»¥è¦åœ¨Serviceå±‚è‡ªå·±å†å°è£…ä¸€ä¸ªåˆ é™¤æ–¹æ³•ï¼Œç»™Controllerå±‚è°ƒç”¨åˆ é™¤å°±è¡Œ<br />å¯¹äºDishå¯¹è±¡å¯ä»¥ç›´æ¥è¿›è¡Œæ›´æ–°ï¼Œå› ä¸ºDishDtoæ˜¯Dishçš„å­ç±»<br />å› æ­¤å¯ä»¥è°ƒç”¨DishServiceçš„updateæ–¹æ³•ä¼ å…¥DishDtoå¯¹è±¡ï¼Œæ¥å®ç°Dishçš„æ›´æ–°<br />Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (updateDish)</code><br />ç¡®å®å’Œä¸Šé¢é‚£ä¸ªä¸€æ ·ï¼Œå› ä¸ºè¯·æ±‚æ–¹å¼ä¸ä¸€æ ·<br />Serviceä½ç½®ï¼š<code>com.xyy.service.DishService</code><br />ServiceImplä½ç½®ï¼š<code>com.xyy.service.impl.DishServiceImpl (updateDishWithFlavor)</code></p><h3 id="å…¶ä»–åŠŸèƒ½"><a class="markdownIt-Anchor" href="#å…¶ä»–åŠŸèƒ½"></a> å…¶ä»–åŠŸèƒ½</h3><p>å®Œæˆä¸€äº›å°åŠŸèƒ½çš„å¼€å‘<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b4b59c021748427c87fa6edc48619920.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h4 id="åœå”®åŠŸèƒ½"><a class="markdownIt-Anchor" href="#åœå”®åŠŸèƒ½"></a> åœå”®åŠŸèƒ½</h4><p>å°±æ˜¯æŠŠæ•°æ®åº“çš„statuså€¼æ›´æ–°ä¸€ä¸‹ï¼Œä¸¤ä¸ªè·¯å¾„ï¼Œä¸€ä¸ªå¯å”®ï¼Œä¸€ä¸ªåœå”®<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f1da740301ed403399148b6d9afb31f5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åœå”®è¯·æ±‚è·¯å¾„<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2969987e765b4a8e8b4fd71b772bcfa0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¦‚æœçŠ¶æ€ä¸ä¸€æ ·äº†ï¼Œä¼šä»åœå”®å˜æˆå¯å”®ï¼ŒåŒæ—¶å¯¹åº”çš„è¯·æ±‚è·¯å¾„ä¹Ÿä¸ä¸€æ ·<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/335331ee558541e089128ff2b36faa6e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f3b5006617a144c2a50cf48e91daf7db.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (updateStatusStop)</code>åœæ­¢<br />Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (updateStatusStart)</code>å¯åŠ¨</p><h4 id="åˆ é™¤åŠŸèƒ½"><a class="markdownIt-Anchor" href="#åˆ é™¤åŠŸèƒ½"></a> åˆ é™¤åŠŸèƒ½</h4><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2e291e2e9a5941dbafb90caed4c894a2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />èœå“åˆ é™¤åŠŸèƒ½<br />å®Œæˆé€»è¾‘åˆ é™¤ï¼Œä¸æ˜¯çœŸåˆ <br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2b84f5bc3cd54e1997a87f5768f0b48a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä½ç½®ï¼š<br />Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (deleteDish)</code>åœæ­¢</p><h1 id="å¥—é¤é¡µé¢"><a class="markdownIt-Anchor" href="#å¥—é¤é¡µé¢"></a> å¥—é¤é¡µé¢</h1><p>å®é™…ä¸Šå°±æ˜¯ä¸€ç»„èœå“çš„é›†åˆ</p><h2 id="æ–°å¢å¥—é¤æ¦‚è¿°"><a class="markdownIt-Anchor" href="#æ–°å¢å¥—é¤æ¦‚è¿°"></a> æ–°å¢å¥—é¤æ¦‚è¿°</h2><p>æ¶‰åŠåˆ°çš„æ•°æ®åº“<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/490ee26fc870424092c6f06b3b637de2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6ab0bc680c2d40d48da71becdf139330.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/458f7e16da474362ad0f5b49656bdc06.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¼å…¥SetmealDto<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9f5bd7dfcecc4c5a95d3ce1a48358980.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0bb88c91dfba4c759e8cca3eb574682e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="æ–°å¢å¥—é¤ä¹‹èœå“åˆ—è¡¨"><a class="markdownIt-Anchor" href="#æ–°å¢å¥—é¤ä¹‹èœå“åˆ—è¡¨"></a> æ–°å¢å¥—é¤ä¹‹èœå“åˆ—è¡¨</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7b242922f194454cbce663c939c19fe8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/fd6a01bbfbee43a1b7ff6b420815ef7f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />Controllerä½ç½®ï¼š<code>com.xyy.controller.DishController (listCategory)</code></p><h2 id="æ–°å¢å¥—é¤å®ç°"><a class="markdownIt-Anchor" href="#æ–°å¢å¥—é¤å®ç°"></a> æ–°å¢å¥—é¤å®ç°</h2><p>å’Œæ–°å¢èœå“å·®ä¸å¤šï¼Œè¿™é‡Œä¹Ÿæ˜¯å¤šè¡¨çš„æ“ä½œ<br />Controllerä½ç½®ï¼š<code>com.xyy.controller.SetmealController (saveSetmeal)</code><br />Serviceä½ç½®ï¼š<code>com.xyy.service.SetmealService</code><br />ServiceImplä½ç½®ï¼š<code>com.xyy.service.impl.SetmealServiceImpl(saveWithDish)</code></p><h2 id="å¥—é¤åˆ†é¡µ"><a class="markdownIt-Anchor" href="#å¥—é¤åˆ†é¡µ"></a> å¥—é¤åˆ†é¡µ</h2><p>è¿™é‡Œçš„å¥—é¤åˆ†é¡µå’Œä»¥å¾€ä¸åŒï¼Œè®¾è®¡åˆ°äº†å¤šè¡¨å†…å®¹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/28b34889b2e4467c9e3e4a79aa3d2d18.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¥—é¤åˆ†é¡µControllerä½ç½®ï¼š<code>com.xyy.controller.SetmealController.pageList</code><br />å¥—é¤Mapperæ¥å£ä½ç½®ï¼š<code>com.xyy.mapper.SetmealMapper</code><br />Mapperæ–‡ä»¶ä½ç½®ï¼š<code>resource.mapper.SetmealMapper</code><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a02a17ef6b8648a59e2b90ef9ec70a3f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="æ›´æ–°å¥—é¤"><a class="markdownIt-Anchor" href="#æ›´æ–°å¥—é¤"></a> æ›´æ–°å¥—é¤</h2><p>æ·»åŠ å¥—é¤å’Œæ›´æ–°å¥—é¤æ˜¯å‡ ä¹å®Œå…¨ä¸€è‡´çš„ï¼Œå­—æ®µå·´æ‹‰å·´æ‹‰çš„éƒ½ä¸€æ ·<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5bf7c40f7b9147b7a093da18ae860952.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä½†æ˜¯æ³¨æ„ï¼Œä¿®æ”¹å¥—é¤çš„è¯ï¼Œéœ€è¦å…ˆå¯¹èœå“é¡µé¢è¿›è¡Œå¡«å……ï¼Œè¿™ä¸€é¡µéƒ½æ˜¯éœ€è¦å¡«å……æ»¡è¦ä¿®æ”¹çš„èœå“ä¿¡æ¯çš„ã€‚<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/07c01da9636d4643acea8689f2579f82.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å…ˆå‘è¯·æ±‚ï¼Œä¸€çœ‹å°±æ˜¯Restfulé£æ ¼è¯·æ±‚<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cb797ab490434dd2ad5de3e282e3f4c4.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è·å–å¥—é¤Controllerä½ç½®ï¼š<code>com.xyy.controller.SetmealController.getSetmal</code></p><h2 id="æ›´æ–°é”€å”®çŠ¶æ€"><a class="markdownIt-Anchor" href="#æ›´æ–°é”€å”®çŠ¶æ€"></a> æ›´æ–°é”€å”®çŠ¶æ€</h2><p><img src="https://img-blog.csdnimg.cn/53db02cdb6fd4574b2471bdaf7825d78.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://img-blog.csdnimg.cn/f2158ec7d2924b2eb17e2ef7b92fc6f3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å’Œä¹‹å‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘å¾ˆåƒï¼Œä¸æƒ³å¤šèµ˜è¿°äº†ï¼Œç›´æ¥æ”¾æ¥å£ä½ç½®<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bb10511b3fd14b398095865065700680.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>Controllerä½ç½®ï¼š<code>com.xyy.controller.SetmealController (startSale/stopSale)</code></p><h2 id="åˆ é™¤å¥—é¤"><a class="markdownIt-Anchor" href="#åˆ é™¤å¥—é¤"></a> åˆ é™¤å¥—é¤</h2><p>å¯ä»¥å•ç‹¬åˆ ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡åˆ ï¼Œæ¥å£æ˜¯ä¸‡é‡‘æ²¹ï¼Œéƒ½èƒ½æ¥ï¼Œä¸»è¦çœ‹ä¼ æ¥çš„æ•°æ®æ˜¯å‡ ä¸ª<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/734b880bdf304e70bb9376ecebcd3d15.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/730459957d464af3827df49084205353.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ¥å£<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/678ea2f5eb194625a05567061bba5ad0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />== å¤šè¡¨åˆ é™¤ï¼Œåœ¨Controllerç›´æ¥å®ç°ä¸å¤ªç°å®ï¼Œæ‰€ä»¥è¦åœ¨ServiceæŠŠä¸šåŠ¡å†™å¥½==<br />Controllerä½ç½®ï¼š<code>com.xyy.controller.SetmealController (deleteSetmeal)</code><br />Serviceä½ç½®ï¼š<code>com.xyy.service.SetmealService</code><br />ServiceImplä½ç½®ï¼š<code>com.xyy.service.impl.SetmealServiceImpl(removeWithDish)</code><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bb4351bafe314861b6c775620f39641e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="å‰å°å¼€å‘æ‰‹æœºç«¯"><a class="markdownIt-Anchor" href="#å‰å°å¼€å‘æ‰‹æœºç«¯"></a> å‰å°å¼€å‘ï¼ˆæ‰‹æœºç«¯ï¼‰</h1><h1 id="è´¦æˆ·ç™»é™†"><a class="markdownIt-Anchor" href="#è´¦æˆ·ç™»é™†"></a> è´¦æˆ·ç™»é™†</h1><h2 id="çŸ­ä¿¡å‘é€"><a class="markdownIt-Anchor" href="#çŸ­ä¿¡å‘é€"></a> çŸ­ä¿¡å‘é€</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/6db71e2024264927a59a3ae59bca5890.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/56cadd94e4de4536aec20ff921842039.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><a href="https://blog.csdn.net/qq_55106682/article/details/121920826">é˜¿é‡Œäº‘çŸ­ä¿¡ä¸šåŠ¡æ•™ç¨‹</a></p><h3 id="ä»£ç å®ç°"><a class="markdownIt-Anchor" href="#ä»£ç å®ç°"></a> ä»£ç å®ç°</h3><p><a href="https://help.aliyun.com/document_detail/112148.html">å®˜æ–¹æ–‡æ¡£åœ°å€</a><br />å¯¼å…¥Maven</p>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.5.16<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>aliyun-java-sdk-dysmsapi<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ca8d01eaf61a485a9e0edae0c0307c3a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¼å…¥çŸ­ä¿¡ç™»é™†çš„å·¥å…·ç±»ï¼ŒæŠŠACCESSKeyIDå’ŒSecretæ›´æ¢åˆ°ä½å°±è¡Œ<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/fab29b651545452b8aaf515717a3244d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="éªŒè¯ç å‘é€"><a class="markdownIt-Anchor" href="#éªŒè¯ç å‘é€"></a> éªŒè¯ç å‘é€</h2><p>æ•°æ®æ¨¡å‹userè¡¨ï¼Œæ‰‹æœºéªŒè¯ç ä¸“ç”¨çš„è¡¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/582420e32f9449699765ad9db8f665bc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¼€å‘æµç¨‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/03e0ad86bbda4229b8985e6644e2e5f7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¿®æ”¹æ‹¦æˆªå™¨ï¼Œæ”¾è¡Œæ“ä½œ<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2c136ec0905248328f25be7e137b2da0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://img-blog.csdnimg.cn/15b21dad09be44bfa030984f5f4c1731.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />controllerä½ç½®ï¼š<code>com.xyy.controller.UserController ï¼ˆsendMsgï¼‰</code><br />å‘é€å®Œè¿˜éœ€è¦éªŒè¯ï¼ŒéªŒè¯å°±æ˜¯å¦ä¸€ä¸ªloginäº†</p><h2 id="ç”¨æˆ·ç™»é™†"><a class="markdownIt-Anchor" href="#ç”¨æˆ·ç™»é™†"></a> ç”¨æˆ·ç™»é™†</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/16f3f2b8f68948b0b4f2e01133adc6ce.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />controllerä½ç½®ï¼š<code>com.xyy.controller.UserController ï¼ˆloginï¼‰</code><br />è¿™é‡Œç™»é™†è¿˜æ¶‰åŠåˆ°è¿‡æ»¤å™¨æ”¾è¡Œçš„åŠŸèƒ½ï¼Œä¸è¦å¿˜è®°äº†ï¼ŒæŠŠç”¨æˆ·idå­˜å…¥sessionï¼Œè¿‡æ»¤å™¨ä¼šè¿›è¡ŒéªŒè¯<br />è¿‡æ»¤å™¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/16d1b1cf6fa54b408d9b5bcd495962f5.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />controller<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7da50768c0b043f3a9a5f3dbce6915c1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="å‰å°é¡µé¢"><a class="markdownIt-Anchor" href="#å‰å°é¡µé¢"></a> å‰å°é¡µé¢</h1><h2 id="å¯¼å…¥ç”¨æˆ·åœ°å€ç°¿"><a class="markdownIt-Anchor" href="#å¯¼å…¥ç”¨æˆ·åœ°å€ç°¿"></a> å¯¼å…¥ç”¨æˆ·åœ°å€ç°¿</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/732d6d4d8bba4911b903055d7a2003cf.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åœ°å€è¡¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e45d3cd4c91e4619a21a3342d4683508.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™é‡Œç›´æ¥å¯¼å…¥ç°æˆçš„AddressBookControllerï¼Œæ²¡æœ‰è‡ªå·±å†™</p><p>â€‹    com.xyy.controller.AddressBookController</p><h2 id="èœå“å±•ç¤º"><a class="markdownIt-Anchor" href="#èœå“å±•ç¤º"></a> èœå“å±•ç¤º</h2><p>é€»è¾‘æ¢³ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/db2983fb1a8a46bc85f4836dae41a24c.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c7e3567ea3f94b718e33ba680e573121.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¿®æ”¹DishControllerçš„listæ–¹æ³•ï¼Œæ¥ç¬¦åˆå‰å°è¯·æ±‚çš„è¦æ±‚<br />controllerä½ç½®ï¼š<code>com.xyy.controller.DishController ï¼ˆlistCategoryï¼‰</code><br />å¥—é¤å†…èœå“Controllerï¼š<code>com.xyy.controller.SetmealController ï¼ˆlistï¼‰</code></p><h2 id="è´­ç‰©è½¦"><a class="markdownIt-Anchor" href="#è´­ç‰©è½¦"></a> è´­ç‰©è½¦</h2><p>æŠŠèœå“åŠ å…¥è´­ç‰©è½¦<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/159ef74addd64f60bfa9d9a44bf22d64.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3b7b1d5d90d949cb94c6c4f77a2f9d96.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />é€»è¾‘æ¢³ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/48b1358d65a8418689ada067bc6fbdd2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ³¨æ„ï¼Œè¿™é‡Œä¸éœ€è¦åç«¯å»ç®¡æ€»ä»·çš„è®¡ç®—ï¼Œå°±æ˜¯å•ä»·*æ•°é‡çš„è¿™ä¸ªæ“ä½œï¼Œä¸æ˜¯åç«¯çš„å†…å®¹ã€‚å‰ç«¯åœ¨å±•ç¤ºçš„æ—¶å€™è‡ªå·±å°±è®¡ç®—äº†ã€‚<br />ä½ç½®ï¼š<code>com.xyy.controller.ShoppingCartController ï¼ˆaddï¼‰</code></p><h2 id="ä¸‹å•"><a class="markdownIt-Anchor" href="#ä¸‹å•"></a> ä¸‹å•</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/37b2f6bb4b2e4d82942e38ceea4bbc78.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¹åº”çš„ä¸¤ä¸ªè¡¨ï¼Œä¸€ä¸ªæ˜¯ordersè¡¨ï¼Œå¦ä¸€ä¸ªæ˜¯orders_detailè¡¨</p><p>ordersè¡¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/37f1f4d9aec2474ab3578ad01062abf9.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />orders_detailè¡¨<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d07d325b341841e787117d1f12d727e0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />äº¤äº’æµç¨‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/04bfdd8093cb41f7956332bb1561e12f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¸šåŠ¡æ¯”è¾ƒå¤æ‚ï¼Œåœ¨Serviceé‡Œå†™çš„<code>com.xyy.service.impl.OrdersServiceImpl</code></p><p>è‡³æ­¤åŸºç¡€éƒ¨åˆ†å®Œæˆï¼Œå¼€å§‹å¯¹é¡¹ç›®æ€§èƒ½è¿›è¡Œä¼˜åŒ–</p><h1 id="å°çŸ¥è¯†ç‚¹æ€»ç»“"><a class="markdownIt-Anchor" href="#å°çŸ¥è¯†ç‚¹æ€»ç»“"></a> å°çŸ¥è¯†ç‚¹æ€»ç»“</h1><h3 id="requestbodyçš„ä½¿ç”¨"><a class="markdownIt-Anchor" href="#requestbodyçš„ä½¿ç”¨"></a> @RequestBodyçš„ä½¿ç”¨</h3><p>åªæœ‰ä¼ æ¥çš„å‚æ•°æ˜¯Jsonæ‰èƒ½ç”¨RequestBodyæ¥æ”¶ï¼Œå¦‚æœä¸æ˜¯Jsonçš„æƒ…å†µï¼ˆæ¯”å¦‚é‚£ç§ï¼Ÿkey=value&amp;key=valueï¼‰æ˜¯ä¸å¯ä»¥ç”¨çš„ï¼Œä¼š400é”™è¯¯<br /><a href="https://blog.csdn.net/weixin_44062380/article/details/116103642">å…³äºRequestBodyä½•æ—¶ä½¿ç”¨</a></p><h1 id="ç¼“å­˜ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#ç¼“å­˜ä¼˜åŒ–"></a> ç¼“å­˜ä¼˜åŒ–</h1><p>åŸºäºRedisè¿›è¡Œç¼“å­˜ä¼˜åŒ–<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/017c0aab4eb345d68ba9a5a309e78c7a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="ç¯å¢ƒæ­å»º"><a class="markdownIt-Anchor" href="#ç¯å¢ƒæ­å»º"></a> ç¯å¢ƒæ­å»º</h2><h3 id="redisè¿›è¡Œé…ç½®"><a class="markdownIt-Anchor" href="#redisè¿›è¡Œé…ç½®"></a> Redisè¿›è¡Œé…ç½®</h3><p>åŠ å…¥Pomæ–‡ä»¶</p>   <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--å¯¼å…¥Redisä¾èµ–--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>ymlä¸­åŠ å…¥é…ç½®<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a737f91d8934469ca405f2acf279272d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="çŸ­ä¿¡éªŒè¯ç -ç™»é™†ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#çŸ­ä¿¡éªŒè¯ç -ç™»é™†ä¼˜åŒ–"></a> çŸ­ä¿¡éªŒè¯ç ã€ç™»é™†ä¼˜åŒ–</h2><p>ç»™éªŒè¯ç åŠ å…¥æœ‰æ•ˆæ—¶é—´çš„éªŒè¯ï¼Œè®¾ç½®å¥½çŸ­ä¿¡éªŒè¯ç çš„æœ‰æ•ˆæ—¶é—´<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dd9f7fcb4dd948b380008dd1d769e535.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¦‚æœç™»é™†æˆåŠŸï¼Œå°±è‡ªåŠ¨åˆ é™¤ç¼“å­˜ä¸­çš„éªŒè¯ç <br />ä¼˜åŒ–ä½ç½®ï¼šcom.xyy.controller.UserController sendMsgå’Œlogin<br />æ³¨å…¥RedisTemplete<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e881a9dc80a740aab43c8bc30f45a91f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />é’ˆå¯¹éªŒè¯ç è¿›è¡Œä¼˜åŒ–<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/4139a4aebf384f8e958f0587c7fe4acb.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />é’ˆå¯¹ç™»å½•åè¿›è¡Œä¼˜åŒ–<br />loginæ–¹æ³•ä¸­<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ccc12a60c924407bb8c859aa66b61c38.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/24b7a6e20b7840e1a868dea4be2f0787.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™é‡Œè¿‡æ»¤å™¨ä¹Ÿè¦æ”¹ï¼Œå› ä¸ºç™»é™†çš„idæ•°æ®ç”±sessionå˜æˆäº†rediså­˜æ”¾ï¼Œæ‰€ä»¥è¦æŠŠè¿‡æ»¤å™¨çš„ç›¸å…³éƒ¨åˆ†è¿›è¡Œæ”¹é€ </p><p>â€‹<br />â€‹    com.xyy.filter.LoginCheckFilter</p><p>åŒæ ·è¦å…ˆæ³¨å…¥RedisTemplate<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bb4030b56bd64c6dbdc5633c67e4bbfb.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="ç¼“å­˜å‰å°èœå“æ•°æ®"><a class="markdownIt-Anchor" href="#ç¼“å­˜å‰å°èœå“æ•°æ®"></a> ç¼“å­˜å‰å°èœå“æ•°æ®</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/32925b5c084942ecb5f5f9aa153a6d96.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ç¼“å­˜æ€è·¯ï¼Œè¦ä¿è¯ç¼“å­˜æ•°æ®åº“å’ŒDBMSå†…çš„æ•°æ®ä¿æŒåŒæ­¥ï¼Œé¿å…è¯»åˆ°è„æ•°æ®ï¼ˆæ²¡æ›´æ–°çš„æ•°æ®ï¼‰<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ed16b6270e734adaaf78058373894604.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¹DishControllerè¿›è¡Œä¼˜åŒ–ï¼ŒåŠ å…¥äº†ç¼“å­˜<br />å†æ¬¡è®¿é—®å¯ä»¥å‘ç°ï¼Œå¦‚æœå·²ç»ç¼“å­˜è¿‡äº†å½“å‰çš„èœå“åˆ†ç±»ï¼Œå°±ä¸ä¼šå†æŸ¥æ•°æ®åº“äº†</p><h3 id="æ›´æ–°èœå“åŒæ—¶æ›´æ–°ç¼“å­˜"><a class="markdownIt-Anchor" href="#æ›´æ–°èœå“åŒæ—¶æ›´æ–°ç¼“å­˜"></a> æ›´æ–°èœå“åŒæ—¶æ›´æ–°ç¼“å­˜</h3><p>ä¿è¯å°‘å‡ºç°è„æ•°æ®ï¼Œæ‰€ä»¥åŠ å…¥æ¸…ç†ç¼“å­˜ï¼Œä¸åŠæ—¶æ¸…ç†çš„è¯ï¼Œæ–°æ•°æ®ä¿å­˜ä¸Šæ¥ï¼Œåˆ—è¡¨æ•°æ®åº“æ— æ³•åŒæ­¥æ›´æ–°ã€‚å°±ä¼šå‡ºç°é—®é¢˜ã€‚<br />è¿™é‡Œæ¸…ç†ç²¾ç¡®æ•°æ®ã€‚å¤§é¢ç§¯æ¸…ç¼“å­˜ä¹Ÿæ˜¯æ¯”è¾ƒè´¹æ€§èƒ½çš„<br />è¿™ç§å°±æ˜¯å…¨æ¸…ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/60b7f47bf7d24be0bec55a2309e1f227.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™ç§æ˜¯ç²¾ç¡®æ¸…ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/958c3fd2cb824012af93adfd54d4ea24.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="springcache"><a class="markdownIt-Anchor" href="#springcache"></a> SpringCache</h2><h3 id="ç®€ä»‹"><a class="markdownIt-Anchor" href="#ç®€ä»‹"></a> ç®€ä»‹</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a59b7272acce47e98a6bd7505772e071.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="springcacheå¸¸ç”¨æ³¨è§£åŠåŠŸèƒ½"><a class="markdownIt-Anchor" href="#springcacheå¸¸ç”¨æ³¨è§£åŠåŠŸèƒ½"></a> SpringCacheå¸¸ç”¨æ³¨è§£åŠåŠŸèƒ½</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/768c769e2725422f88530feca96d70b8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="å¿«é€Ÿèµ·æ­¥"><a class="markdownIt-Anchor" href="#å¿«é€Ÿèµ·æ­¥"></a> å¿«é€Ÿèµ·æ­¥</h3><p>å¯åŠ¨ç±»ä¸Šè¦åŠ å…¥<code>@EnableCaching</code>æ³¨è§£ï¼Œå¯ç”¨ç¼“å­˜æ¡†æ¶<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d29b058bff0d4269aa35202a9e35143d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h4 id="cacheputæ³¨è§£"><a class="markdownIt-Anchor" href="#cacheputæ³¨è§£"></a> @CachePutæ³¨è§£</h4><p>ç¼“å­˜æ–¹æ³•è¿”å›å€¼ï¼Œç¼“å­˜ä¸€æ¡æˆ–è€…å¤šæ¡æ•°æ®<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0d18d4dcaad54cc7814e3fa1a82ed8c8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h4 id="cacheevictæ³¨è§£"><a class="markdownIt-Anchor" href="#cacheevictæ³¨è§£"></a> @CacheEvictæ³¨è§£</h4><p>åˆ é™¤ç¼“å­˜<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ae87712409804775b614bebb226e8896.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h4 id="cacheableæ³¨è§£"><a class="markdownIt-Anchor" href="#cacheableæ³¨è§£"></a> @Cacheableæ³¨è§£</h4><p>å…ˆçœ‹çœ‹Springæ˜¯å¦å·²ç»ç¼“å­˜äº†å½“å‰æ•°æ®ï¼Œå¦‚æœå·²ç»ç¼“å­˜é‚£ä¹ˆç›´æ¥è¿”å›ã€‚<br />å¦‚æœæ²¡æœ‰ç¼“å­˜å°±ç›´æ¥ç¼“å­˜åˆ°å†…å­˜é‡Œ<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c2e3aa34ea3442d894543d105ebb9b41.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¸€äº›ç‰¹æ®Šæƒ…å†µï¼Œconditionå±æ€§å’ŒUnlesså±æ€§<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ec27f124b8c047e08a8b95af613ed922.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>å‰é¢éƒ½æ˜¯ç”¨SpringCacheè‡ªå¸¦çš„ç¼“å­˜å®¹å™¨ï¼Œæ€§èƒ½è‚¯å®šæ¯”ä¸äº†Redis<br />æ‰€ä»¥ç°åœ¨å¼€å§‹å¼•å…¥Redisä½œä¸ºSpringCacheç¼“å­˜çš„äº§å“<br />åˆ‡æ¢ä¸ºRedisä½œä¸ºç¼“å­˜äº§å“</p><h4 id="springcache-redis"><a class="markdownIt-Anchor" href="#springcache-redis"></a> SpringCache-Redis</h4><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8dae4993b8494af598d870917e46ba56.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¼å…¥jaråŒ…<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/afdfe6133e254348a03303db222f1762.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æ³¨å…¥ç›¸å¯¹åº”çš„ç¼“å­˜äº§å“Managerå°±å¯ä»¥äº†ï¼Œè¿™é‡Œä»¥RedisManagerä¸ºä¾‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/69344c2b79044bb7a354d96cb148d495.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="åˆ©ç”¨springcache-redisæ¥ç¼“å­˜å¥—é¤æ•°æ®"><a class="markdownIt-Anchor" href="#åˆ©ç”¨springcache-redisæ¥ç¼“å­˜å¥—é¤æ•°æ®"></a> åˆ©ç”¨SpringCache-Redisæ¥ç¼“å­˜å¥—é¤æ•°æ®</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ffd8677c072d4697971562d1a96134bc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯åŠ¨ç±»ä¸Šè¦åŠ å…¥<code>@EnableCaching</code>æ³¨è§£ï¼Œå¯ç”¨ç¼“å­˜æ¡†æ¶<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d29b058bff0d4269aa35202a9e35143d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åŠ å…¥æ³¨è§£æ—¶çš„å‘<br />è¿™é‡Œç›¸å½“äºæ˜¯ä»Returnä¸­æ‹¿åˆ°Setmealä¸­çš„å±æ€§ï¼Œä½†æ˜¯Returnæ—¶çš„æ•°æ®æ˜¯Resultå°è£…çš„Setmealæ•°æ®ï¼Œæ˜¾ç„¶æ— æ³•å®Œæˆåºåˆ—åŒ–ï¼Œè¿™é‡Œä¹Ÿæ˜¯éœ€è¦å¯¹Resultç±»è¿›è¡Œåºåˆ—åŒ–çš„æ”¹é€ <br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f1309a8146514e37bb8078ef9b0cc7ca.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ç»§æ‰¿åºåˆ—åŒ–ç±»ï¼Œä½¿å…¶å¯ä»¥åºåˆ—åŒ–<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f25595d9069441d1adf22a469e842c09.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />=æ­¤æ—¶å°±å®Œæˆäº†ç¼“å­˜çš„ä¼˜åŒ–ï¼Œæ­¤æ—¶å¦‚æœç¼“å­˜ä¸­æœ‰å½“å‰valueåå­—çš„ç¼“å­˜ï¼Œå°±è‡ªåŠ¨è¿”å›ï¼Œå¦‚æœæ²¡æœ‰å°±æŸ¥è¯¢ä¸€ä¸‹ã€‚å½“å‰ç¼“å­˜è‡ªåŠ¨è¿‡æœŸçš„æ—¶é—´åœ¨ymlé‡Œé¢æœ‰è¯¦ç»†é…ç½®</p><p>ä¿å­˜å¥—é¤æ–¹æ³•ç¼“å­˜ä¼˜åŒ–<br />ä¸€ä¿å­˜å¥—é¤ï¼Œå¯¹åº”çš„ç¼“å­˜å°±å¾—åˆ é™¤ï¼Œå› ä¸ºæ•°æ®æ›´æ–°äº†è¦é‡æ–°è·å–<br />è¿˜æœ‰æ›´æ–°å¥—é¤ï¼Œç†ç”±åŒä¸Š<br />åˆ é™¤æ–¹æ³•è¦åŠ <br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0896df7570f843a19afb69975c4a328f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¿å­˜æ–¹æ³•ä¹Ÿè¦åŠ <br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/3206a5c50388428ea4809425d083bc72.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="æ•°æ®åº“ä¼˜åŒ–"><a class="markdownIt-Anchor" href="#æ•°æ®åº“ä¼˜åŒ–"></a> æ•°æ®åº“ä¼˜åŒ–</h1><h2 id="mysqlè¯»å†™åˆ†ç¦»"><a class="markdownIt-Anchor" href="#mysqlè¯»å†™åˆ†ç¦»"></a> MySQLè¯»å†™åˆ†ç¦»</h2><p>å°†å•ç‚¹æ•°æ®åº“æ”¹æˆåˆ†å¸ƒå¼çš„æ•°æ®åº“æœåŠ¡å™¨<br />ä¸»å†™ä»è¯»ã€‚<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/95b2e61b3c594adeac1732bcc6d719d6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/be32928754c8409785c39f857ee78381.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="mysqlä¸»ä»å¤åˆ¶æ­å»º"><a class="markdownIt-Anchor" href="#mysqlä¸»ä»å¤åˆ¶æ­å»º"></a> MySQLä¸»ä»å¤åˆ¶æ­å»º</h2><h3 id="ä¸»åº“è®¾ç½®"><a class="markdownIt-Anchor" href="#ä¸»åº“è®¾ç½®"></a> ä¸»åº“è®¾ç½®</h3><p>ä¸»ä»å¤åˆ¶æ¶æ„å›¾<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c72d940c5ff143ea834e53e05fb4db83.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä»¥ä¸Šå°±å¯ä»¥åšåˆ°ä¸»åº“æ•°æ®å’Œä»åº“æ•°æ®ä¿æŒåŒæ­¥</p><p>å¯¹ä¸»åº“è¿›è¡Œé…ç½®<br />Linuxæ”¹æ³•<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/71faca81d5524f7f81249639ec421334.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>â€‹    log-bin=mysql-bin #å¯åŠ¨äºŒè¿›åˆ¶<br />â€‹    server-id=100 #å”¯ä¸€id</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/07f64dd342a54a02bb9db8055535c02d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>windowsæ”¹æ³•</p><p>åœ¨mysqlå®‰è£…è·¯å¾„ä¸‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ddcf86e4bfc344c3874a528909018c4d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/d85b28a9fe5c4fdebb9bef5d96717860.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>ä¿®æ”¹å¥½äº†é‡å¯MySQL</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/841a999f27fe4910baf41c7ba6728ad7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />windowsç‰ˆæœ¬çš„é‡å¯æ•™ç¨‹åœ¨è¿™é‡Œ<br /><a href="https://blog.csdn.net/weixin_31444279/article/details/113223859">é‡å¯mysql</a></p><p>=======================================================</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/06539e930d864f08831019eed03e50c0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>â€‹<br />â€‹    GRANT REPLICATION SLAVE ON*.*toâ€™xiaomingâ€™@â€™%'identified by â€˜Root@123456â€™;</p><p>è¿™é‡Œæˆ‘æŠŠæœ¬åœ°çš„MySQLä½œä¸ºä¸»æœºï¼ŒæŠŠé˜¿é‡Œäº‘ä½œä¸ºä»æœº<br />è¿è¡Œä¸€ä¸‹æƒé™SQL<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/bbbc91e5cd674f60a0e3765c1e3a477b.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>æŸ¥çœ‹ä¸»æœºçŠ¶æ€<code>show master status;</code><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2c46f23083eb4d009cee681610f20467.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="ä»åº“è®¾ç½®"><a class="markdownIt-Anchor" href="#ä»åº“è®¾ç½®"></a> ä»åº“è®¾ç½®</h3><p>ä»åº“è¿™é‡Œé€‰æ‹©äº†é˜¿é‡Œäº‘<br />è¿˜æ˜¯å…ˆä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒåŠ å…¥ç«¯å£id<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/59c47eb35c4748948c96ac6bf1a0eb17.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b8ac44ce50c546b5bfeb507a0ab7ef4f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ç¬¬äºŒæ­¥è¿˜æ˜¯ä»åº“é‡å¯ï¼ˆLinuxä¸­ï¼‰<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5f1f8347417441ccb00d15c08ff5cb5a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ç¬¬ä¸‰éƒ¨ï¼Œè®¾ç½®è¿æ¥åˆ°ä¸»æœº<br />è¿è¡ŒSQL<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dda57b14af0845aca9056e4788a34fea.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>è¿è¡Œä¸€ä¸‹<br />å…·ä½“çš„å¯ä»¥å»ä»æœºç”¨show master statusæŸ¥çœ‹</p><p>â€‹<br />â€‹    change master to master_host=â€˜ipâ€™,master_user=â€˜xiaomingâ€™,master_password=â€˜Root@123456â€™,master_log_file=â€˜mysql-bin.eo0001â€™,master_log_pos=ä¸»æœºçš„position</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/1f88d8237d804843849777aa1c3e0f4e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e9080c8d03a24206a4a00b553b1c9ade.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è¿™é‡Œæˆ‘æ˜¯ä¸¤å°æœåŠ¡å™¨ï¼Œä¸€å°dockerå®‰è£…çš„mysqlï¼ˆä»æœºï¼‰<br />å¦ä¸€å°æ˜¯æ™®é€šå®‰è£…çš„mysqlåšä¸»æœºï¼Œé…ç½®è¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ï¼Œå‚è€ƒäº†ä¸‹é¢çš„é“¾æ¥<br /><a href="https://blog.csdn.net/xizhen2791/article/details/123660049">å‚è€ƒæ•™ç¨‹</a></p><p>ä¸€å®šä¸€å®šè®°ç€ä¸Šé¢ä»æœºè¿æ¥å‘½ä»¤è¿è¡ŒæˆåŠŸåè¦å¯åŠ¨ä»æœºä¹Ÿå°±æ˜¯</p><p>â€‹<br />â€‹    slave start</p><p>æœ€åè¿è¡Œ<code>start slave</code>å°±ç®—æ˜¯æ‰§è¡ŒæˆåŠŸäº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cf6e9e14501149a197b7a6cc329cc1d0.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æŸ¥çœ‹ä¸€ä¸‹ä»æœºçŠ¶æ€</p><p>â€‹<br />â€‹    show slave status</p><p>è¿™æ ·å°±ç®—æ­å»ºå¥½äº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/54747e8178044d8c9f68a7ecf1862bb7.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="æµ‹è¯•"><a class="markdownIt-Anchor" href="#æµ‹è¯•"></a> æµ‹è¯•</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e471059730274a98a3a6b2e71728724f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/dc067197d93b4799a37e5d51f28c5736.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5657bb24170a4fbe8a9139b954934164.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />åˆ°è¿™é‡Œå°±ç®—æ­å»ºå®Œæˆäº†</p><h3 id="é‡åˆ°çš„é—®é¢˜"><a class="markdownIt-Anchor" href="#é‡åˆ°çš„é—®é¢˜"></a> é‡åˆ°çš„é—®é¢˜</h3><p>è¿™é‡Œé‡åˆ°çš„é—®é¢˜ï¼Œè¿ä¸ä¸Š<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cbb888adff9c45be994e4087e528d9dc.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æƒ³æœ¬åœ°å½“ä¸»æœºï¼Œå¤–ç½‘å½“ä»æœºå¥½åƒä¸å¤ªè¡Œï¼Œæˆ‘å°±åˆå¼„äº†å°æœåŠ¡å™¨åšè¯»å†™åˆ†ç¦»</p><p>æåˆ°äº†ä»æœºä¹‹åï¼Œå°±å¼€å§‹é…ç½®ï¼Œå®‰è£…MySQLç­‰ç­‰</p><p>æœ‰çš„æ—¶å€™ä¼šæç¤ºioå†²çªï¼Œè¿™æ˜¯å› ä¸ºä¹‹å‰çš„ä»æœºæ²¡æœ‰å…³é—­ï¼Œå…³é—­ä¸€ä¸‹å°±å¯ä»¥äº†<br /><code>stop slave</code> ä¸€ä¸‹ å°±å¯ä»¥è¿è¡Œäº†</p><p>ä¸€ä¸ªä»æœºå¯åŠ¨å‘½ä»¤å¿˜è®°äº†ï¼Œæ”¹äº†ä¸€æ™šä¸Š<br />å¦‚æœä¸è¿è¡Œä»æœºå¯åŠ¨å°±ä¼šå˜æˆè¿™æ ·<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/85ee4381b01c44ccb0777995ba042e46.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="ä¸»å†™ä»è¯»å®æˆ˜"><a class="markdownIt-Anchor" href="#ä¸»å†™ä»è¯»å®æˆ˜"></a> ä¸»å†™ä»è¯»å®æˆ˜</h2><h3 id="æ¦‚è¿°-2"><a class="markdownIt-Anchor" href="#æ¦‚è¿°-2"></a> æ¦‚è¿°</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f141bcd96b9840bd8a4e1295055408a1.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />éš¾ä¹ˆå¦‚ä½•å»ç¡®å®šæ¥çš„SQLåº”è¯¥åˆ†é…åˆ°å“ªä¸ªåº“ä¸Šï¼Œè¿™ä¸ªå°±è¦é Sharding-jdbcæ¡†æ¶æ¥è¯»å†™åˆ†ç¦»çš„åˆ†æµå¤„ç†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/83f78cd07cd848de9c4b5abd422d4b91.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="å®æˆ˜"><a class="markdownIt-Anchor" href="#å®æˆ˜"></a> å®æˆ˜</h3><p>æ­¥éª¤å¦‚ä¸‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f72981dfa9204bab9545793d04bc2ed9.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¼å…¥Mavenåæ ‡</p>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.shardingsphere<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>sharding-jdbc-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.0.0-RC1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>é…ç½®ymlæ–‡ä»¶</p>  <figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">application:</span><br>    <span class="hljs-attr">name:</span> <span class="hljs-string">ccTakeOut</span><br>  <span class="hljs-attr">shardingsphere:</span><br>    <span class="hljs-attr">datasource:</span><br>      <span class="hljs-attr">names:</span><br>        <span class="hljs-string">master,slave</span><br>      <span class="hljs-comment"># ä¸»åº“ï¼ˆå¢åˆ æ”¹æ“ä½œï¼‰</span><br>      <span class="hljs-attr">master:</span><br>        <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>        <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://192.168.23.132:3307/reggie?characterEncoding=utf-8</span><br>        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>        <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>      <span class="hljs-comment"># ä»æ•°æ®æºï¼ˆè¯»æ“ä½œï¼‰</span><br>      <span class="hljs-attr">slave:</span><br>        <span class="hljs-attr">type:</span> <span class="hljs-string">com.alibaba.druid.pool.DruidDataSource</span><br>        <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br>        <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://192.168.23.132:3308/reggie?characterEncoding=utf-8</span><br>        <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>        <span class="hljs-attr">password:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">masterslave:</span><br>      <span class="hljs-comment"># è¯»å†™åˆ†ç¦»é…ç½®</span><br>      <span class="hljs-attr">load-balance-algorithm-type:</span> <span class="hljs-string">round_robin</span> <span class="hljs-comment">#è½®è¯¢ï¼ˆå¦‚æœæœ‰å¤šä¸ªä»åº“ä¼šè½®è¯¢ç€è¯»ï¼‰</span><br>      <span class="hljs-comment"># æœ€ç»ˆçš„æ•°æ®æºåç§°</span><br>      <span class="hljs-attr">name:</span> <span class="hljs-string">dataSource</span><br>      <span class="hljs-comment"># ä¸»åº“æ•°æ®æºåç§°</span><br>      <span class="hljs-attr">master-data-source-name:</span> <span class="hljs-string">master</span><br>      <span class="hljs-comment"># ä»åº“æ•°æ®æºåç§°åˆ—è¡¨ï¼Œå¤šä¸ªé€—å·åˆ†éš”</span><br>      <span class="hljs-attr">slave-data-source-names:</span> <span class="hljs-string">slave</span><br>    <span class="hljs-attr">props:</span><br>      <span class="hljs-attr">sql:</span><br>        <span class="hljs-attr">show:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#å¼€å¯SQLæ˜¾ç¤ºï¼Œé»˜è®¤false</span><br>  <span class="hljs-attr">main:</span><br>    <span class="hljs-attr">allow-bean-definition-overriding:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#å…è®¸beanæ•°æ®æºè¦†ç›–</span><br><br><br></code></pre></td></tr></table></figure><p>â€‹</p><p>è§£è¯»ä¸€ä¸‹ymlé…ç½®<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7e5c203773a04fdd9b9a096659db9749.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><strong>å…è®¸Beanå®šä¹‰è¦†ç›–å¾ˆé‡è¦</strong></p><h3 id="æµ‹è¯•-2"><a class="markdownIt-Anchor" href="#æµ‹è¯•-2"></a> æµ‹è¯•</h3><p>å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¯»å†™æ“ä½œåˆ†åˆ«åˆ°è¾¾äº†ä¸åŒçš„ä¸»æœºä¸Š<br />è¯»å†™åˆ†ç¦»æµ‹è¯•<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/f647f0ab726e48f7a4ae0445970980d2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/fd937b8b481946bba8325127319d22f9.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h1 id="nginxéƒ¨ç½²"><a class="markdownIt-Anchor" href="#nginxéƒ¨ç½²"></a> Nginxéƒ¨ç½²</h1><p><a href="https://blog.csdn.net/weixin_46906696/article/details/125569407?csdn_share_tail=%7B%22type%22:%22blog%22,%22rType%22:%22article%22,%22rId%22:%22125569407%22,%22source%22:%22weixin_46906696%22%7D&amp;ctrtid=O48Rx">Nginxç¬”è®°</a></p><h1 id="å‰åç«¯åˆ†ç¦»å¼€å‘"><a class="markdownIt-Anchor" href="#å‰åç«¯åˆ†ç¦»å¼€å‘"></a> å‰åç«¯åˆ†ç¦»å¼€å‘</h1><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/5ae7a5c5f65049e698b47a060c9b9ac8.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9b200bae5d514949b1fed2860598906a.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="å¼€å‘æµç¨‹"><a class="markdownIt-Anchor" href="#å¼€å‘æµç¨‹"></a> å¼€å‘æµç¨‹</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/9d4d3ca75521432a999246d1ff68cea2.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="yapi"><a class="markdownIt-Anchor" href="#yapi"></a> YApi</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b56ddabf9931461dab56dafdd5614088.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="swaggerå¸¸ç”¨"><a class="markdownIt-Anchor" href="#swaggerå¸¸ç”¨"></a> Swaggerï¼ˆå¸¸ç”¨ï¼‰</h2><p>ä¸»è¦ä½œç”¨å°±æ˜¯å¸®åŠ©åç«¯äººå‘˜ç”Ÿæˆåç«¯æ¥å£æ–‡æ¡£çš„<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7352d150c2b64d3e9c84f15ce56c7c1d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä½¿ç”¨æ–¹å¼<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b22b2f0ae0c04a4db76fe8e8fa047615.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />å¯¼å…¥åæ ‡</p>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--knife4jæ¥å£ç®¡ç†--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.xiaoymin<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>knife4j-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>å¯¼å…¥é…ç½®ç±»</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221126213937943.png" alt="image-20221126213937943" /></p><p>å…·ä½“é…ç½®ä½ç½®<code>com.xyy.config.WebMvcConfig</code></p><p>å¯åŠ¨æœåŠ¡ï¼Œè®¿é—®è·¯å¾„+doc.html<br />è¿›å…¥ä¹‹åå°±å¯ä»¥å¯¹å·²æœ‰çš„æ¥å£è¿›è¡Œç®¡ç†äº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/28fa1199bed745909c1ab3566ef46517.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h2 id="swaggerå¸¸ç”¨æ³¨è§£"><a class="markdownIt-Anchor" href="#swaggerå¸¸ç”¨æ³¨è§£"></a> Swaggerå¸¸ç”¨æ³¨è§£</h2><p>ç›´æ¥ç”Ÿæˆçš„æ³¨è§£å†…å®¹å¹¶ä¸æ˜¯å¾ˆå®Œå–„<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/7b2482af3df7429ea060c692c9778524.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />Swaggerå¸¸ç”¨æ³¨è§£<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/96378f7383e34de1a6ef9f7785989c2d.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä»¥å®ä½“ç±»ä¸ºä¾‹<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/0fbe9d3e59ee47d0b5a9f8d6b21609af.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />Controllerä¸Šçš„æ³¨è§£<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/920dcfe50e8544f0ab5a42581722b3e3.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä»¥ä¸Šå‡ä¸ºç¤ºä¾‹ï¼Œæœ€ç»ˆå®Œå–„å¥½æ³¨è§£ï¼Œæ–‡æ¡£ä¼šæ›´å¥½ç”¨ï¼Œæ›´è¯¦ç»†ã€‚</p><h1 id="é¡¹ç›®éƒ¨ç½²"><a class="markdownIt-Anchor" href="#é¡¹ç›®éƒ¨ç½²"></a> é¡¹ç›®éƒ¨ç½²</h1><h2 id="å‰ç«¯"><a class="markdownIt-Anchor" href="#å‰ç«¯"></a> å‰ç«¯</h2><p>å‰ç«¯ä½œä¸ºä¸€ä¸ªå·¥ç¨‹ï¼ŒåŒæ ·éœ€è¦æ‰“åŒ…ï¼Œæ‰“åŒ…å®Œä¸ºdistç›®å½•<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/a2cee8e970754767bf5efab50eb3d065.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />æŠŠè¿™ä¸ªdistç›®å½•ï¼Œæ‰”è¿›Nginxé‡ŒHTMLæ–‡ä»¶å¤¹å°±å¯ä»¥äº†ï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªé™æ€èµ„æº<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e05ae7caf6ce4c82b5dd35e96ba97059.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¼ ä¸Šæ¥ä¸ç®—å®Œï¼Œè¿˜è¦å¥½å¥½é…ç½®ä¸€ä¸‹<br />ä¸€ä¸ªæ˜¯é™æ€èµ„æºï¼Œå¦ä¸€ä¸ªæ˜¯åå‘ä»£ç†</p><h3 id="é™æ€èµ„æºé…ç½®"><a class="markdownIt-Anchor" href="#é™æ€èµ„æºé…ç½®"></a> é™æ€èµ„æºé…ç½®</h3><p>å…ˆé…ç½®é™æ€èµ„æº<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/85400722cc984e53bc62af167a80ba13.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><h3 id="è¯·æ±‚ä»£ç†é…ç½®"><a class="markdownIt-Anchor" href="#è¯·æ±‚ä»£ç†é…ç½®"></a> è¯·æ±‚ä»£ç†é…ç½®</h3><p>é‡å¯Nginxï¼Œæµ‹è¯•ä¸€ä¸‹ï¼Œè®¿é—®ã€‚<br />éšä¾¿ä¸€ä¸ªè¯·æ±‚å¯ä»¥çœ‹åˆ°ï¼Œå¸¦äº†å‰ç¼€<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221126220228420.png" alt="image-20221126220228420" /><br />åç«¯é¡¹ç›®ç»™çš„ç«¯å£æ˜¯9001<br />è¯·æ±‚è·¯å¾„ä¸ºï¼š<a href="http://www.ccsmile.fun:9001/api/employee/login">http://www.ccsmile.fun:9001/api/employee/login</a><br />æˆ‘ä»¬åç«¯æ˜¯æ²¡æœ‰è¿™ä¸ªapiçš„å‰ç¼€çš„<br />é€šè¿‡é‡å†™urlï¼Œå°±å¯ä»¥æŠŠ<br /><code>http://localhost:81/api/employee/page?page=1&amp;pageSize=10</code><br />å˜æˆ<br /><code>http://192.168.132.23:8080/employee/page?page=1&amp;pageSize=10</code>çš„è¯·æ±‚åœ°å€ï¼Œè¿™æ ·å°±å®Œæˆäº†è¯·æ±‚ä»£ç†è½¬å‘æ“ä½œ<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221126220352391.png" alt="image-20221126220352391" /><br />é…ç½®æ–‡ä»¶å¦‚ä¸‹</p>  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs json">server<span class="hljs-punctuation">&#123;</span><br>  listen <span class="hljs-number">80</span>;<br>  server_name localhost;<br>#é™æ€èµ„æºé…ç½®<br>  location /<span class="hljs-punctuation">&#123;</span><br>    root html/dist;<br>    index index.html;<br>  <span class="hljs-punctuation">&#125;</span><br>#è¯·æ±‚è½¬å‘ä»£ç†ï¼Œé‡å†™URL+è½¬å‘<br>  location ^~ /api/<span class="hljs-punctuation">&#123;</span><br>          rewrite ^/api/(.*)$ /$<span class="hljs-number">1</span> break;<br>          proxy_pass http<span class="hljs-punctuation">:</span><span class="hljs-comment">//åç«¯æœåŠ¡ip:ç«¯å£å·;</span><br>  <span class="hljs-punctuation">&#125;</span><br>#å…¶ä»–<br>  error_page <span class="hljs-number">500</span> <span class="hljs-number">502</span> <span class="hljs-number">503</span> <span class="hljs-number">504</span> /<span class="hljs-number">50</span>x.html;<br>  location = /<span class="hljs-number">50</span>x.html<span class="hljs-punctuation">&#123;</span><br>      root html;<br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br></code></pre></td></tr></table></figure><p>æœ€åä¿å­˜æ–‡ä»¶ï¼Œé‡å¯Nginxï¼Œå°±é…ç½®å®Œæˆäº†</p><h2 id="åç«¯"><a class="markdownIt-Anchor" href="#åç«¯"></a> åç«¯</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/23e1f1e20f0b420ca3fa8856aa07efaa.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />ä¸Šä¼ è„šæœ¬ï¼Œè‡ªåŠ¨æ‹‰å–æœ€æ–°è„šæœ¬<br />è¿™æ ·åœ¨å¼€å‘ç«¯å’ŒLinuxç«¯å°±é€šè¿‡Giteeé—´æ¥å®ç°åŒæ­¥äº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/c2cf53f4a6044202b5e5b7136a9bc0ef.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /><br />è„šæœ¬å†…å®¹</p><p>â€‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-meta">#!/bin/sh</span><br><span class="hljs-built_in">echo</span> =================================<br><span class="hljs-built_in">echo</span>  è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬å¯åŠ¨<br><span class="hljs-built_in">echo</span> =================================<br><br><span class="hljs-built_in">echo</span> åœæ­¢åŸæ¥è¿è¡Œä¸­çš„å·¥ç¨‹<br>APP_NAME=reggie_take_out<br><br>tpid=`ps -ef|grep <span class="hljs-variable">$APP_NAME</span>|grep -v grep|grep -v <span class="hljs-built_in">kill</span>|awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span>`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$&#123;tpid&#125;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Stop Process...&#x27;</span><br>    <span class="hljs-built_in">kill</span> -15 <span class="hljs-variable">$tpid</span><br><span class="hljs-keyword">fi</span><br><span class="hljs-built_in">sleep</span> 2<br>tpid=`ps -ef|grep <span class="hljs-variable">$APP_NAME</span>|grep -v grep|grep -v <span class="hljs-built_in">kill</span>|awk <span class="hljs-string">&#x27;&#123;print $2&#125;&#x27;</span>`<br><span class="hljs-keyword">if</span> [ <span class="hljs-variable">$&#123;tpid&#125;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Kill Process!&#x27;</span><br>    <span class="hljs-built_in">kill</span> -9 <span class="hljs-variable">$tpid</span><br><span class="hljs-keyword">else</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;Stop Success!&#x27;</span><br><span class="hljs-keyword">fi</span><br><br><span class="hljs-built_in">echo</span> å‡†å¤‡ä»Gitä»“åº“æ‹‰å–æœ€æ–°ä»£ç <br><span class="hljs-built_in">cd</span> /usr/local/javaapp/reggie_take_out<br><br><span class="hljs-built_in">echo</span> å¼€å§‹ä»Gitä»“åº“æ‹‰å–æœ€æ–°ä»£ç <br>git pull<br><span class="hljs-built_in">echo</span> ä»£ç æ‹‰å–å®Œæˆ<br><br><span class="hljs-built_in">echo</span> å¼€å§‹æ‰“åŒ…<br>output=`mvn clean package -Dmaven.test.skip=<span class="hljs-literal">true</span>`<br><br><span class="hljs-built_in">cd</span> target<br><br><span class="hljs-built_in">echo</span> å¯åŠ¨é¡¹ç›®<br><span class="hljs-built_in">nohup</span> java -jar reggie_take_out-1.0-SNAPSHOT.jar &amp;&gt; reggie_take_out.log &amp;<br><span class="hljs-built_in">echo</span> é¡¹ç›®å¯åŠ¨å®Œæˆ<br><br><br><br></code></pre></td></tr></table></figure><p>â€‹<br />â€‹</p><p>æ‰§è¡Œè„šæœ¬å°±OKäº†<br /><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/079d294160f94539b7b3db5d09af969e.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" /></p><p>è®°å¾—ä¿®æ”¹ymlæ–‡ä»¶ä¸­çš„éƒ¨åˆ†å†…å®¹ï¼Œæ¯”å¦‚æ–‡ä»¶è·¯å¾„ç­‰ç­‰ä¿¡æ¯~<br />å®Œç»“æ’’èŠ±å•¦</p><ol><li><a href="https://www.bilibili.com/video/BV13a411q753?p=176&amp;spm_id_from=pageDriver&amp;vd_source=a432f7b466d0eab98b92ac7132f5ca5c">é»‘é©¬ç¨‹åºå‘˜Javaé¡¹ç›®å®æˆ˜ã€Šç‘å‰å¤–å–ã€‹ï¼Œè½»æ¾æŒæ¡springboot + mybatis pluså¼€å‘æ ¸å¿ƒæŠ€æœ¯çš„çœŸjavaå®æˆ˜é¡¹ç›® </a></li><li>é£åŸProçš„<a href="https://blog.csdn.net/weixin_46906696/article/details/125040457#comments_23962173">ç‘å‰å¤–å–ç¬”è®°</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>Webé¡¹ç›®</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>é¡¹ç›®</tag>
      
      <tag>ç‘å‰å¤–å–</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBootå°†æ–‡ä»¶ä¸Šä¼ åˆ°é¡¹ç›®çš„æ ¹è·¯å¾„ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„</title>
    <link href="/2022/11/25/SpringBoot%E5%B0%86%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B9%E8%B7%AF%E5%BE%84%E4%B8%AD%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84/"/>
    <url>/2022/11/25/SpringBoot%E5%B0%86%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%88%B0%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B9%E8%B7%AF%E5%BE%84%E4%B8%AD%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9B%B8%E5%AF%B9%E8%B7%AF%E5%BE%84/</url>
    
    <content type="html"><![CDATA[<h1 id="SpringBootå°†æ–‡ä»¶ä¸Šä¼ åˆ°é¡¹ç›®çš„æ ¹è·¯å¾„ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„"><a href="#SpringBootå°†æ–‡ä»¶ä¸Šä¼ åˆ°é¡¹ç›®çš„æ ¹è·¯å¾„ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„" class="headerlink" title="SpringBootå°†æ–‡ä»¶ä¸Šä¼ åˆ°é¡¹ç›®çš„æ ¹è·¯å¾„ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„"></a>SpringBootå°†æ–‡ä»¶ä¸Šä¼ åˆ°é¡¹ç›®çš„æ ¹è·¯å¾„ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„</h1><ol><li><p>application.yml</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125185250894.png" alt="image-20221125185250894"></p></li><li><p><strong>controller</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java">RestController<br><span class="hljs-meta">@RequestMapping(&quot;/common&quot;)</span><br><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonController</span> &#123;<br>    <span class="hljs-meta">@Value(&quot;$&#123;takeOutFile.fileLocation:&#125;&quot;)</span><br>    <span class="hljs-keyword">private</span> String filePath;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–‡ä»¶ä¸Šä¼ </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> file org.springframework.web.multipart.MultipartFile</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> com.xyy.reggie.common.R&lt;java.lang.String&gt;</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> å¸­å­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(&quot;/upload&quot;)</span><br>    <span class="hljs-keyword">public</span> R&lt;String&gt; <span class="hljs-title function_">upload</span><span class="hljs-params">(MultipartFile file)</span> &#123;<br><br>        <span class="hljs-comment">//åŸå§‹æ–‡ä»¶å</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">originalFilename</span> <span class="hljs-operator">=</span> file.getOriginalFilename();<br>        <span class="hljs-keyword">assert</span> originalFilename != <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">suffix</span> <span class="hljs-operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="hljs-string">&quot;.&quot;</span>));<br><br>        <span class="hljs-comment">//ä½¿ç”¨UUIDé‡æ–°ç”Ÿæˆæ–‡ä»¶åï¼Œé˜²æ­¢æ–‡ä»¶åç§°é‡å¤é€ æˆæ–‡ä»¶è¦†ç›–</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString() + suffix;<br><br>        <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç›®å½•å¯¹è±¡</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">dir</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);<br>        <span class="hljs-comment">//åˆ¤æ–­å½“å‰ç›®å½•æ˜¯å¦å­˜åœ¨</span><br>        <span class="hljs-keyword">if</span> (!dir.exists()) &#123;<br>            <span class="hljs-comment">//ç›®å½•ä¸å­˜åœ¨ï¼Œéœ€è¦åˆ›å»º</span><br>            dir.mkdirs();<br>        &#125;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            file.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(dir.getAbsolutePath() +File.separator+ fileName));<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> R.success(fileName);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ–‡ä»¶ä¸‹è½½</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> name     java.lang.String</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> response javax.servlet.http.HttpServletResponse</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@author</span> å¸­å­</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(&quot;/download&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">download</span><span class="hljs-params">(String name, HttpServletResponse response)</span> &#123;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//è¾“å…¥æµï¼Œé€šè¿‡è¾“å…¥æµè¯»å–æ–‡ä»¶å†…å®¹</span><br>            <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fileInputStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath +File.separator+  name));<br><br>            <span class="hljs-comment">//è¾“å‡ºæµï¼Œé€šè¿‡è¾“å‡ºæµå°†æ–‡ä»¶å†™å›æµè§ˆå™¨</span><br>            <span class="hljs-type">ServletOutputStream</span> <span class="hljs-variable">outputStream</span> <span class="hljs-operator">=</span> response.getOutputStream();<br><br>            response.setContentType(<span class="hljs-string">&quot;image/jpeg&quot;</span>);<br><br>            <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span>];<br>            <span class="hljs-keyword">while</span> ((len = fileInputStream.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                outputStream.write(bytes, <span class="hljs-number">0</span>, len);<br>                outputStream.flush();<br>            &#125;<br><br>            <span class="hljs-comment">//å…³é—­èµ„æº</span><br>            outputStream.close();<br>            fileInputStream.close();<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æ•ˆæœ</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125185348635.png" alt="image-20221125185348635"></p></li></ol><blockquote><p>SpringBootæ–‡ä»¶ä¸Šä¼ ä¸‹è½½æ€ä¹ˆä½¿ç”¨å°±ä¸è¯´äº†ï¼Œè¯´è¯´æ€ä¹ˆä½¿ç”¨<strong>ç›¸å¯¹è·¯å¾„</strong>æŠŠæ–‡ä»¶å­˜å‚¨åˆ°é¡¹ç›®æ ¹ç›®å½•å»</p></blockquote><ol start="4"><li><p>ä»£ç åˆ†æ</p><ol><li><p>æˆ‘ä»¬ä½¿ç”¨<code>MultipartFileçš„transferTo()</code>è¿›è¡Œæ–‡ä»¶æœ¬åœ°æŒä¹…åŒ–</p></li><li><p>ä½†æ˜¯<code>MultipartFileçš„transferTo()</code>æ–¹æ³•ä¼šç›‘æµ‹ä¼ å…¥å…¶ä¸­çš„Fileå¯¹è±¡çš„è·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„ï¼Œå¦‚æœä¸æ˜¯ç»å¯¹è·¯å¾„ï¼Œ&#x3D;&#x3D;ä¼šè‡ªåŠ¨æ‹¼æ¥applicationé‡Œè®¾ç½®çš„è·¯å¾„ å’Œ \work\Tomcat\localhost\ROOT&#x3D;&#x3D;ã€‚</p><p>æ‰€ä»¥å‡ºç°</p><p>java.io.FileNotFoundException: C:\Users\XXX\AppData\Local\Temp\tomcat.8080.6103676472064121995\work\Tomcat\localhost\ROOT\src\main\resources\takeOutFiled10b193c1-c840-4570-88c3-874ef18e73b5.png (ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚)</p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221125190148520.png" alt="image-20221125190148520" style="zoom: 100%;" /></li><li><p>æ‰€ä»¥åªè¦ç»™å®ƒä¸€ä¸ªç»å¯¹è·¯å¾„å°±å¯ä»¥äº†</p></li><li><p><code>file.transferTo(new File(dir.getAbsolutePath() +File.separator+ fileName));</code></p><p><code>dir.getAbsolutePath()</code> å¾—åˆ°å‚¨å­˜æ–‡ä»¶ç›®å½•çš„ç»å¯¹è·¯å¾„</p><p><code>File.separator</code> å°±æ˜¯   <strong>&#x2F;</strong></p><p><code>fileName</code> ä½ è¦å­˜å‚¨çš„æ–‡ä»¶å</p></li></ol></li></ol>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringBoot</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
      <tag>å°é—®é¢˜</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vue_Basic_learning</title>
    <link href="/2022/11/24/vue_Basic_learning/"/>
    <url>/2022/11/24/vue_Basic_learning/</url>
    
    <content type="html"><![CDATA[<h1 id="1-vueåŸºç¡€çŸ¥è¯†å’ŒåŸç†"><a href="#1-vueåŸºç¡€çŸ¥è¯†å’ŒåŸç†" class="headerlink" title="1. vueåŸºç¡€çŸ¥è¯†å’ŒåŸç†"></a>1. vueåŸºç¡€çŸ¥è¯†å’ŒåŸç†</h1><h2 id="1-1-åˆè¯†Vue"><a href="#1-1-åˆè¯†Vue" class="headerlink" title="1.1 åˆè¯†Vue"></a>1.1 åˆè¯†Vue</h2><ul><li>æƒ³è®©Vueå·¥ä½œï¼Œå°±å¿…é¡»åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ï¼Œä¸”è¦ä¼ å…¥ä¸€ä¸ªé…ç½®å¯¹è±¡</li><li>demoå®¹å™¨é‡Œçš„ä»£ç ä¾ç„¶ç¬¦åˆhtmlè§„èŒƒï¼Œåªä¸è¿‡æ··å…¥äº†ä¸€äº›ç‰¹æ®Šçš„Vueè¯­æ³•</li><li>demoå®¹å™¨é‡Œçš„ä»£ç è¢«ç§°ä¸ºã€Vueæ¨¡æ¿ã€‘</li><li>Vueå®ä¾‹å’Œå®¹å™¨æ˜¯ä¸€ä¸€å¯¹åº”çš„</li><li>çœŸå®å¼€å‘ä¸­åªæœ‰ä¸€ä¸ªVueå®ä¾‹ï¼Œå¹¶ä¸”ä¼šé…åˆç€ç»„ä»¶ä¸€èµ·ä½¿ç”¨</li><li><code>&#123;&#123;xxx&#125;&#125;</code>æ˜¯Vueçš„è¯­æ³•ï¼šæ’å€¼è¡¨è¾¾å¼ï¼Œ<code>&#123;&#123;xxx&#125;&#125;</code>å¯ä»¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§</li><li>ä¸€æ—¦dataä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œé‚£ä¹ˆé¡µé¢ä¸­ç”¨åˆ°è¯¥æ•°æ®çš„åœ°æ–¹ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°(Vueå®ç°çš„å“åº”å¼)</li></ul><blockquote><p>åˆå§‹ç¤ºä¾‹ä»£ç </p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨ --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Helloï¼Œ&#123;&#123;name.toUpperCase()&#125;&#125;ï¼Œ&#123;&#123;address&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">//é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//åˆ›å»ºVueå®ä¾‹</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#demo&#x27;</span>, <span class="hljs-comment">//elç”¨äºæŒ‡å®šå½“å‰Vueå®ä¾‹ä¸ºå“ªä¸ªå®¹å™¨æœåŠ¡ï¼Œå€¼é€šå¸¸ä¸ºcssé€‰æ‹©å™¨å­—ç¬¦ä¸²ã€‚</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">data</span>:&#123; <span class="hljs-comment">//dataä¸­ç”¨äºå­˜å‚¨æ•°æ®ï¼Œæ•°æ®ä¾›elæ‰€æŒ‡å®šçš„å®¹å™¨å»ä½¿ç”¨ï¼Œå€¼æˆ‘ä»¬æš‚æ—¶å…ˆå†™æˆä¸€ä¸ªå¯¹è±¡ã€‚</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;hello,world&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span></span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="1-2-æ¨¡æ¿è¯­æ³•"><a href="#1-2-æ¨¡æ¿è¯­æ³•" class="headerlink" title="1.2 æ¨¡æ¿è¯­æ³•"></a>1.2 æ¨¡æ¿è¯­æ³•</h2><p>Vueæ¨¡æ¿è¯­æ³•æœ‰2å¤§ç±»:</p><ul><li>æ’å€¼è¯­æ³•ï¼š</li></ul><p>åŠŸèƒ½ï¼šç”¨äºè§£ææ ‡ç­¾ä½“å†…å®¹</p><p>å†™æ³•ï¼š<code>&#123;&#123;xxx&#125;&#125;</code>ï¼Œxxxæ˜¯jsè¡¨è¾¾å¼ï¼Œä¸”å¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§</p><ul><li>æŒ‡ä»¤è¯­æ³•:</li></ul><p>åŠŸèƒ½ï¼šç”¨äºè§£ææ ‡ç­¾ï¼ˆåŒ…æ‹¬ï¼šæ ‡ç­¾å±æ€§ã€æ ‡ç­¾ä½“å†…å®¹ã€ç»‘å®šäº‹ä»¶â€¦ï¼‰</p><p>ä¸¾ä¾‹ï¼šv-bind:href&#x3D;â€œxxxâ€ æˆ– ç®€å†™ä¸º :href&#x3D;â€œxxxâ€ï¼ŒxxxåŒæ ·è¦å†™jsè¡¨è¾¾å¼ï¼Œä¸”å¯ä»¥ç›´æ¥è¯»å–åˆ°dataä¸­çš„æ‰€æœ‰å±æ€§</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;div id=<span class="hljs-string">&quot;root&quot;</span>&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ’å€¼è¯­æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ä½ å¥½ï¼Œ&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">hr</span>/&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æŒ‡ä»¤è¯­æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span><br>    &lt;!-- è¿™é‡Œæ˜¯å±•ç¤ºè¢«<span class="hljs-title class_">Vue</span>æŒ‡ä»¤ç»‘å®šçš„å±æ€§ï¼Œå¼•å·å†…å†™çš„æ˜¯jsè¡¨è¾¾å¼ --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;school.url.toUpperCase()&quot;</span> <span class="hljs-attr">x</span>=<span class="hljs-string">&quot;hello&quot;</span>&gt;</span>ç‚¹æˆ‘å»&#123;&#123;school.name&#125;&#125;å­¦ä¹ 1<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;school.url&quot;</span> <span class="hljs-attr">x</span>=<span class="hljs-string">&quot;hello&quot;</span>&gt;</span>ç‚¹æˆ‘å»&#123;&#123;school.name&#125;&#125;å­¦ä¹ 2<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span></span><br>&lt;/div&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">data</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jack&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">school</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;ç™¾åº¦&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">url</span>:<span class="hljs-string">&#x27;http://www.baidu.com&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="1-3-æ•°æ®ç»‘å®š"><a href="#1-3-æ•°æ®ç»‘å®š" class="headerlink" title="1.3 æ•°æ®ç»‘å®š"></a>1.3 æ•°æ®ç»‘å®š</h2><p>Vueä¸­æœ‰2ç§æ•°æ®ç»‘å®šçš„æ–¹å¼ï¼š</p><ul><li><p>å•å‘ç»‘å®š(v-bind)ï¼šæ•°æ®åªèƒ½ä»dataæµå‘é¡µé¢</p></li><li><p>åŒå‘ç»‘å®š(v-model)ï¼šæ•°æ®ä¸ä»…èƒ½ä»dataæµå‘é¡µé¢ï¼Œè¿˜å¯ä»¥ä»é¡µé¢æµå‘data</p><blockquote><p>tips:</p></blockquote><ol><li><p>åŒå‘ç»‘å®šä¸€èˆ¬éƒ½åº”ç”¨åœ¨è¡¨å•ç±»å…ƒç´ ä¸Šï¼ˆå¦‚ï¼šinputã€selectç­‰ï¼‰</p></li><li><p>v-model:value å¯ä»¥ç®€å†™ä¸º v-modelï¼Œå› ä¸ºv-modelé»˜è®¤æ”¶é›†çš„å°±æ˜¯valueå€¼</p></li></ol></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;div id=<span class="hljs-string">&quot;root&quot;</span>&gt;<br>&lt;!-- æ™®é€šå†™æ³• å•å‘æ•°æ®ç»‘å®š --&gt;<br>    å•å‘æ•°æ®ç»‘å®šï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> v-<span class="hljs-attr">bind</span>:value=<span class="hljs-string">&quot;name&quot;</span>&gt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br>    åŒå‘æ•°æ®ç»‘å®šï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> v-<span class="hljs-attr">model</span>:value=<span class="hljs-string">&quot;name&quot;</span>&gt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br>    <br>    &lt;!-- ç®€å†™ v-<span class="hljs-attr">model</span>:value å¯ä»¥ç®€å†™ä¸º v-modelï¼Œå› ä¸ºv-modelé»˜è®¤æ”¶é›†çš„å°±æ˜¯valueå€¼--&gt;<br>    å•å‘æ•°æ®ç»‘å®šï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> :value=<span class="hljs-string">&quot;name&quot;</span>&gt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br>    åŒå‘æ•°æ®ç»‘å®šï¼š&lt;input type=<span class="hljs-string">&quot;text&quot;</span> v-model=<span class="hljs-string">&quot;name&quot;</span>&gt;<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span></span><br>&lt;/div&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">data</span>:&#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jack&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure><h2 id="1-4-elä¸dataçš„ä¸¤ç§å†™æ³•"><a href="#1-4-elä¸dataçš„ä¸¤ç§å†™æ³•" class="headerlink" title="1.4 elä¸dataçš„ä¸¤ç§å†™æ³•"></a>1.4 elä¸dataçš„ä¸¤ç§å†™æ³•</h2><p>elæœ‰2ç§å†™æ³•</p><ul><li><p>new Vueæ—¶å€™é…ç½®elå±æ€§</p></li><li><p>å…ˆåˆ›å»ºVueå®ä¾‹ï¼Œéšåå†é€šè¿‡vm.$mount(â€˜#rootâ€™)æŒ‡å®šelçš„å€¼</p></li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;script&gt;<br>   <span class="hljs-comment">// ç¬¬ä¸€ç§ </span><br><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br><span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,<br><span class="hljs-attr">data</span>:&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jack&#x27;</span>,<br>        &#125;<br>&#125;)<br>    <br>    <span class="hljs-comment">// ç¬¬äºŒç§</span><br>    vm.$mount(<span class="hljs-string">&#x27;#root&#x27;</span>)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>dataæœ‰2ç§å†™æ³•</p><ul><li><p>å¯¹è±¡å¼</p></li><li><p>å‡½æ•°å¼</p><p>ä¸å¯ä»¥ä½¿ç”¨<a href="https://blog.csdn.net/weixin_45112114/article/details/123358639?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166830462716800184149271%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=166830462716800184149271&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-123358639-null-null.142%5Ev63%5Econtrol,201%5Ev3%5Econtrol_1,213%5Ev2%5Et3_esquery_v2&utm_term=js%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0&spm=1018.2226.3001.4187">ç®­å¤´å‡½æ•°</a>ï¼Œä½¿ç”¨ç®­å¤´å‡½æ•°è°ƒç”¨å¯¹è±¡å°±å˜æˆäº†<code>Window</code></p></li></ul><blockquote><p>åœ¨ç»„ä»¶ä¸­ï¼Œdataå¿…é¡»ä½¿ç”¨å‡½æ•°å¼ã€‚ä½¿ç”¨å¯¹è±¡å¼å°±ç›¸å½“äºè®¾ç½®ä¸ºé™æ€å˜é‡ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br><span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,<br>        <span class="hljs-comment">// ç¬¬ä¸€ç§</span><br><span class="hljs-attr">data</span>:&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jack&#x27;</span>,<br>        &#125;<br>        <br>        <span class="hljs-comment">// ç¬¬äºŒç§</span><br>        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> &#123;<br>                <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jack&#x27;</span><br>            &#125;<br>    &#125;<br>&#125;)<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="1-5-Vueä¸­çš„MVVM"><a href="#1-5-Vueä¸­çš„MVVM" class="headerlink" title="1.5 Vueä¸­çš„MVVM"></a>1.5 Vueä¸­çš„MVVM</h2><ul><li><p>Mï¼šæ¨¡å‹(Model) ï¼šdataä¸­çš„æ•°æ®</p></li><li><p>Vï¼šè§†å›¾(View) ï¼šæ¨¡æ¿ä»£ç </p></li><li><p>VMï¼šè§†å›¾æ¨¡å‹(ViewModel)ï¼šVueå®ä¾‹</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221112115435610.png" alt="image-20221112115435610"></p></li></ul><h2 id="1-6-æ•°æ®ä»£ç†"><a href="#1-6-æ•°æ®ä»£ç†" class="headerlink" title="1.6 æ•°æ®ä»£ç†"></a>1.6 æ•°æ®ä»£ç†</h2><blockquote><p>äº†è§£æ•°æ®ä»£ç†éœ€è¦jsçš„ä¸€äº›çŸ¥è¯†ï¼šObject.defineProperty()ï¼Œå±æ€§æ ‡å¿—ï¼Œå±æ€§æè¿°ç¬¦ï¼Œgetterï¼Œsetterã€‚ã€‚ã€‚</p></blockquote><p>å»ºè®®å­¦ä¹ æ–‡ç« åœ°å€ï¼š</p><p><a href="https://zh.javascript.info/property-descriptors">https://zh.javascript.info/property-descriptors</a></p><p><a href="https://zh.javascript.info/property-accessors">https://zh.javascript.info/property-accessors</a></p><p>è¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ï¼š</p><p><strong>å±æ€§æ ‡å¿—</strong> :</p><p>å¯¹è±¡å±æ€§ï¼ˆpropertiesï¼‰ï¼Œé™¤ <strong><code>value</code></strong> å¤–ï¼Œè¿˜æœ‰ä¸‰ä¸ªç‰¹æ®Šçš„ç‰¹æ€§ï¼ˆattributesï¼‰ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œæ ‡å¿—â€</p><ul><li><strong><code>writable</code></strong> â€” å¦‚æœä¸º <code>true</code>ï¼Œåˆ™å€¼å¯ä»¥è¢«ä¿®æ”¹ï¼Œå¦åˆ™å®ƒæ˜¯åªå¯è¯»çš„</li><li><strong><code>enumerable</code></strong> â€” å¦‚æœä¸º <code>true</code>ï¼Œåˆ™è¡¨ç¤ºæ˜¯å¯ä»¥éå†çš„ï¼Œå¯ä»¥åœ¨forâ€¦ .in Object.keys()ä¸­éå†å‡ºæ¥</li><li><strong><code>configurable</code></strong> â€” å¦‚æœä¸º <code>true</code>ï¼Œåˆ™æ­¤å±æ€§å¯ä»¥è¢«åˆ é™¤ï¼Œè¿™äº›ç‰¹æ€§ä¹Ÿå¯ä»¥è¢«ä¿®æ”¹ï¼Œå¦åˆ™ä¸å¯ä»¥</li></ul><p><strong>Object.getOwnPropertyDescriptor(obj, propertyName)</strong></p><blockquote><p>è¿™ä¸ªæ–¹æ³•æ˜¯æŸ¥è¯¢æœ‰å…³å±æ€§çš„å®Œæ•´ä¿¡æ¯ objæ˜¯å¯¹è±¡ï¼Œ propertyNameæ˜¯å±æ€§å</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">let</span> user = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;John&quot;</span><br>&#125;;<br><br><span class="hljs-keyword">let</span> descriptor = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertyDescriptor</span>(user, <span class="hljs-string">&#x27;name&#x27;</span>);<br> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(descriptor)<br>   <br>    <span class="hljs-comment">/* å±æ€§æè¿°ç¬¦ï¼š</span><br><span class="hljs-comment">    &#123;</span><br><span class="hljs-comment">      &quot;value&quot;: &quot;John&quot;,</span><br><span class="hljs-comment">      &quot;writable&quot;: true,</span><br><span class="hljs-comment">      &quot;enumerable&quot;: true,</span><br><span class="hljs-comment">     &quot;configurable&quot;: true</span><br><span class="hljs-comment">   &#125;    */</span><br></code></pre></td></tr></table></figure><blockquote><p>æ‰“å°ç»“æœ</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/09b4bf67bb7843388fecd7da1572901f.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>Object.defineProperty</strong> (obj, prop, descriptor)</p><blockquote><p>objï¼šè¦å®šä¹‰å±æ€§çš„å¯¹è±¡ã€‚</p><p>propï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°</p><p>descriptorï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> user = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;John&quot;</span><br>&#125;;<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(user, <span class="hljs-string">&quot;name&quot;</span>, &#123;<br>  <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span><br>&#125;);<br><br>user.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;Pete&quot;</span>;<br><br><span class="hljs-comment">// æ‰“å°åè¿˜æ˜¯æ˜¾ç¤º &#x27;John&#x27;,æ— æ³•ä¿®æ”¹nameå€¼</span><br></code></pre></td></tr></table></figure><p>å…¶ä»–çš„å±æ€§æ ‡å¿—å°±ä¸æ¼”ç¤ºäº†ï¼Œæ¥ä¸‹æ¥çœ‹é‡ç‚¹ï¼šè®¿é—®å™¨å±æ€§ã€‚</p><p><strong>è®¿é—®å™¨å±æ€§ ï¼š</strong></p><p>æœ¬è´¨ä¸Šæ˜¯ç”¨äºè·å–å’Œè®¾ç½®å€¼çš„å‡½æ•°ï¼Œä½†ä»å¤–éƒ¨ä»£ç æ¥çœ‹å°±åƒå¸¸è§„å±æ€§ã€‚</p><p>è®¿é—®å™¨å±æ€§ç”± â€œgetterâ€ å’Œ â€œsetterâ€ æ–¹æ³•è¡¨ç¤ºã€‚åœ¨å¯¹è±¡å­—é¢é‡ä¸­ï¼Œå®ƒä»¬ç”¨ <code>get</code> å’Œ <code>set</code> è¡¨ç¤ºï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> obj = &#123;<br>    <span class="hljs-keyword">get</span> <span class="hljs-title function_">name</span>() &#123;<br>        <span class="hljs-comment">// å½“è¯»å– obj.propName æ—¶ï¼Œgetter èµ·ä½œç”¨</span><br>    &#125;,<br>    <span class="hljs-keyword">set</span> <span class="hljs-title function_">name</span>() &#123;<br>        <span class="hljs-comment">// å½“æ‰§è¡Œ obj.name = value æ“ä½œæ—¶ï¼Œsetter èµ·ä½œç”¨</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p><strong>æ›´å¤æ‚ä¸€ç‚¹çš„ä½¿ç”¨</strong></p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> user = &#123;<br><span class="hljs-attr">surname</span>: <span class="hljs-string">&#x27;gao&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;han&#x27;</span><br>    <br>    <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName</span>() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">surname</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">fullName</span>)<br><br></code></pre></td></tr></table></figure><p>ä»å¤–è¡¨çœ‹ï¼Œè®¿é—®å™¨å±æ€§çœ‹èµ·æ¥å°±åƒä¸€ä¸ªæ™®é€šå±æ€§ã€‚è¿™å°±æ˜¯è®¿é—®å™¨å±æ€§çš„è®¾è®¡æ€æƒ³ã€‚æˆ‘ä»¬ä¸ä»¥å‡½æ•°çš„æ–¹å¼ <strong>è°ƒç”¨</strong> <code>user.fullName</code>ï¼Œæˆ‘ä»¬æ­£å¸¸<strong>è¯»å–</strong> å®ƒï¼šgetter åœ¨å¹•åè¿è¡Œã€‚</p><blockquote><p>vueçš„è®¡ç®—å±æ€§çš„åº•å±‚æ„é€ æ„Ÿè§‰ç”¨åˆ°äº†è¿™ç§æ€æƒ³ï¼Œæˆ‘ç›®å‰è¿˜æ²¡çœ‹è¿‡æºç ï¼Œæ˜¯è¿™æ ·çŒœæƒ³çš„ã€‚</p></blockquote><p>æˆªè‡³ç›®å‰ï¼Œ<code>fullName</code> åªæœ‰ä¸€ä¸ª getterã€‚å¦‚æœæˆ‘ä»¬å°è¯•èµ‹å€¼æ“ä½œ <code>user.fullName=</code>ï¼Œå°†ä¼šå‡ºç°é”™è¯¯ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> user = &#123;<br><span class="hljs-attr">surname</span>: <span class="hljs-string">&#x27;gao&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;han&#x27;</span><br>    <br>    <span class="hljs-keyword">get</span> <span class="hljs-title function_">fullName</span>() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&#x27; &#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">surname</span>;<br>    &#125;<br><br><span class="hljs-keyword">set</span> <span class="hljs-title function_">fullName</span>(<span class="hljs-params">value</span>) &#123;<br>        <span class="hljs-comment">// è¿™ä¸ªç”¨åˆ°äº†æ–°è¯­æ³• ç»“æ„èµ‹å€¼</span><br>        [<span class="hljs-variable language_">this</span>.<span class="hljs-property">surname</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>] = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27; &#x27;</span>);<br>    &#125;<br>&#125;<br><br>user.<span class="hljs-property">fullName</span> = <span class="hljs-string">&#x27;Li Hua&#x27;</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">surname</span>);<br></code></pre></td></tr></table></figure><p><strong>ç»ˆäºå¯ä»¥ä»‹ç»æ•°æ®ä»£ç†äº†</strong> ï¼š</p><p>æ•°æ®ä»£ç†ï¼šé€šè¿‡ä¸€ä¸ªå¯¹è±¡ä»£ç†å¯¹å¦ä¸€ä¸ªå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»&#x2F;å†™ï¼‰</p><p>å…ˆæ¥çœ‹ä¸ªæ¡ˆä¾‹ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> obj = &#123;<br>    <span class="hljs-attr">x</span>: <span class="hljs-number">100</span><br>&#125;<br><br><span class="hljs-keyword">let</span> obj2 = &#123;<br>    <span class="hljs-attr">y</span>: <span class="hljs-number">200</span><br>&#125;<br><br></code></pre></td></tr></table></figure><p>è¿™æ—¶å€™æä¸€ä¸ªéœ€æ±‚ï¼šæˆ‘ä»¬æƒ³è¦è®¿é—® <strong>obj</strong> ä¸­çš„ <strong>x</strong> çš„å€¼ï¼Œä½†æˆ‘ä»¬æœ€å¥½ä¸è¦ç›´æ¥å»è®¿é—® <strong>obj</strong> ,è€Œæ˜¯æƒ³è¦é€šè¿‡ <strong>obj2</strong>è¿™ä¸ªä»£ç†å¯¹è±¡å»è®¿é—®ã€‚</p><p>è¿™æ—¶å€™å°±å¯ä»¥ç”¨ä¸Š <strong>Object.defineProperty()</strong> ï¼Œç»™ <strong>obj2</strong> æ·»åŠ ä¸Šè®¿é—®å™¨å±æ€§ï¼ˆä¹Ÿå°±æ˜¯getterå’Œsetterï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> obj = &#123;<br>    <span class="hljs-attr">x</span>: <span class="hljs-number">100</span><br>&#125;<br><br><span class="hljs-keyword">let</span> obj2 = &#123;<br>    <span class="hljs-attr">y</span>: <span class="hljs-number">200</span><br>&#125;<br><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj2, <span class="hljs-string">&#x27;x&#x27;</span>, &#123;<br>    <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">return</span> obj.<span class="hljs-property">x</span>;<br>    &#125;,<br>    <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) &#123;<br>        obj.<span class="hljs-property">x</span> = value;<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><blockquote><p>è¿™å°±æ˜¯æ•°æ®ä»£ç†ï¼Œä¹Ÿä¸éš¾å§</p></blockquote><p><strong>æ¥ä¸‹æ¥ä»‹ç»Vueä¸­çš„æ•°æ®ä»£ç†</strong></p><ul><li>Vueä¸­çš„æ•°æ®ä»£ç†ï¼šé€šè¿‡vmå¯¹è±¡æ¥ä»£ç†dataå¯¹è±¡ä¸­å±æ€§çš„æ“ä½œï¼ˆè¯»&#x2F;å†™ï¼‰</li><li>Vueä¸­æ•°æ®ä»£ç†çš„å¥½å¤„ï¼šæ›´åŠ æ–¹ä¾¿çš„æ“ä½œdataä¸­çš„æ•°æ®</li><li>åŸºæœ¬åŸç†ï¼š<ul><li>é€šè¿‡Object.defineProperty()æŠŠdataå¯¹è±¡ä¸­æ‰€æœ‰å±æ€§æ·»åŠ åˆ°vmä¸Šã€‚</li><li>ä¸ºæ¯ä¸€ä¸ªæ·»åŠ åˆ°vmä¸Šçš„å±æ€§ï¼Œéƒ½æŒ‡å®šä¸€ä¸ªgetter&#x2F;setterã€‚</li><li>åœ¨getter&#x2F;setterå†…éƒ¨å»æ“ä½œï¼ˆè¯»&#x2F;å†™ï¼‰dataä¸­å¯¹åº”çš„å±æ€§ã€‚</li></ul></li></ul><p>æˆ‘æ¥ç”¨ä¸€ä¸ªæ¡ˆä¾‹æ¥è¯¦ç»†è§£é‡Šè¿™ä¸€ä¸ªè¿‡ç¨‹ã€‚</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åç§°ï¼š&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š&#123;&#123;address&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å®¶é‡Œè¹²å¤§å­¦&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;China&#x27;</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨æ§åˆ¶å°æ‰“å° new å‡ºæ¥çš„ vm</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124110350315.png" alt="image-20221124110350315"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå†™åœ¨é…ç½®é¡¹ä¸­çš„ data æ•°æ®è¢« ç»‘å®šåˆ°äº† vm å¯¹è±¡ä¸Šï¼Œæˆ‘å…ˆæ¥è®²ç»“æœï¼Œæ˜¯ Vue å°† _data ä¸­çš„ nameï¼Œaddress æ•°æ® ä»£ç†åˆ°<br>vm æœ¬èº«ä¸Šã€‚</p><blockquote><p>ä¸€è„¸æ‡µé€¼ï¼Ÿ</p></blockquote><p>å…ˆæ¥è§£é‡Šä¸‹_data æ˜¯å•¥ï¼Œ _data å°±æ˜¯ vm èº«ä¸Šçš„ _data å±æ€§ï¼Œå°±æ˜¯ä¸‹å›¾é‚£ä¸ª</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124110459865.png" alt="image-20221124110459865"></p><p>è¿™ä¸ª _data æ˜¯ä»å“ªæ¥çš„ï¼Ÿ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    </span><br><span class="language-javascript"><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å®¶é‡Œè¹²å¤§å­¦&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;China&#x27;</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>new Vue æ—¶ï¼Œ Vue é€šè¿‡ä¸€ç³»åˆ—å¤„ç†ï¼Œ å°†åŒ¹é…é¡¹ä¸Šçš„ data æ•°æ®ç»‘å®šåˆ°äº† _data<br>è¿™ä¸ªå±æ€§ä¸Šï¼Œå¹¶å¯¹è¿™ä¸ªå±æ€§è¿›è¡Œäº†å¤„ç†ï¼ˆæ•°æ®åŠ«æŒï¼‰ï¼Œä½†è¿™ä¸ªå±æ€§å°±æ˜¯æ¥æºäºé…ç½®é¡¹ä¸­çš„ dataï¼Œæˆ‘ä»¬å¯ä»¥æ¥éªŒè¯ä¸€ä¸‹ã€‚</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    </span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> data1 = &#123;</span><br><span class="language-javascript">         <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å®¶é‡Œè¹²å¤§å­¦&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;China&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    </span><br><span class="language-javascript"><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-comment">// æˆ‘ä»¬åœ¨Vue åˆå§‹åŒ–çš„é…ç½®é¡¹ä¸­å†™äº† data å±æ€§ã€‚</span></span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: data1</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124110704095.png" alt="image-20221124110704095"></p><blockquote><p>æ‰“å°ç»“æœä¸ºtrueï¼Œè¯´æ˜ä¸¤è€…å°±æ˜¯åŒä¸€ä¸ª</p></blockquote><p>å¥½äº†ï¼Œå†å›åˆ°æ•°æ®ä»£ç†ä¸Šæ¥ï¼Œå°† <strong>vm._data</strong> ä¸­çš„å€¼ï¼Œå†ä»£ç†åˆ° vm æœ¬èº«ä¸Šæ¥ï¼Œç”¨vm.name ä»£æ›¿ <strong>vm._data.name</strong>ã€‚è¿™å°±æ˜¯ Vue çš„æ•°æ®ä»£ç†</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124110841601.png" alt="image-20221124110841601"></p><p>è¿™ä¸€åˆ‡éƒ½æ˜¯é€šè¿‡ Object.defineProperty() æ¥å®Œæˆçš„ï¼Œæˆ‘æ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html">Object.defineProperty(vm, &#x27;name&#x27;, &#123;<br>    get() &#123;<br>        return vm._data.name;<br>    &#125;,<br>    set(value) &#123;<br>        vm._data.name = value<br>    &#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure><blockquote><p>è¿™æ ·æœ‰å•¥æ„ä¹‰ï¼Ÿæ˜æ˜é€šè¿‡ vm._data.name ä¹Ÿå¯ä»¥è®¿é—® name çš„å€¼ï¼Œä¸ºå•¥è´¹åŠ›å»è¿™æ ·æ“ä½œï¼Ÿ</p></blockquote><p>åœ¨æ’å€¼è¯­æ³•ä¸­ï¼Œ<code>&#123;&#123; name &#125;&#125;</code> å–åˆ°çš„å€¼å°±ç›¸å½“äº <code>&#123;&#123; vm.name &#125;&#125;</code>ï¼Œä¸ç”¨æ•°æ®ä»£ç†çš„è¯ï¼Œåœ¨æ’å€¼è¯­æ³•å°±è¦è¿™æ ·å»å†™äº†ã€‚</p><p><code>&#123;&#123; _data. name &#125;&#125;</code> è¿™ä¸ç¬¦åˆç›´è§‰ï¼Œæ€ªæ€ªçš„ã€‚vue è¿™æ ·è®¾è®¡æ›´åˆ©äºå¼€å‘è€…å¼€å‘ï¼Œæˆ‘ä»¬åœ¨ç ”ç©¶åŸç†ä¼šè§‰å¾—æœ‰äº›å¤æ‚ï¼ˆç¬‘~ï¼‰</p><p>æ¥ä¸ªå°šç¡…è°·å¼ å¤©ç¦¹è€å¸ˆåšçš„å›¾ï¼ˆéå¸¸æ¨èå»çœ‹ä»–çš„è¯¾ï¼Œè®²çš„éå¸¸å¥½ï¼‰</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/8ccad88c5e40497587dadb3db07e1821.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="1-7-äº‹ä»¶å¤„ç†"><a href="#1-7-äº‹ä»¶å¤„ç†" class="headerlink" title="1.7 äº‹ä»¶å¤„ç†"></a>1.7 äº‹ä»¶å¤„ç†</h2><p>äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨ï¼š</p><ol><li>ä½¿ç”¨v-on:xxxæˆ–@xxxç»‘å®šäº‹ä»¶ï¼Œå…¶ä¸­ xxx æ˜¯äº‹ä»¶å</li><li>äº‹ä»¶çš„å›è°ƒéœ€è¦é…ç½®åœ¨methodså¯¹è±¡ä¸­ï¼Œæœ€ç»ˆä¼šåœ¨vmä¸Š</li><li>methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œä¸è¦ç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ this å°±ä¸æ˜¯vmäº†</li><li>methodsä¸­é…ç½®çš„å‡½æ•°ï¼Œéƒ½æ˜¯è¢« Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼Œthis çš„æŒ‡å‘æ˜¯vmæˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡</li><li>@click&#x3D;â€demoâ€å’Œ@click&#x3D;â€demo($event)â€æ•ˆæœä¸€è‡´ï¼Œä½†åè€…å¯ä»¥ä¼ å‚</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•å…¥Vue --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- &lt;button v-on:click=&quot;showInfo&quot;&gt;ç‚¹æˆ‘æç¤ºä¿¡æ¯&lt;/button&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showInfo1&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯1ï¼ˆä¸ä¼ å‚ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showInfo2($event,66)&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯2ï¼ˆä¼ å‚ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">//é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;cess&#x27;</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">showInfo1</span>(<span class="hljs-params">event</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">innerText</span>)</span><br><span class="language-javascript">            <span class="hljs-comment">// console.log(this) // æ­¤å¤„çš„thisæ˜¯vm</span></span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;åŒå­¦ä½ å¥½ï¼&#x27;</span>)</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-title function_">showInfo2</span>(<span class="hljs-params">event, number</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event, number)</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">innerText</span>)</span><br><span class="language-javascript">            <span class="hljs-comment">// console.log(this) // æ­¤å¤„çš„thisæ˜¯vm</span></span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;åŒå­¦ä½ å¥½ï¼ï¼&#x27;</span>)</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>Vueä¸­çš„äº‹ä»¶ä¿®é¥°ç¬¦</strong></p><ul><li>&#x3D;&#x3D;prevent&#x3D;&#x3D;é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå¸¸ç”¨ï¼‰</li><li>&#x3D;&#x3D;stop&#x3D;&#x3D;é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆå¸¸ç”¨ï¼‰</li><li>&#x3D;&#x3D;once&#x3D;&#x3D;äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼ˆå¸¸ç”¨ï¼‰</li><li><strong>capture</strong>ä½¿ç”¨äº‹ä»¶çš„æ•è·æ¨¡å¼</li><li><strong>self</strong>åªæœ‰event.targetæ˜¯å½“å‰æ“ä½œçš„å…ƒç´ æ—¶æ‰è§¦å‘äº‹ä»¶</li><li><strong>passive</strong>äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº‹ä»¶ä¿®é¥°ç¬¦<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•å…¥Vue --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">      * &#123;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;&#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.demo1</span> &#123;<span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;<span class="hljs-attribute">background-color</span>: skyblue;&#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.box1</span> &#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<span class="hljs-attribute">background-color</span>: skyblue;&#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.box2</span> &#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<span class="hljs-attribute">background-color</span>: white;&#125;</span><br><span class="language-css">      <span class="hljs-selector-class">.list</span> &#123;<span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;<span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;<span class="hljs-attribute">background-color</span>: skyblue;<span class="hljs-attribute">overflow</span>: auto;&#125;</span><br><span class="language-css">      <span class="hljs-selector-tag">li</span> &#123;<span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;&#125;</span><br><span class="language-css">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¬¢è¿æ¥åˆ°&#123;&#123; name &#125;&#125;å­¦ä¹ <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼ˆå¸¸ç”¨ï¼‰ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;http://www.atguigu.com&quot;</span> @<span class="hljs-attr">click.prevent</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><br>      <span class="hljs-comment">&lt;!-- é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼ˆå¸¸ç”¨ï¼‰ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo1&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ä¿®é¥°ç¬¦å¯ä»¥è¿ç»­å†™ --&gt;</span><br>        <span class="hljs-comment">&lt;!-- &lt;a href=&quot;http://www.qq.com&quot; @click.prevent.stop=&quot;showInfo&quot;&gt;ç‚¹æˆ‘æç¤º&lt;/a&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>      <span class="hljs-comment">&lt;!-- äº‹ä»¶åªè§¦å‘ä¸€æ¬¡ï¼ˆå¸¸ç”¨ï¼‰ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.once</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br>      <span class="hljs-comment">&lt;!-- ä½¿ç”¨äº‹ä»¶çš„æ•è·æ¨¡å¼ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box1&quot;</span> @<span class="hljs-attr">click.capture</span>=<span class="hljs-string">&quot;showMsg(1)&quot;</span>&gt;</span><br>        div1<br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box2&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showMsg(2)&quot;</span>&gt;</span><br>          div2<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>      <span class="hljs-comment">&lt;!-- åªæœ‰event.targetæ˜¯å½“å‰æ“ä½œçš„å…ƒç´ æ—¶æ‰è§¦å‘äº‹ä»¶ï¼› --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo1&quot;</span> @<span class="hljs-attr">click.self</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>      <span class="hljs-comment">&lt;!-- äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºç«‹å³æ‰§è¡Œï¼Œæ— éœ€ç­‰å¾…äº‹ä»¶å›è°ƒæ‰§è¡Œå®Œæ¯•ï¼› --&gt;</span><br>      <span class="hljs-comment">&lt;!-- scrollæ˜¯æ»šåŠ¨æ¡æ»šåŠ¨ï¼Œpasssiveæ²¡æœ‰å½±å“ --&gt;</span><br>      <span class="hljs-comment">&lt;!-- wheelæ˜¯é¼ æ ‡æ»šè½®æ»šåŠ¨ï¼Œpassiveæœ‰å½±å“ --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> @<span class="hljs-attr">wheel.passive</span>=<span class="hljs-string">&quot;demo&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">showInfo</span>(<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;åŒå­¦ä½ å¥½ï¼&#x27;</span>)</span><br><span class="language-javascript">            <span class="hljs-comment">// console.log(e.target)</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-title function_">showMsg</span>(<span class="hljs-params">msg</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg)</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) &#123;</span><br><span class="language-javascript">              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;#&#x27;</span>)</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;ç´¯åäº†&#x27;</span>)</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-8-é”®ç›˜äº‹ä»¶"><a href="#1-8-é”®ç›˜äº‹ä»¶" class="headerlink" title="1.8 é”®ç›˜äº‹ä»¶"></a>1.8 é”®ç›˜äº‹ä»¶</h2><p>é”®ç›˜äº‹ä»¶è¯­æ³•ç³–ï¼š<code>@keydown</code>ï¼Œ<code>@keyup</code></p><ol><li>Vueä¸­å¸¸ç”¨çš„æŒ‰é”®åˆ«å<br>å›è½¦ enter<br>åˆ é™¤deleteæ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®<br>é€€å‡º esc<br>ç©ºæ ¼ space<br>æ¢è¡Œ tab ç‰¹æ®Šï¼Œå¿…é¡»é…åˆ<strong>keydown</strong>å»ä½¿ç”¨<br>ä¸Š up<br>ä¸‹ down<br>å·¦ left<br>å³ right</li><li>Vueæœªæä¾›åˆ«åçš„æŒ‰é”®ï¼Œå¯ä»¥ä½¿ç”¨æŒ‰é”®åŸå§‹çš„keyå€¼å»ç»‘å®šï¼Œä½†æ³¨æ„è¦è½¬ä¸ºkebab-caseï¼ˆå¤šå•è¯å°å†™çŸ­æ¨ªçº¿å†™æ³•ï¼‰</li><li>ç³»ç»Ÿä¿®é¥°é”®ï¼ˆç”¨æ³•ç‰¹æ®Šï¼‰ctrl alt shift metaï¼ˆmetaå°±æ˜¯winé”®ï¼‰<ul><li>é…åˆkeyupä½¿ç”¨ï¼šæŒ‰ä¸‹ä¿®é¥°é”®çš„åŒæ—¶ï¼Œå†æŒ‰ä¸‹å…¶ä»–é”®ï¼Œéšåé‡Šæ”¾å…¶ä»–é”®ï¼Œäº‹ä»¶æ‰è¢«è§¦å‘<br>æŒ‡å®š ctrl+y ä½¿ç”¨ @keyup.ctr.y</li><li>é…åˆkeydownä½¿ç”¨ï¼šæ­£å¸¸è§¦å‘äº‹ä»¶</li></ul></li><li>ä¹Ÿå¯ä»¥ä½¿ç”¨keyCodeå»æŒ‡å®šå…·ä½“çš„æŒ‰é”®ï¼ˆä¸æ¨èï¼‰</li><li>Vue.config.keyCodes.è‡ªå®šä¹‰é”®å &#x3D; é”®ç ï¼Œå¯ä»¥å»å®šåˆ¶æŒ‰é”®åˆ«å</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>é”®ç›˜äº‹ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•å…¥Vue --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;æŒ‰ä¸‹å›è½¦æç¤ºè¾“å…¥&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;æŒ‰ä¸‹ctrl+éšæ„æç¤ºè¾“å…¥&quot;</span> @<span class="hljs-attr">keyup.ctrl</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;æŒ‰ä¸‹ctrl+yæç¤ºè¾“å…¥&quot;</span> @<span class="hljs-attr">keyup.ctrl.y</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;æŒ‰ä¸‹tabæç¤ºè¾“å…¥&quot;</span> @<span class="hljs-attr">keydown.tab</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;æŒ‰ä¸‹å›è½¦æç¤ºè¾“å…¥&quot;</span> @<span class="hljs-attr">keydown.huiche</span>=<span class="hljs-string">&quot;showInfo&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//   Vue.config.productionTip = false// é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span><br><span class="language-javascript">      <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">keyCodes</span>.<span class="hljs-property">huiche</span> = <span class="hljs-number">13</span><span class="hljs-comment">// å®šä¹‰äº†ä¸€ä¸ªåˆ«åæŒ‰é”®</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;cess&#x27;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">showInfo</span>(<span class="hljs-params">e</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// console.log(e.key,e.keyCode)</span></span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">      &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-9-è®¡ç®—å±æ€§"><a href="#1-9-è®¡ç®—å±æ€§" class="headerlink" title="1.9 è®¡ç®—å±æ€§"></a>1.9 è®¡ç®—å±æ€§</h2><ul><li>å®šä¹‰ï¼šè¦ç”¨çš„å±æ€§ä¸å­˜åœ¨ï¼Œè¦é€šè¿‡å·²æœ‰å±æ€§è®¡ç®—å¾—æ¥</li><li>åŸç†ï¼šåº•å±‚å€ŸåŠ©äº†Objcet.definePropertyæ–¹æ³•æä¾›çš„getterå’Œsetter</li><li>getå‡½æ•°ä»€ä¹ˆæ—¶å€™æ‰§è¡Œï¼Ÿ<ul><li>(1).åˆæ¬¡è¯»å–æ—¶ä¼šæ‰§è¡Œä¸€æ¬¡</li><li>(2).å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ä¼šè¢«å†æ¬¡è°ƒç”¨</li></ul></li><li>ä¼˜åŠ¿ï¼šä¸methodså®ç°ç›¸æ¯”ï¼Œå†…éƒ¨æœ‰ç¼“å­˜æœºåˆ¶ï¼ˆå¤ç”¨ï¼‰ï¼Œæ•ˆç‡æ›´é«˜ï¼Œè°ƒè¯•æ–¹ä¾¿</li><li>å¤‡æ³¨ï¼š<ul><li>è®¡ç®—å±æ€§æœ€ç»ˆä¼šå‡ºç°åœ¨vmä¸Šï¼Œç›´æ¥è¯»å–ä½¿ç”¨å³å¯</li><li>å¦‚æœè®¡ç®—å±æ€§è¦è¢«ä¿®æ”¹ï¼Œé‚£å¿…é¡»å†™setå‡½æ•°å»å“åº”ä¿®æ”¹ï¼Œä¸”setä¸­è¦å¼•èµ·è®¡ç®—æ—¶ä¾èµ–çš„æ•°æ®å‘ç”Ÿæ”¹å˜</li></ul></li></ul><blockquote><p>è®¡ç®—å±æ€§</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•å…¥Vue --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>        å§“ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;lastName&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        æµ‹è¯•ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;x&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span>// è¿™é‡Œä¿®æ”¹ ä¸ä¼šè°ƒ fullNameçš„getæ–¹æ³•<br>        å…¨åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        å…¨åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>        <span class="hljs-comment">&lt;!-- å…¨åï¼š&lt;span&gt;&#123;&#123;fullName&#125;&#125;&lt;/span&gt; &lt;br/&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <br>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">          <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">firstName</span>:<span class="hljs-string">&#x27;å¼ &#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">lastName</span>:<span class="hljs-string">&#x27;ä¸‰&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">x</span>:<span class="hljs-string">&#x27;ä½ å¥½&#x27;</span></span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// å®Œæ•´å†™æ³•</span></span><br><span class="language-javascript">            <span class="hljs-attr">fullName</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;getè¢«è°ƒç”¨äº†&#x27;</span>)</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">&#x27;-&#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span></span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;set&#x27;</span>, value)</span><br><span class="language-javascript">            <span class="hljs-keyword">const</span> arr = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27;-&#x27;</span>)</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> = arr[<span class="hljs-number">0</span>]</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> = arr[<span class="hljs-number">1</span>]</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">      </span><br><span class="language-javascript">            <span class="hljs-comment">// ç®€å†™</span></span><br><span class="language-javascript">            <span class="hljs-comment">/* fullName() &#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">              console.log(&#x27;getè¢«è°ƒç”¨äº†&#x27;)</span></span><br><span class="hljs-comment"><span class="language-javascript">              return this.firstName + &#x27;-&#x27; + this.lastName</span></span><br><span class="hljs-comment"><span class="language-javascript">            &#125; */</span></span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124111838464.png" alt="image-20221124111838464"></p><h2 id="1-10-ç›‘è§†å±æ€§"><a href="#1-10-ç›‘è§†å±æ€§" class="headerlink" title="1.10 ç›‘è§†å±æ€§"></a>1.10 ç›‘è§†å±æ€§</h2><p>ç›‘è§†å±æ€§watchï¼š</p><ul><li>å½“è¢«ç›‘è§†çš„å±æ€§å˜åŒ–æ—¶, å›è°ƒå‡½æ•°è‡ªåŠ¨è°ƒç”¨, è¿›è¡Œç›¸å…³æ“ä½œ</li><li>ç›‘è§†çš„å±æ€§å¿…é¡»å­˜åœ¨ï¼Œæ‰èƒ½è¿›è¡Œç›‘è§†</li><li>é…ç½®é¡¹å±æ€§immediate:falseï¼Œæ”¹ä¸º trueï¼Œåˆ™åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ handler(newValue,oldValue)</li><li>ç›‘è§†çš„ä¸¤ç§å†™æ³•ï¼š<ul><li>(1).new Vueæ—¶ä¼ å…¥watché…ç½®</li><li>(2).é€šè¿‡vm.$watchç›‘è§†</li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¤©æ°”æ¡ˆä¾‹_ç›‘è§†å±æ€§<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä»Šå¤©å¤©æ°”å¾ˆ&#123;&#123;info&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeWeather&quot;</span>&gt;</span>åˆ‡æ¢å¤©æ°”<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">isHot</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">info</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHot</span> ? <span class="hljs-string">&#x27;ç‚çƒ­&#x27;</span> : <span class="hljs-string">&#x27;å‡‰çˆ½&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">changeWeather</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHot</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isHot</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// æ–¹å¼ä¸€</span></span><br><span class="language-javascript">    <span class="hljs-comment">/* watch:&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">isHot:&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">immediate:true,</span></span><br><span class="hljs-comment"><span class="language-javascript">handler(newValue,oldValue)&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">console.log(&#x27;isHotè¢«ä¿®æ”¹äº†&#x27;,newValue,oldValue)</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125; */</span></span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript">  <span class="hljs-comment">// æ–¹å¼äºŒ</span></span><br><span class="language-javascript">  vm.$watch(<span class="hljs-string">&#x27;isHot&#x27;</span>, &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">immediate</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// åˆå§‹åŒ–æ—¶è®©handlerè°ƒç”¨ä¸€ä¸‹</span></span><br><span class="language-javascript">    <span class="hljs-comment">//handlerä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Ÿå½“isHotå‘ç”Ÿæ”¹å˜æ—¶</span></span><br><span class="language-javascript">    <span class="hljs-title function_">handler</span>(<span class="hljs-params">newValue, oldValue</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;isHotè¢«ä¿®æ”¹äº†&#x27;</span>, newValue, oldValue)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹      </p><p><strong>æ·±åº¦ç›‘è§† ï¼š</strong></p><ul><li>(1).Vueä¸­çš„watché»˜è®¤ä¸ç›‘æµ‹å¯¹è±¡å†…éƒ¨å€¼çš„æ”¹å˜ï¼ˆä¸€å±‚ï¼‰</li><li>(2).é…ç½®deep:trueå¯ä»¥ç›‘æµ‹å¯¹è±¡å†…éƒ¨å€¼æ”¹å˜ï¼ˆå¤šå±‚ï¼‰</li></ul><blockquote><p>å¤‡æ³¨ï¼š</p><p>(1).Vueè‡ªèº«å¯ä»¥ç›‘æµ‹&#x3D;&#x3D;å¯¹è±¡å†…éƒ¨å€¼&#x3D;&#x3D;çš„æ”¹å˜ï¼Œä½†Vueæä¾›çš„watché»˜è®¤ä¸å¯ä»¥ï¼ˆæ‰§è¡Œæ•ˆç‡é«˜ï¼‰</p><p>(2).ä½¿ç”¨watchæ—¶æ ¹æ®æ•°æ®çš„å…·ä½“ç»“æ„ï¼Œå†³å®šæ˜¯å¦é‡‡ç”¨æ·±åº¦ç›‘è§†</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;&#123; numbers &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>açš„å€¼æ˜¯:&#123;&#123; numbers.a &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;numbers.a++&quot;</span>&gt;</span>ç‚¹æˆ‘è®©a+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>bçš„å€¼æ˜¯:&#123;&#123; numbers.b &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;numbers.b++&quot;</span>&gt;</span>ç‚¹æˆ‘è®©b+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>eçš„å€¼æ˜¯:&#123;&#123; numbers.c.d.e &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;numbers.c.d.e++&quot;</span>&gt;</span>ç‚¹æˆ‘è®©e+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(value,index) of numbers.f&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span> &gt;</span>&#123;&#123; value.a &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>ç‚¹æˆ‘è®©f[0]+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;numbers = &#123;a:666,b:888&#125;&quot;</span>&gt;</span>å½»åº•æ›¿æ¢æ‰numbers<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    &#123;&#123;numbers.c.d.e&#125;&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">isHot</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">numbers</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">b</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">c</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">d</span>: &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">e</span>: <span class="hljs-number">100</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-comment">// f:[0,1,2]</span></span><br><span class="language-javascript">          <span class="hljs-attr">f</span>: [&#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span> &#125;, &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">2</span> &#125;]</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">watch</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// ç›‘è§†å¤šçº§ç»“æ„ä¸­æŸä¸ªå±æ€§çš„å˜åŒ–</span></span><br><span class="language-javascript">        <span class="hljs-string">&#x27;numbers.a&#x27;</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-title function_">handler</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;aè¢«æ”¹å˜äº†&#x27;</span>)</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-comment">// ç›‘è§†å¤šçº§ç»“æ„ä¸­æ‰€æœ‰å±æ€§çš„å˜åŒ–</span></span><br><span class="language-javascript">        <span class="hljs-attr">numbers</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">deep</span>: <span class="hljs-literal">true</span>,</span><br><span class="language-javascript">          <span class="hljs-title function_">handler</span>(<span class="hljs-params">newValue, oldValue</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newValue)</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;numbersæ”¹å˜äº†&#x27;</span>)</span><br><span class="language-javascript">            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(oldValue)</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>.<span class="hljs-property">f</span>[<span class="hljs-number">0</span>].<span class="hljs-property">a</span>++</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">numbers</span>.<span class="hljs-property">f</span>)</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><code>&#39;numbers.a&#39;</code>ç›‘å¬å¯¹è±¡å†…éƒ¨å€¼ è½¬ä¸ºå­—ç¬¦ä¸² <code>numbers</code>æ˜¯ç®€å†™æ–¹å¼</p><blockquote><p>ç›‘è§†å±æ€§ç®€å†™</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä»Šå¤©å¤©æ°”å¾ˆ&#123;&#123;info&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeWeather&quot;</span>&gt;</span>åˆ‡æ¢å¤©æ°”<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">isHot</span>:<span class="hljs-literal">true</span>,</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">computed</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">info</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHot</span> ? <span class="hljs-string">&#x27;ç‚çƒ­&#x27;</span> : <span class="hljs-string">&#x27;å‡‰çˆ½&#x27;</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">changeWeather</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">isHot</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">isHot</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">watch</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-comment">//ç®€å†™</span></span><br><span class="language-javascript">            <span class="hljs-title function_">isHot</span>(<span class="hljs-params">newValue, oldValue</span>) &#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;isHotè¢«ä¿®æ”¹äº†&#x27;</span>, newValue, oldValue, <span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">&#125; </span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>computedå’Œwatchä¹‹é—´çš„åŒºåˆ« ï¼š</strong></p><ul><li>computedèƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œwatchéƒ½å¯ä»¥å®Œæˆ</li><li>watchèƒ½å®Œæˆçš„åŠŸèƒ½ï¼Œcomputedä¸ä¸€å®šèƒ½å®Œæˆï¼Œä¾‹å¦‚ï¼šwatchå¯ä»¥è¿›è¡Œå¼‚æ­¥æ“ä½œ</li></ul><blockquote><p>ä¸¤ä¸ªé‡è¦çš„å°åŸåˆ™ï¼š</p><p>1.æ‰€è¢«Vueç®¡ç†çš„å‡½æ•°ï¼Œæœ€å¥½å†™æˆæ™®é€šå‡½æ•°ï¼Œè¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vm æˆ– ç»„ä»¶å®ä¾‹å¯¹è±¡</p><p>2.æ‰€æœ‰ä¸è¢«Vueæ‰€ç®¡ç†çš„å‡½æ•°ï¼ˆå®šæ—¶å™¨çš„å›è°ƒå‡½æ•°ã€ajaxçš„å›è°ƒå‡½æ•°ç­‰ã€Promiseçš„å›è°ƒå‡½æ•°ï¼‰ï¼Œæœ€å¥½å†™æˆç®­å¤´å‡½æ•°ï¼Œè¿™æ ·thisçš„æŒ‡å‘æ‰æ˜¯vm æˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    å§“ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;firstName&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;lastName&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    å…¨åï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">firstName</span>:<span class="hljs-string">&#x27;å¼ &#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">lastName</span>:<span class="hljs-string">&#x27;ä¸‰&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">fullName</span>:<span class="hljs-string">&#x27;å¼ -ä¸‰&#x27;</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">watch</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-comment">// watch ç›‘è§†å™¨é‡Œå¯ä»¥å†™ å¼‚æ­¥å‡½æ•°</span></span><br><span class="language-javascript">            <span class="hljs-title function_">firstName</span>(<span class="hljs-params">val</span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">fullName</span> = val + <span class="hljs-string">&#x27;-&#x27;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span></span><br><span class="language-javascript">                &#125;,<span class="hljs-number">1000</span>);</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-title function_">lastName</span>(<span class="hljs-params">val</span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">fullName</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-string">&#x27;-&#x27;</span> + val</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-11-ç»‘å®šæ ·å¼"><a href="#1-11-ç»‘å®šæ ·å¼" class="headerlink" title="1.11 ç»‘å®šæ ·å¼"></a>1.11 ç»‘å®šæ ·å¼</h2><ul><li><strong>:class</strong>&#x3D;â€xxxâ€ï¼Œxxx å¯ä»¥æ˜¯å­—ç¬¦ä¸²ã€æ•°ç»„ã€å¯¹è±¡</li><li><strong>:style</strong>&#x3D;â€[a,b]â€å…¶ä¸­aã€bæ˜¯æ ·å¼å¯¹è±¡ï¼Œæ•°ç»„å¯¹è±¡</li><li><strong>:style</strong>&#x3D;â€{fontSize: xxx}â€å…¶ä¸­ xxx æ˜¯åŠ¨æ€å€¼<ul><li>å­—ç¬¦ä¸²å†™æ³•é€‚ç”¨äºï¼šç±»åä¸ç¡®å®šï¼Œè¦åŠ¨æ€è·å– </li><li>æ•°ç»„å†™æ³•é€‚ç”¨äºï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ä¸ç¡®å®šï¼Œåå­—ä¹Ÿä¸ç¡®å®š </li><li>å¯¹è±¡å†™æ³•é€‚ç”¨äºï¼šè¦ç»‘å®šå¤šä¸ªæ ·å¼ï¼Œä¸ªæ•°ç¡®å®šï¼Œåå­—ä¹Ÿç¡®å®šï¼Œä½†ä¸ç¡®å®šç”¨ä¸ç”¨</li></ul></li></ul><p>â€‹         </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs html">    <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.basic</span> &#123;<span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;<span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid black;&#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.happy</span> &#123;<span class="hljs-attribute">border</span>: <span class="hljs-number">3px</span> solid red;<span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.644</span>);</span><br><span class="language-css">          <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">30deg</span>, yellow, pink, orange, yellow);&#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.sad</span> &#123;<span class="hljs-attribute">border</span>: <span class="hljs-number">4px</span> dashed <span class="hljs-built_in">rgb</span>(<span class="hljs-number">2</span>, <span class="hljs-number">197</span>, <span class="hljs-number">2</span>);<span class="hljs-attribute">background-color</span>: skyblue;&#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.normal</span> &#123;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#bfa</span>;&#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.atguigu1</span> &#123;<span class="hljs-attribute">background-color</span>: yellowgreen;&#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.atguigu2</span> &#123;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;<span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">2px</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> red;&#125;</span><br><span class="language-css">        <span class="hljs-selector-class">.atguigu3</span> &#123;<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;&#125;</span><br><span class="language-css">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br>      <br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- ç»‘å®šclassæ ·å¼--å­—ç¬¦ä¸²å†™æ³•ï¼Œé€‚ç”¨äºï¼šæ ·å¼çš„ç±»åä¸ç¡®å®šï¼Œéœ€è¦åŠ¨æ€æŒ‡å®š --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;basic&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;mood&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;changeMood&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <br>        <span class="hljs-comment">&lt;!-- ç»‘å®šclassæ ·å¼--æ•°ç»„å†™æ³•ï¼Œé€‚ç”¨äºï¼šè¦ç»‘å®šçš„æ ·å¼ä¸ªæ•°ä¸ç¡®å®šã€åå­—ä¹Ÿä¸ç¡®å®š --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;basic&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classArr&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <br>        <span class="hljs-comment">&lt;!-- ç»‘å®šclassæ ·å¼--å¯¹è±¡å†™æ³•ï¼Œé€‚ç”¨äºï¼šè¦ç»‘å®šçš„æ ·å¼ä¸ªæ•°ç¡®å®šã€åå­—ä¹Ÿç¡®å®šï¼Œä½†è¦åŠ¨æ€å†³å®šç”¨ä¸ç”¨ --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;basic&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObj&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <br>        <span class="hljs-comment">&lt;!-- ç»‘å®šstyleæ ·å¼--å¯¹è±¡å†™æ³• --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;basic&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;styleObj&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>      <br>        <span class="hljs-comment">&lt;!-- ç»‘å®šstyleæ ·å¼--æ•°ç»„å†™æ³• --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;basic&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;styleArr&quot;</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <br>      <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">      </span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">          <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">mood</span>: <span class="hljs-string">&#x27;normal&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">classArr</span>: [<span class="hljs-string">&#x27;atguigu1&#x27;</span>, <span class="hljs-string">&#x27;atguigu2&#x27;</span>, <span class="hljs-string">&#x27;atguigu3&#x27;</span>],</span><br><span class="language-javascript">            <span class="hljs-attr">classObj</span>: &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">atguigu1</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">atguigu2</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">styleObj</span>: &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&#x27;40px&#x27;</span>,</span><br><span class="language-javascript">              <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">styleObj2</span>: &#123;</span><br><span class="language-javascript">              <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;orange&#x27;</span></span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">styleArr</span>: [</span><br><span class="language-javascript">              &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&#x27;40px&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;blue&#x27;</span>,</span><br><span class="language-javascript">              &#125;,</span><br><span class="language-javascript">              &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;gray&#x27;</span></span><br><span class="language-javascript">              &#125;</span><br><span class="language-javascript">            ]</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">          <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">changeMood</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">              <span class="hljs-keyword">const</span> arr = [<span class="hljs-string">&#x27;happy&#x27;</span>, <span class="hljs-string">&#x27;sad&#x27;</span>, <span class="hljs-string">&#x27;normal&#x27;</span>]</span><br><span class="language-javascript">              <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">3</span>)</span><br><span class="language-javascript">              <span class="hljs-variable language_">this</span>.<span class="hljs-property">mood</span> = arr[index]</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">          &#125;,</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-12-æ¡ä»¶æ¸²æŸ“"><a href="#1-12-æ¡ä»¶æ¸²æŸ“" class="headerlink" title="1.12 æ¡ä»¶æ¸²æŸ“"></a>1.12 æ¡ä»¶æ¸²æŸ“</h2><p><strong>v-if</strong></p><ul><li><p>å†™æ³• è·Ÿ if else è¯­æ³•ç±»ä¼¼</p><p>v-if&#x3D;â€è¡¨è¾¾å¼â€</p><p>v-else-if&#x3D;â€è¡¨è¾¾å¼â€</p><p>v-else</p></li><li><p>é€‚ç”¨äºï¼šåˆ‡æ¢é¢‘ç‡è¾ƒä½çš„åœºæ™¯ï¼Œå› ä¸ºä¸å±•ç¤ºçš„DOMå…ƒç´ ç›´æ¥è¢«ç§»é™¤</p></li><li><p>æ³¨æ„ï¼šv-ifå¯ä»¥å’Œv-else-ifv-elseä¸€èµ·ä½¿ç”¨ï¼Œä½†è¦æ±‚ç»“æ„ä¸èƒ½è¢«æ‰“æ–­</p></li></ul><p><strong>v-show</strong></p><ul><li>å†™æ³•ï¼šv-show&#x3D;â€è¡¨è¾¾å¼â€</li><li>é€‚ç”¨äºï¼šåˆ‡æ¢é¢‘ç‡è¾ƒé«˜çš„åœºæ™¯</li><li>ç‰¹ç‚¹ï¼šä¸å±•ç¤ºçš„DOMå…ƒç´ æœªè¢«ç§»é™¤ï¼Œä»…ä»…æ˜¯ä½¿ç”¨æ ·å¼éšè—æ‰display: none</li></ul><blockquote><p>å¤‡æ³¨ï¼šä½¿ç”¨v-ifçš„æ—¶ï¼Œå…ƒç´ å¯èƒ½æ— æ³•è·å–åˆ°ï¼Œè€Œä½¿ç”¨v-showä¸€å®šå¯ä»¥è·å–åˆ°v-if æ˜¯å®æ‰“å®åœ°æ”¹å˜domå…ƒç´ ï¼Œv-show æ˜¯éšè—æˆ–æ˜¾ç¤ºdomå…ƒç´ ã€‚<code>template</code>æ ‡ç­¾ä¸å½±å“ç»“æ„ï¼Œé¡µé¢htmlä¸­ä¸ä¼šæœ‰æ­¤æ ‡ç­¾ï¼Œä½†åªèƒ½é…åˆv-ifï¼Œä¸èƒ½é…åˆv-show</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ¡ä»¶æ¸²æŸ“<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>   <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>   <br>   <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰çš„nå€¼æ˜¯:&#123;&#123; n &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;n++&quot;</span>&gt;</span>ç‚¹æˆ‘n+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>   <br>     <span class="hljs-comment">&lt;!-- ä½¿ç”¨v-showåšæ¡ä»¶æ¸²æŸ“ --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;h2 v-show=&quot;false&quot;&gt;æ¬¢è¿æ¥åˆ°&#123;&#123;name&#125;&#125;&lt;/h2&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;h2 v-show=&quot;1 === 1&quot;&gt;æ¬¢è¿æ¥åˆ°&#123;&#123;name&#125;&#125;&lt;/h2&gt; --&gt;</span><br>   <br>     <span class="hljs-comment">&lt;!-- ä½¿ç”¨v-ifåšæ¡ä»¶æ¸²æŸ“ --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;h2 v-if=&quot;false&quot;&gt;æ¬¢è¿æ¥åˆ°&#123;&#123;name&#125;&#125;&lt;/h2&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;h2 v-if=&quot;1 === 1&quot;&gt;æ¬¢è¿æ¥åˆ°&#123;&#123;name&#125;&#125;&lt;/h2&gt; --&gt;</span><br>   <br>     <span class="hljs-comment">&lt;!-- v-elseå’Œv-else-if --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;div v-show=&quot;n === 1&quot;&gt;Angular&lt;/div&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;div v-show=&quot;n === 2&quot;&gt;React&lt;/div&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;div v-show=&quot;n === 3&quot;&gt;Vue&lt;/div&gt; --&gt;</span><br>   <br>     <span class="hljs-comment">&lt;!-- &lt;div v-if=&quot;n === 1&quot;&gt;Angular&lt;/div&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;div v-else-if=&quot;n === 2&quot;&gt;React&lt;/div&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;div v-else-if=&quot;n === 3&quot;&gt;Vue&lt;/div&gt; --&gt;</span><br>     <span class="hljs-comment">&lt;!-- &lt;div v-else&gt;å“ˆå“ˆ&lt;/div&gt; --&gt;</span><br>   <br>   <br>     <span class="hljs-comment">&lt;!-- v-ifä¸templateçš„é…åˆä½¿ç”¨ --&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;n === 1&quot;</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ä½ å¥½<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å°šç¡…è°·<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>     <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>   <br>   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>   <br>   <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">     <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">     <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">       <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">       <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">         <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span>,</span><br><span class="language-javascript">         <span class="hljs-attr">n</span>:<span class="hljs-number">0</span></span><br><span class="language-javascript">       &#125;</span><br><span class="language-javascript">     &#125;)</span><br><span class="language-javascript">   </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹          </p><p>â€‹       </p><h2 id="1-13-åˆ—è¡¨æ¸²æŸ“"><a href="#1-13-åˆ—è¡¨æ¸²æŸ“" class="headerlink" title="1.13 åˆ—è¡¨æ¸²æŸ“"></a>1.13 åˆ—è¡¨æ¸²æŸ“</h2><h3 id="v-foræŒ‡ä»¤"><a href="#v-foræŒ‡ä»¤" class="headerlink" title="v-foræŒ‡ä»¤"></a>v-foræŒ‡ä»¤</h3><ul><li>ç”¨äºå±•ç¤ºåˆ—è¡¨æ•°æ®</li><li>è¯­æ³•ï¼š<code>&lt;li v-for=&quot;(item, index) of items&quot; :key=&quot;index&quot;&gt;</code>ï¼Œè¿™é‡Œkeyå¯ä»¥æ˜¯indexï¼Œæ›´å¥½çš„æ˜¯éå†å¯¹è±¡çš„å”¯ä¸€æ ‡è¯†</li><li>å¯éå†ï¼šæ•°ç»„ã€å¯¹è±¡ã€å­—ç¬¦ä¸²ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰ã€æŒ‡å®šæ¬¡æ•°ï¼ˆç”¨çš„å¾ˆå°‘ï¼‰</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>äº‹ä»¶çš„åŸºæœ¬ä½¿ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- å¼•å…¥Vue --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åŸºæœ¬åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- éå†æ•°ç»„ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>äººå‘˜åˆ—è¡¨ï¼ˆéå†æ•°ç»„ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(p,index) of persons&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>&#123;&#123; p.name &#125;&#125;-&#123;&#123; p.age &#125;&#125;-&#123;&#123; index &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- éå†å¯¹è±¡ --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æ±½è½¦ä¿¡æ¯ï¼ˆéå†å¯¹è±¡ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(value,k) of car&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;k&quot;</span>&gt;</span>&#123;&#123; k &#125;&#125;-&#123;&#123; value &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- éå†å­—ç¬¦ä¸² --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æµ‹è¯•éå†å­—ç¬¦ä¸²ï¼ˆç”¨å¾—å°‘ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(char,index) of str&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>&#123;&#123; char &#125;&#125;-&#123;&#123; index &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- éå†æŒ‡å®šæ¬¡æ•° --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æµ‹è¯•éå†æŒ‡å®šæ¬¡æ•°ï¼ˆç”¨å¾—å°‘ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(number,index) of 5&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>&#123;&#123; index &#125;&#125;-&#123;&#123; number &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">persons</span>: [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;001&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;002&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;æå››&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;003&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç‹äº”&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;</span><br><span class="language-javascript">      ],</span><br><span class="language-javascript">      <span class="hljs-attr">car</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å¥¥è¿ªA8&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">price</span>: <span class="hljs-string">&#x27;70ä¸‡&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;é»‘è‰²&#x27;</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">str</span>: <span class="hljs-string">&#x27;hello&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="keyçš„åŸç†"><a href="#keyçš„åŸç†" class="headerlink" title="keyçš„åŸç†"></a><strong>keyçš„åŸç†</strong></h3><p>vueä¸­çš„keyæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿï¼ˆkeyçš„å†…éƒ¨åŸç†ï¼‰</p><p>äº†è§£vueä¸­keyçš„åŸç†éœ€è¦ä¸€äº›å‰ç½®çŸ¥è¯†ã€‚</p><p>å°±æ˜¯vueçš„è™šæ‹Ÿdomï¼Œvueä¼šæ ¹æ® dataä¸­çš„æ•°æ®ç”Ÿæˆè™šæ‹Ÿdomï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç”Ÿæˆé¡µé¢ï¼Œå°±å°†è™šæ‹Ÿdomè½¬æˆçœŸå®domï¼Œåœ¨é¡µé¢å±•ç¤ºå‡ºæ¥ã€‚</p><p>è™šæ‹Ÿdomæœ‰å•¥ç”¨ï¼Ÿæ¯æ¬¡vm._dataä¸­çš„æ•°æ®æ›´æ”¹ï¼Œéƒ½ä¼šè§¦å‘ç”Ÿæˆæ–°çš„è™šæ‹Ÿdomï¼Œæ–°çš„è™šæ‹Ÿdomä¼šè·Ÿæ—§çš„è™šæ‹Ÿdomè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæœ‰ç›¸åŒçš„ï¼Œåœ¨ç”ŸæˆçœŸå®domæ—¶ï¼Œè¿™éƒ¨åˆ†ç›¸åŒçš„å°±ä¸éœ€è¦é‡æ–°ç”Ÿæˆï¼Œåªéœ€è¦å°†ä¸¤è€…ä¹‹é—´ä¸åŒçš„domè½¬æ¢æˆçœŸå®domï¼Œå†ä¸åŸæ¥çš„çœŸå®domè¿›è¡Œæ‹¼æ¥ã€‚æˆ‘çš„ç†è§£æ˜¯è™šæ‹Ÿdomå°±æ˜¯èµ·åˆ°äº†ä¸€ä¸ªdomå¤ç”¨çš„ä½œç”¨ï¼Œè¿˜æœ‰é¿å…é‡å¤å¤šä½™çš„æ“ä½œï¼Œä¸‹æ–‡æœ‰è¯¦ç»†è§£é‡Šã€‚</p><p>è€Œkeyæœ‰å•¥ç”¨ï¼Ÿ</p><p>keyæ˜¯è™šæ‹Ÿdomçš„æ ‡è¯†ã€‚</p><p>å…ˆæ¥ç‚¹é¢„å¤‡çš„çŸ¥è¯†ï¼šå•¥æ˜¯çœŸå® DOMï¼ŸçœŸå® DOM å’Œ è™šæ‹Ÿ DOM æœ‰å•¥åŒºåˆ«ï¼Ÿå¦‚ä½•ç”¨ä»£ç å±•ç°çœŸå® DOM å’Œ è™šæ‹Ÿ DOM</p><h4 id="çœŸå®DOMå’Œå…¶è§£ææµç¨‹"><a href="#çœŸå®DOMå’Œå…¶è§£ææµç¨‹" class="headerlink" title="çœŸå®DOMå’Œå…¶è§£ææµç¨‹"></a>çœŸå®<code>DOM</code>å’Œå…¶è§£ææµç¨‹</h4><p>è¿™é‡Œå‚è€ƒè¶…çº§è‹±é›„å¤§ä½¬ï¼š<a href="https://juejin.cn/post/6844903895467032589">https://juejin.cn/post/6844903895467032589</a></p><p><code>webkit</code> æ¸²æŸ“å¼•æ“å·¥ä½œæµç¨‹å›¾</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/b32d88931ee775d57b382d7585de3ad8.png" alt="img"></p><blockquote><p>ä¸­æ–‡ç‰ˆ</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/cd1757feee540ef20c50b81af16d75ca.png" alt="img"></p><p>æ‰€æœ‰çš„æµè§ˆå™¨æ¸²æŸ“å¼•æ“å·¥ä½œæµç¨‹å¤§è‡´åˆ†ä¸º5æ­¥ï¼šåˆ›å»º <code>DOM</code> æ ‘ â€”&gt; åˆ›å»º <code>Style Rules</code> -&gt; æ„å»º <code>Render</code> æ ‘ â€”&gt; å¸ƒå±€<br><code>Layout</code> -â€”&gt; ç»˜åˆ¶ <code>Painting</code>ã€‚</p><ul><li><p>ç¬¬ä¸€æ­¥ï¼Œæ„å»º DOM æ ‘ï¼šå½“æµè§ˆå™¨æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨å“åº”çš„HTMLæ–‡æ¡£åï¼Œä¼šéå†æ–‡æ¡£èŠ‚ç‚¹ï¼Œç”ŸæˆDOMæ ‘ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨DOMæ ‘ç”Ÿæˆçš„è¿‡ç¨‹ä¸­æœ‰å¯èƒ½ä¼šè¢«CSSå’ŒJSçš„åŠ è½½æ‰§è¡Œé˜»å¡ï¼Œæ¸²æŸ“é˜»å¡ä¸‹é¢ä¼šè®²åˆ°ã€‚</p></li><li><p>ç¬¬äºŒæ­¥ï¼Œç”Ÿæˆæ ·å¼è¡¨ï¼šç”¨ CSS åˆ†æå™¨ï¼Œåˆ†æ CSS æ–‡ä»¶å’Œå…ƒç´ ä¸Šçš„ inline æ ·å¼ï¼Œç”Ÿæˆé¡µé¢çš„æ ·å¼è¡¨ï¼›</p></li><li><p>æ¸²æŸ“é˜»å¡ï¼šå½“æµè§ˆå™¨é‡åˆ°ä¸€ä¸ªscriptæ ‡ç­¾æ—¶ï¼ŒDOMæ„å»ºå°†æš‚åœï¼Œç›´åˆ°è„šæœ¬åŠ è½½æ‰§è¡Œï¼Œç„¶åç»§ç»­æ„å»ºDOMæ ‘ã€‚æ¯æ¬¡å»æ‰§è¡ŒJavascriptè„šæœ¬éƒ½ä¼šä¸¥é‡é˜»å¡DOMæ ‘æ„å»ºï¼Œå¦‚æœJavaScriptè„šæœ¬è¿˜æ“ä½œäº†CSSOMï¼Œè€Œæ­£å¥½è¿™ä¸ªCSSOMæ²¡æœ‰ä¸‹è½½å’Œæ„å»ºï¼Œé‚£ä¹ˆæµè§ˆå™¨ç”šè‡³ä¼šå»¶è¿Ÿè„šæœ¬æ‰§è¡Œå’Œæ„å»ºDOMï¼Œç›´åˆ°è¿™ä¸ªCSSOMçš„ä¸‹è½½å’Œæ„å»ºã€‚æ‰€ä»¥ï¼Œscriptæ ‡ç­¾å¼•å…¥å¾ˆé‡è¦ï¼Œå®é™…ä½¿ç”¨æ—¶å¯ä»¥éµå¾ªä¸‹é¢ä¸¤ä¸ªåŸåˆ™ï¼š</p><ul><li><p>cssä¼˜å…ˆï¼šå¼•å…¥é¡ºåºä¸Šï¼Œcssèµ„æºå…ˆäºjsèµ„æº</p></li><li><p>jsåç½®ï¼šjsä»£ç æ”¾åœ¨åº•éƒ¨ï¼Œä¸”jsåº”å°½é‡å°‘å½±å“DOMæ„å»º</p></li></ul></li></ul><blockquote><p>è¿˜æœ‰ä¸€ä¸ªå°çŸ¥è¯†ï¼šå½“è§£æhtmlæ—¶ï¼Œä¼šæŠŠæ–°æ¥çš„å…ƒç´ æ’å…¥domæ ‘é‡Œï¼ŒåŒæ—¶å»æŸ¥æ‰¾cssï¼Œç„¶åæŠŠå¯¹åº”çš„æ ·å¼è§„åˆ™åº”ç”¨åˆ°å…ƒç´ ä¸Šï¼ŒæŸ¥æ‰¾æ ·å¼è¡¨æ˜¯æŒ‰ç…§ä»å³åˆ°å·¦çš„é¡ºåºåŒ¹é…çš„ä¾‹å¦‚ï¼šdiv p {â€¦}ï¼Œä¼šå…ˆå¯»æ‰¾æ‰€æœ‰pæ ‡ç­¾å¹¶åˆ¤æ–­å®ƒçš„çˆ¶æ ‡ç­¾æ˜¯å¦ä¸ºdivä¹‹åæ‰å†³å®šè¦ä¸è¦é‡‡ç”¨è¿™ä¸ªæ ·å¼æ¸²æŸ“ã€‚æ‰€ä»¥å¹³æ—¶å†™csså°½é‡ç”¨classæˆ–è€…idï¼Œä¸è¦è¿‡åº¦å±‚å </p></blockquote><ul><li><p>ç¬¬ä¸‰æ­¥ï¼Œæ„å»ºæ¸²æŸ“æ ‘ï¼šé€šè¿‡DOMæ ‘å’ŒCSSè§„åˆ™æˆ‘ä»¬å¯ä»¥æ„å»ºæ¸²æŸ“æ ‘ã€‚æµè§ˆå™¨ä¼šä»DOMæ ‘æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ¯ä¸ªå¯è§èŠ‚ç‚¹(æ³¨æ„æ˜¯å¯è§èŠ‚ç‚¹)å¯¹æ¯ä¸ªå¯è§èŠ‚ç‚¹ï¼Œæ‰¾åˆ°å…¶é€‚é…çš„CSSè§„åˆ™å¹¶åº”ç”¨ã€‚æ¸²æŸ“æ ‘æ„å»ºå®Œåï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯å¯è§èŠ‚ç‚¹å¹¶ä¸”éƒ½å«æœ‰å…¶å†…å®¹å’Œå¯¹åº”çš„è§„åˆ™çš„æ ·å¼ã€‚è¿™ä¹Ÿæ˜¯æ¸²æŸ“æ ‘å’ŒDOMæ ‘æœ€å¤§çš„åŒºåˆ«æ‰€åœ¨ã€‚æ¸²æŸ“æ˜¯ç”¨äºæ˜¾ç¤ºï¼Œé‚£äº›ä¸å¯è§çš„å…ƒç´ å°±ä¸ä¼šåœ¨è¿™æ£µæ ‘å‡ºç°äº†ã€‚é™¤æ­¤ä»¥å¤–ï¼Œdisplay noneçš„å…ƒç´ ä¹Ÿä¸ä¼šè¢«æ˜¾ç¤ºåœ¨è¿™æ£µæ ‘é‡Œã€‚visibility hiddençš„å…ƒç´ ä¼šå‡ºç°åœ¨è¿™æ£µæ ‘é‡Œã€‚</p></li><li><p>ç¬¬å››æ­¥ï¼Œ <strong>æ¸²æŸ“å¸ƒå±€</strong> ï¼šå¸ƒå±€é˜¶æ®µä¼šä»æ¸²æŸ“æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹éå†ï¼Œç„¶åç¡®å®šæ¯ä¸ªèŠ‚ç‚¹å¯¹è±¡åœ¨é¡µé¢ä¸Šçš„ç¡®åˆ‡å¤§å°ä¸ä½ç½®ï¼Œå¸ƒå±€é˜¶æ®µçš„è¾“å‡ºæ˜¯ä¸€ä¸ªç›’å­æ¨¡å‹ï¼Œå®ƒä¼šç²¾ç¡®åœ°æ•è·æ¯ä¸ªå…ƒç´ åœ¨å±å¹•å†…çš„ç¡®åˆ‡ä½ç½®ä¸å¤§å°ã€‚</p></li><li><p>ç¬¬äº”æ­¥ï¼Œ <strong>æ¸²æŸ“æ ‘ç»˜åˆ¶</strong> ï¼šåœ¨ç»˜åˆ¶é˜¶æ®µï¼Œéå†æ¸²æŸ“æ ‘ï¼Œè°ƒç”¨æ¸²æŸ“å™¨çš„paint()æ–¹æ³•åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå…¶å†…å®¹ã€‚æ¸²æŸ“æ ‘çš„ç»˜åˆ¶å·¥ä½œæ˜¯ç”±æµè§ˆå™¨çš„UIåç«¯ç»„ä»¶å®Œæˆçš„ã€‚</p></li></ul><p><strong>æ³¨æ„ç‚¹ ï¼š</strong></p><p><strong>1ã€<code>DOM</code> æ ‘çš„æ„å»ºæ˜¯æ–‡æ¡£åŠ è½½å®Œæˆå¼€å§‹çš„ï¼Ÿ</strong> </p><p>æ„å»º <code>DOM</code>æ ‘æ˜¯ä¸€ä¸ªæ¸è¿›è¿‡ç¨‹ï¼Œä¸ºè¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæ¸²æŸ“å¼•æ“ä¼šå°½å¿«å°†å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œå®ƒä¸å¿…ç­‰åˆ°æ•´ä¸ª <code>HTML</code> æ–‡æ¡£è§£æå®Œæˆä¹‹åæ‰å¼€å§‹æ„å»º <code>render</code>æ ‘å’Œå¸ƒå±€ã€‚</p><p><strong>2ã€<code>Render</code> æ ‘æ˜¯ <code>DOM</code> æ ‘å’Œ <code>CSS</code> æ ·å¼è¡¨æ„å»ºå®Œæ¯•åæ‰å¼€å§‹æ„å»ºçš„ï¼Ÿ</strong><br>è¿™ä¸‰ä¸ªè¿‡ç¨‹åœ¨å®é™…è¿›è¡Œçš„æ—¶å€™å¹¶ä¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œè€Œæ˜¯ä¼šæœ‰äº¤å‰ï¼Œä¼šä¸€è¾¹åŠ è½½ï¼Œä¸€è¾¹è§£æï¼Œä»¥åŠä¸€è¾¹æ¸²æŸ“ã€‚</p><p><strong>3ã€<code>CSS</code> çš„è§£ææ³¨æ„ç‚¹ï¼Ÿ</strong> </p><p><code>CSS</code> çš„è§£ææ˜¯ä»&#x3D;&#x3D;å³å¾€å·¦é€†å‘&#x3D;&#x3D;è§£æçš„ï¼ŒåµŒå¥—æ ‡ç­¾è¶Šå¤šï¼Œè§£æè¶Šæ…¢ã€‚</p><p><strong>4ã€<code>JS</code> æ“ä½œçœŸå® <code>DOM</code>çš„ä»£ä»·ï¼Ÿ</strong></p><p>ä¼ ç»ŸDOMç»“æ„æ“ä½œæ–¹å¼å¯¹æ€§èƒ½çš„å½±å“å¾ˆå¤§ï¼ŒåŸå› æ˜¯é¢‘ç¹æ“ä½œDOMç»“æ„æ“ä½œä¼šå¼•èµ·é¡µé¢çš„é‡æ’(reflow)å’Œé‡ç»˜(repaint)ï¼Œæµè§ˆå™¨ä¸å¾—ä¸é¢‘ç¹åœ°è®¡ç®—å¸ƒå±€ï¼Œé‡æ–°æ’åˆ—å’Œç»˜åˆ¶é¡µé¢å…ƒç´ ï¼Œå¯¼è‡´æµè§ˆå™¨äº§ç”Ÿå·¨å¤§çš„æ€§èƒ½å¼€é”€ã€‚ç›´æ¥æ“ä½œçœŸå®<code>DOM</code>çš„æ€§èƒ½ç‰¹åˆ«å·®ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ¼”ç¤ºä¸€éã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// è·å– DIV å…ƒç´ </span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> box = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#app&#x27;</span>);</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(box);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// çœŸå® DOM æ“ä½œ</span></span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">&#x27;a&#x27;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">10000</span>; i++) &#123;</span><br><span class="language-javascript">        box.<span class="hljs-property">innerHTML</span> = i;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">&#x27;a&#x27;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">// è™šæ‹Ÿ DOM æ“ä½œ</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> num = <span class="hljs-number">0</span>;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">&#x27;b&#x27;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt;= <span class="hljs-number">10000</span>; i++) &#123;</span><br><span class="language-javascript">        num = i;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    box.<span class="hljs-property">innerHTML</span> = num;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">&#x27;b&#x27;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124112747639.png" alt="image-20221124112747639" style="zoom: 80%;" /><blockquote><p>ä»ç»“æœä¸­å¯ä»¥çœ‹å‡ºï¼Œæ“ä½œçœŸå® DOM çš„æ€§èƒ½æ˜¯éå¸¸å·®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°½å¯èƒ½çš„å¤ç”¨ï¼Œå‡å°‘ DOM æ“ä½œã€‚</p></blockquote><h4 id="è™šæ‹Ÿ-DOM-çš„å¥½å¤„"><a href="#è™šæ‹Ÿ-DOM-çš„å¥½å¤„" class="headerlink" title="è™šæ‹Ÿ DOM çš„å¥½å¤„"></a><strong>è™šæ‹Ÿ DOM çš„å¥½å¤„</strong></h4><p> è™šæ‹Ÿ <code>DOM</code> å°±æ˜¯ä¸ºäº†è§£å†³æµè§ˆå™¨æ€§èƒ½é—®é¢˜è€Œè¢«è®¾è®¡å‡ºæ¥çš„ã€‚å¦‚å‰ï¼Œè‹¥ä¸€æ¬¡æ“ä½œä¸­æœ‰ 10 æ¬¡æ›´æ–° <code>DOM</code> çš„åŠ¨ä½œï¼Œè™šæ‹Ÿ <code>DOM</code> ä¸ä¼šç«‹å³æ“ä½œ<code>DOM</code>ï¼Œè€Œæ˜¯å°†è¿™ 10 æ¬¡æ›´æ–°çš„ <code>diff</code> å†…å®¹ä¿å­˜åˆ°æœ¬åœ°ä¸€ä¸ª <code>JS</code> å¯¹è±¡ä¸­ï¼Œæœ€ç»ˆå°†è¿™ä¸ª <code>JS</code> å¯¹è±¡ä¸€æ¬¡æ€§ <code>attch</code> åˆ° <code>DOM</code>æ ‘ä¸Šï¼Œå†è¿›è¡Œåç»­æ“ä½œï¼Œé¿å…å¤§é‡æ— è°“çš„è®¡ç®—é‡ã€‚æ‰€ä»¥ï¼Œç”¨ <code>JS</code> å¯¹è±¡æ¨¡æ‹Ÿ <code>DOM</code> èŠ‚ç‚¹çš„å¥½å¤„æ˜¯ï¼Œé¡µé¢çš„æ›´æ–°å¯ä»¥å…ˆå…¨éƒ¨åæ˜ åœ¨ <code>JS</code> å¯¹è±¡(è™šæ‹Ÿ<br><code>DOM</code> )ä¸Šï¼Œæ“ä½œå†…å­˜ä¸­çš„ <code>JS</code> å¯¹è±¡çš„é€Ÿåº¦æ˜¾ç„¶è¦æ›´å¿«ï¼Œç­‰æ›´æ–°å®Œæˆåï¼Œå†å°†æœ€ç»ˆçš„ <code>JS</code> å¯¹è±¡æ˜ å°„æˆçœŸå®çš„ <code>DOM</code>ï¼Œäº¤ç”±æµè§ˆå™¨å»ç»˜åˆ¶ã€‚</p><p> è™½ç„¶è¿™ä¸€ä¸ªè™šæ‹Ÿ DOM å¸¦æ¥çš„ä¸€ä¸ªä¼˜åŠ¿ï¼Œä½†å¹¶ä¸æ˜¯å…¨éƒ¨ã€‚è™šæ‹Ÿ DOM æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºæŠ½è±¡äº†åŸæœ¬çš„æ¸²æŸ“è¿‡ç¨‹ï¼Œå®ç°äº†è·¨å¹³å°çš„èƒ½åŠ›ï¼Œè€Œä¸ä»…ä»…å±€é™äºæµè§ˆå™¨çš„DOMï¼Œå¯ä»¥æ˜¯å®‰å“å’Œ IOS çš„åŸç”Ÿç»„ä»¶ï¼Œå¯ä»¥æ˜¯è¿‘æœŸå¾ˆç«çƒ­çš„å°ç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯å„ç§GUIã€‚</p><p> å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼Œè™šæ‹Ÿ DOM åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œè¯´ç®€å•ç‚¹ï¼Œå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ï¼ŒåŒ…å«äº†<br><code>tag</code>ã€<code>props</code>ã€<code>children</code> ä¸‰ä¸ªå±æ€§ã€‚</p><blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ‰‹åŠ¨å®ç°ä¸‹ è™šæ‹Ÿ DOMã€‚</p><p>åˆ†ä¸¤ç§å®ç°æ–¹å¼ï¼š</p><p>ä¸€ç§åŸç”Ÿ js DOM æ“ä½œå®ç°ï¼›</p><p>å¦ä¸€ç§ä¸»æµè™šæ‹Ÿ DOM åº“ï¼ˆsnabbdomã€virtual-domï¼‰çš„å®ç°ï¼ˆç”¨hå‡½æ•°æ¸²æŸ“ï¼‰ï¼ˆæš‚æ—¶è¿˜ä¸ç†è§£ï¼‰</p></blockquote><p><strong>ç®—æ³•å®ç°</strong></p><p><strong>ï¼ˆ1ï¼‰</strong>ç”¨ JS å¯¹è±¡æ¨¡æ‹Ÿ DOM æ ‘ï¼š</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;virtual-dom&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Virtual DOM<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>Item 1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>Item 2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>Item 3<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span> <br><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬ç”¨ <code>JavaScript</code> å¯¹è±¡æ¥è¡¨ç¤º <code>DOM</code> èŠ‚ç‚¹ï¼Œä½¿ç”¨å¯¹è±¡çš„å±æ€§è®°å½•èŠ‚ç‚¹çš„ç±»å‹ã€å±æ€§ã€å­èŠ‚ç‚¹ç­‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Element virdual-dom å¯¹è±¡å®šä¹‰</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">String</span>&#125; <span class="hljs-variable">tagName</span> - dom å…ƒç´ åç§°</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Object</span>&#125; <span class="hljs-variable">props</span> - dom å±æ€§</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Array&lt;Element|String&gt;</span>&#125; - å­èŠ‚ç‚¹</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">Element</span>(<span class="hljs-params">tagName, props, children</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tagName</span> = tagName;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> = props;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = children;<br>    <span class="hljs-comment">// dom å…ƒç´ çš„ key å€¼ï¼Œç”¨ä½œå”¯ä¸€æ ‡è¯†ç¬¦</span><br>    <span class="hljs-keyword">if</span> (props.<span class="hljs-property">key</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = props.<span class="hljs-property">key</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">el</span>(<span class="hljs-params">tagName, props, children</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Element</span>(tagName, props, children);<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æ„å»ºè™šæ‹Ÿçš„ <code>DOM</code> ï¼Œç”¨ javascript å¯¹è±¡æ¥è¡¨ç¤º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> ul = <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;div&#x27;</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;Virtual DOM&#x27;</span> &#125;, [<br>    <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;p&#x27;</span>, &#123;&#125;, [<span class="hljs-string">&#x27;Virtual DOM&#x27;</span>]),<br>    <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;ul&#x27;</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;list&#x27;</span> &#125;, [<br>        <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;li&#x27;</span>, &#123; <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;item&#x27;</span> &#125;, [<span class="hljs-string">&#x27;Item 1&#x27;</span>]),<br>        <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;li&#x27;</span>, &#123; <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;item&#x27;</span> &#125;, [<span class="hljs-string">&#x27;Item 2&#x27;</span>]),<br>        <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;li&#x27;</span>, &#123; <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;item&#x27;</span> &#125;, [<span class="hljs-string">&#x27;Item 3&#x27;</span>])<br>    ]),<br>    <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;&#125;, [<span class="hljs-string">&#x27;Hello, World&#x27;</span>])<br>])<br><br></code></pre></td></tr></table></figure><p>ç°åœ¨ <code>ul</code> å°±æ˜¯æˆ‘ä»¬ç”¨ <code>JavaScript</code> å¯¹è±¡è¡¨ç¤ºçš„ <code>DOM</code> ç»“æ„ï¼Œæˆ‘ä»¬è¾“å‡ºæŸ¥çœ‹ <code>ul</code> å¯¹åº”çš„æ•°æ®ç»“æ„å¦‚ä¸‹ï¼š</p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124113145388.png" alt="image-20221124113145388" style="zoom: 67%;" /><p><strong>ï¼ˆ2ï¼‰</strong>å°†ç”¨ js å¯¹è±¡è¡¨ç¤ºçš„è™šæ‹Ÿ DOM è½¬æ¢æˆçœŸå® DOMï¼šéœ€è¦ç”¨åˆ° js åŸç”Ÿæ“ä½œ DOM çš„æ–¹æ³•ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * render å°†virdual-dom å¯¹è±¡æ¸²æŸ“ä¸ºå®é™… DOM å…ƒç´ </span><br><span class="hljs-comment"> */</span><br><span class="hljs-title class_">Element</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">render</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span><br>    <span class="hljs-keyword">let</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tagName</span>);<br><br>    <span class="hljs-keyword">let</span> props = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;<br>    <span class="hljs-comment">// è®¾ç½®èŠ‚ç‚¹çš„ DOM å±æ€§</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> propName <span class="hljs-keyword">in</span> props) &#123;<br>        <span class="hljs-keyword">let</span> propValue = props[propName];<br>        el.<span class="hljs-title function_">setAttribute</span>(propName, propValue)<br>    &#125;<br><br>    <span class="hljs-keyword">let</span> children = <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> || []<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> child <span class="hljs-keyword">of</span> children) &#123;<br>        <span class="hljs-keyword">let</span> childEl = (child <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Element</span>)<br>        ? child.<span class="hljs-title function_">render</span>() <span class="hljs-comment">// å¦‚æœå­èŠ‚ç‚¹ä¹Ÿæ˜¯è™šæ‹Ÿ DOM, é€’å½’æ„å»º DOM èŠ‚ç‚¹</span><br>        : <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(child) <span class="hljs-comment">// å¦‚æœæ˜¯æ–‡æœ¬ï¼Œå°±æ„å»ºæ–‡æœ¬èŠ‚ç‚¹</span><br><br>        el.<span class="hljs-title function_">appendChild</span>(childEl);<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> el;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬é€šè¿‡æŸ¥çœ‹ä»¥ä¸Š <code>render</code> æ–¹æ³•ï¼Œä¼šæ ¹æ® <code>tagName</code> æ„å»ºä¸€ä¸ªçœŸæ­£çš„ <code>DOM</code>èŠ‚ç‚¹ï¼Œç„¶åè®¾ç½®è¿™ä¸ªèŠ‚ç‚¹çš„å±æ€§ï¼Œæœ€åé€’å½’åœ°æŠŠè‡ªå·±çš„å­èŠ‚ç‚¹ä¹Ÿæ„å»ºèµ·æ¥ã€‚</p><p>æˆ‘ä»¬å°†æ„å»ºå¥½çš„ <code>DOM</code> ç»“æ„æ·»åŠ åˆ°é¡µé¢ <code>body</code> ä¸Šé¢ï¼Œå¦‚ä¸‹ï¼š</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> ulRoot = ul.<span class="hljs-title function_">render</span>();<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(ulRoot);<br><br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œé¡µé¢ <code>body</code> é‡Œé¢å°±æœ‰çœŸæ­£çš„ <code>DOM</code> ç»“æ„ï¼Œæ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124113734340.png" alt="image-20221124113734340" style="zoom:50%;" /><blockquote><p>æˆ‘ä»¬çŸ¥é“è™šæ‹Ÿ DOM çš„å¥½å¤„å’Œè™šæ‹Ÿ DOM çš„å®ç°åå°±è¦è®²è®² key çš„ä½œç”¨äº†ã€‚</p><p>è´´ä¸€ä¸‹ä¸Šé¢å®ç°åœ°å®Œæ•´ä»£ç </p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">         * Element virdual-dom å¯¹è±¡å®šä¹‰</span></span><br><span class="hljs-comment"><span class="language-javascript">         * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">String</span>&#125; <span class="hljs-variable">tagName</span> - dom å…ƒç´ åç§°</span></span><br><span class="hljs-comment"><span class="language-javascript">         * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Object</span>&#125; <span class="hljs-variable">props</span> - dom å±æ€§</span></span><br><span class="hljs-comment"><span class="language-javascript">         * <span class="hljs-doctag">@param</span> &#123;<span class="hljs-type">Array&lt;Element|String&gt;</span>&#125; - å­èŠ‚ç‚¹</span></span><br><span class="hljs-comment"><span class="language-javascript">         */</span></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Element</span>(<span class="hljs-params">tagName, props, children</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">tagName</span> = tagName;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> = props;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = children;</span><br><span class="language-javascript">        <span class="hljs-comment">// dom å…ƒç´ çš„ key å€¼ï¼Œç”¨ä½œå”¯ä¸€æ ‡è¯†ç¬¦</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (props.<span class="hljs-property">key</span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = props.<span class="hljs-property">key</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">el</span>(<span class="hljs-params">tagName, props, children</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Element</span>(tagName, props, children);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> ul = <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;div&#x27;</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;Virtual DOM&#x27;</span> &#125;, [</span><br><span class="language-javascript">        <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;p&#x27;</span>, &#123;&#125;, [<span class="hljs-string">&#x27;Virtual DOM&#x27;</span>]),</span><br><span class="language-javascript">        <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;ul&#x27;</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;list&#x27;</span> &#125;, [</span><br><span class="language-javascript">            <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;li&#x27;</span>, &#123; <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;item&#x27;</span> &#125;, [<span class="hljs-string">&#x27;Item 1&#x27;</span>]),</span><br><span class="language-javascript">            <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;li&#x27;</span>, &#123; <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;item&#x27;</span> &#125;, [<span class="hljs-string">&#x27;Item 2&#x27;</span>]),</span><br><span class="language-javascript">            <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;li&#x27;</span>, &#123; <span class="hljs-attr">class</span>: <span class="hljs-string">&#x27;item&#x27;</span> &#125;, [<span class="hljs-string">&#x27;Item 3&#x27;</span>])</span><br><span class="language-javascript">        ]),</span><br><span class="language-javascript">        <span class="hljs-title function_">el</span>(<span class="hljs-string">&#x27;div&#x27;</span>, &#123;&#125;, [<span class="hljs-string">&#x27;Hello, World&#x27;</span>])</span><br><span class="language-javascript">    ])</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">/**</span></span><br><span class="hljs-comment"><span class="language-javascript">             * render å°†virdual-dom å¯¹è±¡æ¸²æŸ“ä¸ºå®é™… DOM å…ƒç´ </span></span><br><span class="hljs-comment"><span class="language-javascript">             */</span></span><br><span class="language-javascript">    <span class="hljs-title class_">Element</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">render</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// åˆ›å»ºèŠ‚ç‚¹</span></span><br><span class="language-javascript">        <span class="hljs-keyword">let</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tagName</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">let</span> props = <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>;</span><br><span class="language-javascript">        <span class="hljs-comment">// è®¾ç½®èŠ‚ç‚¹çš„ DOM å±æ€§</span></span><br><span class="language-javascript">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> propName <span class="hljs-keyword">in</span> props) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> propValue = props[propName];</span><br><span class="language-javascript">            el.<span class="hljs-title function_">setAttribute</span>(propName, propValue)</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">let</span> children = <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> || []</span><br><span class="language-javascript">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> child <span class="hljs-keyword">of</span> children) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">let</span> childEl = (child <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Element</span>)</span><br><span class="language-javascript">            ? child.<span class="hljs-title function_">render</span>() <span class="hljs-comment">// å¦‚æœå­èŠ‚ç‚¹ä¹Ÿæ˜¯è™šæ‹Ÿ DOM, é€’å½’æ„å»º DOM èŠ‚ç‚¹</span></span><br><span class="language-javascript">            : <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(child) <span class="hljs-comment">// å¦‚æœæ˜¯æ–‡æœ¬ï¼Œå°±æ„å»ºæ–‡æœ¬èŠ‚ç‚¹</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">            el.<span class="hljs-title function_">appendChild</span>(childEl);</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> el;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> ulRoot = ul.<span class="hljs-title function_">render</span>();</span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(ulRoot);</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ul);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è™šæ‹ŸDOMä¸­keyçš„ä½œç”¨"><a href="#è™šæ‹ŸDOMä¸­keyçš„ä½œç”¨" class="headerlink" title="è™šæ‹ŸDOMä¸­keyçš„ä½œç”¨"></a><strong>è™šæ‹ŸDOMä¸­keyçš„ä½œç”¨</strong></h4><p>keyæ˜¯è™šæ‹ŸDOMå¯¹è±¡çš„æ ‡è¯†ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVueä¼šæ ¹æ®ã€æ–°æ•°æ®ã€‘ç”Ÿæˆã€æ–°çš„è™šæ‹ŸDOMã€‘,<br>éšåVueè¿›è¡Œã€æ–°è™šæ‹ŸDOMã€‘ä¸ã€æ—§è™šæ‹ŸDOMã€‘çš„å·®å¼‚æ¯”è¾ƒï¼Œæ¯”è¾ƒè§„åˆ™å¦‚ä¸‹ï¼š</p><ul><li>æ—§è™šæ‹ŸDOMä¸­æ‰¾åˆ°äº†ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„keyï¼š<ul><li>â‘ .è‹¥è™šæ‹ŸDOMä¸­å†…å®¹æ²¡å˜, ç›´æ¥ä½¿ç”¨ä¹‹å‰çš„çœŸå®DOMï¼</li><li>â‘¡.è‹¥è™šæ‹ŸDOMä¸­å†…å®¹å˜äº†, åˆ™ç”Ÿæˆæ–°çš„çœŸå®DOMï¼Œéšåæ›¿æ¢æ‰é¡µé¢ä¸­ä¹‹å‰çš„çœŸå®DOMã€‚</li></ul></li><li>æ—§è™šæ‹ŸDOMä¸­æœªæ‰¾åˆ°ä¸æ–°è™šæ‹ŸDOMç›¸åŒçš„key <ul><li>åˆ›å»ºæ–°çš„çœŸå®DOMï¼Œéšåæ¸²æŸ“åˆ°åˆ°é¡µé¢ã€‚</li></ul></li></ul><blockquote><p>å¥½äº†ï¼Œæˆ‘ä»¬çŸ¥é“äº†æœ€ç®€å•çš„keyçš„åŸç†ï¼Œå¦‚æœè¦ç»§ç»­ç ”ç©¶ä¸‹å»å°±è¦æ¶‰åŠåˆ°vueçš„æ ¸å¿ƒä¹‹ä¸€-Diffç®—æ³•ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚</p></blockquote><h3 id="ç”¨indexä½œä¸ºkeyå¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š"><a href="#ç”¨indexä½œä¸ºkeyå¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š" class="headerlink" title="ç”¨indexä½œä¸ºkeyå¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š"></a>ç”¨indexä½œä¸ºkeyå¯èƒ½ä¼šå¼•å‘çš„é—®é¢˜ï¼š</h3><p><strong>è‹¥å¯¹æ•°æ®è¿›è¡Œ ï¼šé€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œï¼š</strong></p><p>ä¼šäº§ç”Ÿæ²¡æœ‰å¿…è¦çš„çœŸå®DOMæ›´æ–° &#x3D;&#x3D;&gt; ç•Œé¢æ•ˆæœæ²¡é—®é¢˜, ä½†æ•ˆç‡ä½ã€‚</p><blockquote><p>æ¡ˆä¾‹</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- éå†æ•°ç»„ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>äººå‘˜åˆ—è¡¨ï¼ˆéå†æ•°ç»„ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click.once</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>æ·»åŠ ä¸€ä¸ªè€åˆ˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(p,index) of persons&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span><br>            &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;<br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript"><span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-attr">persons</span>: [</span><br><span class="language-javascript">&#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;001&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> &#125;,</span><br><span class="language-javascript">&#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;002&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;æå››&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span> &#125;,</span><br><span class="language-javascript">&#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;003&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;ç‹äº”&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span> &#125;</span><br><span class="language-javascript">]</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> p = &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;004&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;è€åˆ˜&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">40</span> &#125;</span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">persons</span>.<span class="hljs-title function_">unshift</span>(p)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript">&#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>è§£é‡Šï¼š</p></blockquote><p>åˆå§‹æ•°æ®</p><p>persons: [  </p><p>{ id: â€˜001â€™, name: â€˜å¼ ä¸‰â€™, age: 18 },  </p><p>{ id: â€˜002â€™, name: â€˜æå››â€™, age: 19 },  </p><p>{ id: â€˜003â€™, name: â€˜ç‹äº”â€™, age: 20 }  </p><p>]</p><p><strong>vueæ ¹æ®æ•°æ®ç”Ÿæˆè™šæ‹Ÿ DOM</strong></p><p>åˆå§‹è™šæ‹Ÿ DOM</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;0&#x27;</span>&gt;</span>å¼ ä¸‰-18<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;1&#x27;</span>&gt;</span>æå››-19<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;2&#x27;</span>&gt;</span>ç‹äº”-20<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><strong>å°†è™šæ‹Ÿ DOM è½¬ä¸º çœŸå® DOM</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124114010268.png" alt="image-20221124114010268"></p><p><code>this.persons.unshift(&#123; id: &#39;004&#39;, name: &#39;è€åˆ˜&#39;, age: 40 &#125;)</code></p><p>åœ¨ persons æ•°ç»„æœ€å‰é¢æ·»åŠ ä¸Š { id: â€˜004â€™, name: â€˜è€åˆ˜â€™, age: 40 }</p><p>æ–°æ•°æ®ï¼š</p><p>persons: [</p><p> { id: â€˜004â€™, name: â€˜è€åˆ˜â€™, age: 40 },</p><p> { id: â€˜001â€™, name: â€˜å¼ ä¸‰â€™, age: 18 },  </p><p> { id: â€˜002â€™, name: â€˜æå››â€™, age: 19 },  </p><p> { id: â€˜003â€™, name: â€˜ç‹äº”â€™, age: 20 }  </p><p>]</p><p><strong>vueæ ¹æ®æ•°æ®ç”Ÿæˆè™šæ‹Ÿ DOM</strong></p><p>æ–°è™šæ‹Ÿ DOM</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;0&#x27;</span>&gt;</span>è€åˆ˜-30<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;1&#x27;</span>&gt;</span>å¼ ä¸‰-18<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;3&#x27;</span>&gt;</span>æå››-19<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&#x27;4&#x27;</span>&gt;</span>ç‹äº”-20<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>å°†è™šæ‹Ÿ DOM è½¬ä¸º çœŸå® DOM</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124114120362.png" alt="image-20221124114120362"></p><p>å› ä¸ºè€åˆ˜è¢«æ’åˆ°ç¬¬ä¸€ä¸ªï¼Œé‡åˆ·äº† key çš„å€¼ï¼Œvue Diff ç®—æ³• æ ¹æ® key çš„å€¼ åˆ¤æ–­ è™šæ‹ŸDOM å…¨éƒ¨å‘ç”Ÿäº†æ”¹å˜ï¼Œç„¶åå…¨éƒ¨é‡æ–°ç”Ÿæˆæ–°çš„ çœŸå®<br>DOMã€‚å®é™…ä¸Šï¼Œå¼ ä¸‰ï¼Œæå››ï¼Œç‹äº”å¹¶æ²¡æœ‰å‘ç”Ÿæ›´æ”¹ï¼Œæ˜¯å¯ä»¥ç›´æ¥å¤ç”¨ä¹‹å‰çš„çœŸå® DOMï¼Œè€Œå› ä¸º key çš„é”™ä¹±ï¼Œå¯¼è‡´è¦å…¨éƒ¨é‡æ–°ç”Ÿæˆï¼Œé€ æˆäº†æ€§èƒ½çš„æµªè´¹ã€‚</p><blockquote><p>æ¥å¼ å°šç¡…è°·çš„å›¾</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/ec80a7ae139642d09d70e77ca37e0a52.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>å¦‚æœç»“æ„ä¸­è¿˜åŒ…å«è¾“å…¥ç±»çš„DOM ï¼š</strong></p><p>ä¼šäº§ç”Ÿé”™è¯¯DOMæ›´æ–° &#x3D;&#x3D;&gt; ç•Œé¢æœ‰é—®é¢˜ã€‚</p><blockquote><p>è¿™å›é€ æˆçš„å°±ä¸æ˜¯æ€§èƒ½æµªè´¹äº†ï¼Œä¼šç›´æ¥å¯¼è‡´é¡µé¢çš„é”™è¯¯</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124114210283.png" alt="image-20221124114210283"></p><h3 id="ç»“è®ºï¼š"><a href="#ç»“è®ºï¼š" class="headerlink" title="ç»“è®ºï¼š"></a>ç»“è®ºï¼š</h3><ul><li>æœ€å¥½ä½¿ç”¨æ¯æ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ä½œä¸ºkey, æ¯”å¦‚idã€æ‰‹æœºå·ã€èº«ä»½è¯å·ã€å­¦å·ç­‰å”¯ä¸€å€¼</li><li>å¦‚æœä¸å­˜åœ¨å¯¹æ•°æ®çš„é€†åºæ·»åŠ ã€é€†åºåˆ é™¤ç­‰ç ´åé¡ºåºæ“ä½œï¼Œä»…ç”¨äºæ¸²æŸ“åˆ—è¡¨ç”¨äºå±•ç¤ºï¼Œä½¿ç”¨indexä½œä¸ºkeyæ˜¯æ²¡æœ‰é—®é¢˜çš„</li></ul><blockquote><p>æ¥å¼ å°šç¡…è°·çš„å›¾ï¼Œæ­£ç»ä½¿ç”¨ key</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e5b3f8a66d7441e5bcff0a2525266759.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="åˆ—è¡¨è¿‡æ»¤"><a href="#åˆ—è¡¨è¿‡æ»¤" class="headerlink" title="åˆ—è¡¨è¿‡æ»¤"></a>åˆ—è¡¨è¿‡æ»¤</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åˆ—è¡¨è¿‡æ»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>äººå‘˜åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥åå­—&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;keyWord&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(p,index) of filPersons&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;p.id&quot;</span>&gt;</span><br>      &#123;&#123; p.name &#125;&#125;-&#123;&#123; p.age &#125;&#125;-&#123;&#123; p.sex &#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-comment">// ç”¨ watch å®ç°</span></span><br><span class="language-javascript">  <span class="hljs-comment">// #region </span></span><br><span class="language-javascript">  <span class="hljs-comment">/* new Vue(&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">el: &#x27;#root&#x27;,</span></span><br><span class="hljs-comment"><span class="language-javascript">data: &#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">keyWord: &#x27;&#x27;,</span></span><br><span class="hljs-comment"><span class="language-javascript">persons: [</span></span><br><span class="hljs-comment"><span class="language-javascript">&#123; id: &#x27;001&#x27;, name: &#x27;é©¬å†¬æ¢…&#x27;, age: 19, sex: &#x27;å¥³&#x27; &#125;,</span></span><br><span class="hljs-comment"><span class="language-javascript">&#123; id: &#x27;002&#x27;, name: &#x27;å‘¨å†¬é›¨&#x27;, age: 20, sex: &#x27;å¥³&#x27; &#125;,</span></span><br><span class="hljs-comment"><span class="language-javascript">&#123; id: &#x27;003&#x27;, name: &#x27;å‘¨æ°ä¼¦&#x27;, age: 21, sex: &#x27;ç”·&#x27; &#125;,</span></span><br><span class="hljs-comment"><span class="language-javascript">&#123; id: &#x27;004&#x27;, name: &#x27;æ¸©å…†ä¼¦&#x27;, age: 22, sex: &#x27;ç”·&#x27; &#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">],</span></span><br><span class="hljs-comment"><span class="language-javascript">filPersons: []</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;,</span></span><br><span class="hljs-comment"><span class="language-javascript">watch: &#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">keyWord: &#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">immediate: true,</span></span><br><span class="hljs-comment"><span class="language-javascript">handler(val) &#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">this.filPersons = this.persons.filter((p) =&gt; &#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">return p.name.indexOf(val) !== -1</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;)</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;) */</span></span><br><span class="language-javascript">  <span class="hljs-comment">//#endregion</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// ç”¨ computed å®ç°</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">keyWord</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">persons</span>: [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;001&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;é©¬å†¬æ¢…&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;å¥³&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;002&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å‘¨å†¬é›¨&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;å¥³&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;003&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å‘¨æ°ä¼¦&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">21</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;ç”·&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;004&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;æ¸©å…†ä¼¦&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">22</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;ç”·&#x27;</span> &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">filPersons</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">persons</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> p.<span class="hljs-property">name</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">keyWord</span>) !== -<span class="hljs-number">1</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;) </span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221112213931286.png" alt="image-20221112213931286"></p><h3 id="åˆ—è¡¨æ’åº"><a href="#åˆ—è¡¨æ’åº" class="headerlink" title="åˆ—è¡¨æ’åº"></a>åˆ—è¡¨æ’åº</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åˆ—è¡¨æ’åº<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>äººå‘˜åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥åå­—&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;keyWord&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sortType = 2&quot;</span>&gt;</span>å¹´é¾„å‡åº<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sortType = 1&quot;</span>&gt;</span>å¹´é¾„é™åº<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sortType = 0&quot;</span>&gt;</span>åŸé¡ºåº<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(p,index) of filPersons&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;p.id&quot;</span>&gt;</span><br>      &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;-&#123;&#123;p.sex&#125;&#125;<br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">keyWord</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">sortType</span>: <span class="hljs-number">0</span>, <span class="hljs-comment">// 0åŸé¡ºåº 1é™åº 2å‡åº</span></span><br><span class="language-javascript">      <span class="hljs-attr">persons</span>: [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;001&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;é©¬å†¬æ¢…&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;å¥³&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;002&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å‘¨å†¬é›¨&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">31</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;å¥³&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;003&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å‘¨æ°ä¼¦&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;ç”·&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&#x27;004&#x27;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;æ¸©å…†ä¼¦&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>, <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;ç”·&#x27;</span> &#125;</span><br><span class="language-javascript">      ]</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">filPersons</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> arr = <span class="hljs-variable language_">this</span>.<span class="hljs-property">persons</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> p.<span class="hljs-property">name</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">keyWord</span>) !== -<span class="hljs-number">1</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">        <span class="hljs-comment">//åˆ¤æ–­ä¸€ä¸‹æ˜¯å¦éœ€è¦æ’åº</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">sortType</span>) &#123;</span><br><span class="language-javascript">          arr.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">p1, p2</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">sortType</span> === <span class="hljs-number">1</span> ? p2.<span class="hljs-property">age</span> - p1.<span class="hljs-property">age</span> : p1.<span class="hljs-property">age</span> - p2.<span class="hljs-property">age</span></span><br><span class="language-javascript">          &#125;)</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> arr</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1379492/1643211061137-37aec6e3-9594-434d-b2d9-d31f752992e1.png" alt="image.png"></p><h2 id="1-14-vue-ç›‘æµ‹data-ä¸­çš„-æ•°æ®"><a href="#1-14-vue-ç›‘æµ‹data-ä¸­çš„-æ•°æ®" class="headerlink" title="1.14 vue ç›‘æµ‹data ä¸­çš„ æ•°æ®"></a>1.14 vue ç›‘æµ‹data ä¸­çš„ æ•°æ®</h2><p>å…ˆæ¥ä¸ªæ¡ˆä¾‹å¼•å…¥ä¸€ä¸‹ï¼š</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>äººå‘˜åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;updateMei&quot;</span>&gt;</span>æ›´æ–°é©¬å†¬æ¢…çš„ä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(p,index) of persons&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;p.id&quot;</span>&gt;</span><br>            &#123;&#123;p.name&#125;&#125;-&#123;&#123;p.age&#125;&#125;-&#123;&#123;p.sex&#125;&#125;<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span> <br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">persons</span>:[</span><br><span class="language-javascript">                &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;001&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;é©¬å†¬æ¢…&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">30</span>,<span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;å¥³&#x27;</span>&#125;,</span><br><span class="language-javascript">                &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;002&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å‘¨å†¬é›¨&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">31</span>,<span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;å¥³&#x27;</span>&#125;,</span><br><span class="language-javascript">                &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;003&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å‘¨æ°ä¼¦&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,<span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;ç”·&#x27;</span>&#125;,</span><br><span class="language-javascript">                &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;004&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;æ¸©å…†ä¼¦&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">19</span>,<span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;ç”·&#x27;</span>&#125;</span><br><span class="language-javascript">            ]</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">updateMei</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// this.persons[0].name = &#x27;é©¬è€å¸ˆ&#x27; //å¥æ•ˆ</span></span><br><span class="language-javascript">                <span class="hljs-comment">// this.persons[0].age = 50 //å¥æ•ˆ</span></span><br><span class="language-javascript">                <span class="hljs-comment">// this.persons[0].sex = &#x27;ç”·&#x27; //å¥æ•ˆ</span></span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">persons</span>[<span class="hljs-number">0</span>] = &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;001&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;é©¬è€å¸ˆ&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">50</span>,<span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;ç”·&#x27;</span>&#125; <span class="hljs-comment">//ä¸å¥æ•ˆ</span></span><br><span class="language-javascript">                <span class="hljs-comment">// this.persons.splice(0,1,&#123;id:&#x27;001&#x27;,name:&#x27;é©¬è€å¸ˆ&#x27;,age:50,sex:&#x27;ç”·&#x27;&#125;)</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;) </span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>ç‚¹å‡»æ›´æ–°é©¬å†¬æ¢…çš„ä¿¡æ¯ï¼Œé©¬å†¬æ¢…çš„æ•°æ®å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124114422193.png" alt="image-20221124114422193"></p><p>æˆ‘ä»¬æ¥çœ‹çœ‹æ§åˆ¶å°ï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124114436786.png" alt="image-20221124114436786"></p><p>æ§åˆ¶å°ä¸Šçš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œè¯´æ˜ï¼Œè¿™ä¸ªæ›´æ”¹çš„æ•°æ®å¹¶æ²¡æœ‰è¢« vue ç›‘æµ‹åˆ°ã€‚</p><p>æ‰€ä»¥æˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹ Vue ç›‘æµ‹çš„åŸç†ã€‚</p><p>æˆ‘ä»¬å…ˆç ”ç©¶ Vue å¦‚ä½•ç›‘æµ‹ å¯¹è±¡é‡Œçš„æ•°æ®</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åç§°ï¼š&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š&#123;&#123;address&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">//é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å®¶é‡Œè¹²å¤§å­¦&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;China&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">student</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;tom&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">age</span>:&#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">rAge</span>:<span class="hljs-number">40</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">sAge</span>:<span class="hljs-number">29</span>,</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-attr">friends</span>:[</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jerry&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">35</span>&#125;</span><br><span class="language-javascript">                ]</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>è®²ä¸€ä¸‹è§£ææ¨¡æ¿åé¢çš„æ“ä½œâ€”ã€‹è°ƒç”¨ set æ–¹æ³•æ—¶ï¼Œå°±ä¼šå»è§£ææ¨¡æ¿â€”â€“&gt;ç”Ÿæˆæ–°çš„è™šæ‹Ÿ DOMâ€”â€“&gt;æ–°æ—§DOM å¯¹æ¯” â€”â€“&gt; æ›´æ–°é¡µé¢</p></blockquote><p>æ¨¡æ‹Ÿä¸€ä¸‹ vue ä¸­çš„ æ•°æ®ç›‘æµ‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html">     <span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> data = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>,</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//åˆ›å»ºä¸€ä¸ªç›‘è§†çš„å®ä¾‹å¯¹è±¡ï¼Œç”¨äºç›‘è§†dataä¸­å±æ€§çš„å˜åŒ–</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> obs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Observer</span>(data)</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obs)</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-comment">//å‡†å¤‡ä¸€ä¸ªvmå®ä¾‹å¯¹è±¡</span></span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> vm = &#123;&#125;</span><br><span class="language-javascript">    vm.<span class="hljs-property">_data</span> = data = obs</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Observer</span>(<span class="hljs-params">obj</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//æ±‡æ€»å¯¹è±¡ä¸­æ‰€æœ‰çš„å±æ€§å½¢æˆä¸€ä¸ªæ•°ç»„</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> keys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj)</span><br><span class="language-javascript">        <span class="hljs-comment">//éå†</span></span><br><span class="language-javascript">        keys.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-variable language_">this</span>, k, &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> obj[k]</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">set</span>(<span class="hljs-params">val</span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;k&#125;</span>è¢«æ”¹äº†ï¼Œæˆ‘è¦å»è§£ææ¨¡æ¿ï¼Œç”Ÿæˆè™šæ‹ŸDOM.....æˆ‘è¦å¼€å§‹å¿™äº†`</span>)</span><br><span class="language-javascript">                    obj[k] = val</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;)</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124114942841.png" alt="image-20221124114942841"></p><p><strong>Vue.set çš„ä½¿ç”¨</strong></p><p><code>Vue.set(targetï¼ŒpropertyName/indexï¼Œvalue)</code> æˆ–</p><p><code>vm.$set(targetï¼ŒpropertyName/indexï¼Œvalue)</code></p><p><strong>ç”¨æ³•</strong> ï¼š</p><p>å‘å“åº”å¼å¯¹è±¡ä¸­æ·»åŠ ä¸€ä¸ª propertyï¼Œå¹¶ç¡®ä¿è¿™ä¸ªæ–° property åŒæ ·æ˜¯å“åº”å¼çš„ï¼Œä¸”è§¦å‘è§†å›¾æ›´æ–°ã€‚å®ƒå¿…é¡»ç”¨äºå‘å“åº”å¼å¯¹è±¡ä¸Šæ·»åŠ æ–°propertyï¼Œå› ä¸º Vue æ— æ³•æ¢æµ‹æ™®é€šçš„æ–°å¢ property (æ¯”å¦‚ <code>vm.myObject.newProperty = &#39;hi&#39;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å­¦ç”Ÿä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addSex&quot;</span>&gt;</span>æ·»åŠ æ€§åˆ«å±æ€§ï¼Œé»˜è®¤å€¼ï¼šç”·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span> <span class="hljs-comment">//é˜»æ­¢ vue åœ¨å¯åŠ¨æ—¶ç”Ÿæˆç”Ÿäº§æç¤ºã€‚</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">student</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;tom&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">age</span>:<span class="hljs-number">18</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">hobby</span>:[<span class="hljs-string">&#x27;æŠ½çƒŸ&#x27;</span>,<span class="hljs-string">&#x27;å–é…’&#x27;</span>,<span class="hljs-string">&#x27;çƒ«å¤´&#x27;</span>],</span><br><span class="language-javascript">                <span class="hljs-attr">friends</span>:[</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;jerry&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">35</span>&#125;,</span><br><span class="language-javascript">                    &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;tony&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">36</span>&#125;</span><br><span class="language-javascript">                ]</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">addSex</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// Vue.set(this.student,&#x27;sex&#x27;,&#x27;ç”·&#x27;)</span></span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.$set(<span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>,<span class="hljs-string">&#x27;sex&#x27;</span>,<span class="hljs-string">&#x27;ç”·&#x27;</span>)</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Vue.set() æˆ– vm.$set æœ‰ç¼ºé™·ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/954f0312289748c189bac545b4463c63.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><blockquote><p>å°±æ˜¯ vm å’Œ _data</p></blockquote><p>çœ‹å®Œäº† vue ç›‘æµ‹å¯¹è±¡ä¸­çš„æ•°æ®ï¼Œå†æ¥çœ‹çœ‹ vue å¦‚ä½•ç›‘æµ‹ æ•°ç»„é‡Œçš„æ•°æ®</p><blockquote><p>å…ˆå†™ä¸ªä»£ç æ¡ˆä¾‹</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å­¦ç”Ÿä¿¡æ¯<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;student.age++&quot;</span>&gt;</span>å¹´é¾„+1å²<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addSex&quot;</span>&gt;</span>æ·»åŠ æ€§åˆ«å±æ€§ï¼Œé»˜è®¤å€¼ï¼šç”·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;student.sex = &#x27;æœªçŸ¥&#x27; &quot;</span>&gt;</span>ä¿®æ”¹æ€§åˆ«<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addFriend&quot;</span>&gt;</span>åœ¨åˆ—è¡¨é¦–ä½æ·»åŠ ä¸€ä¸ªæœ‹å‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;updateFirstFriendName&quot;</span>&gt;</span>ä¿®æ”¹ç¬¬ä¸€ä¸ªæœ‹å‹çš„åå­—ä¸ºï¼šå¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;delteFirstFriendName&quot;</span>&gt;</span>åˆ é™¤ç¬¬ä¸€ä¸ªæœ‹å‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addHobby&quot;</span>&gt;</span>æ·»åŠ ä¸€ä¸ªçˆ±å¥½<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;updateHobby&quot;</span>&gt;</span>ä¿®æ”¹ç¬¬ä¸€ä¸ªçˆ±å¥½ä¸ºï¼šå¼€è½¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;removeSmoke&quot;</span>&gt;</span>è¿‡æ»¤æ‰çˆ±å¥½ä¸­çš„æŠ½çƒŸ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å§“åï¼š&#123;&#123; student.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¹´é¾„ï¼š&#123;&#123; student.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;student.sex&quot;</span>&gt;</span>æ€§åˆ«ï¼š&#123;&#123;student.sex&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>çˆ±å¥½ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(h,index) in student.hobby&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>&#123;&#123; h &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æœ‹å‹ä»¬ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(f,index) in student.friends&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;index&quot;</span>&gt;</span>&#123;&#123; f.name &#125;&#125;--&#123;&#123; f.age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> vm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">student</span>: &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;tom&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">hobby</span>: [<span class="hljs-string">&#x27;æŠ½çƒŸ&#x27;</span>, <span class="hljs-string">&#x27;å–é…’&#x27;</span>, <span class="hljs-string">&#x27;çƒ«å¤´&#x27;</span>],</span><br><span class="language-javascript">                    <span class="hljs-attr">friends</span>: [</span><br><span class="language-javascript">                        &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jerry&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">35</span> &#125;,</span><br><span class="language-javascript">                        &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;tony&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">36</span> &#125;</span><br><span class="language-javascript">                    ]</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">addSex</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-comment">// Vue.set(this.student,&#x27;sex&#x27;,&#x27;ç”·&#x27;)</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.$set(<span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>, <span class="hljs-string">&#x27;sex&#x27;</span>, <span class="hljs-string">&#x27;ç”·&#x27;</span>)</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">addFriend</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">friends</span>.<span class="hljs-title function_">unshift</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">70</span> &#125;)</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">updateFirstFriendName</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-comment">//this.student.friends[0]æ˜¯å¯¹è±¡é»˜è®¤æ˜¯å“åº”å¼</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">friends</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span> = <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span></span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">delteFirstFriendName</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">friends</span>[<span class="hljs-number">0</span>]=&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;jack&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">70</span> &#125;</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">addHobby</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">hobby</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;å­¦ä¹ &#x27;</span>)</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">updateHobby</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-comment">// this.student.hobby.splice(0,1,&#x27;å¼€è½¦&#x27;)</span></span><br><span class="language-javascript">                    <span class="hljs-comment">// Vue.set(this.student.hobby,0,&#x27;å¼€è½¦&#x27;)</span></span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.$set(<span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">hobby</span>, <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;å¼€è½¦&#x27;</span>)</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">                <span class="hljs-title function_">removeSmoke</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">hobby</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">student</span>.<span class="hljs-property">hobby</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">h</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">                        <span class="hljs-keyword">return</span> h !== <span class="hljs-string">&#x27;æŠ½çƒŸ&#x27;</span></span><br><span class="language-javascript">                    &#125;)</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124115132933.png" alt="image-20221124115132933"></p><blockquote><p>æ‰€ä»¥æˆ‘ä»¬é€šè¿‡ vm._data.student.hobby[0] &#x3D; â€˜aaaâ€™ &#x2F;&#x2F; ä¸å¥æ•ˆ</p><p>vue ç›‘æµ‹åœ¨æ•°ç»„é‚£æ²¡æœ‰ getter å’Œ setterï¼Œæ‰€ä»¥ç›‘æµ‹ä¸åˆ°æ•°æ®çš„æ›´æ”¹ï¼Œä¹Ÿä¸ä¼šå¼•èµ·é¡µé¢çš„æ›´æ–°</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124115153647.png" alt="image-20221124115153647"></p><p>æ—¢ç„¶ vue åœ¨å¯¹æ•°ç»„æ— æ³•é€šè¿‡ getter å’Œ setter è¿›è¡Œæ•°æ®ç›‘è§†ï¼Œé‚£ vue åˆ°åº•å¦‚ä½•ç›‘è§†æ•°ç»„æ•°æ®çš„å˜åŒ–å‘¢ï¼Ÿ</p><p>vueå¯¹æ•°ç»„çš„ç›‘æµ‹æ˜¯é€šè¿‡ åŒ…è£…æ•°ç»„ä¸Šå¸¸ç”¨çš„ç”¨äºä¿®æ”¹æ•°ç»„çš„æ–¹æ³•æ¥å®ç°çš„ã€‚</p><p>vueå®˜ç½‘çš„è§£é‡Šï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124115209402.png" alt="image-20221124115209402"></p><p><strong>æ€»ç»“ ï¼š</strong></p><p>Vueç›‘è§†æ•°æ®çš„åŸç†ï¼š</p><ol><li><p>vueä¼šç›‘è§†data<strong>ä¸­æ‰€æœ‰å±‚æ¬¡çš„æ•°æ®</strong></p></li><li><p>å¦‚ä½•ç›‘æµ‹<strong>å¯¹è±¡</strong>ä¸­çš„æ•°æ®ï¼Ÿ</p><p>é€šè¿‡setterå®ç°ç›‘è§†ï¼Œä¸”è¦åœ¨new Vueæ—¶å°±ä¼ å…¥è¦ç›‘æµ‹çš„æ•°æ®ã€‚</p><ul><li>å¯¹è±¡ä¸­åè¿½åŠ çš„å±æ€§ï¼ŒVueé»˜è®¤ä¸åšå“åº”å¼å¤„ç†</li><li>å¦‚éœ€ç»™åæ·»åŠ çš„å±æ€§åšå“åº”å¼ï¼Œè¯·ä½¿ç”¨å¦‚ä¸‹APIï¼š</li></ul></li></ol><p><code>Vue.set(targetï¼ŒpropertyName/indexï¼Œvalue) </code></p><p><code>vm.$set(targetï¼ŒpropertyName/indexï¼Œvalue)</code></p><ol start="3"><li><p>å¦‚ä½•ç›‘æµ‹æ•°ç»„ä¸­çš„æ•°æ®ï¼Ÿ</p><p>é€šè¿‡åŒ…è£¹æ•°ç»„æ›´æ–°å…ƒç´ çš„æ–¹æ³•å®ç°ï¼Œæœ¬è´¨å°±æ˜¯åšäº†ä¸¤ä»¶äº‹ï¼š</p><ul><li>è°ƒç”¨åŸç”Ÿå¯¹åº”çš„æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œæ›´æ–°</li><li>é‡æ–°è§£ææ¨¡æ¿ï¼Œè¿›è€Œæ›´æ–°é¡µé¢</li></ul></li><li><p>åœ¨Vueä¿®æ”¹æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ ä¸€å®šè¦ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</p><ul><li>ä½¿ç”¨è¿™äº›API:push()ã€pop()ã€shift()ã€unshift()ã€splice()ã€sort()ã€reverse()</li><li>Vue.set() æˆ– vm.$set()</li></ul></li></ol><blockquote><p>ç‰¹åˆ«æ³¨æ„ï¼šVue.set() å’Œ vm.$set() ä¸èƒ½ç»™vm æˆ– vmçš„æ ¹æ•°æ®å¯¹è±¡ æ·»åŠ å±æ€§ï¼ï¼ï¼</p></blockquote><h2 id="1-15-æ”¶é›†è¡¨å•æ•°æ®"><a href="#1-15-æ”¶é›†è¡¨å•æ•°æ®" class="headerlink" title="1.15 æ”¶é›†è¡¨å•æ•°æ®"></a>1.15 æ”¶é›†è¡¨å•æ•°æ®</h2><p>æ”¶é›†è¡¨å•æ•°æ®</p><ul><li><p>è‹¥<code>&lt;input type=&quot;text&quot;/&gt;</code>ï¼Œåˆ™v-modelæ”¶é›†çš„æ˜¯valueå€¼ï¼Œç”¨æˆ·è¾“å…¥çš„å†…å®¹å°±æ˜¯valueå€¼</p></li><li><p>è‹¥<code>&lt;input type=&quot;radio&quot;/&gt;</code>ï¼Œåˆ™v-modelæ”¶é›†çš„æ˜¯valueå€¼ï¼Œä¸”è¦ç»™æ ‡ç­¾é…ç½®valueå±æ€§</p></li><li><p>è‹¥<code>&lt;input type=&quot;checkbox&quot;/&gt;</code> </p><ul><li>æ²¡æœ‰é…ç½®valueå±æ€§ï¼Œé‚£ä¹ˆæ”¶é›†çš„æ˜¯checkedå±æ€§ï¼ˆå‹¾é€‰ or æœªå‹¾é€‰ï¼Œæ˜¯å¸ƒå°”å€¼ï¼‰</li><li>é…ç½®äº†valueå±æ€§<ul><li>v-modelçš„åˆå§‹å€¼æ˜¯éæ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯checkedï¼ˆå‹¾é€‰ or æœªå‹¾é€‰ï¼Œæ˜¯å¸ƒå°”å€¼ï¼‰</li><li>v-modelçš„åˆå§‹å€¼æ˜¯æ•°ç»„ï¼Œé‚£ä¹ˆæ”¶é›†çš„å°±æ˜¯valueç»„æˆçš„æ•°ç»„</li></ul></li></ul></li><li><p>v-modelçš„ä¸‰ä¸ªä¿®é¥°ç¬¦</p><ul><li><p>lazyå¤±å»ç„¦ç‚¹åå†æ”¶é›†æ•°æ®</p></li><li><p>number è¾“å…¥å­—ç¬¦ä¸²è½¬ä¸ºæœ‰æ•ˆçš„æ•°å­—</p></li><li><p>trimè¾“å…¥é¦–å°¾ç©ºæ ¼è¿‡æ»¤</p></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>æ”¶é›†è¡¨å•æ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>    è´¦å·ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model.trim</span>=<span class="hljs-string">&quot;userInfo.account&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    å¯†ç ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.password&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    å¹´é¾„ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span> <span class="hljs-attr">v-model.number</span>=<span class="hljs-string">&quot;userInfo.age&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    æ€§åˆ«ï¼š<br>    ç”·<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;male&quot;</span>&gt;</span><br>    å¥³<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;sex&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.sex&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;female&quot;</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    çˆ±å¥½ï¼š<br>    å­¦ä¹ <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;study&quot;</span>&gt;</span><br>    æ‰“æ¸¸æˆ<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;game&quot;</span>&gt;</span><br>    åƒé¥­<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.hobby&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;eat&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span><br>    æ‰€å±æ ¡åŒº<br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.city&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>è¯·é€‰æ‹©æ ¡åŒº<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;beijing&quot;</span>&gt;</span>åŒ—äº¬<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;shanghai&quot;</span>&gt;</span>ä¸Šæµ·<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;shenzhen&quot;</span>&gt;</span>æ·±åœ³<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;wuhan&quot;</span>&gt;</span>æˆéƒ½<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    å…¶ä»–ä¿¡æ¯ï¼š<br>    <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">v-model.lazy</span>=<span class="hljs-string">&quot;userInfo.other&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;userInfo.agree&quot;</span>&gt;</span>é˜…è¯»å¹¶æ¥å—<br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://www.yuque.com/cessstudy&quot;</span>&gt;</span>ã€Šç”¨æˆ·åè®®ã€‹<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">userInfo</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">account</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;female&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">hobby</span>: [],</span><br><span class="language-javascript">        <span class="hljs-attr">city</span>: <span class="hljs-string">&#x27;beijing&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">other</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">agree</span>: <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">demo</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">userInfo</span>))</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-16-è¿‡æ»¤å™¨ï¼ˆéé‡ç‚¹-Vue3å·²ç§»é™¤"><a href="#1-16-è¿‡æ»¤å™¨ï¼ˆéé‡ç‚¹-Vue3å·²ç§»é™¤" class="headerlink" title="1.16 è¿‡æ»¤å™¨ï¼ˆéé‡ç‚¹,Vue3å·²ç§»é™¤)"></a>1.16 <del>è¿‡æ»¤å™¨</del>ï¼ˆéé‡ç‚¹,Vue3å·²ç§»é™¤)</h2><p>å®šä¹‰ï¼šå¯¹è¦æ˜¾ç¤ºçš„æ•°æ®è¿›è¡Œç‰¹å®šæ ¼å¼åŒ–åå†æ˜¾ç¤ºï¼ˆé€‚ç”¨äºä¸€äº›ç®€å•é€»è¾‘çš„å¤„ç†ï¼‰</p><ul><li><p>æ³¨å†Œè¿‡æ»¤å™¨ï¼š</p><ul><li><p>Vue.filter(name, callback)å…¨å±€è¿‡æ»¤å™¨</p></li><li><p>new Vue {filters: {}} å±€éƒ¨è¿‡æ»¤å™¨</p></li></ul></li><li><p>ä½¿ç”¨è¿‡æ»¤å™¨ï¼š<code>&#123;&#123; xxx | è¿‡æ»¤å™¨å&#125;&#125;</code>æˆ– v-bind:å±æ€§ &#x3D; â€œxxx | è¿‡æ»¤å™¨åâ€<br>å¤‡æ³¨ï¼š</p><ul><li><p>è¿‡æ»¤å™¨å¯ä»¥æ¥æ”¶é¢å¤–å‚æ•°ï¼Œå¤šä¸ªè¿‡æ»¤å™¨ä¹Ÿå¯ä»¥ä¸²è”</p></li><li><p>å¹¶æ²¡æœ‰æ”¹å˜åŸæœ¬çš„æ•°æ®ï¼Œè€Œæ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ®</p></li></ul></li></ul><p>å¤„ç†æ—¶é—´çš„åº“momentä½“ç§¯è¾ƒå¤§ dayjsè½»é‡çº§</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è¿‡æ»¤å™¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://cdn.bootcdn.net/ajax/libs/dayjs/1.10.6/dayjs.min.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ—¶é—´<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å½“å‰æ—¶é—´æˆ³ï¼š&#123;&#123;time&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è½¬æ¢åæ—¶é—´ï¼š&#123;&#123;time | timeFormater()&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è½¬æ¢åæ—¶é—´ï¼š&#123;&#123;time | timeFormater(&#x27;YYYY-MM-DD HH:mm:ss&#x27;)&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>æˆªå–å¹´æœˆæ—¥ï¼š&#123;&#123;time | timeFormater() | mySlice&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"><span class="hljs-comment">// å…¨å±€è¿‡æ»¤å™¨</span></span><br><span class="language-javascript"><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-string">&#x27;mySlice&#x27;</span>,<span class="hljs-keyword">function</span>(<span class="hljs-params">value</span>)&#123;</span><br><span class="language-javascript"><span class="hljs-keyword">return</span> value.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>,<span class="hljs-number">11</span>)</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">time</span>:<span class="hljs-number">1626750147900</span>,</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript"><span class="hljs-comment">// å±€éƒ¨è¿‡æ»¤å™¨</span></span><br><span class="language-javascript">            <span class="hljs-attr">filters</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">timeFormater</span>(<span class="hljs-params">value, str=<span class="hljs-string">&quot;YYYYå¹´MMæœˆDDæ—¥ HH:mm:ss&quot;</span></span>)&#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> <span class="hljs-title function_">dayjs</span>(value).<span class="hljs-title function_">format</span>(str)</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><blockquote><p>å¤‡æ³¨ï¼š</p><p>1.è¿‡æ»¤å™¨ä¹Ÿå¯ä»¥æ¥æ”¶é¢å¤–å‚æ•°ã€å¤šä¸ªè¿‡æ»¤å™¨ä¹Ÿå¯ä»¥ä¸²è”</p><p>2.å¹¶æ²¡æœ‰æ”¹å˜åŸæœ¬çš„æ•°æ®, æ˜¯äº§ç”Ÿæ–°çš„å¯¹åº”çš„æ•°æ®</p></blockquote><h2 id="1-17-å†…ç½®æŒ‡ä»¤"><a href="#1-17-å†…ç½®æŒ‡ä»¤" class="headerlink" title="1.17 å†…ç½®æŒ‡ä»¤"></a>1.17 å†…ç½®æŒ‡ä»¤</h2><p>ä¹‹å‰å­¦è¿‡çš„æŒ‡ä»¤ï¼š </p><ul><li>v-bindå•å‘ç»‘å®šè§£æè¡¨è¾¾å¼ï¼Œå¯ç®€å†™ä¸º:</li><li>v-modelåŒå‘æ•°æ®ç»‘å®š</li><li>v-foréå†æ•°ç»„ &#x2F; å¯¹è±¡ &#x2F; å­—ç¬¦ä¸²</li><li>v-onç»‘å®šäº‹ä»¶ç›‘å¬ï¼Œå¯ç®€å†™ä¸º<code>@</code></li><li>v-showæ¡ä»¶æ¸²æŸ“ (åŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å±•ç¤º)</li><li>v-ifæ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰</li><li>v-else-ifæ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰</li><li>v-elseæ¡ä»¶æ¸²æŸ“ï¼ˆåŠ¨æ€æ§åˆ¶èŠ‚ç‚¹æ˜¯å¦å­˜å­˜åœ¨ï¼‰</li></ul><p><strong>v-textæŒ‡ä»¤ ï¼š</strong>(ä½¿ç”¨çš„æ¯”è¾ƒå°‘)</p><p>1.ä½œç”¨ï¼šå‘å…¶æ‰€åœ¨çš„èŠ‚ç‚¹ä¸­æ¸²æŸ“æ–‡æœ¬å†…å®¹ã€‚</p><p>2.ä¸æ’å€¼è¯­æ³•çš„åŒºåˆ«ï¼šv-textä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­çš„å†…å®¹ï¼Œ<code>&#123;&#123;xx&#125;&#125;</code>åˆ™ä¸ä¼šã€‚</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-textæŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä½ å¥½ï¼Œ&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;str&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">      <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;cess&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">str</span>:<span class="hljs-string">&#x27;&lt;h3&gt;ä½ å¥½å•Šï¼&lt;/h3&gt;&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>v-htmlæŒ‡ä»¤ ï¼š</strong>(ä½¿ç”¨çš„å¾ˆå°‘)</p><p>1.ä½œç”¨ï¼šå‘æŒ‡å®šèŠ‚ç‚¹ä¸­æ¸²æŸ“åŒ…å«htmlç»“æ„çš„å†…å®¹ã€‚</p><p>2.ä¸æ’å€¼è¯­æ³•çš„åŒºåˆ«ï¼š</p><ul><li>v-htmlä¼šæ›¿æ¢æ‰èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„å†…å®¹ï¼Œ<code>&#123;&#123;xx&#125;&#125;</code>åˆ™ä¸ä¼šã€‚</li><li>v-htmlå¯ä»¥è¯†åˆ«htmlç»“æ„ã€‚</li></ul><p>3.ä¸¥é‡æ³¨æ„ï¼šv-htmlæœ‰å®‰å…¨æ€§é—®é¢˜ï¼ï¼ï¼ï¼</p><ul><li><p>åœ¨ç½‘ç«™ä¸ŠåŠ¨æ€æ¸²æŸ“ä»»æ„HTMLæ˜¯éå¸¸å±é™©çš„ï¼Œå®¹æ˜“å¯¼è‡´<a href="https://so.csdn.net/so/search?spm=1000.2115.3001.4498&q=XSS&t=&u=">XSS</a>æ”»å‡»ã€‚</p></li><li><p>ä¸€å®šè¦åœ¨å¯ä¿¡çš„å†…å®¹ä¸Šä½¿ç”¨v-htmlï¼Œæ°¸ä¸è¦ç”¨åœ¨ç”¨æˆ·æäº¤çš„å†…å®¹ä¸Šï¼</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-htmlæŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä½ å¥½ï¼Œ&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;str&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;str2&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-handlebars">  Vue.config.productionTip = FontFaceSetLoadEvent</span></span><br><span class="language-xml"><span class="language-handlebars">  new Vue(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">    el:&#x27;#root&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">    data:&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">      name:&#x27;cess&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">      str:&#x27;<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>ä½ å¥½å•Šï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">      str2:&#x27;<span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">javascript:location.href</span>=<span class="hljs-string">&quot;http://www.baidu.com?&quot;</span>+<span class="hljs-attr">document.cookie</span>&gt;</span>å…„å¼Ÿæˆ‘æ‰¾åˆ°ä½ æƒ³è¦çš„èµ„æºäº†ï¼Œå¿«æ¥ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">  &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>v-cloakæŒ‡ä»¤ ï¼ˆæ²¡æœ‰å€¼ï¼‰ï¼š</strong></p><ul><li><p>æœ¬è´¨æ˜¯ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼ŒVueå®ä¾‹åˆ›å»ºå®Œæ¯•å¹¶æ¥ç®¡å®¹å™¨åï¼Œä¼šåˆ æ‰v-cloakå±æ€§ã€‚</p></li><li><p>ä½¿ç”¨cssé…åˆv-cloakå¯ä»¥è§£å†³ç½‘é€Ÿæ…¢æ—¶é¡µé¢å±•ç¤ºå‡º<code>&#123;&#123;xxx&#125;&#125;</code>çš„é—®é¢˜ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-cloakæŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-attr">[v-cloak]</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>:none;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-cloak</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>// å¤Ÿå»¶è¿Ÿ5ç§’æ”¶åˆ°vue.js<br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;http://localhost:8080/resource/5s/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">1</span>)</span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>:&#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;cess&#x27;</span>&#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>v-onceæŒ‡ä»¤ ï¼š</strong>(ç”¨çš„å°‘)</p><ul><li><p>v-onceæ‰€åœ¨èŠ‚ç‚¹åœ¨åˆæ¬¡åŠ¨æ€æ¸²æŸ“åï¼Œå°±è§†ä¸ºé™æ€å†…å®¹äº†ã€‚</p></li><li><p>ä»¥åæ•°æ®çš„æ”¹å˜ä¸ä¼šå¼•èµ·v-onceæ‰€åœ¨ç»“æ„çš„æ›´æ–°ï¼Œå¯ä»¥ç”¨äºä¼˜åŒ–æ€§èƒ½ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-onceæŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-once</span>&gt;</span>åˆå§‹åŒ–çš„nå€¼æ˜¯: &#123;&#123;n&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰çš„nå€¼æ˜¯: &#123;&#123;n&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;n++&quot;</span>&gt;</span>ç‚¹æˆ‘n+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123; <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>, <span class="hljs-attr">data</span>: &#123;<span class="hljs-attr">n</span>:<span class="hljs-number">1</span>&#125; &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>v-preæŒ‡ä»¤ ï¼š</strong>(æ¯”è¾ƒæ²¡ç”¨)</p><ul><li><p>è·³è¿‡å…¶æ‰€åœ¨èŠ‚ç‚¹çš„ç¼–è¯‘è¿‡ç¨‹</p></li><li><p>å¯åˆ©ç”¨å®ƒè·³è¿‡ï¼šæ²¡æœ‰ä½¿ç”¨æŒ‡ä»¤è¯­æ³•ã€æ²¡æœ‰ä½¿ç”¨æ’å€¼è¯­æ³•çš„èŠ‚ç‚¹ï¼Œä¼šåŠ å¿«ç¼–è¯‘</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>v-preæŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-pre</span>&gt;</span>Vueå…¶å®å¾ˆç®€å•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> &gt;</span>å½“å‰çš„nå€¼æ˜¯:&#123;&#123;n&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;n++&quot;</span>&gt;</span>ç‚¹æˆ‘n+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123; <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>, <span class="hljs-attr">data</span>:&#123;<span class="hljs-attr">n</span>:<span class="hljs-number">1</span>&#125; &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="1-18-è‡ªå®šä¹‰æŒ‡ä»¤"><a href="#1-18-è‡ªå®šä¹‰æŒ‡ä»¤" class="headerlink" title="1.18 è‡ªå®šä¹‰æŒ‡ä»¤"></a>1.18 è‡ªå®šä¹‰æŒ‡ä»¤</h2><p>éœ€æ±‚1ï¼šå®šä¹‰ä¸€ä¸ªv-bigæŒ‡ä»¤ï¼Œå’Œv-textåŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¼šæŠŠç»‘å®šçš„æ•°å€¼æ”¾å¤§10å€ã€‚</p><p>éœ€æ±‚2ï¼šå®šä¹‰ä¸€ä¸ªv-fbindæŒ‡ä»¤ï¼Œå’Œv-bindåŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¯ä»¥è®©å…¶æ‰€ç»‘å®šçš„inputå…ƒç´ é»˜è®¤è·å–ç„¦ç‚¹ã€‚</p><p><strong>è¯­æ³• ï¼š</strong></p><ol><li><p>å±€éƒ¨æŒ‡ä»¤</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html">new Vue(&#123;<br>  directives:&#123; <br>    æŒ‡ä»¤å:é…ç½®å¯¹è±¡ <br>  &#125;   <br>&#125;)<br><br>new Vue(&#123;<br>  directives:&#123; <br>    æŒ‡ä»¤å:å›è°ƒå‡½æ•° <br>  &#125;   <br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>å…¨å±€æŒ‡ä»¤</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html">Vue.directive(æŒ‡ä»¤å, é…ç½®å¯¹è±¡)<br>æˆ–<br>Vue.directive(æŒ‡ä»¤å, å›è°ƒå‡½æ•°)<br><br><br>Vue.directive(&#x27;fbind&#x27;, &#123;<br>    // æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰<br>    bind(element, binding) &#123;// elementå°±æ˜¯DOMå…ƒç´ ï¼Œbindingå°±æ˜¯è¦ç»‘å®šçš„<br>      element.value = binding.value<br>    &#125;,<br>    // æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶<br>    inserted(element, binding) &#123;<br>      element.focus()<br>    &#125;,<br>    // æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶<br>    update(element, binding) &#123;<br>      element.value = binding.value<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><ul><li>é…ç½®å¯¹è±¡ä¸­å¸¸ç”¨çš„3ä¸ªå›è°ƒå‡½æ•° <ul><li><p>bind(element, binding) æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶è°ƒç”¨</p></li><li><p>inserted(element, binding)æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶è°ƒç”¨</p></li><li><p>update(element, binding) æŒ‡ä»¤æ‰€åœ¨æ¨¡æ¿ç»“æ„è¢«é‡æ–°è§£ææ—¶è°ƒç”¨</p></li><li><p>elementå°±æ˜¯DOMå…ƒç´ ï¼Œbindingå°±æ˜¯è¦ç»‘å®šçš„å¯¹è±¡ï¼Œå®ƒåŒ…å«ä»¥ä¸‹å±æ€§ï¼š<code>name</code> <code>value</code> <code>expression</code> <code>arg</code> <code>modifiers</code></p></li><li><p>å¤‡æ³¨</p><ul><li><p>æŒ‡ä»¤å®šä¹‰æ—¶ä¸åŠ v-ï¼Œä½†ä½¿ç”¨æ—¶è¦åŠ v-</p></li><li><p>æŒ‡ä»¤åå¦‚æœæ˜¯å¤šä¸ªå•è¯ï¼Œè¦ä½¿ç”¨kebab-caseå‘½åæ–¹å¼ï¼Œä¸è¦ç”¨camelCaseå‘½å</p></li></ul></li></ul></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs html">new Vue(&#123;<br>el: &#x27;#root&#x27;,<br>data: &#123;<br>n:1<br>&#125;,<br>directives: &#123;<br>&#x27;big-number&#x27;(element,binding) &#123;<br>element.innerText = binding.value * 10<br>&#125;<br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>å›é¡¾ä¸€ä¸ªDOMæ“ä½œ</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"><span class="hljs-selector-class">.demo</span>&#123;<span class="hljs-attribute">background-color</span>: orange;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span>ç‚¹æˆ‘åˆ›å»ºä¸€ä¸ªè¾“å…¥æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;btn&#x27;</span>)</span><br><span class="language-javascript">  btn.<span class="hljs-property">onclick</span> = <span class="hljs-function">()=&gt;</span>&#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript">    input.<span class="hljs-property">className</span> = <span class="hljs-string">&#x27;demo&#x27;</span></span><br><span class="language-javascript">    input.<span class="hljs-property">value</span> = <span class="hljs-number">99</span></span><br><span class="language-javascript">    input.<span class="hljs-property">onclick</span> = <span class="hljs-function">()=&gt;</span>&#123;<span class="hljs-title function_">alert</span>(<span class="hljs-number">1</span>)&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(input)</span><br><span class="language-javascript"></span><br><span class="language-javascript">    input.<span class="hljs-title function_">focus</span>()</span><br><span class="language-javascript">    input.<span class="hljs-property">parentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">backgroundColor</span> = <span class="hljs-string">&#x27;skyblue&#x27;</span></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><p>éœ€æ±‚1ï¼šå®šä¹‰ä¸€ä¸ªv-bigæŒ‡ä»¤ï¼Œå’Œv-textåŠŸèƒ½ç±»ä¼¼ï¼Œä½†ä¼šæŠŠç»‘å®šçš„æ•°å€¼æ”¾å¤§10å€ã€‚</p><p>éœ€æ±‚2ï¼šå®šä¹‰ä¸€ä¸ªv-fbindæŒ‡ä»¤ï¼Œå’Œv-bindåŠŸèƒ½ç±»ä¼¼ï¼Œä½†å¯ä»¥è®©å…¶æ‰€ç»‘å®šçš„inputå…ƒç´ é»˜è®¤è·å–ç„¦ç‚¹ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>è‡ªå®šä¹‰æŒ‡ä»¤<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰çš„nå€¼æ˜¯ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- &lt;h2&gt;æ”¾å¤§10å€åçš„nå€¼æ˜¯ï¼š&lt;span v-big-number=&quot;n&quot;&gt;&lt;/span&gt; &lt;/h2&gt; --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ”¾å¤§10å€åçš„nå€¼æ˜¯ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-big</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;n++&quot;</span>&gt;</span>ç‚¹æˆ‘n+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">hr</span> /&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-fbind:value</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// å®šä¹‰å…¨å±€æŒ‡ä»¤</span></span><br><span class="language-javascript">  <span class="hljs-comment">/* Vue.directive(&#x27;fbind&#x27;,&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">// æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰</span></span><br><span class="hljs-comment"><span class="language-javascript">bind(element,binding)&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">element.value = binding.value</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;,</span></span><br><span class="hljs-comment"><span class="language-javascript">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶</span></span><br><span class="hljs-comment"><span class="language-javascript">inserted(element,binding)&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">element.focus()</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;,</span></span><br><span class="hljs-comment"><span class="language-javascript">// æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶</span></span><br><span class="hljs-comment"><span class="language-javascript">update(element,binding)&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">element.value = binding.value</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;) */</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">n</span>: <span class="hljs-number">1</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">directives</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// bigå‡½æ•°ä½•æ—¶ä¼šè¢«è°ƒç”¨ï¼Ÿ</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 1.æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰ 2.æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶</span></span><br><span class="language-javascript">      <span class="hljs-comment">/* &#x27;big-number&#x27;(element,binding)&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">// console.log(&#x27;big&#x27;)</span></span><br><span class="hljs-comment"><span class="language-javascript">element.innerText = binding.value * 10</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125;, */</span></span><br><span class="language-javascript">      <span class="hljs-title function_">big</span>(<span class="hljs-params">element, binding</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;big&#x27;</span>, <span class="hljs-variable language_">this</span>) <span class="hljs-comment">// ğŸ”´æ³¨æ„æ­¤å¤„çš„ this æ˜¯ window</span></span><br><span class="language-javascript">        <span class="hljs-comment">// console.log(&#x27;big&#x27;)</span></span><br><span class="language-javascript">        element.<span class="hljs-property">innerText</span> = binding.<span class="hljs-property">value</span> * <span class="hljs-number">10</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-attr">fbind</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰</span></span><br><span class="language-javascript">        <span class="hljs-title function_">bind</span>(<span class="hljs-params">element, binding</span>) &#123;</span><br><span class="language-javascript">          element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-comment">// æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶</span></span><br><span class="language-javascript">        <span class="hljs-title function_">inserted</span>(<span class="hljs-params">element, binding</span>) &#123;</span><br><span class="language-javascript">          element.<span class="hljs-title function_">focus</span>()</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-comment">// æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶</span></span><br><span class="language-javascript">        <span class="hljs-title function_">update</span>(<span class="hljs-params">element, binding</span>) &#123;</span><br><span class="language-javascript">          element.<span class="hljs-property">value</span> = binding.<span class="hljs-property">value</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="1-19-ç”Ÿå‘½å‘¨æœŸ"><a href="#1-19-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="1.19 ç”Ÿå‘½å‘¨æœŸ"></a>1.19 ç”Ÿå‘½å‘¨æœŸ</h2><ol><li><p>åˆåç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°ã€ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€ç”Ÿå‘½å‘¨æœŸé’©å­</p></li><li><p>æ˜¯ä»€ä¹ˆï¼šVueåœ¨å…³é”®æ—¶åˆ»å¸®æˆ‘ä»¬è°ƒç”¨çš„ä¸€äº›ç‰¹æ®Šåç§°çš„å‡½æ•°</p></li><li><p>ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„åå­—ä¸å¯æ›´æ”¹ï¼Œä½†å‡½æ•°çš„å…·ä½“å†…å®¹æ˜¯ç¨‹åºå‘˜æ ¹æ®éœ€æ±‚ç¼–å†™çš„</p></li><li><p>ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„ this æŒ‡å‘æ˜¯vmæˆ–ç»„ä»¶å®ä¾‹å¯¹è±¡</p></li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¼•å‡ºç”Ÿå‘½å‘¨æœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;a&quot;</span>&gt;</span>ä½ å¥½å•Š<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;opacity&#125;&quot;</span>&gt;</span>çœ‹ç¬”è®°å­¦Vue<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">a</span>: <span class="hljs-literal">false</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// ğŸ”´Vue å®Œæˆæ¨¡æ¿çš„è§£æå¹¶æŠŠåˆå§‹çš„çœŸå® DOM å…ƒç´ æ”¾å…¥é¡µé¢åï¼ˆæŒ‚è½½å®Œæ¯•ï¼‰è°ƒç”¨ mounted</span></span><br><span class="language-javascript">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mounted&#x27;</span>, <span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">      <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> -= <span class="hljs-number">0.01</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> = <span class="hljs-number">1</span></span><br><span class="language-javascript">      &#125;, <span class="hljs-number">16</span>)</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// é€šè¿‡å¤–éƒ¨çš„å®šæ—¶å™¨å®ç°ï¼ˆä¸æ¨èï¼‰</span></span><br><span class="language-javascript">  <span class="hljs-comment">// setInterval(() =&gt; &#123;</span></span><br><span class="language-javascript">  <span class="hljs-comment">// vm.opacity -= 0.01</span></span><br><span class="language-javascript">  <span class="hljs-comment">// if(vm.opacity &lt;= 0) vm.opacity = 1</span></span><br><span class="language-javascript">  <span class="hljs-comment">// &#125;,16)</span></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç®€ä»‹ç”Ÿå‘½å‘¨æœŸ"><a href="#ç®€ä»‹ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç®€ä»‹ç”Ÿå‘½å‘¨æœŸ"></a>ç®€ä»‹ç”Ÿå‘½å‘¨æœŸ</h3><p>Vue å®ä¾‹æœ‰â¼€ä¸ªå®Œæ•´çš„â½£å‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯ä»new Vue()ã€åˆå§‹åŒ–äº‹ä»¶(.onceäº‹ä»¶)å’Œç”Ÿå‘½å‘¨æœŸã€ç¼–è¯‘æ¨¡ç‰ˆã€æŒ‚è½½Dom -&gt; æ¸²æŸ“ã€æ›´æ–° -&gt;<br>æ¸²æŸ“ã€å¸è½½ ç­‰â¼€ç³»åˆ—è¿‡ç¨‹ï¼Œç§°è¿™æ˜¯Vueçš„â½£å‘½å‘¨æœŸã€‚</p><p>å…ˆæ¥ä¸€å¼ å°šç¡…è°·çš„å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124120234807.png" alt="image-20221124120234807"></p><ol><li><p><strong>beforeCreate ï¼ˆåˆ›å»ºå‰ï¼‰</strong>ï¼šæ•°æ®ç›‘æµ‹(getterå’Œsetter)å’Œåˆå§‹åŒ–äº‹ä»¶è¿˜æœªå¼€å§‹ï¼Œæ­¤æ—¶ data çš„å“åº”å¼è¿½è¸ªã€event&#x2F;watcher éƒ½è¿˜æ²¡æœ‰è¢«è®¾ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½è®¿é—®åˆ°dataã€computedã€watchã€methodsä¸Šçš„æ–¹æ³•å’Œæ•°æ®ã€‚</p></li><li><p><strong>created ï¼ˆåˆ›å»ºåï¼‰</strong>ï¼šå®ä¾‹åˆ›å»ºå®Œæˆï¼Œå®ä¾‹ä¸Šé…ç½®çš„ options åŒ…æ‹¬ dataã€computedã€watchã€methods ç­‰éƒ½é…ç½®å®Œæˆï¼Œä½†æ˜¯æ­¤æ—¶æ¸²æŸ“å¾—èŠ‚ç‚¹è¿˜æœªæŒ‚è½½åˆ° DOMï¼Œæ‰€ä»¥ä¸èƒ½è®¿é—®åˆ° <code>$el</code>å±æ€§ã€‚</p></li><li><p><strong>beforeMount ï¼ˆæŒ‚è½½å‰ï¼‰</strong>ï¼šåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼Œç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚æ­¤é˜¶æ®µVueå¼€å§‹è§£ææ¨¡æ¿ï¼Œç”Ÿæˆè™šæ‹ŸDOMå­˜åœ¨å†…å­˜ä¸­ï¼Œè¿˜æ²¡æœ‰æŠŠè™šæ‹ŸDOMè½¬æ¢æˆçœŸå®DOMï¼Œæ’å…¥é¡µé¢ä¸­ã€‚æ‰€ä»¥ç½‘é¡µä¸èƒ½æ˜¾ç¤ºè§£æå¥½çš„å†…å®¹ã€‚</p></li><li><p><strong>mounted ï¼ˆæŒ‚è½½åï¼‰</strong>ï¼šåœ¨elè¢«æ–°åˆ›å»ºçš„ vm.$elï¼ˆå°±æ˜¯çœŸå®DOMçš„æ‹·è´ï¼‰æ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»ä¹‹åè°ƒç”¨ï¼ˆå°†å†…å­˜ä¸­çš„è™šæ‹ŸDOMè½¬ä¸ºçœŸå®DOMï¼ŒçœŸå®DOMæ’å…¥é¡µé¢ï¼‰ã€‚æ­¤æ—¶é¡µé¢ä¸­å‘ˆç°çš„æ˜¯ç»è¿‡Vueç¼–è¯‘çš„DOMï¼Œè¿™æ—¶åœ¨è¿™ä¸ªé’©å­å‡½æ•°ä¸­å¯¹DOMçš„æ“ä½œå¯ä»¥æœ‰æ•ˆï¼Œä½†è¦å°½é‡é¿å…ã€‚ä¸€èˆ¬åœ¨è¿™ä¸ªé˜¶æ®µè¿›è¡Œï¼šå¼€å¯å®šæ—¶å™¨ï¼Œå‘é€ç½‘ç»œè¯·æ±‚ï¼Œè®¢é˜…æ¶ˆæ¯ï¼Œç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ç­‰ç­‰</p></li><li><p><strong>beforeUpdate ï¼ˆæ›´æ–°å‰ï¼‰</strong>ï¼šå“åº”å¼æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ï¼Œæ­¤æ—¶è™½ç„¶å“åº”å¼æ•°æ®æ›´æ–°äº†ï¼Œä½†æ˜¯å¯¹åº”çš„çœŸå® DOM è¿˜æ²¡æœ‰è¢«æ¸²æŸ“ï¼ˆæ•°æ®æ˜¯æ–°çš„ï¼Œä½†é¡µé¢æ˜¯æ—§çš„ï¼Œé¡µé¢å’Œæ•°æ®æ²¡ä¿æŒåŒæ­¥å‘¢ï¼‰ã€‚</p></li><li><p><strong>updated ï¼ˆæ›´æ–°åï¼‰</strong> ï¼šåœ¨ç”±äºæ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹ŸDOMé‡æ–°æ¸²æŸ“å’Œæ‰“è¡¥ä¸ä¹‹åè°ƒç”¨ã€‚æ­¤æ—¶ DOM å·²ç»æ ¹æ®å“åº”å¼æ•°æ®çš„å˜åŒ–æ›´æ–°äº†ã€‚è°ƒç”¨æ—¶ï¼Œç»„ä»¶ DOMå·²ç»æ›´æ–°ï¼Œæ‰€ä»¥å¯ä»¥æ‰§è¡Œä¾èµ–äºDOMçš„æ“ä½œã€‚ç„¶è€Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”è¯¥é¿å…åœ¨æ­¤æœŸé—´æ›´æ”¹çŠ¶æ€ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šå¯¼è‡´æ›´æ–°æ— é™å¾ªç¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</p></li><li><p><strong>beforeDestroy ï¼ˆé”€æ¯å‰ï¼‰</strong>ï¼šå®ä¾‹é”€æ¯ä¹‹å‰è°ƒç”¨ã€‚è¿™ä¸€æ­¥ï¼Œå®ä¾‹ä»ç„¶å®Œå…¨å¯ç”¨ï¼Œ<code>this</code> ä»èƒ½è·å–åˆ°å®ä¾‹ã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸€èˆ¬è¿›è¡Œå…³é—­å®šæ—¶å™¨ï¼Œå–æ¶ˆè®¢é˜…æ¶ˆæ¯ï¼Œè§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€‚</p></li><li><p><strong>destroyed ï¼ˆé”€æ¯åï¼‰</strong>ï¼šå®ä¾‹é”€æ¯åè°ƒç”¨ï¼Œè°ƒç”¨åï¼ŒVue å®ä¾‹æŒ‡ç¤ºçš„æ‰€æœ‰ä¸œè¥¿éƒ½ä¼šè§£ç»‘å®šï¼Œæ‰€æœ‰çš„äº‹ä»¶ç›‘å¬å™¨ä¼šè¢«ç§»é™¤ï¼Œæ‰€æœ‰çš„å­å®ä¾‹ä¹Ÿä¼šè¢«é”€æ¯ã€‚è¯¥é’©å­åœ¨æœåŠ¡ç«¯æ¸²æŸ“æœŸé—´ä¸è¢«è°ƒç”¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>åˆ†æç”Ÿå‘½å‘¨æœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span> <span class="hljs-attr">:x</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;n&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰çš„nå€¼æ˜¯ï¼š&#123;&#123; n &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>ç‚¹æˆ‘n+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;bye&quot;</span>&gt;</span>ç‚¹æˆ‘é”€æ¯vm<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript"><span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-comment">// template:`</span></span><br><span class="language-javascript"><span class="hljs-comment">// &lt;div&gt;</span></span><br><span class="language-javascript"><span class="hljs-comment">// &lt;h2&gt;å½“å‰çš„nå€¼æ˜¯ï¼š&#123;&#123;n&#125;&#125;&lt;/h2&gt;</span></span><br><span class="language-javascript"><span class="hljs-comment">// &lt;button @click=&quot;add&quot;&gt;ç‚¹æˆ‘n+1&lt;/button&gt;</span></span><br><span class="language-javascript"><span class="hljs-comment">// &lt;/div&gt;</span></span><br><span class="language-javascript"><span class="hljs-comment">// `,</span></span><br><span class="language-javascript"><span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-attr">n</span>: <span class="hljs-number">1</span></span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">add</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;add&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">n</span>++</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">bye</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;bye&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.$destroy()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">watch</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">n</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;nå˜äº†&#x27;</span>)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">beforeCreate</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeCreate&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">created</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;created&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">beforeMount</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeMount&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mounted&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeUpdate&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">updated</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;updated&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeDestroy&#x27;</span>)&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">destroyed</span>(<span class="hljs-params"></span>) &#123;<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;destroyed&#x27;</span>)&#125;,</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol><blockquote><p>æ¥è®²ä¸€ä¸‹å›¾ä¸­é—´å¤§æ¡†æ¡†çš„å†…å®¹</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124120324744.png" alt="image-20221124120324744"></p><p>å…ˆåˆ¤æ–­æœ‰æ²¡æœ‰ <strong>el</strong> è¿™ä¸ªé…ç½®é¡¹ï¼Œæ²¡æœ‰å°±è°ƒç”¨ vm.$mount(el)ï¼Œå¦‚æœä¸¤ä¸ªéƒ½æ²¡æœ‰å°±ä¸€ç›´å¡ç€ï¼Œæ˜¾ç¤ºçš„ç•Œé¢å°±æ˜¯æœ€åŸå§‹çš„å®¹å™¨çš„ç•Œé¢ã€‚æœ‰ <strong>el</strong>è¿™ä¸ªé…ç½®é¡¹ï¼Œå°±è¿›è¡Œåˆ¤æ–­æœ‰æ²¡æœ‰ template è¿™ä¸ªé…ç½®é¡¹ï¼Œæ²¡æœ‰ template å°±å°† el ç»‘å®šçš„å®¹å™¨ç¼–è¯‘ä¸º vue æ¨¡æ¿ï¼Œæ¥ä¸ªå¯¹æ¯”å›¾ã€‚</p><p>æ²¡ç¼–è¯‘å‰çš„ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124120402534.png" alt="image-20221124120402534"></p><p>ç¼–è¯‘åï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124120418648.png" alt="image-20221124120418648"></p><p>è¿™ä¸ª template æœ‰å•¥ç”¨å’§ï¼Ÿ</p><p><strong>ç¬¬ä¸€ç§æƒ…å†µ ï¼Œæœ‰ templateï¼š</strong></p><p>å¦‚æœ el ç»‘å®šçš„å®¹å™¨æ²¡æœ‰ä»»ä½•å†…å®¹ï¼Œå°±ä¸€ä¸ªç©ºå£³å­ï¼Œä½†åœ¨ Vue å®ä¾‹ä¸­å†™äº† templateï¼Œå°±ä¼šç¼–è¯‘è§£æè¿™ä¸ª template é‡Œçš„å†…å®¹ï¼Œç”Ÿæˆè™šæ‹ŸDOMï¼Œæœ€åå°† è™šæ‹Ÿ DOM è½¬ä¸º çœŸå® DOM æ’å…¥é¡µé¢ï¼ˆå…¶å®å°±å¯ä»¥ç†è§£ä¸º template æ›¿ä»£äº† el ç»‘å®šçš„å®¹å™¨çš„å†…å®¹ï¼‰ã€‚</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221113222324448.png" alt="image-20221113222324448"></p><p>å‘ç°&#x3D;&#x3D;idä¸ºroot&#x3D;&#x3D;çš„divå…ƒç´ æ•´ä¸ªè¢«æ›¿æ¢</p><p><strong>ç¬¬äºŒç§æƒ…å†µ ï¼Œæ²¡æœ‰ templateï¼š</strong></p><p>æ²¡æœ‰ templateï¼Œå°±ç¼–è¯‘è§£æ el ç»‘å®šçš„å®¹å™¨ï¼Œç”Ÿæˆè™šæ‹Ÿ DOMï¼Œåé¢å°±é¡ºç€ç”Ÿå‘½å‘¨æœŸæ‰§è¡Œä¸‹å»ã€‚</p><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¸¸ç”¨çš„ç”Ÿå‘½å‘¨æœŸé’©å­</p><ul><li><p>amountedå‘é€ajaxè¯·æ±‚ã€å¯åŠ¨å®šæ—¶å™¨ã€ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ã€è®¢é˜…æ¶ˆæ¯ç­‰åˆå§‹åŒ–æ“ä½œ </p></li><li><p>bbeforeDestroyæ¸…é™¤å®šæ—¶å™¨ã€è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶ã€å–æ¶ˆè®¢é˜…æ¶ˆæ¯ç­‰æ”¶å°¾å·¥ä½œ</p></li></ul><p>å…³äºé”€æ¯Vueå®ä¾‹</p><ul><li><p>é”€æ¯åå€ŸåŠ©Vueå¼€å‘è€…å·¥å…·çœ‹ä¸åˆ°ä»»ä½•ä¿¡æ¯</p></li><li><p>é”€æ¯åè‡ªå®šä¹‰äº‹ä»¶ä¼šå¤±æ•ˆï¼Œä½†åŸç”ŸDOMäº‹ä»¶ä¾ç„¶æœ‰æ•ˆ</p></li><li><p>ä¸€èˆ¬ä¸ä¼šåœ¨beforeDestroyæ“ä½œæ•°æ®ï¼Œå› ä¸ºå³ä¾¿æ“ä½œæ•°æ®ï¼Œä¹Ÿä¸ä¼šå†è§¦å‘æ›´æ–°æµç¨‹äº†</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å¼•å‡ºç”Ÿå‘½å‘¨æœŸ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123;opacity&#125;&quot;</span>&gt;</span>æ¬¢è¿å­¦ä¹ Vue<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;opacity = 1&quot;</span>&gt;</span>é€æ˜åº¦è®¾ç½®ä¸º1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;stop&quot;</span>&gt;</span>ç‚¹æˆ‘åœæ­¢å˜æ¢<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">opacity</span>: <span class="hljs-number">1</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">stop</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.$destroy()</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// Vueå®Œæˆæ¨¡æ¿çš„è§£æå¹¶æŠŠåˆå§‹çš„çœŸå®DOMå…ƒç´ æ”¾å…¥é¡µé¢åï¼ˆæŒ‚è½½å®Œæ¯•ï¼‰è°ƒç”¨mounted</span></span><br><span class="language-javascript">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mounted&#x27;</span>, <span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;setInterval&#x27;</span>)</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> -= <span class="hljs-number">0.01</span></span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">opacity</span> = <span class="hljs-number">1</span></span><br><span class="language-javascript">      &#125;, <span class="hljs-number">16</span>)</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>)</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;vmå³å°†é©¾é¹¤è¥¿æ¸¸äº†&#x27;</span>)</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ul><h2 id="1-20ç»„ä»¶åŒ–ç¼–ç¨‹"><a href="#1-20ç»„ä»¶åŒ–ç¼–ç¨‹" class="headerlink" title="1.20ç»„ä»¶åŒ–ç¼–ç¨‹"></a>1.20ç»„ä»¶åŒ–ç¼–ç¨‹</h2><h3 id="æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–"><a href="#æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–" class="headerlink" title="æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–"></a>æ¨¡å—ä¸ç»„ä»¶ã€æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image(2).png" alt="image(2)"></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image(3).png" alt="image(3)"></p><ol><li><p>æ¨¡å—</p><ul><li><p>ç†è§£ï¼šå‘å¤–æä¾›ç‰¹å®šåŠŸèƒ½çš„ js ç¨‹åºï¼Œä¸€èˆ¬å°±æ˜¯ä¸€ä¸ª js æ–‡ä»¶</p></li><li><p>ä¸ºä»€ä¹ˆï¼šjs æ–‡ä»¶å¾ˆå¤šå¾ˆå¤æ‚</p></li><li><p>ä½œç”¨ï¼šå¤ç”¨ã€ç®€åŒ– js çš„ç¼–å†™ï¼Œæé«˜ js è¿è¡Œæ•ˆç‡</p></li></ul></li><li><p>ç»„ä»¶</p><ul><li><p>å®šä¹‰ï¼šç”¨æ¥å®ç°å±€éƒ¨åŠŸèƒ½çš„ä»£ç å’Œèµ„æºçš„é›†åˆï¼ˆhtml&#x2F;css&#x2F;js&#x2F;imageâ€¦ï¼‰ </p></li><li><p>ä¸ºä»€ä¹ˆï¼šä¸€ä¸ªç•Œé¢çš„åŠŸèƒ½å¾ˆå¤æ‚ </p></li><li><p>ä½œç”¨ï¼šå¤ç”¨ç¼–ç ï¼Œç®€åŒ–é¡¹ç›®ç¼–ç ï¼Œæé«˜è¿è¡Œæ•ˆç‡</p></li></ul></li><li><p>æ¨¡å—åŒ–</p><ul><li>å½“åº”ç”¨ä¸­çš„ js éƒ½ä»¥æ¨¡å—æ¥ç¼–å†™çš„ï¼Œé‚£è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„åº”ç”¨</li></ul></li><li><p>ç»„ä»¶åŒ–</p><ul><li>å½“åº”ç”¨ä¸­çš„åŠŸèƒ½éƒ½æ˜¯å¤šç»„ä»¶çš„æ–¹å¼æ¥ç¼–å†™çš„ï¼Œé‚£è¿™ä¸ªåº”ç”¨å°±æ˜¯ä¸€ä¸ªç»„ä»¶åŒ–çš„åº”ç”¨</li></ul></li></ol><h3 id="éå•æ–‡ä»¶ç»„ä»¶"><a href="#éå•æ–‡ä»¶ç»„ä»¶" class="headerlink" title="éå•æ–‡ä»¶ç»„ä»¶"></a>éå•æ–‡ä»¶ç»„ä»¶</h3><p>ä¸€ä¸ªæ–‡ä»¶ä¸­åªåŒ…å«æœ‰ 1 ä¸ªç»„ä»¶</p><h4 id="åŸºæœ¬ä½¿ç”¨"><a href="#åŸºæœ¬ä½¿ç”¨" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h4><p>Vueä¸­ä½¿ç”¨ç»„ä»¶çš„ä¸‰å¤§æ­¥éª¤ï¼š</p><ul><li>å®šä¹‰ç»„ä»¶(åˆ›å»ºç»„ä»¶)</li><li>æ³¨å†Œç»„ä»¶</li><li>ä½¿ç”¨ç»„ä»¶(å†™ç»„ä»¶æ ‡ç­¾)</li></ul><p><strong>å®šä¹‰ç»„ä»¶</strong></p><p>ä½¿ç”¨Vue.extend(options)åˆ›å»ºï¼Œå…¶ä¸­optionså’Œnew Vue(options)æ—¶ä¼ å…¥çš„é‚£ä¸ªoptionså‡ ä¹ä¸€æ ·ï¼Œä½†ä¹Ÿæœ‰ç‚¹åŒºåˆ«ï¼›</p><p>åŒºåˆ«å¦‚ä¸‹ï¼š</p><ul><li>elä¸è¦å†™ï¼Œä¸ºä»€ä¹ˆï¼Ÿ â€”â€”â€” æœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶éƒ½è¦ç»è¿‡ä¸€ä¸ªvmçš„ç®¡ç†ï¼Œç”±vmä¸­çš„elå†³å®šæœåŠ¡å“ªä¸ªå®¹å™¨ã€‚</li><li>dataå¿…é¡»å†™æˆå‡½æ•°ï¼Œä¸ºä»€ä¹ˆï¼Ÿ â€”â€”â€”â€” é¿å…ç»„ä»¶è¢«å¤ç”¨æ—¶ï¼Œæ•°æ®å­˜åœ¨å¼•ç”¨å…³ç³»ã€‚</li></ul><p>è®²è§£ä¸€ä¸‹é¢è¯•å°é—®é¢˜ï¼šdataå¿…é¡»å†™æˆå‡½æ•°ï¼š</p><p>è¿™æ˜¯ js åº•å±‚è®¾è®¡çš„åŸå› ï¼šä¸¾ä¸ªä¾‹å­</p><blockquote><p>å¯¹è±¡å½¢å¼</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> data = &#123;<br>    <span class="hljs-attr">a</span>: <span class="hljs-number">99</span>,<br>    <span class="hljs-attr">b</span>: <span class="hljs-number">100</span><br>&#125;<br><br><span class="hljs-keyword">let</span> x = data;<br><span class="hljs-keyword">let</span> y = data;<br><span class="hljs-comment">// x å’Œ y å¼•ç”¨çš„éƒ½æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä¿®æ”¹ x çš„å€¼ï¼Œ y çš„å€¼ä¹Ÿä¼šæ”¹å˜</span><br>x.<span class="hljs-property">a</span> = <span class="hljs-number">66</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">loh</span>(x); <span class="hljs-comment">// a:66 b:100</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(y); <span class="hljs-comment">// a:66 b:100</span><br></code></pre></td></tr></table></figure><blockquote><p>å‡½æ•°å½¢å¼</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>        <span class="hljs-attr">a</span>: <span class="hljs-number">99</span>,<br>        <span class="hljs-attr">b</span>: <span class="hljs-number">100</span><br>    &#125;<br>&#125;<br><span class="hljs-keyword">let</span> x = <span class="hljs-title function_">data</span>();<br><span class="hljs-keyword">let</span> y = <span class="hljs-title function_">data</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x === y); <span class="hljs-comment">// false</span><br><span class="hljs-comment">// æˆ‘çš„ç†è§£æ˜¯å‡½æ•°æ¯è°ƒç”¨ä¸€æ¬¡å°±åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡è¿”å›ç»™ä»–ä»¬</span><br></code></pre></td></tr></table></figure><blockquote><p>å¤‡æ³¨ï¼šä½¿ç”¨templateå¯ä»¥é…ç½®ç»„ä»¶ç»“æ„ã€‚</p></blockquote><p>åˆ›å»ºä¸€ä¸ªç»„ä»¶æ¡ˆä¾‹ï¼šVue.extend() åˆ›å»º</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-handlebars">    Vue.config.productionTip = false</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">    //ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºschoolç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">    const school = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        template:`</span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åç§°ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">schoolName</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">address</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showName&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºå­¦æ ¡å<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">`,</span></span><br><span class="language-xml"><span class="language-handlebars">        // el:&#x27;#root&#x27;, //ç»„ä»¶å®šä¹‰æ—¶ï¼Œä¸€å®šä¸è¦å†™elé…ç½®é¡¹ï¼Œå› ä¸ºæœ€ç»ˆæ‰€æœ‰çš„ç»„ä»¶éƒ½è¦è¢«ä¸€ä¸ªvmç®¡ç†ï¼Œç”±vmå†³å®šæœåŠ¡äºå“ªä¸ªå®¹å™¨ã€‚</span></span><br><span class="language-xml"><span class="language-handlebars">        data()&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">                schoolName:&#x27;å°šç¡…è°·&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">                address:&#x27;åŒ—äº¬æ˜Œå¹³&#x27;</span></span><br><span class="language-xml"><span class="language-handlebars">            &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span><br><span class="language-xml"><span class="language-handlebars">        methods: &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            showName()&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">                alert(this.schoolName)</span></span><br><span class="language-xml"><span class="language-handlebars">            &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;,</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">    //ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºstudentç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">    const student = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        template:`</span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿå§“åï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">studentName</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿå¹´é¾„ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">age</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">`,</span></span><br><span class="language-xml"><span class="language-handlebars">        data()&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">                studentName:&#x27;å¼ ä¸‰&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">                age:18</span></span><br><span class="language-xml"><span class="language-handlebars">            &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">    //ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºhelloç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">    const hello = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">        template:`</span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä½ å¥½å•Šï¼</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">`,</span></span><br><span class="language-xml"><span class="language-handlebars">        data()&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">            return &#123;</span></span><br><span class="language-xml"><span class="language-handlebars">                name:&#x27;Tom&#x27;</span></span><br><span class="language-xml"><span class="language-handlebars">            &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">        &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">    &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><strong>æ³¨å†Œç»„ä»¶</strong></p><ul><li>å±€éƒ¨æ³¨å†Œï¼šé new Vueçš„æ—¶å€™ä¼ å…¥componentsé€‰é¡¹</li><li>å…¨å±€æ³¨å†Œï¼šé Vue.component(â€˜ç»„ä»¶åâ€™,ç»„ä»¶)</li></ul><blockquote><p>å±€éƒ¨æ³¨å†Œ</p></blockquote><pre><code class="hljs">&lt;script&gt;    //åˆ›å»ºvm    new Vue(&#123;        el: &#39;#root&#39;,        data: &#123;            msg:&#39;ä½ å¥½å•Šï¼&#39;        &#125;,        //ç¬¬äºŒæ­¥ï¼šæ³¨å†Œç»„ä»¶ï¼ˆå±€éƒ¨æ³¨å†Œï¼‰        components: &#123;            school: school,            student: student            // ES6ç®€å†™å½¢å¼            // school,            // student        &#125;    &#125;)&lt;/script&gt;</code></pre><blockquote><p>å…¨å±€æ³¨å†Œ</p></blockquote><pre><code class="hljs">&lt;script&gt;    //ç¬¬äºŒæ­¥ï¼šå…¨å±€æ³¨å†Œç»„ä»¶    Vue.component(&#39;hello&#39;, hello)&lt;/script&gt;</code></pre><p><strong>å†™ç»„ä»¶æ ‡ç­¾</strong></p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- å‡†å¤‡å¥½ä¸€ä¸ªå®¹å™¨--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hello</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hello</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ç»„ä»¶æ ‡ç­¾ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">school</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">school</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- ç¬¬ä¸‰æ­¥ï¼šç¼–å†™ç»„ä»¶æ ‡ç­¾ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>å…¨éƒ¨ä»£ç </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">school</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">school</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hello</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hello</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hello</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hello</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span><br>      <br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root1&quot;</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;student&gt;&lt;/student&gt; --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> school = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div class=&quot;demo&quot;&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;h2&gt;å­¦æ ¡åç§°ï¼š&#123;&#123;schoolName&#125;&#125;&lt;/h2&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;h2&gt;å­¦æ ¡åœ°å€ï¼š&#123;&#123;address&#125;&#125;&lt;/h2&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;button @click=&quot;showName&quot;&gt;ç‚¹æˆ‘æç¤ºå­¦æ ¡å&lt;/button&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">    &lt;/div&gt;`</span>,</span><br><span class="language-javascript">            <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">schoolName</span>: <span class="hljs-string">&#x27;å®¶é‡Œè¹²å¤§å­¦&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">address</span>: <span class="hljs-string">&#x27;china&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-title function_">showName</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">                    <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">schoolName</span>)</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> student = &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">template</span>: <span class="hljs-string">`</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;div&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;h2&gt;å­¦ç”Ÿå¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">    &lt;/div&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">`</span>,</span><br><span class="language-javascript">            <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;xyy&#x27;</span>,</span><br><span class="language-javascript">                    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºhelloç»„ä»¶</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> hello = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">template</span>: <span class="hljs-string">`</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;div&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">&lt;h3&gt;ä½ å¥½å•Šï¼&#123;&#123;name&#125;&#125;&lt;/h3&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">  &lt;/div&gt;</span></span><br><span class="hljs-string"><span class="language-javascript">`</span>,</span><br><span class="language-javascript">            <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;cess&#x27;</span></span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-comment">//ç¬¬äºŒæ­¥ï¼šå…¨å±€æ³¨å†Œç»„ä»¶</span></span><br><span class="language-javascript">        <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;hello&#x27;</span>, hello)</span><br><span class="language-javascript">        <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;student&#x27;</span>, student)</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> v1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>: &#123;</span><br><span class="language-javascript">                <span class="hljs-comment">// name:&#x27;ä¸ä¼šæ•²ä»£ç ï¼&#x27;</span></span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">                school,</span><br><span class="language-javascript">                <span class="hljs-comment">// student</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> v2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root1&#x27;</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">data</span>:&#123;</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;ä¸ä¼šæ•²ä»£ç ï¼&#x27;</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="å‡ ä¸ªæ³¨æ„ç‚¹-ï¼š"><a href="#å‡ ä¸ªæ³¨æ„ç‚¹-ï¼š" class="headerlink" title="å‡ ä¸ªæ³¨æ„ç‚¹ ï¼š"></a><strong>å‡ ä¸ªæ³¨æ„ç‚¹ ï¼š</strong></h4><p>å…³äºç»„ä»¶åï¼š</p><p>ä¸€ä¸ªå•è¯ç»„æˆï¼š</p><ul><li>ç¬¬ä¸€ç§å†™æ³•(é¦–å­—æ¯å°å†™)ï¼šschool</li><li>ç¬¬äºŒç§å†™æ³•(é¦–å­—æ¯å¤§å†™)ï¼šSchool</li></ul><p>å¤šä¸ªå•è¯ç»„æˆï¼š</p><ul><li>ç¬¬ä¸€ç§å†™æ³•(kebab-caseå‘½å)ï¼šmy-school</li><li>ç¬¬äºŒç§å†™æ³•(CamelCaseå‘½å)ï¼šMySchool (éœ€è¦Vueè„šæ‰‹æ¶æ”¯æŒ)</li></ul><blockquote><p>å¤‡æ³¨ï¼š</p><p>(1).ç»„ä»¶åå°½å¯èƒ½å›é¿HTMLä¸­å·²æœ‰çš„å…ƒç´ åç§°ï¼Œä¾‹å¦‚ï¼šh2ã€H2éƒ½ä¸è¡Œã€‚</p><p>(2).å¯ä»¥ä½¿ç”¨nameé…ç½®é¡¹æŒ‡å®šç»„ä»¶åœ¨å¼€å‘è€…å·¥å…·ä¸­å‘ˆç°çš„åå­—ã€‚</p></blockquote><p>å…³äºç»„ä»¶æ ‡ç­¾:</p><ul><li><p>ç¬¬ä¸€ç§å†™æ³•ï¼š<school></school></p></li><li><p>ç¬¬äºŒç§å†™æ³•ï¼š<school/>ï¼ˆéœ€è¦Vueè„šæ‰‹æ¶æ”¯æŒï¼‰</p></li></ul><blockquote><p>å¤‡æ³¨ï¼šä¸ä½¿ç”¨è„šæ‰‹æ¶æ—¶ï¼Œ<school/>ä¼šå¯¼è‡´åç»­ç»„ä»¶ä¸èƒ½æ¸²æŸ“</p></blockquote><p>ä¸€ä¸ªç®€å†™æ–¹å¼ï¼šconst school &#x3D; Vue.extend(options)å¯ç®€å†™ä¸ºconst school &#x3D; optionsï¼Œå› ä¸ºçˆ¶ç»„ä»¶componentså¼•å…¥çš„æ—¶å€™ä¼šè‡ªåŠ¨åˆ›å»º</p><blockquote><p>å¤‡æ³¨:ä½¿ç”¨ç»„ä»¶æ ‡ç­¾å¾—æ—¶å€™ä¸€å®šè¦æ”¾å…¥è¢«Vueç®¡ç†çš„DOMä¸­å»</p></blockquote><h3 id="ç»„ä»¶çš„åµŒå¥—"><a href="#ç»„ä»¶çš„åµŒå¥—" class="headerlink" title="ç»„ä»¶çš„åµŒå¥—"></a>ç»„ä»¶çš„åµŒå¥—</h3><p>æ¯”è¾ƒç®€å•ï¼Œç›´æ¥å±•ç¤ºä»£ç ï¼š</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç»„ä»¶çš„åµŒå¥—<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span><br><span class="language-xml"><span class="language-handlebars">  Vue.config.productionTip = false</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">  //å®šä¹‰studentç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">  const student = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">    name: &#x27;student&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">    template: `</span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å­¦ç”Ÿå§“åï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>å­¦ç”Ÿå¹´é¾„ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">age</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">`,</span></span><br><span class="language-xml"><span class="language-handlebars">    data() &#123;return &#123;name: &#x27;å°šç¡…è°·&#x27;,age: 18&#125;&#125;</span></span><br><span class="language-xml"><span class="language-handlebars">  &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">  //å®šä¹‰schoolç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">  const school = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">    name: &#x27;school&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">    template: `</span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­¦æ ¡åç§°ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">name</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š</span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">address</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">   <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">`,</span></span><br><span class="language-xml"><span class="language-handlebars">    data() &#123;return &#123;name: &#x27;å°šç¡…è°·&#x27;,address: &#x27;åŒ—äº¬&#x27;&#125;&#125;,</span></span><br><span class="language-xml"><span class="language-handlebars">    //æ³¨å†Œç»„ä»¶ï¼ˆå±€éƒ¨ï¼‰</span></span><br><span class="language-xml"><span class="language-handlebars">    components: &#123; student &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">  &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">  //å®šä¹‰helloç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">  const hello = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">    template: `<span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span></span><span class="hljs-template-variable">&#123;&#123;<span class="hljs-name">msg</span>&#125;&#125;</span><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>`,</span></span><br><span class="language-xml"><span class="language-handlebars">    data() &#123;return &#123;msg: &#x27;æ¬¢è¿æ¥åˆ°å°šç¡…è°·å­¦ä¹ ï¼&#x27;&#125;&#125;</span></span><br><span class="language-xml"><span class="language-handlebars">  &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">  //å®šä¹‰appç»„ä»¶</span></span><br><span class="language-xml"><span class="language-handlebars">  const app = Vue.extend(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">    template: `</span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">hello</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">hello</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars"><span class="hljs-tag">&lt;<span class="hljs-name">school</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">school</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></span><br><span class="language-xml"><span class="language-handlebars">`,</span></span><br><span class="language-xml"><span class="language-handlebars">    components: &#123; school, hello &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">  &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><br><span class="language-xml"><span class="language-handlebars">  //åˆ›å»ºvm</span></span><br><span class="language-xml"><span class="language-handlebars">  new Vue(&#123;</span></span><br><span class="language-xml"><span class="language-handlebars">    el: &#x27;#root&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">    template: &#x27;<span class="hljs-tag">&lt;<span class="hljs-name">app</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app</span>&gt;</span>&#x27;,</span></span><br><span class="language-xml"><span class="language-handlebars">    //æ³¨å†Œç»„ä»¶ï¼ˆå±€éƒ¨ï¼‰</span></span><br><span class="language-xml"><span class="language-handlebars">    components: &#123; app &#125;</span></span><br><span class="language-xml"><span class="language-handlebars">  &#125;)</span></span><br><span class="language-xml"><span class="language-handlebars"></span></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="VueComponent"><a href="#VueComponent" class="headerlink" title="VueComponent"></a>VueComponent</h3><ul><li>schoolç»„ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªåä¸ºVueComponentçš„æ„é€ å‡½æ•°ï¼Œä¸”ä¸æ˜¯ç¨‹åºå‘˜å®šä¹‰çš„ï¼Œæ˜¯Vue.extendç”Ÿæˆçš„ã€‚</li><li>æˆ‘ä»¬åªéœ€è¦å†™æˆ–ï¼ŒVueè§£ææ—¶ä¼šå¸®æˆ‘ä»¬åˆ›å»ºschoolç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼Œå³Vueå¸®æˆ‘ä»¬æ‰§è¡Œçš„ï¼šnew VueComponent(options)ã€‚</li><li>ç‰¹åˆ«æ³¨æ„ï¼šæ¯æ¬¡è°ƒç”¨Vue.extendï¼Œè¿”å›çš„éƒ½æ˜¯ä¸€ä¸ª&#x3D;&#x3D;å…¨æ–°çš„VueComponent&#x3D;&#x3D;ï¼ï¼ï¼ï¼(è¿™ä¸ªVueComponentå¯ä¸æ˜¯å®ä¾‹å¯¹è±¡)</li><li>å…³äºthisæŒ‡å‘ï¼š<ul><li>ç»„ä»¶é…ç½®ä¸­ï¼šdataå‡½æ•°ã€methodsä¸­çš„å‡½æ•°ã€watchä¸­çš„å‡½æ•°ã€computedä¸­çš„å‡½æ•° å®ƒä»¬çš„thiså‡æ˜¯ã€VueComponentå®ä¾‹å¯¹è±¡ã€‘ã€‚</li><li>new Vue(options)é…ç½®ä¸­ï¼šdataå‡½æ•°ã€methodsä¸­çš„å‡½æ•°ã€watchä¸­çš„å‡½æ•°ã€computedä¸­çš„å‡½æ•° å®ƒä»¬çš„thiså‡æ˜¯ã€Vueå®ä¾‹å¯¹è±¡ã€‘ã€‚</li></ul></li><li>VueComponentçš„å®ä¾‹å¯¹è±¡ï¼Œä»¥åç®€ç§°vcï¼ˆä¹Ÿå¯ç§°ä¹‹ä¸ºï¼šç»„ä»¶å®ä¾‹å¯¹è±¡ï¼‰ã€‚Vueçš„å®ä¾‹å¯¹è±¡ï¼Œä»¥åç®€ç§°vmã€‚</li></ul><p>Vue åœ¨å“ªç®¡ç† VueComponent</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124121234720.png" alt="image-20221124121234720"></p><h3 id="ä¸€ä¸ªé‡è¦çš„å†…ç½®å…³ç³»"><a href="#ä¸€ä¸ªé‡è¦çš„å†…ç½®å…³ç³»" class="headerlink" title="ä¸€ä¸ªé‡è¦çš„å†…ç½®å…³ç³»"></a>ä¸€ä¸ªé‡è¦çš„å†…ç½®å…³ç³»</h3><ul><li>ä¸€ä¸ªé‡è¦çš„å†…ç½®å…³ç³»ï¼šVueComponent.prototype. <strong>proto</strong> &#x3D;&#x3D;&#x3D; Vue.prototype</li><li>ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªå…³ç³»ï¼šè®©ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰å¯ä»¥è®¿é—®åˆ° VueåŸå‹ä¸Šçš„å±æ€§ã€æ–¹æ³•ã€‚</li></ul><p>å¥½åƒç»§æ‰¿</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124121316145.png" alt="image-20221124121316145"></p><h2 id="1-21-å•æ–‡ä»¶ç»„ä»¶"><a href="#1-21-å•æ–‡ä»¶ç»„ä»¶" class="headerlink" title="1.21 å•æ–‡ä»¶ç»„ä»¶"></a>1.21 å•æ–‡ä»¶ç»„ä»¶</h2><p>å•æ–‡ä»¶ç»„ä»¶å°±æ˜¯å°†ä¸€ä¸ªç»„ä»¶çš„ä»£ç å†™åœ¨ .vue è¿™ç§æ ¼å¼çš„æ–‡ä»¶ä¸­ï¼Œwebpack ä¼šå°† .vue æ–‡ä»¶è§£ææˆ html,css,jsè¿™äº›å½¢å¼ã€‚</p><p>æ¥åšä¸ªå•æ–‡ä»¶ç»„ä»¶çš„æ¡ˆä¾‹ï¼š</p><p><strong>School.vue</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!DOCTYPE html&gt;<br>&lt;html&gt;<br>&lt;head&gt;<br>&lt;meta charset=&quot;UTF-8&quot; /&gt;<br>&lt;title&gt;ç»ƒä¹ ä¸€ä¸‹å•æ–‡ä»¶ç»„ä»¶çš„è¯­æ³•&lt;/title&gt;<br>&lt;/head&gt;<br>&lt;body&gt;<br>&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;<br>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;<br>        &lt;script type=&quot;text/javascript&quot; src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;<br>&lt;script type=&quot;text/javascript&quot; src=&quot;./main.js&quot;&gt;&lt;/script&gt;<br>&lt;/body&gt;<br>&lt;/html&gt;<br><br></code></pre></td></tr></table></figure><p><strong>Student.vue</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h2&gt;å­¦ç”Ÿå§“åï¼š&#123;&#123;name&#125;&#125;&lt;/h2&gt;<br>        &lt;h2&gt;å­¦ç”Ÿå¹´é¾„ï¼š&#123;&#123;age&#125;&#125;&lt;/h2&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        name: &#x27;Student&#x27;,<br>        data() &#123;<br>            return &#123;<br>                name: &#x27;xyy&#x27;,<br>                age: 18<br>            &#125;<br>        &#125;,<br>    &#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><strong>App.vue</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>    &lt;School&gt;&lt;/School&gt;<br>    &lt;Student&gt;&lt;/Student&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    import School from &#x27;./school.vue&#x27;<br>    import Student from &#x27;./Student.vue&#x27;<br>    export default &#123;<br>        name: &#x27;App&#x27;,<br>        components: &#123;<br>            School,<br>            Student<br>        &#125;<br>    &#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p><strong>main.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#root&#x27;</span>,<br>    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;App&gt;&lt;/App&gt;`</span>,<br>    <span class="hljs-attr">components</span>: &#123;<br>        <span class="hljs-title class_">App</span><br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure><p><strong>index.htm</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç»ƒä¹ ä¸€ä¸‹å•æ–‡ä»¶ç»„ä»¶çš„è¯­æ³•<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å‡†å¤‡ä¸€ä¸ªå®¹å™¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./main.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h1 id="2-vueè„šæ‰‹æ¶ï¼Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ’æ§½ç­‰å¤æ‚å†…å®¹"><a href="#2-vueè„šæ‰‹æ¶ï¼Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ’æ§½ç­‰å¤æ‚å†…å®¹" class="headerlink" title="2. vueè„šæ‰‹æ¶ï¼Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ’æ§½ç­‰å¤æ‚å†…å®¹"></a>2. vueè„šæ‰‹æ¶ï¼Œè‡ªå®šä¹‰äº‹ä»¶ï¼Œæ’æ§½ç­‰å¤æ‚å†…å®¹</h1><h2 id="2-1-åˆå§‹åŒ–è„šæ‰‹æ¶"><a href="#2-1-åˆå§‹åŒ–è„šæ‰‹æ¶" class="headerlink" title="2.1 åˆå§‹åŒ–è„šæ‰‹æ¶"></a>2.1 åˆå§‹åŒ–è„šæ‰‹æ¶</h2><p> 2.1.1. è¯´æ˜ </p><ol><li><p>Vueè„šæ‰‹æ¶æ˜¯Vueå®˜æ–¹æä¾›çš„æ ‡å‡†åŒ–å¼€å‘å·¥å…·ï¼ˆå¼€å‘å¹³å°ï¼‰</p></li><li><p>æœ€æ–°çš„ç‰ˆæœ¬æ˜¯ 4.x</p></li><li><p>æ–‡æ¡£ <a href="https://cli.vuejs.org/zh/">Vue CLI</a></p></li></ol><p> 2.1.2. å…·ä½“æ­¥éª¤ </p><ol><li><p>å¦‚æœä¸‹è½½ç¼“æ…¢è¯·é…ç½®npmæ·˜å®é•œåƒ<code>npm config set registry http://registry.npm.taobao.org</code></p></li><li><p>å…¨å±€å®‰è£… @vue&#x2F;cli <code>npm install -g @vue/cli</code></p></li><li><p>åˆ‡æ¢åˆ°åˆ›å»ºé¡¹ç›®çš„ç›®å½•ï¼Œä½¿ç”¨å‘½ä»¤åˆ›å»ºé¡¹ç›®<code>vue create xxx</code></p></li><li><p>é€‰æ‹©ä½¿ç”¨vueçš„ç‰ˆæœ¬</p></li><li><p>å¯åŠ¨é¡¹ç›®<code>npm run serve</code></p></li><li><p>æ‰“åŒ…é¡¹ç›®<code>npm run build</code></p></li><li><p>æš‚åœé¡¹ç›® Ctrl+C</p></li></ol><p>Vueè„šæ‰‹æ¶éšè—äº†æ‰€æœ‰webpackç›¸å…³çš„é…ç½®ï¼Œè‹¥æƒ³æŸ¥çœ‹å…·ä½“çš„webpacké…ç½®ï¼Œè¯·æ‰§è¡Œ<br>vue inspect &gt; output.js</p><h3 id="è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„"><a href="#è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„" class="headerlink" title="è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„"></a>è„šæ‰‹æ¶æ–‡ä»¶ç»“æ„</h3>   <figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs stylus">â”œâ”€â”€ node_modules <br>â”œâ”€â”€ public<br>â”‚   â”œâ”€â”€ favicon<span class="hljs-selector-class">.ico</span>: é¡µç­¾å›¾æ ‡<br>â”‚   â””â”€â”€ index<span class="hljs-selector-class">.html</span>: ä¸»é¡µé¢<br>â”œâ”€â”€ <span class="hljs-attribute">src</span><br>â”‚   â”œâ”€â”€ assets: å­˜æ”¾é™æ€èµ„æº<br>â”‚   â”‚   â””â”€â”€ logo<span class="hljs-selector-class">.png</span><br>â”‚   â”‚â”€â”€ component: å­˜æ”¾ç»„ä»¶<br>â”‚   â”‚   â””â”€â”€ HelloWorld<span class="hljs-selector-class">.vue</span><br>â”‚   â”‚â”€â”€ App<span class="hljs-selector-class">.vue</span>: æ±‡æ€»æ‰€æœ‰ç»„ä»¶<br>â”‚   â”‚â”€â”€ <span class="hljs-selector-tag">main</span><span class="hljs-selector-class">.js</span>: å…¥å£æ–‡ä»¶<br>â”œâ”€â”€ <span class="hljs-selector-class">.gitignore</span>: gitç‰ˆæœ¬ç®¡åˆ¶å¿½ç•¥çš„é…ç½®<br>â”œâ”€â”€ babel<span class="hljs-selector-class">.config</span><span class="hljs-selector-class">.js</span>: babelçš„é…ç½®æ–‡ä»¶<br>â”œâ”€â”€ package<span class="hljs-selector-class">.json</span>: åº”ç”¨åŒ…é…ç½®æ–‡ä»¶ <br>â”œâ”€â”€ README<span class="hljs-selector-class">.md</span>: åº”ç”¨æè¿°æ–‡ä»¶<br>â”œâ”€â”€ package-lock.jsonï¼šåŒ…ç‰ˆæœ¬æ§åˆ¶æ–‡ä»¶<br><br></code></pre></td></tr></table></figure><h3 id="è„šæ‰‹æ¶demo"><a href="#è„šæ‰‹æ¶demo" class="headerlink" title="è„šæ‰‹æ¶demo"></a>è„šæ‰‹æ¶demo</h3><p>components:</p><p>å°±ç›´æ¥æŠŠå•æ–‡ä»¶ç»„ä»¶çš„ School.vue å’Œ Student.vue ä¸¤ä¸ªæ–‡ä»¶ç›´æ¥æ‹¿æ¥ç”¨ï¼Œä¸éœ€è¦ä¿®æ”¹ã€‚</p><p>App.vue:</p><p>å¼•å…¥è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œæ³¨å†Œä¸€ä¸‹è¿™ä¸¤ä¸ªç»„ä»¶ï¼Œå†ä½¿ç”¨ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Vue logo&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./assets/logo.png&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Student</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Student</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">School</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">School</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">School</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/School.vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Student.vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title class_">School</span>,</span><br><span class="language-javascript">    <span class="hljs-title class_">Student</span></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-id">#app</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">font-family</span>: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="language-css">  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;</span><br><span class="language-css">  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;</span><br><span class="language-css">  <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>main.js:</p><p>å…¥å£æ–‡ä»¶</p><p>Cli5.0.8ç‰ˆæœ¬</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">import &#123; createApp &#125; from &#x27;vue&#x27;<br>import App from &#x27;./App.vue&#x27;<br><br>createApp(App).mount(&#x27;#app&#x27;)<br><br></code></pre></td></tr></table></figure><p>Cli4+</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html">import Vue from &#x27;vue&#x27;<br>import App from &#x27;./App.vue&#x27;<br><br>Vue.config.productionTip = false<br><br>new Vue(&#123;<br>  render: h =&gt; h(App),<br>&#125;).$mount(&#x27;#app&#x27;)<br><br></code></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å°±è¦è¯¦ç»†è®²è§£ main.js ä¸­çš„ render å‡½æ•°</p><h3 id="renderå‡½æ•°"><a href="#renderå‡½æ•°" class="headerlink" title="renderå‡½æ•°"></a>renderå‡½æ•°</h3><blockquote><p>æ’å…¥ä¸€ä¸ªå°çŸ¥è¯†ï¼š</p></blockquote><p>ä½¿ç”¨ import å¯¼å…¥ç¬¬ä¸‰æ–¹åº“çš„æ—¶å€™ä¸éœ€è¦ åŠ  â€˜.&#x2F;â€™</p><p>å¯¼å…¥æˆ‘ä»¬è‡ªå·±å†™çš„ï¼š</p><p>  â€‹    import App from â€˜.&#x2F;App.vueâ€™</p><p>å¯¼å…¥ç¬¬ä¸‰æ–¹çš„</p><p>â€‹      import Vue from â€˜vueâ€™</p><p>ä¸éœ€è¦åœ¨ from â€˜vueâ€™ åŠ  <code>&#39;./&#39;</code> çš„åŸå› æ˜¯ç¬¬ä¸‰æ–¹åº“ node_modules äººå®¶å¸®æˆ‘ä»¬é…ç½®å¥½äº†ã€‚</p><p>æˆ‘ä»¬é€šè¿‡ import å¯¼å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œåœ¨ç¬¬ä¸‰æ–¹åº“çš„ package.json æ–‡ä»¶ä¸­ç¡®å®šäº†æˆ‘ä»¬å¼•å…¥çš„æ˜¯å“ªä¸ªæ–‡ä»¶<img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124121422825.png" alt="image-20221124121422825"></p><p>é€šè¿‡ module ç¡®å®šäº†æˆ‘ä»¬è¦å¼•å…¥çš„æ–‡ä»¶ã€‚</p><blockquote><p>å›åˆ° render å‡½æ•°</p></blockquote><p>ä¹‹å‰çš„å†™æ³•æ˜¯è¿™æ ·ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br><span class="hljs-attr">el</span>:<span class="hljs-string">&#x27;#root&#x27;</span>,<br><span class="hljs-attr">template</span>:<span class="hljs-string">`&lt;App&gt;&lt;/App&gt;`</span>,<br><span class="hljs-attr">components</span>:&#123;<span class="hljs-title class_">App</span>&#125;,<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>å¦‚æœè¿™æ ·å­å†™ï¼Œè¿è¡Œçš„è¯ä¼šå¼•å‘å¦‚ä¸‹çš„æŠ¥é”™</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124121513830.png" alt="image-20221124121513830"></p><p>æŠ¥é”™çš„æ„æ€æ˜¯ï¼Œæ˜¯åœ¨ä½¿ç”¨è¿è¡Œç‰ˆæœ¬çš„ vue ï¼Œæ²¡æœ‰æ¨¡æ¿è§£æå™¨ã€‚</p><p>ä»ä¸Šé¢çš„å°çŸ¥è¯†å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬å¼•å…¥çš„ vue ä¸æ˜¯å®Œæ•´ç‰ˆçš„ï¼Œæ˜¯æ®‹ç¼ºçš„ï¼ˆä¸ºäº†å‡å°vueçš„å¤§å°ï¼‰ã€‚æ‰€ä»¥æ®‹ç¼ºçš„vue.js åªæœ‰é€šè¿‡ renderå‡½æ•°æ‰èƒ½æŠŠé¡¹ç›®ç»™è·‘èµ·æ¥ã€‚</p><p>æ¥è§£æä¸€ä¸‹render</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// renderæœ€åŸå§‹å†™çš„æ–¹å¼</span><br><span class="hljs-comment">// renderæ˜¯ä¸ªå‡½æ•°ï¼Œè¿˜èƒ½æ¥æ”¶åˆ°å‚æ•°a</span><br><span class="hljs-comment">// è¿™ä¸ª createElement å¾ˆå…³é”®ï¼Œæ˜¯ä¸ªå›è°ƒå‡½æ•°</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params">createElement</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> createElement);<br>      <span class="hljs-comment">// è¿™ä¸ª createElement å›è°ƒå‡½æ•°èƒ½åˆ›å»ºå…ƒç´ </span><br>      <span class="hljs-comment">// å› ä¸ºæ®‹ç¼ºçš„vue ä¸èƒ½è§£æ templateï¼Œæ‰€ä»¥renderå°±æ¥å¸®å¿™è§£å†³è¿™ä¸ªé—®é¢˜</span><br>      <span class="hljs-comment">// createElement èƒ½åˆ›å»ºå…·ä½“çš„å…ƒç´ </span><br>      <span class="hljs-keyword">return</span> <span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;h1&#x27;</span>, <span class="hljs-string">&#x27;hello&#x27;</span>)<br>  &#125;<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br><br><br></code></pre></td></tr></table></figure><p>å› ä¸º render å‡½æ•°å†…å¹¶æ²¡æœ‰ç”¨åˆ° thisï¼Œæ‰€ä»¥å¯ä»¥ç®€å†™æˆç®­å¤´å‡½æ•°ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>  <span class="hljs-comment">// render: h =&gt; h(App),</span><br>  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">createElement</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">App</span>)<br>  &#125;<br>&#125;).$mount(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><p>å†ç®€å†™ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html">new Vue(&#123;<br>  // render: h =&gt; h(App),<br>  render: createElement =&gt; createElement(App)<br>&#125;).$mount(&#x27;#app&#x27;)<br></code></pre></td></tr></table></figure><p>æœ€åæŠŠ createElement æ¢æˆ h å°±å®Œäº‹äº†ã€‚</p><p>ç®—å•¦ç®—å•¦ï¼ŒæŠŠç®€å†™éƒ½æ•´ç†ä¸€éå§ï¼Œjsé‡Œçš„ç®€å†™ç¡®å®å¤šå“‡ã€‚</p><p>å¯¹è±¡å†…å†™æ–¹æ³•æœ€åŸå§‹çš„ï¼š</p><pre><code class="hljs">let obj = &#123;    name: &#39;aaa&#39;,    work: function (salary) &#123;        return &#39;å·¥èµ„&#39; + salary;    &#125;&#125;</code></pre><p>ES6 ç®€åŒ–ç‰ˆï¼š</p><pre><code class="hljs">let obj = &#123;    name: &#39;aaa&#39;,    work(salary) &#123;        return &#39;å·¥èµ„&#39; + salary;    &#125;&#125;</code></pre><p>ç®­å¤´å‡½æ•°ç®€åŒ–ç‰ˆ:</p><pre><code class="hljs">let obj = &#123;    name: &#39;aaa&#39;,    work: (salary) =&gt; &#123;        return &#39;å·¥èµ„&#39; + salary;    &#125;&#125;</code></pre><p>ç®­å¤´å‡½æ•°å†ç®€åŒ–ï¼ˆæœ€ç»ˆç‰ˆï¼‰ï¼š</p><p>&#x2F;&#x2F; åªæœ‰ä¸€ä¸ªå‚æ•°å°±å¯ä»¥æŠŠåœ†æ‹¬å·å»äº†ï¼Œå‡½æ•°ä½“å†…éƒ¨åªæœ‰ä¸€ä¸ª return å°±å¯ä»¥æŠŠå¤§æ‹¬å·å»æ‰ï¼Œreturnå»æ‰</p><pre><code class="hljs">let obj = &#123;    name: &#39;aaa&#39;,    work: salary =&gt; &#39;å·¥èµ„&#39; + salary;&#125;</code></pre><p>è¿™æ ·å°±å¯ä»¥ç†è§£ render å‡½æ•°çš„ç®€å†™æ–¹å¼äº†ã€‚</p><p>è„šæ‰‹æ¶ä¸­çš„index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é’ˆå¯¹IEæµè§ˆå™¨çš„ä¸€ä¸ªç‰¹æ®Šé…ç½®ï¼Œå«ä¹‰æ˜¯è®©IEæµè§ˆå™¨ä»¥æœ€é«˜çš„æ¸²æŸ“çº§åˆ«æ¸²æŸ“é¡µé¢ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">http-equiv</span>=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å¼€å¯ç§»åŠ¨ç«¯çš„ç†æƒ³è§†å£ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é…ç½®é¡µç­¾å›¾æ ‡ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&lt;%= BASE_URL %&gt;favicon.ico&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å¼•å…¥ç¬¬ä¸‰æ–¹æ ·å¼ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&lt;%= BASE_URL %&gt;css/bootstrap.css&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- é…ç½®ç½‘é¡µæ ‡é¢˜ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ç¡…è°·ç³»ç»Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å½“æµè§ˆå™¨ä¸æ”¯æŒjsæ—¶noscriptä¸­çš„å…ƒç´ å°±ä¼šè¢«æ¸²æŸ“ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">noscript</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>We&#x27;re sorry but &lt;%= htmlWebpackPlugin.options.title %&gt; doesn&#x27;t work properly without JavaScript enabled. Please enable it to continue.<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">noscript</span>&gt;</span><br><span class="hljs-comment">&lt;!-- å®¹å™¨ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- built files will be auto injected --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å…³äºä¸åŒç‰ˆæœ¬çš„å‡½æ•°"><a href="#å…³äºä¸åŒç‰ˆæœ¬çš„å‡½æ•°" class="headerlink" title="å…³äºä¸åŒç‰ˆæœ¬çš„å‡½æ•°"></a>å…³äºä¸åŒç‰ˆæœ¬çš„å‡½æ•°</h3><ol><li><p>vue.jsä¸vue.runtime.xxx.jsçš„åŒºåˆ« </p><ul><li><p>vue.js æ˜¯å®Œæ•´ç‰ˆçš„Vueï¼ŒåŒ…å«ï¼šæ ¸å¿ƒåŠŸèƒ½+æ¨¡æ¿è§£æå™¨</p></li><li><p>vue.runtime.xxx.js æ˜¯è¿è¡Œç‰ˆçš„Vueï¼ŒåªåŒ…å«æ ¸å¿ƒåŠŸèƒ½ï¼Œæ²¡æœ‰æ¨¡æ¿è§£æå™¨</p></li><li><p>esm å°±æ˜¯ ES6 module</p></li></ul></li><li><p>å› ä¸º vue.runtime.xxx.js æ²¡æœ‰æ¨¡æ¿è§£æå™¨ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨templateé…ç½®é¡¹ï¼Œéœ€è¦ä½¿ç”¨renderå‡½æ•°æ¥æ”¶åˆ°çš„createElementå‡½æ•°å»æŒ‡å®šå…·ä½“å†…å®¹</p></li></ol><h3 id="vue-config-js-é…ç½®æ–‡ä»¶"><a href="#vue-config-js-é…ç½®æ–‡ä»¶" class="headerlink" title="vue.config.js é…ç½®æ–‡ä»¶"></a>vue.config.js é…ç½®æ–‡ä»¶</h3><p>vue inspect &gt; output.jså¯ä»¥æŸ¥çœ‹åˆ°Vueè„šæ‰‹æ¶çš„é»˜è®¤é…ç½®</p><p>ä½¿ç”¨vue.config.jså¯ä»¥å¯¹è„šæ‰‹æ¶è¿›è¡Œä¸ªæ€§åŒ–å®šåˆ¶ï¼Œå’Œpackage.jsonåŒçº§ç›®å½•ï¼Œè¯¦è§ <a href="https://cli.vuejs.org/zh/config/#vue-config-js">é…ç½®å‚è€ƒ | Vue CLI</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html">module.exports = &#123;<br>  pages: &#123;<br>    index: &#123;<br>      entry: &#x27;src/index/main.js&#x27; // å…¥å£<br>    &#125;<br>  &#125;,<br>  lineOnSave: false// å…³é—­è¯­æ³•æ£€æŸ¥<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-2-vue-é›¶ç¢çš„ä¸€äº›çŸ¥è¯†"><a href="#2-2-vue-é›¶ç¢çš„ä¸€äº›çŸ¥è¯†" class="headerlink" title="2.2 vue é›¶ç¢çš„ä¸€äº›çŸ¥è¯†"></a>2.2 vue é›¶ç¢çš„ä¸€äº›çŸ¥è¯†</h2><h3 id="refå±æ€§"><a href="#refå±æ€§" class="headerlink" title="refå±æ€§"></a>refå±æ€§</h3><ul><li>è¢«ç”¨æ¥ç»™å…ƒç´ æˆ–å­ç»„ä»¶æ³¨å†Œå¼•ç”¨ä¿¡æ¯ï¼ˆidçš„æ›¿ä»£è€…ï¼‰</li><li>åº”ç”¨åœ¨htmlæ ‡ç­¾ä¸Šè·å–çš„æ˜¯çœŸå®DOMå…ƒç´ ï¼Œåº”ç”¨åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šæ˜¯ç»„ä»¶å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰</li><li>ä½¿ç”¨æ–¹å¼ï¼š<ul><li>æ‰“æ ‡è¯†ï¼š<code>&lt;h1 ref=&quot;xxx&quot;&gt;.....&lt;/h1&gt;</code>æˆ– <code>&lt;School ref=&quot;xxx&quot;&gt;&lt;/School&gt;</code></li><li>è·å–ï¼š<code>this.$refs.xxx</code></li></ul></li></ul><blockquote><p>å…·ä½“æ¡ˆä¾‹</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;msg&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;btn&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showDOM&quot;</span>&gt;</span>ç‚¹æˆ‘è¾“å‡ºä¸Šæ–¹çš„DOMå…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">School</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;sch&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">//å¼•å…¥Schoolç»„ä»¶</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">School</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/School&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">components</span>:&#123;<span class="hljs-title class_">School</span>&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">msg</span>:<span class="hljs-string">&#x27;æ¬¢è¿å­¦ä¹ Vueï¼&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">showDOM</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">title</span>) <span class="hljs-comment">//çœŸå®DOMå…ƒç´ </span></span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">btn</span>) <span class="hljs-comment">//çœŸå®DOMå…ƒç´ </span></span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">sch</span>) <span class="hljs-comment">//Schoolç»„ä»¶çš„å®ä¾‹å¯¹è±¡ï¼ˆvcï¼‰</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    </p><h3 id="propsé…ç½®é¡¹"><a href="#propsé…ç½®é¡¹" class="headerlink" title="propsé…ç½®é¡¹"></a>propsé…ç½®é¡¹</h3><p>propsè®©ç»„ä»¶æ¥æ”¶å¤–éƒ¨ä¼ è¿‡æ¥çš„æ•°æ® </p><ol><li><p>ä¼ é€’æ•°æ®<code>&lt;Demo name=&quot;xxx&quot; :age=&quot;18&quot;/&gt;</code>è¿™é‡Œageå‰åŠ :&#x3D;&#x3D;ï¼Œé€šè¿‡v-bindä½¿å¾—é‡Œé¢çš„18æ˜¯æ•°å­—</p></li><li><p>æ¥æ”¶æ•°æ®</p><ul><li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼ˆåªæ¥æ”¶ï¼‰props:[â€˜nameâ€™, â€˜ageâ€™] </p></li><li><p>ç¬¬äºŒç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ï¼‰props:{name:String, age:Number}</p></li><li><p>ç¬¬ä¸‰ç§æ–¹å¼ï¼ˆé™åˆ¶ç±»å‹ã€é™åˆ¶å¿…è¦æ€§ã€æŒ‡å®šé»˜è®¤å€¼ï¼‰</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">props: &#123;<br>    name: &#123;<br>        type: String, // ç±»å‹<br>        required: true,// å¿…è¦æ€§<br>        default: &#x27;cess&#x27;// é»˜è®¤å€¼<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li></ul></li></ol><blockquote><p>å¤‡æ³¨ï¼špropsæ˜¯åªè¯»çš„ï¼ŒVueåº•å±‚ä¼šç›‘æµ‹ä½ å¯¹propsçš„ä¿®æ”¹ï¼Œå¦‚æœè¿›è¡Œäº†ä¿®æ”¹ï¼Œå°±ä¼šå‘å‡ºè­¦å‘Šï¼Œè‹¥ä¸šåŠ¡éœ€æ±‚ç¡®å®éœ€è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆè¯·å¤åˆ¶propsçš„å†…å®¹åˆ°dataä¸­ä¸€ä»½ï¼Œç„¶åå»ä¿®æ”¹dataä¸­çš„æ•°æ®ã€‚</p></blockquote><p>ç¤ºä¾‹ä»£ç ï¼š</p><p>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ æ•°æ®</p><p>App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;Vue logo&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./assets/logo.png&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Student</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Student</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">School</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;haha&quot;</span> <span class="hljs-attr">:age</span>=<span class="hljs-string">&quot;this.age&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">School</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">School</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/School.vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Student.vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript">  data () &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">age</span>: <span class="hljs-number">360</span>  </span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title class_">School</span>,</span><br><span class="language-javascript">    <span class="hljs-title class_">Student</span></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-id">#app</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">font-family</span>: Avenir, Helvetica, Arial, sans-serif;</span><br><span class="language-css">  -webkit-<span class="hljs-attribute">font-smoothing</span>: antialiased;</span><br><span class="language-css">  -moz-osx-<span class="hljs-attribute">font-smoothing</span>: grayscale;</span><br><span class="language-css">  <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">  <span class="hljs-attribute">color</span>: <span class="hljs-number">#2c3e50</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure><p>School.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åç§°ï¼š&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡å¹´é¾„ï¼š&#123;&#123; age &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š&#123;&#123; address &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showName&quot;</span>&gt;</span>ç‚¹æˆ‘æç¤ºå­¦æ ¡å<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;School&quot;</span>,</span><br><span class="language-javascript">  <span class="hljs-comment">// æœ€ç®€å•çš„å†™æ³•ï¼šprops: [&#x27;name&#x27;, &#x27;age&#x27;]</span></span><br><span class="language-javascript">  <span class="hljs-attr">props</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å¿…é¡»è¦ä¼ çš„</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">age</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">address</span>: <span class="hljs-string">&quot;åŒ—äº¬æ˜Œå¹³&quot;</span>,</span><br><span class="language-javascript">    &#125;;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">showName</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">alert</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">&#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.demo</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">background-color</span>: orange;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h3 id="mixin-æ··å…¥"><a href="#mixin-æ··å…¥" class="headerlink" title="mixin(æ··å…¥)"></a>mixin(æ··å…¥)</h3><p>æ··å…¥ (mixin) æä¾›äº†ä¸€ç§éå¸¸çµæ´»çš„æ–¹å¼ï¼Œæ¥åˆ†å‘ Vueç»„ä»¶ä¸­çš„å¯å¤ç”¨åŠŸèƒ½ã€‚ä¸€ä¸ªæ··å…¥å¯¹è±¡å¯ä»¥åŒ…å«ä»»æ„ç»„ä»¶é€‰é¡¹ã€‚å½“ç»„ä»¶ä½¿ç”¨æ··å…¥å¯¹è±¡æ—¶ï¼Œæ‰€æœ‰æ··å…¥å¯¹è±¡çš„é€‰é¡¹å°†è¢«â€œæ··åˆâ€è¿›å…¥è¯¥ç»„ä»¶æœ¬èº«çš„é€‰é¡¹ã€‚</p><p>ä¾‹å­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html">// å®šä¹‰ä¸€ä¸ªæ··å…¥å¯¹è±¡<br>var myMixin = &#123;<br>  created: function () &#123;<br>    this.hello()<br>  &#125;,<br>  methods: &#123;<br>    hello: function () &#123;<br>      console.log(&#x27;hello from mixin!&#x27;)<br>    &#125;<br>  &#125;<br>&#125;<br><br>// å®šä¹‰ä¸€ä¸ªä½¿ç”¨æ··å…¥å¯¹è±¡çš„ç»„ä»¶<br>var Component = Vue.extend(&#123;<br>  mixins: [myMixin]<br>&#125;)<br><br></code></pre></td></tr></table></figure><h3 id="é€‰é¡¹åˆå¹¶"><a href="#é€‰é¡¹åˆå¹¶" class="headerlink" title="é€‰é¡¹åˆå¹¶"></a><strong>é€‰é¡¹åˆå¹¶</strong></h3><p>å½“ç»„ä»¶å’Œæ··å…¥å¯¹è±¡å«æœ‰åŒåé€‰é¡¹æ—¶ï¼Œè¿™äº›é€‰é¡¹å°†ä»¥æ°å½“çš„æ–¹å¼è¿›è¡Œâ€œåˆå¹¶â€ã€‚</p><p>æ¯”å¦‚ï¼Œæ•°æ®å¯¹è±¡åœ¨å†…éƒ¨ä¼šè¿›è¡Œé€’å½’åˆå¹¶ï¼Œå¹¶åœ¨å‘ç”Ÿå†²çªæ—¶ä»¥ç»„ä»¶æ•°æ®ä¼˜å…ˆã€‚</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs vue">var mixin = &#123;<br>  data: function () &#123;<br>    return &#123;<br>      message: &#x27;hello&#x27;,<br>      foo: &#x27;abc&#x27;<br>    &#125;<br>  &#125;<br>&#125;<br><br>new Vue(&#123;<br>  mixins: [mixin],<br>  data: function () &#123;<br>    return &#123;<br>      message: &#x27;goodbye&#x27;,<br>      bar: &#x27;def&#x27;<br>    &#125;<br>  &#125;,<br>  created: function () &#123;<br>    console.log(this.$data)<br>    // =&gt; &#123; message: &quot;goodbye&quot;, foo: &quot;abc&quot;, bar: &quot;def&quot; &#125;<br>  &#125;<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>åŒåé’©å­å‡½æ•°å°†åˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œå› æ­¤éƒ½å°†è¢«è°ƒç”¨ã€‚å¦å¤–ï¼Œæ··å…¥å¯¹è±¡çš„é’©å­å°†åœ¨ç»„ä»¶è‡ªèº«é’©å­ <strong>ä¹‹å‰</strong> è°ƒç”¨ã€‚</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html">var mixin = &#123;<br>  created: function () &#123;<br>    console.log(&#x27;æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨&#x27;)<br>  &#125;<br>&#125;<br><br>new Vue(&#123;<br>  mixins: [mixin],<br>  created: function () &#123;<br>    console.log(&#x27;ç»„ä»¶é’©å­è¢«è°ƒç”¨&#x27;)<br>  &#125;<br>&#125;)<br><br>// =&gt; &quot;æ··å…¥å¯¹è±¡çš„é’©å­è¢«è°ƒç”¨&quot;<br>// =&gt; &quot;ç»„ä»¶é’©å­è¢«è°ƒç”¨&quot;<br><br></code></pre></td></tr></table></figure><p>å€¼ä¸ºå¯¹è±¡çš„é€‰é¡¹ï¼Œä¾‹å¦‚ <code>methods</code>ã€<code>components</code> å’Œ<code>directives</code>ï¼Œå°†è¢«åˆå¹¶ä¸ºåŒä¸€ä¸ªå¯¹è±¡ã€‚ä¸¤ä¸ªå¯¹è±¡é”®åå†²çªæ—¶ï¼Œå–ç»„ä»¶å¯¹è±¡çš„é”®å€¼å¯¹ã€‚</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html">var mixin = &#123;<br>  methods: &#123;<br>    foo: function () &#123;<br>      console.log(&#x27;foo&#x27;)<br>    &#125;,<br>    conflicting: function () &#123;<br>      console.log(&#x27;from mixin&#x27;)<br>    &#125;<br>  &#125;<br>&#125;<br><br>var vm = new Vue(&#123;<br>  mixins: [mixin],<br>  methods: &#123;<br>    bar: function () &#123;<br>      console.log(&#x27;bar&#x27;)<br>    &#125;,<br>    conflicting: function () &#123;<br>      console.log(&#x27;from self&#x27;)<br>    &#125;<br>  &#125;<br>&#125;)<br><br>vm.foo() // =&gt; &quot;foo&quot;<br>vm.bar() // =&gt; &quot;bar&quot;<br>vm.conflicting() // =&gt; &quot;from self&quot;<br><br></code></pre></td></tr></table></figure><blockquote><p>å…¨å±€æ··å…¥ä¸å»ºè®®ä½¿ç”¨</p></blockquote><h3 id="plugin-æ’ä»¶"><a href="#plugin-æ’ä»¶" class="headerlink" title="plugin æ’ä»¶"></a>plugin æ’ä»¶</h3><ol><li>åŠŸèƒ½ï¼šç”¨äºå¢å¼ºVue</li><li>æœ¬è´¨ï¼šåŒ…å«installæ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstallçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Vueï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®</li><li>å®šä¹‰æ’ä»¶ï¼ˆè§ä¸‹ src&#x2F;plugin.jsï¼‰</li><li>ä½¿ç”¨æ’ä»¶ï¼šVue.use()</li></ol>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html">// è°ƒç”¨ `MyPlugin.install(Vue)`<br>Vue.use(MyPlugin)<br><br>new Vue(&#123;<br>  // ...ç»„ä»¶é€‰é¡¹<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>æœ¬è´¨ï¼šåŒ…å«installæ–¹æ³•çš„ä¸€ä¸ªå¯¹è±¡ï¼Œinstallçš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯Vueï¼Œç¬¬äºŒä¸ªä»¥åçš„å‚æ•°æ˜¯æ’ä»¶ä½¿ç”¨è€…ä¼ é€’çš„æ•°æ®ã€‚</p><p>å®šä¹‰æ’ä»¶ï¼š</p>   <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html">å¯¹è±¡.install = function (Vue, options) &#123;<br>    // 1. æ·»åŠ å…¨å±€è¿‡æ»¤å™¨<br>    Vue.filter(....)<br><br>    // 2. æ·»åŠ å…¨å±€æŒ‡ä»¤<br>    Vue.directive(....)<br><br>    // 3. é…ç½®å…¨å±€æ··å…¥(åˆ)<br>    Vue.mixin(....)<br><br>    // 4. æ·»åŠ å®ä¾‹æ–¹æ³•<br>    Vue.prototype.$myMethod = function () &#123;...&#125;<br>    Vue.prototype.$myProperty = xxxx<br>&#125;<br><br></code></pre></td></tr></table></figure><p>å…·ä½“æ¡ˆä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html">export default &#123;<br>    install(Vue, x, y, z) &#123;<br>        console.log(x, y, z)<br>        //å…¨å±€è¿‡æ»¤å™¨<br>        Vue.filter(&#x27;mySlice&#x27;, function (value) &#123;<br>            return value.slice(0, 4)<br>        &#125;)<br><br>        //å®šä¹‰å…¨å±€æŒ‡ä»¤<br>        Vue.directive(&#x27;fbind&#x27;, &#123;<br>            //æŒ‡ä»¤ä¸å…ƒç´ æˆåŠŸç»‘å®šæ—¶ï¼ˆä¸€ä¸Šæ¥ï¼‰<br>            bind(element, binding) &#123;<br>                element.value = binding.value<br>            &#125;,<br>            //æŒ‡ä»¤æ‰€åœ¨å…ƒç´ è¢«æ’å…¥é¡µé¢æ—¶<br>            inserted(element, binding) &#123;<br>                element.focus()<br>            &#125;,<br>            //æŒ‡ä»¤æ‰€åœ¨çš„æ¨¡æ¿è¢«é‡æ–°è§£ææ—¶<br>            update(element, binding) &#123;<br>                element.value = binding.value<br>            &#125;<br>        &#125;)<br><br>        //å®šä¹‰æ··å…¥<br>        Vue.mixin(&#123;<br>            data() &#123;<br>                return &#123;<br>                    x: 100,<br>                    y: 200<br>                &#125;<br>            &#125;,<br>        &#125;)<br><br>        //ç»™VueåŸå‹ä¸Šæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼ˆvmå’Œvcå°±éƒ½èƒ½ç”¨äº†ï¼‰<br>        Vue.prototype.hello = () =&gt; &#123; alert(&#x27;ä½ å¥½å•Šaaaa&#x27;) &#125;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>main.js</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html">// å¼•å…¥æ’ä»¶<br>import plugin from &#x27;./plugin&#x27;<br><br>// ä½¿ç”¨æ’ä»¶<br>Vue.use(plugin)<br><br></code></pre></td></tr></table></figure><p>ç„¶åå°±å¯ä»¥åœ¨åˆ«çš„ç»„ä»¶ä½¿ç”¨æ’ä»¶é‡Œçš„åŠŸèƒ½äº†ã€‚</p><h3 id="scopedæ ·å¼"><a href="#scopedæ ·å¼" class="headerlink" title="scopedæ ·å¼"></a>scopedæ ·å¼</h3><pre><code class="hljs">1. ä½œç”¨ï¼šè®©æ ·å¼åœ¨å±€éƒ¨ç”Ÿæ•ˆï¼Œé˜²æ­¢å†²çªã€‚2. å†™æ³•ï¼š`&lt;style scoped&gt;`</code></pre><blockquote><p>Vueä¸­çš„webpackå¹¶æ²¡æœ‰å®‰è£…æœ€æ–°ç‰ˆï¼Œå¯¼è‡´æœ‰äº›æ’ä»¶ä¹Ÿä¸èƒ½é»˜è®¤å®‰è£…æœ€æ–°ç‰ˆï¼Œå¦‚ npm i less-loader@7ï¼Œè€Œä¸æ˜¯æœ€æ–°ç‰ˆ</p></blockquote><p>å…·ä½“æ¡ˆä¾‹ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.demo</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">background-color</span>: pink;</span><br><span class="language-css"><span class="hljs-selector-class">.atguigu</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">font-size</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;School.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>å­¦æ ¡åç§°ï¼š&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š&#123;&#123; address &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;School&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å°šç¡…è°·atguigu&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>,</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.demo</span>&#123;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: skyblue;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;Student.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;demo&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>å­¦ç”Ÿå§“åï¼š&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;atguigu&quot;</span>&gt;</span>å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Student&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">sex</span>: <span class="hljs-string">&#x27;ç”·&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.demo</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="language-css">    <span class="hljs-selector-class">.atguigu</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">font-size</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure><p>src&#x2F;App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;title&quot;</span>&gt;</span>ä½ å¥½å•Š<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">School</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Student</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Student&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">School</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/School&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">components</span>: &#123; <span class="hljs-title class_">School</span>, <span class="hljs-title class_">Student</span> &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.title</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: red;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure><h3 id="æ€»ç»“TodoListæ¡ˆä¾‹"><a href="#æ€»ç»“TodoListæ¡ˆä¾‹" class="headerlink" title="æ€»ç»“TodoListæ¡ˆä¾‹"></a>æ€»ç»“TodoListæ¡ˆä¾‹</h3><h4 id="ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š"><a href="#ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š" class="headerlink" title="ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š"></a>ç»„ä»¶åŒ–ç¼–ç æµç¨‹ï¼š</h4><ol><li><p>æ‹†åˆ†é™æ€ç»„ä»¶ï¼šç»„ä»¶è¦æŒ‰ç…§åŠŸèƒ½ç‚¹æ‹†åˆ†ï¼Œå‘½åä¸è¦ä¸htmlå…ƒç´ å†²çªã€‚</p></li><li><p>å®ç°åŠ¨æ€ç»„ä»¶ï¼šè€ƒè™‘å¥½æ•°æ®çš„å­˜æ”¾ä½ç½®ï¼Œæ•°æ®æ˜¯ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼Œè¿˜æ˜¯ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼š</p><ul><li><p>ä¸€ä¸ªç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ç»„ä»¶è‡ªèº«å³å¯ã€‚</p></li><li><p>ä¸€äº›ç»„ä»¶åœ¨ç”¨ï¼šæ”¾åœ¨ä»–ä»¬å…±åŒçš„çˆ¶ç»„ä»¶ä¸Šï¼ˆçŠ¶æ€æå‡ï¼‰ã€‚</p></li></ul></li><li><p>å®ç°äº¤äº’ï¼šä»ç»‘å®šäº‹ä»¶å¼€å§‹ã€‚</p><ul><li>propsé€‚ç”¨äºï¼š<ul><li>çˆ¶ç»„ä»¶ &#x3D;&#x3D;&gt; å­ç»„ä»¶ é€šä¿¡</li><li>å­ç»„ä»¶ &#x3D;&#x3D;&gt; çˆ¶ç»„ä»¶ é€šä¿¡ï¼ˆè¦æ±‚çˆ¶å…ˆç»™å­ä¸€ä¸ªå‡½æ•°ï¼‰</li></ul></li></ul></li><li><p>ä½¿ç”¨v-modelæ—¶è¦åˆ‡è®°ï¼šv-modelç»‘å®šçš„å€¼ä¸èƒ½æ˜¯propsä¼ è¿‡æ¥çš„å€¼ï¼Œå› ä¸ºpropsæ˜¯ä¸å¯ä»¥ä¿®æ”¹çš„ï¼</p></li><li><p>propsä¼ è¿‡æ¥çš„è‹¥æ˜¯å¯¹è±¡ç±»å‹çš„å€¼ï¼Œä¿®æ”¹å¯¹è±¡ä¸­çš„å±æ€§æ—¶Vueä¸ä¼šæŠ¥é”™ï¼Œä½†ä¸æ¨èè¿™æ ·åšã€‚</p></li></ol><p>src&#x2F;App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-wrap&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">MyHeader</span> <span class="hljs-attr">:addTodo</span>=<span class="hljs-string">&quot;addTodo&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">MyList</span> <span class="hljs-attr">:todos</span>=<span class="hljs-string">&quot;todos&quot;</span> <span class="hljs-attr">:checkTodo</span>=<span class="hljs-string">&quot;checkTodo&quot;</span> <span class="hljs-attr">:deleteTodo</span>=<span class="hljs-string">&quot;deleteTodo&quot;</span>/&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">MyFooter</span> <span class="hljs-attr">:todos</span>=<span class="hljs-string">&quot;todos&quot;</span> </span><br><span class="hljs-tag">                  <span class="hljs-attr">:checkAllTodo</span>=<span class="hljs-string">&quot;checkAllTodo&quot;</span> <span class="hljs-attr">:clearAllTodo</span>=<span class="hljs-string">&quot;clearAllTodo&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyHeader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/MyHeader&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/MyList&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyFooter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/MyFooter.vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">components</span>: &#123; <span class="hljs-title class_">MyHeader</span>, <span class="hljs-title class_">MyList</span>, <span class="hljs-title class_">MyFooter</span> &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// ç”±äºtodosæ˜¯MyHeaderç»„ä»¶å’ŒMyFooterç»„ä»¶éƒ½åœ¨ä½¿ç”¨ï¼Œæ‰€ä»¥æ”¾åœ¨Appä¸­ï¼ˆçŠ¶æ€æå‡ï¼‰</span></span><br><span class="language-javascript">        <span class="hljs-attr">todos</span>:[</span><br><span class="language-javascript">          &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;001&#x27;</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;æŠ½çƒŸ&#x27;</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>&#125;,</span><br><span class="language-javascript">          &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;002&#x27;</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;å–é…’&#x27;</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">false</span>&#125;,</span><br><span class="language-javascript">          &#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;003&#x27;</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;å¼€è½¦&#x27;</span>,<span class="hljs-attr">done</span>:<span class="hljs-literal">true</span>&#125;</span><br><span class="language-javascript">        ]</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">//æ·»åŠ ä¸€ä¸ªtodo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">addTodo</span>(<span class="hljs-params">todoObj</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">unshift</span>(todoObj)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">//å‹¾é€‰orå–æ¶ˆå‹¾é€‰ä¸€ä¸ªtodo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">checkTodo</span>(<span class="hljs-params">id</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>)=&gt;</span>&#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">if</span>(todo.<span class="hljs-property">id</span> === id) todo.<span class="hljs-property">done</span> = !todo.<span class="hljs-property">done</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">//åˆ é™¤ä¸€ä¸ªtodo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">deleteTodo</span>(<span class="hljs-params">id</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>( <span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> todo.<span class="hljs-property">id</span> !== id )</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">//å…¨é€‰orå–æ¶ˆå…¨é€‰</span></span><br><span class="language-javascript">      <span class="hljs-title function_">checkAllTodo</span>(<span class="hljs-params">done</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>)=&gt;</span>&#123;</span><br><span class="language-javascript">          todo.<span class="hljs-property">done</span> = done</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">//æ¸…é™¤æ‰€æœ‰å·²ç»å®Œæˆçš„todo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">clearAllTodo</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>)=&gt;</span>&#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> !todo.<span class="hljs-property">done</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-comment">/*base*/</span></span><br><span class="language-css">  <span class="hljs-selector-tag">body</span> &#123;<span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.btn</span> &#123;<span class="hljs-attribute">display</span>: inline-block;<span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">12px</span>;<span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">20px</span>;<span class="hljs-attribute">text-align</span>: center;<span class="hljs-attribute">vertical-align</span>: middle;<span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">    <span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>), <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>);</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.btn-danger</span> &#123;<span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#da4f49</span>;<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#bd362f</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.btn-danger</span><span class="hljs-selector-pseudo">:hover</span> &#123;<span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#bd362f</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span> &#123;<span class="hljs-attribute">outline</span>: none;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.todo-container</span> &#123;<span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;<span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.todo-container</span> <span class="hljs-selector-class">.todo-wrap</span> &#123;<span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;MyHeader.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-header&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;è¯·è¾“å…¥ä½ çš„ä»»åŠ¡åç§°ï¼ŒæŒ‰å›è½¦é”®ç¡®è®¤&quot;</span> </span><br><span class="hljs-tag">           <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;title&quot;</span> @<span class="hljs-attr">keyup.enter</span>=<span class="hljs-string">&quot;add&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123;nanoid&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;nanoid&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;MyHeader&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;addTodo&#x27;</span>],<span class="hljs-comment">// æ¥æ”¶ä»Appä¼ é€’è¿‡æ¥çš„addTodo</span></span><br><span class="language-javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;&#x27;</span><span class="hljs-comment">// æ”¶é›†ç”¨æˆ·è¾“å…¥çš„title</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-comment">// æ ¡éªŒæ•°æ®</span></span><br><span class="language-javascript"><span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;è¾“å…¥ä¸èƒ½ä¸ºç©º&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-comment">// å°†ç”¨æˆ·çš„è¾“å…¥åŒ…è£…æˆä¸€ä¸ªtodoå¯¹è±¡</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> todoObj = &#123; <span class="hljs-attr">id</span>:<span class="hljs-title function_">nanoid</span>(), <span class="hljs-attr">title</span>:<span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span>, <span class="hljs-attr">done</span>:<span class="hljs-literal">false</span> &#125;</span><br><span class="language-javascript"><span class="hljs-comment">// é€šçŸ¥Appç»„ä»¶å»æ·»åŠ ä¸€ä¸ªtodoå¯¹è±¡</span></span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addTodo</span>(todoObj)</span><br><span class="language-javascript"><span class="hljs-comment">// æ¸…ç©ºè¾“å…¥</span></span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/*header*/</span></span><br><span class="language-css"><span class="hljs-selector-class">.todo-header</span> <span class="hljs-selector-tag">input</span> &#123;<span class="hljs-attribute">width</span>: <span class="hljs-number">560px</span>;<span class="hljs-attribute">height</span>: <span class="hljs-number">28px</span>;<span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;<span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">7px</span>;&#125;</span><br><span class="language-css"><span class="hljs-selector-class">.todo-header</span> <span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:focus</span> &#123;<span class="hljs-attribute">outline</span>: none;<span class="hljs-attribute">border-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">82</span>, <span class="hljs-number">168</span>, <span class="hljs-number">236</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css"><span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">1px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.075</span>), <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">82</span>, <span class="hljs-number">168</span>, <span class="hljs-number">236</span>, <span class="hljs-number">0.6</span>);&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;MyList.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-main&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">MyItem</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;todoObj in todos&quot;</span><span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;todoObj.id&quot;</span> </span><br><span class="hljs-tag">            <span class="hljs-attr">:todo</span>=<span class="hljs-string">&quot;todoObj&quot;</span> <span class="hljs-attr">:checkTodo</span>=<span class="hljs-string">&quot;checkTodo&quot;</span><span class="hljs-attr">:deleteTodo</span>=<span class="hljs-string">&quot;deleteTodo&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./MyItem&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;MyList&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">components</span>:&#123;<span class="hljs-title class_">MyItem</span>&#125;,</span><br><span class="language-javascript">    <span class="hljs-comment">// å£°æ˜æ¥æ”¶Appä¼ é€’çš„æ•°æ®ï¼Œå…¶ä¸­todosæ˜¯è‡ªå·±ç”¨çš„ï¼ŒcheckTodoå’ŒdeleteTodoæ˜¯ç»™å­ç»„ä»¶MyItemç”¨çš„</span></span><br><span class="language-javascript">    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;todos&#x27;</span>,<span class="hljs-string">&#x27;checkTodo&#x27;</span>,<span class="hljs-string">&#x27;deleteTodo&#x27;</span>]</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-comment">/*main*/</span></span><br><span class="language-css">  <span class="hljs-selector-class">.todo-main</span> &#123;<span class="hljs-attribute">margin-left</span>: <span class="hljs-number">0px</span>;<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;<span class="hljs-attribute">padding</span>: <span class="hljs-number">0px</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.todo-empty</span> &#123;<span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;<span class="hljs-attribute">padding-left</span>: <span class="hljs-number">5px</span>;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;MyItem.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- å¦‚ä¸‹ä»£ç ä¹Ÿèƒ½å®ç°åŠŸèƒ½ï¼Œä½†æ˜¯ä¸å¤ªæ¨èï¼Œå› ä¸ºæœ‰ç‚¹è¿ååŸåˆ™ï¼Œå› ä¸ºä¿®æ”¹äº†props --&gt;</span><br>      <span class="hljs-comment">&lt;!-- &lt;input type=&quot;checkbox&quot; v-model=&quot;todo.done&quot;/&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">:checked</span>=<span class="hljs-string">&quot;todo.done&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;handleCheck(todo.id)&quot;</span>/&gt;</span>  <br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; todo.title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;handleDelete(todo.id)&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;MyItem&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-comment">//å£°æ˜æ¥æ”¶todoã€checkTodoã€deleteTodo</span></span><br><span class="language-javascript">    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;todo&#x27;</span>,<span class="hljs-string">&#x27;checkTodo&#x27;</span>,<span class="hljs-string">&#x27;deleteTodo&#x27;</span>],</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// å‹¾é€‰orå–æ¶ˆå‹¾é€‰</span></span><br><span class="language-javascript">      <span class="hljs-title function_">handleCheck</span>(<span class="hljs-params">id</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkTodo</span>(id)<span class="hljs-comment">// é€šçŸ¥Appç»„ä»¶å°†å¯¹åº”çš„todoå¯¹è±¡çš„doneå€¼å–å</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">// åˆ é™¤</span></span><br><span class="language-javascript">      <span class="hljs-title function_">handleDelete</span>(<span class="hljs-params">id</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span>(<span class="hljs-title function_">confirm</span>(<span class="hljs-string">&#x27;ç¡®å®šåˆ é™¤å—ï¼Ÿ&#x27;</span>))&#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">deleteTodo</span>(id)<span class="hljs-comment">// é€šçŸ¥Appç»„ä»¶å°†å¯¹åº”çš„todoå¯¹è±¡åˆ é™¤</span></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-comment">/*item*/</span></span><br><span class="language-css">  <span class="hljs-selector-tag">li</span> &#123;<span class="hljs-attribute">list-style</span>: none;<span class="hljs-attribute">height</span>: <span class="hljs-number">36px</span>;<span class="hljs-attribute">line-height</span>: <span class="hljs-number">36px</span>;<span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">label</span> &#123;<span class="hljs-attribute">float</span>: left;<span class="hljs-attribute">cursor</span>: pointer;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">input</span> &#123;<span class="hljs-attribute">vertical-align</span>:middle; <span class="hljs-attribute">margin-right</span>:<span class="hljs-number">6px</span>; <span class="hljs-attribute">position</span>:relative;<span class="hljs-attribute">top</span>: -<span class="hljs-number">1px</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">button</span> &#123;<span class="hljs-attribute">float</span>: right;<span class="hljs-attribute">display</span>: none;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">3px</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:before</span> &#123;<span class="hljs-attribute">content</span>: initial;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span> &#123;<span class="hljs-attribute">border-bottom</span>: none;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span>&#123;<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ddd</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-tag">button</span>&#123;<span class="hljs-attribute">display</span>: block;&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;MyFooter.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-footer&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>      <span class="hljs-comment">&lt;!-- &lt;input type=&quot;checkbox&quot; :checked=&quot;isAll&quot; @change=&quot;checkAll&quot;/&gt; --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;isAll&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å·²å®Œæˆ&#123;&#123; doneTotal &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> / å…¨éƒ¨&#123;&#123; total &#125;&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clearAll&quot;</span>&gt;</span>æ¸…é™¤å·²å®Œæˆä»»åŠ¡<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;MyFooter&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;todos&#x27;</span>,<span class="hljs-string">&#x27;checkAllTodo&#x27;</span>,<span class="hljs-string">&#x27;clearAllTodo&#x27;</span>],</span><br><span class="language-javascript">    <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// æ€»æ•°</span></span><br><span class="language-javascript">      <span class="hljs-title function_">total</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-property">length</span></span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">// å·²å®Œæˆæ•°</span></span><br><span class="language-javascript">      <span class="hljs-title function_">doneTotal</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//æ­¤å¤„ä½¿ç”¨reduceæ–¹æ³•åšæ¡ä»¶ç»Ÿè®¡</span></span><br><span class="language-javascript">        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">pre,todo</span>)=&gt;</span> pre + (todo.<span class="hljs-property">done</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>) ,<span class="hljs-number">0</span>)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">// æ§åˆ¶å…¨é€‰æ¡†</span></span><br><span class="language-javascript">      <span class="hljs-attr">isAll</span>:&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">//å…¨é€‰æ¡†æ˜¯å¦å‹¾é€‰</span></span><br><span class="language-javascript">        <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">doneTotal</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">total</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">total</span> &gt; <span class="hljs-number">0</span></span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-comment">//isAllè¢«ä¿®æ”¹æ—¶setè¢«è°ƒç”¨</span></span><br><span class="language-javascript">        <span class="hljs-title function_">set</span>(<span class="hljs-params">value</span>)&#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">checkAllTodo</span>(value)</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">/* checkAll(e)&#123;</span></span><br><span class="hljs-comment"><span class="language-javascript">this.checkAllTodo(e.target.checked)</span></span><br><span class="hljs-comment"><span class="language-javascript">&#125; */</span></span><br><span class="language-javascript">      <span class="hljs-comment">//æ¸…ç©ºæ‰€æœ‰å·²å®Œæˆ</span></span><br><span class="language-javascript">      <span class="hljs-title function_">clearAll</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clearAllTodo</span>()</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-comment">/*footer*/</span></span><br><span class="language-css">  <span class="hljs-selector-class">.todo-footer</span> &#123;<span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;<span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;<span class="hljs-attribute">padding-left</span>: <span class="hljs-number">6px</span>;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.todo-footer</span> <span class="hljs-selector-tag">label</span> &#123;<span class="hljs-attribute">display</span>: inline-block;<span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;<span class="hljs-attribute">cursor</span>: pointer;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.todo-footer</span> <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">input</span> &#123;<span class="hljs-attribute">position</span>: relative;<span class="hljs-attribute">top</span>: -<span class="hljs-number">1px</span>;<span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;&#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.todo-footer</span> <span class="hljs-selector-tag">button</span> &#123;<span class="hljs-attribute">float</span>: right;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221117162252774.png" alt="image-20221117162252774"></p><h2 id="2-3-æµè§ˆå™¨æœ¬åœ°å­˜å‚¨"><a href="#2-3-æµè§ˆå™¨æœ¬åœ°å­˜å‚¨" class="headerlink" title="2.3 æµè§ˆå™¨æœ¬åœ°å­˜å‚¨"></a>2.3 æµè§ˆå™¨æœ¬åœ°å­˜å‚¨</h2><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><p>Cookieæ˜¯æœ€æ—©è¢«æå‡ºæ¥çš„æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼Œåœ¨æ­¤ä¹‹å‰ï¼ŒæœåŠ¡ç«¯æ˜¯æ— æ³•åˆ¤æ–­ç½‘ç»œä¸­çš„ä¸¤ä¸ªè¯·æ±‚æ˜¯å¦æ˜¯åŒä¸€ç”¨æˆ·å‘èµ·çš„ï¼Œä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒCookieå°±å‡ºç°äº†ã€‚Cookieæ˜¯å­˜å‚¨åœ¨ç”¨æˆ·æµè§ˆå™¨ä¸­çš„ä¸€æ®µä¸è¶…è¿‡ 4 KB çš„å­—ç¬¦ä¸²ã€‚å®ƒç”±ä¸€ä¸ªåç§°ï¼ˆNameï¼‰ã€ä¸€ä¸ªå€¼ï¼ˆValueï¼‰å’Œå…¶å®ƒå‡ ä¸ªç”¨ äºæ§åˆ¶ Cookieæœ‰æ•ˆæœŸã€å®‰å…¨æ€§ã€ä½¿ç”¨èŒƒå›´çš„å¯é€‰å±æ€§ç»„æˆã€‚ä¸åŒåŸŸåä¸‹çš„ Cookie å„è‡ªç‹¬ç«‹ï¼Œæ¯å½“å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šè‡ªåŠ¨æŠŠå½“å‰åŸŸåä¸‹æ‰€æœ‰æœªè¿‡æœŸçš„ Cookieä¸€åŒå‘é€åˆ°æœåŠ¡å™¨ã€‚</p><p><strong>Cookieçš„ç‰¹æ€§ ï¼š</strong></p><ul><li>Cookieä¸€æ—¦åˆ›å»ºæˆåŠŸï¼Œåç§°å°±æ— æ³•ä¿®æ”¹</li><li>Cookieæ˜¯æ— æ³•è·¨åŸŸåçš„ï¼Œä¹Ÿå°±æ˜¯è¯´aåŸŸåå’ŒbåŸŸåä¸‹çš„cookieæ˜¯æ— æ³•å…±äº«çš„ï¼Œè¿™ä¹Ÿæ˜¯ç”±Cookieçš„éšç§å®‰å…¨æ€§å†³å®šçš„ï¼Œè¿™æ ·å°±èƒ½å¤Ÿé˜»æ­¢éæ³•è·å–å…¶ä»–ç½‘ç«™çš„Cookie</li><li>æ¯ä¸ªåŸŸåä¸‹Cookieçš„æ•°é‡ä¸èƒ½è¶…è¿‡20ä¸ªï¼Œæ¯ä¸ªCookieçš„å¤§å°ä¸èƒ½è¶…è¿‡4kb</li><li>æœ‰å®‰å…¨é—®é¢˜ï¼Œå¦‚æœCookieè¢«æ‹¦æˆªäº†ï¼Œé‚£å°±å¯è·å¾—sessionçš„æ‰€æœ‰ä¿¡æ¯ï¼Œå³ä½¿åŠ å¯†ä¹Ÿäºäº‹æ— è¡¥ï¼Œæ— éœ€çŸ¥é“cookieçš„æ„ä¹‰ï¼Œåªè¦è½¬å‘cookieå°±èƒ½è¾¾åˆ°ç›®çš„</li><li>Cookieåœ¨è¯·æ±‚ä¸€ä¸ªæ–°çš„é¡µé¢çš„æ—¶å€™éƒ½ä¼šè¢«å‘é€è¿‡å»</li></ul><p><strong>Cookie åœ¨èº«ä»½è®¤è¯ä¸­çš„ä½œç”¨</strong></p><ul><li><p>å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨é€šè¿‡å“åº”å¤´çš„å½¢å¼ï¼Œå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªèº«ä»½è®¤è¯çš„ Cookieï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ å°† Cookie ä¿å­˜åœ¨æµè§ˆå™¨ä¸­ã€‚</p></li><li><p>éšåï¼Œå½“å®¢æˆ·ç«¯æµè§ˆå™¨æ¯æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†èº«ä»½è®¤è¯ç›¸å…³çš„ Cookieï¼Œé€šè¿‡è¯·æ±‚å¤´çš„å½¢å¼å‘é€ç»™ æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å³å¯éªŒæ˜å®¢æˆ·ç«¯çš„èº«ä»½ã€‚</p></li></ul><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/e29b7e0bef784bc5b6b8ed50b0d8a509.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><strong>Cookie ä¸å…·æœ‰å®‰å…¨æ€§</strong></p><p>ç”±äº Cookie æ˜¯å­˜å‚¨åœ¨æµè§ˆå™¨ä¸­çš„ï¼Œè€Œä¸”æµè§ˆå™¨ä¹Ÿæä¾›äº†è¯»å†™ Cookie çš„ APIï¼Œå› æ­¤ Cookie å¾ˆå®¹æ˜“è¢«ä¼ªé€ ï¼Œä¸å…·æœ‰å®‰å…¨æ€§ã€‚å› æ­¤ä¸å»ºè®®æœåŠ¡å™¨å°†é‡è¦çš„éšç§æ•°æ®ï¼Œé€šè¿‡ Cookie çš„å½¢å¼å‘é€ç»™æµè§ˆå™¨ã€‚</p><blockquote><p>æ³¨æ„ï¼šåƒä¸‡ä¸è¦ä½¿ç”¨ Cookie å­˜å‚¨é‡è¦ä¸”éšç§çš„æ•°æ®ï¼æ¯”å¦‚ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ã€å¯†ç ç­‰ã€‚</p></blockquote><h3 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h3><p>Sessionæ˜¯å¦ä¸€ç§è®°å½•å®¢æˆ·çŠ¶æ€çš„æœºåˆ¶ï¼Œä¸åŒçš„æ˜¯Cookieä¿å­˜åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨ä¸­ï¼Œè€ŒSessionä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æŠŠå®¢æˆ·ç«¯ä¿¡æ¯ä»¥æŸç§å½¢å¼è®°å½•åœ¨æœåŠ¡å™¨ä¸Šã€‚è¿™å°±æ˜¯Sessionã€‚å®¢æˆ·ç«¯æµè§ˆå™¨å†æ¬¡è®¿é—®æ—¶åªéœ€è¦ä»è¯¥Sessionä¸­æŸ¥æ‰¾è¯¥å®¢æˆ·çš„çŠ¶æ€å°±å¯ä»¥äº†sessionæ˜¯ä¸€ç§ç‰¹æ®Šçš„cookieã€‚cookieæ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯çš„ï¼Œè€Œsessionæ˜¯ä¿å­˜åœ¨æœåŠ¡ç«¯ã€‚</p><p><strong>ä¸ºä»€ä¹ˆè¦ç”¨session</strong>  </p><p>ç”±äºcookieæ˜¯å­˜åœ¨ç”¨æˆ·ç«¯ï¼Œè€Œä¸”å®ƒæœ¬èº«å­˜å‚¨çš„å°ºå¯¸å¤§å°ä¹Ÿæœ‰é™ï¼Œæœ€å…³é”®æ˜¯ç”¨æˆ·å¯ä»¥æ˜¯å¯è§çš„ï¼Œå¹¶å¯ä»¥éšæ„çš„ä¿®æ”¹ï¼Œå¾ˆä¸å®‰å…¨ã€‚é‚£å¦‚ä½•åˆè¦å®‰å…¨ï¼Œåˆå¯ä»¥æ–¹ä¾¿çš„å…¨å±€è¯»å–ä¿¡æ¯å‘¢ï¼Ÿäºæ˜¯ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œä¸€ç§æ–°çš„å­˜å‚¨ä¼šè¯æœºåˆ¶ï¼šsessionè¯ç”Ÿäº†</p><p><strong>sessionåŸç†</strong><br>å½“å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ç”Ÿæˆä¸€ä»½sessionä¿å­˜åœ¨æœåŠ¡ç«¯ï¼Œå°†è¯¥æ•°æ®(session)çš„idä»¥cookieçš„å½¢å¼ä¼ é€’ç»™å®¢æˆ·ç«¯ï¼›ä»¥åçš„æ¯æ¬¡è¯·æ±‚ï¼Œæµè§ˆå™¨éƒ½ä¼šè‡ªåŠ¨çš„æºå¸¦cookieæ¥è®¿é—®æœåŠ¡å™¨(sessionæ•°æ®id)ã€‚</p><blockquote><p>å›¾ç¤ºï¼š</p></blockquote><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124154221400.png"></p><blockquote><p>sessionæˆ‘è§‰å¾—å¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªè¡¨ï¼Œæ ¹æ®cookieä¼ æ¥çš„å€¼æŸ¥è¯¢è¡¨ä¸­çš„å†…å®¹</p></blockquote><p><strong>session æ ‡å‡†å·¥ä½œæµç¨‹</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124154249377.png" alt="image-20221124154249377"></p><h3 id="WebStorageï¼ˆjs-æœ¬åœ°å­˜å‚¨ï¼‰"><a href="#WebStorageï¼ˆjs-æœ¬åœ°å­˜å‚¨ï¼‰" class="headerlink" title="WebStorageï¼ˆjs æœ¬åœ°å­˜å‚¨ï¼‰"></a>WebStorageï¼ˆjs æœ¬åœ°å­˜å‚¨ï¼‰</h3><p>å­˜å‚¨å†…å®¹å¤§å°ä¸€èˆ¬æ”¯æŒ <strong>5MB</strong> å·¦å³ï¼ˆä¸åŒæµè§ˆå™¨å¯èƒ½è¿˜ä¸ä¸€æ ·ï¼‰<br>æµè§ˆå™¨ç«¯é€šè¿‡Window.sessionStorageå’ŒWindow.localStorageå±æ€§æ¥å®ç°æœ¬åœ°å­˜å‚¨æœºåˆ¶<br>ç›¸å…³API</p><ul><li>xxxStorage.setItem(â€˜keyâ€™, â€˜valueâ€™)è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®å’Œå€¼ä½œä¸ºå‚æ•°ï¼Œä¼šæŠŠé”®å€¼å¯¹æ·»åŠ åˆ°å­˜å‚¨ä¸­ï¼Œå¦‚æœé”®åå­˜åœ¨ï¼Œåˆ™æ›´æ–°å…¶å¯¹åº”çš„å€¼</li><li>xxxStorage.getItem(â€˜keyâ€™)è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œè¿”å›é”®åå¯¹åº”çš„å€¼</li><li>xxxStorage.removeItem(â€˜keyâ€™)è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªé”®åä½œä¸ºå‚æ•°ï¼Œå¹¶æŠŠè¯¥é”®åä»å­˜å‚¨ä¸­åˆ é™¤</li><li>xxxStorage.clear()è¯¥æ–¹æ³•ä¼šæ¸…ç©ºå­˜å‚¨ä¸­çš„æ‰€æœ‰æ•°æ®</li></ul><blockquote><p>å¤‡æ³¨</p></blockquote><ul><li>SessionStorageå­˜å‚¨çš„å†…å®¹ä¼šéšç€æµè§ˆå™¨çª—å£å…³é—­è€Œæ¶ˆå¤±</li><li>LocalStorageå­˜å‚¨çš„å†…å®¹ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…é™¤æ‰ä¼šæ¶ˆå¤±</li><li>xxxStorage.getItem(xxx)å¦‚æœ xxx å¯¹åº”çš„ value è·å–ä¸åˆ°ï¼Œé‚£ä¹ˆgetItem()çš„è¿”å›å€¼æ˜¯null</li><li>JSON.parse(null)çš„ç»“æœä¾ç„¶æ˜¯null</li></ul><h3 id="LocalStorage"><a href="#LocalStorage" class="headerlink" title="LocalStorage"></a>LocalStorage</h3><p>LocalStorageæ˜¯HTML5æ–°å¼•å…¥çš„ç‰¹æ€§ï¼Œç”±äºæœ‰çš„æ—¶å€™æˆ‘ä»¬å­˜å‚¨çš„ä¿¡æ¯è¾ƒå¤§ï¼ŒCookieå°±ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œè¿™æ—¶å€™LocalStorageå°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p><p><strong>LocalStorageçš„ä¼˜ç‚¹ ï¼š</strong></p><ul><li>åœ¨å¤§å°æ–¹é¢ï¼ŒLocalStorageçš„å¤§å°ä¸€èˆ¬ä¸º5MBï¼Œå¯ä»¥å‚¨å­˜æ›´å¤šçš„ä¿¡æ¯</li><li>LocalStorageæ˜¯æŒä¹…å‚¨å­˜ï¼Œå¹¶ä¸ä¼šéšç€é¡µé¢çš„å…³é—­è€Œæ¶ˆå¤±ï¼Œé™¤éä¸»åŠ¨æ¸…ç†ï¼Œä¸ç„¶ä¼šæ°¸ä¹…å­˜åœ¨</li><li>ä»…å‚¨å­˜åœ¨æœ¬åœ°ï¼Œä¸åƒCookieé‚£æ ·æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šè¢«æºå¸¦</li></ul><p><strong>LocalStorageçš„ç¼ºç‚¹ ï¼š</strong></p><ul><li>å­˜åœ¨æµè§ˆå™¨å…¼å®¹é—®é¢˜ï¼ŒIE8ä»¥ä¸‹ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸æ”¯æŒ</li><li>å¦‚æœæµè§ˆå™¨è®¾ç½®ä¸ºéšç§æ¨¡å¼ï¼Œé‚£æˆ‘ä»¬å°†æ— æ³•è¯»å–åˆ°LocalStorage</li><li>LocalStorageå—åˆ°åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œå³ç«¯å£ã€åè®®ã€ä¸»æœºåœ°å€æœ‰ä»»ä½•ä¸€ä¸ªä¸ç›¸åŒï¼Œéƒ½ä¸ä¼šè®¿é—®</li></ul><p><strong>LocalStorageçš„å¸¸ç”¨API ï¼š</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä¿å­˜æ•°æ®åˆ° localStorage</span><br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-string">&#x27;value&#x27;</span>);<br><br><span class="hljs-comment">// ä» localStorage è·å–æ•°æ®</span><br><span class="hljs-keyword">let</span> data = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;key&#x27;</span>);<br><br><span class="hljs-comment">// ä» localStorage åˆ é™¤ä¿å­˜çš„æ•°æ®</span><br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&#x27;key&#x27;</span>);<br><br><span class="hljs-comment">// ä» localStorage åˆ é™¤æ‰€æœ‰ä¿å­˜çš„æ•°æ®</span><br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>();<br><br><span class="hljs-comment">// è·å–æŸä¸ªç´¢å¼•çš„Key</span><br><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">key</span>(index)<br></code></pre></td></tr></table></figure><p><strong>LocalStorageçš„ä½¿ç”¨åœºæ™¯:</strong></p><ul><li>æœ‰äº›ç½‘ç«™æœ‰æ¢è‚¤çš„åŠŸèƒ½ï¼Œè¿™æ—¶å€™å°±å¯ä»¥å°†æ¢è‚¤çš„ä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°çš„LocalStorageä¸­ï¼Œå½“éœ€è¦æ¢è‚¤çš„æ—¶å€™ï¼Œç›´æ¥æ“ä½œLocalStorageå³å¯</li><li>åœ¨ç½‘ç«™ä¸­çš„ç”¨æˆ·æµè§ˆä¿¡æ¯ä¹Ÿä¼šå­˜å‚¨åœ¨LocalStorageä¸­ï¼Œè¿˜æœ‰ç½‘ç«™çš„ä¸€äº›ä¸å¸¸å˜åŠ¨çš„ä¸ªäººä¿¡æ¯ç­‰ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨æœ¬åœ°çš„LocalStorageä¸­</li></ul><h3 id="SessionStorage"><a href="#SessionStorage" class="headerlink" title="SessionStorage"></a>SessionStorage</h3><p>SessionStorageå’ŒLocalStorageéƒ½æ˜¯åœ¨HTML5æ‰æå‡ºæ¥çš„å­˜å‚¨æ–¹æ¡ˆï¼ŒSessionStorage<br>ä¸»è¦ç”¨äºä¸´æ—¶ä¿å­˜åŒä¸€çª—å£(æˆ–æ ‡ç­¾é¡µ)çš„æ•°æ®ï¼Œåˆ·æ–°é¡µé¢æ—¶ä¸ä¼šåˆ é™¤ï¼Œå…³é—­çª—å£æˆ–æ ‡ç­¾é¡µä¹‹åå°†ä¼šåˆ é™¤è¿™äº›æ•°æ®ã€‚</p><p><strong>SessionStorageä¸LocalStorageå¯¹æ¯” ï¼š</strong></p><ul><li>SessionStorageå’ŒLocalStorageéƒ½åœ¨ <strong>æœ¬åœ°è¿›è¡Œæ•°æ®å­˜å‚¨</strong> ï¼›</li><li>SessionStorageä¹Ÿæœ‰åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œä½†æ˜¯SessionStorageæœ‰ä¸€æ¡æ›´åŠ ä¸¥æ ¼çš„é™åˆ¶ï¼ŒSessionStorage <strong>åªæœ‰åœ¨åŒä¸€æµè§ˆå™¨çš„åŒä¸€çª—å£ä¸‹æ‰èƒ½å¤Ÿå…±äº«</strong> ï¼›</li><li>LocalStorageå’ŒSessionStorage <strong>éƒ½ä¸èƒ½è¢«çˆ¬è™«çˆ¬å–</strong> ï¼›</li></ul><p><strong>SessionStorageçš„å¸¸ç”¨API ï¼š</strong></p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// ä¿å­˜æ•°æ®åˆ° sessionStorage</span><br>sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;key&#x27;</span>, <span class="hljs-string">&#x27;value&#x27;</span>);<br><br><span class="hljs-comment">// ä» sessionStorage è·å–æ•°æ®</span><br><span class="hljs-keyword">let</span> data = sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;key&#x27;</span>);<br><br><span class="hljs-comment">// ä» sessionStorage åˆ é™¤ä¿å­˜çš„æ•°æ®</span><br>sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&#x27;key&#x27;</span>);<br><br><span class="hljs-comment">// ä» sessionStorage åˆ é™¤æ‰€æœ‰ä¿å­˜çš„æ•°æ®</span><br>sessionStorage.<span class="hljs-title function_">clear</span>();<br><br><span class="hljs-comment">// è·å–æŸä¸ªç´¢å¼•çš„Key</span><br>sessionStorage.<span class="hljs-title function_">key</span>(index)<br><br></code></pre></td></tr></table></figure><p><strong>SessionStorageçš„ä½¿ç”¨åœºæ™¯</strong></p><p>ç”±äºSessionStorageå…·æœ‰æ—¶æ•ˆæ€§ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥å­˜å‚¨ä¸€äº›ç½‘ç«™çš„æ¸¸å®¢ç™»å½•çš„ä¿¡æ¯ï¼Œè¿˜æœ‰ä¸´æ—¶çš„æµè§ˆè®°å½•çš„ä¿¡æ¯ã€‚å½“å…³é—­ç½‘ç«™ä¹‹åï¼Œè¿™äº›ä¿¡æ¯ä¹Ÿå°±éšä¹‹æ¶ˆé™¤äº†ã€‚</p><blockquote><p>å…·ä½“æ¡ˆä¾‹ï¼š</p></blockquote><p><strong>localStorage</strong></p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>localStorage<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>localStorage<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;saveData()&quot;</span>&gt;</span>ç‚¹æˆ‘ä¿å­˜ä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;readData()&quot;</span>&gt;</span>ç‚¹æˆ‘è¯»å–ä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;deleteData()&quot;</span>&gt;</span>ç‚¹æˆ‘åˆ é™¤ä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;deleteAllData()&quot;</span>&gt;</span>ç‚¹æˆ‘æ¸…ç©ºä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">let</span> p = &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">saveData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;msg&#x27;</span>,<span class="hljs-string">&#x27;hello!!!&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;msg2&#x27;</span>,<span class="hljs-number">666</span>)</span><br><span class="language-javascript">                <span class="hljs-comment">// è½¬æˆ JSON å¯¹è±¡å­˜è¿›å»</span></span><br><span class="language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;person&#x27;</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(p))</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">readData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;msg&#x27;</span>))</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;msg2&#x27;</span>))</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;person&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(result))</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// console.log(localStorage.getItem(&#x27;msg3&#x27;))</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&#x27;msg2&#x27;</span>)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteAllData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">clear</span>()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><strong>sessionStorage</strong></p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>sessionStorage<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>sessionStorage<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;saveData()&quot;</span>&gt;</span>ç‚¹æˆ‘ä¿å­˜ä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;readData()&quot;</span>&gt;</span>ç‚¹æˆ‘è¯»å–ä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;deleteData()&quot;</span>&gt;</span>ç‚¹æˆ‘åˆ é™¤ä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">&quot;deleteAllData()&quot;</span>&gt;</span>ç‚¹æˆ‘æ¸…ç©ºä¸€ä¸ªæ•°æ®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> &gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">let</span> p = &#123;<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,<span class="hljs-attr">age</span>:<span class="hljs-number">18</span>&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">saveData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;msg&#x27;</span>,<span class="hljs-string">&#x27;hello!!!&#x27;</span>)</span><br><span class="language-javascript">sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;msg2&#x27;</span>,<span class="hljs-number">666</span>)</span><br><span class="language-javascript">                <span class="hljs-comment">// è½¬æ¢æˆJSON å­—ç¬¦ä¸²å­˜è¿›å»</span></span><br><span class="language-javascript">sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&#x27;person&#x27;</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(p))</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">readData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;msg&#x27;</span>))</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;msg2&#x27;</span>))</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> result = sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;person&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(result))</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// console.log(sessionStorage.getItem(&#x27;msg3&#x27;))</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">sessionStorage.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">&#x27;msg2&#x27;</span>)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteAllData</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">sessionStorage.<span class="hljs-title function_">clear</span>()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>TodoListæ¡ˆä¾‹æœ¬åœ°å­˜å‚¨ App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;root&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-container&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;todo-wrap&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">myheader</span> <span class="hljs-attr">:p_receive</span>=<span class="hljs-string">&quot;addObj&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">myheader</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">MyListVue</span> <span class="hljs-attr">:p_todos</span>=<span class="hljs-string">&quot;todos&quot;</span> <span class="hljs-attr">:p_List_changeObjDone</span>=<span class="hljs-string">&quot;changeObjDone&quot;</span> <span class="hljs-attr">:p_List_Delete</span>=<span class="hljs-string">&quot;deleteTodoObj&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">MyListVue</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">MyFooterVue</span> <span class="hljs-attr">:p_todos</span>=<span class="hljs-string">&quot;todos&quot;</span> <span class="hljs-attr">:p_checkAll</span>=<span class="hljs-string">&quot;checkAll&quot;</span> <span class="hljs-attr">:p_clearAllTodo</span>=<span class="hljs-string">&quot;clearAllTodo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">MyFooterVue</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Myheader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Myheader.vue&#x27;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyListVue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/MyList.vue&#x27;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">MyFooterVue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/MyFooter.vue&#x27;</span>;</span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123;</span><br><span class="language-javascript">    nanoid</span><br><span class="language-javascript">  &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;nanoid&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title class_">Myheader</span>,</span><br><span class="language-javascript">      <span class="hljs-title class_">MyFooterVue</span>,</span><br><span class="language-javascript">      <span class="hljs-title class_">MyListVue</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">todos</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;todos&quot;</span>)) || []</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// æ·»åŠ ä¸€ä¸ªtodo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">addObj</span>(<span class="hljs-params">title</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (!title) <span class="hljs-keyword">return</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;ä¸å¯ä»¥ä¸ºç©º&#x27;</span>)</span><br><span class="language-javascript">        <span class="hljs-title function_">alert</span>(title)</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">unshift</span>(&#123;</span><br><span class="language-javascript">          <span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(),</span><br><span class="language-javascript">          <span class="hljs-attr">title</span>: title,</span><br><span class="language-javascript">          <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">// æ”¹å˜todoçŠ¶æ€</span></span><br><span class="language-javascript">      <span class="hljs-title function_">changeObjDone</span>(<span class="hljs-params">id</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">if</span> (todo.<span class="hljs-property">id</span> === id) todo.<span class="hljs-property">done</span> = !todo.<span class="hljs-property">done</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">// åˆ é™¤todo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">deleteTodoObj</span>(<span class="hljs-params">id</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> todo.<span class="hljs-property">id</span> != id</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">// å…¨é€‰ or å–æ¶ˆå…¨é€‰</span></span><br><span class="language-javascript">      <span class="hljs-title function_">checkAll</span>(<span class="hljs-params">value</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          todo.<span class="hljs-property">done</span> = value</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-comment">//æ¸…é™¤æ‰€æœ‰å·²ç»å®Œæˆçš„todo</span></span><br><span class="language-javascript">      <span class="hljs-title function_">clearAllTodo</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">return</span> !todo.<span class="hljs-property">done</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">watch</span>:&#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">todos</span>(<span class="hljs-params">value</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;todos&quot;</span>,<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value))</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-comment">/*base*/</span></span><br><span class="language-css">  <span class="hljs-selector-tag">body</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">4px</span> <span class="hljs-number">12px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">    <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">    <span class="hljs-attribute">box-shadow</span>: inset <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">0</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>), <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">2px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.05</span>);</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.btn-danger</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#da4f49</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#bd362f</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.btn-danger</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#bd362f</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">outline</span>: none;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.todo-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">600px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.todo-container</span> <span class="hljs-selector-class">.todo-wrap</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-4-ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶"><a href="#2-4-ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶" class="headerlink" title="2.4 ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶"></a>2.4 ç»„ä»¶è‡ªå®šä¹‰äº‹ä»¶</h2><ol><li><p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºï¼š <strong>å­ç»„ä»¶ &#x3D;&#x3D;&#x3D;&gt; çˆ¶ç»„ä»¶</strong></p></li><li><p><strong>ä½¿ç”¨åœºæ™¯</strong> Aæ˜¯çˆ¶ç»„ä»¶ï¼ŒBæ˜¯å­ç»„ä»¶ï¼ŒBæƒ³ç»™Aä¼ æ•°æ®ï¼Œé‚£ä¹ˆå°±è¦åœ¨Aä¸­ç»™Bç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆäº‹ä»¶çš„å›è°ƒåœ¨Aä¸­ï¼‰ã€‚</p></li></ol><p><strong>3. ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ ï¼š</strong></p><ul><li><p>ç¬¬ä¸€ç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ï¼š<code>&lt;Demo @atguigu=&quot;test&quot;/&gt;</code>æˆ– <code>&lt;Demo v-on:atguigu=&quot;test&quot;/</code></p></li><li><p>ç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­<code>this.$refs.demo.$on(&#39;äº‹ä»¶å&#39;,æ–¹æ³•)</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&lt;<span class="hljs-title class_">Demo</span> ref=<span class="hljs-string">&quot;demo&quot;</span>/&gt;<br>......<br><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>)&#123;<br>   <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">demo</span>.$on(<span class="hljs-string">&#x27;atguigu&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">test</span>)<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨<strong>once</strong>ä¿®é¥°ç¬¦ï¼Œæˆ–<code>$once</code>æ–¹æ³•</p></li></ul><ol start="4"><li>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶<code>this.$emit(&#39;äº‹ä»¶å&#39;,æ•°æ®)</code> </li><li>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶<code>this.$off(&#39;äº‹ä»¶å&#39;)</code> </li><li>ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”ŸDOMäº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨nativeä¿®é¥°ç¬¦  <code>@click.native=&quot;show&quot;</code>ä¸Šé¢ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œå³ä½¿ç»‘å®šçš„æ˜¯åŸç”Ÿäº‹ä»¶ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯è‡ªå®šä¹‰çš„ï¼Œéœ€è¦åŠ <strong>native</strong>ï¼ŒåŠ äº†åå°±å°†æ­¤äº‹ä»¶ç»™ç»„ä»¶çš„æ ¹å…ƒç´ </li><li>æ³¨æ„ï¼šé€šè¿‡<code>this.$refs.xxx.$on(&#39;äº‹ä»¶å&#39;,å›è°ƒå‡½æ•°)</code>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒå‡½æ•°è¦ä¹ˆé…ç½®åœ¨<strong>methods</strong>ä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™ this æŒ‡å‘ä¼šå‡ºé—®é¢˜</li></ol><blockquote><p>å…·ä½“ä»£ç </p></blockquote><p>App.vue</p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;ï¼Œå­¦ç”Ÿå§“åæ˜¯:&#123;&#123; studentName &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°ç±»å‹çš„propså®ç°å­ç»™çˆ¶ä¼ é€’æ•°æ® --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">School</span> <span class="hljs-attr">:getSchoolName</span>=<span class="hljs-string">&quot;getSchoolName&quot;</span>/&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å®ç°å­ç»™çˆ¶ä¼ é€’æ•°æ®ï¼ˆç¬¬ä¸€ç§å†™æ³•ï¼Œä½¿ç”¨@æˆ–v-onï¼‰ --&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;Student @atguigu=&quot;getStudentName&quot; @demo=&quot;m1&quot;/&gt; --&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å®ç°å­ç»™çˆ¶ä¼ é€’æ•°æ®ï¼ˆç¬¬äºŒç§å†™æ³•ï¼Œä½¿ç”¨refï¼‰ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">Student</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;student&quot;</span> @<span class="hljs-attr">click.native</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span> <span class="hljs-comment">&lt;!-- ğŸ”´native --&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Student&#x27;</span></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">School</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/School&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">components</span>:&#123;<span class="hljs-title class_">School</span>,<span class="hljs-title class_">Student</span>&#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">msg</span>:<span class="hljs-string">&#x27;ä½ å¥½å•Šï¼&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">studentName</span>:<span class="hljs-string">&#x27;&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">getSchoolName</span>(<span class="hljs-params">name</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Appæ”¶åˆ°äº†å­¦æ ¡åï¼š&#x27;</span>,name)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-title function_">getStudentName</span>(<span class="hljs-params">name,...params</span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Appæ”¶åˆ°äº†å­¦ç”Ÿåï¼š&#x27;</span>,name,params)</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">studentName</span> = name</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-title function_">m1</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;demoäº‹ä»¶è¢«è§¦å‘äº†ï¼&#x27;</span>)</span><br><span class="language-javascript">      &#125;,</span><br><span class="language-javascript">      <span class="hljs-title function_">show</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">alert</span>(<span class="hljs-number">123</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">student</span>.$on(<span class="hljs-string">&#x27;atguigu&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">getStudentName</span>) <span class="hljs-comment">// ğŸ”´ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="language-javascript">      <span class="hljs-comment">// this.$refs.student.$once(&#x27;atguigu&#x27;,this.getStudentName) // ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼ˆä¸€æ¬¡æ€§ï¼‰</span></span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"><span class="hljs-selector-class">.app</span>&#123;<span class="hljs-attribute">background-color</span>: gray;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Student.vue</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;student&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿå§“åï¼š&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123;sex&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123;number&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;add&quot;</span>&gt;</span>ç‚¹æˆ‘number++<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sendStudentlName&quot;</span>&gt;</span>æŠŠå­¦ç”Ÿåç»™App<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;unbind&quot;</span>&gt;</span>è§£ç»‘atguiguäº‹ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;death&quot;</span>&gt;</span>é”€æ¯å½“å‰Studentç»„ä»¶çš„å®ä¾‹(vc)<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;Student&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;ç”·&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">number</span>:<span class="hljs-number">0</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">add</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;addå›è°ƒè¢«è°ƒç”¨äº†&#x27;</span>)</span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">number</span>++</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">sendStudentlName</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript"><span class="hljs-comment">// è§¦å‘Studentç»„ä»¶å®ä¾‹èº«ä¸Šçš„atguiguäº‹ä»¶</span></span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.$emit(<span class="hljs-string">&#x27;atguigu&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>,<span class="hljs-number">666</span>,<span class="hljs-number">888</span>,<span class="hljs-number">900</span>)</span><br><span class="language-javascript"><span class="hljs-comment">// this.$emit(&#x27;demo&#x27;)</span></span><br><span class="language-javascript"><span class="hljs-comment">// this.$emit(&#x27;click&#x27;)</span></span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">unbind</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// ğŸ”´è§£ç»‘</span></span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.$off(<span class="hljs-string">&#x27;atguigu&#x27;</span>) <span class="hljs-comment">//è§£ç»‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="language-javascript"><span class="hljs-comment">// this.$off([&#x27;atguigu&#x27;,&#x27;demo&#x27;]) //è§£ç»‘å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="language-javascript"><span class="hljs-comment">// this.$off() //è§£ç»‘æ‰€æœ‰çš„è‡ªå®šä¹‰äº‹ä»¶</span></span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">death</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// é”€æ¯äº†å½“å‰Studentç»„ä»¶çš„å®ä¾‹ï¼Œé”€æ¯åæ‰€æœ‰Studentå®ä¾‹çš„è‡ªå®šä¹‰äº‹ä»¶å…¨éƒ½ä¸å¥æ•ˆ</span></span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.$destroy()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;less&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.student</span>&#123;<span class="hljs-attribute">background-color</span>: pink;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    </p><blockquote><p>è‹¥æƒ³è®©è‡ªå®šä¹‰äº‹ä»¶åªèƒ½è§¦å‘ä¸€æ¬¡ï¼Œå¯ä»¥ä½¿ç”¨<code>once</code>ä¿®é¥°ç¬¦ï¼Œæˆ–<code>$once</code>æ–¹æ³•ã€‚</p><p>è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š<code>this.$emit(&#39;atguigu&#39;,æ•°æ®)</code></p><p>ä½¿ç”¨ <code>this.$emit()</code> å°±å¯ä»¥å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ æ•°æ®</p></blockquote><p><strong>è§£ç»‘è‡ªå®šä¹‰äº‹ä»¶</strong><code>this.$off(&#39;atguigu&#39;)</code></p><blockquote><p>ä»£ç </p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-variable language_">this</span>.$off(<span class="hljs-string">&#x27;atguigu&#x27;</span>) <span class="hljs-comment">//è§£ç»‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶</span><br><span class="hljs-comment">// this.$off([&#x27;atguigu&#x27;,&#x27;demo&#x27;]) //è§£ç»‘å¤šä¸ªè‡ªå®šä¹‰äº‹ä»¶</span><br><span class="hljs-comment">// this.$off() //è§£ç»‘æ‰€æœ‰çš„è‡ªå®šä¹‰äº‹ä»¶</span><br></code></pre></td></tr></table></figure><p><strong>ç»„ä»¶ä¸Šä¹Ÿå¯ä»¥ç»‘å®šåŸç”ŸDOMäº‹ä»¶ ï¼Œéœ€è¦ä½¿ç”¨<code>native</code>ä¿®é¥°ç¬¦ã€‚</strong></p><blockquote><p>ä»£ç </p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;!-- é€šè¿‡çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ç»‘å®šä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶å®ç°ï¼šå­ç»™çˆ¶ä¼ é€’æ•°æ®ï¼ˆç¬¬äºŒç§å†™æ³•ï¼Œä½¿ç”¨refï¼‰ --&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Student</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;student&quot;</span> @<span class="hljs-attr">click.native</span>=<span class="hljs-string">&quot;show&quot;</span>/&gt;</span></span><br></code></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼šé€šè¿‡<code>this.$refs.xxx.$on(&#39;atguigu&#39;,å›è°ƒ)</code>ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶æ—¶ï¼Œå›è°ƒè¦ä¹ˆé…ç½®åœ¨methodsä¸­ï¼Œè¦ä¹ˆç”¨ç®­å¤´å‡½æ•°ï¼Œå¦åˆ™thisæŒ‡å‘ä¼šå‡ºé—®é¢˜ï¼</p></blockquote><h2 id="2-5-å…¨å±€äº‹ä»¶æ€»çº¿"><a href="#2-5-å…¨å±€äº‹ä»¶æ€»çº¿" class="headerlink" title="2.5 å…¨å±€äº‹ä»¶æ€»çº¿"></a>2.5 å…¨å±€äº‹ä»¶æ€»çº¿</h2><p>ä¸€ç§å¯ä»¥åœ¨ä»»æ„ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒå¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶</p><ol><li>æ‰€æœ‰çš„ç»„ä»¶å¯¹è±¡éƒ½å¿…é¡»èƒ½çœ‹è§ä»– </li><li>è¿™ä¸ªå¯¹è±¡å¿…é¡»èƒ½å¤Ÿä½¿ç”¨$on$emit$offæ–¹æ³•å»ç»‘å®šã€è§¦å‘å’Œè§£ç»‘äº‹ä»¶</li></ol><p><strong>ä½¿ç”¨æ­¥éª¤</strong></p><ol><li><p>å®šä¹‰å…¨å±€äº‹ä»¶æ€»çº¿</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs vue">new Vue(&#123;<br>   ...<br>   beforeCreate() &#123;<br>   Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿ï¼Œ$bus å°±æ˜¯å½“å‰åº”ç”¨çš„ vm<br>   &#125;,<br>    ...<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼š</p><ol><li>æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­ç»™$busç»‘å®šè‡ªå®šä¹‰äº‹ä»¶ï¼Œäº‹ä»¶çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«ã€‚</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html">export default &#123;<br>    methods()&#123;<br>        demo(data)&#123;...&#125;<br>    &#125;<br>    ...<br>    mounted() &#123;<br>        this.$bus.$on(&#x27;xxx&#x27;,this.demo)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>â€‹2. æä¾›æ•°æ®ï¼š<code>this.$bus.$emit(&#39;xxx&#39;,data)</code> </p></li><li><p>æœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œç”¨$offå»è§£ç»‘å½“å‰ç»„ä»¶æ‰€ç”¨åˆ°çš„äº‹ä»¶ã€‚</p></li></ol><blockquote><p>ç¤ºä¾‹ä»£ç </p></blockquote><p>main.js</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs vue">import Vue from &#x27;vue&#x27;<br>import App from &#x27;./App.vue&#x27;<br><br>Vue.config.productionTip = false<br><br>new Vue(&#123;<br>  el:&#x27;#app&#x27;,<br>  render: h =&gt; h(App),<br>  beforeCreate() &#123;<br>    Vue.prototype.$bus = this // å®‰è£…å…¨å±€äº‹ä»¶æ€»çº¿<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>App.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">School</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">Student</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/Student&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">School</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/School&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;App&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">components</span>:&#123; <span class="hljs-title class_">School</span>, <span class="hljs-title class_">Student</span> &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"><span class="hljs-selector-class">.app</span>&#123;<span class="hljs-attribute">background-color</span>: gray;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>School.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;school&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åç§°ï¼š&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š&#123;&#123; address &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;School&quot;</span>,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;å°šç¡…è°·&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">address</span>: <span class="hljs-string">&quot;åŒ—äº¬&quot;</span>,</span><br><span class="language-javascript">      &#125;;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-comment">//ğŸ”´</span></span><br><span class="language-javascript">      <span class="hljs-comment">// console.log(&#x27;School&#x27;,this)</span></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$bus</span>.$on(<span class="hljs-string">&quot;hello&quot;</span>, <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®&quot;</span>, data);</span><br><span class="language-javascript">      &#125;);</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;  <span class="hljs-comment">//ğŸ”´</span></span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$bus</span>.$off(<span class="hljs-string">&quot;hello&quot;</span>);</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">  &#125;;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"><span class="hljs-selector-class">.school</span> &#123;<span class="hljs-attribute">background-color</span>: skyblue;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Student.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿå§“åï¼š&#123;&#123; name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123; sex &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sendStudentName&quot;</span>&gt;</span>æŠŠå­¦ç”Ÿåç»™Schoolç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> //ğŸ”´<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;Student&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å¼ ä¸‰&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;ç”·&#x27;</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;  <span class="hljs-comment">//ğŸ”´</span></span><br><span class="language-javascript">      <span class="hljs-title function_">sendStudentName</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">this</span>.<span class="hljs-property">$bus</span>.$emit(<span class="hljs-string">&#x27;demo&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"><span class="hljs-selector-class">.student</span>&#123;<span class="hljs-attribute">background-color</span>: pink;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;<span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;&#125;</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    </p><p>![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](<a href="https://img-blog.csdnimg.cn/86238df578224c798ab772db2798b85c.png?x-oss-">https://img-blog.csdnimg.cn/86238df578224c798ab772db2798b85c.png?x-oss-</a><br>process&#x3D;image&#x2F;watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5qC86Zu354uQ5oCd,size_20,color_FFFFFF,t_70,g_se,x_16)</p><p>![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](<a href="https://img-blog.csdnimg.cn/5aeffb62c4f3462ea9b5fb7b98a1b0da.png?x-oss-">https://img-blog.csdnimg.cn/5aeffb62c4f3462ea9b5fb7b98a1b0da.png?x-oss-</a><br>process&#x3D;image&#x2F;watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBA5qC86Zu354uQ5oCd,size_20,color_FFFFFF,t_70,g_se,x_16)</p><h2 id="2-6-æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ-åŸºæœ¬ä¸ç”¨"><a href="#2-6-æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ-åŸºæœ¬ä¸ç”¨" class="headerlink" title="2.6 æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ(åŸºæœ¬ä¸ç”¨)"></a>2.6 æ¶ˆæ¯è®¢é˜…ä¸å‘å¸ƒ(åŸºæœ¬ä¸ç”¨)</h2><ol><li><p>ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p></li><li><p>ä½¿ç”¨æ­¥éª¤ï¼š</p><ol><li><p>å®‰è£…pubsubï¼š<code>npm i pubsub-js</code></p></li><li><p>å¼•å…¥: <code>import pubsub from &#39;pubsub-js&#39;</code></p></li><li><p>æ¥æ”¶æ•°æ®ï¼šAç»„ä»¶æƒ³æ¥æ”¶æ•°æ®ï¼Œåˆ™åœ¨Aç»„ä»¶ä¸­è®¢é˜…æ¶ˆæ¯ï¼Œè®¢é˜…çš„å›è°ƒç•™åœ¨Aç»„ä»¶è‡ªèº«ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">methods</span>: &#123;<br>        <span class="hljs-title function_">demo</span>(<span class="hljs-params">msgName, data</span>) &#123;...&#125;<br>    &#125;<br>    ...<br>    <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-variable language_">this</span>.<span class="hljs-property">pid</span> = pubsub.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">&#x27;xxx&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">demo</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>æä¾›æ•°æ®ï¼špubsub.publish(â€˜xxxâ€™,data) </p></li><li><p>æœ€å¥½åœ¨beforeDestroyé’©å­ä¸­ï¼Œä½¿ç”¨pubsub.unsubscribe(pid)å–æ¶ˆè®¢é˜…</p></li></ol></li></ol><blockquote><p>ç¤ºä¾‹ä»£ç </p></blockquote><p>è®¢é˜…æ¶ˆæ¯</p><p><strong>School.vue</strong></p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;school&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åç§°ï¼š&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦æ ¡åœ°å€ï¼š&#123;&#123;address&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> pubsub <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pubsub-js&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;School&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-attr">address</span>:<span class="hljs-string">&#x27;åŒ—äº¬&#x27;</span>,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript"><span class="hljs-title function_">demo</span>(<span class="hljs-params">msgName, data</span>) &#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;æˆ‘æ˜¯Schoolç»„ä»¶ï¼Œæ”¶åˆ°äº†æ•°æ®ï¼š&#x27;</span>,msgName, data)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">pubId</span> = pubsub.<span class="hljs-title function_">subscribe</span>(<span class="hljs-string">&#x27;demo&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">demo</span>) <span class="hljs-comment">// è®¢é˜…æ¶ˆæ¯</span></span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript"><span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">pubsub.<span class="hljs-title function_">unsubscribe</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">pubId</span>) <span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.school</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">background-color</span>: skyblue;</span><br><span class="language-css"><span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>Student.vue</strong></p> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;student&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿå§“åï¼š&#123;&#123;name&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å­¦ç”Ÿæ€§åˆ«ï¼š&#123;&#123;sex&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;sendStudentName&quot;</span>&gt;</span>æŠŠå­¦ç”Ÿåç»™Schoolç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> pubsub <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pubsub-js&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;Student&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;JOJO&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">sex</span>:<span class="hljs-string">&#x27;ç”·&#x27;</span>,</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-title function_">sendStudentName</span>(<span class="hljs-params"></span>)&#123;</span><br><span class="language-javascript">        pubsub.<span class="hljs-title function_">publish</span>(<span class="hljs-string">&#x27;demo&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>) <span class="hljs-comment">// å‘å¸ƒæ¶ˆæ¯</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.student</span>&#123;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: pink;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    </p><h2 id="2-7-nextTick"><a href="#2-7-nextTick" class="headerlink" title="2.7 nextTick"></a>2.7 nextTick</h2><pre><code class="hljs">1. è¯­æ³•ï¼š`this.$nextTick(å›è°ƒå‡½æ•°)`2. ä½œç”¨ï¼šåœ¨ä¸‹ä¸€æ¬¡ DOM æ›´æ–°ç»“æŸåæ‰§è¡Œå…¶æŒ‡å®šçš„å›è°ƒã€‚3. ä»€ä¹ˆæ—¶å€™ç”¨ï¼šå½“æ”¹å˜æ•°æ®åï¼Œè¦åŸºäºæ›´æ–°åçš„æ–°DOMè¿›è¡ŒæŸäº›æ“ä½œæ—¶ï¼Œè¦åœ¨nextTickæ‰€æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œã€‚</code></pre><p>ä½¿ç”¨ $nextTick ä¼˜åŒ– Todo-List<br>src&#x2F;components&#x2F;MyItem.vue</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span> <span class="hljs-attr">:checked</span>=<span class="hljs-string">&quot;todo.done&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;changeObjDone&quot;</span> /&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!todo.isEdit&quot;</span>&gt;</span>&#123;&#123; todo.title &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;todo.isEdit&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;todo.title&quot;</span> @<span class="hljs-attr">blur</span>=<span class="hljs-string">&quot;handleBlur&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;inputTitle&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;deleteTodoObj&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-edit&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;editTodoObj&quot;</span>&gt;</span>ç¼–è¾‘<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;MyItem&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">todo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">p_todo</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;,</span><br><span class="language-javascript">        <span class="hljs-attr">props</span>: [<span class="hljs-string">&quot;p_todo&quot;</span>],</span><br><span class="language-javascript">        <span class="hljs-attr">methods</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-title function_">changeObjDone</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">$bus</span>.$emit(<span class="hljs-string">&#x27;changeObjDone&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-title function_">deleteTodoObj</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (<span class="hljs-title function_">confirm</span>(<span class="hljs-string">&#x27;ç¡®å®šåˆ é™¤å—ï¼Ÿ&#x27;</span>)) &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$bus</span>.$emit(<span class="hljs-string">&#x27;deleteTodoObj&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-comment">//å¼€å§‹ç¼–è¾‘</span></span><br><span class="language-javascript">            <span class="hljs-title function_">editTodoObj</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">isEdit</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">isEdit</span></span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.$nextTick(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">inputTitle</span>.<span class="hljs-title function_">focus</span>()</span><br><span class="language-javascript">                &#125;)</span><br><span class="language-javascript">            &#125;,</span><br><span class="language-javascript">            <span class="hljs-comment">// å¤±å»ç„¦ç‚¹</span></span><br><span class="language-javascript">            <span class="hljs-title function_">handleBlur</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                <span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">isEdit</span> = !<span class="hljs-variable language_">this</span>.<span class="hljs-property">todo</span>.<span class="hljs-property">isEdit</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">    <span class="hljs-comment">/*item*/</span></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">list-style</span>: none;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">label</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">float</span>: left;</span><br><span class="language-css">        <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">input</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: -<span class="hljs-number">1px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">float</span>: right;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: none;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">3px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:before</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">content</span>: initial;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: none;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#ddd</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-tag">button</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>&gt;<br></code></pre></td></tr></table></figure><h2 id="2-8-Vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»"><a href="#2-8-Vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»" class="headerlink" title="2.8 Vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»"></a>2.8 Vueå°è£…çš„è¿‡åº¦ä¸åŠ¨ç”»</h2><pre><code class="hljs">1. ä½œç”¨ï¼šåœ¨æ’å…¥ã€æ›´æ–°æˆ–ç§»é™¤ DOMå…ƒç´ æ—¶ï¼Œåœ¨åˆé€‚çš„æ—¶å€™ç»™å…ƒç´ æ·»åŠ æ ·å¼ç±»åã€‚2. å›¾ç¤ºï¼š </code></pre><p>  <img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124154948347.png" alt="image-20221124154948347"></p><ol start="3"><li><p>å†™æ³•ï¼š</p><ol><li>å‡†å¤‡å¥½æ ·å¼ï¼š</li></ol><ul><li>å…ƒç´ è¿›å…¥çš„æ ·å¼ï¼š<ol><li>v-enterï¼šè¿›å…¥çš„èµ·ç‚¹</li><li>v-enter-activeï¼šè¿›å…¥è¿‡ç¨‹ä¸­</li><li>v-enter-toï¼šè¿›å…¥çš„ç»ˆç‚¹</li></ol></li><li>å…ƒç´ ç¦»å¼€çš„æ ·å¼ï¼š<ol><li>v-leaveï¼šç¦»å¼€çš„èµ·ç‚¹</li><li>v-leave-activeï¼šç¦»å¼€è¿‡ç¨‹ä¸­</li><li>v-leave-toï¼šç¦»å¼€çš„ç»ˆç‚¹</li></ol></li></ul><ol start="2"><li>ä½¿ç”¨<code>&lt;transition&gt;</code>åŒ…è£¹è¦è¿‡æ¸¡çš„å…ƒç´ ï¼Œå¹¶é…ç½®nameå±æ€§ï¼š</li><li>è¦è®©é¡µé¢ä¸€å¼€å§‹å°±æ˜¾ç¤ºåŠ¨ç”»ï¼Œéœ€è¦æ·»åŠ appear</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">transition</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">appear</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isShow&quot;</span>&gt;</span>ä½ å¥½å•Šï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">transition</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.hello-enter-active</span>&#123;</span><br><span class="language-css">    <span class="hljs-attribute">animation</span>: hello <span class="hljs-number">0.5s</span> linear;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-class">.hello-leave-active</span>&#123;</span><br><span class="language-css">    <span class="hljs-attribute">animation</span>: hello <span class="hljs-number">0.5s</span> linear reverse;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-keyword">@keyframes</span> hello &#123;</span><br><span class="language-css">    <span class="hljs-selector-tag">from</span>&#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">100%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css">    <span class="hljs-selector-tag">to</span>&#123;</span><br><span class="language-css">      <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0px</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>   </transition><ol start="4"><li><p>å¤‡æ³¨ï¼šè‹¥æœ‰å¤šä¸ªå…ƒç´ éœ€è¦è¿‡åº¦ï¼Œåˆ™éœ€è¦ä½¿ç”¨ï¼š<code>&lt;transition-group&gt;</code>ï¼Œä¸”æ¯ä¸ªå…ƒç´ éƒ½è¦æŒ‡å®š<code>key</code>å€¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">transition-group</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;hello&quot;</span> <span class="hljs-attr">appear</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!isShow&quot;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>ä½ å¥½å•Šï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isShow&quot;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>å°šç¡…è°·ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">transition-group</span>&gt;</span><br></code></pre></td></tr></table></figure></li></ol></li></ol><p>â€‹           </p><p>ç¬¬ä¸‰æ–¹åŠ¨ç”»åº“Animate.css</p><blockquote><p>ä½¿ç”¨ç¬¬ä¸‰åº“çš„å…·ä½“æ¡ˆä¾‹ï¼ˆéšä¾¿çœ‹çœ‹ï¼Œè¿™ä¸ªä¸é‡è¦ï¼‰<br>åº“çš„åç§°ï¼šAnimate.css<br>å®‰è£…ï¼šnpm i animate.css<br>å¼•å…¥ï¼šimport â€˜animate.cssâ€™</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;isShow = !isShow&quot;</span>&gt;</span>æ˜¾ç¤º/éšè—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">transition-group</span> </span><br><span class="hljs-tag"><span class="hljs-attr">appear</span></span><br><span class="hljs-tag"><span class="hljs-attr">name</span>=<span class="hljs-string">&quot;animate__animated animate__bounce&quot;</span> </span><br><span class="hljs-tag"><span class="hljs-attr">enter-active-class</span>=<span class="hljs-string">&quot;animate__swing&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">leave-active-class</span>=<span class="hljs-string">&quot;animate__backOutUp&quot;</span></span><br><span class="hljs-tag">&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!isShow&quot;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;1&quot;</span>&gt;</span>ä½ å¥½å•Šï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;isShow&quot;</span> <span class="hljs-attr">key</span>=<span class="hljs-string">&quot;2&quot;</span>&gt;</span>å°šç¡…è°·ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">transition-group</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;animate.css&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;Test&#x27;</span>,</span><br><span class="language-javascript"><span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript"><span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript"><span class="hljs-attr">isShow</span>:<span class="hljs-literal">true</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript">&#125;,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-tag">h1</span>&#123;</span><br><span class="language-css"><span class="hljs-attribute">background-color</span>: orange;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="2-9-vueè„šæ‰‹æ¶é…ç½®ä»£ç†"><a href="#2-9-vueè„šæ‰‹æ¶é…ç½®ä»£ç†" class="headerlink" title="2.9 vueè„šæ‰‹æ¶é…ç½®ä»£ç†"></a>2.9 vueè„šæ‰‹æ¶é…ç½®ä»£ç†</h2><p>å¯ä»¥ç”¨æ¥è§£å†³è·¨åŸŸçš„é—®é¢˜  </p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124155041846.png" alt="image-20221124155041846"></p><blockquote><p>ajax æ˜¯å‰ç«¯æŠ€æœ¯ï¼Œä½ å¾—æœ‰æµè§ˆå™¨ï¼Œæ‰æœ‰windowå¯¹è±¡ï¼Œæ‰æœ‰xhrï¼Œæ‰èƒ½å‘ajaxè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¹‹é—´é€šä¿¡å°±ç”¨ä¼ ç»Ÿçš„httpè¯·æ±‚å°±è¡Œäº†ã€‚</p></blockquote><p>æœ¬æ¡ˆä¾‹éœ€è¦ä¸‹è½½axiosåº“npm install axios<br>é…ç½®å‚è€ƒæ–‡æ¡£ Vue-Cli devServer.proxy<br>vue.config.js æ˜¯ä¸€ä¸ªå¯é€‰çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœé¡¹ç›®çš„ (å’Œ package.json åŒçº§çš„) æ ¹ç›®å½•ä¸­å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒä¼šè¢« @vue&#x2F;cli-service è‡ªåŠ¨åŠ è½½ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ package.json ä¸­çš„ vue å­—æ®µï¼Œä½†æ˜¯æ³¨æ„è¿™ç§å†™æ³•éœ€è¦ä½ ä¸¥æ ¼éµç…§ JSON çš„æ ¼å¼æ¥å†™</p><h3 id="æ–¹æ³•ä¸€"><a href="#æ–¹æ³•ä¸€" class="headerlink" title="æ–¹æ³•ä¸€"></a>æ–¹æ³•ä¸€</h3><p> åœ¨vue.config.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">devServer</span>:&#123;<br>    <span class="hljs-attr">proxy</span>:<span class="hljs-string">&quot;http://localhost:5000&quot;</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><pre><code class="hljs">1. ä¼˜ç‚¹ï¼šé…ç½®ç®€å•ï¼Œè¯·æ±‚èµ„æºæ—¶ç›´æ¥å‘ç»™å‰ç«¯ï¼ˆ8080ï¼‰å³å¯ã€‚2. ç¼ºç‚¹ï¼šä¸èƒ½é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸èƒ½çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚3. å·¥ä½œæ–¹å¼ï¼šè‹¥æŒ‰ç…§ä¸Šè¿°é…ç½®ä»£ç†ï¼Œå½“è¯·æ±‚äº†å‰ç«¯ä¸å­˜åœ¨çš„èµ„æºæ—¶ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚ä¼šè½¬å‘ç»™æœåŠ¡å™¨ ï¼ˆä¼˜å…ˆåŒ¹é…å‰ç«¯èµ„æºï¼‰</code></pre><h3 id="æ–¹æ³•äºŒ"><a href="#æ–¹æ³•äºŒ" class="headerlink" title="æ–¹æ³•äºŒ"></a>æ–¹æ³•äºŒ</h3><p> ç¼–å†™vue.config.jsé…ç½®å…·ä½“ä»£ç†è§„åˆ™ï¼š</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br><span class="hljs-attr">devServer</span>: &#123;<br>      <span class="hljs-attr">proxy</span>: &#123;<br>      <span class="hljs-string">&#x27;/api1&#x27;</span>: &#123;<span class="hljs-comment">// åŒ¹é…æ‰€æœ‰ä»¥ &#x27;/api1&#x27;å¼€å¤´çš„è¯·æ±‚è·¯å¾„</span><br>        <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5000&#x27;</span>,<span class="hljs-comment">// ä»£ç†ç›®æ ‡çš„åŸºç¡€è·¯å¾„</span><br>        <span class="hljs-attr">pathRewrite</span>: &#123;<span class="hljs-string">&#x27;^/api1&#x27;</span>:<span class="hljs-string">&#x27;&#x27;</span>&#125;,<span class="hljs-comment">// ä»£ç†å¾€åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å»æ‰ /api1 å‰ç¼€</span><br>        <span class="hljs-attr">ws</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// WebSocket</span><br>        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,<br>        <br>      &#125;,<br>      <span class="hljs-string">&#x27;/api2&#x27;</span>: &#123;<br>        <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5001&#x27;</span>,<br>        <span class="hljs-attr">pathRewrite</span>: &#123;<span class="hljs-string">&#x27;^/api2&#x27;</span>: <span class="hljs-string">&#x27;&#x27;</span>&#125;,<br>        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span><br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br><span class="hljs-comment">/*</span><br><span class="hljs-comment">   changeOriginè®¾ç½®ä¸ºtrueæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:5000</span><br><span class="hljs-comment">   changeOriginè®¾ç½®ä¸ºfalseæ—¶ï¼ŒæœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚å¤´ä¸­çš„hostä¸ºï¼šlocalhost:8080</span><br><span class="hljs-comment">   changeOriginé»˜è®¤å€¼ä¸ºtrue</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><pre><code class="hljs">1. ä¼˜ç‚¹ï¼šå¯ä»¥é…ç½®å¤šä¸ªä»£ç†ï¼Œä¸”å¯ä»¥çµæ´»çš„æ§åˆ¶è¯·æ±‚æ˜¯å¦èµ°ä»£ç†ã€‚2. ç¼ºç‚¹ï¼šé…ç½®ç•¥å¾®ç¹çï¼Œè¯·æ±‚èµ„æºæ—¶å¿…é¡»åŠ å‰ç¼€ã€‚</code></pre><p>vue.config.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>    <span class="hljs-attr">pages</span>: &#123;<br>        <span class="hljs-attr">index</span>: &#123;<br>            <span class="hljs-attr">entry</span>: <span class="hljs-string">&#x27;src/main.js&#x27;</span>,<br>        &#125;,<br>    &#125;,<br>    <span class="hljs-attr">lintOnSave</span>:<span class="hljs-literal">false</span>,<br>    <span class="hljs-comment">// å¼€å¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ–¹å¼ä¸€ï¼‰</span><br>    <span class="hljs-comment">// devServer: &#123;</span><br>    <span class="hljs-comment">//     proxy:&#x27;http://localhost:5000&#x27;</span><br>    <span class="hljs-comment">// &#125;</span><br><br>    <span class="hljs-comment">//å¼€å¯ä»£ç†æœåŠ¡å™¨ï¼ˆæ–¹å¼äºŒï¼‰</span><br><span class="hljs-attr">devServer</span>: &#123;<br>        <span class="hljs-attr">proxy</span>: &#123;<br>            <span class="hljs-string">&#x27;/api1&#x27;</span>: &#123;<br>                <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5000&#x27;</span>,<br>                <span class="hljs-attr">pathRewrite</span>:&#123;<span class="hljs-string">&#x27;^/api1&#x27;</span>:<span class="hljs-string">&#x27;&#x27;</span>&#125;,<br>                <span class="hljs-comment">// ws: true, //ç”¨äºæ”¯æŒwebsocket,é»˜è®¤å€¼ä¸ºtrue</span><br>                <span class="hljs-comment">// changeOrigin: true //ç”¨äºæ§åˆ¶è¯·æ±‚å¤´ä¸­çš„hostå€¼,é»˜è®¤å€¼ä¸ºtrue</span><br>            &#125;,<br>            <span class="hljs-string">&#x27;/api2&#x27;</span>: &#123;<br>                <span class="hljs-attr">target</span>: <span class="hljs-string">&#x27;http://localhost:5001&#x27;</span>,<br>                <span class="hljs-attr">pathRewrite</span>:&#123;<span class="hljs-string">&#x27;^/api2&#x27;</span>:<span class="hljs-string">&#x27;&#x27;</span>&#125;,<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="2-10-slotæ’æ§½"><a href="#2-10-slotæ’æ§½" class="headerlink" title="2.10 slotæ’æ§½"></a>2.10 slotæ’æ§½</h2><ol><li><p>ä½œç”¨ï¼šè®©çˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶æŒ‡å®šä½ç½®æ’å…¥htmlç»“æ„ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œé€‚ç”¨äº <strong>çˆ¶ç»„ä»¶ &#x3D;&#x3D;&#x3D;&gt; å­ç»„ä»¶</strong> ã€‚</p></li><li><p>åˆ†ç±»ï¼šé»˜è®¤æ’æ§½ã€å…·åæ’æ§½ã€ä½œç”¨åŸŸæ’æ§½</p></li><li><p>ä½¿ç”¨æ–¹å¼ï¼š</p><ol><li><p>é»˜è®¤æ’æ§½ï¼š</p><pre><code class="hljs">çˆ¶ç»„ä»¶ä¸­ï¼š        &lt;Category&gt;           &lt;div&gt;htmlç»“æ„1&lt;/div&gt;        &lt;/Category&gt;</code></pre><p>å­ç»„ä»¶ä¸­ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>       <span class="hljs-comment">&lt;!-- å®šä¹‰æ’æ§½ --&gt;</span><br>       <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span>æ’æ§½é»˜è®¤å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>â€‹    </p></li><li><p>å…·åæ’æ§½ï¼š</p><p>çˆ¶ç»„ä»¶æŒ‡æ˜æ”¾å…¥å­ç»„ä»¶çš„å“ªä¸ªæ’æ§½<strong>slot&#x3D;â€footerâ€<strong>ï¼Œå¦‚æœæ˜¯templateå¯ä»¥å†™æˆ</strong>v-slot:footer</strong></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html">çˆ¶ç»„ä»¶ä¸­ï¼š<br>        <span class="hljs-tag">&lt;<span class="hljs-name">Category</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>htmlç»“æ„1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-slot:footer</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>htmlç»“æ„2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">Category</span>&gt;</span><br>å­ç»„ä»¶ä¸­ï¼š<br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>               <span class="hljs-comment">&lt;!-- å®šä¹‰æ’æ§½ --&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span>æ’æ§½é»˜è®¤å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>               <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;footer&quot;</span>&gt;</span>æ’æ§½é»˜è®¤å†…å®¹...<span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br></code></pre></td></tr></table></figure></li><li><p>ä½œç”¨åŸŸæ’æ§½ï¼š</p><ol><li><p>ç†è§£ï¼šæ•°æ®åœ¨ç»„ä»¶çš„è‡ªèº«ï¼ˆå­ç»„ä»¶ï¼‰ï¼Œä½†æ ¹æ®æ•°æ®ç”Ÿæˆçš„ç»“æ„éœ€è¦ç»„ä»¶çš„ä½¿ç”¨è€…ï¼ˆçˆ¶ç»„ä»¶ï¼‰æ¥å†³å®šã€‚ï¼ˆgamesæ•°æ®åœ¨Categoryï¼ˆå­ï¼‰ç»„ä»¶ä¸­ï¼Œä½†ä½¿ç”¨æ•°æ®æ‰€éå†å‡ºæ¥çš„ç»“æ„ç”±Appï¼ˆçˆ¶ï¼‰ç»„ä»¶å†³å®šï¼‰</p></li><li><p>å…·ä½“ç¼–ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs html">çˆ¶ç»„ä»¶ä¸­ï¼š<br><span class="hljs-tag">&lt;<span class="hljs-name">Category</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;scopeData&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ç”Ÿæˆçš„æ˜¯ulåˆ—è¡¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;g in scopeData.games&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;g&quot;</span>&gt;</span>&#123;&#123;g&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Category</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">Category</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">slot-scope</span>=<span class="hljs-string">&quot;scopeData&quot;</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ç”Ÿæˆçš„æ˜¯h4æ ‡é¢˜ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;g in scopeData.games&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;g&quot;</span>&gt;</span>&#123;&#123;g&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">Category</span>&gt;</span><br>å­ç»„ä»¶ä¸­ï¼š<br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- é€šè¿‡æ•°æ®ç»‘å®šå°±å¯ä»¥æŠŠå­ç»„ä»¶çš„æ•°æ®ä¼ åˆ°çˆ¶ç»„ä»¶ --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">:games</span>=<span class="hljs-string">&quot;games&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;Category&#x27;</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">props</span>:[<span class="hljs-string">&#x27;title&#x27;</span>],</span><br><span class="language-javascript">                <span class="hljs-comment">//æ•°æ®åœ¨å­ç»„ä»¶è‡ªèº«</span></span><br><span class="language-javascript">                <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">                    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                        <span class="hljs-attr">games</span>:[<span class="hljs-string">&#x27;çº¢è‰²è­¦æˆ’&#x27;</span>,<span class="hljs-string">&#x27;ç©¿è¶Šç«çº¿&#x27;</span>,<span class="hljs-string">&#x27;åŠ²èˆå›¢&#x27;</span>,<span class="hljs-string">&#x27;è¶…çº§ç›ä¸½&#x27;</span>]</span><br><span class="language-javascript">                    &#125;</span><br><span class="language-javascript">                &#125;,</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br></code></pre></td></tr></table></figure></li></ol></li></ol></li></ol><h1 id="3-VUEX"><a href="#3-VUEX" class="headerlink" title="3. VUEX"></a>3. VUEX</h1><p>åŸç†å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124155349526.png" alt="image-20221124155349526"></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124155424516.png"></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124155500975.png" alt="image-20221124155500975"></p><h2 id="3-1-æ¦‚å¿µ"><a href="#3-1-æ¦‚å¿µ" class="headerlink" title="3.1 æ¦‚å¿µ"></a>3.1 æ¦‚å¿µ</h2><p>åœ¨Vueä¸­å®ç°é›†ä¸­å¼çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ç®¡ç†çš„ä¸€ä¸ªVueæ’ä»¶ï¼Œå¯¹vueåº”ç”¨ä¸­å¤šä¸ªç»„ä»¶çš„å…±äº«çŠ¶æ€è¿›è¡Œé›†ä¸­å¼çš„ç®¡ç†ï¼ˆè¯»&#x2F;å†™ï¼‰ï¼Œä¹Ÿæ˜¯ä¸€ç§ç»„ä»¶é—´é€šä¿¡çš„æ–¹å¼ï¼Œä¸”é€‚ç”¨äºä»»æ„ç»„ä»¶é—´é€šä¿¡ã€‚</p><p><a href="https://github.com/vuejs/vuex">Vuex Githubåœ°å€</a></p><h2 id="3-2-ä½•æ—¶ä½¿ç”¨ï¼Ÿ"><a href="#3-2-ä½•æ—¶ä½¿ç”¨ï¼Ÿ" class="headerlink" title="3.2 ä½•æ—¶ä½¿ç”¨ï¼Ÿ"></a>3.2 ä½•æ—¶ä½¿ç”¨ï¼Ÿ</h2><ol><li><p>å¤šä¸ªç»„ä»¶éœ€è¦å…±äº«æ•°æ®æ—¶</p></li><li><p>å¤šä¸ªç»„ä»¶ä¾èµ–äºåŒä¸€çŠ¶æ€</p></li><li><p>æ¥è‡ªä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦å˜æ›´åŒä¸€çŠ¶æ€</p></li></ol><h2 id="3-3-æ­å»ºvuexç¯å¢ƒ"><a href="#3-3-æ­å»ºvuexç¯å¢ƒ" class="headerlink" title="3.3 æ­å»ºvuexç¯å¢ƒ"></a>3.3 æ­å»ºvuexç¯å¢ƒ</h2><ol><li><p>ä¸‹è½½å®‰è£…vuex <code>npm i vuex</code></p><p>Vueå¯¹é»˜è®¤ç‰ˆæœ¬è¿›è¡Œäº†æ›´æ–°ï¼Œç°åœ¨é»˜è®¤ä½¿ç”¨Vue3 ã€‚npm i vuex é»˜è®¤ä¸‹è½½vuex4ï¼ŒVue2æ— æ³•ä½¿ç”¨ï¼Œè‡ªèƒ½ä½¿ç”¨vuex3ã€‚ä½¿ç”¨Vue2ä½¿ç”¨ <code>npm i vuex@3</code> ä¸‹è½½</p></li><li><p>åˆ›å»º<code>src/store/index.js</code>è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºVuexä¸­æœ€ä¸ºæ ¸å¿ƒçš„<strong>store</strong></p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">//å¼•å…¥Vuex</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-comment">//åº”ç”¨Vuexæ’ä»¶</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)<br><br><span class="hljs-comment">//å‡†å¤‡actionså¯¹è±¡â€”â€”å“åº”ç»„ä»¶ä¸­ç”¨æˆ·çš„åŠ¨ä½œ</span><br><span class="hljs-keyword">const</span> actions = &#123;&#125;<br><span class="hljs-comment">//å‡†å¤‡mutationså¯¹è±¡â€”â€”ä¿®æ”¹stateä¸­çš„æ•°æ®</span><br><span class="hljs-keyword">const</span> mutations = &#123;&#125;<br><span class="hljs-comment">//å‡†å¤‡stateå¯¹è±¡â€”â€”ä¿å­˜å…·ä½“çš„æ•°æ®</span><br><span class="hljs-keyword">const</span> state = &#123;&#125;<br><br><span class="hljs-comment">//åˆ›å»ºå¹¶æš´éœ²store</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>actions,<br>mutations,<br>state<br>&#125;)<br></code></pre></td></tr></table></figure><ol start="2"><li>åœ¨<code>main.js</code>ä¸­åˆ›å»ºvmæ—¶ä¼ å…¥<code>store</code>é…ç½®é¡¹</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./store&#x27;</span><span class="hljs-comment">// å¼•å…¥store</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br><span class="hljs-attr">el</span>: <span class="hljs-string">&#x27;#app&#x27;</span>,<br><span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>store,<span class="hljs-comment">// é…ç½®é¡¹æ·»åŠ store</span><br><span class="hljs-title function_">beforeCreate</span>(<span class="hljs-params"></span>) &#123;<br><span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$bus</span> = <span class="hljs-variable language_">this</span><br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h2 id="3-4-åŸºæœ¬ä½¿ç”¨"><a href="#3-4-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="3.4 åŸºæœ¬ä½¿ç”¨"></a>3.4 åŸºæœ¬ä½¿ç”¨</h2><ol><li>åˆå§‹åŒ–æ•°æ®ã€é…ç½®<code>actions</code>ã€é…ç½®<code>mutations</code>ï¼Œæ“ä½œæ–‡ä»¶<code>store.js</code></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å¼•å…¥Vueæ ¸å¿ƒåº“</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">//å¼•å…¥Vuex</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-comment">//å¼•ç”¨Vuex</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)<br><br><span class="hljs-keyword">const</span> actions = &#123;<br>    <span class="hljs-comment">//å“åº”ç»„ä»¶ä¸­åŠ çš„åŠ¨ä½œ</span><br><span class="hljs-title function_">jia</span>(<span class="hljs-params">context,value</span>)&#123;<br><span class="hljs-comment">// console.log(&#x27;actionsä¸­çš„jiaè¢«è°ƒç”¨äº†&#x27;,miniStore,value)</span><br>context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;JIA&#x27;</span>,value)<br>&#125;,<br>&#125;<br><br><span class="hljs-keyword">const</span> mutations = &#123;<br>    <span class="hljs-comment">//æ‰§è¡ŒåŠ </span><br><span class="hljs-title function_">JIA</span>(<span class="hljs-params">state,value</span>)&#123;<br><span class="hljs-comment">// console.log(&#x27;mutationsä¸­çš„JIAè¢«è°ƒç”¨äº†&#x27;,state,value)</span><br>state.<span class="hljs-property">sum</span> += value<br>&#125;<br>&#125;<br><br><span class="hljs-comment">//åˆå§‹åŒ–æ•°æ®</span><br><span class="hljs-keyword">const</span> state = &#123;<br>   <span class="hljs-attr">sum</span>:<span class="hljs-number">0</span><br>&#125;<br><br><span class="hljs-comment">//åˆ›å»ºå¹¶æš´éœ²store</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>actions,<br>mutations,<br>state,<br>&#125;)<br></code></pre></td></tr></table></figure><pre><code class="hljs">2. ç»„ä»¶ä¸­è¯»å–vuexä¸­çš„æ•°æ®ï¼š`$store.state.sum`3. ç»„ä»¶ä¸­ä¿®æ”¹vuexä¸­çš„æ•°æ®ï¼š`$store.dispatch(&#39;actionä¸­çš„æ–¹æ³•å&#39;,æ•°æ®)`æˆ– `$store.commit(&#39;mutationsä¸­çš„æ–¹æ³•å&#39;,æ•°æ®)`</code></pre><blockquote><p>å¤‡æ³¨ï¼šè‹¥æ²¡æœ‰ç½‘ç»œè¯·æ±‚æˆ–å…¶ä»–ä¸šåŠ¡é€»è¾‘ï¼Œç»„ä»¶ä¸­ä¹Ÿå¯ä»¥è¶Šè¿‡actionsï¼Œå³ä¸å†™<code>dispatch</code>ï¼Œç›´æ¥ç¼–å†™<code>commit</code></p></blockquote><p>å…·ä½“æ¡ˆä¾‹ï¼š</p><p>src&#x2F;store&#x2F;index.jsè¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºVuexä¸­æœ€ä¸ºæ ¸å¿ƒçš„store</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºVuexä¸­æœ€ä¸ºæ ¸å¿ƒçš„store</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-comment">//å¼•å…¥Vuex</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-comment">//åº”ç”¨Vuexæ’ä»¶</span><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)<br><br><span class="hljs-comment">//å‡†å¤‡actionsâ€”â€”ç”¨äºå“åº”ç»„ä»¶ä¸­çš„åŠ¨ä½œ</span><br><span class="hljs-keyword">const</span> actions = &#123;<br><span class="hljs-comment">/* jia(context,value)&#123;</span><br><span class="hljs-comment">console.log(&#x27;actionsä¸­çš„jiaè¢«è°ƒç”¨äº†&#x27;)</span><br><span class="hljs-comment">context.commit(&#x27;JIA&#x27;,value)</span><br><span class="hljs-comment">&#125;,</span><br><span class="hljs-comment">jian(context,value)&#123;</span><br><span class="hljs-comment">console.log(&#x27;actionsä¸­çš„jianè¢«è°ƒç”¨äº†&#x27;)</span><br><span class="hljs-comment">context.commit(&#x27;JIAN&#x27;,value)</span><br><span class="hljs-comment">&#125;, */</span><br><span class="hljs-title function_">jiaOdd</span>(<span class="hljs-params">context,value</span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;actionsä¸­çš„jiaOddè¢«è°ƒç”¨äº†&#x27;</span>)<br><span class="hljs-keyword">if</span>(context.<span class="hljs-property">state</span>.<span class="hljs-property">sum</span> % <span class="hljs-number">2</span>)&#123;<br>context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;JIA&#x27;</span>,value)<br>&#125;<br>&#125;,<br><span class="hljs-title function_">jiaWait</span>(<span class="hljs-params">context,value</span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;actionsä¸­çš„jiaWaitè¢«è°ƒç”¨äº†&#x27;</span>)<br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()=&gt;</span>&#123;<br>context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;JIA&#x27;</span>,value)<br>&#125;,<span class="hljs-number">500</span>)<br>&#125;<br>&#125;<br><span class="hljs-comment">//å‡†å¤‡mutationsâ€”â€”ç”¨äºæ“ä½œæ•°æ®ï¼ˆstateï¼‰</span><br><span class="hljs-keyword">const</span> mutations = &#123;<br><span class="hljs-title function_">JIA</span>(<span class="hljs-params">state,value</span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mutationsä¸­çš„JIAè¢«è°ƒç”¨äº†&#x27;</span>)<br>state.<span class="hljs-property">sum</span> += value<br>&#125;,<br><span class="hljs-title function_">JIAN</span>(<span class="hljs-params">state,value</span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mutationsä¸­çš„JIANè¢«è°ƒç”¨äº†&#x27;</span>)<br>state.<span class="hljs-property">sum</span> -= value<br>&#125;<br>&#125;<br><span class="hljs-comment">//å‡†å¤‡stateâ€”â€”ç”¨äºå­˜å‚¨æ•°æ®</span><br><span class="hljs-keyword">const</span> state = &#123;<br><span class="hljs-attr">sum</span>:<span class="hljs-number">0</span> <span class="hljs-comment">//å½“å‰çš„å’Œ</span><br>&#125;<br><br><span class="hljs-comment">//åˆ›å»ºå¹¶æš´éœ²store</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>actions,<br>mutations,<br>state,<br>&#125;)<br><br></code></pre></td></tr></table></figure><p>src&#x2F;components&#x2F;Count.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>&lt;h1&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; $store.state.sum &#125;&#125;&lt;/h1&gt;<br>&lt;select v-model.number=&quot;n&quot;&gt;<br>&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;<br>&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;<br>&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;button @click=&quot;increment&quot;&gt;+&lt;/button&gt;<br>&lt;button @click=&quot;decrement&quot;&gt;-&lt;/button&gt;<br>&lt;button @click=&quot;incrementOdd&quot;&gt;å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ &lt;/button&gt;<br>&lt;button @click=&quot;incrementWait&quot;&gt;ç­‰ä¸€ç­‰å†åŠ &lt;/button&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>name:&#x27;Count&#x27;,<br>data() &#123;<br>return &#123;<br>n:1, //ç”¨æˆ·é€‰æ‹©çš„æ•°å­—<br>&#125;<br>&#125;,<br>methods: &#123;<br>increment()&#123;<br>this.$store.commit(&#x27;JIA&#x27;,this.n)<br>&#125;,<br>decrement()&#123;<br>this.$store.commit(&#x27;JIAN&#x27;,this.n)<br>&#125;,<br>incrementOdd()&#123;<br>this.$store.dispatch(&#x27;jiaOdd&#x27;,this.n)<br>&#125;,<br>incrementWait()&#123;<br>this.$store.dispatch(&#x27;jiaWait&#x27;,this.n)<br>&#125;,<br>&#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style lang=&quot;css&quot;&gt;button&#123;margin-left: 5px;&#125;&lt;/style&gt;<br></code></pre></td></tr></table></figure><h2 id="3-5-gettersçš„ä½¿ç”¨"><a href="#3-5-gettersçš„ä½¿ç”¨" class="headerlink" title="3.5 gettersçš„ä½¿ç”¨"></a>3.5 gettersçš„ä½¿ç”¨</h2><ol><li><p>æ¦‚å¿µï¼šå½“stateä¸­çš„æ•°æ®éœ€è¦ç»è¿‡åŠ å·¥åå†ä½¿ç”¨æ—¶ï¼Œå¯ä»¥ä½¿ç”¨gettersåŠ å·¥ï¼Œç›¸å½“äºå…¨å±€è®¡ç®—å±æ€§ã€‚</p></li><li><p>åœ¨<code>store.js</code>ä¸­è¿½åŠ <code>getters</code>é…ç½®</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js">......<br><br><span class="hljs-keyword">const</span> getters = &#123;<br><span class="hljs-title function_">bigSum</span>(<span class="hljs-params">state</span>)&#123;<br><span class="hljs-keyword">return</span> state.<span class="hljs-property">sum</span> * <span class="hljs-number">10</span><br>&#125;<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºå¹¶æš´éœ²store</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>......<br>getters<br>&#125;)<br></code></pre></td></tr></table></figure><pre><code class="hljs">3. ç»„ä»¶ä¸­è¯»å–æ•°æ®ï¼š`$store.getters.bigSum`</code></pre><h2 id="3-6-å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨"><a href="#3-6-å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨" class="headerlink" title="3.6 å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨"></a>3.6 å››ä¸ªmapæ–¹æ³•çš„ä½¿ç”¨</h2><p>å¯¼å…¥  <code>import &#123;mapState, mapGetters, mapActions, mapMutations&#125; from &#39;vuex&#39;</code></p><ol><li><p><strong>mapStateæ–¹æ³• ï¼š</strong>ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„<code>state</code>ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">computed</span>: &#123;<br>  <span class="hljs-comment">// å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼šsumã€schoolã€subjectï¼ˆå¯¹è±¡å†™æ³•ä¸€ï¼‰</span><br>  ...<span class="hljs-title function_">mapState</span>(&#123;<span class="hljs-attr">sum</span>:<span class="hljs-string">&#x27;sum&#x27;</span>,<span class="hljs-attr">school</span>:<span class="hljs-string">&#x27;school&#x27;</span>,<span class="hljs-attr">subject</span>:<span class="hljs-string">&#x27;subject&#x27;</span>&#125;),<br><br>  <span class="hljs-comment">// å€ŸåŠ©mapStateç”Ÿæˆè®¡ç®—å±æ€§ï¼šsumã€schoolã€subjectï¼ˆæ•°ç»„å†™æ³•äºŒï¼‰</span><br>  ...<span class="hljs-title function_">mapState</span>([<span class="hljs-string">&#x27;sum&#x27;</span>,<span class="hljs-string">&#x27;school&#x27;</span>,<span class="hljs-string">&#x27;subject&#x27;</span>]),<br>&#125;,<br></code></pre></td></tr></table></figure></li><li><p><strong>mapGettersæ–¹æ³• ï¼š</strong>ç”¨äºå¸®åŠ©æˆ‘ä»¬æ˜ å°„<code>getters</code>ä¸­çš„æ•°æ®ä¸ºè®¡ç®—å±æ€§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">computed</span>: &#123;<br>    <span class="hljs-comment">//å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼šbigSumï¼ˆå¯¹è±¡å†™æ³•ä¸€ï¼‰</span><br>    ...<span class="hljs-title function_">mapGetters</span>(&#123;<span class="hljs-attr">bigSum</span>:<span class="hljs-string">&#x27;bigSum&#x27;</span>&#125;),<br><br>    <span class="hljs-comment">//å€ŸåŠ©mapGettersç”Ÿæˆè®¡ç®—å±æ€§ï¼šbigSumï¼ˆæ•°ç»„å†™æ³•äºŒï¼‰</span><br>    ...<span class="hljs-title function_">mapGetters</span>([<span class="hljs-string">&#x27;bigSum&#x27;</span>])<br>&#125;,<br></code></pre></td></tr></table></figure></li><li><p><strong>mapActionsæ–¹æ³• ï¼š</strong>ç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸<code>actions</code>å¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å«<code>$store.dispatch(xxx)</code>çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">methods</span>:&#123;<br>    <span class="hljs-comment">//é mapActionsç”Ÿæˆï¼šincrementOddã€incrementWaitï¼ˆå¯¹è±¡å½¢å¼ï¼‰</span><br>    ...<span class="hljs-title function_">mapActions</span>(&#123;<span class="hljs-attr">incrementOdd</span>:<span class="hljs-string">&#x27;jiaOdd&#x27;</span>,<span class="hljs-attr">incrementWait</span>:<span class="hljs-string">&#x27;jiaWait&#x27;</span>&#125;)<br><br>    <span class="hljs-comment">//é mapActionsç”Ÿæˆï¼šincrementOddã€incrementWaitï¼ˆæ•°ç»„å½¢å¼ï¼‰</span><br>    ...<span class="hljs-title function_">mapActions</span>([<span class="hljs-string">&#x27;jiaOdd&#x27;</span>,<span class="hljs-string">&#x27;jiaWait&#x27;</span>])<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p><strong>mapMutationsæ–¹æ³• ï¼š</strong>ç”¨äºå¸®åŠ©æˆ‘ä»¬ç”Ÿæˆä¸<code>mutations</code>å¯¹è¯çš„æ–¹æ³•ï¼Œå³ï¼šåŒ…å«<code>$store.commit(xxx)</code>çš„å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">methods</span>:&#123;<br>    <span class="hljs-comment">//é mapActionsç”Ÿæˆï¼šincrementã€decrementï¼ˆå¯¹è±¡å½¢å¼ï¼‰</span><br>    ...<span class="hljs-title function_">mapMutations</span>(&#123;<span class="hljs-attr">increment</span>:<span class="hljs-string">&#x27;JIA&#x27;</span>,<span class="hljs-attr">decrement</span>:<span class="hljs-string">&#x27;JIAN&#x27;</span>&#125;),<br>    <br>    <span class="hljs-comment">//é mapMutationsç”Ÿæˆï¼šJIAã€JIANï¼ˆå¯¹è±¡å½¢å¼ï¼‰</span><br>    ...<span class="hljs-title function_">mapMutations</span>([<span class="hljs-string">&#x27;JIA&#x27;</span>,<span class="hljs-string">&#x27;JIAN&#x27;</span>]),<br>&#125;<br></code></pre></td></tr></table></figure></li></ol><blockquote><p>å¤‡æ³¨ï¼šmapActionsä¸mapMutationsä½¿ç”¨æ—¶ï¼Œè‹¥éœ€è¦ä¼ é€’å‚æ•°éœ€è¦ï¼šåœ¨æ¨¡æ¿ä¸­ç»‘å®šäº‹ä»¶æ—¶ä¼ é€’å¥½å‚æ•°ï¼Œå¦åˆ™ä¼ çš„å‚æ•°æ˜¯äº‹ä»¶å¯¹è±¡(event)ã€‚</p></blockquote><p>å…·ä½“æ¡ˆä¾‹ï¼š</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>&lt;h1&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h1&gt;<br>&lt;h3&gt;å½“å‰æ±‚å’Œçš„10å€ä¸ºï¼š&#123;&#123; bigSum &#125;&#125;&lt;/h3&gt;<br>&lt;h3&gt;æˆ‘æ˜¯&#123;&#123; name &#125;&#125;ï¼Œæˆ‘åœ¨&#123;&#123; school &#125;&#125;å­¦ä¹ &lt;/h3&gt;<br>&lt;select v-model.number=&quot;n&quot;&gt;<br>&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;<br>&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;<br>&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;button @click=&quot;increment(n)&quot;&gt;+&lt;/button&gt;<br>&lt;button @click=&quot;decrement(n)&quot;&gt;-&lt;/button&gt;<br>&lt;button @click=&quot;addOdd(n)&quot;&gt;å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ &lt;/button&gt;<br>&lt;button @click=&quot;addWait(n)&quot;&gt;ç­‰ä¸€ç­‰å†åŠ &lt;/button&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;mapState, mapGetters, mapMutations, mapActions&#125; from &#x27;vuex&#x27;//ğŸ”´<br><br>export default &#123;<br>name: &#x27;Count&#x27;,<br>data() &#123;<br>return &#123;<br>n:1, //ç”¨æˆ·é€‰æ‹©çš„æ•°å­—<br>&#125;<br>&#125;,<br>  computed: &#123;<br>...mapState([&#x27;sum&#x27;,&#x27;school&#x27;,&#x27;name&#x27;]),<br>...mapGetters([&#x27;bigSum&#x27;])<br>&#125;,<br>methods: &#123;<br>...mapMutations(&#123;increment:&#x27;ADD&#x27;, decrement:&#x27;SUBTRACT&#x27;&#125;),<br>...mapActions([&#x27;addOdd&#x27;, &#x27;addWait&#x27;])<br>&#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>button&#123;<br>margin-left: 5px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>â€‹    </p><h2 id="3-7-æ¨¡å—åŒ–-å‘½åç©ºé—´"><a href="#3-7-æ¨¡å—åŒ–-å‘½åç©ºé—´" class="headerlink" title="3.7 æ¨¡å—åŒ–+å‘½åç©ºé—´"></a>3.7 æ¨¡å—åŒ–+å‘½åç©ºé—´</h2><ol><li><p>ç›®çš„ï¼šè®©ä»£ç æ›´å¥½ç»´æŠ¤ï¼Œè®©å¤šç§æ•°æ®åˆ†ç±»æ›´åŠ æ˜ç¡®ã€‚</p></li><li><p>ä¿®æ”¹<strong>store.js</strong><br>ä¸ºäº†è§£å†³ä¸åŒæ¨¡å—å‘½åå†²çªçš„é—®é¢˜ï¼Œå°†ä¸åŒæ¨¡å—çš„namespaced: trueï¼Œä¹‹ååœ¨ä¸åŒé¡µé¢ä¸­å¼•å…¥<strong>getter</strong> <strong>actions</strong> <strong>mutations</strong>æ—¶ï¼Œéœ€è¦åŠ ä¸Šæ‰€å±çš„æ¨¡å—å</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> countAbout = &#123;<br>  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// å¼€å¯å‘½åç©ºé—´</span><br>  <span class="hljs-attr">state</span>: &#123;<span class="hljs-attr">x</span>:<span class="hljs-number">1</span>&#125;,<br>  <span class="hljs-attr">mutations</span>: &#123; ... &#125;,<br>  <span class="hljs-attr">actions</span>: &#123; ... &#125;,<br>  <span class="hljs-attr">getters</span>: &#123;<br>    <span class="hljs-title function_">bigSum</span>(<span class="hljs-params">state</span>)&#123; <span class="hljs-keyword">return</span> state.<span class="hljs-property">sum</span> * <span class="hljs-number">10</span> &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> personAbout = &#123;<br>  <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// å¼€å¯å‘½åç©ºé—´</span><br>  <span class="hljs-attr">state</span>: &#123; ... &#125;,<br>  <span class="hljs-attr">mutations</span>: &#123; ... &#125;,<br>  <span class="hljs-attr">actions</span>: &#123; ... &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> store = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>  <span class="hljs-attr">modules</span>: &#123;<br>    countAbout,<br>    personAbout<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure></li></ol><pre><code class="hljs">3. å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å–**state**æ•°æ®ï¼š</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥è¯»å–</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">state</span>.<span class="hljs-property">personAbout</span>.<span class="hljs-property">list</span><br><span class="hljs-comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapStateè¯»å–ï¼š</span><br><span class="hljs-comment">// ç”¨ mapState å– countAbout ä¸­çš„state å¿…é¡»åŠ ä¸Š &#x27;countAbout&#x27;</span><br>...<span class="hljs-title function_">mapState</span>(<span class="hljs-string">&#x27;countAbout&#x27;</span>,[<span class="hljs-string">&#x27;sum&#x27;</span>,<span class="hljs-string">&#x27;school&#x27;</span>,<span class="hljs-string">&#x27;subject&#x27;</span>]),<br></code></pre></td></tr></table></figure><ol start="4"><li>å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è¯»å–<strong>getters</strong>æ•°æ®ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥è¯»å–</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-property">getters</span>[<span class="hljs-string">&#x27;personAbout/firstPersonName&#x27;</span>]<br><span class="hljs-comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapGettersè¯»å–ï¼š</span><br>...<span class="hljs-title function_">mapGetters</span>(<span class="hljs-string">&#x27;countAbout&#x27;</span>,[<span class="hljs-string">&#x27;bigSum&#x27;</span>])<br></code></pre></td></tr></table></figure><pre><code class="hljs">5. å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨**dispatch**</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥dispatch</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">dispatch</span>(<span class="hljs-string">&#x27;personAbout/addPersonWang&#x27;</span>,person)<br><span class="hljs-comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapActionsï¼š</span><br>...<span class="hljs-title function_">mapActions</span>(<span class="hljs-string">&#x27;countAbout&#x27;</span>,&#123;<span class="hljs-attr">incrementOdd</span>:<span class="hljs-string">&#x27;jiaOdd&#x27;</span>,<span class="hljs-attr">incrementWait</span>:<span class="hljs-string">&#x27;jiaWait&#x27;</span>&#125;)<br></code></pre></td></tr></table></figure><pre><code class="hljs">6. å¼€å¯å‘½åç©ºé—´åï¼Œç»„ä»¶ä¸­è°ƒç”¨**commit**</code></pre><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//æ–¹å¼ä¸€ï¼šè‡ªå·±ç›´æ¥commit</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$store</span>.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;personAbout/ADD_PERSON&#x27;</span>,person)<br><span class="hljs-comment">//æ–¹å¼äºŒï¼šå€ŸåŠ©mapMutationsï¼š</span><br>...<span class="hljs-title function_">mapMutations</span>(<span class="hljs-string">&#x27;countAbout&#x27;</span>,&#123;<span class="hljs-attr">increment</span>:<span class="hljs-string">&#x27;JIA&#x27;</span>,<span class="hljs-attr">decrement</span>:<span class="hljs-string">&#x27;JIAN&#x27;</span>&#125;),<br></code></pre></td></tr></table></figure><p>å…·ä½“æ¡ˆä¾‹ï¼š<br>count.js</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>    <span class="hljs-attr">namespaced</span>: <span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">actions</span>: &#123;<br>        <span class="hljs-title function_">addOdd</span>(<span class="hljs-params">context, value</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;actionsä¸­çš„addOddè¢«è°ƒç”¨äº†&quot;</span>)<br>            <span class="hljs-keyword">if</span> (context.<span class="hljs-property">state</span>.<span class="hljs-property">sum</span> % <span class="hljs-number">2</span>) &#123;<br>                context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;ADD&#x27;</span>, value)<br>            &#125;<br>        &#125;,<br>        <span class="hljs-title function_">addWait</span>(<span class="hljs-params">context, value</span>) &#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;actionsä¸­çš„addWaitè¢«è°ƒç”¨äº†&quot;</span>)<br>            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>                context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;ADD&#x27;</span>, value)<br>            &#125;, <span class="hljs-number">500</span>)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">mutations</span>: &#123;<br>        <span class="hljs-title function_">ADD</span>(<span class="hljs-params">state, value</span>) &#123;<br>            state.<span class="hljs-property">sum</span> += value<br>        &#125;,<br>        <span class="hljs-title function_">SUBTRACT</span>(<span class="hljs-params">state, value</span>) &#123;<br>            state.<span class="hljs-property">sum</span> -= value<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">state</span>: &#123;<br>        <span class="hljs-attr">sum</span>: <span class="hljs-number">0</span>,<br>        <span class="hljs-attr">school</span>: <span class="hljs-string">&#x27;å°šç¡…è°·&#x27;</span>,<br>        <span class="hljs-attr">subject</span>: <span class="hljs-string">&#x27;å‰ç«¯&#x27;</span><br>    &#125;,<br>    <span class="hljs-attr">getters</span>: &#123;<br>        <span class="hljs-title function_">bigSum</span>(<span class="hljs-params">state</span>) &#123;<br>            <span class="hljs-keyword">return</span> state.<span class="hljs-property">sum</span> * <span class="hljs-number">10</span><br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>person.js</p>   <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span><br><span class="hljs-keyword">import</span> &#123; nanoid &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;nanoid&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span>&#123;<br>    <span class="hljs-attr">namespaced</span>:<span class="hljs-literal">true</span>,<br>    <span class="hljs-attr">actions</span>:&#123;<br>        <span class="hljs-title function_">addPersonWang</span>(<span class="hljs-params">context,value</span>)&#123;<br>            <span class="hljs-keyword">if</span>(value.<span class="hljs-property">name</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;ç‹&#x27;</span>) === <span class="hljs-number">0</span>)&#123;<br>                context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;ADD_PERSON&#x27;</span>,value)<br>            &#125;<span class="hljs-keyword">else</span>&#123;<br>                <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æ·»åŠ çš„äººå¿…é¡»å§“ç‹ï¼&#x27;</span>)<br>            &#125;<br>        &#125;,<br>        <span class="hljs-title function_">addPersonServer</span>(<span class="hljs-params">context</span>)&#123;<br>            axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;http://api.uixsj.cn/hitokoto/get?type=social&#x27;</span>).<span class="hljs-title function_">then</span>(<br>                <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>                    context.<span class="hljs-title function_">commit</span>(<span class="hljs-string">&#x27;ADD_PERSON&#x27;</span>,&#123;<span class="hljs-attr">id</span>:<span class="hljs-title function_">nanoid</span>(),<span class="hljs-attr">name</span>:response.<span class="hljs-property">data</span>&#125;)<br>                &#125;,<br>                <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123; <span class="hljs-title function_">alert</span>(error.<span class="hljs-property">message</span>) &#125;<br>            )<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">mutations</span>:&#123;<br>        <span class="hljs-title function_">ADD_PERSON</span>(<span class="hljs-params">state,value</span>)&#123;<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;mutationsä¸­çš„ADD_PERSONè¢«è°ƒç”¨äº†&#x27;</span>)<br>            state.<span class="hljs-property">personList</span>.<span class="hljs-title function_">unshift</span>(value)<br>        &#125;<br>    &#125;,<br>    <span class="hljs-attr">state</span>:&#123;<br>        <span class="hljs-attr">personList</span>:[&#123;<span class="hljs-attr">id</span>:<span class="hljs-string">&#x27;001&#x27;</span>,<span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;æ¬§è€¶&#x27;</span>&#125;]<br>    &#125;,<br>    <span class="hljs-attr">getters</span>:&#123;<br>        <span class="hljs-title function_">firstPersonName</span>(<span class="hljs-params">state</span>)&#123; <span class="hljs-keyword">return</span> state.<span class="hljs-property">personList</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span> &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>index.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">/* //è¯¥æ–‡ä»¶ç”¨äºåˆ›å»ºVuexä¸­æœ€ä¸ºæ ¸å¿ƒçš„store</span><br><span class="hljs-comment">import Vue from &#x27;vue&#x27;</span><br><span class="hljs-comment">//å¼•å…¥Vuex</span><br><span class="hljs-comment">import Vuex from &#x27;vuex&#x27;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">import axios from &quot;axios&quot;</span><br><span class="hljs-comment">import &#123; nanoid &#125; from &quot;nanoid&quot;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">//åº”ç”¨Vuexæ’ä»¶</span><br><span class="hljs-comment">Vue.use(Vuex)</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">const countAbout = &#123;</span><br><span class="hljs-comment">    namespaced: true,</span><br><span class="hljs-comment">    actions: &#123;</span><br><span class="hljs-comment">        addOdd(context, value) &#123;</span><br><span class="hljs-comment">            console.log(&quot;actionsä¸­çš„addOddè¢«è°ƒç”¨äº†&quot;)</span><br><span class="hljs-comment">            if (context.state.sum % 2) &#123;</span><br><span class="hljs-comment">                context.commit(&#x27;ADD&#x27;, value)</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;,</span><br><span class="hljs-comment">        addWait(context, value) &#123;</span><br><span class="hljs-comment">            console.log(&quot;actionsä¸­çš„addWaitè¢«è°ƒç”¨äº†&quot;)</span><br><span class="hljs-comment">            setTimeout(() =&gt; &#123;</span><br><span class="hljs-comment">                context.commit(&#x27;ADD&#x27;, value)</span><br><span class="hljs-comment">            &#125;, 500)</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;,</span><br><span class="hljs-comment">    mutations: &#123;</span><br><span class="hljs-comment">        ADD(state, value) &#123;</span><br><span class="hljs-comment">            state.sum += value</span><br><span class="hljs-comment">        &#125;,</span><br><span class="hljs-comment">        SUBTRACT(state, value) &#123;</span><br><span class="hljs-comment">            state.sum -= value</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;,</span><br><span class="hljs-comment">    state: &#123;</span><br><span class="hljs-comment">        sum: 0,</span><br><span class="hljs-comment">        school: &#x27;å°šç¡…è°·&#x27;,</span><br><span class="hljs-comment">        subject: &#x27;å‰ç«¯&#x27;</span><br><span class="hljs-comment">    &#125;,</span><br><span class="hljs-comment">    getters: &#123;</span><br><span class="hljs-comment">        bigSum(state) &#123;</span><br><span class="hljs-comment">            return state.sum * 10</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">const personAbout = &#123;</span><br><span class="hljs-comment">    namespaced: true,</span><br><span class="hljs-comment">    actions: &#123;</span><br><span class="hljs-comment">        addPersonWang(context, value) &#123;</span><br><span class="hljs-comment">            if (value.name.indexOf(&#x27;ç‹&#x27;) === 0) &#123;</span><br><span class="hljs-comment">                context.commit(&#x27;ADD_PERSON&#x27;, value)</span><br><span class="hljs-comment">            &#125; else &#123;</span><br><span class="hljs-comment">                alert(&#x27;æ·»åŠ çš„äººå¿…é¡»å§“ç‹ï¼&#x27;)</span><br><span class="hljs-comment">            &#125;</span><br><span class="hljs-comment">        &#125;,</span><br><span class="hljs-comment">        addPersonServer(context) &#123;</span><br><span class="hljs-comment">            axios.get(&#x27;http://api.uixsj.cn/hitokoto/get?type=social&#x27;).then(</span><br><span class="hljs-comment">                response =&gt; &#123;</span><br><span class="hljs-comment">                    context.commit(&#x27;ADD_PERSON&#x27;, &#123;</span><br><span class="hljs-comment">                        id: nanoid(),</span><br><span class="hljs-comment">                        name: response.data</span><br><span class="hljs-comment">                    &#125;)</span><br><span class="hljs-comment">                &#125;,</span><br><span class="hljs-comment">                error =&gt; &#123;</span><br><span class="hljs-comment">                    alert(error.message)</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">            )</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;,</span><br><span class="hljs-comment">    mutations: &#123;</span><br><span class="hljs-comment">        ADD_PERSON(state, value) &#123;</span><br><span class="hljs-comment">            console.log(&#x27;mutationsä¸­çš„ADD_PERSONè¢«è°ƒç”¨äº†&#x27;,value)</span><br><span class="hljs-comment">            state.personList.unshift(value)</span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;,</span><br><span class="hljs-comment">    state: &#123;</span><br><span class="hljs-comment">        personList: []</span><br><span class="hljs-comment">    &#125;,</span><br><span class="hljs-comment">    getters: &#123;</span><br><span class="hljs-comment">        firstPersonName(state) &#123;</span><br><span class="hljs-comment">            if(!state.personList[0]) return </span><br><span class="hljs-comment">            return state.personList[0].name </span><br><span class="hljs-comment">        &#125;</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">const store = new Vuex.Store(&#123;</span><br><span class="hljs-comment">    modules: &#123;</span><br><span class="hljs-comment">        countAbout,</span><br><span class="hljs-comment">        personAbout</span><br><span class="hljs-comment">    &#125;</span><br><span class="hljs-comment">&#125;)</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">export default store */</span><br><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vuex</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vuex&#x27;</span><br><span class="hljs-keyword">import</span> countOptions <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./count&#x27;</span><span class="hljs-comment">// å¼•å…¥count</span><br><span class="hljs-keyword">import</span> personOptions <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./person&#x27;</span><span class="hljs-comment">// å¼•å…¥person</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)<br><br><span class="hljs-comment">//åˆ›å»ºå¹¶æš´éœ²store</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>(&#123;<br>    <span class="hljs-attr">modules</span>:&#123;<br>        <span class="hljs-attr">countAbout</span>:countOptions,<br>        <span class="hljs-attr">personAbout</span>:personOptions,<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>count.vue</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>&lt;div&gt;<br>&lt;h1&gt;å½“å‰æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h1&gt;<br>&lt;h3&gt;å½“å‰æ±‚å’Œçš„10å€ä¸ºï¼š&#123;&#123; bigSum &#125;&#125;&lt;/h3&gt;<br>&lt;h3&gt;æˆ‘æ˜¯&#123;&#123; name &#125;&#125;ï¼Œæˆ‘åœ¨&#123;&#123; school &#125;&#125;å­¦ä¹ &lt;/h3&gt;<br>&lt;h3 style=&quot;color:red&quot;&gt;Personç»„ä»¶çš„æ€»äººæ•°æ˜¯ï¼š&#123;&#123; personList.length &#125;&#125;&lt;/h3&gt;<br>&lt;select v-model.number=&quot;n&quot;&gt;<br>&lt;option value=&quot;1&quot;&gt;1&lt;/option&gt;<br>&lt;option value=&quot;2&quot;&gt;2&lt;/option&gt;<br>&lt;option value=&quot;3&quot;&gt;3&lt;/option&gt;<br>&lt;/select&gt;<br>&lt;button @click=&quot;increment(n)&quot;&gt;+&lt;/button&gt;<br>&lt;button @click=&quot;decrement(n)&quot;&gt;-&lt;/button&gt;<br>&lt;button @click=&quot;incrementOdd(n)&quot;&gt;å½“å‰æ±‚å’Œä¸ºå¥‡æ•°å†åŠ &lt;/button&gt;<br>&lt;button @click=&quot;incrementWait(n)&quot;&gt;ç­‰ä¸€ç­‰å†åŠ &lt;/button&gt;<br>&lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>import &#123;<br>mapState,<br>mapGetters,<br>mapMutations,<br>mapActions<br>&#125; from &#x27;vuex&#x27;<br><br>export default &#123;<br>name: &#x27;Count&#x27;,<br>data() &#123;<br>return &#123;<br>n: 1, // ç”¨æˆ·é€‰æ‹©çš„æ•°å­—<br>&#125;<br>&#125;,<br>computed: &#123;<br>...mapState(&#x27;countAbout&#x27;, [&#x27;sum&#x27;, &#x27;school&#x27;, &#x27;name&#x27;]),<br>...mapState(&#x27;personAbout&#x27;, [&#x27;personList&#x27;]),<br>...mapGetters(&#x27;countAbout&#x27;, [&#x27;bigSum&#x27;]),<br>&#125;,<br>methods: &#123;<br>...mapMutations(&#x27;countAbout&#x27;, &#123;<br>increment: &#x27;ADD&#x27;,<br>decrement: &#x27;SUBTRACT&#x27;<br>&#125;),<br>...mapActions(&#x27;countAbout&#x27;, &#123;<br>incrementOdd: &#x27;addOdd&#x27;,<br>incrementWait: &#x27;addWait&#x27;<br>&#125;)<br>&#125;,<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br>button &#123;<br>margin-left: 5px;<br>&#125;<br>&lt;/style&gt;<br></code></pre></td></tr></table></figure><p>â€‹    </p><p>person.vue</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;div&gt;<br>        &lt;h1&gt;äººå‘˜åˆ—è¡¨&lt;/h1&gt;<br>        &lt;h3 style=&quot;color:red&quot;&gt;Countç»„ä»¶æ±‚å’Œä¸ºï¼š&#123;&#123; sum &#125;&#125;&lt;/h3&gt;<br>        &lt;h3&gt;åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªäººçš„åå­—æ˜¯ï¼š&#123;&#123; firstPersonName &#125;&#125;&lt;/h3&gt;<br>        &lt;input type=&quot;text&quot; placeholder=&quot;è¯·è¾“å…¥åå­—&quot; v-model=&quot;name&quot;&gt;<br>        &lt;button @click=&quot;add&quot;&gt;æ·»åŠ &lt;/button&gt;<br>        &lt;button @click=&quot;addWang&quot;&gt;æ·»åŠ ä¸€ä¸ªå§“ç‹çš„äºº&lt;/button&gt;<br>        &lt;button @click=&quot;addPerson&quot;&gt;éšæœºæ·»åŠ ä¸€ä¸ªäºº&lt;/button&gt;<br>        &lt;ul&gt;<br>            &lt;li v-for=&quot;p in personList&quot; :key=&quot;p.id&quot;&gt;&#123;&#123; p.name &#125;&#125;&lt;/li&gt;<br>        &lt;/ul&gt;<br>    &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    import &#123;<br>        nanoid<br>    &#125; from &#x27;nanoid&#x27;<br>    export default &#123;<br>        name: &#x27;Person&#x27;,<br>        data() &#123;<br>            return &#123;<br>                name: &#x27;&#x27;<br>            &#125;<br>        &#125;,<br>        computed: &#123;<br>            personList() &#123;<br>                return this.$store.state.personAbout.personList<br>            &#125;,<br>            sum() &#123;<br>                return this.$store.state.countAbout.sum<br>            &#125;,<br>            firstPersonName() &#123;<br>                return this.$store.getters[&#x27;personAbout/firstPersonName&#x27;]<br>            &#125;<br>        &#125;,<br>        methods: &#123;<br>            add() &#123;<br>                const personObj = &#123;<br>                    id: nanoid(),<br>                    name: this.name<br>                &#125;<br>                this.$store.commit(&#x27;personAbout/ADD_PERSON&#x27;, personObj)<br>                this.name = &#x27;&#x27;<br>            &#125;,<br>            addWang() &#123;<br>                const personObj = &#123;<br>                    id: nanoid(),<br>                    name: this.name<br>                &#125;<br>                this.$store.dispatch(&#x27;personAbout/addPersonWang&#x27;, personObj)<br>                this.name = &#x27;&#x27;<br>            &#125;,<br>            addPerson() &#123;<br>                this.$store.dispatch(&#x27;personAbout/addPersonServer&#x27;)<br>            &#125;<br>        &#125;,<br>    &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><p>â€‹    </p><h1 id="4-è·¯ç”±"><a href="#4-è·¯ç”±" class="headerlink" title="4. è·¯ç”±"></a>4. è·¯ç”±</h1><p><strong>ç›¸å…³ç†è§£</strong></p><ol><li>vue-router çš„ç†è§£</li></ol><ul><li><p>vueçš„ä¸€ä¸ªæ’ä»¶åº“ï¼Œä¸“é—¨ç”¨æ¥å®ç°SPAåº”ç”¨</p><ol start="2"><li>å¯¹SPAåº”ç”¨çš„ç†è§£</li></ol></li><li><p>å•é¡µWebåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰</p></li><li><p>æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªå®Œæ•´çš„é¡µé¢</p></li><li><p>ç‚¹å‡»é¡µé¢ä¸­çš„å¯¼èˆªé“¾æ¥ä¸ä¼šåˆ·æ–°é¡µé¢ï¼Œåªä¼šåšé¡µé¢çš„å±€éƒ¨æ›´æ–°</p></li><li><p>æ•°æ®éœ€è¦é€šè¿‡ajaxè¯·æ±‚è·å–</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221118221726021.png" alt="image-20221118221726021"></p></li></ul><p><strong>è·¯ç”±çš„ç†è§£</strong></p><ol><li><p>ä»€ä¹ˆæ˜¯è·¯ç”±? </p><ul><li>ä¸€ä¸ªè·¯ç”±å°±æ˜¯ä¸€ç»„æ˜ å°„å…³ç³»ï¼ˆkey - valueï¼‰</li><li>keyä¸ºè·¯å¾„ï¼Œvalueå¯èƒ½æ˜¯functionæˆ–componen</li></ul></li><li><p>è·¯ç”±åˆ†ç±»</p><ul><li>åç«¯è·¯ç”±<ol><li>ç†è§£ï¼švalueæ˜¯functionï¼Œç”¨äºå¤„ç†å®¢æˆ·ç«¯æäº¤çš„è¯·æ±‚</li><li>å·¥ä½œè¿‡ç¨‹ï¼šæœåŠ¡å™¨æ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œæ ¹æ®è¯·æ±‚è·¯å¾„æ‰¾åˆ°åŒ¹é…çš„å‡½æ•°æ¥å¤„ç†è¯·æ±‚ï¼Œè¿”å›å“åº”æ•°æ®</li></ol></li><li>å‰ç«¯è·¯ç”±<ol><li>ç†è§£ï¼švalueæ˜¯componentï¼Œç”¨äºå±•ç¤ºé¡µé¢å†…å®¹</li><li>å·¥ä½œè¿‡ç¨‹ï¼šå½“æµè§ˆå™¨çš„è·¯å¾„æ”¹å˜æ—¶ï¼Œå¯¹åº”çš„ç»„ä»¶å°±ä¼šæ˜¾ç¤º</li></ol></li></ul></li></ol><h2 id="4-1-åŸºæœ¬ä½¿ç”¨"><a href="#4-1-åŸºæœ¬ä½¿ç”¨" class="headerlink" title="4.1 åŸºæœ¬ä½¿ç”¨"></a>4.1 åŸºæœ¬ä½¿ç”¨</h2><ol><li><p>å®‰è£…vue-routerï¼Œå‘½ä»¤ï¼š<code>npm i vue-router</code></p><p>ç‰ˆæœ¬é—®é¢˜ Vue2ç‰ˆæœ¬ä½¿ç”¨ <code>npm i vue-router@3</code></p></li><li><p>åº”ç”¨æ’ä»¶ï¼š<code>Vue.use(VueRouter)</code></p></li><li><p>ç¼–å†™routeré…ç½®é¡¹:</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//å¼•å…¥VueRouter</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-comment">//å¼•å…¥Luyou ç»„ä»¶</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../components/About&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../components/Home&#x27;</span><br><br><span class="hljs-comment">//åˆ›å»ºrouterå®ä¾‹å¯¹è±¡ï¼Œå»ç®¡ç†ä¸€ç»„ä¸€ç»„çš„è·¯ç”±è§„åˆ™</span><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;<br><span class="hljs-attr">routes</span>:[<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/about&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">About</span><br>&#125;,<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span><br>&#125;<br>]<br>&#125;)<br><br><span class="hljs-comment">//æš´éœ²router</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><ol start="4"><li><p>å®ç°åˆ‡æ¢ï¼ˆactive-classå¯é…ç½®é«˜äº®æ ·å¼ï¼‰</p><p><code>&lt;router-link active-class=&quot;active&quot; to=&quot;/about&quot;&gt;About&lt;/router-link&gt;</code></p></li><li><p>æŒ‡å®šå±•ç¤ºä½ç½®</p><p><code>&lt;router-view&gt;&lt;/router-view&gt;</code></p></li></ol><h2 id="4-2-å‡ ä¸ªæ³¨æ„ç‚¹"><a href="#4-2-å‡ ä¸ªæ³¨æ„ç‚¹" class="headerlink" title="4.2 å‡ ä¸ªæ³¨æ„ç‚¹"></a>4.2 å‡ ä¸ªæ³¨æ„ç‚¹</h2><ol><li><p>è·¯ç”±ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>pages</code>æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ç»„ä»¶é€šå¸¸å­˜æ”¾åœ¨<code>components</code>æ–‡ä»¶å¤¹ã€‚</p><p>æ¯”å¦‚ä¸Šä¸€èŠ‚çš„æ¡ˆä¾‹å°±å¯ä»¥ä¿®æ”¹ä¸º </p><p>src&#x2F;pages&#x2F;Home.vue </p><p>src&#x2F;pages&#x2F;About.vue </p><p>src&#x2F;router&#x2F;index.js</p><p>src&#x2F;components&#x2F;Banner.vue </p><p>src&#x2F;App.vue</p></li><li><p>é€šè¿‡åˆ‡æ¢ï¼Œâ€œéšè—â€äº†çš„è·¯ç”±ç»„ä»¶ï¼Œé»˜è®¤æ˜¯è¢«é”€æ¯æ‰çš„ï¼Œéœ€è¦çš„æ—¶å€™å†å»æŒ‚è½½ã€‚</p></li><li><p>æ¯ä¸ªç»„ä»¶éƒ½æœ‰è‡ªå·±çš„<code>$route</code>å±æ€§ï¼Œé‡Œé¢å­˜å‚¨ç€è‡ªå·±çš„è·¯ç”±ä¿¡æ¯ã€‚</p></li><li><p>æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªrouterï¼Œå¯ä»¥é€šè¿‡ç»„ä»¶çš„<code>$router</code>å±æ€§è·å–åˆ°ã€‚</p></li></ol><h2 id="4-3-å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰"><a href="#4-3-å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰" class="headerlink" title="4.3 å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰"></a>4.3 å¤šçº§è·¯ç”±ï¼ˆå¤šçº§è·¯ç”±ï¼‰</h2><pre><code class="hljs">1. é…ç½®è·¯ç”±è§„åˆ™ï¼Œä½¿ç”¨**children**é…ç½®é¡¹ï¼š</code></pre><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">routes</span>:[<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/about&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">About</span>,<br>&#125;,<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span>,<br><span class="hljs-attr">children</span>:[ <span class="hljs-comment">//é€šè¿‡childrené…ç½®å­çº§è·¯ç”±</span><br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;news&#x27;</span>, <span class="hljs-comment">//æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/news</span><br><span class="hljs-attr">component</span>:<span class="hljs-title class_">News</span><br>&#125;,<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;message&#x27;</span>,<span class="hljs-comment">//æ­¤å¤„ä¸€å®šä¸è¦å†™ï¼š/message</span><br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Message</span><br>&#125;<br>]<br>&#125;<br>]<br><br></code></pre></td></tr></table></figure><ol start="2"><li><p>è·³è½¬ï¼ˆè¦å†™å®Œæ•´è·¯å¾„ï¼‰ï¼š</p><p><code>&lt;router-link to=&quot;/home/news&quot;&gt;News&lt;/router-link&gt;</code></p></li><li><p>æŒ‡å®šå±•ç¤ºä½ç½®</p><p><code>&lt;router-view&gt;&lt;/router-view&gt;</code></p></li></ol><h2 id="4-4-è·¯ç”±çš„queryå‚æ•°"><a href="#4-4-è·¯ç”±çš„queryå‚æ•°" class="headerlink" title="4.4 è·¯ç”±çš„queryå‚æ•°"></a>4.4 è·¯ç”±çš„queryå‚æ•°</h2><ol><li>ä¼ é€’å‚æ•°</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;<br>&lt;router-link :to=&quot;/home/message/detail?id=666&amp;title=ä½ å¥½&quot;&gt;è·³è½¬&lt;/router-link&gt;<br><br>&lt;!-- è·³è½¬å¹¶æºå¸¦queryå‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• --&gt;<br>&lt;router-link <br>:to=&quot;&#123;<br>path:&#x27;/home/message/detail&#x27;,<br>query:&#123;<br>   id:666,<br>            title:&#x27;ä½ å¥½&#x27;<br>&#125;<br>&#125;&quot;<br>&gt;è·³è½¬&lt;/router-link&gt;<br></code></pre></td></tr></table></figure><ol start="2"><li>æ¥æ”¶å‚æ•°ï¼š</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$route.<span class="hljs-property">query</span>.<span class="hljs-property">id</span><br>$route.<span class="hljs-property">query</span>.<span class="hljs-property">title</span><br></code></pre></td></tr></table></figure><h2 id="4-5-å‘½åè·¯ç”±"><a href="#4-5-å‘½åè·¯ç”±" class="headerlink" title="4.5 å‘½åè·¯ç”±"></a>4.5 å‘½åè·¯ç”±</h2><ol><li><p>ä½œç”¨ï¼šå¯ä»¥ç®€åŒ–è·¯ç”±çš„è·³è½¬ã€‚</p></li><li><p>å¦‚ä½•ä½¿ç”¨</p><ol><li><p>ç»™è·¯ç”±å‘½åï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js">&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/demo&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Demo</span>,<br><span class="hljs-attr">children</span>:[<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;test&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Test</span>,<br><span class="hljs-attr">children</span>:[<br>&#123;<br>           <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;hello&#x27;</span> <span class="hljs-comment">// ç»™è·¯ç”±å‘½å</span><br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;welcome&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Hello</span>,<br>&#125;<br>]<br>&#125;<br>]<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ç®€åŒ–è·³è½¬ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs vue"> &lt;!--ç®€åŒ–å‰ï¼Œéœ€è¦å†™å®Œæ•´çš„è·¯å¾„ --&gt;<br>&lt;router-link to=&quot;/demo/test/welcome&quot;&gt;è·³è½¬&lt;/router-link&gt;<br><br>&lt;!--ç®€åŒ–åï¼Œç›´æ¥é€šè¿‡åå­—è·³è½¬ --&gt;<br>&lt;router-link :to=&quot;&#123;name:&#x27;hello&#x27;&#125;&quot;&gt;è·³è½¬&lt;/router-link&gt;<br><br>&lt;!--ç®€åŒ–å†™æ³•é…åˆä¼ é€’å‚æ•° --&gt;<br>&lt;router-link <br>:to=&quot;&#123;<br>name:&#x27;hello&#x27;,<br>query:&#123;<br>     id:666,<br>         title:&#x27;ä½ å¥½&#x27;<br>&#125;<br>&#125;&quot;<br>&gt;è·³è½¬&lt;/router-link&gt;<br></code></pre></td></tr></table></figure></li></ol></li></ol><h2 id="4-6-è·¯ç”±çš„paramså‚æ•°"><a href="#4-6-è·¯ç”±çš„paramså‚æ•°" class="headerlink" title="4.6 è·¯ç”±çš„paramså‚æ•°"></a>4.6 è·¯ç”±çš„paramså‚æ•°</h2><ol><li><p>é…ç½®è·¯ç”±ï¼Œå£°æ˜æ¥æ”¶<strong>params</strong>å‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;/home&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Home</span>,<br><span class="hljs-attr">children</span>:[<br>&#123;<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;news&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">News</span><br>&#125;,<br>&#123;<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Message</span>,<br><span class="hljs-attr">children</span>:[<br>&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xiangqing&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;detail/:id/:title&#x27;</span>, <span class="hljs-comment">// ğŸ”´ä½¿ç”¨å ä½ç¬¦å£°æ˜æ¥æ”¶paramså‚æ•°</span><br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Detail</span><br>&#125;<br>]<br>&#125;<br>]<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>ä¼ é€’å‚æ•°</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å­—ç¬¦ä¸²å†™æ³• --&gt;<br>&lt;router-link :to=&quot;/home/message/detail/666/ä½ å¥½&quot;&gt;è·³è½¬&lt;/router-link&gt;<br><br>&lt;!-- è·³è½¬å¹¶æºå¸¦paramså‚æ•°ï¼Œtoçš„å¯¹è±¡å†™æ³• --&gt;<br>&lt;router-link <br>:to=&quot;&#123;<br>name:&#x27;xiangqing&#x27;,<br>params:&#123;<br>    id:666,<br>       title:&#x27;ä½ å¥½&#x27;<br>&#125;<br>&#125;&quot;<br>&gt;è·³è½¬&lt;/router-link&gt;<br></code></pre></td></tr></table></figure><blockquote><p>ç‰¹åˆ«æ³¨æ„ï¼šè·¯ç”±æºå¸¦paramså‚æ•°æ—¶ï¼Œè‹¥ä½¿ç”¨toçš„å¯¹è±¡å†™æ³•ï¼Œåˆ™ä¸èƒ½ä½¿ç”¨pathé…ç½®é¡¹ï¼Œå¿…é¡»ä½¿ç”¨nameé…ç½®ï¼</p></blockquote></li><li><p>æ¥æ”¶å‚æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript">$route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span><br>$route.<span class="hljs-property">params</span>.<span class="hljs-property">title</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="4-7-è·¯ç”±çš„propsé…ç½®"><a href="#4-7-è·¯ç”±çš„propsé…ç½®" class="headerlink" title="4.7 è·¯ç”±çš„propsé…ç½®"></a>4.7 è·¯ç”±çš„propsé…ç½®</h2><p>ä½œç”¨ï¼šè®©è·¯ç”±ç»„ä»¶æ›´æ–¹ä¾¿çš„æ”¶åˆ°å‚æ•°</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs javascript">&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xiangqing&#x27;</span>,<br><span class="hljs-attr">path</span>:<span class="hljs-string">&#x27;detail/:id&#x27;</span>,<br><span class="hljs-attr">component</span>:<span class="hljs-title class_">Detail</span>,<br><br><span class="hljs-comment">//ç¬¬ä¸€ç§å†™æ³•ï¼špropså€¼ä¸ºå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­æ‰€æœ‰çš„key-valueçš„ç»„åˆæœ€ç»ˆéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶</span><br><span class="hljs-comment">// props:&#123;a:900&#125;</span><br><br><span class="hljs-comment">//ç¬¬äºŒç§å†™æ³•ï¼špropså€¼ä¸ºå¸ƒå°”å€¼ï¼Œä¸ºtrueæ—¶ï¼Œåˆ™æŠŠè·¯ç”±æ”¶åˆ°çš„æ‰€æœ‰paramså‚æ•°é€šè¿‡propsä¼ ç»™Detailç»„ä»¶</span><br><span class="hljs-comment">// props:true</span><br><br><span class="hljs-comment">//ç¬¬ä¸‰ç§å†™æ³•ï¼špropså€¼ä¸ºå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›çš„å¯¹è±¡ä¸­æ¯ä¸€ç»„key-valueéƒ½ä¼šé€šè¿‡propsä¼ ç»™Detailç»„ä»¶</span><br><span class="hljs-title function_">props</span>(<span class="hljs-params">$route</span>)&#123; <span class="hljs-comment">// è¿™é‡Œå¯ä»¥ä½¿ç”¨è§£æ„èµ‹å€¼ &#123;query&#125;</span><br><span class="hljs-keyword">return</span> &#123;<br><span class="hljs-attr">id</span>: $route.<span class="hljs-property">query</span>.<span class="hljs-property">id</span>,<br><span class="hljs-attr">title</span>: $route.<span class="hljs-property">query</span>.<span class="hljs-property">title</span><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>æ–¹ä¾¿åœ¨è¦è·³è½¬å»çš„ç»„ä»¶é‡Œæ›´ç®€ä¾¿çš„å†™æ³•</p></blockquote><p>è·³è½¬å»ç»„ä»¶çš„å…·ä½“ä»£ç </p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>  &lt;ul&gt;<br>      &lt;h1&gt;Detail&lt;/h1&gt;<br>      &lt;li&gt;æ¶ˆæ¯ç¼–å·ï¼š&#123;&#123;id&#125;&#125;&lt;/li&gt;<br>      &lt;li&gt;æ¶ˆæ¯æ ‡é¢˜ï¼š&#123;&#123;title&#125;&#125;&lt;/li&gt;<br>      &lt;li&gt;a:&#123;&#123;a&#125;&#125;&lt;/li&gt;<br>      &lt;li&gt;b:&#123;&#123;b&#125;&#125;&lt;/li&gt;<br>  &lt;/ul&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>export default &#123;<br>    name: &#x27;Detail&#x27;,<br>    props: [&#x27;id&#x27;, &#x27;title&#x27;, &#x27;a&#x27;, &#x27;b&#x27;],<br>    mounted () &#123;<br>        console.log(this.$route);<br>    &#125;<br>&#125;<br>&lt;/script&gt;<br><br>&lt;style&gt;<br><br>&lt;/style&gt;<br><br></code></pre></td></tr></table></figure><h2 id="4-8-lt-router-link-gt-çš„replaceå±æ€§"><a href="#4-8-lt-router-link-gt-çš„replaceå±æ€§" class="headerlink" title="4.8 &lt;router-link&gt;çš„replaceå±æ€§"></a>4.8 <code>&lt;router-link&gt;</code>çš„replaceå±æ€§</h2><ol><li><p>ä½œç”¨ï¼šæ§åˆ¶è·¯ç”±è·³è½¬æ—¶æ“ä½œæµè§ˆå™¨å†å²è®°å½•çš„æ¨¡å¼</p></li><li><p>æµè§ˆå™¨çš„å†å²è®°å½•æœ‰ä¸¤ç§å†™å…¥æ–¹å¼ï¼šåˆ†åˆ«ä¸º<code>push</code>å’Œ<code>replace</code></p><p><code>push</code>æ˜¯è¿½åŠ å†å²è®°å½•</p><p><code>replace</code>æ˜¯æ›¿æ¢å½“å‰è®°å½•ã€‚è·¯ç”±è·³è½¬æ—¶å€™é»˜è®¤ä¸º<code>push</code></p></li><li><p>å¦‚ä½•å¼€å¯<code>replace</code>æ¨¡å¼ï¼š</p><p><code>&lt;router-link :replace=&quot;true&quot; ...&gt;News&lt;/router-link&gt;</code><br>ç®€å†™<code>&lt;router-link replace ...&gt;News&lt;/router-link&gt;</code></p></li></ol><h2 id="4-9-ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"><a href="#4-9-ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª" class="headerlink" title="4.9 ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª"></a>4.9 ç¼–ç¨‹å¼è·¯ç”±å¯¼èˆª</h2><pre><code class="hljs">1. ä½œç”¨ï¼šä¸å€ŸåŠ©`&lt;router-link&gt; `å®ç°è·¯ç”±è·³è½¬ï¼Œè®©è·¯ç”±è·³è½¬æ›´åŠ çµæ´»</code></pre><ol start="2"><li><p>this.$router.push({})å†…ä¼ çš„å¯¹è±¡ä¸<code>&lt;router-link&gt;</code>ä¸­çš„<strong>to</strong>ç›¸åŒ</p><p>this.$router.replace({})</p><p>this.$router.forward()å‰è¿›</p></li></ol><p>â€‹      this.$router.back()åé€€</p><p>â€‹      this.$router.go(n)å¯å‰è¿›ä¹Ÿå¯åé€€ï¼Œnä¸ºæ­£æ•°å‰è¿›nï¼Œä¸ºè´Ÿæ•°åé€€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">//$routerçš„ä¸¤ä¸ªAPI</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xiangqing&#x27;</span>,<br><span class="hljs-attr">params</span>:&#123;<br><span class="hljs-attr">id</span>:xxx,<br><span class="hljs-attr">title</span>:xxx<br>&#125;<br>&#125;)<br><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">replace</span>(&#123;<br><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;xiangqing&#x27;</span>,<br><span class="hljs-attr">params</span>:&#123;<br><span class="hljs-attr">id</span>:xxx,<br><span class="hljs-attr">title</span>:xxx<br>&#125;<br>&#125;)<br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">forward</span>() <span class="hljs-comment">//å‰è¿›</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">back</span>() <span class="hljs-comment">//åé€€</span><br><span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">go</span>() <span class="hljs-comment">//å¯å‰è¿›ä¹Ÿå¯åé€€</span><br></code></pre></td></tr></table></figure><h2 id="4-10-ç¼“å­˜è·¯ç”±ç»„ä»¶"><a href="#4-10-ç¼“å­˜è·¯ç”±ç»„ä»¶" class="headerlink" title="4.10 ç¼“å­˜è·¯ç”±ç»„ä»¶"></a>4.10 ç¼“å­˜è·¯ç”±ç»„ä»¶</h2><pre><code class="hljs">1. ä½œç”¨ï¼šè®©ä¸å±•ç¤ºçš„è·¯ç”±ç»„ä»¶ä¿æŒæŒ‚è½½ï¼Œä¸è¢«é”€æ¯ã€‚2. å…·ä½“ç¼–ç ï¼š</code></pre><p>è¿™ä¸ª include æŒ‡çš„æ˜¯ç»„ä»¶å</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs vue">// ç¼“å­˜ä¸€ä¸ªè·¯ç”±ç»„ä»¶<br>&lt;keep-alive include=&quot;News&quot;&gt; // includeä¸­å†™æƒ³è¦ç¼“å­˜çš„ç»„ä»¶åï¼Œä¸å†™è¡¨ç¤ºå…¨éƒ¨ç¼“å­˜<br>    &lt;router-view&gt;&lt;/router-view&gt;<br>&lt;/keep-alive&gt;<br><br>// ç¼“å­˜å¤šä¸ªè·¯ç”±ç»„ä»¶<br>&lt;keep-alive :include=&quot;[&#x27;News&#x27;,&#x27;Message&#x27;]&quot;&gt; <br>    &lt;router-view&gt;&lt;/router-view&gt;<br>&lt;/keep-alive&gt;<br></code></pre></td></tr></table></figure><h2 id="4-11-ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­"><a href="#4-11-ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­" class="headerlink" title="4.11 ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­"></a>4.11 ä¸¤ä¸ªæ–°çš„ç”Ÿå‘½å‘¨æœŸé’©å­</h2><p>ä½œç”¨ï¼šè·¯ç”±ç»„ä»¶æ‰€ç‹¬æœ‰çš„ä¸¤ä¸ªé’©å­ï¼Œç”¨äºæ•è·è·¯ç”±ç»„ä»¶çš„æ¿€æ´»çŠ¶æ€ã€‚<br>å…·ä½“åå­—ï¼š</p><ul><li><code>activated</code>è·¯ç”±ç»„ä»¶è¢«æ¿€æ´»æ—¶è§¦å‘ã€‚</li><li><code>deactivated</code>è·¯ç”±ç»„ä»¶å¤±æ´»æ—¶è§¦å‘ã€‚</li></ul><blockquote><p>è¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸé’©å­éœ€è¦é…åˆå‰é¢çš„ç¼“å­˜è·¯ç”±ç»„ä»¶ä½¿ç”¨ï¼ˆæ²¡æœ‰ç¼“å­˜è·¯ç”±ç»„ä»¶ä¸èµ·æ•ˆæœï¼‰</p></blockquote><p>src&#x2F;pages&#x2F;News.vue</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;ul&gt;<br>        &lt;li :style=&quot;&#123;opacity&#125;&quot;&gt;æ¬¢è¿å­¦ä¹ vue&lt;/li&gt;<br>        &lt;li&gt;news001 &lt;input type=&quot;text&quot;&gt;&lt;/li&gt;<br>        &lt;li&gt;news002 &lt;input type=&quot;text&quot;&gt;&lt;/li&gt;<br>        &lt;li&gt;news003 &lt;input type=&quot;text&quot;&gt;&lt;/li&gt;<br>    &lt;/ul&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        name:&#x27;News&#x27;,<br>        data()&#123;<br>            return&#123;<br>                opacity:1<br>            &#125;<br>        &#125;,<br>        activated()&#123;<br>            console.log(&#x27;Newsç»„ä»¶è¢«æ¿€æ´»äº†&#x27;)<br>            this.timer = setInterval(() =&gt; &#123;<br>                this.opacity -= 0.01<br>                if(this.opacity &lt;= 0) this.opacity = 1<br>            &#125;,16)<br>        &#125;,<br>        deactivated()&#123;<br>            console.log(&#x27;Newsç»„ä»¶å¤±æ´»äº†&#x27;)<br>            clearInterval(this.timer)<br>        &#125;<br>    &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure><h2 id="4-12-è·¯ç”±å®ˆå«"><a href="#4-12-è·¯ç”±å®ˆå«" class="headerlink" title="4.12 è·¯ç”±å®ˆå«"></a>4.12 è·¯ç”±å®ˆå«</h2><ol><li><p>ä½œç”¨ï¼šå¯¹è·¯ç”±è¿›è¡Œæƒé™æ§åˆ¶</p></li><li><p>åˆ†ç±»ï¼šå…¨å±€å®ˆå«ã€ç‹¬äº«å®ˆå«ã€ç»„ä»¶å†…å®ˆå«</p><ol start="3"><li><p>å…¨å±€å®ˆå«:</p><p>metaè·¯ç”±æºä¿¡æ¯</p></li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å…¨å±€å‰ç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢å‰æ‰§è¡Œ</span><br>router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>) =&gt;</span> &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeEach&#x27;</span>,to,<span class="hljs-keyword">from</span>)<br><span class="hljs-keyword">if</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">isAuth</span>)&#123; <span class="hljs-comment">// åˆ¤æ–­å½“å‰è·¯ç”±æ˜¯å¦éœ€è¦è¿›è¡Œæƒé™æ§åˆ¶</span><br><span class="hljs-keyword">if</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;school&#x27;</span>) === <span class="hljs-string">&#x27;atguigu&#x27;</span>)&#123; <span class="hljs-comment">// æƒé™æ§åˆ¶çš„å…·ä½“è§„åˆ™</span><br><span class="hljs-title function_">next</span>()<span class="hljs-comment">// æ”¾è¡Œ</span><br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æš‚æ— æƒé™æŸ¥çœ‹&#x27;</span>)<br>&#125;<br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-title function_">next</span>()<span class="hljs-comment">// æ”¾è¡Œ</span><br>&#125;<br>&#125;)<br><br><span class="hljs-comment">// å…¨å±€åç½®å®ˆå«ï¼šåˆå§‹åŒ–æ—¶ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢åæ‰§è¡Œ</span><br>router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to,<span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;afterEach&#x27;</span>,to,<span class="hljs-keyword">from</span>)<br><span class="hljs-keyword">if</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span>)&#123; <br><span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> <span class="hljs-comment">//ä¿®æ”¹ç½‘é¡µçš„title</span><br>&#125;<span class="hljs-keyword">else</span>&#123;<br><span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = <span class="hljs-string">&#x27;vue_test&#x27;</span><br>&#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>å®Œæ•´ä»£ç </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// è¿™ä¸ªæ–‡ä»¶ä¸“é—¨ç”¨äºåˆ›å»ºæ•´ä¸ªåº”ç”¨çš„è·¯ç”±å™¨</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueRouter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-comment">// å¼•å…¥ç»„ä»¶</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">About</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/About.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Home.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Message</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Message.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">News</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/News.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../pages/Detail.vue&#x27;</span><br><span class="hljs-comment">// åˆ›å»ºå¹¶æš´éœ²ä¸€ä¸ªè·¯ç”±å™¨</span><br><span class="hljs-keyword">const</span> router = <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;<br>    <span class="hljs-attr">routes</span>: [<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/home&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span>,<br>            <span class="hljs-attr">meta</span>:&#123;<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;ä¸»é¡µ&#x27;</span>&#125;,<br>            <span class="hljs-attr">children</span>: [<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;news&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">News</span>,<br>                    <span class="hljs-attr">meta</span>:&#123;<span class="hljs-attr">isAuth</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;æ–°é—»&#x27;</span>&#125;<br>                &#125;,<br>                &#123;<br>                    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;message&#x27;</span>,<br>                    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;mess&#x27;</span>,<br>                    <span class="hljs-attr">component</span>: <span class="hljs-title class_">Message</span>,<br>                    <span class="hljs-attr">meta</span>:&#123;<span class="hljs-attr">isAuth</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;æ¶ˆæ¯&#x27;</span>&#125;,<br>                    <span class="hljs-attr">children</span>: [<br>                        &#123;<br>                            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail/:id/:title&#x27;</span>,<br>                            <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;xiangqing&#x27;</span>,<br>                            <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span>,<br>                            <span class="hljs-attr">meta</span>:&#123;<span class="hljs-attr">isAuth</span>:<span class="hljs-literal">true</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">&#x27;è¯¦æƒ…&#x27;</span>&#125;,<br>                            <span class="hljs-title function_">props</span>(<span class="hljs-params">$route</span>) &#123;<br>                                <span class="hljs-keyword">return</span> &#123;<br>                                    <span class="hljs-attr">id</span>: $route.<span class="hljs-property">query</span>.<span class="hljs-property">id</span>,<br>                                    <span class="hljs-attr">title</span>:$route.<span class="hljs-property">query</span>.<span class="hljs-property">title</span>,<br><span class="hljs-attr">a</span>: <span class="hljs-number">1</span>,<br><span class="hljs-attr">b</span>: <span class="hljs-string">&#x27;hello&#x27;</span><br>                                &#125;<br>                            &#125;<br>                        &#125;<br>                    ]<br>                &#125;<br>            ]<br>        &#125;,<br>        &#123;<br>            <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/about&#x27;</span>,<br>            <span class="hljs-attr">component</span>: <span class="hljs-title class_">About</span>,<br>            <span class="hljs-attr">meta</span>:&#123; <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;å…³äº&#x27;</span> &#125;<br>        &#125;<br>    ]<br>&#125;)<br><br><span class="hljs-comment">// å…¨å±€å‰ç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹å‰è¢«è°ƒç”¨</span><br>router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span>, next</span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;å‰ç½®è·¯ç”±å®ˆå«&#x27;</span>, to, <span class="hljs-keyword">from</span>);<br>    <span class="hljs-keyword">if</span>(to.<span class="hljs-property">meta</span>.<span class="hljs-property">isAuth</span>) &#123;<br>        <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;school&#x27;</span>) === <span class="hljs-string">&#x27;zhejiang&#x27;</span>) &#123;<br>            <span class="hljs-comment">// æ”¾è¡Œ</span><br>            <span class="hljs-title function_">next</span>()<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒæŸ¥çœ‹&#x27;</span>)<br>        &#125;<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_">next</span>()<br>    &#125;<br>&#125;)<br><br><span class="hljs-comment">// å…¨å±€åç½®è·¯ç”±å®ˆå«â€”â€”â€”â€”åˆå§‹åŒ–çš„æ—¶å€™è¢«è°ƒç”¨ã€æ¯æ¬¡è·¯ç”±åˆ‡æ¢ä¹‹åè¢«è°ƒç”¨</span><br>router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to, <span class="hljs-keyword">from</span></span>) =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;åç½®è·¯ç”±å®ˆå«&#x27;</span>, to, <span class="hljs-keyword">from</span>)<br>    <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span> = to.<span class="hljs-property">meta</span>.<span class="hljs-property">title</span> || <span class="hljs-string">&#x27;æˆ‘çš„ç³»ç»Ÿ&#x27;</span><br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br><br></code></pre></td></tr></table></figure><ol start="2"><li><p>ç‹¬äº«å®ˆå«:</p><blockquote><p>å°±æ˜¯åœ¨ routes å­è·¯ç”±å†…å†™å®ˆå«</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-title function_">beforeEnter</span>(<span class="hljs-params">to,<span class="hljs-keyword">from</span>,next</span>)&#123;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;beforeEnter&#x27;</span>,to,<span class="hljs-keyword">from</span>)<br>    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&#x27;school&#x27;</span>) === <span class="hljs-string">&#x27;atguigu&#x27;</span>)&#123;<br>        <span class="hljs-title function_">next</span>()<br>    &#125;<span class="hljs-keyword">else</span>&#123;<br>        <span class="hljs-title function_">alert</span>(<span class="hljs-string">&#x27;æš‚æ— æƒé™æŸ¥çœ‹&#x27;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221124163115876.png" alt="image-20221124163115876"></p></li></ol></li></ol><p>â€‹        </p><ol start="3"><li><p>ç»„ä»¶å†…å®ˆå«</p><blockquote><p>åœ¨å…·ä½“ç»„ä»¶å†…å†™å®ˆå«</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">//è¿›å…¥å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œè¿›å…¥è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span><br>beforeRouteEnter (to, <span class="hljs-keyword">from</span>, next) &#123;<br>&#125;,<br><span class="hljs-comment">//ç¦»å¼€å®ˆå«ï¼šé€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨</span><br>beforeRouteLeave (to, <span class="hljs-keyword">from</span>, next) &#123;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs vue">&lt;template&gt;<br>    &lt;ul&gt;<br>        &lt;li :style=&quot;&#123;opacity&#125;&quot;&gt;æ¬¢è¿å­¦ä¹ vue&lt;/li&gt;<br>        &lt;li&gt;news001 &lt;input type=&quot;text&quot;&gt;&lt;/li&gt;<br>        &lt;li&gt;news002 &lt;input type=&quot;text&quot;&gt;&lt;/li&gt;<br>        &lt;li&gt;news003 &lt;input type=&quot;text&quot;&gt;&lt;/li&gt;<br>    &lt;/ul&gt;<br>&lt;/template&gt;<br><br>&lt;script&gt;<br>    export default &#123;<br>        name: &#x27;News&#x27;,<br>        data() &#123;<br>            return &#123;<br>                opacity: 1<br>            &#125;<br>        &#125;,<br>        activated() &#123;<br>            console.log(&#x27;Newsç»„ä»¶è¢«æ¿€æ´»äº†&#x27;)<br>            this.timer = setInterval(() =&gt; &#123;<br>                this.opacity -= 0.01<br>                if (this.opacity &lt;= 0) this.opacity = 1<br>            &#125;, 16)<br>        &#125;,<br>        deactivated() &#123;<br>            console.log(&#x27;Newsç»„ä»¶å¤±æ´»äº†&#x27;)<br>            clearInterval(this.timer)<br>        &#125;, // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨<br>        beforeRouteEnter(to, from, next) &#123;<br>            console.log(&#x27;beforeRouteEnter&#x27;, to, from)<br>            if (localStorage.getItem(&#x27;school&#x27;) === &#x27;jialidundaxue&#x27;) &#123;<br>                next()<br>            &#125; else &#123;<br>                alert(&#x27;å­¦æ ¡åä¸å¯¹ï¼Œæ— æƒé™æŸ¥çœ‹ï¼&#x27;)<br>            &#125;<br>        &#125;,<br>        // é€šè¿‡è·¯ç”±è§„åˆ™ï¼Œç¦»å¼€è¯¥ç»„ä»¶æ—¶è¢«è°ƒç”¨<br>        beforeRouteLeave(to, from, next) &#123;<br>            console.log(&#x27;beforeRouteLeave&#x27;, to, from)<br>            next()<br>        &#125;<br>    &#125;<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure></li></ol><p>åŒä¸€ç»„ä»¶é…ç½®å…¨éƒ¨å®ˆå«çš„æ‰§è¡Œé¡ºåº</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221119205337798.png" alt="image-20221119205337798"></p><h2 id="4-13-è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼"><a href="#4-13-è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼" class="headerlink" title="4.13 è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼"></a>4.13 è·¯ç”±å™¨çš„ä¸¤ç§å·¥ä½œæ¨¡å¼</h2><ol><li><p>å¯¹äºä¸€ä¸ªurlæ¥è¯´ï¼Œä»€ä¹ˆæ˜¯hashå€¼?</p><p>#åŠå…¶åé¢çš„å†…å®¹å°±æ˜¯hashå€¼ã€‚</p></li><li><p>hashå€¼ä¸ä¼šåŒ…å«åœ¨ HTTP è¯·æ±‚ä¸­ï¼Œå³ï¼šhashå€¼ä¸ä¼šå¸¦ç»™æœåŠ¡å™¨ã€‚</p></li><li><p>hashæ¨¡å¼ï¼š</p><ol><li>åœ°å€ä¸­æ°¸è¿œå¸¦ç€#å·ï¼Œä¸ç¾è§‚ ã€‚</li><li>è‹¥ä»¥åå°†åœ°å€é€šè¿‡ç¬¬ä¸‰æ–¹æ‰‹æœºappåˆ†äº«ï¼Œè‹¥appæ ¡éªŒä¸¥æ ¼ï¼Œåˆ™åœ°å€ä¼šè¢«æ ‡è®°ä¸ºä¸åˆæ³•ã€‚</li><li>å…¼å®¹æ€§è¾ƒå¥½ã€‚</li></ol></li><li><p>historyæ¨¡å¼ï¼š</p><ol><li><p>åœ°å€å¹²å‡€ï¼Œç¾è§‚ ã€‚</p></li><li><p>å…¼å®¹æ€§å’Œhashæ¨¡å¼ç›¸æ¯”ç•¥å·®ã€‚</p></li><li><p>åº”ç”¨éƒ¨ç½²ä¸Šçº¿æ—¶éœ€è¦åç«¯äººå‘˜æ”¯æŒï¼Œè§£å†³åˆ·æ–°é¡µé¢æœåŠ¡ç«¯404çš„é—®é¢˜ã€‚</p><p>åˆ©ç”¨<code>node</code> <code>express</code>ç®€å•æ­å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨<code>connect-history-api-fallback</code>è§£å†³</p><p>å•¥æ­£åˆ™è·¯å¾„åŒ¹é…</p></li></ol></li></ol><p></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> router =  <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueRouter</span>(&#123;<br><span class="hljs-attr">mode</span>:<span class="hljs-string">&#x27;history&#x27;</span>, #é»˜è®¤<br><span class="hljs-attr">routes</span>:[...]<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><pre><code class="hljs">1. </code></pre><h1 id="5-Vue-UI-ç»„ä»¶åº“"><a href="#5-Vue-UI-ç»„ä»¶åº“" class="headerlink" title="5.Vue UI ç»„ä»¶åº“"></a>5.Vue UI ç»„ä»¶åº“</h1><h2 id="5-1-å¸¸ç”¨UIç»„ä»¶åº“"><a href="#5-1-å¸¸ç”¨UIç»„ä»¶åº“" class="headerlink" title="5.1 å¸¸ç”¨UIç»„ä»¶åº“"></a>5.1 å¸¸ç”¨UI<strong>ç»„ä»¶åº“</strong></h2><ol><li><p>ç§»åŠ¨ç«¯å¸¸ç”¨UIç»„ä»¶åº“</p><p><a href="https://youzan.github.io/vant">Vant</a></p><p><a href="https://didi.github.io/cube-ui">Cube UI</a></p><p><a href="http://mint-ui.github.io/">Mint UI</a></p><p><a href="https://nutui.jd.com/#/">https://nutui.jd.com/#/</a></p></li><li><p>PCç«¯å¸¸ç”¨UIç»„ä»¶åº“</p><p><a href="https://element.eleme.cn/">Element UI</a></p><p><a href="https://www.iviewui.com/">IView UI</a></p></li></ol><h2 id="5-2-element-uiåŸºæœ¬ä½¿ç”¨"><a href="#5-2-element-uiåŸºæœ¬ä½¿ç”¨" class="headerlink" title="5.2. element-uiåŸºæœ¬ä½¿ç”¨"></a>5.2. element-uiåŸºæœ¬ä½¿ç”¨</h2><ol><li><p>lement-uiï¼šnpm i element-ui -S </p></li><li><p>src&#x2F;main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementUI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-ui&#x27;</span>;<span class="hljs-comment">// å¼•å…¥ElementUIç»„ä»¶åº“</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;<span class="hljs-comment">// å¼•å…¥ElementUIå…¨éƒ¨æ ·å¼</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementUI</span>)<span class="hljs-comment">// ä½¿ç”¨ElementUI</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#app&quot;</span>,<br>    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>&#125;)<br></code></pre></td></tr></table></figure></li><li><p>src&#x2F;App.vue</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;template&gt;<br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">br</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-row</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-search&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-edit&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;success&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-check&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;info&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-message&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;warning&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-star-off&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;danger&quot;</span> <span class="hljs-attr">icon</span>=<span class="hljs-string">&quot;el-icon-delete&quot;</span> <span class="hljs-attr">circle</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">el-row</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;App&#x27;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure></li></ol><h2 id="5-3element-uiæŒ‰éœ€å¼•å…¥"><a href="#5-3element-uiæŒ‰éœ€å¼•å…¥" class="headerlink" title="5.3element-uiæŒ‰éœ€å¼•å…¥"></a>5.3element-uiæŒ‰éœ€å¼•å…¥</h2><ol><li><p>å®‰è£… babel-plugin-componentnpm i babel-plugin-component -D </p></li><li><p>ä¿®æ”¹ babel-config-js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">presets</span>: [<br>    <span class="hljs-string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>,<br>    [<span class="hljs-string">&quot;@babel/preset-env&quot;</span>, &#123; <span class="hljs-string">&quot;modules&quot;</span>: <span class="hljs-literal">false</span> &#125;]<br>  ],<br>  <span class="hljs-attr">plugins</span>: [<br>    [<br>      <span class="hljs-string">&quot;component&quot;</span>,<br>      &#123;        <br>        <span class="hljs-string">&quot;libraryName&quot;</span>: <span class="hljs-string">&quot;element-ui&quot;</span>,<br>        <span class="hljs-string">&quot;styleLibraryName&quot;</span>: <span class="hljs-string">&quot;theme-chalk&quot;</span><br>      &#125;<br>    ]<br>  ]<br>&#125;<br></code></pre></td></tr></table></figure></li><li><p>src&#x2F;main.js:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Button</span>,<span class="hljs-title class_">Row</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-ui&#x27;</span><span class="hljs-comment">// æŒ‰éœ€å¼•å…¥</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-property">config</span>.<span class="hljs-property">productionTip</span> = <span class="hljs-literal">false</span><br><br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-title class_">Button</span>.<span class="hljs-property">name</span>, <span class="hljs-title class_">Button</span>);<br><span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">component</span>(<span class="hljs-title class_">Row</span>.<span class="hljs-property">name</span>, <span class="hljs-title class_">Row</span>);<br><span class="hljs-comment">/* æˆ–å†™ä¸º</span><br><span class="hljs-comment"> * Vue.use(Button)</span><br><span class="hljs-comment"> * Vue.use(Row)</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>(&#123;<br>    <span class="hljs-attr">el</span>:<span class="hljs-string">&quot;#app&quot;</span>,<br>    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>),<br>&#125;)<br></code></pre></td></tr></table></figure></li></ol><p>å‚è€ƒæ–‡ç« ï¼š</p><ol><li>å°šç¡…è°·ä¸»è®²çš„vueï¼š<a href="https://www.bilibili.com/video/BV1Zy4y1K7SH?p=77&amp;spm_id_from=pageDriver">https://www.bilibili.com/video/BV1Zy4y1K7SH?p=77&amp;spm_id_from=pageDriver</a></li><li>ç°ä»£JavaScriptï¼š<a href="https://zh.javascript.info/">https://zh.javascript.info/</a></li><li>MDNæ–‡æ¡£ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web">https://developer.mozilla.org/zh-CN/docs/Web</a></li><li>æˆ‘æ˜¯ä½ çš„è¶…çº§è‹±é›„ <a href="https://juejin.cn/post/6844903895467032589">https://juejin.cn/post/6844903895467032589</a></li><li>æ ¼é›·ç‹æ€çš„vueåŸºç¡€ç”¨æ³•&amp;åŸºç¡€åŸç†æ•´ç† <a href="https://blog.csdn.net/hangao233/article/details/123990192?spm=1001.2014.3001.5502">https://blog.csdn.net/hangao233/article/details/123990192?spm=1001.2014.3001.5502</a></li><li>cessçš„VUEç¬”è®° <a href="https://www.yuque.com/cessstudy/kak11d">å‰ç«¯ (yuque.com)</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>å‰ç«¯</category>
      
      <category>Vue</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vue</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Nacosä½¿ç”¨æŒ‡å—</title>
    <link href="/2022/11/23/Nacos%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/"/>
    <url>/2022/11/23/Nacos%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/</url>
    
    <content type="html"><![CDATA[<h1 id="1-Windowså®‰è£…"><a href="#1-Windowså®‰è£…" class="headerlink" title="1.Windowså®‰è£…"></a>1.Windowså®‰è£…</h1><p>å¼€å‘é˜¶æ®µé‡‡ç”¨å•æœºå®‰è£…å³å¯ã€‚</p><h2 id="1-1-ä¸‹è½½å®‰è£…åŒ…"><a href="#1-1-ä¸‹è½½å®‰è£…åŒ…" class="headerlink" title="1.1.ä¸‹è½½å®‰è£…åŒ…"></a>1.1.ä¸‹è½½å®‰è£…åŒ…</h2><p>åœ¨Nacosçš„GitHubé¡µé¢ï¼Œæä¾›æœ‰ä¸‹è½½é“¾æ¥ï¼Œå¯ä»¥ä¸‹è½½ç¼–è¯‘å¥½çš„NacosæœåŠ¡ç«¯æˆ–è€…æºä»£ç ï¼š</p><p>GitHubä¸»é¡µï¼š<a href="https://github.com/alibaba/nacos">https://github.com/alibaba/nacos</a></p><p>GitHubçš„Releaseä¸‹è½½é¡µï¼š<a href="https://github.com/alibaba/nacos/releases">https://github.com/alibaba/nacos/releases</a></p><p>å¦‚å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951713.png" alt="image-20210402161102887"></p><p>ä¹Ÿå¯ä»¥åˆ°æˆ‘çš„ç½‘ç›˜è¿›è¡Œä¸‹è½½ï¼Œ<a href="https://pan.baidu.com/s/11_5gu_SHtpUADkHu0t3TyA?pwd=52lj">ç½‘ç›˜è¿æ¥</a></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221123092819398.png" alt="image-20221123092819398"></p><p>windowsç‰ˆæœ¬ä½¿ç”¨<code>nacos-server-1.4.1.zip</code>åŒ…å³å¯ã€‚</p><h2 id="1-2-è§£å‹"><a href="#1-2-è§£å‹" class="headerlink" title="1.2.è§£å‹"></a>1.2.è§£å‹</h2><p>å°†è¿™ä¸ªåŒ…è§£å‹åˆ°ä»»æ„éä¸­æ–‡ç›®å½•ä¸‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951644.png" alt="image-20210402161843337"></p><p>ç›®å½•è¯´æ˜ï¼š</p><ul><li>binï¼šå¯åŠ¨è„šæœ¬</li><li>confï¼šé…ç½®æ–‡ä»¶</li></ul><h2 id="1-3-ç«¯å£é…ç½®"><a href="#1-3-ç«¯å£é…ç½®" class="headerlink" title="1.3.ç«¯å£é…ç½®"></a>1.3.ç«¯å£é…ç½®</h2><p>Nacosçš„é»˜è®¤ç«¯å£æ˜¯8848ï¼Œå¦‚æœä½ ç”µè„‘ä¸Šçš„å…¶å®ƒè¿›ç¨‹å ç”¨äº†8848ç«¯å£ï¼Œè¯·å…ˆå°è¯•å…³é—­è¯¥è¿›ç¨‹ã€‚</p><p><strong>å¦‚æœæ— æ³•å…³é—­å ç”¨8848ç«¯å£çš„è¿›ç¨‹</strong>ï¼Œä¹Ÿå¯ä»¥è¿›å…¥nacosçš„confç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951753.png" alt="image-20210402162008280"></p><p>ä¿®æ”¹å…¶ä¸­çš„å†…å®¹ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951804.png" alt="image-20210402162251093"></p><h2 id="1-4-å¯åŠ¨"><a href="#1-4-å¯åŠ¨" class="headerlink" title="1.4.å¯åŠ¨"></a>1.4.å¯åŠ¨</h2><p>å¯åŠ¨éå¸¸ç®€å•ï¼Œè¿›å…¥binç›®å½•ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951672.png" alt="image-20210402162350977"></p><p>ç„¶åæ‰§è¡Œå‘½ä»¤å³å¯ï¼š</p><ul><li><p>windowså‘½ä»¤ï¼š</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">startup.<span class="hljs-built_in">cmd</span> -m standalone<br></code></pre></td></tr></table></figure></li></ul><p>æ‰§è¡Œåçš„æ•ˆæœå¦‚å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951926.png" alt="image-20210402162526774"></p><h2 id="1-5-è®¿é—®"><a href="#1-5-è®¿é—®" class="headerlink" title="1.5.è®¿é—®"></a>1.5.è®¿é—®</h2><p>åœ¨æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š<a href="http://127.0.0.1:8848/nacos%E5%8D%B3%E5%8F%AF%EF%BC%9A">http://127.0.0.1:8848/nacoså³å¯ï¼š</a></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951194.png" alt="image-20210402162630427"></p><p>é»˜è®¤çš„è´¦å·å’Œå¯†ç éƒ½æ˜¯nacosï¼Œè¿›å…¥åï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951179.png" alt="image-20210402162709515"></p><h1 id="2-Linuxå®‰è£…"><a href="#2-Linuxå®‰è£…" class="headerlink" title="2.Linuxå®‰è£…"></a>2.Linuxå®‰è£…</h1><p>Linuxæˆ–è€…Macå®‰è£…æ–¹å¼ä¸Windowsç±»ä¼¼ã€‚</p><h2 id="2-1-å®‰è£…JDK"><a href="#2-1-å®‰è£…JDK" class="headerlink" title="2.1.å®‰è£…JDK"></a>2.1.å®‰è£…JDK</h2><p>Nacosä¾èµ–äºJDKè¿è¡Œï¼Œç´¢å¼•Linuxä¸Šä¹Ÿéœ€è¦å®‰è£…JDKæ‰è¡Œã€‚</p><p><a href="https://pan.baidu.com/s/11_5gu_SHtpUADkHu0t3TyA?pwd=52lj">JDKç½‘ç›˜ä¸‹è½½è¿æ¥</a></p><p>ä¸Šä¼ jdkå®‰è£…åŒ…</p><p>ä¸Šä¼ åˆ°æŸä¸ªç›®å½•ï¼Œä¾‹å¦‚ï¼š**&#x2F;usr&#x2F;local&#x2F;**</p><p>ç„¶åè§£å‹ç¼©ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -xvf jdk-8u144-linux-x64.tar.gz<br></code></pre></td></tr></table></figure><p>ç„¶åé‡å‘½åä¸ºjava</p><p>é…ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">export</span> JAVA_HOME=/usr/local/java<br><span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$JAVA_HOME</span>/bin<br></code></pre></td></tr></table></figure><p>è®¾ç½®ç¯å¢ƒå˜é‡ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">source</span> /etc/profile<br></code></pre></td></tr></table></figure><h2 id="2-2-ä¸Šä¼ å®‰è£…åŒ…"><a href="#2-2-ä¸Šä¼ å®‰è£…åŒ…" class="headerlink" title="2.2.ä¸Šä¼ å®‰è£…åŒ…"></a>2.2.ä¸Šä¼ å®‰è£…åŒ…</h2><p>å¦‚å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951713.png" alt="image-20210402161102887"></p><p>ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘çš„<a href="https://pan.baidu.com/s/11_5gu_SHtpUADkHu0t3TyA?pwd=52lj">ç½‘ç›˜</a>ä¸­çš„tar.gzï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221123092819398.png"></p><p>ä¸Šä¼ åˆ°LinuxæœåŠ¡å™¨çš„æŸä¸ªç›®å½•ï¼Œä¾‹å¦‚<code>/usr/local/src</code>ç›®å½•ä¸‹ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951277.png" alt="image-20210402163715580"></p><h2 id="2-3-è§£å‹"><a href="#2-3-è§£å‹" class="headerlink" title="2.3.è§£å‹"></a>2.3.è§£å‹</h2><p>å‘½ä»¤è§£å‹ç¼©å®‰è£…åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">tar -xvf nacos-server-1.4.1.tar.gz<br></code></pre></td></tr></table></figure><p>ç„¶ååˆ é™¤å®‰è£…åŒ…ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">rm</span> -rf nacos-server-1.4.1.tar.gz<br></code></pre></td></tr></table></figure><p>ç›®å½•ä¸­æœ€ç»ˆæ ·å¼ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951323.png" alt="image-20210402163858429"></p><p>ç›®å½•å†…éƒ¨ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210181951330.png" alt="image-20210402164414827"></p><h2 id="2-4-ç«¯å£é…ç½®"><a href="#2-4-ç«¯å£é…ç½®" class="headerlink" title="2.4.ç«¯å£é…ç½®"></a>2.4.ç«¯å£é…ç½®</h2><p>ä¸windowsä¸­ç±»ä¼¼</p><h2 id="2-5-å¯åŠ¨"><a href="#2-5-å¯åŠ¨" class="headerlink" title="2.5.å¯åŠ¨"></a>2.5.å¯åŠ¨</h2><p>åœ¨nacos&#x2F;binç›®å½•ä¸­ï¼Œè¾“å…¥å‘½ä»¤å¯åŠ¨Nacosï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">sh startup.sh -m standalone<br></code></pre></td></tr></table></figure><h1 id="3-Nacosçš„ä¾èµ–"><a href="#3-Nacosçš„ä¾èµ–" class="headerlink" title="3.Nacosçš„ä¾èµ–"></a>3.Nacosçš„ä¾èµ–</h1><p>çˆ¶å·¥ç¨‹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.2.5.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å®¢æˆ·ç«¯ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!-- nacoså®¢æˆ·ç«¯ä¾èµ–åŒ… --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba.cloud<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><h1 id="4-é›†ç¾¤ç»“æ„å›¾"><a href="#4-é›†ç¾¤ç»“æ„å›¾" class="headerlink" title="4.é›†ç¾¤ç»“æ„å›¾"></a>4.é›†ç¾¤ç»“æ„å›¾</h1><p>å®˜æ–¹ç»™å‡ºçš„Nacosé›†ç¾¤å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026460.png" alt="image-20210409210621117"></p><p>å…¶ä¸­åŒ…å«3ä¸ªnacosèŠ‚ç‚¹ï¼Œç„¶åä¸€ä¸ªè´Ÿè½½å‡è¡¡å™¨ä»£ç†3ä¸ªNacosã€‚è¿™é‡Œè´Ÿè½½å‡è¡¡å™¨å¯ä»¥ä½¿ç”¨nginxã€‚</p><p>æˆ‘ä»¬è®¡åˆ’çš„é›†ç¾¤ç»“æ„ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026231.png" alt="image-20210409211355037"></p><p>ä¸‰ä¸ªnacosèŠ‚ç‚¹çš„åœ°å€ï¼š</p><table><thead><tr><th>èŠ‚ç‚¹</th><th>ip</th><th>port</th></tr></thead><tbody><tr><td>nacos1</td><td>192.168.150.1</td><td>8845</td></tr><tr><td>nacos2</td><td>192.168.150.1</td><td>8846</td></tr><tr><td>nacos3</td><td>192.168.150.1</td><td>8847</td></tr></tbody></table><h1 id="5-æ­å»ºé›†ç¾¤"><a href="#5-æ­å»ºé›†ç¾¤" class="headerlink" title="5.æ­å»ºé›†ç¾¤"></a>5.æ­å»ºé›†ç¾¤</h1><p>æ­å»ºé›†ç¾¤çš„åŸºæœ¬æ­¥éª¤ï¼š</p><ul><li>æ­å»ºæ•°æ®åº“ï¼Œåˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„</li><li>ä¸‹è½½nacoså®‰è£…åŒ…</li><li>é…ç½®nacos</li><li>å¯åŠ¨nacosé›†ç¾¤</li><li>nginxåå‘ä»£ç†</li></ul><h2 id="5-1-åˆå§‹åŒ–æ•°æ®åº“"><a href="#5-1-åˆå§‹åŒ–æ•°æ®åº“" class="headerlink" title="5.1.åˆå§‹åŒ–æ•°æ®åº“"></a>5.1.åˆå§‹åŒ–æ•°æ®åº“</h2><p>Nacosé»˜è®¤æ•°æ®å­˜å‚¨åœ¨å†…åµŒæ•°æ®åº“Derbyä¸­ï¼Œä¸å±äºç”Ÿäº§å¯ç”¨çš„æ•°æ®åº“ã€‚</p><p>å®˜æ–¹æ¨èçš„æœ€ä½³å®è·µæ˜¯ä½¿ç”¨å¸¦æœ‰ä¸»ä»çš„é«˜å¯ç”¨æ•°æ®åº“é›†ç¾¤ã€‚</p><p>è¿™é‡Œæˆ‘ä»¬ä»¥å•ç‚¹çš„æ•°æ®åº“ä¸ºä¾‹æ¥è®²è§£ã€‚</p><p>é¦–å…ˆæ–°å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œå‘½åä¸ºnacosï¼Œè€Œåå¯¼å…¥ä¸‹é¢çš„SQLï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `config_info` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;id&#x27;</span>,<br>  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;data_id&#x27;</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `content` longtext <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;content&#x27;</span>,<br>  `md5` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;md5&#x27;</span>,<br>  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  `src_user` text COMMENT <span class="hljs-string">&#x27;source user&#x27;</span>,<br>  `src_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;source ip&#x27;</span>,<br>  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,<br>  `c_desc` <span class="hljs-type">varchar</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `c_use` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `effect` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `type` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `c_schema` text,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_configinfo_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;config_info&#x27;</span>;<br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = config_info_aggr   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `config_info_aggr` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;id&#x27;</span>,<br>  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;data_id&#x27;</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;group_id&#x27;</span>,<br>  `datum_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;datum_id&#x27;</span>,<br>  `content` longtext <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;å†…å®¹&#x27;</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_configinfoaggr_datagrouptenantdatum` (`data_id`,`group_id`,`tenant_id`,`datum_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;å¢åŠ ç§Ÿæˆ·å­—æ®µ&#x27;</span>;<br><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = config_info_beta   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `config_info_beta` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;id&#x27;</span>,<br>  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;data_id&#x27;</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;group_id&#x27;</span>,<br>  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;app_name&#x27;</span>,<br>  `content` longtext <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;content&#x27;</span>,<br>  `beta_ips` <span class="hljs-type">varchar</span>(<span class="hljs-number">1024</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;betaIps&#x27;</span>,<br>  `md5` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;md5&#x27;</span>,<br>  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  `src_user` text COMMENT <span class="hljs-string">&#x27;source user&#x27;</span>,<br>  `src_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;source ip&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_configinfobeta_datagrouptenant` (`data_id`,`group_id`,`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;config_info_beta&#x27;</span>;<br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = config_info_tag   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `config_info_tag` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;id&#x27;</span>,<br>  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;data_id&#x27;</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;group_id&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;tenant_id&#x27;</span>,<br>  `tag_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;tag_id&#x27;</span>,<br>  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;app_name&#x27;</span>,<br>  `content` longtext <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;content&#x27;</span>,<br>  `md5` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;md5&#x27;</span>,<br>  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  `src_user` text COMMENT <span class="hljs-string">&#x27;source user&#x27;</span>,<br>  `src_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;source ip&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_configinfotag_datagrouptenanttag` (`data_id`,`group_id`,`tenant_id`,`tag_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;config_info_tag&#x27;</span>;<br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = config_tags_relation   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `config_tags_relation` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;id&#x27;</span>,<br>  `tag_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;tag_name&#x27;</span>,<br>  `tag_type` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;tag_type&#x27;</span>,<br>  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;data_id&#x27;</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;group_id&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;tenant_id&#x27;</span>,<br>  `nid` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`nid`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_configtagrelation_configidtag` (`id`,`tag_name`,`tag_type`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;config_tag_relation&#x27;</span>;<br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = group_capacity   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `group_capacity` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;Group IDï¼Œç©ºå­—ç¬¦è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤&#x27;</span>,<br>  `quota` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `usage` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;ä½¿ç”¨é‡&#x27;</span>,<br>  `max_size` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `max_aggr_count` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°ï¼Œï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `max_aggr_size` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `max_history_count` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,<br>  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_group_id` (`group_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;é›†ç¾¤ã€å„Groupå®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;<br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = his_config_info   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `his_config_info` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">64</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `nid` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  `data_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `group_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `app_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;app_name&#x27;</span>,<br>  `content` longtext <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `md5` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,<br>  `src_user` text,<br>  `src_ip` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `op_type` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;ç§Ÿæˆ·å­—æ®µ&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`nid`),<br>  KEY `idx_gmt_create` (`gmt_create`),<br>  KEY `idx_gmt_modified` (`gmt_modified`),<br>  KEY `idx_did` (`data_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;å¤šç§Ÿæˆ·æ”¹é€ &#x27;</span>;<br><br><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-comment">/*   æ•°æ®åº“å…¨å = nacos_config   */</span><br><span class="hljs-comment">/*   è¡¨åç§° = tenant_capacity   */</span><br><span class="hljs-comment">/******************************************/</span><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `tenant_capacity` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;ä¸»é”®ID&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;Tenant ID&#x27;</span>,<br>  `quota` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;é…é¢ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `usage` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;ä½¿ç”¨é‡&#x27;</span>,<br>  `max_size` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;å•ä¸ªé…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `max_aggr_count` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;èšåˆå­é…ç½®æœ€å¤§ä¸ªæ•°&#x27;</span>,<br>  `max_aggr_size` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;å•ä¸ªèšåˆæ•°æ®çš„å­é…ç½®å¤§å°ä¸Šé™ï¼Œå•ä½ä¸ºå­—èŠ‚ï¼Œ0è¡¨ç¤ºä½¿ç”¨é»˜è®¤å€¼&#x27;</span>,<br>  `max_history_count` <span class="hljs-type">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0&#x27;</span> COMMENT <span class="hljs-string">&#x27;æœ€å¤§å˜æ›´å†å²æ•°é‡&#x27;</span>,<br>  `gmt_create` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `gmt_modified` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;ç§Ÿæˆ·å®¹é‡ä¿¡æ¯è¡¨&#x27;</span>;<br><br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `tenant_info` (<br>  `id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">&#x27;id&#x27;</span>,<br>  `kp` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;kp&#x27;</span>,<br>  `tenant_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;tenant_id&#x27;</span>,<br>  `tenant_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">default</span> <span class="hljs-string">&#x27;&#x27;</span> COMMENT <span class="hljs-string">&#x27;tenant_name&#x27;</span>,<br>  `tenant_desc` <span class="hljs-type">varchar</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;tenant_desc&#x27;</span>,<br>  `create_source` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;create_source&#x27;</span>,<br>  `gmt_create` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,<br>  `gmt_modified` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),<br>  <span class="hljs-keyword">UNIQUE</span> KEY `uk_tenant_info_kptenantid` (`kp`,`tenant_id`),<br>  KEY `idx_tenant_id` (`tenant_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8_bin COMMENT<span class="hljs-operator">=</span><span class="hljs-string">&#x27;tenant_info&#x27;</span>;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `users` (<br>`username` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>`password` <span class="hljs-type">varchar</span>(<span class="hljs-number">500</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>`enabled` <span class="hljs-type">boolean</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>);<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `roles` (<br>`username` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>`role` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br><span class="hljs-keyword">UNIQUE</span> INDEX `idx_user_role` (`username` <span class="hljs-keyword">ASC</span>, `role` <span class="hljs-keyword">ASC</span>) <span class="hljs-keyword">USING</span> BTREE<br>);<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `permissions` (<br>    `role` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `resource` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `action` <span class="hljs-type">varchar</span>(<span class="hljs-number">8</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">UNIQUE</span> INDEX `uk_role_permission` (`role`,`resource`,`action`) <span class="hljs-keyword">USING</span> BTREE<br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (username, password, enabled) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;nacos&#x27;</span>, <span class="hljs-string">&#x27;$2a$10$EuWPZHzz32dJN7jexM34MOeYirDdFAZm2kuWj7VEOJhhZkDrxfvUu&#x27;</span>, <span class="hljs-literal">TRUE</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> roles (username, role) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;nacos&#x27;</span>, <span class="hljs-string">&#x27;ROLE_ADMIN&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="5-2-ä¸‹è½½nacos"><a href="#5-2-ä¸‹è½½nacos" class="headerlink" title="5.2.ä¸‹è½½nacos"></a>5.2.ä¸‹è½½nacos</h2><p>nacosåœ¨GitHubä¸Šæœ‰ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/alibaba/nacos/tags%EF%BC%8C%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A9%E4%BB%BB%E6%84%8F%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD%E3%80%82">https://github.com/alibaba/nacos/tagsï¼Œå¯ä»¥é€‰æ‹©ä»»æ„ç‰ˆæœ¬ä¸‹è½½ã€‚</a></p><p>æœ¬ä¾‹ä¸­æ‰ç”¨1.4.1ç‰ˆæœ¬ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026232.png" alt="image-20210409212119411"></p><h2 id="5-3-é…ç½®Nacos"><a href="#5-3-é…ç½®Nacos" class="headerlink" title="5.3.é…ç½®Nacos"></a>5.3.é…ç½®Nacos</h2><p>å°†è¿™ä¸ªåŒ…è§£å‹åˆ°ä»»æ„éä¸­æ–‡ç›®å½•ä¸‹ï¼Œå¦‚å›¾ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026233.png" alt="image-20210402161843337"></p><p>ç›®å½•è¯´æ˜ï¼š</p><ul><li>binï¼šå¯åŠ¨è„šæœ¬</li><li>confï¼šé…ç½®æ–‡ä»¶</li></ul><p>è¿›å…¥nacosçš„confç›®å½•ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶cluster.conf.exampleï¼Œé‡å‘½åä¸ºcluster.confï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026234.png" alt="image-20210409212459292"></p><p>ç„¶åæ·»åŠ å†…å®¹ï¼š</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog"><span class="hljs-number">127.0.0.1:8845</span><br><span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">8846</span><br><span class="hljs-number">127.0.0.1</span>.<span class="hljs-number">8847</span><br></code></pre></td></tr></table></figure><p>ç„¶åä¿®æ”¹application.propertiesæ–‡ä»¶ï¼Œæ·»åŠ æ•°æ®åº“é…ç½®</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.datasource.platform</span>=<span class="hljs-string">mysql</span><br><br><span class="hljs-attr">db.num</span>=<span class="hljs-string">1</span><br><br><span class="hljs-attr">db.url.0</span>=<span class="hljs-string">jdbc:mysql://127.0.0.1:3306/nacos?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true&amp;useUnicode=true&amp;useSSL=false&amp;serverTimezone=UTC</span><br><span class="hljs-attr">db.user.0</span>=<span class="hljs-string">root</span><br><span class="hljs-attr">db.password.0</span>=<span class="hljs-string">123</span><br></code></pre></td></tr></table></figure><h2 id="5-4-å¯åŠ¨"><a href="#5-4-å¯åŠ¨" class="headerlink" title="5.4.å¯åŠ¨"></a>5.4.å¯åŠ¨</h2><p>å°†nacosæ–‡ä»¶å¤¹å¤åˆ¶ä¸‰ä»½ï¼Œåˆ†åˆ«å‘½åä¸ºï¼šnacos1ã€nacos2ã€nacos3</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026235.png" alt="image-20210409213335538"> </p><p>ç„¶ååˆ†åˆ«ä¿®æ”¹ä¸‰ä¸ªæ–‡ä»¶å¤¹ä¸­çš„application.propertiesï¼Œ</p><p>nacos1:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">8845</span><br></code></pre></td></tr></table></figure><p>nacos2:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">8846</span><br></code></pre></td></tr></table></figure><p>nacos3:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">server.port</span>=<span class="hljs-string">8847</span><br></code></pre></td></tr></table></figure><p>ç„¶ååˆ†åˆ«å¯åŠ¨ä¸‰ä¸ªnacosèŠ‚ç‚¹ï¼š</p><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos">startup.<span class="hljs-built_in">cmd</span><br></code></pre></td></tr></table></figure><h2 id="5-5-nginxåå‘ä»£ç†"><a href="#5-5-nginxåå‘ä»£ç†" class="headerlink" title="5.5.nginxåå‘ä»£ç†"></a>5.5.nginxåå‘ä»£ç†</h2><p><a href="https://pan.baidu.com/s/11_5gu_SHtpUADkHu0t3TyA?pwd=52lj">ä¸‹è½½nginxå®‰è£…åŒ…</a>ï¼š </p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/image-20221123092819398.png"></p><p>è§£å‹åˆ°ä»»æ„éä¸­æ–‡ç›®å½•ä¸‹ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202210182026237.png" alt="image-20210410103322874"> </p><p>ä¿®æ”¹conf&#x2F;nginx.confæ–‡ä»¶ï¼Œé…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-section">upstream</span> nacos-cluster &#123;<br>    <span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:8845</span>;<br><span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:8846</span>;<br><span class="hljs-attribute">server</span> <span class="hljs-number">127.0.0.1:8847</span>;<br>&#125;<br><br><span class="hljs-section">server</span> &#123;<br>    <span class="hljs-attribute">listen</span>       <span class="hljs-number">80</span>;<br>    <span class="hljs-attribute">server_name</span>  localhost;<br><br>    <span class="hljs-section">location</span> /nacos &#123;<br>        <span class="hljs-attribute">proxy_pass</span> http://nacos-cluster;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è€Œååœ¨æµè§ˆå™¨è®¿é—®ï¼š<a href="http://localhost/nacos%E5%8D%B3%E5%8F%AF%E3%80%82">http://localhost/nacoså³å¯ã€‚</a></p><p>ä»£ç ä¸­application.ymlæ–‡ä»¶é…ç½®å¦‚ä¸‹ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">cloud:</span><br>    <span class="hljs-attr">nacos:</span><br>      <span class="hljs-attr">server-addr:</span> <span class="hljs-string">localhost:80</span> <span class="hljs-comment"># Nacosåœ°å€</span><br></code></pre></td></tr></table></figure><h2 id="5-6-ä¼˜åŒ–"><a href="#5-6-ä¼˜åŒ–" class="headerlink" title="5.6.ä¼˜åŒ–"></a>5.6.ä¼˜åŒ–</h2><ul><li><p>å®é™…éƒ¨ç½²æ—¶ï¼Œéœ€è¦ç»™åšåå‘ä»£ç†çš„nginxæœåŠ¡å™¨è®¾ç½®ä¸€ä¸ªåŸŸåï¼Œè¿™æ ·åç»­å¦‚æœæœ‰æœåŠ¡å™¨è¿ç§»nacosçš„å®¢æˆ·ç«¯ä¹Ÿæ— éœ€æ›´æ”¹é…ç½®.</p></li><li><p>Nacosçš„å„ä¸ªèŠ‚ç‚¹åº”è¯¥éƒ¨ç½²åˆ°å¤šä¸ªä¸åŒæœåŠ¡å™¨ï¼Œåšå¥½å®¹ç¾å’Œéš”ç¦»</p></li></ul><h2 id="5-7-å¯èƒ½é‡åˆ°çš„é—®é¢˜"><a href="#5-7-å¯èƒ½é‡åˆ°çš„é—®é¢˜" class="headerlink" title="5.7 å¯èƒ½é‡åˆ°çš„é—®é¢˜"></a>5.7 å¯èƒ½é‡åˆ°çš„é—®é¢˜</h2><h3 id="é›†ç¾¤å¯åŠ¨å¤±è´¥"><a href="#é›†ç¾¤å¯åŠ¨å¤±è´¥" class="headerlink" title="é›†ç¾¤å¯åŠ¨å¤±è´¥"></a>é›†ç¾¤å¯åŠ¨å¤±è´¥</h3><blockquote><p>ç°è±¡</p></blockquote><p>å¯åŠ¨äº†ä¸¤å°ä¹‹åç¬¬ä¸‰å°æ€»æ˜¯é—ªé€€ï¼Œ&#x3D;&#x3D;cmd&#x3D;&#x3D;çª—å£é—ªé€€</p><blockquote><p>åŸå› </p></blockquote><p>å†…å­˜ä¸è¶³</p><blockquote><p>è§£å†³</p></blockquote><p>ä¸€çœ‹<code>startup.cmd</code>å¯åŠ¨æ–‡ä»¶</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">set</span> <span class="hljs-string">&quot;NACOS_JVM_OPTS=-server -Xms2g -Xmx2g -Xmn1g</span><br><span class="hljs-string"></span><br></code></pre></td></tr></table></figure><p>è§£é‡Š</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-Xmx2g:è®¾ç½®JVMæœ€å¤§å¯ç”¨å†…å­˜ä¸º2g</span><br><span class="hljs-deletion">-Xmn1g:è®¾ç½®å¹´è½»ä»£å¤§å°ä¸º1G.æ•´ä¸ªå †å¤§å°=å¹´è½»ä»£å¤§å° + å¹´è€ä»£å¤§å° + æŒä¹…ä»£å¤§å°.æŒä¹…ä»£ä¸€èˆ¬å›ºå®šå¤§å°ä¸º64m,æ‰€ä»¥å¢å¤§å¹´è½»ä»£å,å°†ä¼šå‡å°å¹´è€ä»£å¤§å°.æ­¤å€¼å¯¹ç³»ç»Ÿæ€§èƒ½å½±å“è¾ƒå¤§,Sunå®˜æ–¹æ¨èé…ç½®ä¸ºæ•´ä¸ªå †çš„3/8.</span><br><span class="hljs-deletion">-Xms2g:è®¾ç½®JVMä¿ƒä½¿å†…å­˜ä¸º2g.æ­¤å€¼å¯ä»¥è®¾ç½®ä¸-Xmxç›¸åŒ,ä»¥é¿å…æ¯æ¬¡åƒåœ¾å›æ”¶å®ŒæˆåJVMé‡æ–°åˆ†é…å†…å­˜.</span><br></code></pre></td></tr></table></figure><p>ä¿®æ”¹ä¸º</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs diff"><span class="hljs-deletion">-Xms512m -Xmx512m -Xmn256m</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Nacos</tag>
      
      <tag>å¾®æœåŠ¡</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL</title>
    <link href="/2022/11/22/MySQL/"/>
    <url>/2022/11/22/MySQL/</url>
    
    <content type="html"><![CDATA[<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><h1 id="ä¸€ã€SQLç®€è¿°"><a href="#ä¸€ã€SQLç®€è¿°" class="headerlink" title="ä¸€ã€SQLç®€è¿°"></a>ä¸€ã€SQLç®€è¿°</h1><h2 id="1-SQLçš„æ¦‚è¿°"><a href="#1-SQLçš„æ¦‚è¿°" class="headerlink" title="1.SQLçš„æ¦‚è¿°"></a>1.SQLçš„æ¦‚è¿°</h2><p>Structure Query<br>Language(ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€)ç®€ç§°SQLï¼Œå®ƒè¢«ç¾å›½å›½å®¶æ ‡å‡†å±€(ANSI)ç¡®å®šä¸ºå…³ç³»å‹æ•°æ®åº“è¯­è¨€çš„ç¾å›½æ ‡å‡†ï¼Œåè¢«å›½é™…åŒ–æ ‡å‡†ç»„ç»‡(ISO)é‡‡çº³ä¸ºå…³ç³»æ•°æ®åº“è¯­è¨€çš„å›½é™…æ ‡å‡†ã€‚æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå¯ä»¥é€šè¿‡SQLç®¡ç†æ•°æ®åº“ï¼›å®šä¹‰å’Œæ“ä½œæ•°æ®ï¼Œç»´æŠ¤æ•°æ®çš„å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚</p><h2 id="2-SQLçš„ä¼˜ç‚¹"><a href="#2-SQLçš„ä¼˜ç‚¹" class="headerlink" title="2.SQLçš„ä¼˜ç‚¹"></a>2.SQLçš„ä¼˜ç‚¹</h2><p>1ã€ç®€å•æ˜“å­¦ï¼Œå…·æœ‰å¾ˆå¼ºçš„æ“ä½œæ€§<br>2ã€ç»å¤§å¤šæ•°é‡è¦çš„æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå‡æ”¯æŒSQL<br>3ã€é«˜åº¦éè¿‡ç¨‹åŒ–ï¼›ç”¨SQLæ“ä½œæ•°æ®åº“æ—¶å¤§éƒ¨åˆ†çš„å·¥ä½œç”±DBMSè‡ªåŠ¨å®Œæˆ</p><h2 id="3-SQLçš„åˆ†ç±»"><a href="#3-SQLçš„åˆ†ç±»" class="headerlink" title="3.SQLçš„åˆ†ç±»"></a>3.SQLçš„åˆ†ç±»</h2><p>1ã€DDL(Data Definition Language) æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨æ¥æ“ä½œæ•°æ®åº“ã€è¡¨ã€åˆ—ç­‰ï¼› å¸¸ç”¨è¯­å¥ï¼šCREATEã€ ALTERã€DROP<br>2ã€DML(Data Manipulation Language) æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨æ¥æ“ä½œæ•°æ®åº“ä¸­è¡¨é‡Œçš„æ•°æ®ï¼›å¸¸ç”¨è¯­å¥ï¼šINSERTã€ UPDATEã€<br>DELETE<br>3ã€DCL(Data Control Language) æ•°æ®æ§åˆ¶è¯­è¨€ï¼Œç”¨æ¥æ“ä½œè®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ï¼› å¸¸ç”¨è¯­å¥ï¼šGRANTã€DENY<br>4ã€DQL(Data Query Language) æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼Œç”¨æ¥æŸ¥è¯¢æ•°æ® å¸¸ç”¨è¯­å¥ï¼šSELECT</p><h1 id="äºŒã€æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼"><a href="#äºŒã€æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼" class="headerlink" title="äºŒã€æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼"></a>äºŒã€æ•°æ®åº“çš„ä¸‰å¤§èŒƒå¼</h1><p>1ã€ç¬¬ä¸€èŒƒå¼(1NF)æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®çº¿ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼šæ¯åˆ—çš„å€¼å…·æœ‰åŸå­æ€§ï¼Œä¸å¯å†åˆ†å‰²ã€‚<br>2ã€ç¬¬äºŒèŒƒå¼(2NF)æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼(1NF)çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥å¾—ï¼Œæ»¡è¶³ç¬¬äºŒèŒƒå¼(2NF)å¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼(1NF)ã€‚å¦‚æœè¡¨æ˜¯å•ä¸»é”®ï¼Œé‚£ä¹ˆä¸»é”®ä»¥å¤–çš„åˆ—å¿…é¡»å®Œå…¨ä¾èµ–äºä¸»é”®ï¼›å¦‚æœè¡¨æ˜¯å¤åˆä¸»é”®ï¼Œé‚£ä¹ˆä¸»é”®ä»¥å¤–çš„åˆ—å¿…é¡»å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œä¸èƒ½ä»…ä¾èµ–ä¸»é”®çš„ä¸€éƒ¨åˆ†ã€‚<br>3ã€ç¬¬ä¸‰èŒƒå¼(3NF)æ˜¯åœ¨ç¬¬äºŒèŒƒå¼çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå³æ»¡è¶³ç¬¬ä¸‰èŒƒå¼å¿…é¡»è¦å…ˆæ»¡è¶³ç¬¬äºŒèŒƒå¼ã€‚ç¬¬ä¸‰èŒƒå¼(3NF)è¦æ±‚ï¼šè¡¨ä¸­çš„éä¸»é”®åˆ—å¿…é¡»å’Œä¸»é”®ç›´æ¥ç›¸å…³è€Œä¸èƒ½é—´æ¥ç›¸å…³ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼šéä¸»é”®åˆ—ä¹‹é—´ä¸èƒ½ç›¸å…³ä¾èµ–ã€‚</p><h1 id="ä¸‰ã€æ•°æ®åº“çš„æ•°æ®ç±»å‹"><a href="#ä¸‰ã€æ•°æ®åº“çš„æ•°æ®ç±»å‹" class="headerlink" title="ä¸‰ã€æ•°æ®åº“çš„æ•°æ®ç±»å‹"></a>ä¸‰ã€æ•°æ®åº“çš„æ•°æ®ç±»å‹</h1><p>ä½¿ç”¨MySQLæ•°æ®åº“å­˜å‚¨æ•°æ®æ—¶ï¼Œä¸åŒçš„æ•°æ®ç±»å‹å†³å®šäº†<br>MySQLå­˜å‚¨æ•°æ®æ–¹å¼çš„ä¸åŒã€‚ä¸ºæ­¤ï¼ŒMySQLæ•°æ®åº“æä¾›äº†å¤šç§æ•°æ®ç±»å‹ï¼Œå…¶ä¸­åŒ…æ‹¬æ•´æ•°ç±»å‹ã€æµ®ç‚¹æ•°ç±»å‹ã€å®šç‚¹<br>æ•°ç±»å‹ã€æ—¥æœŸå’Œæ—¶é—´ç±»å‹ã€å­—ç¬¦ä¸²ç±»å‹ã€äºŒè¿›åˆ¶â€¦ç­‰ç­‰æ•°æ®ç±»å‹ã€‚</p><h2 id="1-æ•´æ•°ç±»å‹"><a href="#1-æ•´æ•°ç±»å‹" class="headerlink" title="1.æ•´æ•°ç±»å‹"></a>1.æ•´æ•°ç±»å‹</h2><p>æ ¹æ®æ•°å€¼å–å€¼èŒƒå›´çš„ä¸åŒMySQL ä¸­çš„æ•´æ•°ç±»å‹å¯åˆ†ä¸º5ç§ï¼Œåˆ†åˆ«æ˜¯TINYINTã€SMALUNTã€MEDIUMINTã€INTå’Œ BIGINTã€‚ä¸‹å›¾åˆ—ä¸¾äº†<br>MySQLä¸åŒæ•´æ•°ç±»å‹æ‰€å¯¹åº”çš„å­—èŠ‚å¤§å°å’Œå–å€¼èŒƒå›´è€Œæœ€å¸¸ç”¨çš„ä¸ºINTç±»å‹çš„ï¼Œ</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å­—èŠ‚æ•°</th><th>æ— ç¬¦å·æ•°çš„å–å€¼èŒƒå›´</th><th>æœ‰ç¬¦å·æ•°çš„å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>TINYINT</td><td>1</td><td>0~255</td><td>-128~127</td></tr><tr><td>SMALLINT</td><td>2</td><td>0~65535</td><td>-32768~32768</td></tr><tr><td>MEDIUMINT</td><td>3</td><td>0~16777215</td><td>-8388608~8388608</td></tr><tr><td>INT</td><td>4</td><td>0~4294967295</td><td>-2147483648~ 2147483648</td></tr><tr><td>BIGINT</td><td>8</td><td>0~18446744073709551615</td><td>-9223372036854775808~9223372036854775808</td></tr></tbody></table><h2 id="2-æµ®ç‚¹æ•°ç±»å‹å’Œå®šç‚¹æ•°ç±»å‹"><a href="#2-æµ®ç‚¹æ•°ç±»å‹å’Œå®šç‚¹æ•°ç±»å‹" class="headerlink" title="2.æµ®ç‚¹æ•°ç±»å‹å’Œå®šç‚¹æ•°ç±»å‹"></a>2.æµ®ç‚¹æ•°ç±»å‹å’Œå®šç‚¹æ•°ç±»å‹</h2><p>åœ¨MySQLæ•°æ®åº“ä¸­ä½¿ç”¨æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°æ¥å­˜å‚¨å°æ•°ã€‚æµ®ç‚¹æ•°çš„ç±»å‹æœ‰ä¸¤ç§ï¼šå•ç²¾åº¦æµ®ç‚¹æ•°ç±»å‹ï¼ˆFLOAT)å’ŒåŒç²¾åº¦æµ®ç‚¹æ•°ç±»å‹ï¼ˆDOUBLE)ã€‚è€Œå®šç‚¹æ•°ç±»å‹åªæœ‰ä¸€ç§å³DECIMALç±»å‹ã€‚ä¸‹å›¾åˆ—ä¸¾äº†<br>MySQLä¸­æµ®ç‚¹æ•°å’Œå®šç‚¹æ•°ç±»å‹æ‰€å¯¹åº”çš„å­—èŠ‚å¤§å°åŠå…¶å–å€¼èŒƒå›´ï¼š</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å­—èŠ‚æ•°</th><th>æœ‰ç¬¦å·çš„å–å€¼èŒƒå›´</th><th>æ— ç¬¦å·çš„å–å€¼èŒƒå›´</th></tr></thead><tbody><tr><td>FLOAT</td><td>4</td><td>-3.402823466E+38~-1.175494351E-38</td><td>0å’Œ1.175494351E-38~3.402823466E+38</td></tr><tr><td>DOUBLE</td><td>8</td><td>-1.7976931348623157E+308~2.2250738585072014E-308</td><td>0å’Œ2.2250738585072014E-308~1.7976931348623157E+308</td></tr><tr><td>DECIMALï¼ˆM,Dï¼‰</td><td>M+2</td><td>-1.7976931348623157E+308~2.2250738585072014E-308</td><td>0å’Œ2.2250738585072014E-308~1.7976931348623157E+308</td></tr></tbody></table><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼šDECIMALç±»å‹çš„å–å€¼èŒƒå›´ä¸DOUBLEç±»å‹ç›¸åŒã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼šDECIMALç±»å‹çš„æœ‰æ•ˆå–å€¼èŒƒå›´æ˜¯ç”±Må’ŒDå†³å®šçš„ã€‚å…¶ä¸­ï¼ŒMè¡¨ç¤ºçš„æ˜¯æ•°æ®çš„é•¿<br>åº¦ï¼ŒDè¡¨ç¤ºçš„æ˜¯å°æ•°ç‚¹åçš„é•¿åº¦ã€‚æ¯”å¦‚ï¼Œå°†æ•°æ®ç±»å‹ä¸ºDECIMAL(6,2)çš„æ•°æ®6.5243 æ’äººæ•°æ®åº“åæ˜¾ç¤ºçš„ç»“æœä¸º6.52</p><h2 id="3-å­—ç¬¦ä¸²ç±»å‹"><a href="#3-å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="3.å­—ç¬¦ä¸²ç±»å‹"></a>3.å­—ç¬¦ä¸²ç±»å‹</h2><p>åœ¨MySQLä¸­å¸¸ç”¨CHAR å’Œ VARCHAR è¡¨ç¤ºå­—ç¬¦ä¸²ã€‚ä¸¤è€…ä¸åŒçš„æ˜¯ï¼šVARCHARå­˜å‚¨å¯å˜é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚<br><strong>å½“æ•°æ®ä¸ºCHAR(M)ç±»å‹æ—¶ï¼Œä¸ç®¡æ’å…¥å€¼çš„é•¿åº¦æ˜¯å®é™…æ˜¯å¤šå°‘å®ƒæ‰€å ç”¨çš„å­˜å‚¨ç©ºé—´éƒ½æ˜¯Mä¸ªå­—èŠ‚ï¼›è€ŒVARCHAR(M)æ‰€å¯¹åº”çš„æ•°æ®æ‰€å ç”¨çš„å­—èŠ‚æ•°ä¸ºå®é™…é•¿åº¦åŠ 1</strong></p><table><thead><tr><th>æ’å…¥å€¼</th><th>CHAR(3)</th><th>å­˜å‚¨éœ€æ±‚</th><th>VARCHAR(3)</th><th>å­˜å‚¨éœ€æ±‚</th></tr></thead><tbody><tr><td>â€˜â€™</td><td>â€˜â€™</td><td>3ä¸ªå­—èŠ‚</td><td>â€˜â€™</td><td>1ä¸ªå­—èŠ‚</td></tr><tr><td>â€˜aâ€™</td><td>â€˜aâ€™</td><td>3ä¸ªå­—èŠ‚</td><td>â€˜aâ€™</td><td>2ä¸ªå­—èŠ‚</td></tr><tr><td>â€˜abâ€™</td><td>â€˜abâ€™</td><td>3ä¸ªå­—èŠ‚</td><td>â€˜abâ€™</td><td>3ä¸ªå­—èŠ‚</td></tr><tr><td>â€˜abcâ€™</td><td>â€˜abâ€™</td><td>3ä¸ªå­—èŠ‚</td><td>â€˜abcâ€™</td><td>4ä¸ªå­—èŠ‚</td></tr><tr><td>â€˜abcdâ€™</td><td>â€˜abâ€™</td><td>3ä¸ªå­—èŠ‚</td><td>â€˜abcâ€™</td><td>4å­—èŠ‚</td></tr></tbody></table><h2 id="4-å­—ç¬¦ä¸²ç±»å‹"><a href="#4-å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="4.å­—ç¬¦ä¸²ç±»å‹"></a>4.å­—ç¬¦ä¸²ç±»å‹</h2><p>æ–‡æœ¬ç±»å‹ç”¨äºè¡¨ç¤ºå¤§æ–‡æœ¬æ•°æ®ï¼Œä¾‹å¦‚ï¼Œæ–‡ç« å†…å®¹ã€è¯„è®ºã€è¯¦æƒ…ç­‰ï¼Œå®ƒçš„ç±»å‹åˆ†ä¸ºå¦‚ä¸‹4ç§ï¼š</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å‚¨å­˜èŒƒå›´</th></tr></thead><tbody><tr><td>TINYTEXT</td><td>0~255å­—èŠ‚</td></tr><tr><td>TEXT</td><td>0~65535å­—èŠ‚</td></tr><tr><td>MEDIUMTEXT</td><td>0~16777215å­—èŠ‚</td></tr><tr><td>LONGTEXT</td><td>0~4294967295å­—èŠ‚</td></tr></tbody></table><h2 id="5-æ—¥æœŸä¸æ—¶é—´ç±»å‹"><a href="#5-æ—¥æœŸä¸æ—¶é—´ç±»å‹" class="headerlink" title="5.æ—¥æœŸä¸æ—¶é—´ç±»å‹"></a>5.æ—¥æœŸä¸æ—¶é—´ç±»å‹</h2><p>MySQLæä¾›çš„è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„æ•°æ®ç±»å‹åˆ†åˆ«æ˜¯ ï¼šYEARã€DATEã€TIMEã€DATETIME å’Œ<br>TIMESTAMPã€‚ä¸‹å›¾åˆ—ä¸¾äº†æ—¥æœŸå’Œæ—¶é—´æ•°æ®ç±»å‹æ‰€å¯¹åº”çš„å­—èŠ‚æ•°ã€å–å€¼èŒƒå›´ã€æ—¥æœŸæ ¼å¼ä»¥åŠé›¶å€¼ï¼š</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å­—èŠ‚æ•°</th><th>å–å€¼èŒƒå›´</th><th>æ—¥æœŸæ ¼å¼</th><th>é›¶å€¼</th></tr></thead><tbody><tr><td>YEAR</td><td>1</td><td>1901~2155</td><td>YYYY</td><td>0000</td></tr><tr><td>DATE</td><td>4</td><td>1000-01-01~9999-12-31</td><td>YYYY-MM-DD</td><td>0000-00-00</td></tr><tr><td>TIME</td><td>3</td><td>-838ï¼š59ï¼š59~ 838ï¼š59ï¼š59</td><td>HH:MM:SS</td><td>00:00:00</td></tr><tr><td>DATETIME</td><td>8</td><td>1000-01-01 00:00:00~9999-12-31 23:59:59</td><td>YYYY-MM-DD HH:MM:SS</td><td>0000-00-00 00:00:00</td></tr><tr><td>TIMESTAMP</td><td>4</td><td>1970-01-01 00:00:01~2038-01-19 03:14:07</td><td>YYYY-MM-DD HH:MM:SS</td><td>0000-00-00 00:00:00</td></tr></tbody></table><h3 id="5-1-YEARç±»å‹"><a href="#5-1-YEARç±»å‹" class="headerlink" title="5.1 YEARç±»å‹"></a>5.1 YEARç±»å‹</h3><p>YEARç±»å‹ç”¨äºè¡¨ç¤ºå¹´ä»½ï¼Œåœ¨MySQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ ¼å¼æŒ‡å®šYEARç±»å‹ çš„å€¼ã€‚<br>1ã€ä½¿ç”¨4ä½å­—ç¬¦ä¸²æˆ–æ•°å­—è¡¨ç¤ºï¼ŒèŒƒå›´ä¸ºâ€™1901â€™â€”â€˜2155â€™æˆ–1901â€”2155ã€‚ä¾‹å¦‚ï¼Œè¾“äºº â€˜2019â€™æˆ–2019æ’äººåˆ°æ•°æ®åº“ä¸­çš„å€¼å‡ä¸º2019ã€‚<br>2ã€ä½¿ç”¨ä¸¤ä½å­—ç¬¦ä¸²è¡¨ç¤ºï¼ŒèŒƒå›´ä¸ºâ€™00â€™â€”â€˜99â€™ã€‚å…¶ä¸­ï¼Œâ€˜00â€™â€”â€˜69â€™èŒƒå›´çš„å€¼ä¼šè¢«è½¬æ¢ä¸º<br>2000â€”2069èŒƒå›´çš„YEARå€¼ï¼Œâ€˜70â€™â€”â€˜99â€™èŒƒå›´çš„å€¼ä¼šè¢«è½¬æ¢ä¸º1970â€”1999èŒƒå›´çš„YEAR<br>å€¼ã€‚ä¾‹å¦‚ï¼Œè¾“äººâ€™19â€™æ’äººåˆ°æ•°æ®åº“ä¸­çš„å€¼ä¸º2019ã€‚<br>3ã€ä½¿ç”¨ä¸¤ä½æ•°å­—è¡¨ç¤ºï¼ŒèŒƒå›´ä¸º1â€”99ã€‚å…¶ä¸­ï¼Œ1â€”69èŒƒå›´çš„å€¼ä¼šè¢«è½¬æ¢ä¸º2001â€”<br>2069èŒƒå›´çš„YEARå€¼ï¼Œ70â€”99èŒƒå›´çš„å€¼ä¼šè¢«è½¬æ¢ä¸º1970â€”1999èŒƒå›´çš„YEARå€¼ã€‚ä¾‹ å¦‚ï¼Œè¾“äºº19æ’å…¥åˆ°æ•°æ®åº“ä¸­çš„å€¼ä¸º2019ã€‚<br><strong>è¯·æ³¨æ„ ï¼šå½“ä½¿ç”¨YEARç±»å‹æ—¶ï¼Œä¸€å®šè¦åŒºåˆ†â€™0â€™å’Œ0ã€‚å› ä¸ºå­—ç¬¦ä¸²æ ¼å¼çš„â€™0â€™è¡¨ç¤ºçš„YEARå€¼æ˜¯2000è€Œæ•°å­—æ ¼å¼çš„0è¡¨ç¤ºçš„YEARå€¼æ˜¯0000ã€‚</strong></p><h3 id="5-2-TIMEç±»å‹"><a href="#5-2-TIMEç±»å‹" class="headerlink" title="5.2 TIMEç±»å‹"></a>5.2 TIMEç±»å‹</h3><p>TIMEç±»å‹ç”¨äºè¡¨ç¤ºæ—¶é—´å€¼ï¼Œå®ƒçš„æ˜¾ç¤ºå½¢å¼ä¸€èˆ¬ä¸ºHH:MM:SSï¼Œå…¶ä¸­ï¼ŒHHè¡¨ç¤ºå°æ—¶ï¼Œ<br>MMè¡¨ç¤ºåˆ†,SSè¡¨ç¤ºç§’ã€‚åœ¨MySQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹3ç§æ ¼å¼æŒ‡å®šTIMEç±»å‹çš„å€¼ã€‚  </p><ol><li><p>ä»¥â€™D HH:MM:SSâ€™å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºã€‚å…¶ä¸­ï¼ŒDè¡¨ç¤ºæ—¥å¯å–0â€”34ä¹‹é—´çš„å€¼, æ’äººæ•°æ®æ—¶ï¼Œå°æ—¶çš„å€¼ç­‰äº(DX24+HH)ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥â€™2<br>11:30:50â€™æ’äººæ•°æ®åº“ä¸­çš„æ—¥æœŸä¸º59:30:50ã€‚  </p></li><li><p>ä»¥â€™HHMMSSâ€™å­—ç¬¦ä¸²æ ¼å¼æˆ–è€…HHMMSSæ•°å­—æ ¼å¼è¡¨ç¤ºã€‚ ä¾‹å¦‚ï¼Œè¾“äººâ€™115454â€™æˆ–115454,æ’å…¥æ•°æ®åº“ä¸­çš„æ—¥æœŸä¸º11:54:54  </p></li><li><p>ä½¿ç”¨CURRENT_TIMEæˆ–NOW()è¾“äººå½“å‰ç³»ç»Ÿæ—¶é—´ã€‚</p></li></ol><h3 id="5-3-DATETIMEç±»å‹"><a href="#5-3-DATETIMEç±»å‹" class="headerlink" title="5.3 DATETIMEç±»å‹"></a>5.3 DATETIMEç±»å‹</h3><p>DATETIMEç±»å‹ç”¨äºè¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´ï¼Œå®ƒçš„æ˜¾ç¤ºå½¢å¼ä¸ºâ€™YYYY-MM-DD HH:<br>MM:SSâ€™ï¼Œå…¶ä¸­ï¼ŒYYYYè¡¨ç¤ºå¹´ï¼ŒMMè¡¨ç¤ºæœˆï¼ŒDDè¡¨ç¤ºæ—¥ï¼ŒHHè¡¨ç¤ºå°æ—¶ï¼ŒMMè¡¨ç¤ºåˆ†ï¼ŒSS<br>è¡¨ç¤ºç§’ã€‚åœ¨MySQLä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹4ç§æ ¼å¼æŒ‡å®šDATETIMEç±»å‹çš„å€¼ã€‚<br>ï‚·ä»¥â€™YYYY-MM-DD HH:MM:SSâ€™æˆ–è€…â€™YYYYMMDDHHMMSSâ€™å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œå–å€¼èŒƒå›´ä¸ºâ€™1000-01-0100:00:00â€™â€”â€˜9999-12-3 23:59:59â€™ã€‚ä¾‹å¦‚ï¼Œè¾“äººâ€™2019-01-22 09:01:23â€™æˆ–<br>â€˜20140122_0_90123â€™æ’äººæ•°æ®åº“ä¸­çš„ DATETIME å€¼éƒ½ä¸º 2019-01-22 09:01:23ã€‚  </p><ol><li>ä»¥â€™YY-MM-DD<br>HH:MM:SSâ€™æˆ–è€…â€™YYMMDDHHMMSSâ€™å­—ç¬¦ä¸²æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸå’Œæ—¶é—´ï¼Œå…¶ä¸­YYè¡¨ç¤ºå¹´ï¼Œå–å€¼èŒƒå›´ä¸ºâ€™00â€™â€”â€˜99â€™ã€‚ä¸DATEç±»å‹ä¸­çš„YYç›¸åŒï¼Œâ€˜00â€™â€”<br>â€˜69â€™èŒƒå›´çš„å€¼ä¼šè¢«è½¬æ¢ä¸º2000â€”2069èŒƒå›´çš„å€¼ï¼Œâ€˜70â€™â€”â€˜99â€™èŒƒå›´çš„å€¼ä¼šè¢«è½¬æ¢ä¸º1970â€”1999èŒƒå›´çš„å€¼ã€‚  </li><li>ä»¥YYYYMMDDHHMMSSæˆ–è€…YYMMDDHHMMSSæ•°å­—æ ¼å¼è¡¨ç¤ºçš„æ—¥æœŸ<br>å’Œæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œæ’å…¥20190122090123æˆ–è€…190122090123,æ’äººæ•°æ®åº“ä¸­çš„DATETIMEå€¼éƒ½ ä¸º 2019-01-22 09:01:23ã€‚  </li><li>ä½¿ç”¨NOWæ¥è¾“äººå½“å‰ç³»ç»Ÿçš„æ—¥æœŸå’Œæ—¶é—´ã€‚</li></ol><h3 id="5-4-TIMESTAMPç±»å‹"><a href="#5-4-TIMESTAMPç±»å‹" class="headerlink" title="5.4 TIMESTAMPç±»å‹"></a>5.4 TIMESTAMPç±»å‹</h3><p>TIMESTAMPç±»å‹ç”¨äºè¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´ï¼Œå®ƒçš„æ˜¾ç¤ºå½¢å¼ä¸DATETIMEç›¸åŒä½†å–å€¼èŒƒå›´æ¯”DATETIMEå°ã€‚åœ¨æ­¤ï¼Œä»‹ç»å‡ ç§TIMESTAMPç±»å‹ä¸DATATIMEç±»å‹ä¸åŒçš„å½¢å¼ï¼š<br>1ã€ä½¿ç”¨CURRENT_TIMESTAMPè¾“äººç³»ç»Ÿå½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚<br>2ã€è¾“äººNULLæ—¶ç³»ç»Ÿä¼šè¾“äººç³»ç»Ÿå½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚<br>3ã€æ— ä»»ä½•è¾“äººæ—¶ç³»ç»Ÿä¼šè¾“å…¥ç³»ç»Ÿå½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚</p><h2 id="6-äºŒè¿›åˆ¶ç±»å‹"><a href="#6-äºŒè¿›åˆ¶ç±»å‹" class="headerlink" title="6.äºŒè¿›åˆ¶ç±»å‹"></a>6.äºŒè¿›åˆ¶ç±»å‹</h2><p>åœ¨MySQLä¸­å¸¸ç”¨BLOBå­˜å‚¨äºŒè¿›åˆ¶ç±»å‹çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼šå›¾ç‰‡ã€PDFæ–‡æ¡£ç­‰ã€‚BLOBç±»å‹åˆ†ä¸ºå¦‚ä¸‹å››ç§ï¼š</p><table><thead><tr><th>æ•°æ®ç±»å‹</th><th>å‚¨å­˜èŒƒå›´</th></tr></thead><tbody><tr><td>TINYBLOB</td><td>0~255å­—èŠ‚</td></tr><tr><td>BLOB</td><td>0~65535å­—èŠ‚</td></tr><tr><td>MEDIUMBLOB</td><td>0~16777215å­—èŠ‚</td></tr><tr><td>LONGBLOB</td><td>0~4294967295å­—èŠ‚</td></tr></tbody></table><h1 id="å››ã€æ•°æ®åº“ã€æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ"><a href="#å››ã€æ•°æ®åº“ã€æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="å››ã€æ•°æ®åº“ã€æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ"></a>å››ã€æ•°æ®åº“ã€æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ</h1><h2 id="1-æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ"><a href="#1-æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="1.æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ"></a>1.æ•°æ®åº“çš„åŸºæœ¬æ“ä½œ</h2><p>MySQLå®‰è£…å®Œæˆåï¼Œè¦æƒ³å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“çš„è¡¨ä¸­ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ã€‚åˆ› å»ºæ•°æ®åº“å°±æ˜¯åœ¨æ•°æ®åº“ç³»ç»Ÿä¸­åˆ’åˆ†ä¸€å—ç©ºé—´å­˜å‚¨æ•°æ®ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p><p>   <code> create database æ•°æ®åº“åç§°;</code></p><p>åˆ›å»ºä¸€ä¸ªå«db1çš„æ•°æ®åº“MySQLå‘½ä»¤ï¼š</p><p>â€‹    â€“ åˆ›å»ºä¸€ä¸ªå«db1çš„æ•°æ®åº“<br>â€‹   <code> show create database db1;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030312520741.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åˆ›å»ºæ•°æ®åº“åæŸ¥çœ‹è¯¥æ•°æ®åº“åŸºæœ¬ä¿¡æ¯MySQLå‘½ä»¤ï¼š</p><p>   <code> show create database db1;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303125330974.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åˆ é™¤æ•°æ®åº“MySQLå‘½ä»¤ï¼š</p><p>  <code>drop database db1;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303125647454.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢å‡ºMySQLä¸­æ‰€æœ‰çš„æ•°æ®åº“MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>show databases;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303125940965.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å°†æ•°æ®åº“çš„å­—ç¬¦é›†ä¿®æ”¹ä¸ºgbk MySQLå‘½ä»¤ï¼š</p><p>  <code>  alter database db1 character set gbk;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303130330527.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>åˆ‡æ¢æ•°æ®åº“ MySQLå‘½ä»¤ï¼š</p><p>  <code>  use db1;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303130451230.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select database();</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303130616683.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ"><a href="#2-æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ" class="headerlink" title="2.æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ"></a>2.æ•°æ®è¡¨çš„åŸºæœ¬æ“ä½œ</h2><p>æ•°æ®åº“åˆ›å»ºæˆåŠŸåå¯åœ¨è¯¥æ•°æ®åº“ä¸­åˆ›å»ºæ•°æ®è¡¨(ç®€ç§°ä¸ºè¡¨)å­˜å‚¨æ•°æ®ã€‚è¯·æ³¨æ„ï¼šåœ¨æ“ä½œæ•°æ®è¡¨ä¹‹å‰åº”ä½¿ç”¨â€œUSE<br>æ•°æ®åº“å;â€æŒ‡å®šæ“ä½œæ˜¯åœ¨å“ªä¸ªæ•°æ®åº“ä¸­è¿›è¡Œå…ˆå…³æ“ä½œï¼Œå¦åˆ™ä¼šæŠ›å‡ºâ€œNo database selectedâ€é”™è¯¯ã€‚<br>è¯­æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql"> create table è¡¨å(<br>         å­—æ®µ1 å­—æ®µç±»å‹,<br>         å­—æ®µ2 å­—æ®µç±»å‹,<br>         â€¦<br>         å­—æ®µn å­—æ®µç±»å‹<br>);<br></code></pre></td></tr></table></figure><h3 id="2-1-åˆ›å»ºæ•°æ®è¡¨"><a href="#2-1-åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="2.1 åˆ›å»ºæ•°æ®è¡¨"></a>2.1 åˆ›å»ºæ•°æ®è¡¨</h3><p>ç¤ºä¾‹ï¼šåˆ›å»ºå­¦ç”Ÿè¡¨ MySQLå‘½ä»¤ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student(<br>  id int,<br>   name varchar(20),<br>   gender varchar(10),<br>   birthday date<br>);<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303140044367.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="2-2-æŸ¥çœ‹æ•°æ®è¡¨"><a href="#2-2-æŸ¥çœ‹æ•°æ®è¡¨" class="headerlink" title="2.2 æŸ¥çœ‹æ•°æ®è¡¨"></a>2.2 æŸ¥çœ‹æ•°æ®è¡¨</h3><p>ç¤ºä¾‹ï¼šæŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>show tables;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303144745383.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç¤ºä¾‹ï¼šæŸ¥è¡¨çš„åŸºæœ¬ä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>show create table student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303144940575.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç¤ºä¾‹ï¼šæŸ¥çœ‹è¡¨çš„å­—æ®µä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>desc student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303145223522.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="2-3-ä¿®æ”¹æ•°æ®è¡¨"><a href="#2-3-ä¿®æ”¹æ•°æ®è¡¨" class="headerlink" title="2.3 ä¿®æ”¹æ•°æ®è¡¨"></a>2.3 ä¿®æ”¹æ•°æ®è¡¨</h3><p>æœ‰æ—¶ï¼Œå¸Œæœ›å¯¹è¡¨ä¸­çš„æŸäº›ä¿¡æ¯è¿›è¡Œä¿®æ”¹ï¼Œä¾‹å¦‚ï¼šä¿®æ”¹è¡¨åã€ä¿®æ”¹å­—æ®µåã€ä¿®æ”¹å­—æ®µ æ•°æ®ç±»å‹â€¦ç­‰ç­‰ã€‚åœ¨MySQLä¸­ä½¿ç”¨alter tableä¿®æ”¹æ•°æ®è¡¨.<br>ç¤ºä¾‹ï¼šä¿®æ”¹è¡¨å MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table student rename to stu;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303145645914.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç¤ºä¾‹ï¼šä¿®æ”¹å­—æ®µå MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table stu change name sname varchar(10);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303150127793.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç¤ºä¾‹ï¼šä¿®æ”¹å­—æ®µæ•°æ®ç±»å‹ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table stu modify sname int;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210303150426652.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç¤ºä¾‹ï¼šå¢åŠ å­—æ®µ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table stu add address varchar(50);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303150757176.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç¤ºä¾‹ï¼šåˆ é™¤å­—æ®µ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table stu drop address;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210303151816445.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTg1MTk0NQ==,size_16,color_FFFFFF,t_70" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="2-4-åˆ é™¤æ•°æ®è¡¨"><a href="#2-4-åˆ é™¤æ•°æ®è¡¨" class="headerlink" title="2.4 åˆ é™¤æ•°æ®è¡¨"></a>2.4 åˆ é™¤æ•°æ®è¡¨</h3><p>è¯­æ³•ï¼š</p><p>â€‹    <code>drop table è¡¨å;</code></p><p>ç¤ºä¾‹ï¼šåˆ é™¤æ•°æ®è¡¨ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>drop table stu;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š</p><p><img src="https://img-blog.csdnimg.cn/20210303152039101.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="äº”ã€æ•°æ®è¡¨çš„çº¦æŸ"><a href="#äº”ã€æ•°æ®è¡¨çš„çº¦æŸ" class="headerlink" title="äº”ã€æ•°æ®è¡¨çš„çº¦æŸ"></a>äº”ã€æ•°æ®è¡¨çš„çº¦æŸ</h1><p>ä¸ºé˜²æ­¢é”™è¯¯çš„æ•°æ®è¢«æ’å…¥åˆ°æ•°æ®è¡¨ï¼ŒMySQLä¸­å®šä¹‰äº†ä¸€äº›ç»´æŠ¤æ•°æ®åº“å®Œæ•´æ€§çš„è§„åˆ™ï¼›è¿™äº›è§„åˆ™å¸¸ç§°ä¸ºè¡¨çš„çº¦æŸã€‚å¸¸è§çº¦æŸå¦‚ä¸‹ï¼š</p><table><thead><tr><th>çº¦æŸæ¡ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>PRIMARY KEY</td><td>ä¸»é”®çº¦æŸç”¨äºå”¯ä¸€æ ‡è¯†å¯¹åº”çš„è®°å½•</td></tr><tr><td>FOREIGN KEY</td><td>å¤–é”®çº¦æŸ</td></tr><tr><td>NOT NULL</td><td>éç©ºçº¦æŸ</td></tr><tr><td>UNIQUE</td><td>å”¯ä¸€æ€§çº¦æŸ</td></tr><tr><td>DEFAULT</td><td>é»˜è®¤å€¼çº¦æŸï¼Œç”¨äºè®¾ç½®å­—æ®µçš„é»˜è®¤å€¼</td></tr></tbody></table><p>ä»¥ä¸Šäº”ç§çº¦æŸæ¡ä»¶é’ˆå¯¹è¡¨ä¸­å­—æ®µè¿›è¡Œé™åˆ¶ä»è€Œä¿è¯æ•°æ®è¡¨ä¸­æ•°æ®çš„æ­£ç¡®æ€§å’Œå”¯ä¸€æ€§ã€‚æ¢å¥è¯è¯´ï¼Œè¡¨çš„çº¦æŸå®é™…ä¸Šå°±æ˜¯è¡¨ä¸­æ•°æ®çš„é™åˆ¶æ¡ä»¶ã€‚</p><h2 id="1-ä¸»é”®çº¦æŸ"><a href="#1-ä¸»é”®çº¦æŸ" class="headerlink" title="1.ä¸»é”®çº¦æŸ"></a>1.ä¸»é”®çº¦æŸ</h2><p>ä¸»é”®çº¦æŸå³primary<br>keyç”¨äºå”¯ä¸€çš„æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚è¢«æ ‡è¯†ä¸ºä¸»é”®çš„æ•°æ®åœ¨è¡¨ä¸­æ˜¯å”¯ä¸€çš„ä¸”å…¶å€¼ä¸èƒ½ä¸ºç©ºã€‚è¿™ç‚¹ç±»ä¼¼äºæˆ‘ä»¬æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªèº«ä»½è¯å·ï¼Œå¹¶ä¸”è¿™ä¸ªèº«ä»½è¯å·æ˜¯å”¯ä¸€çš„ã€‚<br>ä¸»é”®çº¦æŸåŸºæœ¬è¯­æ³•ï¼š</p><p>â€‹    <code>å­—æ®µå æ•°æ®ç±»å‹ primary key;</code></p><p><strong>è®¾ç½®ä¸»é”®çº¦æŸ(primary key)çš„ç¬¬ä¸€ç§æ–¹å¼</strong><br>ç¤ºä¾‹ï¼šMySQLå‘½ä»¤ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student(<br>id int primary key,<br>name varchar(20)<br>);<br><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303161028430.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>è®¾ç½®ä¸»é”®çº¦æŸ(primary key)çš„ç¬¬äºŒÂ·ç§æ–¹å¼</strong><br>ç¤ºä¾‹ï¼šMySQLå‘½ä»¤ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student01(<br>id int<br>name varchar(20),<br>primary key(id)<br>);<br><br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303173104926.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-éç©ºçº¦æŸ"><a href="#2-éç©ºçº¦æŸ" class="headerlink" title="2.éç©ºçº¦æŸ"></a>2.éç©ºçº¦æŸ</h2><p>éç©ºçº¦æŸå³ NOT NULLæŒ‡çš„æ˜¯å­—æ®µçš„å€¼ä¸èƒ½ä¸ºç©ºï¼ŒåŸºæœ¬çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>â€‹<br>â€‹    å­—æ®µå æ•°æ®ç±»å‹ NOT NULL;</p><p>ç¤ºä¾‹ï¼šMySQLå‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student02(<br>id int<br>name varchar(20) not null<br>);<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030317340097.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-é»˜è®¤å€¼çº¦æŸ"><a href="#3-é»˜è®¤å€¼çº¦æŸ" class="headerlink" title="3.é»˜è®¤å€¼çº¦æŸ"></a>3.é»˜è®¤å€¼çº¦æŸ</h2><p>é»˜è®¤å€¼çº¦æŸå³DEFAULTç”¨äºç»™æ•°æ®è¡¨ä¸­çš„å­—æ®µæŒ‡å®šé»˜è®¤å€¼ï¼Œå³å½“åœ¨è¡¨ä¸­æ’å…¥ä¸€æ¡æ–°è®°å½•æ—¶è‹¥æœªç»™è¯¥å­—æ®µèµ‹å€¼ï¼Œé‚£ä¹ˆï¼Œæ•°æ®åº“ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºè¿™ä¸ªå­—æ®µæ’äººé»˜è®¤å€¼ï¼›å…¶åŸºæœ¬çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>â€‹<br>â€‹    å­—æ®µå æ•°æ®ç±»å‹ DEFAULT é»˜è®¤å€¼ï¼›</p><p>ç¤ºä¾‹ï¼šMySQLå‘½ä»¤ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student03(<br>id int,<br>name varchar(20),<br>gender varchar(10) default &#x27;male&#x27;<br>)<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303173835546.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="5-å”¯ä¸€æ€§çº¦æŸ"><a href="#5-å”¯ä¸€æ€§çº¦æŸ" class="headerlink" title="5.å”¯ä¸€æ€§çº¦æŸ"></a>5.å”¯ä¸€æ€§çº¦æŸ</h2><p>å”¯ä¸€æ€§çº¦æŸå³UNIQUEç”¨äºä¿è¯æ•°æ®è¡¨ä¸­å­—æ®µçš„å”¯ä¸€æ€§ï¼Œå³è¡¨ä¸­å­—æ®µçš„å€¼ä¸èƒ½é‡å¤å‡ºç°ï¼Œå…¶åŸºæœ¬çš„è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>â€‹    <code>å­—æ®µå æ•°æ®ç±»å‹ UNIQUE;</code></p><p>ç¤ºä¾‹ï¼šMySQLå‘½ä»¤ï¼š</p><p>â€‹    </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student04(<br>  id int,<br>   name varchar(20) unique<br>   );<br></code></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303174216204.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="6-å¤–é”®çº¦æŸ"><a href="#6-å¤–é”®çº¦æŸ" class="headerlink" title="6.å¤–é”®çº¦æŸ"></a>6.å¤–é”®çº¦æŸ</h2><p>å¤–é”®çº¦æŸå³FOREIGN KEYå¸¸ç”¨äºå¤šå¼ è¡¨ä¹‹é—´çš„çº¦æŸã€‚åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p><p>â€‹<br>â€‹    â€“ åœ¨åˆ›å»ºæ•°æ®è¡¨æ—¶è¯­æ³•å¦‚ä¸‹ï¼š<br>â€‹    CONSTRAINT å¤–é”®å FOREIGN KEY (ä»è¡¨å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨ (ä¸»é”®å­—æ®µ)<br>â€‹    â€“ å°†åˆ›å»ºæ•°æ®è¡¨åˆ›å·åè¯­æ³•å¦‚ä¸‹ï¼š<br>â€‹    ALTER TABLE ä»è¡¨å ADD CONSTRAINT å¤–é”®å FOREIGN KEY (ä»è¡¨å¤–é”®å­—æ®µ) REFERENCES ä¸»è¡¨ (ä¸»é”®å­—æ®µ);</p><p>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªå­¦ç”Ÿè¡¨ MySQLå‘½ä»¤ï¼š</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student05(<br>id int primary key,<br>name varchar(20)<br>);<br><br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šåˆ›å»ºä¸€ä¸ªç­çº§è¡¨ MySQLå‘½ä»¤ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table class(<br>classid int primary key,<br>studentid int<br>);<br><br></code></pre></td></tr></table></figure><p>ç¤ºä¾‹ï¼šå­¦ç”Ÿè¡¨ä½œä¸ºä¸»è¡¨ï¼Œç­çº§è¡¨ä½œä¸ºå‰¯è¡¨è®¾ç½®å¤–é”®ï¼Œ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table class add constraint fk_class_studentid foreign key(studentid) references student05(id);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303180124470.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="6-1-æ•°æ®ä¸€è‡´æ€§æ¦‚å¿µ"><a href="#6-1-æ•°æ®ä¸€è‡´æ€§æ¦‚å¿µ" class="headerlink" title="6.1 æ•°æ®ä¸€è‡´æ€§æ¦‚å¿µ"></a>6.1 æ•°æ®ä¸€è‡´æ€§æ¦‚å¿µ</h3><p>å¤§å®¶çŸ¥é“ï¼šå»ºç«‹å¤–é”®æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´å’Œç»Ÿä¸€æ€§ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸»è¡¨ä¸­çš„æ•°æ®è¢«åˆ é™¤æˆ–ä¿®æ”¹ä»è¡¨ä¸­å¯¹åº”çš„æ•°æ®è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¾ˆæ˜æ˜¾ï¼Œä»è¡¨ä¸­å¯¹åº”çš„æ•°æ®ä¹Ÿåº”è¯¥è¢«åˆ é™¤ï¼Œå¦åˆ™æ•°æ®åº“ä¸­ä¼šå­˜åœ¨å¾ˆå¤šæ— æ„ä¹‰çš„åƒåœ¾æ•°æ®ã€‚</p><h3 id="6-2-åˆ é™¤å¤–é”®"><a href="#6-2-åˆ é™¤å¤–é”®" class="headerlink" title="6.2 åˆ é™¤å¤–é”®"></a>6.2 åˆ é™¤å¤–é”®</h3><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><p>â€‹    <code>alter table ä»è¡¨å drop foreign key å¤–é”®åï¼›</code></p><p>ç¤ºä¾‹ï¼šåˆ é™¤å¤–é”® MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>alter table class drop foreign key fk_class_studentid;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303180554954.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å¤–é”®çš„é‚£ä¸ªå­—æ®µä¸åœ¨äº†è¯æ˜åˆ é™¤æˆåŠŸäº†</p><h3 id="6-3-å…³äºå¤–é”®çº¦æŸéœ€è¦æ³¨æ„çš„ç»†èŠ‚"><a href="#6-3-å…³äºå¤–é”®çº¦æŸéœ€è¦æ³¨æ„çš„ç»†èŠ‚" class="headerlink" title="6.3 å…³äºå¤–é”®çº¦æŸéœ€è¦æ³¨æ„çš„ç»†èŠ‚"></a>6.3 å…³äºå¤–é”®çº¦æŸéœ€è¦æ³¨æ„çš„ç»†èŠ‚</h3><p>1ã€ä»è¡¨é‡Œçš„å¤–é”®é€šå¸¸ä¸ºä¸»è¡¨çš„ä¸»é”®<br>2ã€ä»è¡¨é‡Œå¤–é”®çš„æ•°æ®ç±»å‹å¿…é¡»ä¸ä¸»è¡¨ä¸­ä¸»é”®çš„æ•°æ®ç±»å‹ä¸€è‡´<br>3ã€ä¸»è¡¨å‘ç”Ÿå˜åŒ–æ—¶åº”æ³¨æ„ä¸»è¡¨ä¸ä»è¡¨çš„æ•°æ®ä¸€è‡´æ€§é—®é¢˜</p><h1 id="å…­ã€æ•°æ®è¡¨æ’å…¥æ•°æ®"><a href="#å…­ã€æ•°æ®è¡¨æ’å…¥æ•°æ®" class="headerlink" title="å…­ã€æ•°æ®è¡¨æ’å…¥æ•°æ®"></a>å…­ã€æ•°æ®è¡¨æ’å…¥æ•°æ®</h1><p>åœ¨MySQLé€šè¿‡INSERTè¯­å¥å‘æ•°æ®è¡¨ä¸­æ’å…¥æ•°æ®ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€å¼ å­¦ç”Ÿè¡¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">create table student(<br>id int,<br>name varchar(30),<br>age int,<br>gender varchar(30)<br>);<br><br></code></pre></td></tr></table></figure><h2 id="1-ä¸ºè¡¨ä¸­æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®"><a href="#1-ä¸ºè¡¨ä¸­æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®" class="headerlink" title="1. ä¸ºè¡¨ä¸­æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®"></a>1. ä¸ºè¡¨ä¸­æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®</h2><p>æ¯ä¸ªå­—æ®µä¸å…¶å€¼æ˜¯ä¸¥æ ¼ä¸€ä¸€å¯¹åº”çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼šæ¯ä¸ªå€¼ã€å€¼çš„é¡ºåºã€å€¼çš„ç±»å‹å¿…é¡»ä¸å¯¹åº”çš„å­—æ®µç›¸åŒ¹é…ã€‚ä½†æ˜¯ï¼Œå„å­—æ®µä¹Ÿæ— é¡»ä¸å…¶åœ¨è¡¨ä¸­å®šä¹‰çš„é¡ºåºä¸€è‡´ï¼Œå®ƒä»¬åªè¦ä¸<br>VALUESä¸­å€¼çš„é¡ºåºä¸€è‡´å³å¯ã€‚<br>è¯­æ³•å¦‚ä¸‹ï¼š</p><p>â€‹    <code>INSERT INTO è¡¨åï¼ˆå­—æ®µå1,å­—æ®µå2,...) VALUES (å€¼ 1,å€¼ 2,...);</code></p><p>ç¤ºä¾‹ï¼šå‘å­¦ç”Ÿè¡¨ä¸­æ’å…¥ä¸€æ¡å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>insert into student (id,name,age,gender) values (1,&#39;bob&#39;,16,&#39;male&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/2021030318190944.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-ä¸ºè¡¨ä¸­æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®"><a href="#2-ä¸ºè¡¨ä¸­æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®" class="headerlink" title="2. ä¸ºè¡¨ä¸­æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®"></a>2. ä¸ºè¡¨ä¸­æŒ‡å®šå­—æ®µæ’å…¥æ•°æ®</h2><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><p>â€‹    <code>INSERT INTO è¡¨åï¼ˆå­—æ®µå1,å­—æ®µå2,...) VALUES (å€¼ 1,å€¼ 2,...);</code></p><p>æ’å…¥æ•°æ®çš„æ–¹æ³•åŸºæœ¬å’Œä¸ºè¡¨ä¸­æ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®ï¼Œä¸€æ ·ï¼Œåªæ˜¯éœ€è¦æ’å…¥çš„å­—æ®µç”±ä½ è‡ªå·±æŒ‡å®š</p><h2 id="3-åŒæ—¶æ’å…¥å¤šæ¡è®°å½•"><a href="#3-åŒæ—¶æ’å…¥å¤šæ¡è®°å½•" class="headerlink" title="3. åŒæ—¶æ’å…¥å¤šæ¡è®°å½•"></a>3. åŒæ—¶æ’å…¥å¤šæ¡è®°å½•</h2><p>è¯­æ³•å¦‚ä¸‹ï¼š</p><p><strong>â€‹    INSERT INTO è¡¨å [(å­—æ®µå1,å­—æ®µå2,â€¦)]VALUES (å€¼ 1,å€¼ 2,â€¦),(å€¼ 1,å€¼ 2,â€¦),â€¦;</strong></p><p>åœ¨è¯¥æ–¹å¼ä¸­ï¼š(å­—æ®µå1,å­—æ®µå2,â€¦)æ˜¯å¯é€‰çš„ï¼Œå®ƒç”¨äºæŒ‡å®šæ’äººçš„å­—æ®µåï¼›(å€¼ 1,å€¼ 2,â€¦),(å€¼ 1,å€¼<br>2,â€¦)è¡¨ç¤ºè¦æ’äººçš„è®°å½•ï¼Œè¯¥è®°å½•å¯æœ‰å¤šæ¡å¹¶ä¸”æ¯æ¡è®°å½•ä¹‹é—´ç”¨é€—å·éš”å¼€ã€‚<br>ç¤ºä¾‹ï¼šå‘å­¦ç”Ÿè¡¨ä¸­æ’å…¥å¤šæ¡å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>insert into student (id,name,age,gender) values (2,&#39;lucy&#39;,17,&#39;female&#39;),(3,&#39;jack&#39;,19,&#39;male&#39;),(4,&#39;tom&#39;,18,&#39;male&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303182837401.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="ä¸ƒã€æ›´æ–°æ•°æ®"><a href="#ä¸ƒã€æ›´æ–°æ•°æ®" class="headerlink" title="ä¸ƒã€æ›´æ–°æ•°æ®"></a>ä¸ƒã€æ›´æ–°æ•°æ®</h1><p>åœ¨MySQLé€šè¿‡UPDATEè¯­å¥æ›´æ–°æ•°æ®è¡¨ä¸­çš„æ•°æ®ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å°†å°±ç”¨å…­ä¸­çš„studentå­¦ç”Ÿè¡¨</p><h2 id="1-UPDATEåŸºæœ¬è¯­æ³•"><a href="#1-UPDATEåŸºæœ¬è¯­æ³•" class="headerlink" title="1. UPDATEåŸºæœ¬è¯­æ³•"></a>1. UPDATEåŸºæœ¬è¯­æ³•</h2><p>â€‹    <strong>UPDATE è¡¨å SET å­—æ®µå1&#x3D;å€¼1[,å­—æ®µå2 &#x3D;å€¼2,â€¦] [WHERE æ¡ä»¶è¡¨è¾¾å¼];</strong></p><p>åœ¨è¯¥è¯­æ³•ä¸­ï¼šå­—æ®µå1ã€å­—æ®µå2â€¦ç”¨äºæŒ‡å®šè¦æ›´æ–°çš„å­—æ®µåç§°ï¼›å€¼1ã€å€¼ 2â€¦ç”¨äºè¡¨ç¤ºå­—æ®µçš„æ–°æ•°æ®ï¼›WHERE æ¡ä»¶è¡¨è¾¾å¼<br>æ˜¯å¯é€‰çš„ï¼Œå®ƒç”¨äºæŒ‡å®šæ›´æ–°æ•°æ®éœ€è¦æ»¡è¶³çš„æ¡ä»¶</p><h2 id="2-UPDATEæ›´æ–°éƒ¨åˆ†æ•°æ®"><a href="#2-UPDATEæ›´æ–°éƒ¨åˆ†æ•°æ®" class="headerlink" title="2. UPDATEæ›´æ–°éƒ¨åˆ†æ•°æ®"></a>2. UPDATEæ›´æ–°éƒ¨åˆ†æ•°æ®</h2><p>ç¤ºä¾‹ï¼šå°†nameä¸ºtomçš„è®°å½•çš„ageè®¾ç½®ä¸º20å¹¶å°†å…¶genderè®¾ç½®ä¸ºfemale MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>update student set age=20,gender=&#39;female&#39; where name=&#39;tom&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030318372031.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-UPDATEæ›´æ–°å…¨éƒ¨æ•°æ®"><a href="#3-UPDATEæ›´æ–°å…¨éƒ¨æ•°æ®" class="headerlink" title="3. UPDATEæ›´æ–°å…¨éƒ¨æ•°æ®"></a>3. UPDATEæ›´æ–°å…¨éƒ¨æ•°æ®</h2><p>ç¤ºä¾‹ï¼šå°†æ‰€æœ‰è®°å½•çš„ageè®¾ç½®ä¸º18 MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>update student set age=18;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030318401177.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="å…«ã€åˆ é™¤æ•°æ®"><a href="#å…«ã€åˆ é™¤æ•°æ®" class="headerlink" title="å…«ã€åˆ é™¤æ•°æ®"></a>å…«ã€åˆ é™¤æ•°æ®</h1><p>åœ¨MySQLé€šè¿‡DELETEè¯­å¥åˆ é™¤æ•°æ®è¡¨ä¸­çš„æ•°æ®ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬å…ˆå‡†å¤‡ä¸€å¼ æ•°æ®è¡¨ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºå­¦ç”Ÿè¡¨<br> create table student(<br> id int,<br> name varchar(30),<br> age int,<br> gender varchar(30)<br> );<br> -- æ’å…¥æ•°æ®<br> insert into student (id,name,age,gender) values (2,&#x27;lucy&#x27;,17,&#x27;female&#x27;),(3,&#x27;jack&#x27;,19,&#x27;male&#x27;),(4,&#x27;tom&#x27;,18,&#x27;male&#x27;),(5,&#x27;sal&#x27;,19,&#x27;female&#x27;),(6,&#x27;sun&#x27;,20,&#x27;male&#x27;)<br>,(7,&#x27;sad&#x27;,13,&#x27;female&#x27;),(8,&#x27;sam&#x27;,14,&#x27;male&#x27;);<br><br></code></pre></td></tr></table></figure><h2 id="1-DELETEåŸºæœ¬è¯­æ³•"><a href="#1-DELETEåŸºæœ¬è¯­æ³•" class="headerlink" title="1. DELETEåŸºæœ¬è¯­æ³•"></a>1. DELETEåŸºæœ¬è¯­æ³•</h2><p>åœ¨è¯¥è¯­æ³•ä¸­ï¼šè¡¨åç”¨äºæŒ‡å®šè¦æ‰§è¡Œåˆ é™¤æ“ä½œçš„è¡¨ï¼›[WHERE æ¡ä»¶è¡¨è¾¾å¼]ä¸ºå¯é€‰å‚æ•°ç”¨äºæŒ‡å®šåˆ é™¤çš„æ¡ä»¶ã€‚</p><p>â€‹    <strong>DELETE FROM è¡¨å [WHERE æ¡ä»¶è¡¨è¾¾å¼];</strong></p><h2 id="2-DELETEåˆ é™¤éƒ¨åˆ†æ•°æ®"><a href="#2-DELETEåˆ é™¤éƒ¨åˆ†æ•°æ®" class="headerlink" title="2. DELETEåˆ é™¤éƒ¨åˆ†æ•°æ®"></a>2. DELETEåˆ é™¤éƒ¨åˆ†æ•°æ®</h2><p>ç¤ºä¾‹ï¼šåˆ é™¤ageç­‰äº14çš„æ‰€æœ‰è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>delete from student where age=14;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303185050926.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-DELETEåˆ é™¤å…¨éƒ¨æ•°æ®"><a href="#3-DELETEåˆ é™¤å…¨éƒ¨æ•°æ®" class="headerlink" title="3. DELETEåˆ é™¤å…¨éƒ¨æ•°æ®"></a>3. DELETEåˆ é™¤å…¨éƒ¨æ•°æ®</h2><p>ç¤ºä¾‹ï¼šåˆ é™¤studentè¡¨ä¸­çš„æ‰€æœ‰è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>delete from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303185424760.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="4-TRUNCATEå’ŒDETELEçš„åŒºåˆ«"><a href="#4-TRUNCATEå’ŒDETELEçš„åŒºåˆ«" class="headerlink" title="4. TRUNCATEå’ŒDETELEçš„åŒºåˆ«"></a>4. TRUNCATEå’ŒDETELEçš„åŒºåˆ«</h2><p>TRUNCATEå’ŒDETELEéƒ½èƒ½å®ç°åˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®çš„åŠŸèƒ½ï¼Œä½†ä¸¤è€…ä¹Ÿæ˜¯æœ‰åŒºåˆ«çš„ï¼š  </p><ol><li>DELETEè¯­å¥åå¯è·ŸWHEREå­å¥ï¼Œå¯é€šè¿‡æŒ‡å®šWHEREå­å¥ä¸­çš„æ¡ä»¶è¡¨è¾¾å¼åªåˆ é™¤æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†è®°å½•ï¼›ä½†æ˜¯ï¼ŒTRUNCATEè¯­å¥åªèƒ½ç”¨äºåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ã€‚  </li><li>ä½¿ç”¨TRUNCATEè¯­å¥åˆ é™¤è¡¨ä¸­çš„æ•°æ®åï¼Œå†æ¬¡å‘è¡¨ä¸­æ·»åŠ è®°å½•æ—¶è‡ªåŠ¨å¢åŠ å­—æ®µçš„é»˜è®¤åˆå§‹å€¼é‡æ–°ç”±1å¼€å§‹ï¼›ä½¿ç”¨DELETEè¯­å¥åˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•åï¼Œå†æ¬¡å‘è¡¨ä¸­æ·»åŠ è®°å½•æ—¶è‡ªåŠ¨å¢åŠ å­—æ®µçš„å€¼ä¸ºåˆ é™¤æ—¶è¯¥å­—æ®µçš„æœ€å¤§å€¼åŠ 1</li><li>DELETEè¯­å¥æ˜¯DMLè¯­å¥ï¼ŒTRUNCATEè¯­å¥é€šå¸¸è¢«è®¤ä¸ºæ˜¯DDLè¯­å¥</li></ol><h1 id="ä¹ã€MySQLæ•°æ®è¡¨ç®€å•æŸ¥è¯¢"><a href="#ä¹ã€MySQLæ•°æ®è¡¨ç®€å•æŸ¥è¯¢" class="headerlink" title="ä¹ã€MySQLæ•°æ®è¡¨ç®€å•æŸ¥è¯¢"></a>ä¹ã€MySQLæ•°æ®è¡¨ç®€å•æŸ¥è¯¢</h1><h2 id="1-ç®€å•æŸ¥è¯¢æ¦‚è¿°"><a href="#1-ç®€å•æŸ¥è¯¢æ¦‚è¿°" class="headerlink" title="1.ç®€å•æŸ¥è¯¢æ¦‚è¿°"></a>1.ç®€å•æŸ¥è¯¢æ¦‚è¿°</h2><p>ç®€å•æŸ¥è¯¢å³ä¸å«whereçš„selectè¯­å¥ã€‚åœ¨æ­¤ï¼Œæˆ‘ä»¬è®²è§£ç®€å•æŸ¥è¯¢ä¸­æœ€å¸¸ç”¨çš„ä¸¤ç§æŸ¥è¯¢ï¼šæŸ¥è¯¢æ‰€æœ‰å­—æ®µå’ŒæŸ¥è¯¢æŒ‡å®šå­—æ®µã€‚<br>åœ¨æ­¤ï¼Œå…ˆå‡†å¤‡æµ‹è¯•æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºæ•°æ®åº“<br>DROP DATABASE IF EXISTS mydb;<br>CREATE DATABASE mydb;<br>USE mydb;<br><br>-- åˆ›å»ºstudentè¡¨<br>CREATE TABLE student (<br>    sid CHAR(6),<br>    sname VARCHAR(50),<br>    age INT,<br>    gender VARCHAR(50) DEFAULT &#x27;male&#x27;<br>);<br><br>-- å‘studentè¡¨æ’å…¥æ•°æ®<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1001&#x27;, &#x27;lili&#x27;, 14, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1002&#x27;, &#x27;wang&#x27;, 15, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1003&#x27;, &#x27;tywd&#x27;, 16, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1004&#x27;, &#x27;hfgs&#x27;, 17, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1005&#x27;, &#x27;qwer&#x27;, 18, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1006&#x27;, &#x27;zxsd&#x27;, 19, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1007&#x27;, &#x27;hjop&#x27;, 16, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1008&#x27;, &#x27;tyop&#x27;, 15, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1009&#x27;, &#x27;nhmk&#x27;, 13, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1010&#x27;, &#x27;xdfv&#x27;, 17, &#x27;female&#x27;);<br><br></code></pre></td></tr></table></figure><h2 id="2-æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆæ–¹æ³•ä¸å”¯ä¸€åªæ˜¯ä¸¾ä¾‹ï¼‰"><a href="#2-æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆæ–¹æ³•ä¸å”¯ä¸€åªæ˜¯ä¸¾ä¾‹ï¼‰" class="headerlink" title="2.æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆæ–¹æ³•ä¸å”¯ä¸€åªæ˜¯ä¸¾ä¾‹ï¼‰"></a>2.æŸ¥è¯¢æ‰€æœ‰å­—æ®µï¼ˆæ–¹æ³•ä¸å”¯ä¸€åªæ˜¯ä¸¾ä¾‹ï¼‰</h2><p>æŸ¥è¯¢æ‰€æœ‰å­—æ®µ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302183927761.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆsidã€snameï¼‰"><a href="#3-æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆsidã€snameï¼‰" class="headerlink" title="3.æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆsidã€snameï¼‰"></a>3.æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆsidã€snameï¼‰</h2><p>æŸ¥è¯¢æŒ‡å®šå­—æ®µï¼ˆsidã€snameï¼‰ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select sid,sname from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302184506628.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="4-å¸¸æ•°çš„æŸ¥è¯¢"><a href="#4-å¸¸æ•°çš„æŸ¥è¯¢" class="headerlink" title="4.å¸¸æ•°çš„æŸ¥è¯¢"></a>4.å¸¸æ•°çš„æŸ¥è¯¢</h2><p>åœ¨SELECTä¸­é™¤äº†ä¹¦å†™åˆ—åï¼Œè¿˜å¯ä»¥ä¹¦å†™å¸¸æ•°ã€‚å¯ä»¥ç”¨äºæ ‡è®°<br>å¸¸æ•°çš„æŸ¥è¯¢æ—¥æœŸæ ‡è®° MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select sid,sname,&#39;2021-03-02&#39; from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302185049215.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="5-ä»æŸ¥è¯¢ç»“æœä¸­è¿‡æ»¤é‡å¤æ•°æ®"><a href="#5-ä»æŸ¥è¯¢ç»“æœä¸­è¿‡æ»¤é‡å¤æ•°æ®" class="headerlink" title="5.ä»æŸ¥è¯¢ç»“æœä¸­è¿‡æ»¤é‡å¤æ•°æ®"></a>5.ä»æŸ¥è¯¢ç»“æœä¸­è¿‡æ»¤é‡å¤æ•°æ®</h2><p>åœ¨ä½¿ç”¨DISTINCT æ—¶éœ€è¦æ³¨æ„ï¼š<br><strong>åœ¨SELECTæŸ¥è¯¢è¯­å¥ä¸­DISTINCTå…³é”®å­—åªèƒ½ç”¨åœ¨ç¬¬ä¸€ä¸ªæ‰€æŸ¥åˆ—åä¹‹å‰ã€‚</strong><br>MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select distinct gender from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302185517964.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="6-ç®—æœ¯è¿ç®—ç¬¦ï¼ˆä¸¾ä¾‹åŠ è¿ç®—ç¬¦ï¼‰"><a href="#6-ç®—æœ¯è¿ç®—ç¬¦ï¼ˆä¸¾ä¾‹åŠ è¿ç®—ç¬¦ï¼‰" class="headerlink" title="6.ç®—æœ¯è¿ç®—ç¬¦ï¼ˆä¸¾ä¾‹åŠ è¿ç®—ç¬¦ï¼‰"></a>6.ç®—æœ¯è¿ç®—ç¬¦ï¼ˆä¸¾ä¾‹åŠ è¿ç®—ç¬¦ï¼‰</h2><p>åœ¨SELECTæŸ¥è¯¢è¯­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨åŠ å‡ä¹˜é™¤è¿ç®—ç¬¦ã€‚<br>æŸ¥è¯¢å­¦ç”Ÿ10å¹´åçš„å¹´é¾„ MySQLå‘½ä»¤ï¼š</p><p>â€‹     <code>select sname,age+10 from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302185922370.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="åã€å‡½æ•°"><a href="#åã€å‡½æ•°" class="headerlink" title="åã€å‡½æ•°"></a>åã€å‡½æ•°</h1><p>åœ¨æ­¤ï¼Œå…ˆå‡†å¤‡æµ‹è¯•æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºæ•°æ®åº“<br>DROP DATABASE IF EXISTS mydb;<br>CREATE DATABASE mydb;<br>USE mydb;<br><br>-- åˆ›å»ºstudentè¡¨<br>CREATE TABLE student (<br>    sid CHAR(6),<br>    sname VARCHAR(50),<br>    age INT,<br>    gender VARCHAR(50) DEFAULT &#x27;male&#x27;<br>);<br><br>-- å‘studentè¡¨æ’å…¥æ•°æ®<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1001&#x27;, &#x27;lili&#x27;, 14, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1002&#x27;, &#x27;wang&#x27;, 15, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1003&#x27;, &#x27;tywd&#x27;, 16, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1004&#x27;, &#x27;hfgs&#x27;, 17, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1005&#x27;, &#x27;qwer&#x27;, 18, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1006&#x27;, &#x27;zxsd&#x27;, 19, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1007&#x27;, &#x27;hjop&#x27;, 16, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1008&#x27;, &#x27;tyop&#x27;, 15, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1009&#x27;, &#x27;nhmk&#x27;, 13, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1010&#x27;, &#x27;xdfv&#x27;, 17, &#x27;female&#x27;);<br><br></code></pre></td></tr></table></figure><h2 id="1-èšåˆå‡½æ•°"><a href="#1-èšåˆå‡½æ•°" class="headerlink" title="1.èšåˆå‡½æ•°"></a>1.èšåˆå‡½æ•°</h2><p>åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸æœ‰ç±»ä¼¼çš„éœ€æ±‚ï¼šç»Ÿè®¡æŸä¸ªå­—æ®µçš„æœ€å¤§å€¼ã€æœ€å°å€¼ã€<br>å¹³å‡å€¼ç­‰ç­‰ã€‚ä¸ºæ­¤ï¼ŒMySQLä¸­æä¾›äº†èšåˆå‡½æ•°æ¥å®ç°è¿™äº›åŠŸèƒ½ã€‚æ‰€è°“èšåˆï¼Œå°±æ˜¯å°†å¤šè¡Œæ±‡æ€»æˆä¸€è¡Œï¼›å…¶å®ï¼Œæ‰€æœ‰çš„èšåˆå‡½æ•°å‡å¦‚æ­¤â€”â€”è¾“å…¥å¤šè¡Œï¼Œè¾“å‡ºä¸€è¡Œã€‚èšåˆå‡½æ•°å…·æœ‰è‡ªåŠ¨æ»¤ç©ºçš„åŠŸèƒ½ï¼Œè‹¥æŸä¸€ä¸ªå€¼ä¸ºNULLï¼Œé‚£ä¹ˆä¼šè‡ªåŠ¨å°†å…¶è¿‡æ»¤ä½¿å…¶ä¸å‚ä¸è¿ç®—ã€‚<br><strong>èšåˆå‡½æ•°ä½¿ç”¨è§„åˆ™ ï¼š</strong><br>åªæœ‰SELECTå­å¥å’ŒHAVINGå­å¥ã€ORDER BYå­å¥ä¸­èƒ½å¤Ÿä½¿ç”¨èšåˆå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œåœ¨WHEREå­å¥ä¸­ä½¿ç”¨èšåˆå‡½æ•°æ˜¯é”™è¯¯çš„ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å­¦ä¹ å¸¸ç”¨èšåˆå‡½æ•°ã€‚</p><h3 id="1-1ã€countï¼ˆï¼‰"><a href="#1-1ã€countï¼ˆï¼‰" class="headerlink" title="1.1ã€countï¼ˆï¼‰"></a>1.1ã€countï¼ˆï¼‰</h3><p>ç»Ÿè®¡è¡¨ä¸­æ•°æ®çš„è¡Œæ•°æˆ–è€…ç»Ÿè®¡æŒ‡å®šåˆ—å…¶å€¼ä¸ä¸ºNULLçš„æ•°æ®ä¸ªæ•°<br><em>æŸ¥è¯¢æœ‰å¤šå°‘è¯¥è¡¨ä¸­æœ‰å¤šå°‘äºº</em><br>MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select count(*) from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302190940321.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="1-2ã€maxï¼ˆï¼‰"><a href="#1-2ã€maxï¼ˆï¼‰" class="headerlink" title="1.2ã€maxï¼ˆï¼‰"></a>1.2ã€maxï¼ˆï¼‰</h3><p>è®¡ç®—æŒ‡å®šåˆ—çš„æœ€å¤§å€¼ï¼Œå¦‚æœæŒ‡å®šåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹åˆ™ä½¿ç”¨å­—ç¬¦ä¸²æ’åºè¿ç®—</p><p><em>æŸ¥è¯¢è¯¥å­¦ç”Ÿè¡¨ä¸­å¹´çºªæœ€å¤§çš„å­¦ç”Ÿ</em><br>MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select max(age) from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210304164639342.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="1-3ã€minï¼ˆï¼‰"><a href="#1-3ã€minï¼ˆï¼‰" class="headerlink" title="1.3ã€minï¼ˆï¼‰"></a>1.3ã€minï¼ˆï¼‰</h3><p>è®¡ç®—æŒ‡å®šåˆ—çš„æœ€å°å€¼ï¼Œå¦‚æœæŒ‡å®šåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹åˆ™ä½¿ç”¨å­—ç¬¦ä¸²æ’åºè¿ç®—</p><p>æŸ¥è¯¢è¯¥å­¦ç”Ÿè¡¨ä¸­å¹´çºªæœ€å°çš„å­¦ç”Ÿ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select sname,min(age) from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302191531189.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="1-4ã€sumï¼ˆï¼‰"><a href="#1-4ã€sumï¼ˆï¼‰" class="headerlink" title="1.4ã€sumï¼ˆï¼‰"></a>1.4ã€sumï¼ˆï¼‰</h3><p>è®¡ç®—æŒ‡å®šåˆ—çš„æ•°å€¼å’Œï¼Œå¦‚æœæŒ‡å®šåˆ—ç±»å‹ä¸æ˜¯æ•°å€¼ç±»å‹åˆ™è®¡ç®—ç»“æœä¸º0<br>æŸ¥è¯¢è¯¥å­¦ç”Ÿè¡¨ä¸­å¹´çºªçš„æ€»å’Œ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select sum(age) from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302192155981.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="1-5ã€avgï¼ˆï¼‰"><a href="#1-5ã€avgï¼ˆï¼‰" class="headerlink" title="1.5ã€avgï¼ˆï¼‰"></a>1.5ã€avgï¼ˆï¼‰</h3><p>è®¡ç®—æŒ‡å®šåˆ—çš„å¹³å‡å€¼ï¼Œå¦‚æœæŒ‡å®šåˆ—ç±»å‹ä¸æ˜¯æ•°å€¼ç±»å‹åˆ™è®¡ç®—ç»“æœä¸º</p><p>æŸ¥è¯¢è¯¥å­¦ç”Ÿè¡¨ä¸­å¹´çºªçš„å¹³å‡æ•° MySQLå‘½ä»¤ï¼š</p><p>â€‹    select avg(age) from student;</p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302192048399.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-å…¶ä»–å¸¸ç”¨å‡½æ•°"><a href="#2-å…¶ä»–å¸¸ç”¨å‡½æ•°" class="headerlink" title="2.å…¶ä»–å¸¸ç”¨å‡½æ•°"></a>2.å…¶ä»–å¸¸ç”¨å‡½æ•°</h2><p>è¿™é‡Œæˆ‘å°±ä¸ä¸€ä¸€ä¸¾ä¾‹äº†ï¼ŒåŸºæœ¬æ··ä¸ªçœ¼ç†Ÿï¼Œä»¥åç”¨åˆ°å†ç»†è¯´</p><h3 id="2-1ã€æ—¶é—´å‡½æ•°"><a href="#2-1ã€æ—¶é—´å‡½æ•°" class="headerlink" title="2.1ã€æ—¶é—´å‡½æ•°"></a>2.1ã€æ—¶é—´å‡½æ•°</h3><p>-<br>  â€‹    SELECT NOW();</p><ul><li>â€‹    SELECT DAY (NOW());</li><li>â€‹    SELECT DATE (NOW());</li><li>â€‹    SELECT TIME (NOW());</li><li>â€‹    SELECT YEAR (NOW());</li><li>â€‹    SELECT MONTH (NOW());</li><li>â€‹    SELECT CURRENT_DATE();</li><li>â€‹    SELECT CURRENT_TIME();</li><li>â€‹    SELECT CURRENT_TIMESTAMP();</li><li>â€‹    SELECT ADDTIME(â€˜14:23:12â€™,â€™01:02:01â€™);</li><li>â€‹    SELECT DATE_ADD(NOW(),INTERVAL 1 DAY);</li><li>â€‹    SELECT DATE_ADD(NOW(),INTERVAL 1 MONTH);</li><li>â€‹    SELECT DATE_SUB(NOW(),INTERVAL 1 DAY);</li><li>â€‹    SELECT DATE_SUB(NOW(),INTERVAL 1 MONTH);</li><li>â€‹    SELECT DATEDIFF(â€˜2019-07-22â€™,â€™2019-05-05â€™);</li></ul><h3 id="2-2ã€å­—ç¬¦ä¸²å‡½æ•°"><a href="#2-2ã€å­—ç¬¦ä¸²å‡½æ•°" class="headerlink" title="2.2ã€å­—ç¬¦ä¸²å‡½æ•°"></a>2.2ã€å­—ç¬¦ä¸²å‡½æ•°</h3>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">--è¿æ¥å‡½æ•°<br>SELECT CONCAT ()<br>--<br>SELECT INSTR ();<br>--ç»Ÿè®¡é•¿åº¦<br>SELECT LENGTH();<br><br></code></pre></td></tr></table></figure><h3 id="2-3ã€æ•°å­¦å‡½æ•°"><a href="#2-3ã€æ•°å­¦å‡½æ•°" class="headerlink" title="2.3ã€æ•°å­¦å‡½æ•°"></a>2.3ã€æ•°å­¦å‡½æ•°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- ç»å¯¹å€¼<br>SELECT ABS(-136);<br>-- å‘ä¸‹å–æ•´<br>SELECT FLOOR(3.14);<br>-- å‘ä¸Šå–æ•´<br>SELECT CEILING(3.14);<br><br></code></pre></td></tr></table></figure><h1 id="åä¸€ã€æ¡ä»¶æŸ¥è¯¢"><a href="#åä¸€ã€æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="åä¸€ã€æ¡ä»¶æŸ¥è¯¢"></a>åä¸€ã€æ¡ä»¶æŸ¥è¯¢</h1><p>æ•°æ®åº“ä¸­å­˜æœ‰å¤§é‡æ•°æ®ï¼Œæˆ‘ä»¬å¯æ ¹æ®éœ€æ±‚è·å–æŒ‡å®šçš„æ•°æ®ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯åœ¨æŸ¥è¯¢è¯­å¥ä¸­é€šè¿‡WHEREå­å¥æŒ‡å®šæŸ¥è¯¢æ¡ä»¶å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œè¿‡æ»¤ã€‚<br>åœ¨å¼€å§‹å­¦ä¹ æ¡ä»¶æŸ¥è¯¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå‡†å¤‡æµ‹è¯•æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºæ•°æ®åº“<br>DROP DATABASE IF EXISTS mydb;<br>CREATE DATABASE mydb;<br>USE mydb;<br><br>-- åˆ›å»ºstudentè¡¨<br>CREATE TABLE student (<br>    sid CHAR(6),<br>    sname VARCHAR(50),<br>    age INT,<br>    gender VARCHAR(50) DEFAULT &#x27;male&#x27;<br>);<br><br>-- å‘studentè¡¨æ’å…¥æ•°æ®<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1001&#x27;, &#x27;lili&#x27;, 14, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1002&#x27;, &#x27;wang&#x27;, 15, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1003&#x27;, &#x27;tywd&#x27;, 16, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1004&#x27;, &#x27;hfgs&#x27;, 17, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1005&#x27;, &#x27;qwer&#x27;, 18, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1006&#x27;, &#x27;zxsd&#x27;, 19, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1007&#x27;, &#x27;hjop&#x27;, 16, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1008&#x27;, &#x27;tyop&#x27;, 15, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1009&#x27;, &#x27;nhmk&#x27;, 13, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1010&#x27;, &#x27;xdfv&#x27;, 17, &#x27;female&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1012&#x27;, &#x27;lili&#x27;, 14, &#x27;male&#x27;);<br>INSERT INTO student (sid,sname,age,gender) VALUES (&#x27;S_1013&#x27;, &#x27;wang&#x27;, 15, &#x27;female&#x27;);<br><br></code></pre></td></tr></table></figure><h2 id="1-ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æŸ¥è¯¢"><a href="#1-ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æŸ¥è¯¢" class="headerlink" title="1.ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æŸ¥è¯¢"></a>1.ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦æŸ¥è¯¢</h2><p>åœ¨WHEREä¸­å¯ä½¿ç”¨å…³ç³»è¿ç®—ç¬¦è¿›è¡Œæ¡ä»¶æŸ¥è¯¢ï¼Œå¸¸ç”¨çš„å…³ç³»è¿ç®—ç¬¦å¦‚ä¸‹æ‰€ç¤ºï¼š</p><table><thead><tr><th>å…³ç³»è¿ç®—ç¬¦</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>&#x3D;</td><td>ç­‰äº</td></tr><tr><td>&lt;&gt;</td><td>ä¸ç­‰äº</td></tr><tr><td>!&#x3D;</td><td>ä¸ç­‰äº</td></tr><tr><td>&lt;</td><td>å°äº</td></tr><tr><td>&lt;&#x3D;</td><td>å°äºç­‰äº</td></tr></tbody></table><blockquote><p>| å¤§äº<br>&#x3D;| å¤§äºç­‰äº  </p></blockquote><p>æŸ¥è¯¢å¹´é¾„ç­‰äºæˆ–å¤§äº17çš„å­¦ç”Ÿçš„ä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where age&gt;=17;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302194156529.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-ä½¿ç”¨INå…³é”®å­—æŸ¥è¯¢"><a href="#2-ä½¿ç”¨INå…³é”®å­—æŸ¥è¯¢" class="headerlink" title="2.ä½¿ç”¨INå…³é”®å­—æŸ¥è¯¢"></a>2.ä½¿ç”¨INå…³é”®å­—æŸ¥è¯¢</h2><p>INå…³é”®å­—ç”¨äºåˆ¤æ–­æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦åœ¨æŒ‡å®šé›†åˆä¸­ã€‚å¦‚æœå­—æ®µçš„å€¼æ°å¥½åœ¨æŒ‡å®šçš„é›†åˆä¸­ï¼Œåˆ™å°†å­—æ®µæ‰€åœ¨çš„è®°å½•å°†æŸ»è¯¢å‡ºæ¥ã€‚</p><p>æŸ¥è¯¢sidä¸ºS_1002å’ŒS_1003çš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sid in (&#39;S_1002&#39;,&#39;S_1003&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302195114401.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢sidä¸ºS_1001ä»¥å¤–çš„å­¦ç”Ÿçš„ä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sid not in (&#39;S_1001&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302195321878.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-ä½¿ç”¨BETWEEN-ANDå…³é”®å­—æŸ¥è¯¢"><a href="#3-ä½¿ç”¨BETWEEN-ANDå…³é”®å­—æŸ¥è¯¢" class="headerlink" title="3.ä½¿ç”¨BETWEEN ANDå…³é”®å­—æŸ¥è¯¢"></a>3.ä½¿ç”¨BETWEEN ANDå…³é”®å­—æŸ¥è¯¢</h2><p>BETWEEN ANDç”¨äºåˆ¤æ–­æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦åœ¨æŒ‡å®šçš„èŒƒå›´ä¹‹å†…ã€‚å¦‚æœå­—æ®µçš„å€¼åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œåˆ™å°†æ‰€åœ¨çš„è®°å½•å°†æŸ¥è¯¢å‡ºæ¥<br>æŸ¥è¯¢15åˆ°18å²çš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where age between 15 and 18;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030219575915.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢ä¸æ˜¯15åˆ°18å²çš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where age not between 15 and 18;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302195913168.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="4-ä½¿ç”¨ç©ºå€¼æŸ¥è¯¢"><a href="#4-ä½¿ç”¨ç©ºå€¼æŸ¥è¯¢" class="headerlink" title="4.ä½¿ç”¨ç©ºå€¼æŸ¥è¯¢"></a>4.ä½¿ç”¨ç©ºå€¼æŸ¥è¯¢</h2><p>åœ¨MySQLä¸­ï¼Œä½¿ç”¨ IS NULLå…³é”®å­—åˆ¤æ–­å­—æ®µçš„å€¼æ˜¯å¦ä¸ºç©ºå€¼ã€‚è¯·æ³¨æ„ï¼šç©ºå€¼NULLä¸åŒäº0ï¼Œä¹Ÿä¸åŒäºç©ºå­—ç¬¦ä¸²<br><strong>ç”±äºstudentè¡¨æ²¡æœ‰ç©ºå€¼å°±ä¸æ¼”ç¤ºæŸ¥è¯¢ç©ºå€¼çš„äº†</strong><br>æŸ¥è¯¢snameä¸ä¸ºç©ºå€¼çš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname is not null;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302201810965.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="5-ä½¿ç”¨ANDå…³é”®å­—æŸ¥è¯¢"><a href="#5-ä½¿ç”¨ANDå…³é”®å­—æŸ¥è¯¢" class="headerlink" title="5.ä½¿ç”¨ANDå…³é”®å­—æŸ¥è¯¢"></a>5.ä½¿ç”¨ANDå…³é”®å­—æŸ¥è¯¢</h2><p>åœ¨MySQLä¸­å¯ä½¿ç”¨ANDå…³é”®å­—å¯ä»¥è¿æ¥ä¸¤ä¸ªæˆ–è€…å¤šä¸ªæŸ¥è¯¢æ¡ä»¶ã€‚<br>æŸ¥è¯¢å¹´çºªå¤§äº15ä¸”æ€§åˆ«ä¸ºmaleçš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where age&gt;15 and gender=&#39;male&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302202328945.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="6-ä½¿ç”¨ORå…³é”®å­—æŸ¥è¯¢"><a href="#6-ä½¿ç”¨ORå…³é”®å­—æŸ¥è¯¢" class="headerlink" title="6.ä½¿ç”¨ORå…³é”®å­—æŸ¥è¯¢"></a>6.ä½¿ç”¨ORå…³é”®å­—æŸ¥è¯¢</h2><p>åœ¨ä½¿ç”¨SELECTè¯­å¥æŸ¥è¯¢æ•°æ®æ—¶å¯ä½¿ç”¨ORå…³é”®å­—è¿æ¥å¤šä¸ªæŸ»è¯¢æ¡ä»¶ã€‚åœ¨ä½¿ç”¨ORå…³é”®å­—æ—¶ï¼Œåªè¦è®°å½•æ»¡è¶³å…¶ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶å°±ä¼šè¢«æŸ¥è¯¢å‡ºæ¥<br>æŸ¥è¯¢å¹´çºªå¤§äº15æˆ–è€…æ€§åˆ«ä¸ºmaleçš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where age&gt;15 or gender=&#39;male&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302202642783.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="7-ä½¿ç”¨LIKEå…³é”®å­—æŸ¥è¯¢"><a href="#7-ä½¿ç”¨LIKEå…³é”®å­—æŸ¥è¯¢" class="headerlink" title="7.ä½¿ç”¨LIKEå…³é”®å­—æŸ¥è¯¢"></a>7.ä½¿ç”¨LIKEå…³é”®å­—æŸ¥è¯¢</h2><p>MySQLä¸­å¯ä½¿ç”¨LIKEå…³é”®å­—å¯ä»¥åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸åŒ¹é…</p><h3 id="7-1-æ™®é€šå­—ç¬¦ä¸²"><a href="#7-1-æ™®é€šå­—ç¬¦ä¸²" class="headerlink" title="7.1 æ™®é€šå­—ç¬¦ä¸²"></a>7.1 æ™®é€šå­—ç¬¦ä¸²</h3><p>æŸ¥è¯¢snameä¸­ä¸wangåŒ¹é…çš„å­¦ç”Ÿä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname like &#39;wang&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/202103022030077.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="7-2-å«æœ‰-é€šé…çš„å­—ç¬¦ä¸²"><a href="#7-2-å«æœ‰-é€šé…çš„å­—ç¬¦ä¸²" class="headerlink" title="7.2 å«æœ‰%é€šé…çš„å­—ç¬¦ä¸²"></a>7.2 å«æœ‰%é€šé…çš„å­—ç¬¦ä¸²</h3><p>%ç”¨äºåŒ¹é…ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²â€œa%â€åŒ¹é…ä»¥å­—ç¬¦aå¼€å§‹ä»»æ„é•¿åº¦çš„å­—ç¬¦ä¸²<br>æŸ¥è¯¢å­¦ç”Ÿå§“åä»¥liå¼€å§‹çš„è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname like &#39;li%&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302203419987.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢å­¦ç”Ÿå§“åä»¥gç»“å°¾çš„è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname like &#39;%g&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤ºï¼š<br><img src="https://img-blog.csdnimg.cn/20210302203654189.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢å­¦ç”Ÿå§“ååŒ…å«sçš„è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname like &#39;%s%&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210302203828429.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="7-3-å«æœ‰-é€šé…çš„å­—ç¬¦ä¸²"><a href="#7-3-å«æœ‰-é€šé…çš„å­—ç¬¦ä¸²" class="headerlink" title="7.3 å«æœ‰_é€šé…çš„å­—ç¬¦ä¸²"></a>7.3 å«æœ‰_é€šé…çš„å­—ç¬¦ä¸²</h3><p>ä¸‹åˆ’çº¿é€šé…ç¬¦åªåŒ¹é…å•ä¸ªå­—ç¬¦ï¼Œå¦‚æœè¦åŒ¹é…å¤šä¸ªå­—ç¬¦ï¼Œéœ€è¦è¿ç»­ä½¿ç”¨å¤šä¸ªä¸‹åˆ’çº¿é€šé…ç¬¦ã€‚ä¾‹å¦‚ï¼Œå­—ç¬¦ä¸²â€œab_â€åŒ¹é…ä»¥å­—ç¬¦ä¸²â€œabâ€å¼€å§‹é•¿åº¦ä¸º3çš„å­—ç¬¦ä¸²ï¼Œå¦‚abcã€abpç­‰ç­‰ï¼›å­—ç¬¦ä¸²â€œa__dâ€åŒ¹é…åœ¨å­—ç¬¦â€œaâ€å’Œâ€œdâ€ä¹‹é—´åŒ…å«ä¸¤ä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ï¼Œå¦‚â€abcdâ€ã€â€atudâ€ç­‰ç­‰ã€‚<br>æŸ¥è¯¢å­¦ç”Ÿå§“åä»¥zxå¼€å¤´ä¸”é•¿åº¦ä¸º4çš„è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname like &#39;zx__&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210302204051494.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æŸ¥è¯¢å­¦ç”Ÿå§“åä»¥gç»“å°¾ä¸”é•¿åº¦ä¸º4çš„è®°å½• MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where sname like &#39;___g&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210302204240798.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="8-ä½¿ç”¨LIMITé™åˆ¶æŸ¥è¯¢ç»“æœçš„æ•°é‡"><a href="#8-ä½¿ç”¨LIMITé™åˆ¶æŸ¥è¯¢ç»“æœçš„æ•°é‡" class="headerlink" title="8.ä½¿ç”¨LIMITé™åˆ¶æŸ¥è¯¢ç»“æœçš„æ•°é‡"></a>8.ä½¿ç”¨LIMITé™åˆ¶æŸ¥è¯¢ç»“æœçš„æ•°é‡</h2><p>å½“æ‰§è¡ŒæŸ¥è¯¢æ•°æ®æ—¶å¯èƒ½ä¼šè¿”å›å¾ˆå¤šæ¡è®°å½•ï¼Œè€Œç”¨æˆ·éœ€è¦çš„æ•°æ®å¯èƒ½åªæ˜¯å…¶ä¸­çš„ä¸€æ¡æˆ–è€…å‡ æ¡<br>æŸ¥è¯¢å­¦ç”Ÿè¡¨ä¸­å¹´çºªæœ€å°çš„3ä½åŒå­¦ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student order by age asc limit 3;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210302204847986.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="9-ä½¿ç”¨GROUP-BYè¿›è¡Œåˆ†ç»„æŸ¥è¯¢"><a href="#9-ä½¿ç”¨GROUP-BYè¿›è¡Œåˆ†ç»„æŸ¥è¯¢" class="headerlink" title="9.ä½¿ç”¨GROUP BYè¿›è¡Œåˆ†ç»„æŸ¥è¯¢"></a>9.ä½¿ç”¨GROUP BYè¿›è¡Œåˆ†ç»„æŸ¥è¯¢</h2><p>GROUP BY å­å¥å¯åƒåˆ‡è›‹ç³•ä¸€æ ·å°†è¡¨ä¸­çš„æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œå†è¿›è¡ŒæŸ¥è¯¢ç­‰æ“ä½œã€‚æ¢è¨€ä¹‹ï¼Œå¯é€šä¿—åœ°ç†è§£ä¸ºï¼šé€šè¿‡GROUP BYå°†åŸæ¥çš„è¡¨æ‹†åˆ†æˆäº†å‡ å¼ å°è¡¨ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­å¼€å§‹å­¦ä¹ GROUP BYï¼Œä»£ç å¦‚ä¸‹</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- åˆ›å»ºæ•°æ®åº“<br>DROP DATABASE IF EXISTS mydb;<br>CREATE DATABASE mydb;<br>USE mydb;<br><br>-- åˆ›å»ºå‘˜å·¥è¡¨<br>CREATE TABLE employee (<br>    id int,<br>    name varchar(50),<br>    salary int,<br>    departmentnumber int<br>);<br><br>-- å‘å‘˜å·¥è¡¨ä¸­æ’å…¥æ•°æ®<br>INSERT INTO employee values(1,&#x27;tome&#x27;,2000,1001); <br>INSERT INTO employee values(2,&#x27;lucy&#x27;,9000,1002); <br>INSERT INTO employee values(3,&#x27;joke&#x27;,5000,1003); <br>INSERT INTO employee values(4,&#x27;wang&#x27;,3000,1004); <br>INSERT INTO employee values(5,&#x27;chen&#x27;,3000,1001); <br>INSERT INTO employee values(6,&#x27;yukt&#x27;,7000,1002); <br>INSERT INTO employee values(7,&#x27;rett&#x27;,6000,1003); <br>INSERT INTO employee values(8,&#x27;mujk&#x27;,4000,1004); <br>INSERT INTO employee values(9,&#x27;poik&#x27;,3000,1001);<br><br></code></pre></td></tr></table></figure><h3 id="9-1-GROUP-BYå’Œèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨"><a href="#9-1-GROUP-BYå’Œèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨" class="headerlink" title="9.1 GROUP BYå’Œèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨"></a>9.1 GROUP BYå’Œèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨</h3><p>ç»Ÿè®¡å„éƒ¨é—¨å‘˜å·¥ä¸ªæ•° MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select count(*), departmentnumber from employee group by departmentnumber;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/2021030220555769.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>ç»Ÿè®¡éƒ¨é—¨ç¼–å·å¤§äº1001çš„å„éƒ¨é—¨å‘˜å·¥ä¸ªæ•° MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select count(*), departmentnumber from employee where departmentnumber&gt;1001 group by departmentnumber;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210302210134682.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="9-2-GROUP-BYå’Œèšåˆå‡½æ•°ä»¥åŠHAVINGä¸€èµ·ä½¿ç”¨"><a href="#9-2-GROUP-BYå’Œèšåˆå‡½æ•°ä»¥åŠHAVINGä¸€èµ·ä½¿ç”¨" class="headerlink" title="9.2 GROUP BYå’Œèšåˆå‡½æ•°ä»¥åŠHAVINGä¸€èµ·ä½¿ç”¨"></a>9.2 GROUP BYå’Œèšåˆå‡½æ•°ä»¥åŠHAVINGä¸€èµ·ä½¿ç”¨</h3><p>ç»Ÿè®¡å·¥èµ„æ€»å’Œå¤§äº8000çš„éƒ¨é—¨ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select sum(salary),departmentnumber from employee group by departmentnumber having sum(salary)&gt;8000;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210302210627962.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="10-ä½¿ç”¨ORDER-BYå¯¹æŸ¥è¯¢ç»“æœæ’åº"><a href="#10-ä½¿ç”¨ORDER-BYå¯¹æŸ¥è¯¢ç»“æœæ’åº" class="headerlink" title="10.ä½¿ç”¨ORDER BYå¯¹æŸ¥è¯¢ç»“æœæ’åº"></a>10.ä½¿ç”¨ORDER BYå¯¹æŸ¥è¯¢ç»“æœæ’åº</h2><p>ä»è¡¨ä¸­æŸ»è¯¢å‡ºæ¥çš„æ•°æ®å¯èƒ½æ˜¯æ— åºçš„æˆ–è€…å…¶æ’åˆ—é¡ºåºä¸æ˜¯æˆ‘ä»¬æœŸæœ›çš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ORDER BYå¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº<br>å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT å­—æ®µå1,å­—æ®µå2,â€¦<br>FROM è¡¨å<br>ORDER BY å­—æ®µå1 [ASC ä¸¨ DESC],å­—æ®µå2 [ASC | DESC];<br></code></pre></td></tr></table></figure><p>åœ¨è¯¥è¯­æ³•ä¸­ï¼šå­—æ®µå1ã€å­—æ®µå2æ˜¯æŸ¥è¯¢ç»“æœæ’åºçš„ä¾æ®ï¼›å‚æ•°<br>ASCè¡¨ç¤ºæŒ‰ç…§å‡åºæ’åºï¼ŒDESCè¡¨ç¤ºæŒ‰ç…§é™åºæ’åºï¼›é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§ASCæ–¹å¼æ’åºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒORDER BYå­å¥ä½äºæ•´ä¸ªSELECTè¯­å¥çš„æœ«å°¾ã€‚<br>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå¹¶æŒ‰ç…§å¹´çºªå¤§å°å‡åºæ’åˆ— MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student order by age asc;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030221134859.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿå¹¶æŒ‰ç…§å¹´çºªå¤§å°é™åºæ’åˆ— MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student order by age desc;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210302211454223.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="åäºŒã€åˆ«åè®¾ç½®"><a href="#åäºŒã€åˆ«åè®¾ç½®" class="headerlink" title="åäºŒã€åˆ«åè®¾ç½®"></a>åäºŒã€åˆ«åè®¾ç½®</h1><p>åœ¨æŸ»è¯¢æ•°æ®æ—¶å¯ä¸ºè¡¨å’Œå­—æ®µå–åˆ¥åï¼Œè¯¥åˆ«åä»£æ›¿è¡¨å’Œå­—æ®µçš„åŸåå‚ä¸æŸ¥è¯¢æ“ä½œã€‚<br><strong>æ“ä½œçš„è¡¨äº‹å…ˆå·²å‡†å¤‡</strong></p><h2 id="1-ä¸ºè¡¨å–åˆ«å"><a href="#1-ä¸ºè¡¨å–åˆ«å" class="headerlink" title="1.ä¸ºè¡¨å–åˆ«å"></a>1.ä¸ºè¡¨å–åˆ«å</h2><p>åœ¨æŸ¥è¯¢æ“ä½œæ—¶ï¼Œå‡è‹¥è¡¨åå¾ˆé•¿ä½¿ç”¨èµ·æ¥å°±ä¸å¤ªæ–¹ä¾¿ï¼Œæ­¤æ—¶å¯ä¸ºè¡¨å–ä¸€ä¸ªåˆ¥åï¼Œç”¨è¯¥åˆ«åæ¥ä»£æ›¿è¡¨çš„åç§°ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>â€‹    <strong>SELECT * FROM è¡¨å [AS] è¡¨çš„åˆ«å WHERE â€¦. ;</strong></p><p>å°†studentæ”¹ä¸ºstuæŸ¥è¯¢æ•´è¡¨ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student as stu;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210303192155711.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-ä¸ºå­—æ®µå–åˆ«å"><a href="#2-ä¸ºå­—æ®µå–åˆ«å" class="headerlink" title="2.ä¸ºå­—æ®µå–åˆ«å"></a>2.ä¸ºå­—æ®µå–åˆ«å</h2><p>åœ¨æŸ¥è¯¢æ“ä½œæ—¶ï¼Œå‡è‹¥å­—æ®µåå¾ˆé•¿ä½¿ç”¨èµ·æ¥å°±ä¸å¤ªæ–¹ä¾¿ï¼Œæ­¤æ—¶å¯è¯¥å­—æ®µå–ä¸€ä¸ªåˆ¥åï¼Œç”¨è¯¥åˆ«åæ¥ä»£æ›¿å­—æ®µçš„åç§°ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š</p><p>â€‹    <strong>SELECT å­—æ®µå1 [AS] åˆ«å1 , å­—æ®µå2 [AS] åˆ«å2 , â€¦ FROM è¡¨å WHERE â€¦ ;</strong></p><p>å°†studentä¸­çš„nameå–åˆ«åä¸ºâ€œå§“åâ€ æŸ¥è¯¢æ•´è¡¨ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select name as &#39;å§“å&#39;,id from student;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/2021030319253113.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="åä¸‰ã€è¡¨çš„å…³è”å…³ç³»"><a href="#åä¸‰ã€è¡¨çš„å…³è”å…³ç³»" class="headerlink" title="åä¸‰ã€è¡¨çš„å…³è”å…³ç³»"></a>åä¸‰ã€è¡¨çš„å…³è”å…³ç³»</h1><p>åœ¨å®é™…å¼€å‘ä¸­æ•°æ®è¡¨ä¹‹é—´å­˜åœ¨ç€å„ç§å…³è”å…³ç³»ã€‚åœ¨æ­¤ï¼Œä»‹ç»MySQLä¸­æ•°æ®è¡¨çš„ä¸‰ç§å…³è”å…³ç³»ã€‚<br><strong>å¤šå¯¹ä¸€</strong><br>å¤šå¯¹ä¸€(äº¦ç§°ä¸ºä¸€å¯¹å¤š)æ˜¯æ•°æ®è¡¨ä¸­æœ€å¸¸è§çš„ä¸€ç§å…³ç³»ã€‚ä¾‹å¦‚ï¼šå‘˜å·¥ä¸éƒ¨é—¨ä¹‹é—´çš„å…³ç³»ï¼Œä¸€ä¸ªéƒ¨é—¨å¯ä»¥æœ‰å¤šä¸ªå‘˜å·¥ï¼›è€Œä¸€ä¸ªå‘˜å·¥ä¸èƒ½å±äºå¤šä¸ªéƒ¨é—¨åªå±äºæŸä¸ªéƒ¨é—¨ã€‚åœ¨å¤šå¯¹ä¸€çš„è¡¨å…³ç³»<br>ä¸­ï¼Œåº”å°†å¤–é”®å»ºåœ¨å¤šçš„ä¸€æ–¹å¦åˆ™ä¼šé€ æˆæ•°æ®çš„å†—ä½™ã€‚<br><strong>å¤šå¯¹å¤š</strong><br>å¤šå¯¹å¤šæ˜¯æ•°æ®è¡¨ä¸­å¸¸è§çš„ä¸€ç§å…³ç³»ã€‚ä¾‹å¦‚ï¼šå­¦ç”Ÿä¸è€å¸ˆä¹‹é—´çš„å…³ç³»ï¼Œä¸€ä¸ªå­¦ç”Ÿå¯ä»¥æœ‰å¤šä¸ªè€å¸ˆè€Œä¸”ä¸€ä¸ªè€å¸ˆæœ‰å¤šä¸ªå­¦ç”Ÿã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¸ºäº†å®ç°è¿™ç§å…³ç³»éœ€è¦å®šä¹‰ä¸€å¼ ä¸­é—´è¡¨(äº¦ç§°ä¸ºè¿æ¥è¡¨)è¯¥è¡¨ä¼šå­˜åœ¨ä¸¤ä¸ªå¤–é”®åˆ†åˆ«å‚ç…§è€å¸ˆè¡¨å’Œå­¦ç”Ÿè¡¨ã€‚<br><strong>ä¸€å¯¹ä¸€</strong><br>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸€å¯¹ä¸€çš„å…³è”å…³ç³»åœ¨æ•°æ®åº“ä¸­å¹¶ä¸å¸¸è§ï¼›å› ä¸ºä»¥è¿™ç§æ–¹å¼å­˜å‚¨çš„ä¿¡æ¯é€šå¸¸ä¼šæ”¾åœ¨åŒä¸€å¼ è¡¨ä¸­ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ åœ¨ä¸€å¯¹å¤šçš„å…³è”å…³ç³»ä¸­å¦‚æœæ·»åŠ å’Œåˆ é™¤æ•°æ®ã€‚å…ˆå‡†å¤‡ä¸€äº›æµ‹è¯•æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DROP TABLE IF EXISTS student;<br>DROP TABLE IF EXISTS class;<br><br>-- åˆ›å»ºç­çº§è¡¨<br>CREATE TABLE class(<br>    cid int(4) NOT NULL PRIMARY KEY,<br>    cname varchar(30) <br>);<br><br>-- åˆ›å»ºå­¦ç”Ÿè¡¨<br>CREATE TABLE student(<br>    sid int(8) NOT NULL PRIMARY KEY,<br>    sname varchar(30),<br>    classid int(8) NOT NULL<br>);<br><br>-- ä¸ºå­¦ç”Ÿè¡¨æ·»åŠ å¤–é”®çº¦æŸ<br>ALTER TABLE student ADD CONSTRAINT fk_student_classid FOREIGN KEY(classid) REFERENCES class(cid);<br>-- å‘ç­çº§è¡¨æ’å…¥æ•°æ®<br>INSERT INTO class(cid,cname)VALUES(1,&#x27;Java&#x27;);<br>INSERT INTO class(cid,cname)VALUES(2,&#x27;Python&#x27;);<br><br>-- å‘å­¦ç”Ÿè¡¨æ’å…¥æ•°æ®<br>INSERT INTO student(sid,sname,classid)VALUES(1,&#x27;tome&#x27;,1);<br>INSERT INTO student(sid,sname,classid)VALUES(2,&#x27;lucy&#x27;,1);<br>INSERT INTO student(sid,sname,classid)VALUES(3,&#x27;lili&#x27;,2);<br>INSERT INTO student(sid,sname,classid)VALUES(4,&#x27;domi&#x27;,2);<br><br></code></pre></td></tr></table></figure><h2 id="1-å…³è”æŸ¥è¯¢"><a href="#1-å…³è”æŸ¥è¯¢" class="headerlink" title="1.å…³è”æŸ¥è¯¢"></a>1.å…³è”æŸ¥è¯¢</h2><p>æŸ¥è¯¢Javaç­çš„æ‰€æœ‰å­¦ç”Ÿ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from student where classid=(select cid from class where cname=&#39;Java&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/2021030319330865.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-å…³äºå…³è”å…³ç³»çš„åˆ é™¤æ•°æ®"><a href="#2-å…³äºå…³è”å…³ç³»çš„åˆ é™¤æ•°æ®" class="headerlink" title="2.å…³äºå…³è”å…³ç³»çš„åˆ é™¤æ•°æ®"></a>2.å…³äºå…³è”å…³ç³»çš„åˆ é™¤æ•°æ®</h2><p>è¯·ä»ç­çº§è¡¨ä¸­åˆ é™¤Javaç­çº§ã€‚åœ¨æ­¤ï¼Œè¯·æ³¨æ„ï¼šç­çº§è¡¨å’Œå­¦ç”Ÿè¡¨ä¹‹é—´å­˜åœ¨å…³è”å…³ç³»ï¼›è¦åˆ é™¤Javaç­çº§ï¼Œåº”è¯¥å…ˆåˆ é™¤å­¦ç”Ÿè¡¨ä¸­ä¸è¯¥ç­ç›¸å…³è”çš„å­¦ç”Ÿã€‚å¦åˆ™ï¼Œå‡è‹¥å…ˆåˆ é™¤Javaç­é‚£ä¹ˆå­¦ç”Ÿè¡¨ä¸­çš„cidå°±å¤±å»äº†å…³è”<br>åˆ é™¤Javaç­ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>delete from student where classid=(select cid from class where cname=&#39;Java&#39;);</code><br><code>â€‹    delete from class where cname=&#39;Java&#39;;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/2021030319415767.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="åå››ã€å¤šè¡¨è¿æ¥æŸ¥è¯¢"><a href="#åå››ã€å¤šè¡¨è¿æ¥æŸ¥è¯¢" class="headerlink" title="åå››ã€å¤šè¡¨è¿æ¥æŸ¥è¯¢"></a>åå››ã€å¤šè¡¨è¿æ¥æŸ¥è¯¢</h1><h2 id="1-äº¤å‰è¿æ¥æŸ¥è¯¢"><a href="#1-äº¤å‰è¿æ¥æŸ¥è¯¢" class="headerlink" title="1.äº¤å‰è¿æ¥æŸ¥è¯¢"></a>1.äº¤å‰è¿æ¥æŸ¥è¯¢</h2><p>äº¤å‰è¿æ¥è¿”å›çš„ç»“æœæ˜¯è¢«è¿æ¥çš„ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰æ•°æ®è¡Œçš„ç¬›å¡å„¿ç§¯ï¼›æ¯”å¦‚ï¼šé›†åˆA&#x3D;{a,b}ï¼Œé›†åˆB&#x3D;{0,1,2}ï¼Œåˆ™é›†åˆAå’ŒBçš„ç¬›å¡å°”ç§¯ä¸º{(a,0),(a,1),(a,2),(b,0),(b,1),(b,2)}ã€‚æ‰€ä»¥ï¼Œäº¤å‰è¿æ¥ä¹Ÿè¢«ç§°ä¸ºç¬›å¡å°”è¿æ¥ï¼Œå…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p>â€‹    <strong>SELECT * FROM è¡¨1 CROSS JOIN è¡¨2;</strong></p><p>åœ¨è¯¥è¯­æ³•ä¸­ï¼šCROSS JOINç”¨äºè¿æ¥ä¸¤ä¸ªè¦æŸ¥è¯¢çš„è¡¨ï¼Œé€šè¿‡è¯¥è¯­å¥å¯ä»¥æŸ¥è¯¢ä¸¤ä¸ªè¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ç»„åˆã€‚<br><strong>ç”±äºè¿™ä¸ªäº¤å‰è¿æ¥æŸ¥è¯¢åœ¨å®é™…è¿ç”¨ä¸­æ²¡æœ‰ä»»ä½•æ„ä¹‰ ï¼Œæ‰€ä»¥åªåšä¸ºäº†è§£å³å¯</strong></p><h2 id="2-å†…è¿æ¥æŸ¥è¯¢"><a href="#2-å†…è¿æ¥æŸ¥è¯¢" class="headerlink" title="2.å†…è¿æ¥æŸ¥è¯¢"></a>2.å†…è¿æ¥æŸ¥è¯¢</h2><p>å†…è¿æ¥(Inner<br>Join)åˆç§°ç®€å•è¿æ¥æˆ–è‡ªç„¶è¿æ¥ï¼Œæ˜¯ä¸€ç§éå¸¸å¸¸è§çš„è¿æ¥æŸ¥è¯¢ã€‚å†…è¿æ¥ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å¯¹ä¸¤ä¸ªè¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ¯”è¾ƒå¹¶åˆ—å‡ºä¸è¿æ¥æ¡ä»¶åŒ¹é…çš„æ•°æ®è¡Œï¼Œç»„åˆæˆæ–°çš„<br>è®°å½•ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å†…è¿æ¥æŸ¥è¯¢ä¸­åªæœ‰æ»¡è¶³æ¡ä»¶çš„è®°å½•æ‰èƒ½å‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­ã€‚å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p>â€‹<br>â€‹    SELECT æŸ¥è¯¢å­—æ®µ1,æŸ¥è¯¢å­—æ®µ2, â€¦ FROM è¡¨1 [INNER] JOIN è¡¨2 ON è¡¨1.å…³ç³»å­—æ®µ&#x3D;è¡¨2.å…³ç³»å­—æ®µ</p><p>åœ¨è¯¥è¯­æ³•ä¸­ï¼šINNER JOINç”¨äºè¿æ¥ä¸¤ä¸ªè¡¨ï¼ŒONæ¥æŒ‡å®šè¿æ¥æ¡ä»¶ï¼›å…¶ä¸­INNERå¯ä»¥çœç•¥ã€‚</p><p>å‡†å¤‡æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><p>æŸ¥è¯¢å‘˜å·¥å§“ååŠå…¶æ‰€å±éƒ¨é—¨åç§° MySQLå‘½ä»¤ï¼š</p><p>â€‹<br>â€‹    select employee.ename,department.dname from department inner join employee on department.did&#x3D;employee.departmentid;</p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/2021030320040897.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-å¤–è¿æ¥æŸ¥è¯¢"><a href="#3-å¤–è¿æ¥æŸ¥è¯¢" class="headerlink" title="3.å¤–è¿æ¥æŸ¥è¯¢"></a>3.å¤–è¿æ¥æŸ¥è¯¢</h2><p>åœ¨ä½¿ç”¨å†…è¿æ¥æŸ¥è¯¢æ—¶æˆ‘ä»¬å‘ç°ï¼šè¿”å›çš„ç»“æœåªåŒ…å«ç¬¦åˆæŸ¥è¯¢æ¡ä»¶å’Œè¿æ¥æ¡ä»¶çš„æ•°æ®ã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶è¿˜éœ€è¦åœ¨è¿”å›æŸ¥è¯¢ç»“æœä¸­ä¸ä»…åŒ…å«ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œè€Œä¸”è¿˜åŒ…æ‹¬å·¦è¡¨ã€å³è¡¨æˆ–ä¸¤ä¸ªè¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨å¤–è¿æ¥æŸ¥è¯¢ã€‚å¤–è¿æ¥åˆåˆ†ä¸ºå·¦(å¤–)è¿æ¥å’Œå³(å¤–)è¿æ¥ã€‚å…¶è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><p>â€‹    SELECT æŸ¥è¯¢å­—æ®µ1,æŸ¥è¯¢å­—æ®µ2, â€¦ FROM è¡¨1 LEFT | RIGHT [OUTER] JOIN è¡¨2 ON è¡¨1.å…³ç³»å­—æ®µ&#x3D;è¡¨2.å…³ç³»å­—æ®µ WHERE æ¡ä»¶</p><p>ç”±æ­¤å¯è§ï¼Œå¤–è¿æ¥çš„è¯­æ³•æ ¼å¼å’Œå†…è¿æ¥éå¸¸ç›¸ä¼¼ï¼Œåªä¸è¿‡ä½¿ç”¨çš„æ˜¯LEFT [OUTER] JOINã€RIGHT [OUTER]<br>JOINå…³é”®å­—ã€‚å…¶ä¸­ï¼Œå…³é”®å­—å·¦è¾¹çš„è¡¨è¢«ç§°ä¸ºå·¦è¡¨ï¼Œå…³é”®å­—å³è¾¹çš„è¡¨è¢«ç§°ä¸ºå³è¡¨ï¼›OUTERå¯ä»¥çœç•¥ã€‚<br>åœ¨ä½¿ç”¨å·¦(å¤–)è¿æ¥å’Œå³(å¤–)è¿æ¥æŸ¥è¯¢æ—¶ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯ä¸ä¸€è‡´çš„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br>**1ã€LEFT [OUTER] JOIN å·¦(å¤–)è¿æ¥ ï¼šè¿”å›åŒ…æ‹¬å·¦è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå³è¡¨ä¸­ç¬¦åˆè¿æ¥æ¡ä»¶çš„è®°å½•ã€‚ ** </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs mysql">SELECT æŸ¥è¯¢å­—æ®µ1,æŸ¥è¯¢å­—æ®µ2, ... FROM è¡¨1 LEFT | RIGHT [OUTER] JOIN è¡¨2 ON è¡¨1.å…³ç³»å­—æ®µ=è¡¨2.å…³ç³»å­—æ®µ WHERE æ¡ä»¶<br><br></code></pre></td></tr></table></figure><p><strong>2ã€RIGHT [OUTER] JOIN å³(å¤–)è¿æ¥ï¼šè¿”å›åŒ…æ‹¬å³è¡¨ä¸­çš„æ‰€æœ‰è®°å½•å’Œå·¦è¡¨ä¸­ç¬¦åˆè¿æ¥æ¡ä»¶çš„è®°å½•ã€‚</strong></p><p>å…ˆå‡†å¤‡æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>   <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs mysql">-- è‹¥å­˜åœ¨æ•°æ®åº“mydbåˆ™åˆ é™¤<br>DROP DATABASE IF EXISTS mydb;<br>-- åˆ›å»ºæ•°æ®åº“mydb<br>CREATE DATABASE mydb;<br>-- é€‰æ‹©æ•°æ®åº“mydb<br>USE mydb;<br><br>-- åˆ›å»ºç­çº§è¡¨<br>CREATE TABLE class(<br>  cid int (4) NOT NULL PRIMARY KEY, <br>  cname varchar(20)<br>);<br><br>-- åˆ›å»ºå­¦ç”Ÿè¡¨<br>CREATE TABLE student (<br>  sid int (4) NOT NULL PRIMARY KEY, <br>  sname varchar (20), <br>  sage int (2), <br>  classid int (4) NOT NULL<br>);<br>-- å‘ç­çº§è¡¨æ’å…¥æ•°æ®<br>INSERT INTO class VALUES(1001,&#x27;Java&#x27;);<br>INSERT INTO class VALUES(1002,&#x27;C++&#x27;);<br>INSERT INTO class VALUES(1003,&#x27;Python&#x27;);<br>INSERT INTO class VALUES(1004,&#x27;PHP&#x27;);<br><br>-- å‘å­¦ç”Ÿè¡¨æ’å…¥æ•°æ®<br>INSERT INTO student VALUES(1,&#x27;å¼ ä¸‰&#x27;,20,1001);<br>INSERT INTO student VALUES(2,&#x27;æå››&#x27;,21,1002);<br>INSERT INTO student VALUES(3,&#x27;ç‹äº”&#x27;,24,1002);<br>INSERT INTO student VALUES(4,&#x27;èµµå…­&#x27;,23,1003);<br>INSERT INTO student VALUES(5,&#x27;Jack&#x27;,22,1009);<br><br></code></pre></td></tr></table></figure><p><em>å‡†å¤‡è¿™ç»„æ•°æ®æœ‰ä¸€å®šçš„ç‰¹ç‚¹ ï¼Œä¸ºçš„æ˜¯è®©å¤§å®¶ç›´è§‚çš„çœ‹å‡ºå·¦è¿æ¥ä¸å³è¿æ¥çš„ä¸åŒä¹‹å¤„<br>1ã€ç­çº§ç¼–å·ä¸º1004çš„PHPç­çº§æ²¡æœ‰å­¦ç”Ÿ<br>2ã€å­¦å·ä¸º5çš„å­¦ç”Ÿç‹è·ƒè·ƒç­çº§ç¼–å·ä¸º1009ï¼Œè¯¥ç­çº§ç¼–å·å¹¶ä¸åœ¨ç­çº§è¡¨ä¸­</em></p><h3 id="3-1-å·¦ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢"><a href="#3-1-å·¦ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢" class="headerlink" title="3.1 å·¦ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢"></a>3.1 å·¦ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢</h3><p>å·¦(å¤–)è¿æ¥çš„ç»“æœåŒ…æ‹¬LEFT JOINå­å¥ä¸­æŒ‡å®šçš„å·¦è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠæ‰€æœ‰æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ã€‚å¦‚æœå·¦è¡¨çš„æŸæ¡è®°å½•åœ¨å³è¡¨ä¸­ä¸å­˜åœ¨åˆ™åœ¨å³è¡¨ä¸­æ˜¾ç¤ºä¸ºç©ºã€‚<br>æŸ¥è¯¢æ¯ä¸ªç­çš„ç­çº§IDã€ç­çº§åç§°åŠè¯¥ç­çš„æ‰€æœ‰å­¦ç”Ÿçš„åå­— MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select class.cid,class.cname,student.sname from class left outer join student on class.cid=student.classid;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303201647123.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å±•ç¤ºç»“æœåˆ†æï¼š<br>1ã€åˆ†åˆ«æ‰¾å‡ºJavaç­ã€C++ç­ã€Pythonç­çš„å­¦ç”Ÿ<br>2ã€å³è¡¨çš„ç‹è·ƒè·ƒä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶æ•…å…¶æ²¡æœ‰å‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­<br>3ã€è™½ç„¶å·¦è¡¨çš„PHPç­æ²¡æœ‰å­¦ç”Ÿï¼Œä½†æ˜¯ä»»ç„¶æ˜¾ç¤ºäº†PHPçš„ä¿¡æ¯ï¼›ä½†æ˜¯ï¼Œå®ƒå¯¹åº”çš„å­¦ç”Ÿåå­—ä¸ºNULL</p><h3 id="3-2-å³ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢"><a href="#3-2-å³ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢" class="headerlink" title="3.2 å³ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢"></a>3.2 å³ï¼ˆå¤–ï¼‰è¿æ¥æŸ¥è¯¢</h3><p>å³(å¤–)è¿æ¥çš„ç»“æœåŒ…æ‹¬RIGHT JOINå­å¥ä¸­æŒ‡å®šçš„å³è¡¨çš„æ‰€æœ‰è®°å½•ï¼Œä»¥åŠæ‰€æœ‰æ»¡è¶³è¿æ¥æ¡ä»¶çš„è®°å½•ã€‚å¦‚æœå³è¡¨çš„æŸæ¡è®°å½•åœ¨å·¦è¡¨ä¸­æ²¡æœ‰åŒ¹é…ï¼Œåˆ™å·¦è¡¨å°†è¿”å›ç©ºå€¼ã€‚<br>æŸ¥è¯¢æ¯ä¸ªç­çš„ç­çº§IDã€ç­çº§åç§°åŠè¯¥ç­çš„æ‰€æœ‰å­¦ç”Ÿçš„åå­— MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select class.cid,class.cname,student.sname from class right outer join student on class.cid=student.classid;</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303202037216.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å±•ç¤ºç»“æœåˆ†æï¼š<br>1ã€åˆ†åˆ«æ‰¾å‡ºJavaç­ã€C++ç­ã€Pythonç­çš„å­¦ç”Ÿ<br>2ã€ï‚·å·¦è¡¨çš„PHPç­ä¸æ»¡è¶³æŸ¥è¯¢æ¡ä»¶æ•…å…¶æ²¡æœ‰å‡ºç°åœ¨æŸ¥è¯¢ç»“æœä¸­<br>3ã€ï‚·è™½ç„¶å³è¡¨çš„jackæ²¡æœ‰å¯¹åº”ç­çº§ï¼Œä½†æ˜¯ä»»ç„¶æ˜¾ç¤ºç‹è·ƒè·ƒçš„ä¿¡æ¯ï¼›ä½†æ˜¯ï¼Œå®ƒå¯¹åº”çš„ç­çº§ä»¥åŠç­çº§ç¼–å·å‡ä¸ºNULL</p><h1 id="åäº”ã€å­æŸ¥è¯¢"><a href="#åäº”ã€å­æŸ¥è¯¢" class="headerlink" title="åäº”ã€å­æŸ¥è¯¢"></a>åäº”ã€å­æŸ¥è¯¢</h1><p>å­æŸ¥è¯¢æ˜¯æŒ‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥åµŒå¥—åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢è¯­å¥å†…éƒ¨çš„æŸ¥è¯¢ï¼›è¯¥æŸ¥è¯¢è¯­å¥å¯ä»¥åµŒå¥—åœ¨ä¸€ä¸ª<br>SELECTã€SELECTâ€¦INTOã€INSERTâ€¦INTOç­‰è¯­å¥ä¸­ã€‚åœ¨æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼Œé¦–å…ˆä¼šæ‰§è¡Œå­æŸ¥è¯¢ä¸­çš„è¯­å¥ï¼Œå†å°†è¿”å›çš„ç»“æœä½œä¸ºå¤–å±‚æŸ¥è¯¢çš„è¿‡æ»¤æ¡ä»¶ã€‚åœ¨å­æŸ»è¯¢ä¸­é€šå¸¸å¯ä»¥ä½¿ç”¨æ¯”è¾ƒè¿ç®—ç¬¦å’ŒINã€EXISTSã€ANYã€ALLç­‰å…³é”®å­—ã€‚</p><p>å‡†å¤‡æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs mysql">DROP TABLE IF EXISTS student;<br>DROP TABLE IF EXISTS class;<br><br>-- åˆ›å»ºç­çº§è¡¨<br>CREATE TABLE class(<br>  cid int (4) NOT NULL PRIMARY KEY, <br>  cname varchar(20)<br>);<br><br>-- åˆ›å»ºå­¦ç”Ÿè¡¨<br>CREATE TABLE student (<br>  sid int (4) NOT NULL PRIMARY KEY, <br>  sname varchar (20), <br>  sage int (2), <br>  classid int (4) NOT NULL<br>);<br><br>-- å‘ç­çº§è¡¨æ’å…¥æ•°æ®<br>INSERT INTO class VALUES(1001,&#x27;Java&#x27;);<br>INSERT INTO class VALUES(1002,&#x27;C++&#x27;);<br>INSERT INTO class VALUES(1003,&#x27;Python&#x27;);<br>INSERT INTO class VALUES(1004,&#x27;PHP&#x27;);<br>INSERT INTO class VALUES(1005,&#x27;Android&#x27;);<br><br>-- å‘å­¦ç”Ÿè¡¨æ’å…¥æ•°æ®<br>INSERT INTO student VALUES(1,&#x27;å¼ ä¸‰&#x27;,20,1001);<br>INSERT INTO student VALUES(2,&#x27;æå››&#x27;,21,1002);<br>INSERT INTO student VALUES(3,&#x27;ç‹äº”&#x27;,24,1003);<br>INSERT INTO student VALUES(4,&#x27;èµµå…­&#x27;,23,1004);<br>INSERT INTO student VALUES(5,&#x27;å°æ˜&#x27;,21,1001);<br>INSERT INTO student VALUES(6,&#x27;å°çº¢&#x27;,26,1001);<br>INSERT INTO student VALUES(7,&#x27;å°äº®&#x27;,27,1002);<br><br></code></pre></td></tr></table></figure><h2 id="1-å¸¦æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢"><a href="#1-å¸¦æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢" class="headerlink" title="1.å¸¦æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢"></a>1.å¸¦æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢</h2><p>æ¯”è¾ƒè¿ç®—ç¬¦å‰é¢æˆ‘ä»¬æåˆ°è¿‡å¾—ï¼Œå°±æ˜¯&gt;ã€&lt;ã€&#x3D;ã€&gt;&#x3D;ã€&lt;&#x3D;ã€!&#x3D;ç­‰<br>æŸ¥è¯¢å¼ ä¸‰åŒå­¦æ‰€åœ¨ç­çº§çš„ä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from class where cid=(select classid from student where sname=&#39;å¼ ä¸‰&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/2021030320275492.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>æŸ¥è¯¢æ¯”å¼ ä¸‰åŒå­¦æ‰€åœ¨ç­çº§ç¼–å·è¿˜å¤§çš„ç­çº§çš„ä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from class where cid&gt;(select classid from student where sname=&#39;å¼ ä¸‰&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210303203231622.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="2-å¸¦EXISTSå…³é”®å­—çš„å­æŸ¥è¯¢"><a href="#2-å¸¦EXISTSå…³é”®å­—çš„å­æŸ¥è¯¢" class="headerlink" title="2.å¸¦EXISTSå…³é”®å­—çš„å­æŸ¥è¯¢"></a>2.å¸¦EXISTSå…³é”®å­—çš„å­æŸ¥è¯¢</h2><p>EXISTSå…³é”®å­—åé¢çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ä¸€ä¸ªå­æŸ¥è¯¢ï¼Œ å®ƒä¸äº§ç”Ÿä»»ä½•æ•°æ®åªè¿”å›TRUEæˆ–FALSEã€‚å½“è¿”å›å€¼ä¸ºTRUEæ—¶å¤–å±‚æŸ¥è¯¢æ‰ä¼š æ‰§è¡Œ<br>å‡å¦‚ç‹äº”åŒå­¦åœ¨å­¦ç”Ÿè¡¨ä¸­åˆ™ä»ç­çº§è¡¨æŸ¥è¯¢æ‰€æœ‰ç­çº§ä¿¡æ¯ MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from class where exists (select * from student where sname=&#39;ç‹äº”&#39;);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210303203707252.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="3-å¸¦ANYå…³é”®å­—çš„å­æŸ¥è¯¢"><a href="#3-å¸¦ANYå…³é”®å­—çš„å­æŸ¥è¯¢" class="headerlink" title="3.å¸¦ANYå…³é”®å­—çš„å­æŸ¥è¯¢"></a>3.å¸¦ANYå…³é”®å­—çš„å­æŸ¥è¯¢</h2><p>ANYå…³é”®å­—è¡¨ç¤ºæ»¡è¶³å…¶ä¸­ä»»æ„ä¸€ä¸ªæ¡ä»¶å°±è¿”å›ä¸€ä¸ªç»“æœä½œä¸ºå¤–å±‚æŸ¥è¯¢æ¡ä»¶ã€‚</p><p>æŸ¥è¯¢æ¯”ä»»ä¸€å­¦ç”Ÿæ‰€å±ç­çº§å·è¿˜å¤§çš„ç­çº§ç¼–å· MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from class where cid &gt; any (select classid from student);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210303204057530.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="4-å¸¦ALLå…³é”®å­—çš„å­æŸ¥è¯¢"><a href="#4-å¸¦ALLå…³é”®å­—çš„å­æŸ¥è¯¢" class="headerlink" title="4.å¸¦ALLå…³é”®å­—çš„å­æŸ¥è¯¢"></a>4.å¸¦ALLå…³é”®å­—çš„å­æŸ¥è¯¢</h2><p>ALLå…³é”®å­—ä¸ANYæœ‰ç‚¹ç±»ä¼¼ï¼Œåªä¸è¿‡å¸¦ALLå…³é”®å­—çš„å­æŸ»è¯¢è¿”å›çš„ç»“æœéœ€åŒæ—¶æ»¡è¶³æ‰€æœ‰å†…å±‚æŸ»è¯¢æ¡ä»¶ã€‚</p><p>æŸ¥è¯¢æ¯”æ‰€æœ‰å­¦ç”Ÿæ‰€å±ç­çº§å·è¿˜å¤§çš„ç­çº§ç¼–å· MySQLå‘½ä»¤ï¼š</p><p>â€‹    <code>select * from class where cid &gt; all (select classid from student);</code></p><p>è¿è¡Œæ•ˆæœå±•ç¤º<br><img src="https://img-blog.csdnimg.cn/20210303204447489.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p><strong>é‡è¦</strong> ï¼ˆä»å…³é”®å­—åˆ†æï¼‰ï¼š<br><strong>æŸ¥è¯¢è¯­å¥çš„ä¹¦å†™é¡ºåºå’Œæ‰§è¡Œé¡ºåº</strong><br>select &#x3D;&#x3D;&#x3D;&gt; from &#x3D;&#x3D;&#x3D;&gt; where &#x3D;&#x3D;&#x3D;&gt; group by &#x3D;&#x3D;&#x3D;&gt; having &#x3D;&#x3D;&#x3D;&gt; order by &#x3D;&#x3D;&#x3D;&gt; limit<br><strong>æŸ¥è¯¢è¯­å¥çš„æ‰§è¡Œé¡ºåº</strong><br>from &#x3D;&#x3D;&#x3D;&gt; where &#x3D;&#x3D;&#x3D;&gt; group by &#x3D;&#x3D;&#x3D;&gt; having &#x3D;&#x3D;&#x3D;&gt; select &#x3D;&#x3D;&#x3D;&gt; order by &#x3D;&#x3D;&#x3D;&gt; limi</p><p>åŸºäºå¤ä¹ ï¼Œä¹äºåˆ†äº« æ‰€ä»¥æœ‰äº†è¿™ç¯‡æ–‡ç« ï¼ï¼ï¼<br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210303204835945.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><a href="https://blog.csdn.net/weixin_45851945/article/details/114287877?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522166815555416800186564683%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=166815555416800186564683&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-4-114287877-null-null.142%5Ev63%5Econtrol,201%5Ev3%5Econtrol_1,213%5Ev2%5Et3_esquery_v2&utm_term=mysql&spm=1018.2226.3001.4187">åŸæ–‡é“¾æ¥</a></p>]]></content>
    
    
    <categories>
      
      <category>Database</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SpringBoot2_å°šç¡…è°·</title>
    <link href="/2022/11/22/SpringBoot2_%E5%B0%9A%E7%A1%85%E8%B0%B7/"/>
    <url>/2022/11/22/SpringBoot2_%E5%B0%9A%E7%A1%85%E8%B0%B7/</url>
    
    <content type="html"><![CDATA[<h1 id="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-åŸºç¡€å…¥é—¨"><a href="#SpringBoot2æ ¸å¿ƒæŠ€æœ¯-åŸºç¡€å…¥é—¨" class="headerlink" title="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-åŸºç¡€å…¥é—¨"></a>SpringBoot2æ ¸å¿ƒæŠ€æœ¯-åŸºç¡€å…¥é—¨</h1><h2 id="01ã€åŸºç¡€å…¥é—¨-SpringBoot2è¯¾ç¨‹ä»‹ç»"><a href="#01ã€åŸºç¡€å…¥é—¨-SpringBoot2è¯¾ç¨‹ä»‹ç»" class="headerlink" title="01ã€åŸºç¡€å…¥é—¨-SpringBoot2è¯¾ç¨‹ä»‹ç»"></a>01ã€åŸºç¡€å…¥é—¨-SpringBoot2è¯¾ç¨‹ä»‹ç»</h2><ol><li><p>Spring Boot 2æ ¸å¿ƒæŠ€æœ¯</p></li><li><p>Spring Boot 2å“åº”å¼ç¼–ç¨‹</p></li></ol><ul><li>å­¦ä¹ è¦æ±‚<br>-ç†Ÿæ‚‰SpringåŸºç¡€<br>-ç†Ÿæ‚‰Mavenä½¿ç”¨</li><li>ç¯å¢ƒè¦æ±‚<ul><li>Java8åŠä»¥ä¸Š</li><li>Maven 3.3åŠä»¥ä¸Š</li></ul></li><li>å­¦ä¹ èµ„æ–™<ul><li><a href="https://spring.io/projects/spring-boot">Spring Bootå®˜ç½‘</a></li><li><a href="https://docs.spring.io/spring-boot/docs/">Spring Bootå®˜æ–¹æ–‡æ¡£</a></li><li><a href="https://www.yuque.com/atguigu/springboot">æœ¬è¯¾ç¨‹æ–‡æ¡£åœ°å€</a></li><li><a href="http://www.gulixueyuan.com/">è§†é¢‘åœ°å€1</a>ã€<a href="https://www.bilibili.com/video/BV19K4y1L7MT?p=1">è§†é¢‘åœ°å€2</a></li><li><a href="https://gitee.com/leifengyang/springboot2">æºç åœ°å€</a></li></ul></li></ul><h2 id="02ã€åŸºç¡€å…¥é—¨-Springç”Ÿæ€åœˆ"><a href="#02ã€åŸºç¡€å…¥é—¨-Springç”Ÿæ€åœˆ" class="headerlink" title="02ã€åŸºç¡€å…¥é—¨-Springç”Ÿæ€åœˆ"></a>02ã€åŸºç¡€å…¥é—¨-Springç”Ÿæ€åœˆ</h2><p><a href="https://spring.io/">Springå®˜ç½‘</a></p><h3 id="Springèƒ½åšä»€ä¹ˆ"><a href="#Springèƒ½åšä»€ä¹ˆ" class="headerlink" title="Springèƒ½åšä»€ä¹ˆ"></a>Springèƒ½åšä»€ä¹ˆ</h3><h4 id="Springçš„èƒ½åŠ›"><a href="#Springçš„èƒ½åŠ›" class="headerlink" title="Springçš„èƒ½åŠ›"></a>Springçš„èƒ½åŠ›</h4><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202207211322434.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="Springçš„ç”Ÿæ€"><a href="#Springçš„ç”Ÿæ€" class="headerlink" title="Springçš„ç”Ÿæ€"></a>Springçš„ç”Ÿæ€</h4><p>è¦†ç›–äº†ï¼š</p><ul><li>webå¼€å‘</li><li>æ•°æ®è®¿é—®</li><li>å®‰å…¨æ§åˆ¶</li><li>åˆ†å¸ƒå¼</li><li>æ¶ˆæ¯æœåŠ¡</li><li>ç§»åŠ¨å¼€å‘</li><li>æ‰¹å¤„ç†</li><li>â€¦â€¦</li></ul><h4 id="Spring5é‡å¤§å‡çº§"><a href="#Spring5é‡å¤§å‡çº§" class="headerlink" title="Spring5é‡å¤§å‡çº§"></a>Spring5é‡å¤§å‡çº§</h4><ul><li>å“åº”å¼ç¼–ç¨‹</li></ul><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205004250581.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ul><li>å†…éƒ¨æºç è®¾è®¡</li></ul><p>åŸºäºJava8çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œå¦‚ï¼šæ¥å£é»˜è®¤å®ç°ã€‚é‡æ–°è®¾è®¡æºç æ¶æ„ã€‚</p><h3 id="ä¸ºä»€ä¹ˆç”¨SpringBoot"><a href="#ä¸ºä»€ä¹ˆç”¨SpringBoot" class="headerlink" title="ä¸ºä»€ä¹ˆç”¨SpringBoot"></a>ä¸ºä»€ä¹ˆç”¨SpringBoot</h3><blockquote><p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can â€œjust runâ€.<a href="https://spring.io/projects/spring-boot">link</a></p><p>èƒ½å¿«é€Ÿåˆ›å»ºå‡ºç”Ÿäº§çº§åˆ«çš„Springåº”ç”¨ã€‚</p></blockquote><h4 id="SpringBootä¼˜ç‚¹"><a href="#SpringBootä¼˜ç‚¹" class="headerlink" title="SpringBootä¼˜ç‚¹"></a>SpringBootä¼˜ç‚¹</h4><ul><li><p>Create stand-alone Spring applications</p><ul><li>åˆ›å»ºç‹¬ç«‹Springåº”ç”¨</li></ul></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p><ul><li>å†…åµŒwebæœåŠ¡å™¨</li></ul></li><li><p>Provide opinionated â€˜starterâ€™ dependencies to simplify your build configuration</p><ul><li>è‡ªåŠ¨starterä¾èµ–ï¼Œç®€åŒ–æ„å»ºé…ç½®</li></ul></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p><ul><li>è‡ªåŠ¨é…ç½®Springä»¥åŠç¬¬ä¸‰æ–¹åŠŸèƒ½</li></ul></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p><ul><li>æä¾›ç”Ÿäº§çº§åˆ«çš„ç›‘æ§ã€å¥åº·æ£€æŸ¥åŠå¤–éƒ¨åŒ–é…ç½®</li></ul></li><li><p>Absolutely no code generation and no requirement for XML configuration</p><ul><li>æ— ä»£ç ç”Ÿæˆã€æ— éœ€ç¼–å†™XML</li></ul></li><li><p>SpringBootæ˜¯æ•´åˆSpringæŠ€æœ¯æ ˆçš„ä¸€ç«™å¼æ¡†æ¶</p></li><li><p>SpringBootæ˜¯ç®€åŒ–SpringæŠ€æœ¯æ ˆçš„å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶</p></li></ul><h4 id="SpringBootç¼ºç‚¹"><a href="#SpringBootç¼ºç‚¹" class="headerlink" title="SpringBootç¼ºç‚¹"></a>SpringBootç¼ºç‚¹</h4><ul><li>äººç§°ç‰ˆæœ¬å¸ï¼Œè¿­ä»£å¿«ï¼Œéœ€è¦æ—¶åˆ»å…³æ³¨å˜åŒ–</li><li>å°è£…å¤ªæ·±ï¼Œå†…éƒ¨åŸç†å¤æ‚ï¼Œä¸å®¹æ˜“ç²¾é€š</li></ul><h2 id="03ã€åŸºç¡€å…¥é—¨-SpringBootçš„å¤§æ—¶ä»£èƒŒæ™¯"><a href="#03ã€åŸºç¡€å…¥é—¨-SpringBootçš„å¤§æ—¶ä»£èƒŒæ™¯" class="headerlink" title="03ã€åŸºç¡€å…¥é—¨-SpringBootçš„å¤§æ—¶ä»£èƒŒæ™¯"></a>03ã€åŸºç¡€å…¥é—¨-SpringBootçš„å¤§æ—¶ä»£èƒŒæ™¯</h2><h3 id="å¾®æœåŠ¡"><a href="#å¾®æœåŠ¡" class="headerlink" title="å¾®æœåŠ¡"></a>å¾®æœåŠ¡</h3><blockquote><p>In short, the <strong>microservice architectural style</strong> is an approach to developing a single application as a <strong>suite of small services</strong>, each <strong>running in its own process</strong> and communicating with <strong>lightweight</strong> mechanisms, often an <strong>HTTP</strong> resource API. These services are built around <strong>business capabilities</strong> and <strong>independently deployable</strong> by fully <strong>automated deployment</strong> machinery. There is a bare minimum of centralized management of these services, which may be <strong>written in different programming languages</strong> and use different data storage technologies.â€”â€”<a href="https://martinfowler.com/articles/microservices.html">James Lewis and Martin Fowler (2014)</a></p></blockquote><ul><li>å¾®æœåŠ¡æ˜¯ä¸€ç§æ¶æ„é£æ ¼</li><li>ä¸€ä¸ªåº”ç”¨æ‹†åˆ†ä¸ºä¸€ç»„å°å‹æœåŠ¡</li><li>æ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨è‡ªå·±çš„è¿›ç¨‹å†…ï¼Œä¹Ÿå°±æ˜¯å¯ç‹¬ç«‹éƒ¨ç½²å’Œå‡çº§</li><li>æœåŠ¡ä¹‹é—´ä½¿ç”¨è½»é‡çº§HTTPäº¤äº’</li><li>æœåŠ¡å›´ç»•ä¸šåŠ¡åŠŸèƒ½æ‹†åˆ†</li><li>å¯ä»¥ç”±å…¨è‡ªåŠ¨éƒ¨ç½²æœºåˆ¶ç‹¬ç«‹éƒ¨ç½²</li><li>å»ä¸­å¿ƒåŒ–ï¼ŒæœåŠ¡è‡ªæ²»ã€‚æœåŠ¡å¯ä»¥ä½¿ç”¨ä¸åŒçš„è¯­è¨€ã€ä¸åŒçš„å­˜å‚¨æŠ€æœ¯</li></ul><h3 id="åˆ†å¸ƒå¼"><a href="#åˆ†å¸ƒå¼" class="headerlink" title="åˆ†å¸ƒå¼"></a>åˆ†å¸ƒå¼</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202207211310801.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h4 id="åˆ†å¸ƒå¼çš„å›°éš¾"><a href="#åˆ†å¸ƒå¼çš„å›°éš¾" class="headerlink" title="åˆ†å¸ƒå¼çš„å›°éš¾"></a>åˆ†å¸ƒå¼çš„å›°éš¾</h4><ul><li>è¿œç¨‹è°ƒç”¨</li><li>æœåŠ¡å‘ç°</li><li>è´Ÿè½½å‡è¡¡</li><li>æœåŠ¡å®¹é”™</li><li>é…ç½®ç®¡ç†</li><li>æœåŠ¡ç›‘æ§</li><li>é“¾è·¯è¿½è¸ª</li><li>æ—¥å¿—ç®¡ç†</li><li>ä»»åŠ¡è°ƒåº¦</li><li>â€¦â€¦</li></ul><h4 id="åˆ†å¸ƒå¼çš„è§£å†³"><a href="#åˆ†å¸ƒå¼çš„è§£å†³" class="headerlink" title="åˆ†å¸ƒå¼çš„è§£å†³"></a>åˆ†å¸ƒå¼çš„è§£å†³</h4><ul><li>SpringBoot + SpringCloud</li></ul><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205004523307.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="äº‘åŸç”Ÿ"><a href="#äº‘åŸç”Ÿ" class="headerlink" title="äº‘åŸç”Ÿ"></a>äº‘åŸç”Ÿ</h3><p>åŸç”Ÿåº”ç”¨å¦‚ä½•ä¸Šäº‘ã€‚ Cloud Native</p><h4 id="ä¸Šäº‘çš„å›°éš¾"><a href="#ä¸Šäº‘çš„å›°éš¾" class="headerlink" title="ä¸Šäº‘çš„å›°éš¾"></a>ä¸Šäº‘çš„å›°éš¾</h4><ul><li>æœåŠ¡è‡ªæ„ˆ</li><li>å¼¹æ€§ä¼¸ç¼©</li><li>æœåŠ¡éš”ç¦»</li><li>è‡ªåŠ¨åŒ–éƒ¨ç½²</li><li>ç°åº¦å‘å¸ƒ</li><li>æµé‡æ²»ç†</li><li>â€¦â€¦</li></ul><h4 id="ä¸Šäº‘çš„è§£å†³"><a href="#ä¸Šäº‘çš„è§£å†³" class="headerlink" title="ä¸Šäº‘çš„è§£å†³"></a>ä¸Šäº‘çš„è§£å†³</h4><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205004621290.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="04ã€åŸºç¡€å…¥é—¨-SpringBootå®˜æ–¹æ–‡æ¡£æ¶æ„"><a href="#04ã€åŸºç¡€å…¥é—¨-SpringBootå®˜æ–¹æ–‡æ¡£æ¶æ„" class="headerlink" title="04ã€åŸºç¡€å…¥é—¨-SpringBootå®˜æ–¹æ–‡æ¡£æ¶æ„"></a>04ã€åŸºç¡€å…¥é—¨-SpringBootå®˜æ–¹æ–‡æ¡£æ¶æ„</h2><ul><li><a href="https://spring.io/projects/spring-boot">Spring Bootå®˜ç½‘</a></li><li><a href="https://docs.spring.io/spring-boot/docs/">Spring Bootå®˜æ–¹æ–‡æ¡£</a></li></ul><h3 id="å®˜ç½‘æ–‡æ¡£æ¶æ„"><a href="#å®˜ç½‘æ–‡æ¡£æ¶æ„" class="headerlink" title="å®˜ç½‘æ–‡æ¡£æ¶æ„"></a>å®˜ç½‘æ–‡æ¡£æ¶æ„</h3><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205004733270.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205004828702.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><a href="https://github.com/spring-projects/spring-boot/wiki#release-notes">æŸ¥çœ‹ç‰ˆæœ¬æ–°ç‰¹æ€§</a></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205005342147.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="05ã€åŸºç¡€å…¥é—¨-SpringBoot-HelloWorld"><a href="#05ã€åŸºç¡€å…¥é—¨-SpringBoot-HelloWorld" class="headerlink" title="05ã€åŸºç¡€å…¥é—¨-SpringBoot-HelloWorld"></a>05ã€åŸºç¡€å…¥é—¨-SpringBoot-HelloWorld</h2><h3 id="ç³»ç»Ÿè¦æ±‚"><a href="#ç³»ç»Ÿè¦æ±‚" class="headerlink" title="ç³»ç»Ÿè¦æ±‚"></a>ç³»ç»Ÿè¦æ±‚</h3><ul><li>Java 8</li><li>Maven 3.3+</li><li>IntelliJ IDEA 2019.1.2</li></ul><h4 id="Mavené…ç½®æ–‡ä»¶"><a href="#Mavené…ç½®æ–‡ä»¶" class="headerlink" title="Mavené…ç½®æ–‡ä»¶"></a>Mavené…ç½®æ–‡ä»¶</h4><p>æ–°æ·»å†…å®¹ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mirrors</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Nexus aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mirrors</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">profiles</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">profile</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>jdk-1.8<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">activation</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">activeByDefault</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">activeByDefault</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">jdk</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">jdk</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">activation</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.compilerVersion</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">profile</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">profiles</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="HelloWorldé¡¹ç›®"><a href="#HelloWorldé¡¹ç›®" class="headerlink" title="HelloWorldé¡¹ç›®"></a>HelloWorldé¡¹ç›®</h3><p>éœ€æ±‚ï¼šæµè§ˆå‘é€&#x2F;helloè¯·æ±‚ï¼Œå“åº” â€œHelloï¼ŒSpring Boot 2â€</p><h4 id="åˆ›å»ºmavenå·¥ç¨‹"><a href="#åˆ›å»ºmavenå·¥ç¨‹" class="headerlink" title="åˆ›å»ºmavenå·¥ç¨‹"></a>åˆ›å»ºmavenå·¥ç¨‹</h4><h4 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="headerlink" title="å¼•å…¥ä¾èµ–"></a>å¼•å…¥ä¾èµ–</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="åˆ›å»ºä¸»ç¨‹åº"><a href="#åˆ›å»ºä¸»ç¨‹åº" class="headerlink" title="åˆ›å»ºä¸»ç¨‹åº"></a>åˆ›å»ºä¸»ç¨‹åº</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(MainApplication.class, args);<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><h4 id="ç¼–å†™ä¸šåŠ¡"><a href="#ç¼–å†™ä¸šåŠ¡" class="headerlink" title="ç¼–å†™ä¸šåŠ¡"></a>ç¼–å†™ä¸šåŠ¡</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;<br><span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RestController;<br><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handle01</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Spring Boot 2!&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h4 id="è¿è¡Œ-amp-æµ‹è¯•"><a href="#è¿è¡Œ-amp-æµ‹è¯•" class="headerlink" title="è¿è¡Œ&amp;æµ‹è¯•"></a>è¿è¡Œ&amp;æµ‹è¯•</h4><ul><li>è¿è¡Œ<code>MainApplication</code>ç±»</li><li>æµè§ˆå™¨è¾“å…¥<code>http://localhost:8888/hello</code>ï¼Œå°†ä¼šè¾“å‡º<code>Hello, Spring Boot 2!</code>ã€‚</li></ul><h4 id="è®¾ç½®é…ç½®"><a href="#è®¾ç½®é…ç½®" class="headerlink" title="è®¾ç½®é…ç½®"></a>è®¾ç½®é…ç½®</h4><p>mavenå·¥ç¨‹çš„resourceæ–‡ä»¶å¤¹ä¸­åˆ›å»ºapplication.propertiesæ–‡ä»¶ã€‚</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># è®¾ç½®ç«¯å£å·</span><br><span class="hljs-attr">server.port</span>=<span class="hljs-string">8888</span><br></code></pre></td></tr></table></figure><p><a href="https://docs.spring.io/spring-boot/docs/2.3.7.RELEASE/reference/html/appendix-application-properties.html#common-application-properties-server">æ›´å¤šé…ç½®ä¿¡æ¯</a></p><h4 id="æ‰“åŒ…éƒ¨ç½²"><a href="#æ‰“åŒ…éƒ¨ç½²" class="headerlink" title="æ‰“åŒ…éƒ¨ç½²"></a>æ‰“åŒ…éƒ¨ç½²</h4><p>åœ¨pom.xmlæ·»åŠ </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨IDEAçš„Mavenæ’ä»¶ä¸Šç‚¹å‡»è¿è¡Œ clean ã€packageï¼ŒæŠŠhelloworldå·¥ç¨‹é¡¹ç›®çš„æ‰“åŒ…æˆjaråŒ…ï¼Œ</p><p>æ‰“åŒ…å¥½çš„jaråŒ…è¢«ç”Ÿæˆåœ¨helloworldå·¥ç¨‹é¡¹ç›®çš„targetæ–‡ä»¶å¤¹å†…ã€‚</p><p>ç”¨cmdè¿è¡Œ<code>java -jar boot-01-helloworld-1.0-SNAPSHOT.jar</code>ï¼Œæ—¢å¯ä»¥è¿è¡Œhelloworldå·¥ç¨‹é¡¹ç›®ã€‚</p><p>å°†jaråŒ…ç›´æ¥åœ¨ç›®æ ‡æœåŠ¡å™¨æ‰§è¡Œå³å¯ã€‚</p><h2 id="06ã€åŸºç¡€å…¥é—¨-SpringBoot-ä¾èµ–ç®¡ç†ç‰¹æ€§"><a href="#06ã€åŸºç¡€å…¥é—¨-SpringBoot-ä¾èµ–ç®¡ç†ç‰¹æ€§" class="headerlink" title="06ã€åŸºç¡€å…¥é—¨-SpringBoot-ä¾èµ–ç®¡ç†ç‰¹æ€§"></a>06ã€åŸºç¡€å…¥é—¨-SpringBoot-ä¾èµ–ç®¡ç†ç‰¹æ€§</h2><ul><li>çˆ¶é¡¹ç›®åšä¾èµ–ç®¡ç†</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml">ä¾èµ–ç®¡ç†<br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>ä¸Šé¢é¡¹ç›®çš„çˆ¶é¡¹ç›®å¦‚ä¸‹ï¼š<br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><br>å®ƒå‡ ä¹å£°æ˜äº†æ‰€æœ‰å¼€å‘ä¸­å¸¸ç”¨çš„ä¾èµ–çš„ç‰ˆæœ¬å·ï¼Œè‡ªåŠ¨ç‰ˆæœ¬ä»²è£æœºåˆ¶<br></code></pre></td></tr></table></figure><ul><li>å¼€å‘å¯¼å…¥starteråœºæ™¯å¯åŠ¨å™¨<ol><li>è§åˆ°å¾ˆå¤š spring-boot-starter-* ï¼š *å°±æŸç§åœºæ™¯</li><li>åªè¦å¼•å…¥starterï¼Œè¿™ä¸ªåœºæ™¯çš„æ‰€æœ‰å¸¸è§„éœ€è¦çš„ä¾èµ–æˆ‘ä»¬éƒ½è‡ªåŠ¨å¼•å…¥</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter">æ›´å¤šSpringBootæ‰€æœ‰æ”¯æŒçš„åœºæ™¯</a></li><li>è§åˆ°çš„  *-spring-boot-starterï¼š ç¬¬ä¸‰æ–¹ä¸ºæˆ‘ä»¬æä¾›çš„ç®€åŒ–å¼€å‘çš„åœºæ™¯å¯åŠ¨å™¨ã€‚</li></ol></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml">æ‰€æœ‰åœºæ™¯å¯åŠ¨å™¨æœ€åº•å±‚çš„ä¾èµ–<br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p>æ— éœ€å…³æ³¨ç‰ˆæœ¬å·ï¼Œè‡ªåŠ¨ç‰ˆæœ¬ä»²è£</p><ol><li>å¼•å…¥ä¾èµ–é»˜è®¤éƒ½å¯ä»¥ä¸å†™ç‰ˆæœ¬</li><li>å¼•å…¥éç‰ˆæœ¬ä»²è£çš„jarï¼Œè¦å†™ç‰ˆæœ¬å·ã€‚</li></ol></li><li><p>å¯ä»¥ä¿®æ”¹é»˜è®¤ç‰ˆæœ¬å·</p><ol><li>æŸ¥çœ‹spring-boot-dependenciesé‡Œé¢è§„å®šå½“å‰ä¾èµ–çš„ç‰ˆæœ¬ ç”¨çš„ keyã€‚</li><li>åœ¨å½“å‰é¡¹ç›®é‡Œé¢é‡å†™é…ç½®ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ã€‚</li></ol></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mysql.version</span>&gt;</span>5.1.43<span class="hljs-tag">&lt;/<span class="hljs-name">mysql.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><p>IDEAå¿«æ·é”®ï¼š</p><ul><li><code> ctrl + shift + alt + U</code>ï¼šä»¥å›¾çš„æ–¹å¼æ˜¾ç¤ºé¡¹ç›®ä¸­ä¾èµ–ä¹‹é—´çš„å…³ç³»ã€‚</li><li><code>alt + ins</code>ï¼šç›¸å½“äºEclipseçš„ Ctrl + Nï¼Œåˆ›å»ºæ–°ç±»ï¼Œæ–°åŒ…ç­‰ã€‚</li></ul><h2 id="07ã€åŸºç¡€å…¥é—¨-SpringBoot-è‡ªåŠ¨é…ç½®ç‰¹æ€§"><a href="#07ã€åŸºç¡€å…¥é—¨-SpringBoot-è‡ªåŠ¨é…ç½®ç‰¹æ€§" class="headerlink" title="07ã€åŸºç¡€å…¥é—¨-SpringBoot-è‡ªåŠ¨é…ç½®ç‰¹æ€§"></a>07ã€åŸºç¡€å…¥é—¨-SpringBoot-è‡ªåŠ¨é…ç½®ç‰¹æ€§</h2><ul><li>è‡ªåŠ¨é…å¥½Tomcat<ul><li>å¼•å…¥Tomcatä¾èµ–ã€‚</li><li>é…ç½®Tomcat</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p>è‡ªåŠ¨é…å¥½SpringMVC</p><ul><li>å¼•å…¥SpringMVCå…¨å¥—ç»„ä»¶</li><li>è‡ªåŠ¨é…å¥½SpringMVCå¸¸ç”¨ç»„ä»¶ï¼ˆåŠŸèƒ½ï¼‰</li></ul></li><li><p>è‡ªåŠ¨é…å¥½Webå¸¸è§åŠŸèƒ½ï¼Œå¦‚ï¼šå­—ç¬¦ç¼–ç é—®é¢˜</p><ul><li>SpringBootå¸®æˆ‘ä»¬é…ç½®å¥½äº†æ‰€æœ‰webå¼€å‘çš„å¸¸è§åœºæ™¯</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span><br>    <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">run</span> <span class="hljs-operator">=</span> SpringApplication.run(MainApplication.class, args);<br><br>    <span class="hljs-comment">//2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶</span><br>    String[] names = run.getBeanDefinitionNames();<br>    <span class="hljs-keyword">for</span> (String name : names) &#123;<br>        System.out.println(name);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>é»˜è®¤çš„åŒ…ç»“æ„<ul><li>ä¸»ç¨‹åºæ‰€åœ¨åŒ…åŠå…¶ä¸‹é¢çš„æ‰€æœ‰å­åŒ…é‡Œé¢çš„ç»„ä»¶éƒ½ä¼šè¢«é»˜è®¤æ‰«æè¿›æ¥</li><li>æ— éœ€ä»¥å‰çš„åŒ…æ‰«æé…ç½®</li><li>æƒ³è¦æ”¹å˜æ‰«æè·¯å¾„<ul><li>@SpringBootApplication(scanBasePackages&#x3D;â€com.lunâ€)</li><li>@ComponentScan æŒ‡å®šæ‰«æè·¯å¾„</li></ul></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br>ç­‰åŒäº<br><span class="hljs-meta">@SpringBootConfiguration</span><br><span class="hljs-meta">@EnableAutoConfiguration</span><br><span class="hljs-meta">@ComponentScan(&quot;com.lun&quot;)</span><br></code></pre></td></tr></table></figure><ul><li><p>å„ç§é…ç½®æ‹¥æœ‰é»˜è®¤å€¼</p><ul><li>é»˜è®¤é…ç½®æœ€ç»ˆéƒ½æ˜¯æ˜ å°„åˆ°æŸä¸ªç±»ä¸Šï¼Œå¦‚ï¼š<code>MultipartProperties</code></li><li>é…ç½®æ–‡ä»¶çš„å€¼æœ€ç»ˆä¼šç»‘å®šæ¯ä¸ªç±»ä¸Šï¼Œè¿™ä¸ªç±»ä¼šåœ¨å®¹å™¨ä¸­åˆ›å»ºå¯¹è±¡</li></ul></li><li><h2 id="æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹-éå¸¸å¤šçš„starter-å¼•å…¥äº†å“ªäº›åœºæ™¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯-SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨-spring-boot-autoconfigure-åŒ…é‡Œé¢"><a href="#æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹-éå¸¸å¤šçš„starter-å¼•å…¥äº†å“ªäº›åœºæ™¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯-SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨-spring-boot-autoconfigure-åŒ…é‡Œé¢" class="headerlink" title="æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹- éå¸¸å¤šçš„starter- å¼•å…¥äº†å“ªäº›åœºæ™¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯- SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨ spring-boot-autoconfigure åŒ…é‡Œé¢"></a>æŒ‰éœ€åŠ è½½æ‰€æœ‰è‡ªåŠ¨é…ç½®é¡¹<br>- éå¸¸å¤šçš„starter<br>- å¼•å…¥äº†å“ªäº›åœºæ™¯è¿™ä¸ªåœºæ™¯çš„è‡ªåŠ¨é…ç½®æ‰ä¼šå¼€å¯<br>- SpringBootæ‰€æœ‰çš„è‡ªåŠ¨é…ç½®åŠŸèƒ½éƒ½åœ¨ spring-boot-autoconfigure åŒ…é‡Œé¢</h2></li><li><p>â€¦â€¦</p></li></ul><h2 id="08ã€åº•å±‚æ³¨è§£-Configurationè¯¦è§£"><a href="#08ã€åº•å±‚æ³¨è§£-Configurationè¯¦è§£" class="headerlink" title="08ã€åº•å±‚æ³¨è§£-@Configurationè¯¦è§£"></a>08ã€åº•å±‚æ³¨è§£-@Configurationè¯¦è§£</h2><ul><li>åŸºæœ¬ä½¿ç”¨<ul><li>Fullæ¨¡å¼ä¸Liteæ¨¡å¼</li><li>ç¤ºä¾‹</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 1ã€é…ç½®ç±»é‡Œé¢ä½¿ç”¨<span class="hljs-doctag">@Bean</span>æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šç»™å®¹å™¨æ³¨å†Œç»„ä»¶ï¼Œé»˜è®¤ä¹Ÿæ˜¯å•å®ä¾‹çš„</span><br><span class="hljs-comment"> * 2ã€é…ç½®ç±»æœ¬èº«ä¹Ÿæ˜¯ç»„ä»¶</span><br><span class="hljs-comment"> * 3ã€proxyBeanMethodsï¼šä»£ç†beançš„æ–¹æ³•</span><br><span class="hljs-comment"> *      Full(proxyBeanMethods = true)ï¼ˆä¿è¯æ¯ä¸ª<span class="hljs-doctag">@Bean</span>æ–¹æ³•è¢«è°ƒç”¨å¤šå°‘æ¬¡è¿”å›çš„ç»„ä»¶éƒ½æ˜¯å•å®ä¾‹çš„ï¼‰ï¼ˆé»˜è®¤ï¼‰</span><br><span class="hljs-comment"> *      Lite(proxyBeanMethods = false)ï¼ˆæ¯ä¸ª<span class="hljs-doctag">@Bean</span>æ–¹æ³•è¢«è°ƒç”¨å¤šå°‘æ¬¡è¿”å›çš„ç»„ä»¶éƒ½æ˜¯æ–°åˆ›å»ºçš„ï¼‰</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span> <span class="hljs-comment">//å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Full:å¤–éƒ¨æ— è®ºå¯¹é…ç½®ç±»ä¸­çš„è¿™ä¸ªç»„ä»¶æ³¨å†Œæ–¹æ³•è°ƒç”¨å¤šå°‘æ¬¡è·å–çš„éƒ½æ˜¯ä¹‹å‰æ³¨å†Œå®¹å™¨ä¸­çš„å•å®ä¾‹å¯¹è±¡</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span> <span class="hljs-comment">//ç»™å®¹å™¨ä¸­æ·»åŠ ç»„ä»¶ã€‚ä»¥æ–¹æ³•åä½œä¸ºç»„ä»¶çš„idã€‚è¿”å›ç±»å‹å°±æ˜¯ç»„ä»¶ç±»å‹ã€‚è¿”å›çš„å€¼ï¼Œå°±æ˜¯ç»„ä»¶åœ¨å®¹å™¨ä¸­çš„å®ä¾‹</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">user01</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">zhangsan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-number">18</span>);<br>        <span class="hljs-comment">//userç»„ä»¶ä¾èµ–äº†Petç»„ä»¶</span><br>        zhangsan.setPet(tomcatPet());<br>        <span class="hljs-keyword">return</span> zhangsan;<br>    &#125;<br><br>    <span class="hljs-meta">@Bean(&quot;tom&quot;)</span><br>    <span class="hljs-keyword">public</span> Pet <span class="hljs-title function_">tomcatPet</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pet</span>(<span class="hljs-string">&quot;tomcat&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>@Configurationæµ‹è¯•ä»£ç å¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootConfiguration</span><br><span class="hljs-meta">@EnableAutoConfiguration</span><br><span class="hljs-meta">@ComponentScan(&quot;com.atguigu.boot&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span><br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">run</span> <span class="hljs-operator">=</span> SpringApplication.run(MainApplication.class, args);<br><br>    <span class="hljs-comment">//2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶</span><br>        String[] names = run.getBeanDefinitionNames();<br>        <span class="hljs-keyword">for</span> (String name : names) &#123;<br>            System.out.println(name);<br>        &#125;<br><br>    <span class="hljs-comment">//3ã€ä»å®¹å™¨ä¸­è·å–ç»„ä»¶</span><br>        <span class="hljs-type">Pet</span> <span class="hljs-variable">tom01</span> <span class="hljs-operator">=</span> run.getBean(<span class="hljs-string">&quot;tom&quot;</span>, Pet.class);<br>        <span class="hljs-type">Pet</span> <span class="hljs-variable">tom02</span> <span class="hljs-operator">=</span> run.getBean(<span class="hljs-string">&quot;tom&quot;</span>, Pet.class);<br>        System.out.println(<span class="hljs-string">&quot;ç»„ä»¶ï¼š&quot;</span>+(tom01 == tom02));<br><br>    <span class="hljs-comment">//4ã€com.atguigu.boot.config.MyConfig$$EnhancerBySpringCGLIB$$51f1e1ca@1654a892</span><br>        <span class="hljs-type">MyConfig</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> run.getBean(MyConfig.class);<br>        System.out.println(bean);<br><br>    <span class="hljs-comment">//å¦‚æœ@Configuration(proxyBeanMethods = true)ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•ã€‚SpringBootæ€»ä¼šæ£€æŸ¥è¿™ä¸ªç»„ä»¶æ˜¯å¦åœ¨å®¹å™¨ä¸­æœ‰ã€‚</span><br>        <span class="hljs-comment">//ä¿æŒç»„ä»¶å•å®ä¾‹</span><br>        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> bean.user01();<br>        <span class="hljs-type">User</span> <span class="hljs-variable">user1</span> <span class="hljs-operator">=</span> bean.user01();<br>        System.out.println(user == user1);<br><br>        <span class="hljs-type">User</span> <span class="hljs-variable">user01</span> <span class="hljs-operator">=</span> run.getBean(<span class="hljs-string">&quot;user01&quot;</span>, User.class);<br>        <span class="hljs-type">Pet</span> <span class="hljs-variable">tom</span> <span class="hljs-operator">=</span> run.getBean(<span class="hljs-string">&quot;tom&quot;</span>, Pet.class);<br><br>        System.out.println(<span class="hljs-string">&quot;ç”¨æˆ·çš„å® ç‰©ï¼š&quot;</span>+(user01.getPet() == tom));<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>æœ€ä½³å®æˆ˜<ul><li>é…ç½® ç±»ç»„ä»¶ä¹‹é—´<strong>æ— ä¾èµ–å…³ç³»</strong>ç”¨Liteæ¨¡å¼åŠ é€Ÿå®¹å™¨å¯åŠ¨è¿‡ç¨‹ï¼Œå‡å°‘åˆ¤æ–­</li><li>é…ç½® ç±»ç»„ä»¶ä¹‹é—´<strong>æœ‰ä¾èµ–å…³ç³»</strong>ï¼Œæ–¹æ³•ä¼šè¢«è°ƒç”¨å¾—åˆ°ä¹‹å‰å•å®ä¾‹ç»„ä»¶ï¼Œç”¨Fullæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰</li></ul></li></ul><blockquote><p>lite è‹± [laÉªt]   ç¾ [laÉªt]<br>adj. ä½çƒ­é‡çš„ï¼Œæ¸…æ·¡çš„(lightçš„ä¸€ç§æ‹¼å†™æ–¹æ³•);ç±»ä¼¼â€¦çš„åŠ£è´¨å“</p></blockquote><hr><p>IDEAå¿«æ·é”®ï¼š</p><ul><li><code>Alt + Ins</code>:ç”Ÿæˆgetterï¼Œsetterã€æ„é€ å™¨ç­‰ä»£ç ã€‚</li><li><code>Ctrl + Alt + B</code>:æŸ¥çœ‹ç±»çš„å…·ä½“å®ç°ä»£ç ã€‚</li></ul><h2 id="09ã€åº•å±‚æ³¨è§£-Importå¯¼å…¥ç»„ä»¶"><a href="#09ã€åº•å±‚æ³¨è§£-Importå¯¼å…¥ç»„ä»¶" class="headerlink" title="09ã€åº•å±‚æ³¨è§£-@Importå¯¼å…¥ç»„ä»¶"></a>09ã€åº•å±‚æ³¨è§£-@Importå¯¼å…¥ç»„ä»¶</h2><p>@Beanã€@Componentã€@Controllerã€@Serviceã€@Repositoryï¼Œå®ƒä»¬æ˜¯Springçš„åŸºæœ¬æ ‡ç­¾ï¼Œåœ¨Spring Bootä¸­å¹¶æœªæ”¹å˜å®ƒä»¬åŸæ¥çš„åŠŸèƒ½ã€‚</p><p>@ComponentScan åœ¨<a href="#">07ã€åŸºç¡€å…¥é—¨-SpringBoot-è‡ªåŠ¨é…ç½®ç‰¹æ€§</a>æœ‰ç”¨ä¾‹ã€‚</p><p>@Import({User.class, DBHelper.class})ç»™å®¹å™¨ä¸­<strong>è‡ªåŠ¨åˆ›å»ºå‡ºè¿™ä¸¤ä¸ªç±»å‹çš„ç»„ä»¶</strong>ã€é»˜è®¤ç»„ä»¶çš„åå­—å°±æ˜¯å…¨ç±»å</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Import(&#123;User.class, DBHelper.class&#125;)</span><br><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span> <span class="hljs-comment">//å‘Šè¯‰SpringBootè¿™æ˜¯ä¸€ä¸ªé…ç½®ç±» == é…ç½®æ–‡ä»¶</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span><br><span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">run</span> <span class="hljs-operator">=</span> SpringApplication.run(MainApplication.class, args);<br><br><span class="hljs-comment">//...</span><br><br><span class="hljs-comment">//5ã€è·å–ç»„ä»¶</span><br>String[] beanNamesForType = run.getBeanNamesForType(User.class);<br><br><span class="hljs-keyword">for</span> (String s : beanNamesForType) &#123;<br>    System.out.println(s);<br>&#125;<br><br><span class="hljs-type">DBHelper</span> <span class="hljs-variable">bean1</span> <span class="hljs-operator">=</span> run.getBean(DBHelper.class);<br>System.out.println(bean1);<br></code></pre></td></tr></table></figure><h2 id="10ã€åº•å±‚æ³¨è§£-Conditionalæ¡ä»¶è£…é…"><a href="#10ã€åº•å±‚æ³¨è§£-Conditionalæ¡ä»¶è£…é…" class="headerlink" title="10ã€åº•å±‚æ³¨è§£-@Conditionalæ¡ä»¶è£…é…"></a>10ã€åº•å±‚æ³¨è§£-@Conditionalæ¡ä»¶è£…é…</h2><p><strong>æ¡ä»¶è£…é…ï¼šæ»¡è¶³ConditionalæŒ‡å®šçš„æ¡ä»¶ï¼Œåˆ™è¿›è¡Œç»„ä»¶æ³¨å…¥</strong></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205005453173.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>ç”¨@ConditionalOnMissingBeanä¸¾ä¾‹è¯´æ˜</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(name = &quot;tom&quot;)</span><span class="hljs-comment">//æ²¡æœ‰tomåå­—çš„Beanæ—¶ï¼ŒMyConfigç±»çš„Beanæ‰èƒ½ç”Ÿæ•ˆã€‚</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">user01</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">User</span> <span class="hljs-variable">zhangsan</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-number">18</span>);<br>        zhangsan.setPet(tomcatPet());<br>        <span class="hljs-keyword">return</span> zhangsan;<br>    &#125;<br><br>    <span class="hljs-meta">@Bean(&quot;tom22&quot;)</span><br>    <span class="hljs-keyword">public</span> Pet <span class="hljs-title function_">tomcatPet</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pet</span>(<span class="hljs-string">&quot;tomcat&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span><br>    <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">run</span> <span class="hljs-operator">=</span> SpringApplication.run(MainApplication.class, args);<br><br>    <span class="hljs-comment">//2ã€æŸ¥çœ‹å®¹å™¨é‡Œé¢çš„ç»„ä»¶</span><br>    String[] names = run.getBeanDefinitionNames();<br>    <span class="hljs-keyword">for</span> (String name : names) &#123;<br>        System.out.println(name);<br>    &#125;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">tom</span> <span class="hljs-operator">=</span> run.containsBean(<span class="hljs-string">&quot;tom&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;å®¹å™¨ä¸­Tomç»„ä»¶ï¼š&quot;</span>+tom);<span class="hljs-comment">//false</span><br><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">user01</span> <span class="hljs-operator">=</span> run.containsBean(<span class="hljs-string">&quot;user01&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;å®¹å™¨ä¸­user01ç»„ä»¶ï¼š&quot;</span>+user01);<span class="hljs-comment">//true</span><br><br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">tom22</span> <span class="hljs-operator">=</span> run.containsBean(<span class="hljs-string">&quot;tom22&quot;</span>);<br>    System.out.println(<span class="hljs-string">&quot;å®¹å™¨ä¸­tom22ç»„ä»¶ï¼š&quot;</span>+tom22);<span class="hljs-comment">//true</span><br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="11ã€åº•å±‚æ³¨è§£-ImportResourceå¯¼å…¥Springé…ç½®æ–‡ä»¶"><a href="#11ã€åº•å±‚æ³¨è§£-ImportResourceå¯¼å…¥Springé…ç½®æ–‡ä»¶" class="headerlink" title="11ã€åº•å±‚æ³¨è§£-@ImportResourceå¯¼å…¥Springé…ç½®æ–‡ä»¶"></a>11ã€åº•å±‚æ³¨è§£-@ImportResourceå¯¼å…¥Springé…ç½®æ–‡ä»¶</h2><p>æ¯”å¦‚ï¼Œå…¬å¸ä½¿ç”¨bean.xmlæ–‡ä»¶ç”Ÿæˆé…ç½®beanï¼Œç„¶è€Œä½ ä¸ºäº†çœäº‹ï¼Œæƒ³ç»§ç»­å¤ç”¨bean.xmlï¼Œ@ImportResourceç²‰å¢¨ç™»åœºã€‚</p><p>bean.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">...</span>&quot;&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;haha&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.lun.boot.bean.User&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;zhangsan&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;18&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hehe&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.lun.boot.bean.Pet&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;tomcat&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>ä½¿ç”¨æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ImportResource(&quot;classpath:beans.xml&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><p>æµ‹è¯•ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>    <span class="hljs-comment">//1ã€è¿”å›æˆ‘ä»¬IOCå®¹å™¨</span><br>    <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">run</span> <span class="hljs-operator">=</span> SpringApplication.run(MainApplication.class, args);<br><br><span class="hljs-type">boolean</span> <span class="hljs-variable">haha</span> <span class="hljs-operator">=</span> run.containsBean(<span class="hljs-string">&quot;haha&quot;</span>);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">hehe</span> <span class="hljs-operator">=</span> run.containsBean(<span class="hljs-string">&quot;hehe&quot;</span>);<br>System.out.println(<span class="hljs-string">&quot;hahaï¼š&quot;</span>+haha);<span class="hljs-comment">//true</span><br>System.out.println(<span class="hljs-string">&quot;heheï¼š&quot;</span>+hehe);<span class="hljs-comment">//true</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="12ã€åº•å±‚æ³¨è§£-ConfigurationPropertiesé…ç½®ç»‘å®š"><a href="#12ã€åº•å±‚æ³¨è§£-ConfigurationPropertiesé…ç½®ç»‘å®š" class="headerlink" title="12ã€åº•å±‚æ³¨è§£-@ConfigurationPropertiesé…ç½®ç»‘å®š"></a>12ã€åº•å±‚æ³¨è§£-@ConfigurationPropertiesé…ç½®ç»‘å®š</h2><p>å¦‚ä½•ä½¿ç”¨Javaè¯»å–åˆ°propertiesæ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”æŠŠå®ƒå°è£…åˆ°JavaBeanä¸­ï¼Œä»¥ä¾›éšæ—¶ä½¿ç”¨</p><p>ä¼ ç»Ÿæ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">getProperties</span> &#123;<br>     <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> FileNotFoundException, IOException &#123;<br>         <span class="hljs-type">Properties</span> <span class="hljs-variable">pps</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br>         pps.load(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;a.properties&quot;</span>));<br>         <span class="hljs-type">Enumeration</span> <span class="hljs-variable">enum1</span> <span class="hljs-operator">=</span> pps.propertyNames();<span class="hljs-comment">//å¾—åˆ°é…ç½®æ–‡ä»¶çš„åå­—</span><br>         <span class="hljs-keyword">while</span>(enum1.hasMoreElements()) &#123;<br>             <span class="hljs-type">String</span> <span class="hljs-variable">strKey</span> <span class="hljs-operator">=</span> (String) enum1.nextElement();<br>             <span class="hljs-type">String</span> <span class="hljs-variable">strValue</span> <span class="hljs-operator">=</span> pps.getProperty(strKey);<br>             System.out.println(strKey + <span class="hljs-string">&quot;=&quot;</span> + strValue);<br>             <span class="hljs-comment">//å°è£…åˆ°JavaBeanã€‚</span><br>         &#125;<br>     &#125;<br> &#125;<br></code></pre></td></tr></table></figure><hr><p>Spring Bootä¸€ç§é…ç½®é…ç½®ç»‘å®šï¼š</p><p>@ConfigurationProperties + @Component</p><p>å‡è®¾æœ‰é…ç½®æ–‡ä»¶application.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">mycar.brand</span>=<span class="hljs-string">BYD</span><br><span class="hljs-attr">mycar.price</span>=<span class="hljs-string">100000</span><br></code></pre></td></tr></table></figure><p>åªæœ‰åœ¨å®¹å™¨ä¸­çš„ç»„ä»¶ï¼Œæ‰ä¼šæ‹¥æœ‰SpringBootæä¾›çš„å¼ºå¤§åŠŸèƒ½</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>Spring Bootå¦ä¸€ç§é…ç½®é…ç½®ç»‘å®šï¼š</p><p>@EnableConfigurationProperties + @ConfigurationProperties</p><ol><li>å¼€å¯Caré…ç½®ç»‘å®šåŠŸèƒ½</li><li>æŠŠè¿™ä¸ªCarè¿™ä¸ªç»„ä»¶è‡ªåŠ¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableConfigurationProperties(Car.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;mycar&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="13ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨åŒ…è§„åˆ™åŸç†"><a href="#13ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨åŒ…è§„åˆ™åŸç†" class="headerlink" title="13ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨åŒ…è§„åˆ™åŸç†"></a>13ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨åŒ…è§„åˆ™åŸç†</h2><p>Spring Bootåº”ç”¨çš„å¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(MainApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åˆ†æä¸‹<code>@SpringBootApplication</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@SpringBootConfiguration</span><br><span class="hljs-meta">@EnableAutoConfiguration</span><br><span class="hljs-meta">@ComponentScan(</span><br><span class="hljs-meta">    excludeFilters = &#123;@Filter(</span><br><span class="hljs-meta">    type = FilterType.CUSTOM,</span><br><span class="hljs-meta">    classes = &#123;TypeExcludeFilter.class&#125;</span><br><span class="hljs-meta">), @Filter(</span><br><span class="hljs-meta">    type = FilterType.CUSTOM,</span><br><span class="hljs-meta">    classes = &#123;AutoConfigurationExcludeFilter.class&#125;</span><br><span class="hljs-meta">)&#125;</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SpringBootApplication &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡ç‚¹åˆ†æ<code>@SpringBootConfiguration</code>ï¼Œ<code>@EnableAutoConfiguration</code>ï¼Œ<code>@ComponentScan</code>ã€‚</p><h3 id="SpringBootConfiguration"><a href="#SpringBootConfiguration" class="headerlink" title="@SpringBootConfiguration"></a>@SpringBootConfiguration</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> SpringBootConfiguration &#123;<br>    <span class="hljs-meta">@AliasFor(</span><br><span class="hljs-meta">        annotation = Configuration.class</span><br><span class="hljs-meta">    )</span><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">proxyBeanMethods</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>@Configuration</code>ä»£è¡¨å½“å‰æ˜¯ä¸€ä¸ªé…ç½®ç±»ã€‚</p><h3 id="ComponentScan"><a href="#ComponentScan" class="headerlink" title="@ComponentScan"></a>@ComponentScan</h3><p>æŒ‡å®šæ‰«æå“ªäº›Springæ³¨è§£ã€‚</p><p>@ComponentScan åœ¨<a href="#">07ã€åŸºç¡€å…¥é—¨-SpringBoot-è‡ªåŠ¨é…ç½®ç‰¹æ€§</a>æœ‰ç”¨ä¾‹ã€‚</p><h3 id="EnableAutoConfiguration"><a href="#EnableAutoConfiguration" class="headerlink" title="@EnableAutoConfiguration"></a>@EnableAutoConfiguration</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@AutoConfigurationPackage</span><br><span class="hljs-meta">@Import(AutoConfigurationImportSelector.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> EnableAutoConfiguration &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">ENABLED_OVERRIDE_PROPERTY</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.boot.enableautoconfiguration&quot;</span>;<br><br>    Class&lt;?&gt;[] exclude() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    String[] excludeName() <span class="hljs-keyword">default</span> &#123;&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><p>é‡ç‚¹åˆ†æ<code>@AutoConfigurationPackage</code>ï¼Œ<code>@Import(AutoConfigurationImportSelector.class)</code>ã€‚</p><h4 id="AutoConfigurationPackage"><a href="#AutoConfigurationPackage" class="headerlink" title="@AutoConfigurationPackage"></a>@AutoConfigurationPackage</h4><p>æ ‡ç­¾åç›´è¯‘ä¸ºï¼šè‡ªåŠ¨é…ç½®åŒ…ï¼ŒæŒ‡å®šäº†é»˜è®¤çš„åŒ…è§„åˆ™ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Target(ElementType.TYPE)</span><br><span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span><br><span class="hljs-meta">@Documented</span><br><span class="hljs-meta">@Inherited</span><br><span class="hljs-meta">@Import(AutoConfigurationPackages.Registrar.class)</span><span class="hljs-comment">//ç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶</span><br><span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> AutoConfigurationPackage &#123;<br>    String[] basePackages() <span class="hljs-keyword">default</span> &#123;&#125;;<br><br>    Class&lt;?&gt;[] basePackageClasses() <span class="hljs-keyword">default</span> &#123;&#125;;<br>&#125;<br></code></pre></td></tr></table></figure><ol><li>åˆ©ç”¨Registrarç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ç³»åˆ—ç»„ä»¶</li><li>å°†æŒ‡å®šçš„ä¸€ä¸ªåŒ…ä¸‹çš„æ‰€æœ‰ç»„ä»¶å¯¼å…¥è¿›MainApplicationæ‰€åœ¨åŒ…ä¸‹ã€‚</li></ol><h2 id="14ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-åˆå§‹åŠ è½½è‡ªåŠ¨é…ç½®ç±»"><a href="#14ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-åˆå§‹åŠ è½½è‡ªåŠ¨é…ç½®ç±»" class="headerlink" title="14ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-åˆå§‹åŠ è½½è‡ªåŠ¨é…ç½®ç±»"></a>14ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-åˆå§‹åŠ è½½è‡ªåŠ¨é…ç½®ç±»</h2><h4 id="Import-AutoConfigurationImportSelector-class"><a href="#Import-AutoConfigurationImportSelector-class" class="headerlink" title="@Import(AutoConfigurationImportSelector.class)"></a>@Import(AutoConfigurationImportSelector.class)</h4><ol><li>åˆ©ç”¨<code>getAutoConfigurationEntry(annotationMetadata);</code>ç»™å®¹å™¨ä¸­æ‰¹é‡å¯¼å…¥ä¸€äº›ç»„ä»¶</li><li>è°ƒç”¨<code>List&lt;String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes)</code>è·å–åˆ°æ‰€æœ‰éœ€è¦å¯¼å…¥åˆ°å®¹å™¨ä¸­çš„é…ç½®ç±»</li><li>åˆ©ç”¨å·¥å‚åŠ è½½ <code>Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(@Nullable ClassLoader classLoader);</code>å¾—åˆ°æ‰€æœ‰çš„ç»„ä»¶</li><li>ä»<code>META-INF/spring.factories</code>ä½ç½®æ¥åŠ è½½ä¸€ä¸ªæ–‡ä»¶ã€‚<ul><li>é»˜è®¤æ‰«ææˆ‘ä»¬å½“å‰ç³»ç»Ÿé‡Œé¢æ‰€æœ‰<code>META-INF/spring.factories</code>ä½ç½®çš„æ–‡ä»¶</li><li><code>spring-boot-autoconfigure-2.3.4.RELEASE.jar</code>åŒ…é‡Œé¢ä¹Ÿæœ‰<code>META-INF/spring.factories</code></li></ul></li></ol><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205005536620.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># æ–‡ä»¶é‡Œé¢å†™æ­»äº†spring-bootä¸€å¯åŠ¨å°±è¦ç»™å®¹å™¨ä¸­åŠ è½½çš„æ‰€æœ‰é…ç½®ç±»</span><br><span class="hljs-comment"># spring-boot-autoconfigure-2.3.4.RELEASE.jar/META-INF/spring.factories</span><br><span class="hljs-comment"># Auto Configure</span><br><span class="hljs-attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="hljs-string">\</span><br><span class="hljs-string">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span><br><span class="hljs-string">org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\</span><br><span class="hljs-string">...</span><br></code></pre></td></tr></table></figure><p>è™½ç„¶æˆ‘ä»¬127ä¸ªåœºæ™¯çš„æ‰€æœ‰è‡ªåŠ¨é…ç½®å¯åŠ¨çš„æ—¶å€™é»˜è®¤å…¨éƒ¨åŠ è½½ï¼Œä½†æ˜¯<code>xxxxAutoConfiguration</code>æŒ‰ç…§æ¡ä»¶è£…é…è§„åˆ™ï¼ˆ<code>@Conditional</code>ï¼‰ï¼Œæœ€ç»ˆä¼šæŒ‰éœ€é…ç½®ã€‚</p><p>å¦‚<code>AopAutoConfiguration</code>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(</span><br><span class="hljs-meta">    proxyBeanMethods = false</span><br><span class="hljs-meta">)</span><br><span class="hljs-meta">@ConditionalOnProperty(</span><br><span class="hljs-meta">    prefix = &quot;spring.aop&quot;,</span><br><span class="hljs-meta">    name = &quot;auto&quot;,</span><br><span class="hljs-meta">    havingValue = &quot;true&quot;,</span><br><span class="hljs-meta">    matchIfMissing = true</span><br><span class="hljs-meta">)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AopAutoConfiguration</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AopAutoConfiguration</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="15ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨é…ç½®æµç¨‹"><a href="#15ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨é…ç½®æµç¨‹" class="headerlink" title="15ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨é…ç½®æµç¨‹"></a>15ã€è‡ªåŠ¨é…ç½®ã€æºç åˆ†æã€‘-è‡ªåŠ¨é…ç½®æµç¨‹</h2><p>ä»¥<code>DispatcherServletAutoConfiguration</code>çš„å†…éƒ¨ç±»<code>DispatcherServletConfiguration</code>ä¸ºä¾‹å­:</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnBean(MultipartResolver.class)</span>  <span class="hljs-comment">//å®¹å™¨ä¸­æœ‰è¿™ä¸ªç±»å‹ç»„ä»¶</span><br><span class="hljs-meta">@ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)</span> <span class="hljs-comment">//å®¹å™¨ä¸­æ²¡æœ‰è¿™ä¸ªåå­— multipartResolver çš„ç»„ä»¶</span><br><span class="hljs-keyword">public</span> MultipartResolver <span class="hljs-title function_">multipartResolver</span><span class="hljs-params">(MultipartResolver resolver)</span> &#123;<br><span class="hljs-comment">//ç»™@Beanæ ‡æ³¨çš„æ–¹æ³•ä¼ å…¥äº†å¯¹è±¡å‚æ•°ï¼Œè¿™ä¸ªå‚æ•°çš„å€¼å°±ä¼šä»å®¹å™¨ä¸­æ‰¾ã€‚</span><br><span class="hljs-comment">//SpringMVC multipartResolverã€‚é˜²æ­¢æœ‰äº›ç”¨æˆ·é…ç½®çš„æ–‡ä»¶ä¸Šä¼ è§£æå™¨ä¸ç¬¦åˆè§„èŒƒ</span><br><span class="hljs-comment">// Detect if the user has created a MultipartResolver but named it incorrectly</span><br><span class="hljs-keyword">return</span> resolver;<span class="hljs-comment">//ç»™å®¹å™¨ä¸­åŠ å…¥äº†æ–‡ä»¶ä¸Šä¼ è§£æå™¨ï¼›</span><br>&#125;<br></code></pre></td></tr></table></figure><p>SpringBooté»˜è®¤ä¼šåœ¨åº•å±‚é…å¥½æ‰€æœ‰çš„ç»„ä»¶ï¼Œä½†æ˜¯<strong>å¦‚æœç”¨æˆ·è‡ªå·±é…ç½®äº†ä»¥ç”¨æˆ·çš„ä¼˜å…ˆ</strong>ã€‚</p><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li>SpringBootå…ˆåŠ è½½æ‰€æœ‰çš„è‡ªåŠ¨é…ç½®ç±»  xxxxxAutoConfiguration</li><li>æ¯ä¸ªè‡ªåŠ¨é…ç½®ç±»æŒ‰ç…§æ¡ä»¶è¿›è¡Œç”Ÿæ•ˆï¼Œé»˜è®¤éƒ½ä¼šç»‘å®šé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ã€‚ï¼ˆxxxxPropertiesé‡Œé¢è¯»å–ï¼ŒxxxPropertieså’Œé…ç½®æ–‡ä»¶è¿›è¡Œäº†ç»‘å®šï¼‰</li><li>ç”Ÿæ•ˆçš„é…ç½®ç±»å°±ä¼šç»™å®¹å™¨ä¸­è£…é…å¾ˆå¤šç»„ä»¶</li><li>åªè¦å®¹å™¨ä¸­æœ‰è¿™äº›ç»„ä»¶ï¼Œç›¸å½“äºè¿™äº›åŠŸèƒ½å°±æœ‰äº†</li><li>å®šåˆ¶åŒ–é…ç½®<ul><li>ç”¨æˆ·ç›´æ¥è‡ªå·±@Beanæ›¿æ¢åº•å±‚çš„ç»„ä»¶</li><li>ç”¨æˆ·å»çœ‹è¿™ä¸ªç»„ä»¶æ˜¯è·å–çš„é…ç½®æ–‡ä»¶ä»€ä¹ˆå€¼å°±å»ä¿®æ”¹ã€‚</li></ul></li></ul><p><strong>xxxxxAutoConfiguration â€”&gt; ç»„ä»¶ â€”&gt; xxxxPropertiesé‡Œé¢æ‹¿å€¼  â€”-&gt; application.properties</strong></p><h2 id="16ã€æœ€ä½³å®è·µ-SpringBootåº”ç”¨å¦‚ä½•ç¼–å†™"><a href="#16ã€æœ€ä½³å®è·µ-SpringBootåº”ç”¨å¦‚ä½•ç¼–å†™" class="headerlink" title="16ã€æœ€ä½³å®è·µ-SpringBootåº”ç”¨å¦‚ä½•ç¼–å†™"></a>16ã€æœ€ä½³å®è·µ-SpringBootåº”ç”¨å¦‚ä½•ç¼–å†™</h2><ul><li>å¼•å…¥åœºæ™¯ä¾èµ–<ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter">å®˜æ–¹æ–‡æ¡£</a></li></ul></li><li>æŸ¥çœ‹è‡ªåŠ¨é…ç½®äº†å“ªäº›ï¼ˆé€‰åšï¼‰<ul><li>è‡ªå·±åˆ†æï¼Œå¼•å…¥åœºæ™¯å¯¹åº”çš„è‡ªåŠ¨é…ç½®ä¸€èˆ¬éƒ½ç”Ÿæ•ˆäº†</li><li>é…ç½®æ–‡ä»¶ä¸­debug&#x3D;trueå¼€å¯è‡ªåŠ¨é…ç½®æŠ¥å‘Šã€‚<ul><li>Negativeï¼ˆä¸ç”Ÿæ•ˆï¼‰</li><li>Positiveï¼ˆç”Ÿæ•ˆï¼‰</li></ul></li></ul></li><li>æ˜¯å¦éœ€è¦ä¿®æ”¹<ul><li>å‚ç…§æ–‡æ¡£ä¿®æ”¹é…ç½®é¡¹<ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties">å®˜æ–¹æ–‡æ¡£</a></li><li>è‡ªå·±åˆ†æã€‚xxxxPropertiesç»‘å®šäº†é…ç½®æ–‡ä»¶çš„å“ªäº›ã€‚</li></ul></li><li>è‡ªå®šä¹‰åŠ å…¥æˆ–è€…æ›¿æ¢ç»„ä»¶<ul><li>@Beanã€@Componentâ€¦</li></ul></li><li>è‡ªå®šä¹‰å™¨  XXXXXCustomizerï¼›</li><li>â€¦â€¦</li></ul></li></ul><h2 id="17ã€æœ€ä½³å®è·µ-Lombokç®€åŒ–å¼€å‘"><a href="#17ã€æœ€ä½³å®è·µ-Lombokç®€åŒ–å¼€å‘" class="headerlink" title="17ã€æœ€ä½³å®è·µ-Lombokç®€åŒ–å¼€å‘"></a>17ã€æœ€ä½³å®è·µ-Lombokç®€åŒ–å¼€å‘</h2><p>Lombokç”¨æ ‡ç­¾æ–¹å¼ä»£æ›¿æ„é€ å™¨ã€getter&#x2F;setterã€toString()ç­‰é¸¡è‚‹ä»£ç ã€‚</p><p>spring bootå·²ç»ç®¡ç†Lombokã€‚å¼•å…¥ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>IDEAä¸­File-&gt;Settings-&gt;Pluginsï¼Œæœç´¢å®‰è£…Lombokæ’ä»¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-comment">//@AllArgsConstructor</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@ToString</span><br><span class="hljs-meta">@EqualsAndHashCode</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br><br>    <span class="hljs-keyword">private</span> Pet pet;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(String name,Integer age)</span>&#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>ç®€åŒ–æ—¥å¿—å¼€å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handle01</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;name&quot;)</span> String name)</span>&#123;<br>        log.info(<span class="hljs-string">&quot;è¯·æ±‚è¿›æ¥äº†....&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Spring Boot 2!&quot;</span>+<span class="hljs-string">&quot;ä½ å¥½ï¼š&quot;</span>+name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="18ã€æœ€ä½³å®è·µ-dev-tools"><a href="#18ã€æœ€ä½³å®è·µ-dev-tools" class="headerlink" title="18ã€æœ€ä½³å®è·µ-dev-tools"></a>18ã€æœ€ä½³å®è·µ-dev-tools</h2><blockquote><p>Spring Boot includes an additional set of tools that can make the application development experience a little more pleasant. The <code>spring-boot-devtools</code> module can be included in any project to provide additional development-time features.â€”â€”<a href="https://docs.spring.io/spring-boot/docs/2.3.8.RELEASE/reference/html/using-spring-boot.html#using-boot-devtools">link</a></p><p>Applications that use <code>spring-boot-devtools</code> automatically restart whenever files on the classpath change. This can be a useful feature when working in an IDE, as it gives a very fast feedback loop for code changes. By default, any entry on the classpath that points to a directory is monitored for changes. Note that certain resources, such as static assets and view templates, <a href="https://docs.spring.io/spring-boot/docs/2.3.8.RELEASE/reference/html/using-spring-boot.html#using-boot-devtools-restart-exclude">do not need to restart the application</a>.â€”â€”<a href="https://docs.spring.io/spring-boot/docs/2.3.8.RELEASE/reference/html/using-spring-boot.html#using-boot-devtools-restart">link</a></p><p>Triggering a restart</p><p>As DevTools monitors classpath resources, the only way to trigger a restart is to update the classpath. The way in which you cause the classpath to be updated depends on the IDE that you are using:</p><ul><li>In Eclipse, saving a modified file causes the classpath to be updated and triggers a restart.</li><li>In IntelliJ IDEA, building the project (<code>Build -&gt; Build Project</code>)(shortcut: Ctrl+F9) has the same effect.</li></ul></blockquote><p>æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-devtools<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br></code></pre></td></tr></table></figure><p>åœ¨IDEAä¸­ï¼Œé¡¹ç›®æˆ–è€…é¡µé¢ä¿®æ”¹ä»¥åï¼šCtrl+F9ã€‚</p><h2 id="19ã€æœ€ä½³å®è·µ-Spring-Initailizr"><a href="#19ã€æœ€ä½³å®è·µ-Spring-Initailizr" class="headerlink" title="19ã€æœ€ä½³å®è·µ-Spring Initailizr"></a>19ã€æœ€ä½³å®è·µ-Spring Initailizr</h2><p><a href="https://start.spring.io/">Spring Initailizr</a>æ˜¯åˆ›å»ºSpring Bootå·¥ç¨‹å‘å¯¼ã€‚</p><p>åœ¨IDEAä¸­ï¼Œèœå•æ New -&gt; Project -&gt; Spring Initailizrã€‚</p><h1 id="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½"><a href="#SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½"></a><strong>SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½</strong></h1><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202207211458073.jpg" alt="yuque_diagram"></p><p><strong>SpringBoot2æ ¸å¿ƒæŠ€æœ¯-æ ¸å¿ƒåŠŸèƒ½</strong></p><h2 id="20ã€é…ç½®æ–‡ä»¶-yamlçš„ç”¨æ³•"><a href="#20ã€é…ç½®æ–‡ä»¶-yamlçš„ç”¨æ³•" class="headerlink" title="20ã€é…ç½®æ–‡ä»¶-yamlçš„ç”¨æ³•"></a>20ã€é…ç½®æ–‡ä»¶-yamlçš„ç”¨æ³•</h2><p>åŒä»¥å‰çš„propertiesç”¨æ³•</p><p>YAML æ˜¯ â€œYAML Ainâ€™t Markup Languageâ€ï¼ˆYAML ä¸æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰çš„é€’å½’ç¼©å†™ã€‚åœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAML çš„æ„æ€å…¶å®æ˜¯ï¼šâ€Yet Another Markup Languageâ€ï¼ˆä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚ </p><p><strong>éå¸¸é€‚åˆç”¨æ¥åšä»¥æ•°æ®ä¸ºä¸­å¿ƒçš„é…ç½®æ–‡ä»¶</strong>ã€‚</p><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><ul><li>key: valueï¼›kvä¹‹é—´æœ‰ç©ºæ ¼</li><li>å¤§å°å†™æ•æ„Ÿ</li><li>ä½¿ç”¨ç¼©è¿›è¡¨ç¤ºå±‚çº§å…³ç³»</li><li>ç¼©è¿›ä¸å…è®¸ä½¿ç”¨tabï¼Œåªå…è®¸ç©ºæ ¼</li><li>ç¼©è¿›çš„ç©ºæ ¼æ•°ä¸é‡è¦ï¼Œåªè¦ç›¸åŒå±‚çº§çš„å…ƒç´ å·¦å¯¹é½å³å¯</li><li>â€˜#â€™è¡¨ç¤ºæ³¨é‡Š</li><li>å­—ç¬¦ä¸²æ— éœ€åŠ å¼•å·ï¼Œå¦‚æœè¦åŠ ï¼Œå•å¼•å·â€™â€™ã€åŒå¼•å·â€â€è¡¨ç¤ºå­—ç¬¦ä¸²å†…å®¹ä¼šè¢« è½¬ä¹‰ã€ä¸è½¬ä¹‰</li></ul><h3 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h3><ul><li>å­—é¢é‡ï¼šå•ä¸ªçš„ã€ä¸å¯å†åˆ†çš„å€¼ã€‚dateã€booleanã€stringã€numberã€null</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">k:</span> <span class="hljs-string">v</span><br></code></pre></td></tr></table></figure><ul><li>å¯¹è±¡ï¼šé”®å€¼å¯¹çš„é›†åˆã€‚mapã€hashã€setã€object</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#è¡Œå†…å†™æ³•ï¼š  </span><br><br><span class="hljs-attr">k:</span> &#123;<span class="hljs-string">k1:v1</span>,<span class="hljs-string">k2:v2</span>,<span class="hljs-string">k3:v3</span>&#125;<br><br><span class="hljs-comment">#æˆ–</span><br><br><span class="hljs-attr">k:</span> <br>  <span class="hljs-attr">k1:</span> <span class="hljs-string">v1</span><br>  <span class="hljs-attr">k2:</span> <span class="hljs-string">v2</span><br>  <span class="hljs-attr">k3:</span> <span class="hljs-string">v3</span><br></code></pre></td></tr></table></figure><ul><li>æ•°ç»„ï¼šä¸€ç»„æŒ‰æ¬¡åºæ’åˆ—çš„å€¼ã€‚arrayã€listã€queue</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment">#è¡Œå†…å†™æ³•ï¼š  </span><br><br><span class="hljs-attr">k:</span> [<span class="hljs-string">v1</span>,<span class="hljs-string">v2</span>,<span class="hljs-string">v3</span>]<br><br><span class="hljs-comment">#æˆ–è€…</span><br><br><span class="hljs-attr">k:</span><br> <span class="hljs-bullet">-</span> <span class="hljs-string">v1</span><br> <span class="hljs-bullet">-</span> <span class="hljs-string">v2</span><br> <span class="hljs-bullet">-</span> <span class="hljs-string">v3</span><br></code></pre></td></tr></table></figure><h3 id="å®ä¾‹"><a href="#å®ä¾‹" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-keyword">private</span> Boolean boss;<br>    <span class="hljs-keyword">private</span> Date birth;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> Pet pet;<br>    <span class="hljs-keyword">private</span> String[] interests;<br>    <span class="hljs-keyword">private</span> List&lt;String&gt; animal;<br>    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; score;<br>    <span class="hljs-keyword">private</span> Set&lt;Double&gt; salarys;<br>    <span class="hljs-keyword">private</span> Map&lt;String, List&lt;Pet&gt;&gt; allPets;<br>&#125;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pet</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Double weight;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨yamlè¡¨ç¤ºä»¥ä¸Šå¯¹è±¡</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">userName:</span> <span class="hljs-string">zhangsan</span><br>  <span class="hljs-attr">boss:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">birth:</span> <span class="hljs-number">2019</span><span class="hljs-string">/12/12</span> <span class="hljs-number">20</span><span class="hljs-string">:12:33</span><br>  <span class="hljs-attr">age:</span> <span class="hljs-number">18</span><br>  <span class="hljs-attr">pet:</span> <br>    <span class="hljs-attr">name:</span> <span class="hljs-string">tomcat</span><br>    <span class="hljs-attr">weight:</span> <span class="hljs-number">23.4</span><br>  <span class="hljs-attr">interests:</span> [<span class="hljs-string">ç¯®çƒ</span>,<span class="hljs-string">æ¸¸æ³³</span>]<br>  <span class="hljs-attr">animal:</span> <br>    <span class="hljs-bullet">-</span> <span class="hljs-string">jerry</span><br>    <span class="hljs-bullet">-</span> <span class="hljs-string">mario</span><br>  <span class="hljs-attr">score:</span><br>    <span class="hljs-attr">english:</span> <br>      <span class="hljs-attr">first:</span> <span class="hljs-number">30</span><br>      <span class="hljs-attr">second:</span> <span class="hljs-number">40</span><br>      <span class="hljs-attr">third:</span> <span class="hljs-number">50</span><br>    <span class="hljs-attr">math:</span> [<span class="hljs-number">131</span>,<span class="hljs-number">140</span>,<span class="hljs-number">148</span>]<br>    <span class="hljs-attr">chinese:</span> &#123;<span class="hljs-attr">first:</span> <span class="hljs-number">128</span>,<span class="hljs-attr">second:</span> <span class="hljs-number">136</span>&#125;<br>  <span class="hljs-attr">salarys:</span> [<span class="hljs-number">3999</span>,<span class="hljs-number">4999.98</span>,<span class="hljs-number">5999.99</span>]<br>  <span class="hljs-attr">allPets:</span><br>    <span class="hljs-attr">sick:</span><br>      <span class="hljs-bullet">-</span> &#123;<span class="hljs-attr">name:</span> <span class="hljs-string">tom</span>&#125;<br>      <span class="hljs-bullet">-</span> &#123;<span class="hljs-attr">name:</span> <span class="hljs-string">jerry</span>,<span class="hljs-attr">weight:</span> <span class="hljs-number">47</span>&#125;<br>    <span class="hljs-attr">health:</span> [&#123;<span class="hljs-attr">name:</span> <span class="hljs-string">mario</span>,<span class="hljs-attr">weight:</span> <span class="hljs-number">47</span>&#125;]<br></code></pre></td></tr></table></figure><h2 id="21ã€é…ç½®æ–‡ä»¶-è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º"><a href="#21ã€é…ç½®æ–‡ä»¶-è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º" class="headerlink" title="21ã€é…ç½®æ–‡ä»¶-è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º"></a>21ã€é…ç½®æ–‡ä»¶-è‡ªå®šä¹‰ç±»ç»‘å®šçš„é…ç½®æç¤º</h2><blockquote><p>You can easily generate your own configuration metadata file from items annotated with <code>@ConfigurationProperties</code> by using the <code>spring-boot-configuration-processor</code> jar. The jar includes a Java annotation processor which is invoked as your project is compiled.â€”â€”<a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#configuration-metadata-annotation-processor">link</a></p></blockquote><p>è‡ªå®šä¹‰çš„ç±»å’Œé…ç½®æ–‡ä»¶ç»‘å®šä¸€èˆ¬æ²¡æœ‰æç¤ºã€‚è‹¥è¦æç¤ºï¼Œæ·»åŠ å¦‚ä¸‹ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- ä¸‹é¢æ’ä»¶ä½œç”¨æ˜¯å·¥ç¨‹æ‰“åŒ…æ—¶ï¼Œä¸å°†spring-boot-configuration-processoræ‰“è¿›åŒ…å†…ï¼Œè®©å…¶åªåœ¨ç¼–ç çš„æ—¶å€™æœ‰ç”¨ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">excludes</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">exclude</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">exclude</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">excludes</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="22ã€webåœºæ™¯-webå¼€å‘ç®€ä»‹"><a href="#22ã€webåœºæ™¯-webå¼€å‘ç®€ä»‹" class="headerlink" title="22ã€webåœºæ™¯-webå¼€å‘ç®€ä»‹"></a>22ã€webåœºæ™¯-webå¼€å‘ç®€ä»‹</h2><p>Spring Boot provides auto-configuration for Spring MVC that <strong>works well with most applications.(å¤§å¤šåœºæ™¯æˆ‘ä»¬éƒ½æ— éœ€è‡ªå®šä¹‰é…ç½®)</strong></p><p>The auto-configuration adds the following features on top of Springâ€™s defaults:</p><ul><li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p><ul><li>å†…å®¹åå•†è§†å›¾è§£æå™¨å’ŒBeanNameè§†å›¾è§£æå™¨</li></ul></li><li><p>Support for serving static resources, including support for WebJars (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-static-content">later in this document</a>)).</p><ul><li>é™æ€èµ„æºï¼ˆåŒ…æ‹¬webjarsï¼‰</li></ul></li><li><p>Automatic registration of <code>Converter</code>, <code>GenericConverter</code>, and <code>Formatter</code> beans.</p><ul><li>è‡ªåŠ¨æ³¨å†Œ <code>Converterï¼ŒGenericConverterï¼ŒFormatter </code></li></ul></li><li><p>Support for <code>HttpMessageConverters</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-message-converters">later in this document</a>).</p><ul><li>æ”¯æŒ <code>HttpMessageConverters</code> ï¼ˆåæ¥æˆ‘ä»¬é…åˆå†…å®¹åå•†ç†è§£åŸç†ï¼‰</li></ul></li><li><p>Automatic registration of <code>MessageCodesResolver</code> (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-message-codes">later in this document</a>).</p><ul><li>è‡ªåŠ¨æ³¨å†Œ <code>MessageCodesResolver</code> ï¼ˆå›½é™…åŒ–ç”¨ï¼‰</li></ul></li><li><p>Static <code>index.html</code> support.</p><ul><li>é™æ€index.html é¡µæ”¯æŒ</li></ul></li><li><p>Custom <code>Favicon</code> support (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-favicon">later in this document</a>).</p><ul><li>è‡ªå®šä¹‰ <code>Favicon</code></li></ul></li><li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (covered <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-spring-mvc-web-binding-initializer">later in this document</a>).</p><ul><li>è‡ªåŠ¨ä½¿ç”¨ <code>ConfigurableWebBindingInitializer</code> ï¼Œï¼ˆDataBinderè´Ÿè´£å°†è¯·æ±‚æ•°æ®ç»‘å®šåˆ°JavaBeanä¸Šï¼‰</li></ul></li></ul><blockquote><p>If you want to keep those Spring Boot MVC customizations and make more <a href="https://docs.spring.io/spring/docs/5.2.9.RELEASE/spring-framework-reference/web.html#mvc">MVC customizations</a> (interceptors, formatters, view controllers, and other features), you can add your own <code>@Configuration</code> class of type <code>WebMvcConfigurer</code> but <strong>without</strong> <code>@EnableWebMvc</code>.</p><p><strong>ä¸ç”¨@EnableWebMvcæ³¨è§£ã€‚ä½¿ç”¨</strong> <strong><code>@Configuration</code></strong> <strong>+</strong> <strong><code>WebMvcConfigurer</code></strong> <strong>è‡ªå®šä¹‰è§„åˆ™</strong></p></blockquote><blockquote><p>If you want to provide custom instances of <code>RequestMappingHandlerMapping</code>, <code>RequestMappingHandlerAdapter</code>, or <code>ExceptionHandlerExceptionResolver</code>, and still keep the Spring Boot MVC customizations, you can declare a bean of type <code>WebMvcRegistrations</code> and use it to provide custom instances of those components.</p><p><strong>å£°æ˜</strong> <strong><code>WebMvcRegistrations</code></strong> <strong>æ”¹å˜é»˜è®¤åº•å±‚ç»„ä»¶</strong></p></blockquote><blockquote><p>If you want to take complete control of Spring MVC, you can add your own <code>@Configuration</code> annotated with <code>@EnableWebMvc</code>, or alternatively add your own <code>@Configuration</code>-annotated <code>DelegatingWebMvcConfiguration</code> as described in the Javadoc of <code>@EnableWebMvc</code>.</p><p><strong>ä½¿ç”¨</strong> <strong><code>@EnableWebMvc+@Configuration+DelegatingWebMvcConfiguration å…¨é¢æ¥ç®¡SpringMVC</code></strong></p></blockquote><h2 id="23ã€webåœºæ™¯-é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–"><a href="#23ã€webåœºæ™¯-é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–" class="headerlink" title="23ã€webåœºæ™¯-é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–"></a>23ã€webåœºæ™¯-é™æ€èµ„æºè§„åˆ™ä¸å®šåˆ¶åŒ–</h2><h3 id="é™æ€èµ„æºç›®å½•"><a href="#é™æ€èµ„æºç›®å½•" class="headerlink" title="é™æ€èµ„æºç›®å½•"></a>é™æ€èµ„æºç›®å½•</h3><p>åªè¦é™æ€èµ„æºæ”¾åœ¨ç±»è·¯å¾„ä¸‹ï¼š called <code>/static</code> (or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></p><p>è®¿é—® ï¼š å½“å‰é¡¹ç›®æ ¹è·¯å¾„&#x2F; + é™æ€èµ„æºå </p><p>åŸç†ï¼š é™æ€æ˜ å°„&#x2F;**ã€‚</p><p>è¯·æ±‚è¿›æ¥ï¼Œå…ˆå»æ‰¾Controllerçœ‹èƒ½ä¸èƒ½å¤„ç†ã€‚ä¸èƒ½å¤„ç†çš„æ‰€æœ‰è¯·æ±‚åˆéƒ½äº¤ç»™é™æ€èµ„æºå¤„ç†å™¨ã€‚é™æ€èµ„æºä¹Ÿæ‰¾ä¸åˆ°åˆ™å“åº”404é¡µé¢ã€‚</p><p>ä¹Ÿå¯ä»¥æ”¹å˜é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„ï¼Œ<code>/static</code>ï¼Œ<code>/public</code>,<code>/resources</code>, <code>/META-INF/resources</code>å¤±æ•ˆ</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">resources:</span><br>  <span class="hljs-attr">static-locations:</span> [<span class="hljs-string">classpath:/haha/</span>]<br></code></pre></td></tr></table></figure><h3 id="é™æ€èµ„æºè®¿é—®å‰ç¼€"><a href="#é™æ€èµ„æºè®¿é—®å‰ç¼€" class="headerlink" title="é™æ€èµ„æºè®¿é—®å‰ç¼€"></a>é™æ€èµ„æºè®¿é—®å‰ç¼€</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">mvc:</span><br>    <span class="hljs-attr">static-path-pattern:</span> <span class="hljs-string">/res/**</span><br></code></pre></td></tr></table></figure><p>å½“å‰é¡¹ç›® + static-path-pattern + é™æ€èµ„æºå &#x3D; é™æ€èµ„æºæ–‡ä»¶å¤¹ä¸‹æ‰¾</p><h3 id="webjar"><a href="#webjar" class="headerlink" title="webjar"></a>webjar</h3><p>å¯ç”¨jaræ–¹å¼æ·»åŠ cssï¼Œjsç­‰èµ„æºæ–‡ä»¶ï¼Œ</p><p><a href="https://www.webjars.org/">https://www.webjars.org/</a></p><p>ä¾‹å¦‚ï¼Œæ·»åŠ jquery</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.webjars<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jquery<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>è®¿é—®åœ°å€ï¼š<a href="http://localhost:8080/webjars/jquery/3.5.1/jquery.js">http://localhost:8080/webjars/<strong>jquery&#x2F;3.5.1&#x2F;jquery.js</strong></a>  åé¢åœ°å€è¦æŒ‰ç…§ä¾èµ–é‡Œé¢çš„åŒ…è·¯å¾„ã€‚</p><h2 id="24ã€webåœºæ™¯-welcomeä¸faviconåŠŸèƒ½"><a href="#24ã€webåœºæ™¯-welcomeä¸faviconåŠŸèƒ½" class="headerlink" title="24ã€webåœºæ™¯-welcomeä¸faviconåŠŸèƒ½"></a>24ã€webåœºæ™¯-welcomeä¸faviconåŠŸèƒ½</h2><p><a href="https://docs.spring.io/spring-boot/docs/2.3.8.RELEASE/reference/htmlsingle/#boot-features-spring-mvc-welcome-page">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="æ¬¢è¿é¡µæ”¯æŒ"><a href="#æ¬¢è¿é¡µæ”¯æŒ" class="headerlink" title="æ¬¢è¿é¡µæ”¯æŒ"></a>æ¬¢è¿é¡µæ”¯æŒ</h3><ul><li><p>é™æ€èµ„æºè·¯å¾„ä¸‹  index.htmlã€‚</p><ul><li>å¯ä»¥é…ç½®é™æ€èµ„æºè·¯å¾„</li><li>ä½†æ˜¯ä¸å¯ä»¥é…ç½®é™æ€èµ„æºçš„è®¿é—®å‰ç¼€ã€‚å¦åˆ™å¯¼è‡´ index.htmlä¸èƒ½è¢«é»˜è®¤è®¿é—®</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-comment">#  mvc:</span><br><span class="hljs-comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´welcome pageåŠŸèƒ½å¤±æ•ˆ</span><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-attr">static-locations:</span> [<span class="hljs-string">classpath:/haha/</span>]<br></code></pre></td></tr></table></figure><ul><li>controllerèƒ½å¤„ç†&#x2F;indexã€‚</li></ul><h3 id="è‡ªå®šä¹‰Favicon"><a href="#è‡ªå®šä¹‰Favicon" class="headerlink" title="è‡ªå®šä¹‰Favicon"></a>è‡ªå®šä¹‰Favicon</h3><p>æŒ‡ç½‘é¡µæ ‡ç­¾ä¸Šçš„å°å›¾æ ‡ã€‚</p><p>favicon.ico æ”¾åœ¨é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br><span class="hljs-comment">#  mvc:</span><br><span class="hljs-comment">#    static-path-pattern: /res/**   è¿™ä¸ªä¼šå¯¼è‡´ Favicon åŠŸèƒ½å¤±æ•ˆ</span><br></code></pre></td></tr></table></figure><h2 id="25ã€webåœºæ™¯-ã€æºç åˆ†æã€‘-é™æ€èµ„æºåŸç†"><a href="#25ã€webåœºæ™¯-ã€æºç åˆ†æã€‘-é™æ€èµ„æºåŸç†" class="headerlink" title="25ã€webåœºæ™¯-ã€æºç åˆ†æã€‘-é™æ€èµ„æºåŸç†"></a>25ã€webåœºæ™¯-ã€æºç åˆ†æã€‘-é™æ€èµ„æºåŸç†</h2><ul><li>SpringBootå¯åŠ¨é»˜è®¤åŠ è½½  xxxAutoConfiguration ç±»ï¼ˆè‡ªåŠ¨é…ç½®ç±»ï¼‰</li><li>SpringMVCåŠŸèƒ½çš„è‡ªåŠ¨é…ç½®ç±»<code>WebMvcAutoConfiguration</code>ï¼Œç”Ÿæ•ˆ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span><br><span class="hljs-meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span><br><span class="hljs-meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span><br><span class="hljs-meta">ValidationAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcAutoConfiguration</span> &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ç»™å®¹å™¨ä¸­é…ç½®çš„å†…å®¹ï¼š<ul><li>é…ç½®æ–‡ä»¶çš„ç›¸å…³å±æ€§çš„ç»‘å®šï¼šWebMvcProperties&#x3D;&#x3D;<strong>spring.mvc</strong>ã€ResourceProperties&#x3D;&#x3D;<strong>spring.resources</strong></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@Import(EnableWebMvcConfiguration.class)</span><br><span class="hljs-meta">@EnableConfigurationProperties(&#123; WebMvcProperties.class, ResourceProperties.class &#125;)</span><br><span class="hljs-meta">@Order(0)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcAutoConfigurationAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨"><a href="#é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨" class="headerlink" title="é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨"></a>é…ç½®ç±»åªæœ‰ä¸€ä¸ªæœ‰å‚æ„é€ å™¨</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">////æœ‰å‚æ„é€ å™¨æ‰€æœ‰å‚æ•°çš„å€¼éƒ½ä¼šä»å®¹å™¨ä¸­ç¡®å®š</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">WebMvcAutoConfigurationAdapter</span><span class="hljs-params">(WebProperties webProperties, WebMvcProperties mvcProperties,</span><br><span class="hljs-params">ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,</span><br><span class="hljs-params">ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,</span><br><span class="hljs-params">ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath,</span><br><span class="hljs-params">ObjectProvider&lt;ServletRegistrationBean&lt;?&gt;&gt; servletRegistrations)</span> &#123;<br><span class="hljs-built_in">this</span>.mvcProperties = mvcProperties;<br><span class="hljs-built_in">this</span>.beanFactory = beanFactory;<br><span class="hljs-built_in">this</span>.messageConvertersProvider = messageConvertersProvider;<br><span class="hljs-built_in">this</span>.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable();<br><span class="hljs-built_in">this</span>.dispatcherServletPath = dispatcherServletPath;<br><span class="hljs-built_in">this</span>.servletRegistrations = servletRegistrations;<br><span class="hljs-built_in">this</span>.mvcProperties.checkConfiguration();<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ResourceProperties resourcePropertiesï¼›è·å–å’Œspring.resourcesç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</li><li>WebMvcProperties mvcProperties è·å–å’Œspring.mvcç»‘å®šçš„æ‰€æœ‰çš„å€¼çš„å¯¹è±¡</li><li>ListableBeanFactory beanFactory Springçš„beanFactory</li><li>HttpMessageConverters æ‰¾åˆ°æ‰€æœ‰çš„HttpMessageConverters</li><li>ResourceHandlerRegistrationCustomizer æ‰¾åˆ° èµ„æºå¤„ç†å™¨çš„è‡ªå®šä¹‰å™¨ã€‚</li><li>DispatcherServletPath</li><li>ServletRegistrationBean   ç»™åº”ç”¨æ³¨å†ŒServletã€Filterâ€¦.</li></ul><h3 id="èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™"><a href="#èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™" class="headerlink" title="èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™"></a>èµ„æºå¤„ç†çš„é»˜è®¤è§„åˆ™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java">...<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcAutoConfiguration</span> &#123;<br>    ...<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnableWebMvcConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DelegatingWebMvcConfiguration</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ResourceLoaderAware</span> &#123;<br>        ...<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addResourceHandlers</span><span class="hljs-params">(ResourceHandlerRegistry registry)</span> &#123;<br><span class="hljs-built_in">super</span>.addResourceHandlers(registry);<br><span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.resourceProperties.isAddMappings()) &#123;<br>logger.debug(<span class="hljs-string">&quot;Default resource handling disabled&quot;</span>);<br><span class="hljs-keyword">return</span>;<br>&#125;<br><span class="hljs-type">ServletContext</span> <span class="hljs-variable">servletContext</span> <span class="hljs-operator">=</span> getServletContext();<br>addResourceHandler(registry, <span class="hljs-string">&quot;/webjars/**&quot;</span>, <span class="hljs-string">&quot;classpath:/META-INF/resources/webjars/&quot;</span>);<br>addResourceHandler(registry, <span class="hljs-built_in">this</span>.mvcProperties.getStaticPathPattern(), (registration) -&gt; &#123;<br>registration.addResourceLocations(<span class="hljs-built_in">this</span>.resourceProperties.getStaticLocations());<br><span class="hljs-keyword">if</span> (servletContext != <span class="hljs-literal">null</span>) &#123;<br>registration.addResourceLocations(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletContextResource</span>(servletContext, SERVLET_LOCATION));<br>&#125;<br>&#125;);<br>&#125;<br>        ...<br>        <br>    &#125;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æ ¹æ®ä¸Šè¿°ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥åŒè¿‡é…ç½®ç¦æ­¢æ‰€æœ‰é™æ€èµ„æºè§„åˆ™ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">resources:</span><br>    <span class="hljs-attr">add-mappings:</span> <span class="hljs-literal">false</span>   <span class="hljs-comment">#ç¦ç”¨æ‰€æœ‰é™æ€èµ„æºè§„åˆ™</span><br></code></pre></td></tr></table></figure><p>é™æ€èµ„æºè§„åˆ™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResourceProperties</span> &#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] CLASSPATH_RESOURCE_LOCATIONS = &#123; <span class="hljs-string">&quot;classpath:/META-INF/resources/&quot;</span>,<br>            <span class="hljs-string">&quot;classpath:/resources/&quot;</span>, <span class="hljs-string">&quot;classpath:/static/&quot;</span>, <span class="hljs-string">&quot;classpath:/public/&quot;</span> &#125;;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Locations of static resources. Defaults to classpath:[/META-INF/resources/,</span><br><span class="hljs-comment">     * /resources/, /static/, /public/].</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;<br>    ...<br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™"><a href="#æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™" class="headerlink" title="æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™"></a>æ¬¢è¿é¡µçš„å¤„ç†è§„åˆ™</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java">...<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcAutoConfiguration</span> &#123;<br>    ...<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnableWebMvcConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">DelegatingWebMvcConfiguration</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ResourceLoaderAware</span> &#123;<br>        ...<br><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> WelcomePageHandlerMapping <span class="hljs-title function_">welcomePageHandlerMapping</span><span class="hljs-params">(ApplicationContext applicationContext,</span><br><span class="hljs-params">FormattingConversionService mvcConversionService, ResourceUrlProvider mvcResourceUrlProvider)</span> &#123;<br><span class="hljs-type">WelcomePageHandlerMapping</span> <span class="hljs-variable">welcomePageHandlerMapping</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WelcomePageHandlerMapping</span>(<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">TemplateAvailabilityProviders</span>(applicationContext), applicationContext, getWelcomePage(),<br><span class="hljs-built_in">this</span>.mvcProperties.getStaticPathPattern());<br>welcomePageHandlerMapping.setInterceptors(getInterceptors(mvcConversionService, mvcResourceUrlProvider));<br>welcomePageHandlerMapping.setCorsConfigurations(getCorsConfigurations());<br><span class="hljs-keyword">return</span> welcomePageHandlerMapping;<br>&#125;<br>    <br></code></pre></td></tr></table></figure><p><code>WelcomePageHandlerMapping</code>çš„æ„é€ æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java">WelcomePageHandlerMapping(TemplateAvailabilityProviders templateAvailabilityProviders,<br>                          ApplicationContext applicationContext, Resource welcomePage, String staticPathPattern) &#123;<br>    <span class="hljs-keyword">if</span> (welcomePage != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-string">&quot;/**&quot;</span>.equals(staticPathPattern)) &#123;<br>        <span class="hljs-comment">//è¦ç”¨æ¬¢è¿é¡µåŠŸèƒ½ï¼Œå¿…é¡»æ˜¯/**</span><br>        logger.info(<span class="hljs-string">&quot;Adding welcome page: &quot;</span> + welcomePage);<br>        setRootViewName(<span class="hljs-string">&quot;forward:index.html&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (welcomeTemplateExists(templateAvailabilityProviders, applicationContext)) &#123;<br>        <span class="hljs-comment">//è°ƒç”¨Controller /index</span><br>        logger.info(<span class="hljs-string">&quot;Adding welcome page template: index&quot;</span>);<br>        setRootViewName(<span class="hljs-string">&quot;index&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>è¿™æ„é€ æ–¹æ³•å†…çš„ä»£ç ä¹Ÿè§£é‡Šäº†<a href="#">webåœºæ™¯-welcomeä¸faviconåŠŸèƒ½</a>ä¸­é…ç½®<code>static-path-pattern</code>äº†ï¼Œwelcomeé¡µé¢å’Œå°å›¾æ ‡å¤±æ•ˆçš„é—®é¢˜ã€‚</p><h2 id="26ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Restæ˜ å°„åŠæºç è§£æ"><a href="#26ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Restæ˜ å°„åŠæºç è§£æ" class="headerlink" title="26ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Restæ˜ å°„åŠæºç è§£æ"></a>26ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Restæ˜ å°„åŠæºç è§£æ</h2><h3 id="è¯·æ±‚æ˜ å°„"><a href="#è¯·æ±‚æ˜ å°„" class="headerlink" title="è¯·æ±‚æ˜ å°„"></a>è¯·æ±‚æ˜ å°„</h3><ul><li><p>@xxxMapping;</p><ul><li>@GetMapping</li><li>@PostMapping</li><li>@PutMapping</li><li>@DeleteMapping</li></ul></li><li><p>Resté£æ ¼æ”¯æŒï¼ˆä½¿ç”¨<strong>HTTP</strong>è¯·æ±‚æ–¹å¼åŠ¨è¯æ¥è¡¨ç¤ºå¯¹èµ„æºçš„æ“ä½œï¼‰</p><ul><li>ä»¥å‰ï¼š<ul><li>&#x2F;getUser è·å–ç”¨æˆ·</li><li>&#x2F;deleteUser åˆ é™¤ç”¨æˆ·</li><li>&#x2F;editUser ä¿®æ”¹ç”¨æˆ·</li><li>&#x2F;saveUserä¿å­˜ç”¨æˆ·</li></ul></li><li>ç°åœ¨ï¼š &#x2F;user <ul><li>GET-è·å–ç”¨æˆ·</li><li>DELETE-åˆ é™¤ç”¨æˆ·</li><li>PUT-ä¿®æ”¹ç”¨æˆ·</li><li>POST-ä¿å­˜ç”¨æˆ·</li></ul></li><li>æ ¸å¿ƒFilterï¼›HiddenHttpMethodFilter</li></ul></li><li><p><strong>ç”¨æ³•</strong></p><ul><li>å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</li><li>é¡µé¢ formçš„å±æ€§method&#x3D;postï¼Œéšè—åŸŸ _method&#x3D;putã€deleteç­‰ï¼ˆå¦‚æœç›´æ¥getæˆ–postï¼Œæ— éœ€éšè—åŸŸï¼‰</li><li>ç¼–å†™è¯·æ±‚æ˜ å°„</li></ul></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">mvc:</span><br>    <span class="hljs-attr">hiddenmethod:</span><br>      <span class="hljs-attr">filter:</span><br>        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span>   <span class="hljs-comment">#å¼€å¯é¡µé¢è¡¨å•çš„ReståŠŸèƒ½</span><br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;get&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-GETæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-POSTæäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;DELETE&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-DELETE æäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_method&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;PUT&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-PUTæäº¤&quot;</span><span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/user&quot;)</span><br><span class="hljs-comment">//@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.GET)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;GET-å¼ ä¸‰&quot;</span>;<br>&#125;<br><br><span class="hljs-meta">@PostMapping(&quot;/user&quot;)</span><br><span class="hljs-comment">//@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.POST)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">saveUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;POST-å¼ ä¸‰&quot;</span>;<br>&#125;<br><br><span class="hljs-meta">@PutMapping(&quot;/user&quot;)</span><br><span class="hljs-comment">//@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.PUT)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">putUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;PUT-å¼ ä¸‰&quot;</span>;<br>&#125;<br><br><span class="hljs-meta">@DeleteMapping(&quot;/user&quot;)</span><br><span class="hljs-comment">//@RequestMapping(value = &quot;/user&quot;,method = RequestMethod.DELETE)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteUser</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;DELETE-å¼ ä¸‰&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>ReståŸç†ï¼ˆè¡¨å•æäº¤è¦ä½¿ç”¨RESTçš„æ—¶å€™ï¼‰<ul><li>è¡¨å•æäº¤ä¼šå¸¦ä¸Š<code>\_method=PUT</code></li><li><strong>è¯·æ±‚è¿‡æ¥è¢«</strong><code>HiddenHttpMethodFilter</code>æ‹¦æˆª<ul><li>è¯·æ±‚æ˜¯å¦æ­£å¸¸ï¼Œå¹¶ä¸”æ˜¯POST<ul><li>è·å–åˆ°<code>\_method</code>çš„å€¼ã€‚</li><li>å…¼å®¹ä»¥ä¸‹è¯·æ±‚ï¼›<strong>PUT</strong>.<strong>DELETE</strong>.<strong>PATCH</strong></li><li><strong>åŸç”Ÿrequestï¼ˆpostï¼‰ï¼ŒåŒ…è£…æ¨¡å¼requesWrapperé‡å†™äº†getMethodæ–¹æ³•ï¼Œè¿”å›çš„æ˜¯ä¼ å…¥çš„å€¼ã€‚</strong></li><li><strong>è¿‡æ»¤å™¨é“¾æ”¾è¡Œçš„æ—¶å€™ç”¨wrapperã€‚ä»¥åçš„æ–¹æ³•è°ƒç”¨getMethodæ˜¯è°ƒç”¨requesWrapperçš„ã€‚</strong></li></ul></li></ul></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HiddenHttpMethodFilter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">OncePerRequestFilter</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> List&lt;String&gt; ALLOWED_METHODS =<br>Collections.unmodifiableList(Arrays.asList(HttpMethod.PUT.name(),<br>HttpMethod.DELETE.name(), HttpMethod.PATCH.name()));<br><br><span class="hljs-comment">/** Default method parameter: &#123;<span class="hljs-doctag">@code</span> _method&#125;. */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_METHOD_PARAM</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;_method&quot;</span>;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">methodParam</span> <span class="hljs-operator">=</span> DEFAULT_METHOD_PARAM;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Set the parameter name to look for HTTP methods.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@see</span> #DEFAULT_METHOD_PARAM</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMethodParam</span><span class="hljs-params">(String methodParam)</span> &#123;<br>Assert.hasText(methodParam, <span class="hljs-string">&quot;&#x27;methodParam&#x27; must not be empty&quot;</span>);<br><span class="hljs-built_in">this</span>.methodParam = methodParam;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilterInternal</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)</span><br><span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br><br><span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">requestToUse</span> <span class="hljs-operator">=</span> request;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;POST&quot;</span>.equals(request.getMethod()) &amp;&amp; request.getAttribute(WebUtils.ERROR_EXCEPTION_ATTRIBUTE) == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-type">String</span> <span class="hljs-variable">paramValue</span> <span class="hljs-operator">=</span> request.getParameter(<span class="hljs-built_in">this</span>.methodParam);<br><span class="hljs-keyword">if</span> (StringUtils.hasLength(paramValue)) &#123;<br><span class="hljs-type">String</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> paramValue.toUpperCase(Locale.ENGLISH);<br><span class="hljs-keyword">if</span> (ALLOWED_METHODS.contains(method)) &#123;<br>requestToUse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpMethodRequestWrapper</span>(request, method);<br>&#125;<br>&#125;<br>&#125;<br><br>filterChain.doFilter(requestToUse, response);<br>&#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Simple &#123;<span class="hljs-doctag">@link</span> HttpServletRequest&#125; wrapper that returns the supplied method for</span><br><span class="hljs-comment"> * &#123;<span class="hljs-doctag">@link</span> HttpServletRequest#getMethod()&#125;.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HttpMethodRequestWrapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServletRequestWrapper</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String method;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">HttpMethodRequestWrapper</span><span class="hljs-params">(HttpServletRequest request, String method)</span> &#123;<br><span class="hljs-built_in">super</span>(request);<br><span class="hljs-built_in">this</span>.method = method;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getMethod</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.method;<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><ul><li>Restä½¿ç”¨å®¢æˆ·ç«¯å·¥å…·ã€‚<ul><li>å¦‚PostManå¯ç›´æ¥å‘é€putã€deleteç­‰æ–¹å¼è¯·æ±‚ã€‚</li></ul></li></ul><h2 id="27ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-æ€ä¹ˆæ”¹å˜é»˜è®¤çš„-method"><a href="#27ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-æ€ä¹ˆæ”¹å˜é»˜è®¤çš„-method" class="headerlink" title="27ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-æ€ä¹ˆæ”¹å˜é»˜è®¤çš„_method"></a>27ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-æ€ä¹ˆæ”¹å˜é»˜è®¤çš„_method</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class &#125;)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span><br><span class="hljs-meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span><br><span class="hljs-meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class,</span><br><span class="hljs-meta">ValidationAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcAutoConfiguration</span> &#123;<br><br>    ...<br>    <br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span><br>    <span class="hljs-meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.hiddenmethod.filter&quot;, name = &quot;enabled&quot;, matchIfMissing = false)</span><br>    <span class="hljs-keyword">public</span> OrderedHiddenHttpMethodFilter <span class="hljs-title function_">hiddenHttpMethodFilter</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderedHiddenHttpMethodFilter</span>();<br>    &#125;<br>    <br>    ...<br>&#125;<br>    <br></code></pre></td></tr></table></figure><p><code>@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</code>æ„å‘³ç€åœ¨æ²¡æœ‰<code>HiddenHttpMethodFilter</code>æ—¶ï¼Œæ‰æ‰§è¡Œ<code>hiddenHttpMethodFilter()</code>ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰filterï¼Œæ”¹å˜é»˜è®¤çš„<code>\_method</code>ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span>&#123;<br>    <span class="hljs-comment">//è‡ªå®šä¹‰filter</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> HiddenHttpMethodFilter <span class="hljs-title function_">hiddenHttpMethodFilter</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">HiddenHttpMethodFilter</span> <span class="hljs-variable">methodFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HiddenHttpMethodFilter</span>();<br>        methodFilter.setMethodParam(<span class="hljs-string">&quot;_m&quot;</span>);<br>        <span class="hljs-keyword">return</span> methodFilter;<br>    &#125;    <br>&#125;<br></code></pre></td></tr></table></figure><p>å°†<code>\_method</code>æ”¹æˆ<code>_m</code>ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;/user&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;_m&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;hidden&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;DELETE&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;REST-DELETE æäº¤&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="28ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è¯·æ±‚æ˜ å°„åŸç†"><a href="#28ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è¯·æ±‚æ˜ å°„åŸç†" class="headerlink" title="28ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è¯·æ±‚æ˜ å°„åŸç†"></a>28ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è¯·æ±‚æ˜ å°„åŸç†</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205005703527.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>SpringMVCåŠŸèƒ½åˆ†æéƒ½ä» <code>org.springframework.web.servlet.DispatcherServlet</code> -&gt; <code>doDispatch()</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">processedRequest</span> <span class="hljs-operator">=</span> request;<br>    <span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">mappedHandler</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>    <span class="hljs-type">boolean</span> <span class="hljs-variable">multipartRequestParsed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>    <span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br><br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">Exception</span> <span class="hljs-variable">dispatchException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            processedRequest = checkMultipart(request);<br>            multipartRequestParsed = (processedRequest != request);<br><br>            <span class="hljs-comment">// æ‰¾åˆ°å½“å‰è¯·æ±‚ä½¿ç”¨å“ªä¸ªHandlerï¼ˆControllerçš„æ–¹æ³•ï¼‰å¤„ç†</span><br>            mappedHandler = getHandler(processedRequest);<br><br>            <span class="hljs-comment">//HandlerMappingï¼šå¤„ç†å™¨æ˜ å°„ã€‚/xxx-&gt;&gt;xxxx</span><br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p><code>getHandler()</code>æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> HandlerExecutionChain <span class="hljs-title function_">getHandler</span><span class="hljs-params">(HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.handlerMappings != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-keyword">for</span> (HandlerMapping mapping : <span class="hljs-built_in">this</span>.handlerMappings) &#123;<br>            <span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> mapping.getHandler(request);<br>            <span class="hljs-keyword">if</span> (handler != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">return</span> handler;<br>            &#125;<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>this.handlerMappings</code>åœ¨Debugæ¨¡å¼ä¸‹å±•ç°çš„å†…å®¹ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205005802305.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br>å…¶ä¸­ï¼Œä¿å­˜äº†æ‰€æœ‰<code>@RequestMapping</code> å’Œ<code>handler</code>çš„æ˜ å°„è§„åˆ™ã€‚</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205005926474.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>æ‰€æœ‰çš„è¯·æ±‚æ˜ å°„éƒ½åœ¨HandlerMappingä¸­ï¼š</p><ul><li><p>SpringBootè‡ªåŠ¨é…ç½®æ¬¢è¿é¡µçš„ WelcomePageHandlerMapping ã€‚è®¿é—® &#x2F;èƒ½è®¿é—®åˆ°index.htmlï¼›</p></li><li><p>SpringBootè‡ªåŠ¨é…ç½®äº†é»˜è®¤ çš„ RequestMappingHandlerMapping</p></li><li><p>è¯·æ±‚è¿›æ¥ï¼ŒæŒ¨ä¸ªå°è¯•æ‰€æœ‰çš„HandlerMappingçœ‹æ˜¯å¦æœ‰è¯·æ±‚ä¿¡æ¯ã€‚</p><ul><li>å¦‚æœæœ‰å°±æ‰¾åˆ°è¿™ä¸ªè¯·æ±‚å¯¹åº”çš„handler</li><li>å¦‚æœæ²¡æœ‰å°±æ˜¯ä¸‹ä¸€ä¸ª HandlerMapping</li></ul></li><li><p>æˆ‘ä»¬éœ€è¦ä¸€äº›è‡ªå®šä¹‰çš„æ˜ å°„å¤„ç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±ç»™å®¹å™¨ä¸­æ”¾<strong>HandlerMapping</strong>ã€‚è‡ªå®šä¹‰ <strong>HandlerMapping</strong></p></li></ul><hr><p>IDEAå¿«æ·é”®ï¼š</p><ul><li>Ctrl + Alt + U : ä»¥UMLçš„ç±»å›¾å±•ç°ç±»æœ‰å“ªäº›ç»§æ‰¿ç±»ï¼Œæ´¾ç”Ÿç±»ä»¥åŠå®ç°å“ªäº›æ¥å£ã€‚</li><li>Crtl + Alt + Shift + U : åŒä¸Šï¼ŒåŒºåˆ«åœ¨äºä¸Šæ¡å¿«æ·é”®ç»“æœåœ¨æ–°é¡µå±•ç°ï¼Œè€Œæœ¬æ¡å¿«æ·é”®ç»“æœåœ¨å¼¹çª—å±•ç°ã€‚</li><li>Ctrl + H : ä»¥æ ‘å½¢æ–¹å¼å±•ç°ç±»å±‚æ¬¡ç»“æ„å›¾ã€‚</li></ul><h2 id="29ã€è¯·æ±‚å¤„ç†-å¸¸ç”¨å‚æ•°æ³¨è§£ä½¿ç”¨"><a href="#29ã€è¯·æ±‚å¤„ç†-å¸¸ç”¨å‚æ•°æ³¨è§£ä½¿ç”¨" class="headerlink" title="29ã€è¯·æ±‚å¤„ç†-å¸¸ç”¨å‚æ•°æ³¨è§£ä½¿ç”¨"></a>29ã€è¯·æ±‚å¤„ç†-å¸¸ç”¨å‚æ•°æ³¨è§£ä½¿ç”¨</h2><p>æ³¨è§£ï¼š</p><ul><li><code>@PathVariable</code> è·¯å¾„å˜é‡</li><li><code>@RequestHeader</code> è·å–è¯·æ±‚å¤´</li><li><code>@RequestParam</code> è·å–è¯·æ±‚å‚æ•°ï¼ˆæŒ‡é—®å·åçš„å‚æ•°ï¼Œurl?a&#x3D;1&amp;b&#x3D;2ï¼‰</li><li><code>@CookieValue</code> è·å–Cookieå€¼</li><li><code>@RequestAttribute</code> è·å–requeståŸŸå±æ€§</li><li><code>@RequestBody</code> è·å–è¯·æ±‚ä½“[POST]</li><li><code>@MatrixVariable</code> çŸ©é˜µå˜é‡</li><li><code>@ModelAttribute</code></li></ul><p>ä½¿ç”¨ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterTestController</span> &#123;<br><br><br>    <span class="hljs-comment">//  car/2/owner/zhangsan</span><br>    <span class="hljs-meta">@GetMapping(&quot;/car/&#123;id&#125;/owner/&#123;username&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Map&lt;String,Object&gt; <span class="hljs-title function_">getCar</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@PathVariable(&quot;username&quot;)</span> String name,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@PathVariable</span> Map&lt;String,String&gt; pv,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@RequestHeader(&quot;User-Agent&quot;)</span> String userAgent,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@RequestHeader</span> Map&lt;String,String&gt; header,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@RequestParam(&quot;age&quot;)</span> Integer age,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@RequestParam(&quot;inters&quot;)</span> List&lt;String&gt; inters,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@RequestParam</span> Map&lt;String,String&gt; params,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@CookieValue(&quot;_ga&quot;)</span> String _ga,</span><br><span class="hljs-params">                                     <span class="hljs-meta">@CookieValue(&quot;_ga&quot;)</span> Cookie cookie)</span>&#123;<br><br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br><span class="hljs-comment">//        map.put(&quot;id&quot;,id);</span><br><span class="hljs-comment">//        map.put(&quot;name&quot;,name);</span><br><span class="hljs-comment">//        map.put(&quot;pv&quot;,pv);</span><br><span class="hljs-comment">//        map.put(&quot;userAgent&quot;,userAgent);</span><br><span class="hljs-comment">//        map.put(&quot;headers&quot;,header);</span><br>        map.put(<span class="hljs-string">&quot;age&quot;</span>,age);<br>        map.put(<span class="hljs-string">&quot;inters&quot;</span>,inters);<br>        map.put(<span class="hljs-string">&quot;params&quot;</span>,params);<br>        map.put(<span class="hljs-string">&quot;_ga&quot;</span>,_ga);<br>        System.out.println(cookie.getName()+<span class="hljs-string">&quot;===&gt;&quot;</span>+cookie.getValue());<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br><br><br>    <span class="hljs-meta">@PostMapping(&quot;/save&quot;)</span><br>    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">postMethod</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> String content)</span>&#123;<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        map.put(<span class="hljs-string">&quot;content&quot;</span>,content);<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="30ã€è¯·æ±‚å¤„ç†-RequestAttribute"><a href="#30ã€è¯·æ±‚å¤„ç†-RequestAttribute" class="headerlink" title="30ã€è¯·æ±‚å¤„ç†-@RequestAttribute"></a>30ã€è¯·æ±‚å¤„ç†-@RequestAttribute</h2><p>ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestController</span> &#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/goto&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">goToPage</span><span class="hljs-params">(HttpServletRequest request)</span>&#123;<br><br>        request.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;æˆåŠŸäº†...&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-number">200</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/success&quot;</span>;  <span class="hljs-comment">//è½¬å‘åˆ°  /successè¯·æ±‚</span><br>    &#125;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/params&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">testParam</span><span class="hljs-params">(Map&lt;String,Object&gt; map,</span><br><span class="hljs-params">                            Model model,</span><br><span class="hljs-params">                            HttpServletRequest request,</span><br><span class="hljs-params">                            HttpServletResponse response)</span>&#123;<br>        map.put(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;world666&quot;</span>);<br>        model.addAttribute(<span class="hljs-string">&quot;world&quot;</span>,<span class="hljs-string">&quot;hello666&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br><br>        <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;c1&quot;</span>,<span class="hljs-string">&quot;v1&quot;</span>);<br>        response.addCookie(cookie);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/success&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-comment">///&lt;-----------------ä¸»è§’@RequestAttributeåœ¨è¿™ä¸ªæ–¹æ³•</span><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@GetMapping(&quot;/success&quot;)</span><br>    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">success</span><span class="hljs-params">(<span class="hljs-meta">@RequestAttribute(value = &quot;msg&quot;,required = false)</span> String msg,</span><br><span class="hljs-params">                       <span class="hljs-meta">@RequestAttribute(value = &quot;code&quot;,required = false)</span>Integer code,</span><br><span class="hljs-params">                       HttpServletRequest request)</span>&#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">msg1</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;msg&quot;</span>);<br><br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;hello&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">world</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;world&quot;</span>);<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;message&quot;</span>);<br><br>        map.put(<span class="hljs-string">&quot;reqMethod_msg&quot;</span>,msg1);<br>        map.put(<span class="hljs-string">&quot;annotation_msg&quot;</span>,msg);<br>        map.put(<span class="hljs-string">&quot;hello&quot;</span>,hello);<br>        map.put(<span class="hljs-string">&quot;world&quot;</span>,world);<br>        map.put(<span class="hljs-string">&quot;message&quot;</span>,message);<br><br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="31ã€è¯·æ±‚å¤„ç†-MatrixVariableä¸UrlPathHelper"><a href="#31ã€è¯·æ±‚å¤„ç†-MatrixVariableä¸UrlPathHelper" class="headerlink" title="31ã€è¯·æ±‚å¤„ç†-@MatrixVariableä¸UrlPathHelper"></a>31ã€è¯·æ±‚å¤„ç†-@MatrixVariableä¸UrlPathHelper</h2><ol><li><p>è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š<code>/cars/sell;low=34;brand=byd,audi,yd</code></p></li><li><p>SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½</p><ul><li>æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperçš„removeSemicolonContentè®¾ç½®ä¸ºfalseï¼Œè®©å…¶æ”¯æŒçŸ©é˜µå˜é‡çš„ã€‚</li></ul></li><li><p>çŸ©é˜µå˜é‡<strong>å¿…é¡»</strong>æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ</p></li></ol><p><strong>æ‰‹åŠ¨å¼€å¯çŸ©é˜µå˜é‡</strong>ï¼š</p><ul><li>å®ç°<code>WebMvcConfigurer</code>æ¥å£ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configurePathMatch</span><span class="hljs-params">(PathMatchConfigurer configurer)</span> &#123;<br><br>        <span class="hljs-type">UrlPathHelper</span> <span class="hljs-variable">urlPathHelper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlPathHelper</span>();<br>        <span class="hljs-comment">// ä¸ç§»é™¤ï¼›åé¢çš„å†…å®¹ã€‚çŸ©é˜µå˜é‡åŠŸèƒ½å°±å¯ä»¥ç”Ÿæ•ˆ</span><br>        urlPathHelper.setRemoveSemicolonContent(<span class="hljs-literal">false</span>);<br>        configurer.setUrlPathHelper(urlPathHelper);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li>åˆ›å»ºè¿”å›<code>WebMvcConfigurer</code>Beanï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span>&#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebMvcConfigurer <span class="hljs-title function_">webMvcConfigurer</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurer</span>() &#123;<br>                        <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configurePathMatch</span><span class="hljs-params">(PathMatchConfigurer configurer)</span> &#123;<br>                <span class="hljs-type">UrlPathHelper</span> <span class="hljs-variable">urlPathHelper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UrlPathHelper</span>();<br>                <span class="hljs-comment">// ä¸ç§»é™¤ï¼›åé¢çš„å†…å®¹ã€‚çŸ©é˜µå˜é‡åŠŸèƒ½å°±å¯ä»¥ç”Ÿæ•ˆ</span><br>                urlPathHelper.setRemoveSemicolonContent(<span class="hljs-literal">false</span>);<br>                configurer.setUrlPathHelper(urlPathHelper);<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong><code>@MatrixVariable</code>çš„ç”¨ä¾‹</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterTestController</span> &#123;<br><br>    <span class="hljs-comment">///cars/sell;low=34;brand=byd,audi,yd</span><br>    <span class="hljs-meta">@GetMapping(&quot;/cars/&#123;path&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">carsSell</span><span class="hljs-params">(<span class="hljs-meta">@MatrixVariable(&quot;low&quot;)</span> Integer low,</span><br><span class="hljs-params">                        <span class="hljs-meta">@MatrixVariable(&quot;brand&quot;)</span> List&lt;String&gt; brand,</span><br><span class="hljs-params">                        <span class="hljs-meta">@PathVariable(&quot;path&quot;)</span> String path)</span>&#123;<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>        map.put(<span class="hljs-string">&quot;low&quot;</span>,low);<br>        map.put(<span class="hljs-string">&quot;brand&quot;</span>,brand);<br>        map.put(<span class="hljs-string">&quot;path&quot;</span>,path);<br>        <span class="hljs-keyword">return</span> map;<br>    &#125;<br><br>    <span class="hljs-comment">// /boss/1;age=20/2;age=10</span><br><br>    <span class="hljs-meta">@GetMapping(&quot;/boss/&#123;bossId&#125;/&#123;empId&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">boss</span><span class="hljs-params">(<span class="hljs-meta">@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;bossId&quot;)</span> Integer bossAge,</span><br><span class="hljs-params">                    <span class="hljs-meta">@MatrixVariable(value = &quot;age&quot;,pathVar = &quot;empId&quot;)</span> Integer empAge)</span>&#123;<br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>        map.put(<span class="hljs-string">&quot;bossAge&quot;</span>,bossAge);<br>        map.put(<span class="hljs-string">&quot;empAge&quot;</span>,empAge);<br>        <span class="hljs-keyword">return</span> map;<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="32ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-å„ç§ç±»å‹å‚æ•°è§£æåŸç†"><a href="#32ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-å„ç§ç±»å‹å‚æ•°è§£æåŸç†" class="headerlink" title="32ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-å„ç§ç±»å‹å‚æ•°è§£æåŸç†"></a>32ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-å„ç§ç±»å‹å‚æ•°è§£æåŸç†</h2><p>è¿™è¦ä»<code>DispatcherServlet</code>å¼€å§‹è¯´èµ·ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    <br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">processedRequest</span> <span class="hljs-operator">=</span> request;<br>        <span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">mappedHandler</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">multipartRequestParsed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br>        <span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-type">Exception</span> <span class="hljs-variable">dispatchException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>            <span class="hljs-keyword">try</span> &#123;<br>                processedRequest = checkMultipart(request);<br>                multipartRequestParsed = (processedRequest != request);<br><br>                <span class="hljs-comment">// Determine handler for the current request.</span><br>                mappedHandler = getHandler(processedRequest);<br>                <span class="hljs-keyword">if</span> (mappedHandler == <span class="hljs-literal">null</span>) &#123;<br>                    noHandlerFound(processedRequest, response);<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br><br>                <span class="hljs-comment">// Determine handler adapter for the current request.</span><br>                <span class="hljs-type">HandlerAdapter</span> <span class="hljs-variable">ha</span> <span class="hljs-operator">=</span> getHandlerAdapter(mappedHandler.getHandler());<br>                ...<br></code></pre></td></tr></table></figure><ul><li><code>HandlerMapping</code>ä¸­æ‰¾åˆ°èƒ½å¤„ç†è¯·æ±‚çš„<code>Handler</code>ï¼ˆController.method()ï¼‰ã€‚</li><li>ä¸ºå½“å‰Handler æ‰¾ä¸€ä¸ªé€‚é…å™¨ <code>HandlerAdapter</code>ï¼Œç”¨çš„æœ€å¤šçš„æ˜¯<strong>RequestMappingHandlerAdapter</strong>ã€‚</li><li>é€‚é…å™¨æ‰§è¡Œç›®æ ‡æ–¹æ³•å¹¶ç¡®å®šæ–¹æ³•å‚æ•°çš„æ¯ä¸€ä¸ªå€¼ã€‚</li></ul><h3 id="HandlerAdapter"><a href="#HandlerAdapter" class="headerlink" title="HandlerAdapter"></a>HandlerAdapter</h3><p>é»˜è®¤ä¼šåŠ è½½æ‰€æœ‰<code>HandlerAdapter</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br><br>    <span class="hljs-comment">/** Detect all HandlerAdapters or just expect &quot;handlerAdapter&quot; bean?. */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">detectAllHandlerAdapters</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;<br><br>    ...<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerAdapters</span><span class="hljs-params">(ApplicationContext context)</span> &#123;<br>        <span class="hljs-built_in">this</span>.handlerAdapters = <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.detectAllHandlerAdapters) &#123;<br>            <span class="hljs-comment">// Find all HandlerAdapters in the ApplicationContext, including ancestor contexts.</span><br>            Map&lt;String, HandlerAdapter&gt; matchingBeans =<br>                BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerAdapter.class, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);<br>            <span class="hljs-keyword">if</span> (!matchingBeans.isEmpty()) &#123;<br>                <span class="hljs-built_in">this</span>.handlerAdapters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(matchingBeans.values());<br>                <span class="hljs-comment">// We keep HandlerAdapters in sorted order.</span><br>                AnnotationAwareOrderComparator.sort(<span class="hljs-built_in">this</span>.handlerAdapters);<br>            &#125;<br>        &#125;<br>     ...<br></code></pre></td></tr></table></figure><p>æœ‰è¿™äº›<code>HandlerAdapter</code>ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205010047654.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ol start="0"><li><p>æ”¯æŒæ–¹æ³•ä¸Šæ ‡æ³¨<code>@RequestMapping</code> </p></li><li><p>æ”¯æŒå‡½æ•°å¼ç¼–ç¨‹çš„</p></li><li><p>â€¦</p></li><li><p>â€¦</p></li></ol><h3 id="æ‰§è¡Œç›®æ ‡æ–¹æ³•"><a href="#æ‰§è¡Œç›®æ ‡æ–¹æ³•" class="headerlink" title="æ‰§è¡Œç›®æ ‡æ–¹æ³•"></a>æ‰§è¡Œç›®æ ‡æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    <br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <br>        ...<br><br>        <span class="hljs-comment">// Determine handler for the current request.</span><br>        mappedHandler = getHandler(processedRequest);<br>        <span class="hljs-keyword">if</span> (mappedHandler == <span class="hljs-literal">null</span>) &#123;<br>            noHandlerFound(processedRequest, response);<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br><br>        <span class="hljs-comment">// Determine handler adapter for the current request.</span><br>        <span class="hljs-type">HandlerAdapter</span> <span class="hljs-variable">ha</span> <span class="hljs-operator">=</span> getHandlerAdapter(mappedHandler.getHandler());<br><br>        ...<br><span class="hljs-comment">//æœ¬èŠ‚é‡ç‚¹</span><br>        <span class="hljs-comment">// Actually invoke the handler.</span><br>        mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br></code></pre></td></tr></table></figure><p><code>HandlerAdapter</code>æ¥å£å®ç°ç±»<code>RequestMappingHandlerAdapter</code>ï¼ˆä¸»è¦ç”¨æ¥å¤„ç†<code>@RequestMapping</code>ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br><br>    ...<br>    <br>    <span class="hljs-comment">//AbstractHandlerMethodAdapterç±»çš„æ–¹æ³•ï¼ŒRequestMappingHandlerAdapterç»§æ‰¿AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ModelAndView <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span><br>        <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-keyword">return</span> handleInternal(request, response, (HandlerMethod) handler);<br>    &#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">handleInternal</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    ModelAndView mav;<br>        <span class="hljs-comment">//handleInternalçš„æ ¸å¿ƒ</span><br>        mav = invokeHandlerMethod(request, response, handlerMethod);<span class="hljs-comment">//è§£é‡Šçœ‹ä¸‹èŠ‚</span><br><span class="hljs-comment">//...</span><br><span class="hljs-keyword">return</span> mav;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å‚æ•°è§£æå™¨"><a href="#å‚æ•°è§£æå™¨" class="headerlink" title="å‚æ•°è§£æå™¨"></a>å‚æ•°è§£æå™¨</h3><p>ç¡®å®šå°†è¦æ‰§è¡Œçš„ç›®æ ‡æ–¹æ³•çš„æ¯ä¸€ä¸ªå‚æ•°çš„å€¼æ˜¯ä»€ä¹ˆ;</p><p>SpringMVCç›®æ ‡æ–¹æ³•èƒ½å†™å¤šå°‘ç§å‚æ•°ç±»å‹ã€‚å–å†³äº<strong>å‚æ•°è§£æå™¨argumentResolvers</strong>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">invokeHandlerMethod</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">                                           HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>    <span class="hljs-type">ServletWebRequest</span> <span class="hljs-variable">webRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response);<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-type">WebDataBinderFactory</span> <span class="hljs-variable">binderFactory</span> <span class="hljs-operator">=</span> getDataBinderFactory(handlerMethod);<br>        <span class="hljs-type">ModelFactory</span> <span class="hljs-variable">modelFactory</span> <span class="hljs-operator">=</span> getModelFactory(handlerMethod, binderFactory);<br><br>        <span class="hljs-type">ServletInvocableHandlerMethod</span> <span class="hljs-variable">invocableMethod</span> <span class="hljs-operator">=</span> createInvocableHandlerMethod(handlerMethod);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//&lt;-----å…³æ³¨ç‚¹</span><br>            invocableMethod.setHandlerMethodArgumentResolvers(<span class="hljs-built_in">this</span>.argumentResolvers);<br>        &#125;<br>        <br>        ...<br></code></pre></td></tr></table></figure><p><code>this.argumentResolvers</code>åœ¨<code>afterPropertiesSet()</code>æ–¹æ³•å†…åˆå§‹åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br><br>    <span class="hljs-meta">@Nullable</span><br>    <span class="hljs-keyword">private</span> HandlerMethodArgumentResolverComposite argumentResolvers;<br>    <br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> &#123;<br>        ...<br>    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers == <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//åˆå§‹åŒ–argumentResolvers</span><br>        List&lt;HandlerMethodArgumentResolver&gt; resolvers = getDefaultArgumentResolvers();<br>            <span class="hljs-built_in">this</span>.argumentResolvers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerMethodArgumentResolverComposite</span>().addResolvers(resolvers);<br>        &#125;<br>        ...<br>    &#125;<br><br>    <span class="hljs-comment">//åˆå§‹åŒ–äº†ä¸€å †çš„å®ç°HandlerMethodArgumentResolveræ¥å£çš„</span><br><span class="hljs-keyword">private</span> List&lt;HandlerMethodArgumentResolver&gt; <span class="hljs-title function_">getDefaultArgumentResolvers</span><span class="hljs-params">()</span> &#123;<br>List&lt;HandlerMethodArgumentResolver&gt; resolvers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-number">30</span>);<br><br><span class="hljs-comment">// Annotation-based argument resolution</span><br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestParamMethodArgumentResolver</span>(getBeanFactory(), <span class="hljs-literal">false</span>));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestParamMapMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PathVariableMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PathVariableMapMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MatrixVariableMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MatrixVariableMapMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletModelAttributeMethodProcessor</span>(<span class="hljs-literal">false</span>));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestResponseBodyMethodProcessor</span>(getMessageConverters(), <span class="hljs-built_in">this</span>.requestResponseBodyAdvice));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestPartMethodArgumentResolver</span>(getMessageConverters(), <span class="hljs-built_in">this</span>.requestResponseBodyAdvice));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestHeaderMethodArgumentResolver</span>(getBeanFactory()));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestHeaderMapMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletCookieValueMethodArgumentResolver</span>(getBeanFactory()));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExpressionValueMethodArgumentResolver</span>(getBeanFactory()));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SessionAttributeMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestAttributeMethodArgumentResolver</span>());<br><br><span class="hljs-comment">// Type-based argument resolution</span><br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRequestMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletResponseMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntityMethodProcessor</span>(getMessageConverters(), <span class="hljs-built_in">this</span>.requestResponseBodyAdvice));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RedirectAttributesMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelMethodProcessor</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MapMethodProcessor</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorsMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SessionStatusMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UriComponentsBuilderMethodArgumentResolver</span>());<br><span class="hljs-keyword">if</span> (KotlinDetector.isKotlinPresent()) &#123;<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ContinuationHandlerMethodArgumentResolver</span>());<br>&#125;<br><br><span class="hljs-comment">// Custom arguments</span><br><span class="hljs-keyword">if</span> (getCustomArgumentResolvers() != <span class="hljs-literal">null</span>) &#123;<br>resolvers.addAll(getCustomArgumentResolvers());<br>&#125;<br><br><span class="hljs-comment">// Catch-all</span><br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PrincipalMethodArgumentResolver</span>());<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestParamMethodArgumentResolver</span>(getBeanFactory(), <span class="hljs-literal">true</span>));<br>resolvers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletModelAttributeMethodProcessor</span>(<span class="hljs-literal">true</span>));<br><br><span class="hljs-keyword">return</span> resolvers;<br>&#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>HandlerMethodArgumentResolverComposite</code>ç±»å¦‚ä¸‹ï¼šï¼ˆä¼—å¤š<strong>å‚æ•°è§£æå™¨argumentResolvers</strong>çš„åŒ…è£…ç±»ï¼‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerMethodArgumentResolverComposite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodArgumentResolver</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;HandlerMethodArgumentResolver&gt; argumentResolvers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <br>    ...<br>    <br><span class="hljs-keyword">public</span> HandlerMethodArgumentResolverComposite <span class="hljs-title function_">addResolvers</span><span class="hljs-params">(</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> HandlerMethodArgumentResolver... resolvers)</span> &#123;<br><br><span class="hljs-keyword">if</span> (resolvers != <span class="hljs-literal">null</span>) &#123;<br>Collections.addAll(<span class="hljs-built_in">this</span>.argumentResolvers, resolvers);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br>    <br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>æˆ‘ä»¬çœ‹çœ‹<code>HandlerMethodArgumentResolver</code>çš„æºç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HandlerMethodArgumentResolver</span> &#123;<br><br>    <span class="hljs-comment">//å½“å‰è§£æå™¨æ˜¯å¦æ”¯æŒè§£æè¿™ç§å‚æ•°</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span>;<br><br><span class="hljs-meta">@Nullable</span><span class="hljs-comment">//å¦‚æœæ”¯æŒï¼Œå°±è°ƒç”¨ resolveArgument</span><br>Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h3 id="è¿”å›å€¼å¤„ç†å™¨"><a href="#è¿”å›å€¼å¤„ç†å™¨" class="headerlink" title="è¿”å›å€¼å¤„ç†å™¨"></a>è¿”å›å€¼å¤„ç†å™¨</h3><p><strong>ValueHandler</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">invokeHandlerMethod</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">                                           HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>    <span class="hljs-type">ServletWebRequest</span> <span class="hljs-variable">webRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response);<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-type">WebDataBinderFactory</span> <span class="hljs-variable">binderFactory</span> <span class="hljs-operator">=</span> getDataBinderFactory(handlerMethod);<br>        <span class="hljs-type">ModelFactory</span> <span class="hljs-variable">modelFactory</span> <span class="hljs-operator">=</span> getModelFactory(handlerMethod, binderFactory);<br><br>        <span class="hljs-type">ServletInvocableHandlerMethod</span> <span class="hljs-variable">invocableMethod</span> <span class="hljs-operator">=</span> createInvocableHandlerMethod(handlerMethod);<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers != <span class="hljs-literal">null</span>) &#123;<br>            invocableMethod.setHandlerMethodArgumentResolvers(<span class="hljs-built_in">this</span>.argumentResolvers);<br>        &#125;<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.returnValueHandlers != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//&lt;---å…³æ³¨ç‚¹</span><br>            invocableMethod.setHandlerMethodReturnValueHandlers(<span class="hljs-built_in">this</span>.returnValueHandlers);<br>        &#125;<br>     ...<br><br></code></pre></td></tr></table></figure><p><code>this.returnValueHandlers</code>åœ¨<code>afterPropertiesSet()</code>æ–¹æ³•å†…åˆå§‹åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> HandlerMethodReturnValueHandlerComposite returnValueHandlers;<br>    <br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> &#123;<br><br>        ...<br>        <br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.returnValueHandlers == <span class="hljs-literal">null</span>) &#123;<br>List&lt;HandlerMethodReturnValueHandler&gt; handlers = getDefaultReturnValueHandlers();<br><span class="hljs-built_in">this</span>.returnValueHandlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerMethodReturnValueHandlerComposite</span>().addHandlers(handlers);<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-comment">//åˆå§‹åŒ–äº†ä¸€å †çš„å®ç°HandlerMethodReturnValueHandleræ¥å£çš„</span><br>    <span class="hljs-keyword">private</span> List&lt;HandlerMethodReturnValueHandler&gt; <span class="hljs-title function_">getDefaultReturnValueHandlers</span><span class="hljs-params">()</span> &#123;<br>List&lt;HandlerMethodReturnValueHandler&gt; handlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-number">20</span>);<br><br><span class="hljs-comment">// Single-purpose return value types</span><br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndViewMethodReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelMethodProcessor</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewMethodReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ResponseBodyEmitterReturnValueHandler</span>(getMessageConverters(),<br><span class="hljs-built_in">this</span>.reactiveAdapterRegistry, <span class="hljs-built_in">this</span>.taskExecutor, <span class="hljs-built_in">this</span>.contentNegotiationManager));<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StreamingResponseBodyReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntityMethodProcessor</span>(getMessageConverters(),<br><span class="hljs-built_in">this</span>.contentNegotiationManager, <span class="hljs-built_in">this</span>.requestResponseBodyAdvice));<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeadersReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CallableMethodReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DeferredResultMethodReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncTaskMethodReturnValueHandler</span>(<span class="hljs-built_in">this</span>.beanFactory));<br><br><span class="hljs-comment">// Annotation-based return value types</span><br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletModelAttributeMethodProcessor</span>(<span class="hljs-literal">false</span>));<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestResponseBodyMethodProcessor</span>(getMessageConverters(),<br><span class="hljs-built_in">this</span>.contentNegotiationManager, <span class="hljs-built_in">this</span>.requestResponseBodyAdvice));<br><br><span class="hljs-comment">// Multi-purpose return value types</span><br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewNameMethodReturnValueHandler</span>());<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MapMethodProcessor</span>());<br><br><span class="hljs-comment">// Custom return value types</span><br><span class="hljs-keyword">if</span> (getCustomReturnValueHandlers() != <span class="hljs-literal">null</span>) &#123;<br>handlers.addAll(getCustomReturnValueHandlers());<br>&#125;<br><br><span class="hljs-comment">// Catch-all</span><br><span class="hljs-keyword">if</span> (!CollectionUtils.isEmpty(getModelAndViewResolvers())) &#123;<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndViewResolverMethodReturnValueHandler</span>(getModelAndViewResolvers()));<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletModelAttributeMethodProcessor</span>(<span class="hljs-literal">true</span>));<br>&#125;<br><br><span class="hljs-keyword">return</span> handlers;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>HandlerMethodReturnValueHandlerComposite</code>ç±»å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerMethodReturnValueHandlerComposite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodReturnValueHandler</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;HandlerMethodReturnValueHandler&gt; returnValueHandlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    ...<br>    <br><span class="hljs-keyword">public</span> HandlerMethodReturnValueHandlerComposite <span class="hljs-title function_">addHandlers</span><span class="hljs-params">(</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> List&lt;? extends HandlerMethodReturnValueHandler&gt; handlers)</span> &#123;<br><br><span class="hljs-keyword">if</span> (handlers != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-built_in">this</span>.returnValueHandlers.addAll(handlers);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><code>HandlerMethodReturnValueHandler</code>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HandlerMethodReturnValueHandler</span> &#123;<br><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsReturnType</span><span class="hljs-params">(MethodParameter returnType)</span>;<br><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">handleReturnValue</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Object returnValue, MethodParameter returnType,</span><br><span class="hljs-params">ModelAndViewContainer mavContainer, NativeWebRequest webRequest)</span> <span class="hljs-keyword">throws</span> Exception;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å›é¡¾æ‰§è¡Œç›®æ ‡æ–¹æ³•"><a href="#å›é¡¾æ‰§è¡Œç›®æ ‡æ–¹æ³•" class="headerlink" title="å›é¡¾æ‰§è¡Œç›®æ ‡æ–¹æ³•"></a>å›é¡¾æ‰§è¡Œç›®æ ‡æ–¹æ³•</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    ...<br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>...<br>        mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br></code></pre></td></tr></table></figure><p><code>RequestMappingHandlerAdapter</code>çš„<code>handle()</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br><br>    ...<br>    <br>    <span class="hljs-comment">//AbstractHandlerMethodAdapterç±»çš„æ–¹æ³•ï¼ŒRequestMappingHandlerAdapterç»§æ‰¿AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ModelAndView <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span><br>        <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-keyword">return</span> handleInternal(request, response, (HandlerMethod) handler);<br>    &#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">handleInternal</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    ModelAndView mav;<br>        <span class="hljs-comment">//handleInternalçš„æ ¸å¿ƒ</span><br>        mav = invokeHandlerMethod(request, response, handlerMethod);<span class="hljs-comment">//è§£é‡Šçœ‹ä¸‹èŠ‚</span><br><span class="hljs-comment">//...</span><br><span class="hljs-keyword">return</span> mav;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>RequestMappingHandlerAdapter</code>çš„<code>invokeHandlerMethod()</code>æ–¹æ³•ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br>    <br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">invokeHandlerMethod</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">ServletWebRequest</span> <span class="hljs-variable">webRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response);<br><span class="hljs-keyword">try</span> &#123;<br>...<br>            <br>            <span class="hljs-type">ServletInvocableHandlerMethod</span> <span class="hljs-variable">invocableMethod</span> <span class="hljs-operator">=</span> createInvocableHandlerMethod(handlerMethod);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers != <span class="hljs-literal">null</span>) &#123;<br>invocableMethod.setHandlerMethodArgumentResolvers(<span class="hljs-built_in">this</span>.argumentResolvers);<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.returnValueHandlers != <span class="hljs-literal">null</span>) &#123;<br>invocableMethod.setHandlerMethodReturnValueHandlers(<span class="hljs-built_in">this</span>.returnValueHandlers);<br>&#125;<br>...<br><br>            <span class="hljs-comment">//å…³æ³¨ç‚¹ï¼šæ‰§è¡Œç›®æ ‡æ–¹æ³•</span><br>invocableMethod.invokeAndHandle(webRequest, mavContainer);<br><span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-keyword">return</span> getModelAndView(mavContainer, modelFactory, webRequest);<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>webRequest.requestCompleted();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>invokeAndHandle()</code>æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletInvocableHandlerMethod</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InvocableHandlerMethod</span> &#123;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeAndHandle</span><span class="hljs-params">(ServletWebRequest webRequest, ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">Object... providedArgs)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">Object</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> invokeForRequest(webRequest, mavContainer, providedArgs);<br><br>        ...<br>        <br><span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//returnValueå­˜å‚¨èµ·æ¥</span><br><span class="hljs-built_in">this</span>.returnValueHandlers.handleReturnValue(<br>returnValue, getReturnValueType(returnValue), mavContainer, webRequest);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>...<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-meta">@Nullable</span><span class="hljs-comment">//InvocableHandlerMethodç±»çš„ï¼ŒServletInvocableHandlerMethodç±»ç»§æ‰¿InvocableHandlerMethodç±»</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invokeForRequest</span><span class="hljs-params">(NativeWebRequest request, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">Object... providedArgs)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">////è·å–æ–¹æ³•çš„å‚æ•°å€¼</span><br>Object[] args = getMethodArgumentValues(request, mavContainer, providedArgs);<br><br>        ...<br>       <br><span class="hljs-keyword">return</span> doInvoke(args);<br>&#125;<br><br>    <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">doInvoke</span><span class="hljs-params">(Object... args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> getBridgedMethod();<span class="hljs-comment">//@RequestMappingçš„æ–¹æ³•</span><br>ReflectionUtils.makeAccessible(method);<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">if</span> (KotlinDetector.isSuspendingFunction(method)) &#123;<br><span class="hljs-keyword">return</span> CoroutinesUtils.invokeSuspendingFunction(method, getBean(), args);<br>&#125;<br>            <span class="hljs-comment">//é€šè¿‡åå°„è°ƒç”¨</span><br><span class="hljs-keyword">return</span> method.invoke(getBean(), args);<span class="hljs-comment">//getBean()æŒ‡@RequestMappingçš„æ–¹æ³•æ‰€åœ¨ç±»çš„å¯¹è±¡ã€‚</span><br>&#125;<br><span class="hljs-keyword">catch</span> (IllegalArgumentException ex) &#123;<br>...<br>&#125;<br><span class="hljs-keyword">catch</span> (InvocationTargetException ex) &#123;<br>...<br>&#125;<br>&#125;<br>    <br>&#125;   <br></code></pre></td></tr></table></figure><h3 id="å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼"><a href="#å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼" class="headerlink" title="å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼"></a>å¦‚ä½•ç¡®å®šç›®æ ‡æ–¹æ³•æ¯ä¸€ä¸ªå‚æ•°çš„å€¼</h3><p>é‡ç‚¹åˆ†æ<code>ServletInvocableHandlerMethod</code>çš„<code>getMethodArgumentValues</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletInvocableHandlerMethod</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InvocableHandlerMethod</span> &#123;<br>    ...<br><br><span class="hljs-meta">@Nullable</span><span class="hljs-comment">//InvocableHandlerMethodç±»çš„ï¼ŒServletInvocableHandlerMethodç±»ç»§æ‰¿InvocableHandlerMethodç±»</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invokeForRequest</span><span class="hljs-params">(NativeWebRequest request, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">Object... providedArgs)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">////è·å–æ–¹æ³•çš„å‚æ•°å€¼</span><br>Object[] args = getMethodArgumentValues(request, mavContainer, providedArgs);<br><br>        ...<br>       <br><span class="hljs-keyword">return</span> doInvoke(args);<br>&#125;<br> <br>    <span class="hljs-comment">//æœ¬èŠ‚é‡ç‚¹ï¼Œè·å–æ–¹æ³•çš„å‚æ•°å€¼</span><br><span class="hljs-keyword">protected</span> Object[] getMethodArgumentValues(NativeWebRequest request, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,<br>Object... providedArgs) <span class="hljs-keyword">throws</span> Exception &#123;<br><br>MethodParameter[] parameters = getMethodParameters();<br><span class="hljs-keyword">if</span> (ObjectUtils.isEmpty(parameters)) &#123;<br><span class="hljs-keyword">return</span> EMPTY_ARGS;<br>&#125;<br><br>Object[] args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[parameters.length];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; parameters.length; i++) &#123;<br><span class="hljs-type">MethodParameter</span> <span class="hljs-variable">parameter</span> <span class="hljs-operator">=</span> parameters[i];<br>parameter.initParameterNameDiscovery(<span class="hljs-built_in">this</span>.parameterNameDiscoverer);<br>args[i] = findProvidedArgument(parameter, providedArgs);<br><span class="hljs-keyword">if</span> (args[i] != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br>            <span class="hljs-comment">//æŸ¥çœ‹resolversæ˜¯å¦æœ‰æ”¯æŒ</span><br><span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.resolvers.supportsParameter(parameter)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(formatArgumentError(parameter, <span class="hljs-string">&quot;No suitable resolver&quot;</span>));<br>&#125;<br><span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//æ”¯æŒçš„è¯å°±å¼€å§‹è§£æå§</span><br>args[i] = <span class="hljs-built_in">this</span>.resolvers.resolveArgument(parameter, mavContainer, request, <span class="hljs-built_in">this</span>.dataBinderFactory);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>....<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> args;<br>&#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>this.resolvers</code>çš„ç±»å‹ä¸º<code>HandlerMethodArgumentResolverComposite</code>ï¼ˆåœ¨<a href="#">å‚æ•°è§£æå™¨</a>ç« èŠ‚æåŠï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerMethodArgumentResolverComposite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodArgumentResolver</span> &#123;<br>    <br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br><span class="hljs-keyword">return</span> getArgumentResolver(parameter) != <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">HandlerMethodArgumentResolver</span> <span class="hljs-variable">resolver</span> <span class="hljs-operator">=</span> getArgumentResolver(parameter);<br><span class="hljs-keyword">if</span> (resolver == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Unsupported parameter type [&quot;</span> +<br>parameter.getParameterType().getName() + <span class="hljs-string">&quot;]. supportsParameter should be called first.&quot;</span>);<br>&#125;<br><span class="hljs-keyword">return</span> resolver.resolveArgument(parameter, mavContainer, webRequest, binderFactory);<br>&#125;<br>    <br>    <br>    <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> HandlerMethodArgumentResolver <span class="hljs-title function_">getArgumentResolver</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br><span class="hljs-type">HandlerMethodArgumentResolver</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.argumentResolverCache.get(parameter);<br><span class="hljs-keyword">if</span> (result == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">//æŒ¨ä¸ªåˆ¤æ–­æ‰€æœ‰å‚æ•°è§£æå™¨é‚£ä¸ªæ”¯æŒè§£æè¿™ä¸ªå‚æ•°</span><br><span class="hljs-keyword">for</span> (HandlerMethodArgumentResolver resolver : <span class="hljs-built_in">this</span>.argumentResolvers) &#123;<br><span class="hljs-keyword">if</span> (resolver.supportsParameter(parameter)) &#123;<br>result = resolver;<br><span class="hljs-built_in">this</span>.argumentResolverCache.put(parameter, result);<span class="hljs-comment">//æ‰¾åˆ°äº†ï¼Œresolverå°±ç¼“å­˜èµ·æ¥ï¼Œæ–¹ä¾¿ç¨åresolveArgument()æ–¹æ³•ä½¿ç”¨</span><br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> result;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><p>æœ¬èŠ‚æè¿°ï¼Œä¸€ä¸ªè¯·æ±‚å‘é€åˆ°DispatcherServletåçš„å…·ä½“å¤„ç†æµç¨‹ï¼Œä¹Ÿå°±æ˜¯SpringMVCçš„ä¸»è¦åŸç†ã€‚</p><p>æœ¬èŠ‚å†…å®¹è¾ƒå¤šä¸”ç¡¬æ ¸ï¼Œå¯¹æ—¥åç¼–ç¨‹å¾ˆæœ‰å¸®åŠ©ï¼Œéœ€è€å¿ƒå¯¹å¾…ã€‚</p><p>å¯ä»¥è¿è¡Œä¸€ä¸ªç¤ºä¾‹ï¼Œæ‰“æ–­ç‚¹ï¼Œåœ¨Debugæ¨¡å¼ä¸‹ï¼ŒæŸ¥çœ‹ç¨‹åºæµç¨‹ã€‚</p><h2 id="33ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Servlet-APIå‚æ•°è§£æåŸç†"><a href="#33ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Servlet-APIå‚æ•°è§£æåŸç†" class="headerlink" title="33ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Servlet APIå‚æ•°è§£æåŸç†"></a>33ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Servlet APIå‚æ•°è§£æåŸç†</h2><ul><li>WebRequest</li><li>ServletRequest</li><li>MultipartRequest</li><li>HttpSession</li><li>javax.servlet.http.PushBuilder</li><li>Principal</li><li>InputStream</li><li>Reader</li><li>HttpMethod</li><li>Locale</li><li>TimeZone</li><li>ZoneId</li></ul><p><strong>ServletRequestMethodArgumentResolver</strong>ç”¨æ¥å¤„ç†ä»¥ä¸Šçš„å‚æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletRequestMethodArgumentResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodArgumentResolver</span> &#123;<br><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Class&lt;?&gt; pushBuilder;<br><br><span class="hljs-keyword">static</span> &#123;<br><span class="hljs-keyword">try</span> &#123;<br>pushBuilder = ClassUtils.forName(<span class="hljs-string">&quot;javax.servlet.http.PushBuilder&quot;</span>,<br>ServletRequestMethodArgumentResolver.class.getClassLoader());<br>&#125;<br><span class="hljs-keyword">catch</span> (ClassNotFoundException ex) &#123;<br><span class="hljs-comment">// Servlet 4.0 PushBuilder not found - not supported for injection</span><br>pushBuilder = <span class="hljs-literal">null</span>;<br>&#125;<br>&#125;<br><br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br>Class&lt;?&gt; paramType = parameter.getParameterType();<br><span class="hljs-keyword">return</span> (WebRequest.class.isAssignableFrom(paramType) ||<br>ServletRequest.class.isAssignableFrom(paramType) ||<br>MultipartRequest.class.isAssignableFrom(paramType) ||<br>HttpSession.class.isAssignableFrom(paramType) ||<br>(pushBuilder != <span class="hljs-literal">null</span> &amp;&amp; pushBuilder.isAssignableFrom(paramType)) ||<br>(Principal.class.isAssignableFrom(paramType) &amp;&amp; !parameter.hasParameterAnnotations()) ||<br>InputStream.class.isAssignableFrom(paramType) ||<br>Reader.class.isAssignableFrom(paramType) ||<br>HttpMethod.class == paramType ||<br>Locale.class == paramType ||<br>TimeZone.class == paramType ||<br>ZoneId.class == paramType);<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>Class&lt;?&gt; paramType = parameter.getParameterType();<br><br><span class="hljs-comment">// WebRequest / NativeWebRequest / ServletWebRequest</span><br><span class="hljs-keyword">if</span> (WebRequest.class.isAssignableFrom(paramType)) &#123;<br><span class="hljs-keyword">if</span> (!paramType.isInstance(webRequest)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Current request is not of type [&quot;</span> + paramType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + webRequest);<br>&#125;<br><span class="hljs-keyword">return</span> webRequest;<br>&#125;<br><br><span class="hljs-comment">// ServletRequest / HttpServletRequest / MultipartRequest / MultipartHttpServletRequest</span><br><span class="hljs-keyword">if</span> (ServletRequest.class.isAssignableFrom(paramType) || MultipartRequest.class.isAssignableFrom(paramType)) &#123;<br><span class="hljs-keyword">return</span> resolveNativeRequest(webRequest, paramType);<br>&#125;<br><br><span class="hljs-comment">// HttpServletRequest required for all further argument types</span><br><span class="hljs-keyword">return</span> resolveArgument(paramType, resolveNativeRequest(webRequest, HttpServletRequest.class));<br>&#125;<br><br><span class="hljs-keyword">private</span> &lt;T&gt; T <span class="hljs-title function_">resolveNativeRequest</span><span class="hljs-params">(NativeWebRequest webRequest, Class&lt;T&gt; requiredType)</span> &#123;<br><span class="hljs-type">T</span> <span class="hljs-variable">nativeRequest</span> <span class="hljs-operator">=</span> webRequest.getNativeRequest(requiredType);<br><span class="hljs-keyword">if</span> (nativeRequest == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Current request is not of type [&quot;</span> + requiredType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + webRequest);<br>&#125;<br><span class="hljs-keyword">return</span> nativeRequest;<br>&#125;<br><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(Class&lt;?&gt; paramType, HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><span class="hljs-keyword">if</span> (HttpSession.class.isAssignableFrom(paramType)) &#123;<br><span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> request.getSession();<br><span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span> &amp;&amp; !paramType.isInstance(session)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Current session is not of type [&quot;</span> + paramType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + session);<br>&#125;<br><span class="hljs-keyword">return</span> session;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pushBuilder != <span class="hljs-literal">null</span> &amp;&amp; pushBuilder.isAssignableFrom(paramType)) &#123;<br><span class="hljs-keyword">return</span> PushBuilderDelegate.resolvePushBuilder(request, paramType);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (InputStream.class.isAssignableFrom(paramType)) &#123;<br><span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> request.getInputStream();<br><span class="hljs-keyword">if</span> (inputStream != <span class="hljs-literal">null</span> &amp;&amp; !paramType.isInstance(inputStream)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Request input stream is not of type [&quot;</span> + paramType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + inputStream);<br>&#125;<br><span class="hljs-keyword">return</span> inputStream;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Reader.class.isAssignableFrom(paramType)) &#123;<br><span class="hljs-type">Reader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> request.getReader();<br><span class="hljs-keyword">if</span> (reader != <span class="hljs-literal">null</span> &amp;&amp; !paramType.isInstance(reader)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Request body reader is not of type [&quot;</span> + paramType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + reader);<br>&#125;<br><span class="hljs-keyword">return</span> reader;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Principal.class.isAssignableFrom(paramType)) &#123;<br><span class="hljs-type">Principal</span> <span class="hljs-variable">userPrincipal</span> <span class="hljs-operator">=</span> request.getUserPrincipal();<br><span class="hljs-keyword">if</span> (userPrincipal != <span class="hljs-literal">null</span> &amp;&amp; !paramType.isInstance(userPrincipal)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Current user principal is not of type [&quot;</span> + paramType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + userPrincipal);<br>&#125;<br><span class="hljs-keyword">return</span> userPrincipal;<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (HttpMethod.class == paramType) &#123;<br><span class="hljs-keyword">return</span> HttpMethod.resolve(request.getMethod());<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Locale.class == paramType) &#123;<br><span class="hljs-keyword">return</span> RequestContextUtils.getLocale(request);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (TimeZone.class == paramType) &#123;<br><span class="hljs-type">TimeZone</span> <span class="hljs-variable">timeZone</span> <span class="hljs-operator">=</span> RequestContextUtils.getTimeZone(request);<br><span class="hljs-keyword">return</span> (timeZone != <span class="hljs-literal">null</span> ? timeZone : TimeZone.getDefault());<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ZoneId.class == paramType) &#123;<br><span class="hljs-type">TimeZone</span> <span class="hljs-variable">timeZone</span> <span class="hljs-operator">=</span> RequestContextUtils.getTimeZone(request);<br><span class="hljs-keyword">return</span> (timeZone != <span class="hljs-literal">null</span> ? timeZone.toZoneId() : ZoneId.systemDefault());<br>&#125;<br><br><span class="hljs-comment">// Should never happen...</span><br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>(<span class="hljs-string">&quot;Unknown parameter type: &quot;</span> + paramType.getName());<br>&#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Inner class to avoid a hard dependency on Servlet API 4.0 at runtime.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushBuilderDelegate</span> &#123;<br><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">resolvePushBuilder</span><span class="hljs-params">(HttpServletRequest request, Class&lt;?&gt; paramType)</span> &#123;<br><span class="hljs-type">PushBuilder</span> <span class="hljs-variable">pushBuilder</span> <span class="hljs-operator">=</span> request.newPushBuilder();<br><span class="hljs-keyword">if</span> (pushBuilder != <span class="hljs-literal">null</span> &amp;&amp; !paramType.isInstance(pushBuilder)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<br><span class="hljs-string">&quot;Current push builder is not of type [&quot;</span> + paramType.getName() + <span class="hljs-string">&quot;]: &quot;</span> + pushBuilder);<br>&#125;<br><span class="hljs-keyword">return</span> pushBuilder;<br><br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestController</span> &#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/goto&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">goToPage</span><span class="hljs-params">(HttpServletRequest request)</span>&#123;<br><br>        request.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;æˆåŠŸäº†...&quot;</span>);<br>        request.setAttribute(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-number">200</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/success&quot;</span>;  <span class="hljs-comment">//è½¬å‘åˆ°  /successè¯·æ±‚</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="34ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Modelã€MapåŸç†"><a href="#34ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Modelã€MapåŸç†" class="headerlink" title="34ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Modelã€MapåŸç†"></a>34ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-Modelã€MapåŸç†</h2><p>å¤æ‚å‚æ•°ï¼š</p><ul><li><p><strong>Map</strong></p></li><li><p><strong>Modelï¼ˆmapã€modelé‡Œé¢çš„æ•°æ®ä¼šè¢«æ”¾åœ¨requestçš„è¯·æ±‚åŸŸ  request.setAttributeï¼‰</strong></p></li><li><p>Errors&#x2F;BindingResult</p></li><li><p><strong>RedirectAttributesï¼ˆ é‡å®šå‘æºå¸¦æ•°æ®ï¼‰</strong></p></li><li><p><strong>ServletResponseï¼ˆresponseï¼‰</strong></p></li><li><p>SessionStatus</p></li><li><p>UriComponentsBuilder</p></li><li><p>ServletUriComponentsBuilder</p></li></ul><p>ç”¨ä¾‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/params&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">testParam</span><span class="hljs-params">(Map&lt;String,Object&gt; map,</span><br><span class="hljs-params">                        Model model,</span><br><span class="hljs-params">                        HttpServletRequest request,</span><br><span class="hljs-params">                        HttpServletResponse response)</span>&#123;<br>    <span class="hljs-comment">//ä¸‹é¢ä¸‰ä½éƒ½æ˜¯å¯ä»¥ç»™requeståŸŸä¸­æ”¾æ•°æ®</span><br>    map.put(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;world666&quot;</span>);<br>    model.addAttribute(<span class="hljs-string">&quot;world&quot;</span>,<span class="hljs-string">&quot;hello666&quot;</span>);<br>    request.setAttribute(<span class="hljs-string">&quot;message&quot;</span>,<span class="hljs-string">&quot;HelloWorld&quot;</span>);<br><br>    <span class="hljs-type">Cookie</span> <span class="hljs-variable">cookie</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cookie</span>(<span class="hljs-string">&quot;c1&quot;</span>,<span class="hljs-string">&quot;v1&quot;</span>);<br>    response.addCookie(cookie);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;forward:/success&quot;</span>;<br>&#125;<br><br><span class="hljs-meta">@ResponseBody</span><br><span class="hljs-meta">@GetMapping(&quot;/success&quot;)</span><br><span class="hljs-keyword">public</span> Map <span class="hljs-title function_">success</span><span class="hljs-params">(<span class="hljs-meta">@RequestAttribute(value = &quot;msg&quot;,required = false)</span> String msg,</span><br><span class="hljs-params">                   <span class="hljs-meta">@RequestAttribute(value = &quot;code&quot;,required = false)</span>Integer code,</span><br><span class="hljs-params">                   HttpServletRequest request)</span>&#123;<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">msg1</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;msg&quot;</span>);<br><br>    Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>    <span class="hljs-type">Object</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;hello&quot;</span>);<span class="hljs-comment">//å¾—å‡ºtestParamæ–¹æ³•èµ‹äºˆçš„å€¼ world666</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">world</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;world&quot;</span>);<span class="hljs-comment">//å¾—å‡ºtestParamæ–¹æ³•èµ‹äºˆçš„å€¼ hello666</span><br>    <span class="hljs-type">Object</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> request.getAttribute(<span class="hljs-string">&quot;message&quot;</span>);<span class="hljs-comment">//å¾—å‡ºtestParamæ–¹æ³•èµ‹äºˆçš„å€¼ HelloWorld</span><br><br>    map.put(<span class="hljs-string">&quot;reqMethod_msg&quot;</span>,msg1);<br>    map.put(<span class="hljs-string">&quot;annotation_msg&quot;</span>,msg);<br>    map.put(<span class="hljs-string">&quot;hello&quot;</span>,hello);<br>    map.put(<span class="hljs-string">&quot;world&quot;</span>,world);<br>    map.put(<span class="hljs-string">&quot;message&quot;</span>,message);<br><br>    <span class="hljs-keyword">return</span> map;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p><code>Map&lt;String,Object&gt; map</code></p></li><li><p><code>Model model</code></p></li><li><p><code>HttpServletRequest request</code></p></li></ul><p>ä¸Šé¢ä¸‰ä½éƒ½æ˜¯å¯ä»¥ç»™requeståŸŸä¸­æ”¾æ•°æ®ï¼Œç”¨<code>request.getAttribute()</code>è·å–</p><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ï¼Œ<code>Map&lt;String,Object&gt; map</code>ä¸<code>Model model</code>ç”¨ä»€ä¹ˆå‚æ•°å¤„ç†å™¨ã€‚</p><hr><p><code>Map&lt;String,Object&gt; map</code>å‚æ•°ç”¨<code>MapMethodProcessor</code>å¤„ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MapMethodProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodArgumentResolver</span>, HandlerMethodReturnValueHandler &#123;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br><span class="hljs-keyword">return</span> (Map.class.isAssignableFrom(parameter.getParameterType()) &amp;&amp;<br>parameter.getParameterAnnotations().length == <span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>Assert.state(mavContainer != <span class="hljs-literal">null</span>, <span class="hljs-string">&quot;ModelAndViewContainer is required for model exposure&quot;</span>);<br><span class="hljs-keyword">return</span> mavContainer.getModel();<br>&#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>mavContainer.getModel()</code>å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelAndViewContainer</span> &#123;<br><br>    ...<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ModelMap</span> <span class="hljs-variable">defaultModel</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BindingAwareModelMap</span>();<br><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> ModelMap redirectModel;<br><br>    ...<br><br><span class="hljs-keyword">public</span> ModelMap <span class="hljs-title function_">getModel</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">if</span> (useDefaultModel()) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.defaultModel;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.redirectModel == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-built_in">this</span>.redirectModel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelMap</span>();<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.redirectModel;<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">useDefaultModel</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> (!<span class="hljs-built_in">this</span>.redirectModelScenario || (<span class="hljs-built_in">this</span>.redirectModel == <span class="hljs-literal">null</span> &amp;&amp; !<span class="hljs-built_in">this</span>.ignoreDefaultModelOnRedirect));<br>&#125;<br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><hr><p><code>Model model</code>ç”¨<code>ModelMethodProcessor</code>å¤„ç†ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ModelMethodProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodArgumentResolver</span>, HandlerMethodReturnValueHandler &#123;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br><span class="hljs-keyword">return</span> Model.class.isAssignableFrom(parameter.getParameterType());<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>Assert.state(mavContainer != <span class="hljs-literal">null</span>, <span class="hljs-string">&quot;ModelAndViewContainer is required for model exposure&quot;</span>);<br><span class="hljs-keyword">return</span> mavContainer.getModel();<br>&#125;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p><code>return mavContainer.getModel();</code>è¿™è·Ÿ<code>MapMethodProcessor</code>çš„ä¸€è‡´</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205010247689.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><code>Model</code>ä¹Ÿæ˜¯å¦ä¸€ç§æ„ä¹‰çš„<code>Map</code>ã€‚</p><hr><p><strong>æ¥ä¸‹æ¥çœ‹çœ‹</strong><code>Map&lt;String,Object&gt; map</code>ä¸<code>Model model</code>å€¼æ˜¯å¦‚ä½•åšåˆ°ç”¨<code>request.getAttribute()</code>è·å–çš„ã€‚</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨ <strong>ModelAndView</strong>åŒ…å«è¦å»çš„é¡µé¢åœ°å€Viewï¼Œè¿˜åŒ…å«Modelæ•°æ®ã€‚</p><p>å…ˆçœ‹<strong>ModelAndView</strong>æ¥ä¸‹æ¥æ˜¯å¦‚ä½•å¤„ç†çš„ï¼Ÿ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>...<br><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <br>            ...<br><br><span class="hljs-comment">// Actually invoke the handler.</span><br>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br>            <br>            ...<br>            <br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>dispatchException = ex;<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable err) &#123;<br><span class="hljs-comment">// As of 4.3, we&#x27;re processing Errors thrown from handler methods as well,</span><br><span class="hljs-comment">// making them available for @ExceptionHandler methods and other scenarios.</span><br>dispatchException = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">&quot;Handler dispatch failed&quot;</span>, err);<br>&#125;<br>        <span class="hljs-comment">//å¤„ç†åˆ†å‘ç»“æœ</span><br>processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);<br>&#125;<br>        ...<br><br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="hljs-meta">@Nullable</span> ModelAndView mv,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> Exception exception)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        ...<br><br><span class="hljs-comment">// Did the handler return a view to render?</span><br><span class="hljs-keyword">if</span> (mv != <span class="hljs-literal">null</span> &amp;&amp; !mv.wasCleared()) &#123;<br>render(mv, request, response);<br>...<br>&#125;<br>...<br>&#125;<br><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">(ModelAndView mv, HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>...<br><br>View view;<br><span class="hljs-type">String</span> <span class="hljs-variable">viewName</span> <span class="hljs-operator">=</span> mv.getViewName();<br><span class="hljs-keyword">if</span> (viewName != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-comment">// We need to resolve the view name.</span><br>view = resolveViewName(viewName, mv.getModelInternal(), locale, request);<br><span class="hljs-keyword">if</span> (view == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(<span class="hljs-string">&quot;Could not resolve view with name &#x27;&quot;</span> + mv.getViewName() +<br><span class="hljs-string">&quot;&#x27; in servlet with name &#x27;&quot;</span> + getServletName() + <span class="hljs-string">&quot;&#x27;&quot;</span>);<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">// No need to lookup: the ModelAndView object contains the actual View object.</span><br>view = mv.getView();<br><span class="hljs-keyword">if</span> (view == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletException</span>(<span class="hljs-string">&quot;ModelAndView [&quot;</span> + mv + <span class="hljs-string">&quot;] neither contains a view name nor a &quot;</span> +<br><span class="hljs-string">&quot;View object in servlet with name &#x27;&quot;</span> + getServletName() + <span class="hljs-string">&quot;&#x27;&quot;</span>);<br>&#125;<br>&#125;<br>view.render(mv.getModelInternal(), request, response);<br>        <br>        ...<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨Debugæ¨¡å¼ä¸‹ï¼Œ<code>view</code>å±ä¸º<code>InternalResourceView</code>ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InternalResourceView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractUrlBasedView</span> &#123;<br>    <br> <span class="hljs-meta">@Override</span><span class="hljs-comment">//è¯¥æ–¹æ³•åœ¨AbstractViewï¼ŒAbstractUrlBasedViewç»§æ‰¿äº†AbstractView</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Map&lt;String, ?&gt; model, HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        ...<br>        <br>Map&lt;String, Object&gt; mergedModel = createMergedOutputModel(model, request, response);<br>prepareResponse(request, response);<br>        <br>        <span class="hljs-comment">//çœ‹ä¸‹ä¸€ä¸ªæ–¹æ³•å®ç°</span><br>renderMergedOutputModel(mergedModel, getRequestToExpose(request), response);<br>&#125;<br>    <br>    <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">renderMergedOutputModel</span><span class="hljs-params">(</span><br><span class="hljs-params">Map&lt;String, Object&gt; model, HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-comment">// Expose the model object as request attributes.</span><br>        <span class="hljs-comment">// æš´éœ²æ¨¡å‹ä½œä¸ºè¯·æ±‚åŸŸå±æ€§</span><br>exposeModelAsRequestAttributes(model, request);<span class="hljs-comment">//&lt;---é‡ç‚¹</span><br><br><span class="hljs-comment">// Expose helpers as request attributes, if any.</span><br>exposeHelpers(request);<br><br><span class="hljs-comment">// Determine the path for the request dispatcher.</span><br><span class="hljs-type">String</span> <span class="hljs-variable">dispatcherPath</span> <span class="hljs-operator">=</span> prepareForRendering(request, response);<br><br><span class="hljs-comment">// Obtain a RequestDispatcher for the target resource (typically a JSP).</span><br><span class="hljs-type">RequestDispatcher</span> <span class="hljs-variable">rd</span> <span class="hljs-operator">=</span> getRequestDispatcher(request, dispatcherPath);<br><br>        ...<br>&#125;<br>    <br>    <span class="hljs-comment">//è¯¥æ–¹æ³•åœ¨AbstractViewï¼ŒAbstractUrlBasedViewç»§æ‰¿äº†AbstractView</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exposeModelAsRequestAttributes</span><span class="hljs-params">(Map&lt;String, Object&gt; model,</span><br><span class="hljs-params">HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>model.forEach((name, value) -&gt; &#123;<br><span class="hljs-keyword">if</span> (value != <span class="hljs-literal">null</span>) &#123;<br>request.setAttribute(name, value);<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br>request.removeAttribute(name);<br>&#125;<br>&#125;);<br>&#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>exposeModelAsRequestAttributes</code>æ–¹æ³•çœ‹å‡ºï¼Œ<code>Map&lt;String,Object&gt; map</code>ï¼Œ<code>Model model</code>è¿™ä¸¤ç§ç±»å‹æ•°æ®å¯ä»¥ç»™requeståŸŸä¸­æ”¾æ•°æ®ï¼Œç”¨<code>request.getAttribute()</code>è·å–ã€‚</p><h2 id="35ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰å‚æ•°ç»‘å®šåŸç†"><a href="#35ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰å‚æ•°ç»‘å®šåŸç†" class="headerlink" title="35ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰å‚æ•°ç»‘å®šåŸç†"></a>35ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰å‚æ•°ç»‘å®šåŸç†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterTestController</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ•°æ®ç»‘å®šï¼šé¡µé¢æäº¤çš„è¯·æ±‚æ•°æ®ï¼ˆGETã€POSTï¼‰éƒ½å¯ä»¥å’Œå¯¹è±¡å±æ€§è¿›è¡Œç»‘å®š</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> person</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@PostMapping(&quot;/saveuser&quot;)</span><br>    <span class="hljs-keyword">public</span> Person <span class="hljs-title function_">saveuser</span><span class="hljs-params">(Person person)</span>&#123;<br>        <span class="hljs-keyword">return</span> person;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *     å§“åï¼š &lt;input name=&quot;userName&quot;/&gt; &lt;br/&gt;</span><br><span class="hljs-comment"> *     å¹´é¾„ï¼š &lt;input name=&quot;age&quot;/&gt; &lt;br/&gt;</span><br><span class="hljs-comment"> *     ç”Ÿæ—¥ï¼š &lt;input name=&quot;birth&quot;/&gt; &lt;br/&gt;</span><br><span class="hljs-comment"> *     å® ç‰©å§“åï¼š&lt;input name=&quot;pet.name&quot;/&gt;&lt;br/&gt;</span><br><span class="hljs-comment"> *     å® ç‰©å¹´é¾„ï¼š&lt;input name=&quot;pet.age&quot;/&gt;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>    <br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-keyword">private</span> Integer age;<br>    <span class="hljs-keyword">private</span> Date birth;<br>    <span class="hljs-keyword">private</span> Pet pet;<br>    <br>&#125;<br><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Pet</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String age;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>å°è£…è¿‡ç¨‹ç”¨åˆ°<code>ServletModelAttributeMethodProcessor</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletModelAttributeMethodProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ModelAttributeMethodProcessor</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><span class="hljs-comment">//æœ¬æ–¹æ³•åœ¨ModelAttributeMethodProcessorç±»ï¼Œ</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br><span class="hljs-keyword">return</span> (parameter.hasParameterAnnotation(ModelAttribute.class) ||<br>(<span class="hljs-built_in">this</span>.annotationNotRequired &amp;&amp; !BeanUtils.isSimpleProperty(parameter.getParameterType())));<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><span class="hljs-comment">//æœ¬æ–¹æ³•åœ¨ModelAttributeMethodProcessorç±»ï¼Œ</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>...<br><br><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> ModelFactory.getNameForParameter(parameter);<br><span class="hljs-type">ModelAttribute</span> <span class="hljs-variable">ann</span> <span class="hljs-operator">=</span> parameter.getParameterAnnotation(ModelAttribute.class);<br><span class="hljs-keyword">if</span> (ann != <span class="hljs-literal">null</span>) &#123;<br>mavContainer.setBinding(name, ann.binding());<br>&#125;<br><br><span class="hljs-type">Object</span> <span class="hljs-variable">attribute</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">BindingResult</span> <span class="hljs-variable">bindingResult</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">if</span> (mavContainer.containsAttribute(name)) &#123;<br>attribute = mavContainer.getModel().get(name);<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">// Create attribute instance</span><br><span class="hljs-keyword">try</span> &#123;<br>attribute = createAttribute(name, parameter, binderFactory, webRequest);<br>&#125;<br><span class="hljs-keyword">catch</span> (BindException ex) &#123;<br>...<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">if</span> (bindingResult == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-comment">// Bean property binding and validation;</span><br><span class="hljs-comment">// skipped in case of binding failure on construction.</span><br><span class="hljs-type">WebDataBinder</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> binderFactory.createBinder(webRequest, attribute, name);<br><span class="hljs-keyword">if</span> (binder.getTarget() != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">if</span> (!mavContainer.isBindingDisabled(name)) &#123;<br>                    <span class="hljs-comment">//webæ•°æ®ç»‘å®šå™¨ï¼Œå°†è¯·æ±‚å‚æ•°çš„å€¼ç»‘å®šåˆ°æŒ‡å®šçš„JavaBeané‡Œé¢**</span><br>bindRequestParameters(binder, webRequest);<br>&#125;<br>validateIfApplicable(binder, parameter);<br><span class="hljs-keyword">if</span> (binder.getBindingResult().hasErrors() &amp;&amp; isBindExceptionRequired(binder, parameter)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BindException</span>(binder.getBindingResult());<br>&#125;<br>&#125;<br><span class="hljs-comment">// Value type adaptation, also covering java.util.Optional</span><br><span class="hljs-keyword">if</span> (!parameter.getParameterType().isInstance(attribute)) &#123;<br>attribute = binder.convertIfNecessary(binder.getTarget(), parameter.getParameterType(), parameter);<br>&#125;<br>bindingResult = binder.getBindingResult();<br>&#125;<br><br><span class="hljs-comment">// Add resolved attribute and BindingResult at the end of the model</span><br>Map&lt;String, Object&gt; bindingResultModel = bindingResult.getModel();<br>mavContainer.removeAttributes(bindingResultModel);<br>mavContainer.addAllAttributes(bindingResultModel);<br><br><span class="hljs-keyword">return</span> attribute;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>WebDataBinder åˆ©ç”¨å®ƒé‡Œé¢çš„ Converters å°†è¯·æ±‚æ•°æ®è½¬æˆæŒ‡å®šçš„æ•°æ®ç±»å‹ã€‚å†æ¬¡å°è£…åˆ°JavaBeanä¸­</strong></p><p><strong>åœ¨è¿‡ç¨‹å½“ä¸­ï¼Œç”¨åˆ°GenericConversionServiceï¼šåœ¨è®¾ç½®æ¯ä¸€ä¸ªå€¼çš„æ—¶å€™ï¼Œæ‰¾å®ƒé‡Œé¢çš„æ‰€æœ‰converteré‚£ä¸ªå¯ä»¥å°†è¿™ä¸ªæ•°æ®ç±»å‹ï¼ˆrequestå¸¦æ¥å‚æ•°çš„å­—ç¬¦ä¸²ï¼‰è½¬æ¢åˆ°æŒ‡å®šçš„ç±»å‹</strong></p><h2 id="36ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰ConverteråŸç†"><a href="#36ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰ConverteråŸç†" class="headerlink" title="36ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰ConverteråŸç†"></a>36ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰ConverteråŸç†</h2><p>æœªæ¥æˆ‘ä»¬å¯ä»¥ç»™WebDataBinderé‡Œé¢æ”¾è‡ªå·±çš„Converterï¼›</p><p>ä¸‹é¢æ¼”ç¤ºå°†å­—ç¬¦ä¸²<code>â€œå•ŠçŒ«,3â€</code>è½¬æ¢æˆ<code>Pet</code>å¯¹è±¡ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//1ã€WebMvcConfigurerå®šåˆ¶åŒ–SpringMVCçš„åŠŸèƒ½</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-keyword">public</span> WebMvcConfigurer <span class="hljs-title function_">webMvcConfigurer</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurer</span>() &#123;<br><br>        <span class="hljs-meta">@Override</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addFormatters</span><span class="hljs-params">(FormatterRegistry registry)</span> &#123;<br>            registry.addConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Converter</span>&lt;String, Pet&gt;() &#123;<br><br>                <span class="hljs-meta">@Override</span><br>                <span class="hljs-keyword">public</span> Pet <span class="hljs-title function_">convert</span><span class="hljs-params">(String source)</span> &#123;<br>                    <span class="hljs-comment">// å•ŠçŒ«,3</span><br>                    <span class="hljs-keyword">if</span>(!StringUtils.isEmpty(source))&#123;<br>                        <span class="hljs-type">Pet</span> <span class="hljs-variable">pet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pet</span>();<br>                        String[] split = source.split(<span class="hljs-string">&quot;,&quot;</span>);<br>                        pet.setName(split[<span class="hljs-number">0</span>]);<br>                        pet.setAge(Integer.parseInt(split[<span class="hljs-number">1</span>]));<br>                        <span class="hljs-keyword">return</span> pet;<br>                    &#125;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>                &#125;<br>            &#125;);<br>        &#125;<br>    &#125;;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="37ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-ReturnValueHandleråŸç†"><a href="#37ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-ReturnValueHandleråŸç†" class="headerlink" title="37ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-ReturnValueHandleråŸç†"></a>37ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-ReturnValueHandleråŸç†</h2><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205010403920.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p>å‡è®¾ç»™å‰ç«¯è‡ªåŠ¨è¿”å›jsonæ•°æ®ï¼Œéœ€è¦å¼•å…¥ç›¸å…³çš„ä¾èµ–</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- webåœºæ™¯è‡ªåŠ¨å¼•å…¥äº†jsonåœºæ™¯ --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.3.4.RELEASE<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>compile<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ§åˆ¶å±‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseTestController</span> &#123;<br>    <br><span class="hljs-meta">@ResponseBody</span>  <span class="hljs-comment">//åˆ©ç”¨è¿”å›å€¼å¤„ç†å™¨é‡Œé¢çš„æ¶ˆæ¯è½¬æ¢å™¨è¿›è¡Œå¤„ç†</span><br>    <span class="hljs-meta">@GetMapping(value = &quot;/test/person&quot;)</span><br>    <span class="hljs-keyword">public</span> Person <span class="hljs-title function_">getPerson</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>        person.setAge(<span class="hljs-number">28</span>);<br>        person.setBirth(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>        person.setUserName(<span class="hljs-string">&quot;zhangsan&quot;</span>);<br>        <span class="hljs-keyword">return</span> person;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="#">32ã€è¯·æ±‚å¤„ç†-ã€æºç åˆ†æã€‘-å„ç§ç±»å‹å‚æ•°è§£æåŸç† - è¿”å›å€¼å¤„ç†å™¨</a>æœ‰è®¨è®º<strong>ReturnValueHandler</strong>ã€‚ç°åœ¨ç›´æ¥çœ‹çœ‹é‡ç‚¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br><br>    ...<br>    <br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">invokeHandlerMethod</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">ServletWebRequest</span> <span class="hljs-variable">webRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response);<br><span class="hljs-keyword">try</span> &#123;<br><br>            ...<br>            <br>            <span class="hljs-type">ServletInvocableHandlerMethod</span> <span class="hljs-variable">invocableMethod</span> <span class="hljs-operator">=</span> createInvocableHandlerMethod(handlerMethod);<br>                <br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers != <span class="hljs-literal">null</span>) &#123;<br>invocableMethod.setHandlerMethodArgumentResolvers(<span class="hljs-built_in">this</span>.argumentResolvers);<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.returnValueHandlers != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//&lt;----å…³æ³¨ç‚¹</span><br>invocableMethod.setHandlerMethodReturnValueHandlers(<span class="hljs-built_in">this</span>.returnValueHandlers);<br>&#125;<br><br>            ...<br><br>invocableMethod.invokeAndHandle(webRequest, mavContainer);<span class="hljs-comment">//çœ‹ä¸‹å—ä»£ç </span><br><span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-keyword">return</span> getModelAndView(mavContainer, modelFactory, webRequest);<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>webRequest.requestCompleted();<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletInvocableHandlerMethod</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InvocableHandlerMethod</span> &#123;<br>    <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeAndHandle</span><span class="hljs-params">(ServletWebRequest webRequest, ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">Object... providedArgs)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">Object</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> invokeForRequest(webRequest, mavContainer, providedArgs);<br><br>        ...<br>        <br><span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//çœ‹ä¸‹å—ä»£ç </span><br><span class="hljs-built_in">this</span>.returnValueHandlers.handleReturnValue(<br>returnValue, getReturnValueType(returnValue), mavContainer, webRequest);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>...<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerMethodReturnValueHandlerComposite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodReturnValueHandler</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleReturnValue</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Object returnValue, MethodParameter returnType,</span><br><span class="hljs-params">ModelAndViewContainer mavContainer, NativeWebRequest webRequest)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-comment">//selectHandler()å®ç°åœ¨ä¸‹é¢</span><br><span class="hljs-type">HandlerMethodReturnValueHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> selectHandler(returnValue, returnType);<br><span class="hljs-keyword">if</span> (handler == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">&quot;Unknown return value type: &quot;</span> + returnType.getParameterType().getName());<br>&#125;<br>        <span class="hljs-comment">//å¼€å§‹å¤„ç†</span><br>handler.handleReturnValue(returnValue, returnType, mavContainer, webRequest);<br>&#125;<br>    <br>   <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> HandlerMethodReturnValueHandler <span class="hljs-title function_">selectHandler</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Object value, MethodParameter returnType)</span> &#123;<br><span class="hljs-type">boolean</span> <span class="hljs-variable">isAsyncValue</span> <span class="hljs-operator">=</span> isAsyncReturnValue(value, returnType);<br><span class="hljs-keyword">for</span> (HandlerMethodReturnValueHandler handler : <span class="hljs-built_in">this</span>.returnValueHandlers) &#123;<br><span class="hljs-keyword">if</span> (isAsyncValue &amp;&amp; !(handler <span class="hljs-keyword">instanceof</span> AsyncHandlerMethodReturnValueHandler)) &#123;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (handler.supportsReturnType(returnType)) &#123;<br><span class="hljs-keyword">return</span> handler;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br>    <br></code></pre></td></tr></table></figure><p><code>@ResponseBody</code> æ³¨è§£ï¼Œå³<code>RequestResponseBodyMethodProcessor</code>ï¼Œå®ƒå®ç°<code>HandlerMethodReturnValueHandler</code>æ¥å£</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestResponseBodyMethodProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMessageConverterMethodProcessor</span> &#123;<br><br>    ...<br>    <br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleReturnValue</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Object returnValue, MethodParameter returnType,</span><br><span class="hljs-params">ModelAndViewContainer mavContainer, NativeWebRequest webRequest)</span><br><span class="hljs-keyword">throws</span> IOException, HttpMediaTypeNotAcceptableException, HttpMessageNotWritableException &#123;<br><br>mavContainer.setRequestHandled(<span class="hljs-literal">true</span>);<br><span class="hljs-type">ServletServerHttpRequest</span> <span class="hljs-variable">inputMessage</span> <span class="hljs-operator">=</span> createInputMessage(webRequest);<br><span class="hljs-type">ServletServerHttpResponse</span> <span class="hljs-variable">outputMessage</span> <span class="hljs-operator">=</span> createOutputMessage(webRequest);<br><br>        <span class="hljs-comment">// ä½¿ç”¨æ¶ˆæ¯è½¬æ¢å™¨è¿›è¡Œå†™å‡ºæ“ä½œï¼Œæœ¬æ–¹æ³•ä¸‹ä¸€ç« èŠ‚ä»‹ç»ï¼š</span><br><span class="hljs-comment">// Try even with null return value. ResponseBodyAdvice could get involved.</span><br>writeWithMessageConverters(returnValue, returnType, inputMessage, outputMessage);<br>&#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="38ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-HTTPMessageConverteråŸç†"><a href="#38ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-HTTPMessageConverteråŸç†" class="headerlink" title="38ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-HTTPMessageConverteråŸç†"></a>38ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-HTTPMessageConverteråŸç†</h2><p>è¿”å›å€¼å¤„ç†å™¨<code>ReturnValueHandler</code>åŸç†ï¼š</p><ol><li>è¿”å›å€¼å¤„ç†å™¨åˆ¤æ–­æ˜¯å¦æ”¯æŒè¿™ç§ç±»å‹è¿”å›å€¼ <code>supportsReturnType</code></li><li>è¿”å›å€¼å¤„ç†å™¨è°ƒç”¨ <code>handleReturnValue</code> è¿›è¡Œå¤„ç†</li><li><code>RequestResponseBodyMethodProcessor</code> å¯ä»¥å¤„ç†è¿”å›å€¼æ ‡äº†<code>@ResponseBody</code> æ³¨è§£çš„ã€‚<ul><li>åˆ©ç”¨ <code>MessageConverters</code> è¿›è¡Œå¤„ç† å°†æ•°æ®å†™ä¸ºjson<ol><li>å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</li><li>æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®ï¼Œ</li><li>SpringMVCä¼šæŒ¨ä¸ªéå†æ‰€æœ‰å®¹å™¨åº•å±‚çš„ <code>HttpMessageConverter</code> ï¼Œçœ‹è°èƒ½å¤„ç†ï¼Ÿ<ol><li>å¾—åˆ°<code>MappingJackson2HttpMessageConverter</code>å¯ä»¥å°†å¯¹è±¡å†™ä¸ºjson</li><li>åˆ©ç”¨<code>MappingJackson2HttpMessageConverter</code>å°†å¯¹è±¡è½¬ä¸ºjsonå†å†™å‡ºå»ã€‚</li></ol></li></ol></li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//RequestResponseBodyMethodProcessorç»§æ‰¿è¿™ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractMessageConverterMethodProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMessageConverterMethodArgumentResolver</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodReturnValueHandler</span> &#123;<br><br>    ...<br>    <br>    <span class="hljs-comment">//æ‰¿æ¥ä¸Šä¸€èŠ‚å†…å®¹</span><br>    <span class="hljs-keyword">protected</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeWithMessageConverters</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> T value, MethodParameter returnType,</span><br><span class="hljs-params">                ServletServerHttpRequest inputMessage, ServletServerHttpResponse outputMessage)</span><br>                <span class="hljs-keyword">throws</span> IOException, HttpMediaTypeNotAcceptableException, HttpMessageNotWritableException &#123;<br><br>            Object body;<br>            Class&lt;?&gt; valueType;<br>            Type targetType;<br><br>            <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> CharSequence) &#123;<br>                body = value.toString();<br>                valueType = String.class;<br>                targetType = String.class;<br>            &#125;<br>            <span class="hljs-keyword">else</span> &#123;<br>                body = value;<br>                valueType = getReturnValueType(body, returnType);<br>                targetType = GenericTypeResolver.resolveType(getGenericType(returnType), returnType.getContainingClass());<br>            &#125;<br><br>...<br><br>            <span class="hljs-comment">//å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´(å‚æ•°Accept)çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</span><br>            <span class="hljs-type">MediaType</span> <span class="hljs-variable">selectedMediaType</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-type">MediaType</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> outputMessage.getHeaders().getContentType();<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isContentTypePreset</span> <span class="hljs-operator">=</span> contentType != <span class="hljs-literal">null</span> &amp;&amp; contentType.isConcrete();<br>            <span class="hljs-keyword">if</span> (isContentTypePreset) &#123;<br>                <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                    logger.debug(<span class="hljs-string">&quot;Found &#x27;Content-Type:&quot;</span> + contentType + <span class="hljs-string">&quot;&#x27; in response&quot;</span>);<br>                &#125;<br>                selectedMediaType = contentType;<br>            &#125;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> inputMessage.getServletRequest();<br>                List&lt;MediaType&gt; acceptableTypes = getAcceptableMediaTypes(request);<br>                <span class="hljs-comment">//æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®</span><br>                List&lt;MediaType&gt; producibleTypes = getProducibleMediaTypes(request, valueType, targetType);<br><br>                <span class="hljs-keyword">if</span> (body != <span class="hljs-literal">null</span> &amp;&amp; producibleTypes.isEmpty()) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpMessageNotWritableException</span>(<br>                            <span class="hljs-string">&quot;No converter found for return value of type: &quot;</span> + valueType);<br>                &#125;<br>                List&lt;MediaType&gt; mediaTypesToUse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                <span class="hljs-keyword">for</span> (MediaType requestedType : acceptableTypes) &#123;<br>                    <span class="hljs-keyword">for</span> (MediaType producibleType : producibleTypes) &#123;<br>                        <span class="hljs-keyword">if</span> (requestedType.isCompatibleWith(producibleType)) &#123;<br>                            mediaTypesToUse.add(getMostSpecificMediaType(requestedType, producibleType));<br>                        &#125;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (mediaTypesToUse.isEmpty()) &#123;<br>                    <span class="hljs-keyword">if</span> (body != <span class="hljs-literal">null</span>) &#123;<br>                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpMediaTypeNotAcceptableException</span>(producibleTypes);<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                        logger.debug(<span class="hljs-string">&quot;No match for &quot;</span> + acceptableTypes + <span class="hljs-string">&quot;, supported: &quot;</span> + producibleTypes);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br><br>                MediaType.sortBySpecificityAndQuality(mediaTypesToUse);<br><br>                <span class="hljs-comment">//é€‰æ‹©ä¸€ä¸ªMediaType</span><br>                <span class="hljs-keyword">for</span> (MediaType mediaType : mediaTypesToUse) &#123;<br>                    <span class="hljs-keyword">if</span> (mediaType.isConcrete()) &#123;<br>                        selectedMediaType = mediaType;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mediaType.isPresentIn(ALL_APPLICATION_MEDIA_TYPES)) &#123;<br>                        selectedMediaType = MediaType.APPLICATION_OCTET_STREAM;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br><br>                <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                    logger.debug(<span class="hljs-string">&quot;Using &#x27;&quot;</span> + selectedMediaType + <span class="hljs-string">&quot;&#x27;, given &quot;</span> +<br>                            acceptableTypes + <span class="hljs-string">&quot; and supported &quot;</span> + producibleTypes);<br>                &#125;<br>            &#125;<br><br>        <br>            <span class="hljs-keyword">if</span> (selectedMediaType != <span class="hljs-literal">null</span>) &#123;<br>                selectedMediaType = selectedMediaType.removeQualityValue();<br>                <span class="hljs-comment">//æœ¬èŠ‚ä¸»è§’ï¼šHttpMessageConverter</span><br>                <span class="hljs-keyword">for</span> (HttpMessageConverter&lt;?&gt; converter : <span class="hljs-built_in">this</span>.messageConverters) &#123;<br>                    <span class="hljs-type">GenericHttpMessageConverter</span> <span class="hljs-variable">genericConverter</span> <span class="hljs-operator">=</span> (converter <span class="hljs-keyword">instanceof</span> GenericHttpMessageConverter ?<br>                            (GenericHttpMessageConverter&lt;?&gt;) converter : <span class="hljs-literal">null</span>);<br>                    <br>                    <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å¯å†™</span><br>                    <span class="hljs-keyword">if</span> (genericConverter != <span class="hljs-literal">null</span> ?<br>                            ((GenericHttpMessageConverter) converter).canWrite(targetType, valueType, selectedMediaType) :<br>                            converter.canWrite(valueType, selectedMediaType)) &#123;<br>                        body = getAdvice().beforeBodyWrite(body, returnType, selectedMediaType,<br>                                (Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpMessageConverter</span>&lt;?&gt;&gt;) converter.getClass(),<br>                                inputMessage, outputMessage);<br>                        <span class="hljs-keyword">if</span> (body != <span class="hljs-literal">null</span>) &#123;<br>                            <span class="hljs-type">Object</span> <span class="hljs-variable">theBody</span> <span class="hljs-operator">=</span> body;<br>                            LogFormatUtils.traceDebug(logger, traceOn -&gt;<br>                                    <span class="hljs-string">&quot;Writing [&quot;</span> + LogFormatUtils.formatValue(theBody, !traceOn) + <span class="hljs-string">&quot;]&quot;</span>);<br>                            addContentDispositionHeader(inputMessage, outputMessage);<br><span class="hljs-comment">//å¼€å§‹å†™å…¥</span><br>                            <span class="hljs-keyword">if</span> (genericConverter != <span class="hljs-literal">null</span>) &#123;<br>                                genericConverter.write(body, targetType, selectedMediaType, outputMessage);<br>                            &#125;<br>                            <span class="hljs-keyword">else</span> &#123;<br>                                ((HttpMessageConverter) converter).write(body, selectedMediaType, outputMessage);<br>                            &#125;<br>                        &#125;<br>                        <span class="hljs-keyword">else</span> &#123;<br>                            <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                                logger.debug(<span class="hljs-string">&quot;Nothing to write: null body&quot;</span>);<br>                            &#125;<br>                        &#125;<br>                        <span class="hljs-keyword">return</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>...<br>        &#125;<br></code></pre></td></tr></table></figure><p><code>HTTPMessageConverter</code>æ¥å£ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Strategy interface for converting from and to HTTP requests and responses.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HttpMessageConverter</span>&lt;T&gt; &#123;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Indicates whether the given class can be read by this converter.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">canRead</span><span class="hljs-params">(Class&lt;?&gt; clazz, <span class="hljs-meta">@Nullable</span> MediaType mediaType)</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Indicates whether the given class can be written by this converter.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-type">boolean</span> <span class="hljs-title function_">canWrite</span><span class="hljs-params">(Class&lt;?&gt; clazz, <span class="hljs-meta">@Nullable</span> MediaType mediaType)</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Return the list of &#123;<span class="hljs-doctag">@link</span> MediaType&#125; objects supported by this converter.</span><br><span class="hljs-comment"> */</span><br>List&lt;MediaType&gt; <span class="hljs-title function_">getSupportedMediaTypes</span><span class="hljs-params">()</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Read an object of the given type from the given input message, and returns it.</span><br><span class="hljs-comment"> */</span><br>T <span class="hljs-title function_">read</span><span class="hljs-params">(Class&lt;? extends T&gt; clazz, HttpInputMessage inputMessage)</span><br><span class="hljs-keyword">throws</span> IOException, HttpMessageNotReadableException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Write an given object to the given output message.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(T t, <span class="hljs-meta">@Nullable</span> MediaType contentType, HttpOutputMessage outputMessage)</span><br><span class="hljs-keyword">throws</span> IOException, HttpMessageNotWritableException;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><p><code>HttpMessageConverter</code>: çœ‹æ˜¯å¦æ”¯æŒå°† æ­¤ <code>Class</code>ç±»å‹çš„å¯¹è±¡ï¼Œè½¬ä¸º<code>MediaType</code>ç±»å‹çš„æ•°æ®ã€‚</p><p>ä¾‹å­ï¼š<code>Person</code>å¯¹è±¡è½¬ä¸ºJSONï¼Œæˆ–è€… JSONè½¬ä¸º<code>Person</code>ï¼Œè¿™å°†ç”¨åˆ°<code>MappingJackson2HttpMessageConverter</code></p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/20210205010509984.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MappingJackson2HttpMessageConverter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractJackson2HttpMessageConverter</span> &#123;<br>...<br>&#125;<br></code></pre></td></tr></table></figure><p>å…³äº<code>MappingJackson2HttpMessageConverter</code>çš„å®ä¾‹åŒ–è¯·çœ‹ä¸‹èŠ‚ã€‚</p><h3 id="å…³äºHttpMessageConvertersçš„åˆå§‹åŒ–"><a href="#å…³äºHttpMessageConvertersçš„åˆå§‹åŒ–" class="headerlink" title="å…³äºHttpMessageConvertersçš„åˆå§‹åŒ–"></a>å…³äºHttpMessageConvertersçš„åˆå§‹åŒ–</h3><p><code>DispatcherServlet</code>çš„åˆå§‹åŒ–æ—¶ä¼šè°ƒç”¨<code>initHandlerAdapters(ApplicationContext context)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initHandlerAdapters</span><span class="hljs-params">(ApplicationContext context)</span> &#123;<br><span class="hljs-built_in">this</span>.handlerAdapters = <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.detectAllHandlerAdapters) &#123;<br><span class="hljs-comment">// Find all HandlerAdapters in the ApplicationContext, including ancestor contexts.</span><br>Map&lt;String, HandlerAdapter&gt; matchingBeans =<br>BeanFactoryUtils.beansOfTypeIncludingAncestors(context, HandlerAdapter.class, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>);<br><span class="hljs-keyword">if</span> (!matchingBeans.isEmpty()) &#123;<br><span class="hljs-built_in">this</span>.handlerAdapters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(matchingBeans.values());<br><span class="hljs-comment">// We keep HandlerAdapters in sorted order.</span><br>AnnotationAwareOrderComparator.sort(<span class="hljs-built_in">this</span>.handlerAdapters);<br>&#125;<br>&#125;<br>      ...<br></code></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¼šåŠ è½½<code>ApplicationContext</code>çš„æ‰€æœ‰<code>HandlerAdapter</code>ï¼Œç”¨æ¥å¤„ç†<code>@RequestMapping</code>çš„<code>RequestMappingHandlerAdapter</code>å®ç°<code>HandlerAdapter</code>æ¥å£ï¼Œ<code>RequestMappingHandlerAdapter</code>ä¹Ÿè¢«å®ä¾‹åŒ–ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br>    <br>    ...<br><br>    <span class="hljs-keyword">private</span> List&lt;HttpMessageConverter&lt;?&gt;&gt; messageConverters;<br>    <br>    ...<br>    <br><span class="hljs-keyword">public</span> <span class="hljs-title function_">RequestMappingHandlerAdapter</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-built_in">this</span>.messageConverters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-number">4</span>);<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayHttpMessageConverter</span>());<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringHttpMessageConverter</span>());<br><span class="hljs-keyword">if</span> (!shouldIgnoreXml) &#123;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SourceHttpMessageConverter</span>&lt;&gt;());<br>&#125;<br><span class="hljs-keyword">catch</span> (Error err) &#123;<br><span class="hljs-comment">// Ignore when no TransformerFactory implementation is available</span><br>&#125;<br>&#125;<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AllEncompassingFormHttpMessageConverter</span>());<br>&#125;<br></code></pre></td></tr></table></figure><p>åœ¨æ„é€ å™¨ä¸­çœ‹åˆ°<strong>ä¸€å †</strong><code>HttpMessageConverter</code>ã€‚æ¥ç€ï¼Œé‡ç‚¹æŸ¥çœ‹<code>AllEncompassingFormHttpMessageConverter</code>ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AllEncompassingFormHttpMessageConverter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FormHttpMessageConverter</span> &#123;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Boolean flag controlled by a &#123;<span class="hljs-doctag">@code</span> spring.xml.ignore&#125; system property that instructs Spring to</span><br><span class="hljs-comment"> * ignore XML, i.e. to not initialize the XML-related infrastructure.</span><br><span class="hljs-comment"> * &lt;p&gt;The default is &quot;false&quot;.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">shouldIgnoreXml</span> <span class="hljs-operator">=</span> SpringProperties.getFlag(<span class="hljs-string">&quot;spring.xml.ignore&quot;</span>);<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> jaxb2Present;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> jackson2Present;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> jackson2XmlPresent;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> jackson2SmilePresent;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> gsonPresent;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> jsonbPresent;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> kotlinSerializationJsonPresent;<br><br><span class="hljs-keyword">static</span> &#123;<br><span class="hljs-type">ClassLoader</span> <span class="hljs-variable">classLoader</span> <span class="hljs-operator">=</span> AllEncompassingFormHttpMessageConverter.class.getClassLoader();<br>jaxb2Present = ClassUtils.isPresent(<span class="hljs-string">&quot;javax.xml.bind.Binder&quot;</span>, classLoader);<br>jackson2Present = ClassUtils.isPresent(<span class="hljs-string">&quot;com.fasterxml.jackson.databind.ObjectMapper&quot;</span>, classLoader) &amp;&amp;<br>ClassUtils.isPresent(<span class="hljs-string">&quot;com.fasterxml.jackson.core.JsonGenerator&quot;</span>, classLoader);<br>jackson2XmlPresent = ClassUtils.isPresent(<span class="hljs-string">&quot;com.fasterxml.jackson.dataformat.xml.XmlMapper&quot;</span>, classLoader);<br>jackson2SmilePresent = ClassUtils.isPresent(<span class="hljs-string">&quot;com.fasterxml.jackson.dataformat.smile.SmileFactory&quot;</span>, classLoader);<br>gsonPresent = ClassUtils.isPresent(<span class="hljs-string">&quot;com.google.gson.Gson&quot;</span>, classLoader);<br>jsonbPresent = ClassUtils.isPresent(<span class="hljs-string">&quot;javax.json.bind.Jsonb&quot;</span>, classLoader);<br>kotlinSerializationJsonPresent = ClassUtils.isPresent(<span class="hljs-string">&quot;kotlinx.serialization.json.Json&quot;</span>, classLoader);<br>&#125;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">AllEncompassingFormHttpMessageConverter</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">if</span> (!shouldIgnoreXml) &#123;<br><span class="hljs-keyword">try</span> &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SourceHttpMessageConverter</span>&lt;&gt;());<br>&#125;<br><span class="hljs-keyword">catch</span> (Error err) &#123;<br><span class="hljs-comment">// Ignore when no TransformerFactory implementation is available</span><br>&#125;<br><br><span class="hljs-keyword">if</span> (jaxb2Present &amp;&amp; !jackson2XmlPresent) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Jaxb2RootElementHttpMessageConverter</span>());<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">if</span> (jackson2Present) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MappingJackson2HttpMessageConverter</span>());<span class="hljs-comment">//&lt;----é‡ç‚¹çœ‹è¿™é‡Œ</span><br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (gsonPresent) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GsonHttpMessageConverter</span>());<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (jsonbPresent) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonbHttpMessageConverter</span>());<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (kotlinSerializationJsonPresent) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">KotlinSerializationJsonHttpMessageConverter</span>());<br>&#125;<br><br><span class="hljs-keyword">if</span> (jackson2XmlPresent &amp;&amp; !shouldIgnoreXml) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MappingJackson2XmlHttpMessageConverter</span>());<br>&#125;<br><br><span class="hljs-keyword">if</span> (jackson2SmilePresent) &#123;<br>addPartConverter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MappingJackson2SmileHttpMessageConverter</span>());<br>&#125;<br>&#125;<br><br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormHttpMessageConverter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HttpMessageConverter</span>&lt;MultiValueMap&lt;String, ?&gt;&gt; &#123;<br>    <br>    ...<br>        <br>    <span class="hljs-keyword">private</span> List&lt;HttpMessageConverter&lt;?&gt;&gt; partConverters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <br>    ...<br>        <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addPartConverter</span><span class="hljs-params">(HttpMessageConverter&lt;?&gt; partConverter)</span> &#123;<br>Assert.notNull(partConverter, <span class="hljs-string">&quot;&#x27;partConverter&#x27; must not be null&quot;</span>);<br><span class="hljs-built_in">this</span>.partConverters.add(partConverter);<br>&#125;<br>    <br>    ...<br>&#125;<br><br></code></pre></td></tr></table></figure><p>åœ¨<code>AllEncompassingFormHttpMessageConverter</code>ç±»æ„é€ å™¨çœ‹åˆ°<code>MappingJackson2HttpMessageConverter</code>ç±»çš„å®ä¾‹åŒ–ï¼Œ<code>AllEncompassingFormHttpMessageConverter</code><strong>åŒ…å«</strong><code>MappingJackson2HttpMessageConverter</code>ã€‚</p><p> <code>ReturnValueHandler</code>æ˜¯æ€ä¹ˆä¸<code>MappingJackson2HttpMessageConverter</code>å…³è”èµ·æ¥ï¼Ÿè¯·çœ‹ä¸‹èŠ‚ã€‚</p><h3 id="ReturnValueHandlerä¸MappingJackson2HttpMessageConverterå…³è”"><a href="#ReturnValueHandlerä¸MappingJackson2HttpMessageConverterå…³è”" class="headerlink" title="ReturnValueHandlerä¸MappingJackson2HttpMessageConverterå…³è”"></a>ReturnValueHandlerä¸MappingJackson2HttpMessageConverterå…³è”</h3><p>å†æ¬¡å›é¡¾<code>RequestMappingHandlerAdapter</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br>    <br>    ...<br>    <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> HandlerMethodReturnValueHandlerComposite returnValueHandlers;<span class="hljs-comment">//æˆ‘ä»¬å…³æ³¨çš„returnValueHandlers</span><br>    <br>   <br>    <span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><span class="hljs-comment">//æœ¬æ–¹æ³•åœ¨AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> ModelAndView <span class="hljs-title function_">handle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span><br><span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-keyword">return</span> handleInternal(request, response, (HandlerMethod) handler);<br>&#125;<br>        <br>    <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">handleInternal</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>ModelAndView mav;<br>        ...<br>        mav = invokeHandlerMethod(request, response, handlerMethod);<br>        ...<br><span class="hljs-keyword">return</span> mav;<br>&#125;<br>    <br>    <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">invokeHandlerMethod</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">ServletWebRequest</span> <span class="hljs-variable">webRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response);<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-type">WebDataBinderFactory</span> <span class="hljs-variable">binderFactory</span> <span class="hljs-operator">=</span> getDataBinderFactory(handlerMethod);<br><span class="hljs-type">ModelFactory</span> <span class="hljs-variable">modelFactory</span> <span class="hljs-operator">=</span> getModelFactory(handlerMethod, binderFactory);<br><br><span class="hljs-type">ServletInvocableHandlerMethod</span> <span class="hljs-variable">invocableMethod</span> <span class="hljs-operator">=</span> createInvocableHandlerMethod(handlerMethod);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers != <span class="hljs-literal">null</span>) &#123;<br>invocableMethod.setHandlerMethodArgumentResolvers(<span class="hljs-built_in">this</span>.argumentResolvers);<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.returnValueHandlers != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//&lt;---æˆ‘ä»¬å…³æ³¨çš„returnValueHandlers</span><br>invocableMethod.setHandlerMethodReturnValueHandlers(<span class="hljs-built_in">this</span>.returnValueHandlers);<br>&#125;<br>            <br>            ...<br>            <br>invocableMethod.invokeAndHandle(webRequest, mavContainer);<br><span class="hljs-keyword">if</span> (asyncManager.isConcurrentHandlingStarted()) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-keyword">return</span> getModelAndView(mavContainer, modelFactory, webRequest);<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>webRequest.requestCompleted();<br>&#125;<br>&#125;<br>    <br>   <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterPropertiesSet</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">// Do this first, it may add ResponseBody advice beans</span><br><br>        ...<br>        <br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.returnValueHandlers == <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//èµ‹å€¼returnValueHandlers</span><br>List&lt;HandlerMethodReturnValueHandler&gt; handlers = getDefaultReturnValueHandlers();<br><span class="hljs-built_in">this</span>.returnValueHandlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HandlerMethodReturnValueHandlerComposite</span>().addHandlers(handlers);<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-keyword">private</span> List&lt;HandlerMethodReturnValueHandler&gt; <span class="hljs-title function_">getDefaultReturnValueHandlers</span><span class="hljs-params">()</span> &#123;<br>List&lt;HandlerMethodReturnValueHandler&gt; handlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-number">20</span>);<br><br>...<br><span class="hljs-comment">// Annotation-based return value types</span><br>        <span class="hljs-comment">//è¿™é‡Œå°±æ˜¯ ReturnValueHandlerä¸ MappingJackson2HttpMessageConverterå…³è” çš„å…³é”®ç‚¹</span><br>handlers.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestResponseBodyMethodProcessor</span>(getMessageConverters(),<span class="hljs-comment">//&lt;---MessageConvertersä¹Ÿå°±ä¼ å‚ä¼ è¿›æ¥çš„</span><br><span class="hljs-built_in">this</span>.contentNegotiationManager, <span class="hljs-built_in">this</span>.requestResponseBodyAdvice));<span class="hljs-comment">//</span><br>        ...<br><br><span class="hljs-keyword">return</span> handlers;<br>&#125;<br>    <br>    <span class="hljs-comment">//------</span><br>    <br>    <span class="hljs-keyword">public</span> List&lt;HttpMessageConverter&lt;?&gt;&gt; getMessageConverters() &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.messageConverters;<br>&#125;<br>    <br>    <span class="hljs-comment">//RequestMappingHandlerAdapteræ„é€ å™¨å·²åˆå§‹åŒ–éƒ¨åˆ†messageConverters</span><br>   <span class="hljs-keyword">public</span> <span class="hljs-title function_">RequestMappingHandlerAdapter</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-built_in">this</span>.messageConverters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(<span class="hljs-number">4</span>);<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ByteArrayHttpMessageConverter</span>());<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringHttpMessageConverter</span>());<br><span class="hljs-keyword">if</span> (!shouldIgnoreXml) &#123;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SourceHttpMessageConverter</span>&lt;&gt;());<br>&#125;<br><span class="hljs-keyword">catch</span> (Error err) &#123;<br><span class="hljs-comment">// Ignore when no TransformerFactory implementation is available</span><br>&#125;<br>&#125;<br><span class="hljs-built_in">this</span>.messageConverters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AllEncompassingFormHttpMessageConverter</span>());<br>&#125;<br><br>    ...<br>              <br>&#125;<br></code></pre></td></tr></table></figure><p>åº”ç”¨ä¸­<code>WebMvcAutoConfiguration</code>ï¼ˆåº•å±‚æ˜¯<code>WebMvcConfigurationSupport</code>å®ç°ï¼‰ä¼ å…¥æ›´å¤š<code>messageConverters</code>ï¼Œå…¶ä¸­å°±åŒ…å«<code>MappingJackson2HttpMessageConverter</code>ã€‚</p><h2 id="39ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-å†…å®¹åå•†åŸç†"><a href="#39ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-å†…å®¹åå•†åŸç†" class="headerlink" title="39ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-å†…å®¹åå•†åŸç†"></a>39ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-å†…å®¹åå•†åŸç†</h2><p>æ ¹æ®å®¢æˆ·ç«¯æ¥æ”¶èƒ½åŠ›ä¸åŒï¼Œè¿”å›ä¸åŒåª’ä½“ç±»å‹çš„æ•°æ®ã€‚</p><p>å¼•å…¥XMLä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>     <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>å¯ç”¨Postmanè½¯ä»¶åˆ†åˆ«æµ‹è¯•è¿”å›jsonå’Œxmlï¼šåªéœ€è¦æ”¹å˜è¯·æ±‚å¤´ä¸­Acceptå­—æ®µï¼ˆapplication&#x2F;jsonã€application&#x2F;xmlï¼‰ã€‚</p><p>Httpåè®®ä¸­è§„å®šçš„ï¼ŒAcceptå­—æ®µå‘Šè¯‰æœåŠ¡å™¨æœ¬å®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„æ•°æ®ç±»å‹ã€‚</p><p><strong>å†…å®¹åå•†åŸç†</strong>ï¼š</p><ol><li>åˆ¤æ–­å½“å‰å“åº”å¤´ä¸­æ˜¯å¦å·²ç»æœ‰ç¡®å®šçš„åª’ä½“ç±»å‹<code>MediaType</code>ã€‚</li><li>è·å–å®¢æˆ·ç«¯ï¼ˆPostManã€æµè§ˆå™¨ï¼‰æ”¯æŒæ¥æ”¶çš„å†…å®¹ç±»å‹ã€‚ï¼ˆè·å–å®¢æˆ·ç«¯Acceptè¯·æ±‚å¤´å­—æ®µapplication&#x2F;xmlï¼‰ï¼ˆè¿™ä¸€æ­¥åœ¨ä¸‹ä¸€èŠ‚æœ‰è¯¦ç»†ä»‹ç»ï¼‰<ul><li><code>contentNegotiationManager</code> å†…å®¹åå•†ç®¡ç†å™¨ é»˜è®¤ä½¿ç”¨åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</li><li><code>HeaderContentNegotiationStrategy</code>  ç¡®å®šå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„å†…å®¹ç±»å‹</li></ul></li><li>éå†å¾ªç¯æ‰€æœ‰å½“å‰ç³»ç»Ÿçš„ <code>MessageConverter</code>ï¼Œçœ‹è°æ”¯æŒæ“ä½œè¿™ä¸ªå¯¹è±¡ï¼ˆPersonï¼‰</li><li>æ‰¾åˆ°æ”¯æŒæ“ä½œPersonçš„converterï¼ŒæŠŠconverteræ”¯æŒçš„åª’ä½“ç±»å‹ç»Ÿè®¡å‡ºæ¥ã€‚</li><li>å®¢æˆ·ç«¯éœ€è¦application&#x2F;xmlï¼ŒæœåŠ¡ç«¯æœ‰10ç§MediaTypeã€‚</li><li>è¿›è¡Œå†…å®¹åå•†çš„æœ€ä½³åŒ¹é…åª’ä½“ç±»å‹</li><li>ç”¨ æ”¯æŒ å°†å¯¹è±¡è½¬ä¸º æœ€ä½³åŒ¹é…åª’ä½“ç±»å‹ çš„converterã€‚è°ƒç”¨å®ƒè¿›è¡Œè½¬åŒ– ã€‚</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//RequestResponseBodyMethodProcessorç»§æ‰¿è¿™ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractMessageConverterMethodProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMessageConverterMethodArgumentResolver</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodReturnValueHandler</span> &#123;<br><br>    ...<br>    <br>    <span class="hljs-comment">//è·Ÿä¸Šä¸€èŠ‚çš„ä»£ç ä¸€è‡´</span><br>    <span class="hljs-keyword">protected</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeWithMessageConverters</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> T value, MethodParameter returnType,</span><br><span class="hljs-params">                ServletServerHttpRequest inputMessage, ServletServerHttpResponse outputMessage)</span><br>                <span class="hljs-keyword">throws</span> IOException, HttpMediaTypeNotAcceptableException, HttpMessageNotWritableException &#123;<br><br>            Object body;<br>            Class&lt;?&gt; valueType;<br>            Type targetType;<br><br>            <span class="hljs-keyword">if</span> (value <span class="hljs-keyword">instanceof</span> CharSequence) &#123;<br>                body = value.toString();<br>                valueType = String.class;<br>                targetType = String.class;<br>            &#125;<br>            <span class="hljs-keyword">else</span> &#123;<br>                body = value;<br>                valueType = getReturnValueType(body, returnType);<br>                targetType = GenericTypeResolver.resolveType(getGenericType(returnType), returnType.getContainingClass());<br>            &#125;<br><br>...<br><br>            <span class="hljs-comment">//æœ¬èŠ‚é‡ç‚¹</span><br>            <span class="hljs-comment">//å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´(å‚æ•°Accept)çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</span><br>            <span class="hljs-type">MediaType</span> <span class="hljs-variable">selectedMediaType</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-type">MediaType</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> outputMessage.getHeaders().getContentType();<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isContentTypePreset</span> <span class="hljs-operator">=</span> contentType != <span class="hljs-literal">null</span> &amp;&amp; contentType.isConcrete();<br>            <span class="hljs-keyword">if</span> (isContentTypePreset) &#123;<br>                <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                    logger.debug(<span class="hljs-string">&quot;Found &#x27;Content-Type:&quot;</span> + contentType + <span class="hljs-string">&quot;&#x27; in response&quot;</span>);<br>                &#125;<br>                selectedMediaType = contentType;<br>            &#125;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> inputMessage.getServletRequest();<br>                List&lt;MediaType&gt; acceptableTypes = getAcceptableMediaTypes(request);<br>                <span class="hljs-comment">//æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®</span><br>                List&lt;MediaType&gt; producibleTypes = getProducibleMediaTypes(request, valueType, targetType);<br><br>                <span class="hljs-keyword">if</span> (body != <span class="hljs-literal">null</span> &amp;&amp; producibleTypes.isEmpty()) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpMessageNotWritableException</span>(<br>                            <span class="hljs-string">&quot;No converter found for return value of type: &quot;</span> + valueType);<br>                &#125;<br>                List&lt;MediaType&gt; mediaTypesToUse = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>                <span class="hljs-keyword">for</span> (MediaType requestedType : acceptableTypes) &#123;<br>                    <span class="hljs-keyword">for</span> (MediaType producibleType : producibleTypes) &#123;<br>                        <span class="hljs-keyword">if</span> (requestedType.isCompatibleWith(producibleType)) &#123;<br>                            mediaTypesToUse.add(getMostSpecificMediaType(requestedType, producibleType));<br>                        &#125;<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (mediaTypesToUse.isEmpty()) &#123;<br>                    <span class="hljs-keyword">if</span> (body != <span class="hljs-literal">null</span>) &#123;<br>                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpMediaTypeNotAcceptableException</span>(producibleTypes);<br>                    &#125;<br>                    <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                        logger.debug(<span class="hljs-string">&quot;No match for &quot;</span> + acceptableTypes + <span class="hljs-string">&quot;, supported: &quot;</span> + producibleTypes);<br>                    &#125;<br>                    <span class="hljs-keyword">return</span>;<br>                &#125;<br><br>                MediaType.sortBySpecificityAndQuality(mediaTypesToUse);<br><br>                <span class="hljs-comment">//é€‰æ‹©ä¸€ä¸ªMediaType</span><br>                <span class="hljs-keyword">for</span> (MediaType mediaType : mediaTypesToUse) &#123;<br>                    <span class="hljs-keyword">if</span> (mediaType.isConcrete()) &#123;<br>                        selectedMediaType = mediaType;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (mediaType.isPresentIn(ALL_APPLICATION_MEDIA_TYPES)) &#123;<br>                        selectedMediaType = MediaType.APPLICATION_OCTET_STREAM;<br>                        <span class="hljs-keyword">break</span>;<br>                    &#125;<br>                &#125;<br><br>                <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                    logger.debug(<span class="hljs-string">&quot;Using &#x27;&quot;</span> + selectedMediaType + <span class="hljs-string">&quot;&#x27;, given &quot;</span> +<br>                            acceptableTypes + <span class="hljs-string">&quot; and supported &quot;</span> + producibleTypes);<br>                &#125;<br>            &#125;<br><br>        <br>            <span class="hljs-keyword">if</span> (selectedMediaType != <span class="hljs-literal">null</span>) &#123;<br>                selectedMediaType = selectedMediaType.removeQualityValue();<br>                <span class="hljs-comment">//æœ¬èŠ‚ä¸»è§’ï¼šHttpMessageConverter</span><br>                <span class="hljs-keyword">for</span> (HttpMessageConverter&lt;?&gt; converter : <span class="hljs-built_in">this</span>.messageConverters) &#123;<br>                    <span class="hljs-type">GenericHttpMessageConverter</span> <span class="hljs-variable">genericConverter</span> <span class="hljs-operator">=</span> (converter <span class="hljs-keyword">instanceof</span> GenericHttpMessageConverter ?<br>                            (GenericHttpMessageConverter&lt;?&gt;) converter : <span class="hljs-literal">null</span>);<br>                    <br>                    <span class="hljs-comment">//åˆ¤æ–­æ˜¯å¦å¯å†™</span><br>                    <span class="hljs-keyword">if</span> (genericConverter != <span class="hljs-literal">null</span> ?<br>                            ((GenericHttpMessageConverter) converter).canWrite(targetType, valueType, selectedMediaType) :<br>                            converter.canWrite(valueType, selectedMediaType)) &#123;<br>                        body = getAdvice().beforeBodyWrite(body, returnType, selectedMediaType,<br>                                (Class&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpMessageConverter</span>&lt;?&gt;&gt;) converter.getClass(),<br>                                inputMessage, outputMessage);<br>                        <span class="hljs-keyword">if</span> (body != <span class="hljs-literal">null</span>) &#123;<br>                            <span class="hljs-type">Object</span> <span class="hljs-variable">theBody</span> <span class="hljs-operator">=</span> body;<br>                            LogFormatUtils.traceDebug(logger, traceOn -&gt;<br>                                    <span class="hljs-string">&quot;Writing [&quot;</span> + LogFormatUtils.formatValue(theBody, !traceOn) + <span class="hljs-string">&quot;]&quot;</span>);<br>                            addContentDispositionHeader(inputMessage, outputMessage);<br><span class="hljs-comment">//å¼€å§‹å†™å…¥</span><br>                            <span class="hljs-keyword">if</span> (genericConverter != <span class="hljs-literal">null</span>) &#123;<br>                                genericConverter.write(body, targetType, selectedMediaType, outputMessage);<br>                            &#125;<br>                            <span class="hljs-keyword">else</span> &#123;<br>                                ((HttpMessageConverter) converter).write(body, selectedMediaType, outputMessage);<br>                            &#125;<br>                        &#125;<br>                        <span class="hljs-keyword">else</span> &#123;<br>                            <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                                logger.debug(<span class="hljs-string">&quot;Nothing to write: null body&quot;</span>);<br>                            &#125;<br>                        &#125;<br>                        <span class="hljs-keyword">return</span>;<br>                    &#125;<br>                &#125;<br>            &#125;<br>...<br>        &#125;<br></code></pre></td></tr></table></figure><h2 id="40ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŸç†"><a href="#40ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŸç†" class="headerlink" title="40ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŸç†"></a>40ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŸç†</h2><p>ä¸Šä¸€èŠ‚å†…å®¹åå•†åŸç†çš„ç¬¬äºŒæ­¥ï¼š</p><p>è·å–å®¢æˆ·ç«¯ï¼ˆPostManã€æµè§ˆå™¨ï¼‰æ”¯æŒæ¥æ”¶çš„å†…å®¹ç±»å‹ã€‚ï¼ˆè·å–å®¢æˆ·ç«¯Acceptè¯·æ±‚å¤´å­—æ®µapplication&#x2F;xmlï¼‰</p><ul><li><code>contentNegotiationManager</code> å†…å®¹åå•†ç®¡ç†å™¨ é»˜è®¤ä½¿ç”¨åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</li><li><code>HeaderContentNegotiationStrategy</code>  ç¡®å®šå®¢æˆ·ç«¯å¯ä»¥æ¥æ”¶çš„å†…å®¹ç±»å‹</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//RequestResponseBodyMethodProcessorç»§æ‰¿è¿™ç±»</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractMessageConverterMethodProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMessageConverterMethodArgumentResolver</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerMethodReturnValueHandler</span> &#123;<br><br>    ...<br>    <br>    <span class="hljs-comment">//è·Ÿä¸Šä¸€èŠ‚çš„ä»£ç ä¸€è‡´</span><br>    <span class="hljs-keyword">protected</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeWithMessageConverters</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> T value, MethodParameter returnType,</span><br><span class="hljs-params">                ServletServerHttpRequest inputMessage, ServletServerHttpResponse outputMessage)</span><br>                <span class="hljs-keyword">throws</span> IOException, HttpMediaTypeNotAcceptableException, HttpMessageNotWritableException &#123;<br><br>            Object body;<br>            Class&lt;?&gt; valueType;<br>            Type targetType;<br>        <br>        ...<br>        <br>                    <span class="hljs-comment">//æœ¬èŠ‚é‡ç‚¹</span><br>            <span class="hljs-comment">//å†…å®¹åå•†ï¼ˆæµè§ˆå™¨é»˜è®¤ä¼šä»¥è¯·æ±‚å¤´(å‚æ•°Accept)çš„æ–¹å¼å‘Šè¯‰æœåŠ¡å™¨ä»–èƒ½æ¥å—ä»€ä¹ˆæ ·çš„å†…å®¹ç±»å‹ï¼‰</span><br>            <span class="hljs-type">MediaType</span> <span class="hljs-variable">selectedMediaType</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-type">MediaType</span> <span class="hljs-variable">contentType</span> <span class="hljs-operator">=</span> outputMessage.getHeaders().getContentType();<br>            <span class="hljs-type">boolean</span> <span class="hljs-variable">isContentTypePreset</span> <span class="hljs-operator">=</span> contentType != <span class="hljs-literal">null</span> &amp;&amp; contentType.isConcrete();<br>            <span class="hljs-keyword">if</span> (isContentTypePreset) &#123;<br>                <span class="hljs-keyword">if</span> (logger.isDebugEnabled()) &#123;<br>                    logger.debug(<span class="hljs-string">&quot;Found &#x27;Content-Type:&quot;</span> + contentType + <span class="hljs-string">&quot;&#x27; in response&quot;</span>);<br>                &#125;<br>                selectedMediaType = contentType;<br>            &#125;<br>            <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> inputMessage.getServletRequest();<br>                List&lt;MediaType&gt; acceptableTypes = getAcceptableMediaTypes(request);<br>                <span class="hljs-comment">//æœåŠ¡å™¨æœ€ç»ˆæ ¹æ®è‡ªå·±è‡ªèº«çš„èƒ½åŠ›ï¼Œå†³å®šæœåŠ¡å™¨èƒ½ç”Ÿäº§å‡ºä»€ä¹ˆæ ·å†…å®¹ç±»å‹çš„æ•°æ®</span><br>                List&lt;MediaType&gt; producibleTypes = getProducibleMediaTypes(request, valueType, targetType);<br>            ...<br>            <br>&#125;<br>    <br>    <span class="hljs-comment">//åœ¨AbstractMessageConverterMethodArgumentResolverç±»å†…</span><br>   <span class="hljs-keyword">private</span> List&lt;MediaType&gt; <span class="hljs-title function_">getAcceptableMediaTypes</span><span class="hljs-params">(HttpServletRequest request)</span><br><span class="hljs-keyword">throws</span> HttpMediaTypeNotAcceptableException &#123;<br><br>        <span class="hljs-comment">//å†…å®¹åå•†ç®¡ç†å™¨ é»˜è®¤ä½¿ç”¨åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</span><br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.contentNegotiationManager.resolveMediaTypes(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request));<br>&#125;<br>        <br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentNegotiationManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ContentNegotiationStrategy</span>, MediaTypeFileExtensionResolver &#123;<br><br>    ...<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ContentNegotiationManager</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-built_in">this</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">HeaderContentNegotiationStrategy</span>());<span class="hljs-comment">//å†…å®¹åå•†ç®¡ç†å™¨ é»˜è®¤ä½¿ç”¨åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</span><br>&#125;<br>    <br>    <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;MediaType&gt; <span class="hljs-title function_">resolveMediaTypes</span><span class="hljs-params">(NativeWebRequest request)</span> <span class="hljs-keyword">throws</span> HttpMediaTypeNotAcceptableException &#123;<br><span class="hljs-keyword">for</span> (ContentNegotiationStrategy strategy : <span class="hljs-built_in">this</span>.strategies) &#123;<br>List&lt;MediaType&gt; mediaTypes = strategy.resolveMediaTypes(request);<br><span class="hljs-keyword">if</span> (mediaTypes.equals(MEDIA_TYPE_ALL_LIST)) &#123;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br><span class="hljs-keyword">return</span> mediaTypes;<br>&#125;<br><span class="hljs-keyword">return</span> MEDIA_TYPE_ALL_LIST;<br>&#125;<br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//åŸºäºè¯·æ±‚å¤´çš„ç­–ç•¥</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeaderContentNegotiationStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ContentNegotiationStrategy</span> &#123;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * &#123;<span class="hljs-doctag">@inheritDoc</span>&#125;</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@throws</span> HttpMediaTypeNotAcceptableException if the &#x27;Accept&#x27; header cannot be parsed</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;MediaType&gt; <span class="hljs-title function_">resolveMediaTypes</span><span class="hljs-params">(NativeWebRequest request)</span><br><span class="hljs-keyword">throws</span> HttpMediaTypeNotAcceptableException &#123;<br><br>String[] headerValueArray = request.getHeaderValues(HttpHeaders.ACCEPT);<br><span class="hljs-keyword">if</span> (headerValueArray == <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">return</span> MEDIA_TYPE_ALL_LIST;<br>&#125;<br><br>List&lt;String&gt; headerValues = Arrays.asList(headerValueArray);<br><span class="hljs-keyword">try</span> &#123;<br>List&lt;MediaType&gt; mediaTypes = MediaType.parseMediaTypes(headerValues);<br>MediaType.sortBySpecificityAndQuality(mediaTypes);<br><span class="hljs-keyword">return</span> !CollectionUtils.isEmpty(mediaTypes) ? mediaTypes : MEDIA_TYPE_ALL_LIST;<br>&#125;<br><span class="hljs-keyword">catch</span> (InvalidMediaTypeException ex) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpMediaTypeNotAcceptableException</span>(<br><span class="hljs-string">&quot;Could not parse &#x27;Accept&#x27; header &quot;</span> + headerValues + <span class="hljs-string">&quot;: &quot;</span> + ex.getMessage());<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½"><a href="#å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½" class="headerlink" title="å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½"></a>å¼€å¯æµè§ˆå™¨å‚æ•°æ–¹å¼å†…å®¹åå•†åŠŸèƒ½</h3><p>ä¸ºäº†æ–¹ä¾¿å†…å®¹åå•†ï¼Œå¼€å¯åŸºäºè¯·æ±‚å‚æ•°çš„å†…å®¹åå•†åŠŸèƒ½ã€‚</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">mvc:</span><br>    <span class="hljs-attr">contentnegotiation:</span><br>      <span class="hljs-attr">favor-parameter:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment">#å¼€å¯è¯·æ±‚å‚æ•°å†…å®¹åå•†æ¨¡å¼</span><br></code></pre></td></tr></table></figure><p>å†…å®¹åå•†ç®¡ç†å™¨ï¼Œå°±ä¼šå¤šäº†ä¸€ä¸ª<code>ParameterContentNegotiationStrategy</code>ï¼ˆç”±Springå®¹å™¨æ³¨å…¥ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterContentNegotiationStrategy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMappingContentNegotiationStrategy</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">parameterName</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;format&quot;</span>;<span class="hljs-comment">//</span><br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Create an instance with the given map of file extensions and media types.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">ParameterContentNegotiationStrategy</span><span class="hljs-params">(Map&lt;String, MediaType&gt; mediaTypes)</span> &#123;<br><span class="hljs-built_in">super</span>(mediaTypes);<br>&#125;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Set the name of the parameter to use to determine requested media types.</span><br><span class="hljs-comment"> * &lt;p&gt;By default this is set to &#123;<span class="hljs-doctag">@code</span> &quot;format&quot;&#125;.</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParameterName</span><span class="hljs-params">(String parameterName)</span> &#123;<br>Assert.notNull(parameterName, <span class="hljs-string">&quot;&#x27;parameterName&#x27; is required&quot;</span>);<br><span class="hljs-built_in">this</span>.parameterName = parameterName;<br>&#125;<br><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getParameterName</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.parameterName;<br>&#125;<br><br><br><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> String <span class="hljs-title function_">getMediaTypeKey</span><span class="hljs-params">(NativeWebRequest request)</span> &#123;<br><span class="hljs-keyword">return</span> request.getParameter(getParameterName());<br>&#125;<br>    <br>    <span class="hljs-comment">//---ä»¥ä¸‹æ–¹æ³•åœ¨AbstractMappingContentNegotiationStrategyç±»</span><br>    <br>    <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> List&lt;MediaType&gt; <span class="hljs-title function_">resolveMediaTypes</span><span class="hljs-params">(NativeWebRequest webRequest)</span><br><span class="hljs-keyword">throws</span> HttpMediaTypeNotAcceptableException &#123;<br><br><span class="hljs-keyword">return</span> resolveMediaTypeKey(webRequest, getMediaTypeKey(webRequest));<br>&#125;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * An alternative to &#123;<span class="hljs-doctag">@link</span> #resolveMediaTypes(NativeWebRequest)&#125; that accepts</span><br><span class="hljs-comment"> * an already extracted key.</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 3.2.16</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> List&lt;MediaType&gt; <span class="hljs-title function_">resolveMediaTypeKey</span><span class="hljs-params">(NativeWebRequest webRequest, <span class="hljs-meta">@Nullable</span> String key)</span><br><span class="hljs-keyword">throws</span> HttpMediaTypeNotAcceptableException &#123;<br><br><span class="hljs-keyword">if</span> (StringUtils.hasText(key)) &#123;<br><span class="hljs-type">MediaType</span> <span class="hljs-variable">mediaType</span> <span class="hljs-operator">=</span> lookupMediaType(key);<br><span class="hljs-keyword">if</span> (mediaType != <span class="hljs-literal">null</span>) &#123;<br>handleMatch(key, mediaType);<br><span class="hljs-keyword">return</span> Collections.singletonList(mediaType);<br>&#125;<br>mediaType = handleNoMatch(webRequest, key);<br><span class="hljs-keyword">if</span> (mediaType != <span class="hljs-literal">null</span>) &#123;<br>addMapping(key, mediaType);<br><span class="hljs-keyword">return</span> Collections.singletonList(mediaType);<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> MEDIA_TYPE_ALL_LIST;<br>&#125;<br>    <br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç„¶åï¼Œæµè§ˆå™¨åœ°å€è¾“å…¥å¸¦formatå‚æ•°çš„URLï¼š</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/test/</span>person?format=json<br>æˆ–<br>http:<span class="hljs-regexp">//</span>localhost:<span class="hljs-number">8080</span><span class="hljs-regexp">/test/</span>person?format=xml<br></code></pre></td></tr></table></figure><p>è¿™æ ·ï¼Œåç«¯ä¼šæ ¹æ®å‚æ•°formatçš„å€¼ï¼Œè¿”å›å¯¹åº”jsonæˆ–xmlæ ¼å¼çš„æ•°æ®ã€‚</p><h2 id="41ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰MessageConverter"><a href="#41ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰MessageConverter" class="headerlink" title="41ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰MessageConverter"></a>41ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-è‡ªå®šä¹‰MessageConverter</h2><p><strong>å®ç°å¤šåè®®æ•°æ®å…¼å®¹ã€‚jsonã€xmlã€x-guigu</strong>ï¼ˆè¿™ä¸ªæ˜¯è‡ªåˆ›çš„ï¼‰</p><ol><li><p><code>@ResponseBody</code> å“åº”æ•°æ®å‡ºå» è°ƒç”¨ <code>RequestResponseBodyMethodProcessor</code> å¤„ç†</p></li><li><p>Processor å¤„ç†æ–¹æ³•è¿”å›å€¼ã€‚é€šè¿‡ <code>MessageConverter</code>å¤„ç†</p></li><li><p>æ‰€æœ‰ <code>MessageConverter</code> åˆèµ·æ¥å¯ä»¥æ”¯æŒå„ç§åª’ä½“ç±»å‹æ•°æ®çš„æ“ä½œï¼ˆè¯»ã€å†™ï¼‰</p></li><li><p>å†…å®¹åå•†æ‰¾åˆ°æœ€ç»ˆçš„ <code>messageConverter</code></p></li></ol><p>SpringMVCçš„ä»€ä¹ˆåŠŸèƒ½ï¼Œä¸€ä¸ªå…¥å£ç»™å®¹å™¨ä¸­æ·»åŠ ä¸€ä¸ª  <code>WebMvcConfigurer</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> &#123;<br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebMvcConfigurer <span class="hljs-title function_">webMvcConfigurer</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurer</span>() &#123;<br><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">extendMessageConverters</span><span class="hljs-params">(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters)</span> &#123;<br>                converters.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GuiguMessageConverter</span>());<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * è‡ªå®šä¹‰çš„Converter</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GuiguMessageConverter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HttpMessageConverter</span>&lt;Person&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canRead</span><span class="hljs-params">(Class&lt;?&gt; clazz, MediaType mediaType)</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">canWrite</span><span class="hljs-params">(Class&lt;?&gt; clazz, MediaType mediaType)</span> &#123;<br>        <span class="hljs-keyword">return</span> clazz.isAssignableFrom(Person.class);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æœåŠ¡å™¨è¦ç»Ÿè®¡æ‰€æœ‰MessageConverteréƒ½èƒ½å†™å‡ºå“ªäº›å†…å®¹ç±»å‹</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * application/x-guigu</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> List&lt;MediaType&gt; <span class="hljs-title function_">getSupportedMediaTypes</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> MediaType.parseMediaTypes(<span class="hljs-string">&quot;application/x-guigu&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Person <span class="hljs-title function_">read</span><span class="hljs-params">(Class&lt;? extends Person&gt; clazz, HttpInputMessage inputMessage)</span> <span class="hljs-keyword">throws</span> IOException, HttpMessageNotReadableException &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">write</span><span class="hljs-params">(Person person, MediaType contentType, HttpOutputMessage outputMessage)</span> <span class="hljs-keyword">throws</span> IOException, HttpMessageNotWritableException &#123;<br>        <span class="hljs-comment">//è‡ªå®šä¹‰åè®®æ•°æ®çš„å†™å‡º</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> person.getUserName()+<span class="hljs-string">&quot;;&quot;</span>+person.getAge()+<span class="hljs-string">&quot;;&quot;</span>+person.getBirth();<br><br><br>        <span class="hljs-comment">//å†™å‡ºå»</span><br>        <span class="hljs-type">OutputStream</span> <span class="hljs-variable">body</span> <span class="hljs-operator">=</span> outputMessage.getBody();<br>        body.write(data.getBytes());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResponseTestController</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 1ã€æµè§ˆå™¨å‘è¯·æ±‚ç›´æ¥è¿”å› xml    [application/xml]        jacksonXmlConverter</span><br><span class="hljs-comment">     * 2ã€å¦‚æœæ˜¯ajaxè¯·æ±‚ è¿”å› json   [application/json]      jacksonJsonConverter</span><br><span class="hljs-comment">     * 3ã€å¦‚æœç¡…è°·appå‘è¯·æ±‚ï¼Œè¿”å›è‡ªå®šä¹‰åè®®æ•°æ®  [appliaction/x-guigu]   xxxxConverter</span><br><span class="hljs-comment">     *          å±æ€§å€¼1;å±æ€§å€¼2;</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * æ­¥éª¤ï¼š</span><br><span class="hljs-comment">     * 1ã€æ·»åŠ è‡ªå®šä¹‰çš„MessageConverterè¿›ç³»ç»Ÿåº•å±‚</span><br><span class="hljs-comment">     * 2ã€ç³»ç»Ÿåº•å±‚å°±ä¼šç»Ÿè®¡å‡ºæ‰€æœ‰MessageConverterèƒ½æ“ä½œå“ªäº›ç±»å‹</span><br><span class="hljs-comment">     * 3ã€å®¢æˆ·ç«¯å†…å®¹åå•† [guigu---&gt;guigu]</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * ä½œä¸šï¼šå¦‚ä½•ä»¥å‚æ•°çš„æ–¹å¼è¿›è¡Œå†…å®¹åå•†</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@ResponseBody</span>  <span class="hljs-comment">//åˆ©ç”¨è¿”å›å€¼å¤„ç†å™¨é‡Œé¢çš„æ¶ˆæ¯è½¬æ¢å™¨è¿›è¡Œå¤„ç†</span><br>    <span class="hljs-meta">@GetMapping(value = &quot;/test/person&quot;)</span><br>    <span class="hljs-keyword">public</span> Person <span class="hljs-title function_">getPerson</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">Person</span> <span class="hljs-variable">person</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>();<br>        person.setAge(<span class="hljs-number">28</span>);<br>        person.setBirth(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());<br>        person.setUserName(<span class="hljs-string">&quot;zhangsan&quot;</span>);<br>        <span class="hljs-keyword">return</span> person;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç”¨Postmanå‘é€<code>/test/person</code>ï¼ˆè¯·æ±‚å¤´<code>Accept:application/x-guigu</code>)ï¼Œå°†è¿”å›è‡ªå®šä¹‰åè®®æ•°æ®çš„å†™å‡ºã€‚</p><h2 id="42ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-æµè§ˆå™¨ä¸PostManå†…å®¹åå•†å®Œå…¨é€‚é…"><a href="#42ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-æµè§ˆå™¨ä¸PostManå†…å®¹åå•†å®Œå…¨é€‚é…" class="headerlink" title="42ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-æµè§ˆå™¨ä¸PostManå†…å®¹åå•†å®Œå…¨é€‚é…"></a>42ã€å“åº”å¤„ç†-ã€æºç åˆ†æã€‘-æµè§ˆå™¨ä¸PostManå†…å®¹åå•†å®Œå…¨é€‚é…</h2><p>å‡è®¾ä½ æƒ³åŸºäºè‡ªå®šä¹‰è¯·æ±‚å‚æ•°çš„è‡ªå®šä¹‰å†…å®¹åå•†åŠŸèƒ½ã€‚</p><p>æ¢å¥è¯ï¼Œåœ¨åœ°å€æ è¾“å…¥<code>http://localhost:8080/test/person?format=gg</code>è¿”å›æ•°æ®ï¼Œè·Ÿ<code>http://localhost:8080/test/person</code>ä¸”è¯·æ±‚å¤´å‚æ•°<code>Accept:application/x-guigu</code>çš„è¿”å›è‡ªå®šä¹‰åè®®æ•°æ®çš„ä¸€è‡´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebConfig</span> <span class="hljs-comment">/*implements WebMvcConfigurer*/</span> &#123;<br><br>    <span class="hljs-comment">//1ã€WebMvcConfigurerå®šåˆ¶åŒ–SpringMVCçš„åŠŸèƒ½</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> WebMvcConfigurer <span class="hljs-title function_">webMvcConfigurer</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebMvcConfigurer</span>() &#123;<br><br>            <span class="hljs-comment">/**</span><br><span class="hljs-comment">             * è‡ªå®šä¹‰å†…å®¹åå•†ç­–ç•¥</span><br><span class="hljs-comment">             * <span class="hljs-doctag">@param</span> configurer</span><br><span class="hljs-comment">             */</span><br>            <span class="hljs-meta">@Override</span><br>            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureContentNegotiation</span><span class="hljs-params">(ContentNegotiationConfigurer configurer)</span> &#123;<br>                <span class="hljs-comment">//Map&lt;String, MediaType&gt; mediaTypes</span><br>                Map&lt;String, MediaType&gt; mediaTypes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>                mediaTypes.put(<span class="hljs-string">&quot;json&quot;</span>,MediaType.APPLICATION_JSON);<br>                mediaTypes.put(<span class="hljs-string">&quot;xml&quot;</span>,MediaType.APPLICATION_XML);<br>                <span class="hljs-comment">//è‡ªå®šä¹‰åª’ä½“ç±»å‹</span><br>                mediaTypes.put(<span class="hljs-string">&quot;gg&quot;</span>,MediaType.parseMediaType(<span class="hljs-string">&quot;application/x-guigu&quot;</span>));<br>                <span class="hljs-comment">//æŒ‡å®šæ”¯æŒè§£æå“ªäº›å‚æ•°å¯¹åº”çš„å“ªäº›åª’ä½“ç±»å‹</span><br>                <span class="hljs-type">ParameterContentNegotiationStrategy</span> <span class="hljs-variable">parameterStrategy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParameterContentNegotiationStrategy</span>(mediaTypes);<br><span class="hljs-comment">//                parameterStrategy.setParameterName(&quot;ff&quot;);</span><br><br>                <span class="hljs-comment">//è¿˜éœ€æ·»åŠ è¯·æ±‚å¤´å¤„ç†ç­–ç•¥ï¼Œå¦åˆ™accept:application/jsonã€application/xmlåˆ™ä¼šå¤±æ•ˆ</span><br>                <span class="hljs-type">HeaderContentNegotiationStrategy</span> <span class="hljs-variable">headeStrategy</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HeaderContentNegotiationStrategy</span>();<br><br>                configurer.strategies(Arrays.asList(parameterStrategy, headeStrategy));<br>            &#125;<br>        &#125;<br>    &#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>æ—¥åå¼€å‘è¦æ³¨æ„ï¼Œ<strong>æœ‰å¯èƒ½æˆ‘ä»¬æ·»åŠ çš„è‡ªå®šä¹‰çš„åŠŸèƒ½ä¼šè¦†ç›–é»˜è®¤å¾ˆå¤šåŠŸèƒ½ï¼Œå¯¼è‡´ä¸€äº›é»˜è®¤çš„åŠŸèƒ½å¤±æ•ˆã€‚</strong></p><h2 id="43ã€è§†å›¾è§£æ-Thymeleafåˆä½“éªŒ"><a href="#43ã€è§†å›¾è§£æ-Thymeleafåˆä½“éªŒ" class="headerlink" title="43ã€è§†å›¾è§£æ-Thymeleafåˆä½“éªŒ"></a>43ã€è§†å›¾è§£æ-Thymeleafåˆä½“éªŒ</h2><blockquote><p><strong>Thymeleaf</strong> is a modern server-side Java template engine for both web and standalone environments.</p><p>Thymeleafâ€™s main goal is to bring elegant <em>natural templates</em> to your development workflow â€” HTML that can be correctly displayed in browsers and also work as static prototypes, allowing for stronger collaboration in development teams.</p><p>With modules for Spring Framework, a host of integrations with your favourite tools, and the ability to plug in your own functionality, Thymeleaf is ideal for modern-day HTML5 JVM web development â€” although there is much more it can do.â€”â€”<a href="https://www.thymeleaf.org/">Link</a></p></blockquote><p><a href="https://www.thymeleaf.org/documentation.html">Thymeleafå®˜æ–¹æ–‡æ¡£</a></p><h3 id="thymeleafä½¿ç”¨"><a href="#thymeleafä½¿ç”¨" class="headerlink" title="thymeleafä½¿ç”¨"></a>thymeleafä½¿ç”¨</h3><h4 id="å¼•å…¥Starter"><a href="#å¼•å…¥Starter" class="headerlink" title="å¼•å…¥Starter"></a>å¼•å…¥Starter</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-thymeleaf<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf"><a href="#è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf" class="headerlink" title="è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf"></a>è‡ªåŠ¨é…ç½®å¥½äº†thymeleaf</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@EnableConfigurationProperties(ThymeleafProperties.class)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; TemplateMode.class, SpringTemplateEngine.class &#125;)</span><br><span class="hljs-meta">@AutoConfigureAfter(&#123; WebMvcAutoConfiguration.class, WebFluxAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThymeleafAutoConfiguration</span> &#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><p>è‡ªåŠ¨é…å¥½çš„ç­–ç•¥</p><ol><li><p>æ‰€æœ‰thymeleafçš„é…ç½®å€¼éƒ½åœ¨ ThymeleafProperties</p></li><li><p>é…ç½®å¥½äº† <strong>SpringTemplateEngine</strong> </p></li><li><p>é…å¥½äº† <strong>ThymeleafViewResolver</strong> </p></li><li><p>æˆ‘ä»¬åªéœ€è¦ç›´æ¥å¼€å‘é¡µé¢</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;classpath:/templates/&quot;</span>;<span class="hljs-comment">//æ¨¡æ¿æ”¾ç½®å¤„</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_SUFFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;.html&quot;</span>;<span class="hljs-comment">//æ–‡ä»¶çš„åç¼€å</span><br></code></pre></td></tr></table></figure><p>ç¼–å†™ä¸€ä¸ªæ§åˆ¶å±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewTestController</span> &#123;<br>    <span class="hljs-meta">@GetMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">(Model model)</span>&#123;<br>        <span class="hljs-comment">//modelä¸­çš„æ•°æ®ä¼šè¢«æ”¾åœ¨è¯·æ±‚åŸŸä¸­ request.setAttribute(&quot;a&quot;,aa)</span><br>        model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;ä¸€å®šè¦å¤§åŠ›å‘å±•å·¥ä¸šæ–‡åŒ–&quot;</span>);<br>        model.addAttribute(<span class="hljs-string">&quot;link&quot;</span>,<span class="hljs-string">&quot;http://www.baidu.com&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;success&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>/templates/success.html</code>ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Title<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span>nice<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;www.baidu.com&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;$&#123;link&#125;&quot;</span>&gt;</span>å»ç™¾åº¦<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;www.google.com&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/link&#125;&quot;</span>&gt;</span>å»ç™¾åº¦<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><hr><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">servlet:</span><br>    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/app</span> <span class="hljs-comment">#è®¾ç½®åº”ç”¨å</span><br></code></pre></td></tr></table></figure><p>è¿™ä¸ªè®¾ç½®åï¼ŒURLè¦æ’å…¥<code>/app</code>,  å¦‚<code>http://localhost:8080/app/hello.html</code>ã€‚</p><h3 id="åŸºæœ¬è¯­æ³•-1"><a href="#åŸºæœ¬è¯­æ³•-1" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><h4 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h4><table><thead><tr><th>è¡¨è¾¾å¼åå­—</th><th>è¯­æ³•</th><th align="center">ç”¨é€”</th></tr></thead><tbody><tr><td>å˜é‡å–å€¼</td><td>${â€¦}</td><td align="center">è·å–è¯·æ±‚åŸŸã€sessionåŸŸã€å¯¹è±¡ç­‰å€¼</td></tr><tr><td>é€‰æ‹©å˜é‡</td><td>*{â€¦}</td><td align="center">è·å–ä¸Šä¸‹æ–‡å¯¹è±¡å€¼</td></tr><tr><td>æ¶ˆæ¯</td><td>#{â€¦}</td><td align="center">è·å–å›½é™…åŒ–ç­‰å€¼</td></tr><tr><td>é“¾æ¥</td><td>@{â€¦}</td><td align="center">ç”Ÿæˆé“¾æ¥</td></tr><tr><td>ç‰‡æ®µè¡¨è¾¾å¼</td><td>~{â€¦}</td><td align="center">jsp:include ä½œç”¨ï¼Œå¼•å…¥å…¬å…±é¡µé¢ç‰‡æ®µ</td></tr></tbody></table><h4 id="å­—é¢é‡"><a href="#å­—é¢é‡" class="headerlink" title="å­—é¢é‡"></a>å­—é¢é‡</h4><ul><li>æ–‡æœ¬å€¼: <strong>â€˜one textâ€™</strong> <strong>,</strong> <strong>â€˜Another one!â€™</strong> <strong>,â€¦</strong></li><li>æ•°å­—: <strong>0</strong> <strong>,</strong> <strong>34</strong> <strong>,</strong> <strong>3.0</strong> <strong>,</strong> <strong>12.3</strong> <strong>,â€¦</strong></li><li>å¸ƒå°”å€¼: <strong>true</strong> <strong>,</strong> <strong>false</strong></li><li>ç©ºå€¼: <strong>null</strong></li><li>å˜é‡ï¼š oneï¼Œtwoï¼Œâ€¦. å˜é‡ä¸èƒ½æœ‰ç©ºæ ¼</li></ul><h4 id="æ–‡æœ¬æ“ä½œ"><a href="#æ–‡æœ¬æ“ä½œ" class="headerlink" title="æ–‡æœ¬æ“ä½œ"></a>æ–‡æœ¬æ“ä½œ</h4><ul><li>å­—ç¬¦ä¸²æ‹¼æ¥: <strong>+</strong></li><li>å˜é‡æ›¿æ¢: <strong>|The name is ${name}|</strong></li></ul><h4 id="æ•°å­¦è¿ç®—"><a href="#æ•°å­¦è¿ç®—" class="headerlink" title="æ•°å­¦è¿ç®—"></a>æ•°å­¦è¿ç®—</h4><ul><li>è¿ç®—ç¬¦: + , - , * , &#x2F; , %</li></ul><h4 id="å¸ƒå°”è¿ç®—"><a href="#å¸ƒå°”è¿ç®—" class="headerlink" title="å¸ƒå°”è¿ç®—"></a>å¸ƒå°”è¿ç®—</h4><ul><li>è¿ç®—ç¬¦:  <strong>and</strong> <strong>,</strong> <strong>or</strong></li><li>ä¸€å…ƒè¿ç®—: <strong>!</strong> <strong>,</strong> <strong>not</strong></li></ul><h4 id="æ¯”è¾ƒè¿ç®—"><a href="#æ¯”è¾ƒè¿ç®—" class="headerlink" title="æ¯”è¾ƒè¿ç®—"></a>æ¯”è¾ƒè¿ç®—</h4><ul><li>æ¯”è¾ƒ: <strong>&gt;</strong> <strong>,</strong> <strong>&lt;** **,** **&gt;&#x3D;</strong> <strong>,</strong> <strong>&lt;&#x3D;</strong> <strong>(</strong> <strong>gt</strong> <strong>,</strong> <strong>lt</strong> <strong>,</strong> <strong>ge</strong> <strong>,</strong> <strong>le</strong> <strong>)</strong></li><li>ç­‰å¼: <strong>&#x3D;&#x3D;</strong> <strong>,</strong> <strong>!&#x3D;</strong> <strong>(</strong> <strong>eq</strong> <strong>,</strong> <strong>ne</strong> <strong>)</strong></li></ul><h4 id="æ¡ä»¶è¿ç®—"><a href="#æ¡ä»¶è¿ç®—" class="headerlink" title="æ¡ä»¶è¿ç®—"></a>æ¡ä»¶è¿ç®—</h4><ul><li>If-then: <strong>(if) ? (then)</strong></li><li>If-then-else: <strong>(if) ? (then) : (else)</strong></li><li>Default: (value) <strong>?: (defaultvalue)</strong></li></ul><h4 id="ç‰¹æ®Šæ“ä½œ"><a href="#ç‰¹æ®Šæ“ä½œ" class="headerlink" title="ç‰¹æ®Šæ“ä½œ"></a>ç‰¹æ®Šæ“ä½œ</h4><ul><li>æ— æ“ä½œï¼š _</li></ul><h3 id="è®¾ç½®å±æ€§å€¼-th-attr"><a href="#è®¾ç½®å±æ€§å€¼-th-attr" class="headerlink" title="è®¾ç½®å±æ€§å€¼-th:attr"></a>è®¾ç½®å±æ€§å€¼-th:attr</h3><ul><li>è®¾ç½®å•ä¸ªå€¼</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;subscribe.html&quot;</span> <span class="hljs-attr">th:attr</span>=<span class="hljs-string">&quot;action=@&#123;/subscribe&#125;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;Subscribe!&quot;</span> <span class="hljs-attr">th:attr</span>=<span class="hljs-string">&quot;value=#&#123;subscribe.submit&#125;&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>è®¾ç½®å¤šä¸ªå€¼</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;../../images/gtvglogo.png&quot;</span>  </span><br><span class="hljs-tag">     <span class="hljs-attr">th:attr</span>=<span class="hljs-string">&quot;src=@&#123;/images/gtvglogo.png&#125;,title=#&#123;logo&#125;,alt=#&#123;logo&#125;&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-attribute-values">å®˜æ–¹æ–‡æ¡£ - 5 Setting Attribute Values</a></p><h3 id="è¿­ä»£"><a href="#è¿­ä»£" class="headerlink" title="è¿­ä»£"></a>è¿­ä»£</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;prod : $&#123;prods&#125;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;prod.name&#125;&quot;</span>&gt;</span>Onions<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;prod.price&#125;&quot;</span>&gt;</span>2.41<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;&quot;</span>&gt;</span>yes<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;prod,iterStat : $&#123;prods&#125;&quot;</span> <span class="hljs-attr">th:class</span>=<span class="hljs-string">&quot;$&#123;iterStat.odd&#125;? &#x27;odd&#x27;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;prod.name&#125;&quot;</span>&gt;</span>Onions<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;prod.price&#125;&quot;</span>&gt;</span>2.41<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;prod.inStock&#125;? #&#123;true&#125; : #&#123;false&#125;&quot;</span>&gt;</span>yes<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="æ¡ä»¶è¿ç®—-1"><a href="#æ¡ä»¶è¿ç®—-1" class="headerlink" title="æ¡ä»¶è¿ç®—"></a>æ¡ä»¶è¿ç®—</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;comments.html&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/product/comments(prodId=$&#123;prod.id&#125;)&#125;&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">th:if</span>=<span class="hljs-string">&quot;$&#123;not #lists.isEmpty(prod.comments)&#125;&quot;</span>&gt;</span>view<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:switch</span>=<span class="hljs-string">&quot;$&#123;user.role&#125;&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;&#x27;admin&#x27;&quot;</span>&gt;</span>User is an administrator<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;#&#123;roles.manager&#125;&quot;</span>&gt;</span>User is a manager<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">th:case</span>=<span class="hljs-string">&quot;*&quot;</span>&gt;</span>User is some other thing<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="å±æ€§ä¼˜å…ˆçº§"><a href="#å±æ€§ä¼˜å…ˆçº§" class="headerlink" title="å±æ€§ä¼˜å…ˆçº§"></a>å±æ€§ä¼˜å…ˆçº§</h3><table><thead><tr><th align="left">Order</th><th align="left">Feature</th><th align="left">Attributes</th></tr></thead><tbody><tr><td align="left">1</td><td align="left">Fragment inclusion</td><td align="left"><code>th:insert</code> <code>th:replace</code></td></tr><tr><td align="left">2</td><td align="left">Fragment iteration</td><td align="left"><code>th:each</code></td></tr><tr><td align="left">3</td><td align="left">Conditional evaluation</td><td align="left"><code>th:if</code> <code>th:unless</code> <code>th:switch</code> <code>th:case</code></td></tr><tr><td align="left">4</td><td align="left">Local variable definition</td><td align="left"><code>th:object</code> <code>th:with</code></td></tr><tr><td align="left">5</td><td align="left">General attribute modification</td><td align="left"><code>th:attr</code> <code>th:attrprepend</code> <code>th:attrappend</code></td></tr><tr><td align="left">6</td><td align="left">Specific attribute modification</td><td align="left"><code>th:value</code> <code>th:href</code> <code>th:src</code> <code>...</code></td></tr><tr><td align="left">7</td><td align="left">Text (tag body modification)</td><td align="left"><code>th:text</code> <code>th:utext</code></td></tr><tr><td align="left">8</td><td align="left">Fragment specification</td><td align="left"><code>th:fragment</code></td></tr><tr><td align="left">9</td><td align="left">Fragment removal</td><td align="left"><code>th:remove</code></td></tr></tbody></table><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#attribute-precedence">å®˜æ–¹æ–‡æ¡£ - 10 Attribute Precedence</a></p><h2 id="44ã€webå®éªŒ-åå°ç®¡ç†ç³»ç»ŸåŸºæœ¬åŠŸèƒ½"><a href="#44ã€webå®éªŒ-åå°ç®¡ç†ç³»ç»ŸåŸºæœ¬åŠŸèƒ½" class="headerlink" title="44ã€webå®éªŒ-åå°ç®¡ç†ç³»ç»ŸåŸºæœ¬åŠŸèƒ½"></a>44ã€webå®éªŒ-åå°ç®¡ç†ç³»ç»ŸåŸºæœ¬åŠŸèƒ½</h2><h3 id="é¡¹ç›®åˆ›å»º"><a href="#é¡¹ç›®åˆ›å»º" class="headerlink" title="é¡¹ç›®åˆ›å»º"></a>é¡¹ç›®åˆ›å»º</h3><p>ä½¿ç”¨IDEAçš„Spring Initializrã€‚</p><ul><li>thymeleafã€</li><li>web-starterã€</li><li>devtoolsã€</li><li>lombok</li></ul><h3 id="ç™»é™†é¡µé¢"><a href="#ç™»é™†é¡µé¢" class="headerlink" title="ç™»é™†é¡µé¢"></a>ç™»é™†é¡µé¢</h3><ul><li><p><code>/static</code> æ”¾ç½® cssï¼Œjsç­‰é™æ€èµ„æº</p></li><li><p><code>/templates/login.html</code> ç™»å½•é¡µ</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><span class="hljs-comment">&lt;!-- è¦åŠ è¿™ç©æ„thymeleafæ‰èƒ½ç”¨ --&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-signin&quot;</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;index.html&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/login&#125;&quot;</span>&gt;</span><br><br>    ...<br>    <br>    <span class="hljs-comment">&lt;!-- æ¶ˆæ¯æé†’ --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: red&quot;</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;msg&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;userName&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;User ID&quot;</span> <span class="hljs-attr">autofocus</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Password&quot;</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-lg btn-login btn-block&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-check&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <br>    ...<br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>/templates/main.html</code> ä¸»é¡µ</li></ul><p>thymeleafå†…è”å†™æ³•ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Hello, [[$&#123;session.user.name&#125;]]!<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç™»å½•æ§åˆ¶å±‚"><a href="#ç™»å½•æ§åˆ¶å±‚" class="headerlink" title="ç™»å½•æ§åˆ¶å±‚"></a>ç™»å½•æ§åˆ¶å±‚</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexController</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * æ¥ç™»å½•é¡µ</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(value = &#123;&quot;/&quot;,&quot;/login&quot;&#125;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">loginPage</span><span class="hljs-params">()</span>&#123;<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping(&quot;/login&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">main</span><span class="hljs-params">(User user, HttpSession session, Model model)</span>&#123; <span class="hljs-comment">//RedirectAttributes</span><br><br>        <span class="hljs-keyword">if</span>(StringUtils.hasLength(user.getUserName()) &amp;&amp; <span class="hljs-string">&quot;123456&quot;</span>.equals(user.getPassword()))&#123;<br>            <span class="hljs-comment">//æŠŠç™»é™†æˆåŠŸçš„ç”¨æˆ·ä¿å­˜èµ·æ¥</span><br>            session.setAttribute(<span class="hljs-string">&quot;loginUser&quot;</span>,user);<br>            <span class="hljs-comment">//ç™»å½•æˆåŠŸé‡å®šå‘åˆ°main.html;  é‡å®šå‘é˜²æ­¢è¡¨å•é‡å¤æäº¤</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/main.html&quot;</span>;<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;è´¦å·å¯†ç é”™è¯¯&quot;</span>);<br>            <span class="hljs-comment">//å›åˆ°ç™»å½•é¡µé¢</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>;<br>        &#125;<br>    &#125;<br>    <br>     <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * å»mainé¡µé¢</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@GetMapping(&quot;/main.html&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">mainPage</span><span class="hljs-params">(HttpSession session, Model model)</span>&#123;<br>        <br>        <span class="hljs-comment">//æœ€å¥½ç”¨æ‹¦æˆªå™¨,è¿‡æ»¤å™¨</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> session.getAttribute(<span class="hljs-string">&quot;loginUser&quot;</span>);<br>        <span class="hljs-keyword">if</span>(loginUser != <span class="hljs-literal">null</span>)&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;main&quot;</span>;<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-comment">//sessionè¿‡æœŸï¼Œæ²¡æœ‰ç™»é™†è¿‡</span><br>        <span class="hljs-comment">//å›åˆ°ç™»å½•é¡µé¢</span><br>        model.addAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;è¯·é‡æ–°ç™»å½•&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>;<br>        &#125;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AllArgsConstructor</span><br><span class="hljs-meta">@NoArgsConstructor</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> String userName;<br>    <span class="hljs-keyword">private</span> String password;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="45ã€webå®éªŒ-æŠ½å–å…¬å…±é¡µé¢"><a href="#45ã€webå®éªŒ-æŠ½å–å…¬å…±é¡µé¢" class="headerlink" title="45ã€webå®éªŒ-æŠ½å–å…¬å…±é¡µé¢"></a>45ã€webå®éªŒ-æŠ½å–å…¬å…±é¡µé¢</h2><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout">å®˜æ–¹æ–‡æ¡£ - Template Layout</a></p><ul><li>å…¬å…±é¡µé¢<code>/templates/common.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><span class="hljs-comment">&lt;!--æ³¨æ„è¦æ·»åŠ xmlns:thæ‰èƒ½æ·»åŠ thymeleafçš„æ ‡ç­¾--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;commonheader&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--common--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;css/style.css&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/css/style.css&#125;&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;css/style-responsive.css&quot;</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/css/style-responsive.css&#125;&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span>&gt;</span><br>    ...<br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-comment">&lt;!-- left side start--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;leftmenu&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left-side sticky-left-side&quot;</span>&gt;</span><br>...<br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;left-side-inner&quot;</span>&gt;</span><br>...<br><br>        <span class="hljs-comment">&lt;!--sidebar nav start--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;nav nav-pills nav-stacked custom-nav&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/main.html&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-home&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Dashboard<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            ...<br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;menu-list nav-active&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-th-list&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Data Tables<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sub-menu-list&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/basic_table&#125;&quot;</span>&gt;</span> Basic Table<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/dynamic_table&#125;&quot;</span>&gt;</span> Advanced Table<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/responsive_table&#125;&quot;</span>&gt;</span> Responsive Table<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/editable_table&#125;&quot;</span>&gt;</span> Edit Table<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            ...<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--sidebar nav end--&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-comment">&lt;!-- left side end--&gt;</span><br><br><br><span class="hljs-comment">&lt;!-- header section start--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:fragment</span>=<span class="hljs-string">&quot;headermenu&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header-section&quot;</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--toggle button start--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;toggle-btn&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;fa fa-bars&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--toggle button end--&gt;</span><br>...<br><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-comment">&lt;!-- header section end--&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;commonscript&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- Placed js at the end of the document so the pages load faster --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/jquery-1.10.2.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/jquery-ui-1.9.2.custom.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/jquery-migrate-1.2.1.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/bootstrap.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/modernizr.min.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/jquery.nicescroll.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--common scripts for all pages--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">th:src</span>=<span class="hljs-string">&quot;@&#123;/js/scripts.js&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>/templates/table/basic_table.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span> <span class="hljs-attr">xmlns:th</span>=<span class="hljs-string">&quot;http://www.thymeleaf.org&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;author&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;ThemeBucket&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;shortcut icon&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;image/png&quot;</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Basic Table<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:include</span>=<span class="hljs-string">&quot;common :: commonheader&quot;</span>&gt;</span> <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-comment">&lt;!--å°†common.htmlçš„ä»£ç æ®µ æ’è¿›æ¥--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sticky-header&quot;</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">section</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">&quot;common :: #leftmenu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!-- main content start--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-content&quot;</span> &gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">&quot;common :: headermenu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        ...<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- main content end--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br><br><span class="hljs-comment">&lt;!-- Placed js at the end of the document so the pages load faster --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">th:replace</span>=<span class="hljs-string">&quot;common :: #commonscript&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#difference-between-thinsert-and-threplace-and-thinclude">Difference between <code>th:insert</code> and <code>th:replace</code> (and <code>th:include</code>)</a></p><h2 id="46ã€webå®éªŒ-éå†æ•°æ®ä¸é¡µé¢bugä¿®æ”¹"><a href="#46ã€webå®éªŒ-éå†æ•°æ®ä¸é¡µé¢bugä¿®æ”¹" class="headerlink" title="46ã€webå®éªŒ-éå†æ•°æ®ä¸é¡µé¢bugä¿®æ”¹"></a>46ã€webå®éªŒ-éå†æ•°æ®ä¸é¡µé¢bugä¿®æ”¹</h2><p>æ§åˆ¶å±‚ä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/dynamic_table&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">dynamic_table</span><span class="hljs-params">(Model model)</span>&#123;<br>    <span class="hljs-comment">//è¡¨æ ¼å†…å®¹çš„éå†</span><br>    List&lt;User&gt; users = Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>),<br>                                     <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;lisi&quot;</span>, <span class="hljs-string">&quot;123444&quot;</span>),<br>                                     <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;haha&quot;</span>, <span class="hljs-string">&quot;aaaaa&quot;</span>),<br>                                     <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;hehe &quot;</span>, <span class="hljs-string">&quot;aaddd&quot;</span>));<br>    model.addAttribute(<span class="hljs-string">&quot;users&quot;</span>,users);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;table/dynamic_table&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>é¡µé¢ä»£ç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;display table table-bordered&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;hidden-table-info&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>#<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>ç”¨æˆ·å<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>å¯†ç <span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gradeX&quot;</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user,stats:$&#123;users&#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;stats.count&#125;&quot;</span>&gt;</span>Trident<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.userName&#125;&quot;</span>&gt;</span>Internet<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> &gt;</span>[[$&#123;user.password&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="47ã€è§†å›¾è§£æ-ã€æºç åˆ†æã€‘-è§†å›¾è§£æå™¨ä¸è§†å›¾"><a href="#47ã€è§†å›¾è§£æ-ã€æºç åˆ†æã€‘-è§†å›¾è§£æå™¨ä¸è§†å›¾" class="headerlink" title="47ã€è§†å›¾è§£æ-ã€æºç åˆ†æã€‘-è§†å›¾è§£æå™¨ä¸è§†å›¾"></a>47ã€è§†å›¾è§£æ-ã€æºç åˆ†æã€‘-è§†å›¾è§£æå™¨ä¸è§†å›¾</h2><p><strong>è§†å›¾è§£æåŸç†æµç¨‹</strong>ï¼š</p><ol><li><p>ç›®æ ‡æ–¹æ³•å¤„ç†çš„è¿‡ç¨‹ä¸­ï¼ˆé˜…è¯»<code>DispatcherServlet</code>æºç ï¼‰ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¼šè¢«æ”¾åœ¨ <code>ModelAndViewContainer</code> é‡Œé¢ï¼Œå…¶ä¸­åŒ…æ‹¬æ•°æ®å’Œè§†å›¾åœ°å€ã€‚</p></li><li><p>æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹å¯¹è±¡ï¼ˆä»è¯·æ±‚å‚æ•°ä¸­ç¡®å®šçš„ï¼‰ï¼ŒæŠŠä»–é‡æ–°æ”¾åœ¨ <code>ModelAndViewContainer</code> ã€‚</p></li><li><p>ä»»ä½•ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥åéƒ½ä¼šè¿”å›<code>ModelAndView</code>ï¼ˆæ•°æ®å’Œè§†å›¾åœ°å€ï¼‰ã€‚</p></li><li><p><code>processDispatchResult()</code>å¤„ç†æ´¾å‘ç»“æœï¼ˆé¡µé¢æ”¹å¦‚ä½•å“åº”ï¼‰</p><ul><li><p><code>render(mv, request, response);</code> è¿›è¡Œé¡µé¢æ¸²æŸ“é€»è¾‘</p><ul><li>æ ¹æ®æ–¹æ³•çš„<code>String</code>è¿”å›å€¼å¾—åˆ° <code>View</code> å¯¹è±¡ã€å®šä¹‰äº†é¡µé¢çš„æ¸²æŸ“é€»è¾‘ã€‘</li></ul><ol><li>æ‰€æœ‰çš„è§†å›¾è§£æå™¨å°è¯•æ˜¯å¦èƒ½æ ¹æ®å½“å‰è¿”å›å€¼å¾—åˆ°<code>View</code>å¯¹è±¡</li><li>å¾—åˆ°äº†  <code>redirect:/main.html --&gt; Thymeleaf new RedirectView()</code>ã€‚</li><li><code>ContentNegotiationViewResolver</code> é‡Œé¢åŒ…å«äº†ä¸‹é¢æ‰€æœ‰çš„è§†å›¾è§£æå™¨ï¼Œå†…éƒ¨è¿˜æ˜¯åˆ©ç”¨ä¸‹é¢æ‰€æœ‰è§†å›¾è§£æå™¨å¾—åˆ°è§†å›¾å¯¹è±¡ã€‚</li><li><code>view.render(mv.getModelInternal(), request, response);</code>  è§†å›¾å¯¹è±¡è°ƒç”¨è‡ªå®šä¹‰çš„renderè¿›è¡Œé¡µé¢æ¸²æŸ“å·¥ä½œã€‚</li></ol><ul><li><code>RedirectView</code> å¦‚ä½•æ¸²æŸ“ã€é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢ã€‘</li><li>è·å–ç›®æ ‡urlåœ°å€</li><li><code>response.sendRedirect(encodedURL);</code></li></ul></li></ul></li></ol><p><strong>è§†å›¾è§£æ</strong>ï¼š<br>    - è¿”å›å€¼ä»¥ <code>forward:</code> å¼€å§‹ï¼š <code>new InternalResourceView(forwardUrl);</code> â€“&gt;  è½¬å‘<code>request.getRequestDispatcher(path).forward(request, response);</code><br>    - è¿”å›å€¼ä»¥ <code>redirect:</code> å¼€å§‹ï¼š <code>new RedirectView()</code> â€“&gt; renderå°±æ˜¯é‡å®šå‘<br>    - è¿”å›å€¼æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼š<code>new ThymeleafView()</code>â€”&gt;</p><hr><p>é˜…è¯»æºç ï¼šæœ€å¥½è‡ªå·±åœ¨IDEï¼Œæ‰“æ–­ç‚¹ï¼Œä¸”Debugæ¨¡å¼è¿è¡Œå®ä¾‹ï¼Œè¿™æ ·æ¯”è¾ƒæ²¡é‚£ä¹ˆæ²‰é—·ã€‚</p><h2 id="48ã€æ‹¦æˆªå™¨-ç™»å½•æ£€æŸ¥ä¸é™æ€èµ„æºæ”¾è¡Œ"><a href="#48ã€æ‹¦æˆªå™¨-ç™»å½•æ£€æŸ¥ä¸é™æ€èµ„æºæ”¾è¡Œ" class="headerlink" title="48ã€æ‹¦æˆªå™¨-ç™»å½•æ£€æŸ¥ä¸é™æ€èµ„æºæ”¾è¡Œ"></a>48ã€æ‹¦æˆªå™¨-ç™»å½•æ£€æŸ¥ä¸é™æ€èµ„æºæ”¾è¡Œ</h2><ol><li><p>ç¼–å†™ä¸€ä¸ªæ‹¦æˆªå™¨å®ç°<code>HandlerInterceptor</code>æ¥å£</p></li><li><p>æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ï¼ˆå®ç°<code>WebMvcConfigurer</code>çš„<code>addInterceptors()</code>ï¼‰</p></li><li><p>æŒ‡å®šæ‹¦æˆªè§„åˆ™ï¼ˆ<span style="color:red;">æ³¨æ„</span>ï¼Œå¦‚æœæ˜¯æ‹¦æˆªæ‰€æœ‰ï¼Œé™æ€èµ„æºä¹Ÿä¼šè¢«æ‹¦æˆªã€‘</p></li></ol><p>ç¼–å†™ä¸€ä¸ªå®ç°<code>HandlerInterceptor</code>æ¥å£çš„æ‹¦æˆªå™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">requestURI</span> <span class="hljs-operator">=</span> request.getRequestURI();<br>        log.info(<span class="hljs-string">&quot;preHandleæ‹¦æˆªçš„è¯·æ±‚è·¯å¾„æ˜¯&#123;&#125;&quot;</span>,requestURI);<br><br>        <span class="hljs-comment">//ç™»å½•æ£€æŸ¥é€»è¾‘</span><br>        <span class="hljs-type">HttpSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> request.getSession();<br><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">loginUser</span> <span class="hljs-operator">=</span> session.getAttribute(<span class="hljs-string">&quot;loginUser&quot;</span>);<br><br>        <span class="hljs-keyword">if</span>(loginUser != <span class="hljs-literal">null</span>)&#123;<br>            <span class="hljs-comment">//æ”¾è¡Œ</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br><br>        <span class="hljs-comment">//æ‹¦æˆªä½ã€‚æœªç™»å½•ã€‚è·³è½¬åˆ°ç™»å½•é¡µ</span><br>        request.setAttribute(<span class="hljs-string">&quot;msg&quot;</span>,<span class="hljs-string">&quot;è¯·å…ˆç™»å½•&quot;</span>);<br><span class="hljs-comment">//        re.sendRedirect(&quot;/&quot;);</span><br>        request.getRequestDispatcher(<span class="hljs-string">&quot;/&quot;</span>).forward(request,response);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * ç›®æ ‡æ–¹æ³•æ‰§è¡Œå®Œæˆä»¥å</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">postHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        log.info(<span class="hljs-string">&quot;postHandleæ‰§è¡Œ&#123;&#125;&quot;</span>,modelAndView);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é¡µé¢æ¸²æŸ“ä»¥å</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        log.info(<span class="hljs-string">&quot;afterCompletionæ‰§è¡Œå¼‚å¸¸&#123;&#125;&quot;</span>,ex);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­ &amp;&amp; æŒ‡å®šæ‹¦æˆªè§„åˆ™ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminWebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span>&#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br>        registry.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LoginInterceptor</span>())<span class="hljs-comment">//æ‹¦æˆªå™¨æ³¨å†Œåˆ°å®¹å™¨ä¸­</span><br>                .addPathPatterns(<span class="hljs-string">&quot;/**&quot;</span>)  <span class="hljs-comment">//æ‰€æœ‰è¯·æ±‚éƒ½è¢«æ‹¦æˆªåŒ…æ‹¬é™æ€èµ„æº</span><br>                .excludePathPatterns(<span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-string">&quot;/login&quot;</span>,<span class="hljs-string">&quot;/css/**&quot;</span>,<span class="hljs-string">&quot;/fonts/**&quot;</span>,<span class="hljs-string">&quot;/images/**&quot;</span>,<br>                        <span class="hljs-string">&quot;/js/**&quot;</span>,<span class="hljs-string">&quot;/aa/**&quot;</span>); <span class="hljs-comment">//æ”¾è¡Œçš„è¯·æ±‚</span><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="49ã€æ‹¦æˆªå™¨-ã€æºç åˆ†æã€‘-æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºå’ŒåŸç†"><a href="#49ã€æ‹¦æˆªå™¨-ã€æºç åˆ†æã€‘-æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºå’ŒåŸç†" class="headerlink" title="49ã€æ‹¦æˆªå™¨-ã€æºç åˆ†æã€‘-æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºå’ŒåŸç†"></a>49ã€æ‹¦æˆªå™¨-ã€æºç åˆ†æã€‘-æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºå’ŒåŸç†</h2><ol><li>æ ¹æ®å½“å‰è¯·æ±‚ï¼Œæ‰¾åˆ°<code>HandlerExecutionChain</code>ï¼ˆå¯ä»¥å¤„ç†è¯·æ±‚çš„handlerä»¥åŠhandlerçš„æ‰€æœ‰ æ‹¦æˆªå™¨ï¼‰</li><li>å…ˆæ¥é¡ºåºæ‰§è¡Œ æ‰€æœ‰æ‹¦æˆªå™¨çš„ <code>preHandle()</code>æ–¹æ³•ã€‚<ul><li>å¦‚æœå½“å‰æ‹¦æˆªå™¨<code>preHandle()</code>è¿”å›ä¸º<code>true</code>ã€‚åˆ™æ‰§è¡Œä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„<code>preHandle()</code></li><li>å¦‚æœå½“å‰æ‹¦æˆªå™¨è¿”å›ä¸º<code>false</code>ã€‚ç›´æ¥å€’åºæ‰§è¡Œæ‰€æœ‰å·²ç»æ‰§è¡Œäº†çš„æ‹¦æˆªå™¨çš„  <code>afterCompletion();</code>ã€‚</li></ul></li><li>å¦‚æœä»»ä½•ä¸€ä¸ªæ‹¦æˆªå™¨è¿”å›<code>false</code>ï¼Œç›´æ¥è·³å‡ºä¸æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚</li><li>æ‰€æœ‰æ‹¦æˆªå™¨éƒ½è¿”å›<code>true</code>ï¼Œæ‰æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚</li><li>å€’åºæ‰§è¡Œæ‰€æœ‰æ‹¦æˆªå™¨çš„<code>postHandle()</code>æ–¹æ³•ã€‚</li><li>å‰é¢çš„æ­¥éª¤æœ‰ä»»ä½•å¼‚å¸¸éƒ½ä¼šç›´æ¥å€’åºè§¦å‘ <code>afterCompletion()</code>ã€‚</li><li>é¡µé¢æˆåŠŸæ¸²æŸ“å®Œæˆä»¥åï¼Œä¹Ÿä¼šå€’åºè§¦å‘ <code>afterCompletion()</code>ã€‚</li></ol><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202207211315633.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><p><code>DispatcherServlet</code>ä¸­æ¶‰åŠåˆ°<code>HandlerInterceptor</code>çš„åœ°æ–¹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">processedRequest</span> <span class="hljs-operator">=</span> request;<br><span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">mappedHandler</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">boolean</span> <span class="hljs-variable">multipartRequestParsed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br><span class="hljs-type">WebAsyncManager</span> <span class="hljs-variable">asyncManager</span> <span class="hljs-operator">=</span> WebAsyncUtils.getAsyncManager(request);<br><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">Exception</span> <span class="hljs-variable">dispatchException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>            ...<br>            <br>                <span class="hljs-comment">//è¯¥æ–¹æ³•å†…è°ƒç”¨HandlerInterceptorçš„preHandle()</span><br><span class="hljs-keyword">if</span> (!mappedHandler.applyPreHandle(processedRequest, response)) &#123;<br><span class="hljs-keyword">return</span>;<br>&#125;<br><br><span class="hljs-comment">// Actually invoke the handler.</span><br>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br><br>            ...<br>                <span class="hljs-comment">//è¯¥æ–¹æ³•å†…è°ƒç”¨HandlerInterceptorçš„postHandle()</span><br>mappedHandler.applyPostHandle(processedRequest, response, mv);<br>&#125;<br>        processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>            <span class="hljs-comment">//è¯¥æ–¹æ³•å†…è°ƒç”¨HandlerInterceptoræ¥å£çš„afterCompletionæ–¹æ³•</span><br>triggerAfterCompletion(processedRequest, response, mappedHandler, ex);<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable err) &#123;<br>            <span class="hljs-comment">//è¯¥æ–¹æ³•å†…è°ƒç”¨HandlerInterceptoræ¥å£çš„afterCompletionæ–¹æ³•</span><br>triggerAfterCompletion(processedRequest, response, mappedHandler,<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">&quot;Handler processing failed&quot;</span>, err));<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>...<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">triggerAfterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> HandlerExecutionChain mappedHandler, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-keyword">if</span> (mappedHandler != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">//è¯¥æ–¹æ³•å†…è°ƒç”¨HandlerInterceptoræ¥å£çš„afterCompletionæ–¹æ³•</span><br>mappedHandler.triggerAfterCompletion(request, response, ex);<br>&#125;<br><span class="hljs-keyword">throw</span> ex;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="hljs-meta">@Nullable</span> ModelAndView mv,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> Exception exception)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        ...<br><br><span class="hljs-keyword">if</span> (mappedHandler != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">//è¯¥æ–¹æ³•å†…è°ƒç”¨HandlerInterceptoræ¥å£çš„afterCompletionæ–¹æ³•</span><br><span class="hljs-comment">// Exception (if any) is already handled..</span><br>mappedHandler.triggerAfterCompletion(request, response, <span class="hljs-literal">null</span>);<br>&#125;<br>&#125;<br><br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HandlerExecutionChain</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-type">boolean</span> <span class="hljs-title function_">applyPreHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-built_in">this</span>.interceptorList.size(); i++) &#123;<br><span class="hljs-type">HandlerInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorList.get(i);<br>            <span class="hljs-comment">//HandlerInterceptorçš„preHandleæ–¹æ³•</span><br><span class="hljs-keyword">if</span> (!interceptor.preHandle(request, response, <span class="hljs-built_in">this</span>.handler)) &#123;<br>                <br>triggerAfterCompletion(request, response, <span class="hljs-literal">null</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-built_in">this</span>.interceptorIndex = i;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br>    <br>   <span class="hljs-keyword">void</span> <span class="hljs-title function_">applyPostHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, <span class="hljs-meta">@Nullable</span> ModelAndView mv)</span><br><span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorList.size() - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br><span class="hljs-type">HandlerInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorList.get(i);<br>            <br>            <span class="hljs-comment">//HandlerInterceptoræ¥å£çš„postHandleæ–¹æ³•</span><br>interceptor.postHandle(request, response, <span class="hljs-built_in">this</span>.handler, mv);<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">triggerAfterCompletion</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, <span class="hljs-meta">@Nullable</span> Exception ex)</span> &#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorIndex; i &gt;= <span class="hljs-number">0</span>; i--) &#123;<br><span class="hljs-type">HandlerInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.interceptorList.get(i);<br><span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//HandlerInterceptoræ¥å£çš„afterCompletionæ–¹æ³•</span><br>interceptor.afterCompletion(request, response, <span class="hljs-built_in">this</span>.handler, ex);<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable ex2) &#123;<br>logger.error(<span class="hljs-string">&quot;HandlerInterceptor.afterCompletion threw exception&quot;</span>, ex2);<br>&#125;<br>&#125;<br>&#125;<br>    <br>    <br>&#125; <br>    <br></code></pre></td></tr></table></figure><h2 id="50ã€æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸å¤šæ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨"><a href="#50ã€æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸å¤šæ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨" class="headerlink" title="50ã€æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸å¤šæ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨"></a>50ã€æ–‡ä»¶ä¸Šä¼ -å•æ–‡ä»¶ä¸å¤šæ–‡ä»¶ä¸Šä¼ çš„ä½¿ç”¨</h2><ul><li>é¡µé¢ä»£ç <code>/static/form/form_layouts.html</code></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">role</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">th:action</span>=<span class="hljs-string">&quot;@&#123;/upload&#125;&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;exampleInputEmail1&quot;</span>&gt;</span>é‚®ç®±<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;email&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;exampleInputEmail1&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter email&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;exampleInputPassword1&quot;</span>&gt;</span>åå­—<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-control&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;exampleInputPassword1&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Password&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;exampleInputFile&quot;</span>&gt;</span>å¤´åƒ<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;headerImg&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;exampleInputFile&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form-group&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">&quot;exampleInputFile&quot;</span>&gt;</span>ç”Ÿæ´»ç…§<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;photos&quot;</span> <span class="hljs-attr">multiple</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;checkbox&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;checkbox&quot;</span>&gt;</span> Check me out<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-primary&quot;</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>æ§åˆ¶å±‚ä»£ç </li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FormTestController</span> &#123;<br><br>    <span class="hljs-meta">@GetMapping(&quot;/form_layouts&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">form_layouts</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;form/form_layouts&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@PostMapping(&quot;/upload&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">upload</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(&quot;email&quot;)</span> String email,</span><br><span class="hljs-params">                         <span class="hljs-meta">@RequestParam(&quot;username&quot;)</span> String username,</span><br><span class="hljs-params">                         <span class="hljs-meta">@RequestPart(&quot;headerImg&quot;)</span> MultipartFile headerImg,</span><br><span class="hljs-params">                         <span class="hljs-meta">@RequestPart(&quot;photos&quot;)</span> MultipartFile[] photos)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br><br>        log.info(<span class="hljs-string">&quot;ä¸Šä¼ çš„ä¿¡æ¯ï¼šemail=&#123;&#125;ï¼Œusername=&#123;&#125;ï¼ŒheaderImg=&#123;&#125;ï¼Œphotos=&#123;&#125;&quot;</span>,<br>                 email,username,headerImg.getSize(),photos.length);<br><br>        <span class="hljs-keyword">if</span>(!headerImg.isEmpty())&#123;<br>            <span class="hljs-comment">//ä¿å­˜åˆ°æ–‡ä»¶æœåŠ¡å™¨ï¼ŒOSSæœåŠ¡å™¨</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">originalFilename</span> <span class="hljs-operator">=</span> headerImg.getOriginalFilename();<br>            headerImg.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;H:\\cache\\&quot;</span>+originalFilename));<br>        &#125;<br><br>        <span class="hljs-keyword">if</span>(photos.length &gt; <span class="hljs-number">0</span>)&#123;<br>            <span class="hljs-keyword">for</span> (MultipartFile photo : photos) &#123;<br>                <span class="hljs-keyword">if</span>(!photo.isEmpty())&#123;<br>                    <span class="hljs-type">String</span> <span class="hljs-variable">originalFilename</span> <span class="hljs-operator">=</span> photo.getOriginalFilename();<br>                    photo.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;H:\\cache\\&quot;</span>+originalFilename));<br>                &#125;<br>            &#125;<br>        &#125;<br><br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;main&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„é…ç½®ç±»ï¼š</p><ul><li><code>org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration</code></li><li><code>org.springframework.boot.autoconfigure.web.servlet.MultipartProperties</code></li></ul><p>æ–‡ä»¶å¤§å°ç›¸å…³é…ç½®é¡¹ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.servlet.multipart.max-file-size</span>=<span class="hljs-string">10MB</span><br><span class="hljs-attr">spring.servlet.multipart.max-request-size</span>=<span class="hljs-string">100MB</span><br></code></pre></td></tr></table></figure><h2 id="51ã€æ–‡ä»¶ä¸Šä¼ -ã€æºç æµç¨‹ã€‘æ–‡ä»¶ä¸Šä¼ å‚æ•°è§£æå™¨"><a href="#51ã€æ–‡ä»¶ä¸Šä¼ -ã€æºç æµç¨‹ã€‘æ–‡ä»¶ä¸Šä¼ å‚æ•°è§£æå™¨" class="headerlink" title="51ã€æ–‡ä»¶ä¸Šä¼ -ã€æºç æµç¨‹ã€‘æ–‡ä»¶ä¸Šä¼ å‚æ•°è§£æå™¨"></a>51ã€æ–‡ä»¶ä¸Šä¼ -ã€æºç æµç¨‹ã€‘æ–‡ä»¶ä¸Šä¼ å‚æ•°è§£æå™¨</h2><p>æ–‡ä»¶ä¸Šä¼ ç›¸å…³çš„è‡ªåŠ¨é…ç½®ç±»<code>MultipartAutoConfiguration</code>æœ‰åˆ›å»ºæ–‡ä»¶ä¸Šä¼ å‚æ•°è§£æå™¨<code>StandardServletMultipartResolver</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; Servlet.class, StandardServletMultipartResolver.class, MultipartConfigElement.class &#125;)</span><br><span class="hljs-meta">@ConditionalOnProperty(prefix = &quot;spring.servlet.multipart&quot;, name = &quot;enabled&quot;, matchIfMissing = true)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@EnableConfigurationProperties(MultipartProperties.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultipartAutoConfiguration</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MultipartProperties multipartProperties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">MultipartAutoConfiguration</span><span class="hljs-params">(MultipartProperties multipartProperties)</span> &#123;<br><span class="hljs-built_in">this</span>.multipartProperties = multipartProperties;<br>&#125;<br><br><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnMissingBean(&#123; MultipartConfigElement.class, CommonsMultipartResolver.class &#125;)</span><br><span class="hljs-keyword">public</span> MultipartConfigElement <span class="hljs-title function_">multipartConfigElement</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.multipartProperties.createMultipartConfig();<br>&#125;<br><br><span class="hljs-meta">@Bean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(MultipartResolver.class)</span><br><span class="hljs-keyword">public</span> StandardServletMultipartResolver <span class="hljs-title function_">multipartResolver</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//é…ç½®å¥½æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span><br><span class="hljs-type">StandardServletMultipartResolver</span> <span class="hljs-variable">multipartResolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardServletMultipartResolver</span>();<br>multipartResolver.setResolveLazily(<span class="hljs-built_in">this</span>.multipartProperties.isResolveLazily());<br><span class="hljs-keyword">return</span> multipartResolver;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//æ–‡ä»¶ä¸Šä¼ è§£æå™¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StandardServletMultipartResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MultipartResolver</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">resolveLazily</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setResolveLazily</span><span class="hljs-params">(<span class="hljs-type">boolean</span> resolveLazily)</span> &#123;<br><span class="hljs-built_in">this</span>.resolveLazily = resolveLazily;<br>&#125;<br><br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isMultipart</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br><span class="hljs-keyword">return</span> StringUtils.startsWithIgnoreCase(request.getContentType(), <span class="hljs-string">&quot;multipart/&quot;</span>);<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> MultipartHttpServletRequest <span class="hljs-title function_">resolveMultipart</span><span class="hljs-params">(HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> MultipartException &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardMultipartHttpServletRequest</span>(request, <span class="hljs-built_in">this</span>.resolveLazily);<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanupMultipart</span><span class="hljs-params">(MultipartHttpServletRequest request)</span> &#123;<br><span class="hljs-keyword">if</span> (!(request <span class="hljs-keyword">instanceof</span> AbstractMultipartHttpServletRequest) ||<br>((AbstractMultipartHttpServletRequest) request).isResolved()) &#123;<br><span class="hljs-comment">// To be on the safe side: explicitly delete the parts,</span><br><span class="hljs-comment">// but only actual file parts (for Resin compatibility)</span><br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">for</span> (Part part : request.getParts()) &#123;<br><span class="hljs-keyword">if</span> (request.getFile(part.getName()) != <span class="hljs-literal">null</span>) &#123;<br>part.delete();<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable ex) &#123;<br>LogFactory.getLog(getClass()).warn(<span class="hljs-string">&quot;Failed to perform cleanup of multipart items&quot;</span>, ex);<br>&#125;<br>&#125;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    <br>    <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">private</span> MultipartResolver multipartResolver;<br>    <br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initMultipartResolver</span><span class="hljs-params">(ApplicationContext context)</span> &#123;<br>...<br>        <br>        <span class="hljs-comment">//è¿™ä¸ªå°±æ˜¯é…ç½®ç±»é…ç½®çš„StandardServletMultipartResolveræ–‡ä»¶ä¸Šä¼ è§£æå™¨</span><br><span class="hljs-built_in">this</span>.multipartResolver = context.getBean(MULTIPART_RESOLVER_BEAN_NAME, MultipartResolver.class);<br>...<br>&#125;<br>    <br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">processedRequest</span> <span class="hljs-operator">=</span> request;<br><span class="hljs-type">HandlerExecutionChain</span> <span class="hljs-variable">mappedHandler</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">boolean</span> <span class="hljs-variable">multipartRequestParsed</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<span class="hljs-comment">//æœ€åfinallyçš„å›æ”¶flag</span><br>...<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-type">ModelAndView</span> <span class="hljs-variable">mv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-type">Exception</span> <span class="hljs-variable">dispatchException</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br><span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//åšé¢„å¤„ç†,å¦‚æœæœ‰ä¸Šä¼ æ–‡ä»¶ å°±new StandardMultipartHttpServletRequeståŒ…è£…ç±»</span><br>processedRequest = checkMultipart(request);<br>multipartRequestParsed = (processedRequest != request);<br><span class="hljs-comment">// Determine handler for the current request.</span><br>mappedHandler = getHandler(processedRequest);<br><br>                ...<br><br><span class="hljs-comment">// Determine handler adapter for the current request.</span><br><span class="hljs-type">HandlerAdapter</span> <span class="hljs-variable">ha</span> <span class="hljs-operator">=</span> getHandlerAdapter(mappedHandler.getHandler());<br><br>...<br><br><span class="hljs-comment">// Actually invoke the handler.</span><br>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br>                <br>            &#125;<br>            ....<br>            <br><span class="hljs-keyword">finally</span> &#123;<br><br>            ...<br>            <br>            <span class="hljs-keyword">if</span> (multipartRequestParsed) &#123;<br>                cleanupMultipart(processedRequest);<br>            &#125;<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">protected</span> HttpServletRequest <span class="hljs-title function_">checkMultipart</span><span class="hljs-params">(HttpServletRequest request)</span> <span class="hljs-keyword">throws</span> MultipartException &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.multipartResolver != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">this</span>.multipartResolver.isMultipart(request)) &#123;<br>            ...<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.multipartResolver.resolveMultipart(request);<br>            ...<br>&#125;<br>    &#125;<br><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanupMultipart</span><span class="hljs-params">(HttpServletRequest request)</span> &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.multipartResolver != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-type">MultipartHttpServletRequest</span> <span class="hljs-variable">multipartRequest</span> <span class="hljs-operator">=</span><br>WebUtils.getNativeRequest(request, MultipartHttpServletRequest.class);<br><span class="hljs-keyword">if</span> (multipartRequest != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-built_in">this</span>.multipartResolver.cleanupMultipart(multipartRequest);<br>&#125;<br>&#125;<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</code>è·³åˆ°ä»¥ä¸‹çš„ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestMappingHandlerAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHandlerMethodAdapter</span><br><span class="hljs-keyword">implements</span> <span class="hljs-title class_">BeanFactoryAware</span>, InitializingBean &#123;<br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">handleInternal</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>ModelAndView mav;<br>...<br>mav = invokeHandlerMethod(request, response, handlerMethod);<br>        ...<br><span class="hljs-keyword">return</span> mav;<br>&#125;<br>    <br>    <span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">invokeHandlerMethod</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">HttpServletResponse response, HandlerMethod handlerMethod)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">ServletWebRequest</span> <span class="hljs-variable">webRequest</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletWebRequest</span>(request, response);<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-type">WebDataBinderFactory</span> <span class="hljs-variable">binderFactory</span> <span class="hljs-operator">=</span> getDataBinderFactory(handlerMethod);<br><span class="hljs-type">ModelFactory</span> <span class="hljs-variable">modelFactory</span> <span class="hljs-operator">=</span> getModelFactory(handlerMethod, binderFactory);<br><br><span class="hljs-type">ServletInvocableHandlerMethod</span> <span class="hljs-variable">invocableMethod</span> <span class="hljs-operator">=</span> createInvocableHandlerMethod(handlerMethod);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.argumentResolvers != <span class="hljs-literal">null</span>) &#123;<span class="hljs-comment">//å…³æ³¨ç‚¹</span><br>invocableMethod.setHandlerMethodArgumentResolvers(<span class="hljs-built_in">this</span>.argumentResolvers);<br>&#125;<br>...<br>invocableMethod.invokeAndHandle(webRequest, mavContainer);<br>...<br><br><span class="hljs-keyword">return</span> getModelAndView(mavContainer, modelFactory, webRequest);<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>webRequest.requestCompleted();<br>&#125;<br>&#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>this.argumentResolvers</code>å…¶ä¸­ä¸»è§’ç±»<code>RequestPartMethodArgumentResolver</code>ç”¨æ¥ç”Ÿæˆ</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServletInvocableHandlerMethod</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InvocableHandlerMethod</span> &#123;<br>    <br>    ...<br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invokeAndHandle</span><span class="hljs-params">(ServletWebRequest webRequest, ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">Object... providedArgs)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">Object</span> <span class="hljs-variable">returnValue</span> <span class="hljs-operator">=</span> invokeForRequest(webRequest, mavContainer, providedArgs);<br>...<br>&#125;<br>    <br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invokeForRequest</span><span class="hljs-params">(NativeWebRequest request, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">Object... providedArgs)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>Object[] args = getMethodArgumentValues(request, mavContainer, providedArgs);<br>...<br><span class="hljs-keyword">return</span> doInvoke(args);<span class="hljs-comment">//åå°„è°ƒç”¨</span><br>&#125;<br>    <br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">doInvoke</span><span class="hljs-params">(Object... args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> getBridgedMethod();<br>ReflectionUtils.makeAccessible(method);<br><span class="hljs-keyword">return</span> method.invoke(getBean(), args);<br>...<br>&#125;<br>    <br>    <span class="hljs-comment">//å¤„ç†å¾—å‡ºmultipartå‚æ•°ï¼Œå‡†å¤‡ç¨åçš„åå°„è°ƒç”¨ï¼ˆ@PostMappingæ ‡è®°çš„ä¸Šä¼ æ–¹æ³•ï¼‰</span><br>    <span class="hljs-keyword">protected</span> Object[] getMethodArgumentValues(NativeWebRequest request, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,<br>Object... providedArgs) <span class="hljs-keyword">throws</span> Exception &#123;<br><br>MethodParameter[] parameters = getMethodParameters();<br>...<br>Object[] args = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[parameters.length];<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; parameters.length; i++) &#123;<br><span class="hljs-type">MethodParameter</span> <span class="hljs-variable">parameter</span> <span class="hljs-operator">=</span> parameters[i];<br>parameter.initParameterNameDiscovery(<span class="hljs-built_in">this</span>.parameterNameDiscoverer);<br>args[i] = findProvidedArgument(parameter, providedArgs);<br><span class="hljs-keyword">if</span> (args[i] != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">continue</span>;<br>&#125;<br>            <span class="hljs-comment">//å…³æ³¨ç‚¹1</span><br><span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.resolvers.supportsParameter(parameter)) &#123;<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(formatArgumentError(parameter, <span class="hljs-string">&quot;No suitable resolver&quot;</span>));<br>&#125;<br><span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">//å…³æ³¨ç‚¹2</span><br>args[i] = <span class="hljs-built_in">this</span>.resolvers.resolveArgument(parameter, mavContainer, request, <span class="hljs-built_in">this</span>.dataBinderFactory);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>...<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> args;<br>&#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RequestPartMethodArgumentResolver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractMessageConverterMethodArgumentResolver</span> &#123;<br><br>    <span class="hljs-comment">//å¯¹åº”ä¸Šé¢ä»£ç å…³æ³¨ç‚¹1</span><br>    <span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsParameter</span><span class="hljs-params">(MethodParameter parameter)</span> &#123;<br>        <span class="hljs-comment">//æ ‡æ³¨@RequestPartçš„å‚æ•°</span><br><span class="hljs-keyword">if</span> (parameter.hasParameterAnnotation(RequestPart.class)) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">if</span> (parameter.hasParameterAnnotation(RequestParam.class)) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br><span class="hljs-keyword">return</span> MultipartResolutionDelegate.isMultipartArgument(parameter.nestedIfOptional());<br>&#125;<br>&#125;<br><br>    <span class="hljs-comment">//å¯¹åº”ä¸Šé¢ä»£ç å…³æ³¨ç‚¹2</span><br><span class="hljs-meta">@Override</span><br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> Object <span class="hljs-title function_">resolveArgument</span><span class="hljs-params">(MethodParameter parameter, <span class="hljs-meta">@Nullable</span> ModelAndViewContainer mavContainer,</span><br><span class="hljs-params">NativeWebRequest request, <span class="hljs-meta">@Nullable</span> WebDataBinderFactory binderFactory)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">HttpServletRequest</span> <span class="hljs-variable">servletRequest</span> <span class="hljs-operator">=</span> request.getNativeRequest(HttpServletRequest.class);<br>Assert.state(servletRequest != <span class="hljs-literal">null</span>, <span class="hljs-string">&quot;No HttpServletRequest&quot;</span>);<br><br><span class="hljs-type">RequestPart</span> <span class="hljs-variable">requestPart</span> <span class="hljs-operator">=</span> parameter.getParameterAnnotation(RequestPart.class);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">isRequired</span> <span class="hljs-operator">=</span> ((requestPart == <span class="hljs-literal">null</span> || requestPart.required()) &amp;&amp; !parameter.isOptional());<br><br><span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> getPartName(parameter, requestPart);<br>parameter = parameter.nestedIfOptional();<br><span class="hljs-type">Object</span> <span class="hljs-variable">arg</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//å°è£…æˆMultipartFileç±»å‹çš„å¯¹è±¡ä½œå‚æ•°</span><br><span class="hljs-type">Object</span> <span class="hljs-variable">mpArg</span> <span class="hljs-operator">=</span> MultipartResolutionDelegate.resolveMultipartArgument(name, parameter, servletRequest);<br><span class="hljs-keyword">if</span> (mpArg != MultipartResolutionDelegate.UNRESOLVABLE) &#123;<br>arg = mpArg;<br>&#125;<br>        <br>        ...<br><br><span class="hljs-keyword">return</span> adaptArgumentIfNecessary(arg, parameter);<br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MultipartResolutionDelegate</span> &#123;<br>    ...<br>    <br><span class="hljs-meta">@Nullable</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">resolveMultipartArgument</span><span class="hljs-params">(String name, MethodParameter parameter, HttpServletRequest request)</span><br><span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">MultipartHttpServletRequest</span> <span class="hljs-variable">multipartRequest</span> <span class="hljs-operator">=</span><br>WebUtils.getNativeRequest(request, MultipartHttpServletRequest.class);<br><span class="hljs-type">boolean</span> <span class="hljs-variable">isMultipart</span> <span class="hljs-operator">=</span> (multipartRequest != <span class="hljs-literal">null</span> || isMultipartContent(request));<br><br><span class="hljs-keyword">if</span> (MultipartFile.class == parameter.getNestedParameterType()) &#123;<br><span class="hljs-keyword">if</span> (!isMultipart) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (multipartRequest == <span class="hljs-literal">null</span>) &#123;<br>multipartRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardMultipartHttpServletRequest</span>(request);<br>&#125;<br><span class="hljs-keyword">return</span> multipartRequest.getFile(name);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isMultipartFileCollection(parameter)) &#123;<br><span class="hljs-keyword">if</span> (!isMultipart) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (multipartRequest == <span class="hljs-literal">null</span>) &#123;<br>multipartRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardMultipartHttpServletRequest</span>(request);<br>&#125;<br>List&lt;MultipartFile&gt; files = multipartRequest.getFiles(name);<br><span class="hljs-keyword">return</span> (!files.isEmpty() ? files : <span class="hljs-literal">null</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isMultipartFileArray(parameter)) &#123;<br><span class="hljs-keyword">if</span> (!isMultipart) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><span class="hljs-keyword">if</span> (multipartRequest == <span class="hljs-literal">null</span>) &#123;<br>multipartRequest = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardMultipartHttpServletRequest</span>(request);<br>&#125;<br>List&lt;MultipartFile&gt; files = multipartRequest.getFiles(name);<br><span class="hljs-keyword">return</span> (!files.isEmpty() ? files.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MultipartFile</span>[<span class="hljs-number">0</span>]) : <span class="hljs-literal">null</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Part.class == parameter.getNestedParameterType()) &#123;<br><span class="hljs-keyword">if</span> (!isMultipart) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br><span class="hljs-keyword">return</span> request.getPart(name);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isPartCollection(parameter)) &#123;<br><span class="hljs-keyword">if</span> (!isMultipart) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br>List&lt;Part&gt; parts = resolvePartList(request, name);<br><span class="hljs-keyword">return</span> (!parts.isEmpty() ? parts : <span class="hljs-literal">null</span>);<br>&#125;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (isPartArray(parameter)) &#123;<br><span class="hljs-keyword">if</span> (!isMultipart) &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br>List&lt;Part&gt; parts = resolvePartList(request, name);<br><span class="hljs-keyword">return</span> (!parts.isEmpty() ? parts.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Part</span>[<span class="hljs-number">0</span>]) : <span class="hljs-literal">null</span>);<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-keyword">return</span> UNRESOLVABLE;<br>&#125;<br>&#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="52ã€é”™è¯¯å¤„ç†-SpringBooté»˜è®¤é”™è¯¯å¤„ç†æœºåˆ¶"><a href="#52ã€é”™è¯¯å¤„ç†-SpringBooté»˜è®¤é”™è¯¯å¤„ç†æœºåˆ¶" class="headerlink" title="52ã€é”™è¯¯å¤„ç†-SpringBooté»˜è®¤é”™è¯¯å¤„ç†æœºåˆ¶"></a>52ã€é”™è¯¯å¤„ç†-SpringBooté»˜è®¤é”™è¯¯å¤„ç†æœºåˆ¶</h2><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#boot-features-error-handling">Spring Bootå®˜æ–¹æ–‡æ¡£ - Error Handling</a></p><p><strong>é»˜è®¤è§„åˆ™</strong>ï¼š</p><ul><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring Bootæä¾›<code>/error</code>å¤„ç†æ‰€æœ‰é”™è¯¯çš„æ˜ å°„</p></li><li><p>æœºå™¨å®¢æˆ·ç«¯ï¼Œå®ƒå°†ç”ŸæˆJSONå“åº”ï¼Œå…¶ä¸­åŒ…å«é”™è¯¯ï¼ŒHTTPçŠ¶æ€å’Œå¼‚å¸¸æ¶ˆæ¯çš„è¯¦ç»†ä¿¡æ¯ã€‚å¯¹äºæµè§ˆå™¨å®¢æˆ·ç«¯ï¼Œå“åº”ä¸€ä¸ªâ€œ whitelabelâ€é”™è¯¯è§†å›¾ï¼Œä»¥HTMLæ ¼å¼å‘ˆç°ç›¸åŒçš„æ•°æ®</p></li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;timestamp&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;2020-11-22T05:53:28.416+00:00&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;status&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">404</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;error&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Not Found&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;message&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;No message available&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;/asadada&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><ul><li><p>è¦å¯¹å…¶è¿›è¡Œè‡ªå®šä¹‰ï¼Œæ·»åŠ <code>View</code>è§£æä¸º<code>error</code></p></li><li><p>è¦å®Œå…¨æ›¿æ¢é»˜è®¤è¡Œä¸ºï¼Œå¯ä»¥å®ç° <code>ErrorController </code>å¹¶æ³¨å†Œè¯¥ç±»å‹çš„Beanå®šä¹‰ï¼Œæˆ–æ·»åŠ <code>ErrorAttributesç±»å‹çš„ç»„ä»¶</code>ä»¥ä½¿ç”¨ç°æœ‰æœºåˆ¶ä½†æ›¿æ¢å…¶å†…å®¹ã€‚</p></li><li><p><code>/templates/error/</code>ä¸‹çš„4xxï¼Œ5xxé¡µé¢ä¼šè¢«è‡ªåŠ¨è§£æ</p></li></ul><h2 id="53ã€é”™è¯¯å¤„ç†-ã€æºç åˆ†æã€‘åº•å±‚ç»„ä»¶åŠŸèƒ½åˆ†æ"><a href="#53ã€é”™è¯¯å¤„ç†-ã€æºç åˆ†æã€‘åº•å±‚ç»„ä»¶åŠŸèƒ½åˆ†æ" class="headerlink" title="53ã€é”™è¯¯å¤„ç†-ã€æºç åˆ†æã€‘åº•å±‚ç»„ä»¶åŠŸèƒ½åˆ†æ"></a>53ã€é”™è¯¯å¤„ç†-ã€æºç åˆ†æã€‘åº•å±‚ç»„ä»¶åŠŸèƒ½åˆ†æ</h2><ul><li><code>ErrorMvcAutoConfiguration</code>  è‡ªåŠ¨é…ç½®å¼‚å¸¸å¤„ç†è§„åˆ™</li><li><strong>å®¹å™¨ä¸­çš„ç»„ä»¶</strong>ï¼šç±»å‹ï¼š<code>DefaultErrorAttributes</code> -&gt; idï¼š<code>errorAttributes</code></li><li><code>public class DefaultErrorAttributes implements ErrorAttributes, HandlerExceptionResolver</code><ul><li><code>DefaultErrorAttributes</code>ï¼šå®šä¹‰é”™è¯¯é¡µé¢ä¸­å¯ä»¥åŒ…å«æ•°æ®ï¼ˆå¼‚å¸¸æ˜ç»†ï¼Œå †æ ˆä¿¡æ¯ç­‰ï¼‰ã€‚</li></ul></li><li><strong>å®¹å™¨ä¸­çš„ç»„ä»¶</strong>ï¼šç±»å‹ï¼š<code>BasicErrorController</code> â€“&gt; idï¼š<code>basicErrorController</code>ï¼ˆjson+ç™½é¡µ é€‚é…å“åº”ï¼‰</li><li><strong>å¤„ç†é»˜è®¤ <code>/error</code> è·¯å¾„çš„è¯·æ±‚</strong>ï¼Œé¡µé¢å“åº” <code>new ModelAndView(&quot;error&quot;, model);</code><ul><li>å®¹å™¨ä¸­æœ‰ç»„ä»¶ <code>View</code>-&gt;idæ˜¯errorï¼›ï¼ˆå“åº”é»˜è®¤é”™è¯¯é¡µï¼‰</li><li>å®¹å™¨ä¸­æ”¾ç»„ä»¶ <code>BeanNameViewResolver</code>ï¼ˆè§†å›¾è§£æå™¨ï¼‰ï¼›æŒ‰ç…§è¿”å›çš„è§†å›¾åä½œä¸ºç»„ä»¶çš„idå»å®¹å™¨ä¸­æ‰¾<code>View</code>å¯¹è±¡ã€‚</li></ul></li><li><strong>å®¹å™¨ä¸­çš„ç»„ä»¶</strong>ï¼šç±»å‹ï¼š<code>DefaultErrorViewResolver</code> -&gt; idï¼š<code>conventionErrorViewResolver</code></li><li><strong>å¦‚æœå‘ç”Ÿå¼‚å¸¸é”™è¯¯ï¼Œä¼šä»¥HTTPçš„çŠ¶æ€ç  ä½œä¸ºè§†å›¾é¡µåœ°å€ï¼ˆviewNameï¼‰ï¼Œæ‰¾åˆ°çœŸæ­£çš„é¡µé¢</strong>ï¼ˆä¸»è¦ä½œç”¨ï¼‰ã€‚<ul><li>error&#x2F;404ã€5xx.html</li><li>å¦‚æœæƒ³è¦è¿”å›é¡µé¢ï¼Œå°±ä¼šæ‰¾errorè§†å›¾ï¼ˆ<code>StaticView</code>é»˜è®¤æ˜¯ä¸€ä¸ªç™½é¡µï¼‰ã€‚</li></ul></li></ul><h2 id="54ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å¼‚å¸¸å¤„ç†æµç¨‹"><a href="#54ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å¼‚å¸¸å¤„ç†æµç¨‹" class="headerlink" title="54ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å¼‚å¸¸å¤„ç†æµç¨‹"></a>54ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å¼‚å¸¸å¤„ç†æµç¨‹</h2><p>è­¬å¦‚å†™ä¸€ä¸ªä¼šæŠ›å‡ºå¼‚å¸¸çš„æ§åˆ¶å±‚ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@RestController</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloController</span> &#123;<br><br>    <span class="hljs-meta">@RequestMapping(&quot;/hello&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handle01</span><span class="hljs-params">()</span>&#123;<br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span> / <span class="hljs-number">0</span>;<span class="hljs-comment">//å°†ä¼šæŠ›å‡ºArithmeticException</span><br><br>        log.info(<span class="hljs-string">&quot;Hello, Spring Boot 2!&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Hello, Spring Boot 2!&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>å½“æµè§ˆå™¨å‘å‡º<code>/hello</code>è¯·æ±‚ï¼Œ<code>DispatcherServlet</code>çš„<code>doDispatch()</code>çš„<code>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());</code>å°†ä¼šæŠ›å‡º<code>ArithmeticException</code>ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">FrameworkServlet</span> &#123;<br>    ...<br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>...<br><span class="hljs-comment">// Actually invoke the handler.</span><br>            <span class="hljs-comment">//å°†ä¼šæŠ›å‡ºArithmeticException</span><br>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br><br>applyDefaultViewName(processedRequest, mv);<br>mappedHandler.applyPostHandle(processedRequest, response, mv);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>                <span class="hljs-comment">//å°†ä¼šæ•æ‰ArithmeticException</span><br>dispatchException = ex;<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable err) &#123;<br>...<br>&#125;<br>    <span class="hljs-comment">//æ•æ‰åï¼Œç»§ç»­è¿è¡Œ</span><br>processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>triggerAfterCompletion(processedRequest, response, mappedHandler, ex);<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable err) &#123;<br>triggerAfterCompletion(processedRequest, response, mappedHandler,<br><span class="hljs-keyword">new</span> <span class="hljs-title class_">NestedServletException</span>(<span class="hljs-string">&quot;Handler processing failed&quot;</span>, err));<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>...<br>&#125;<br>&#125;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="hljs-meta">@Nullable</span> ModelAndView mv,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> Exception exception)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-type">boolean</span> <span class="hljs-variable">errorView</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br><br><span class="hljs-keyword">if</span> (exception != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">if</span> (exception <span class="hljs-keyword">instanceof</span> ModelAndViewDefiningException) &#123;<br>...<br>&#125;<br><span class="hljs-keyword">else</span> &#123;<br><span class="hljs-type">Object</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> (mappedHandler != <span class="hljs-literal">null</span> ? mappedHandler.getHandler() : <span class="hljs-literal">null</span>);<br><span class="hljs-comment">//ArithmeticExceptionå°†åœ¨è¿™å¤„ç†</span><br>                mv = processHandlerException(request, response, handler, exception);<br>errorView = (mv != <span class="hljs-literal">null</span>);<br>&#125;<br>&#125;<br>...<br>&#125;<br><br><span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">processHandlerException</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> Object handler, Exception ex)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br><span class="hljs-comment">// Success and error responses may use different content types</span><br>request.removeAttribute(HandlerMapping.PRODUCIBLE_MEDIA_TYPES_ATTRIBUTE);<br><br><span class="hljs-comment">// Check registered HandlerExceptionResolvers...</span><br><span class="hljs-type">ModelAndView</span> <span class="hljs-variable">exMv</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.handlerExceptionResolvers != <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-comment">//éå†æ‰€æœ‰çš„ handlerExceptionResolversï¼Œçœ‹è°èƒ½å¤„ç†å½“å‰å¼‚å¸¸HandlerExceptionResolverå¤„ç†å™¨å¼‚å¸¸è§£æå™¨</span><br><span class="hljs-keyword">for</span> (HandlerExceptionResolver resolver : <span class="hljs-built_in">this</span>.handlerExceptionResolvers) &#123;<br>exMv = resolver.resolveException(request, response, handler, ex);<br><span class="hljs-keyword">if</span> (exMv != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br>&#125;<br>...<br><br>        <span class="hljs-comment">//è‹¥åªæœ‰ç³»ç»Ÿçš„è‡ªå¸¦çš„å¼‚å¸¸è§£æå™¨ï¼ˆæ²¡æœ‰è‡ªå®šä¹‰çš„ï¼‰ï¼Œå¼‚å¸¸è¿˜æ˜¯ä¼šæŠ›å‡º</span><br><span class="hljs-keyword">throw</span> ex;<br>&#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>ç³»ç»Ÿè‡ªå¸¦çš„<strong>å¼‚å¸¸è§£æå™¨</strong>ï¼š</p><p><img src="https://typora-xyy.oss-cn-nanjing.aliyuncs.com/imgs/202207211315638.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><ul><li><code>DefaultErrorAttributes</code>å…ˆæ¥å¤„ç†å¼‚å¸¸ï¼Œå®ƒä¸»è¦åŠŸèƒ½æŠŠå¼‚å¸¸ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸï¼Œå¹¶ä¸”è¿”å›nullã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultErrorAttributes</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ErrorAttributes</span>, HandlerExceptionResolver, Ordered &#123;<br>    ...<br>    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">resolveException</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> &#123;<br>        <span class="hljs-built_in">this</span>.storeErrorAttributes(request, ex);<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">storeErrorAttributes</span><span class="hljs-params">(HttpServletRequest request, Exception ex)</span> &#123;<br>        request.setAttribute(ERROR_ATTRIBUTE, ex);<span class="hljs-comment">//æŠŠå¼‚å¸¸ä¿¡æ¯ä¿å­˜åˆ°requeståŸŸ</span><br>    &#125;<br>    ...<br>    <br>&#125;    <br></code></pre></td></tr></table></figure><ul><li><p>é»˜è®¤æ²¡æœ‰ä»»ä½•è§£æå™¨ï¼ˆä¸Šå›¾çš„<code>HandlerExceptionResolverComposite</code>ï¼‰èƒ½å¤„ç†å¼‚å¸¸ï¼Œæ‰€ä»¥æœ€åå¼‚å¸¸ä¼šè¢«æŠ›å‡ºã€‚</p></li><li><p>æœ€ç»ˆåº•å±‚å°±ä¼šè½¬å‘<code>/error</code> è¯·æ±‚ã€‚ä¼šè¢«åº•å±‚çš„<code>BasicErrorController</code>å¤„ç†ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicErrorController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractErrorController</span> &#123;<br><br>    <span class="hljs-meta">@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)</span><br>    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">errorHtml</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;<br>       <span class="hljs-type">HttpStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> getStatus(request);<br>       Map&lt;String, Object&gt; model = Collections<br>             .unmodifiableMap(getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.TEXT_HTML)));<br>       response.setStatus(status.value());<br>       <span class="hljs-type">ModelAndView</span> <span class="hljs-variable">modelAndView</span> <span class="hljs-operator">=</span> resolveErrorView(request, response, status, model);<br>       <span class="hljs-comment">//å¦‚æœ/template/errorå†…æ²¡æœ‰4**.htmlæˆ–5**.htmlï¼Œ</span><br>       <span class="hljs-comment">//modelAndViewä¸ºç©ºï¼Œæœ€ç»ˆè¿˜æ˜¯è¿”å›viewNameä¸ºerrorçš„modelAndView</span><br>       <span class="hljs-keyword">return</span> (modelAndView != <span class="hljs-literal">null</span>) ? modelAndView : <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndView</span>(<span class="hljs-string">&quot;error&quot;</span>, model);<br>    &#125;<br>    <br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>    <br>    ...<br>    <br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doDispatch</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        ...<br>     <span class="hljs-comment">// Actually invoke the handler.</span><br>mv = ha.handle(processedRequest, response, mappedHandler.getHandler());<br>...<br>        <span class="hljs-comment">//æ¸²æŸ“é¡µé¢</span><br>processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);<br>        ...<br>    &#125;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processDispatchResult</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> HandlerExecutionChain mappedHandler, <span class="hljs-meta">@Nullable</span> ModelAndView mv,</span><br><span class="hljs-params"><span class="hljs-meta">@Nullable</span> Exception exception)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br><br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">errorView</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>        ...<br><span class="hljs-comment">// Did the handler return a view to render?</span><br><span class="hljs-keyword">if</span> (mv != <span class="hljs-literal">null</span> &amp;&amp; !mv.wasCleared()) &#123;<br>render(mv, request, response);<br><span class="hljs-keyword">if</span> (errorView) &#123;<br>WebUtils.clearErrorRequestAttributes(request);<br>&#125;<br>&#125;<br>...<br>&#125;<br>    <br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">(ModelAndView mv, HttpServletRequest request, HttpServletResponse response)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>...<br><br>View view;<br><span class="hljs-type">String</span> <span class="hljs-variable">viewName</span> <span class="hljs-operator">=</span> mv.getViewName();<br><span class="hljs-keyword">if</span> (viewName != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-comment">// We need to resolve the view name.</span><br>            <span class="hljs-comment">//æ‰¾å‡ºåˆé€‚errorçš„Viewï¼Œå¦‚æœ/template/errorå†…æ²¡æœ‰4**.htmlæˆ–5**.htmlï¼Œ</span><br>            <span class="hljs-comment">//å°†ä¼šè¿”å›é»˜è®¤å¼‚å¸¸é¡µé¢ErrorMvcAutoConfiguration.StaticView</span><br>            <span class="hljs-comment">//è¿™é‡ŒæŒ‰éœ€æ·±ç©¶ä»£ç å§ï¼</span><br>view = resolveViewName(viewName, mv.getModelInternal(), locale, request);<br>...<br>&#125;<br>...<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">if</span> (mv.getStatus() != <span class="hljs-literal">null</span>) &#123;<br>response.setStatus(mv.getStatus().value());<br>&#125;<br>            <span class="hljs-comment">//çœ‹ä¸‹é¢ä»£ç å—çš„StaticViewçš„renderå—</span><br>view.render(mv.getModelInternal(), request, response);<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>...<br>&#125;<br>&#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class &#125;)</span><br><span class="hljs-comment">// Load before the main WebMvcAutoConfiguration so that the error View is available</span><br><span class="hljs-meta">@AutoConfigureBefore(WebMvcAutoConfiguration.class)</span><br><span class="hljs-meta">@EnableConfigurationProperties(&#123; ServerProperties.class, ResourceProperties.class, WebMvcProperties.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorMvcAutoConfiguration</span> &#123;<br>    <br>    ...<br>        <br>   <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnProperty(prefix = &quot;server.error.whitelabel&quot;, name = &quot;enabled&quot;, matchIfMissing = true)</span><br><span class="hljs-meta">@Conditional(ErrorTemplateMissingCondition.class)</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WhitelabelErrorViewConfiguration</span> &#123;<br><br>        <span class="hljs-comment">//å°†åˆ›å»ºä¸€ä¸ªåä¸ºerrorçš„ç³»ç»Ÿé»˜è®¤å¼‚å¸¸é¡µé¢Viewçš„Bean</span><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">StaticView</span> <span class="hljs-variable">defaultErrorView</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StaticView</span>();<br><br><span class="hljs-meta">@Bean(name = &quot;error&quot;)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(name = &quot;error&quot;)</span><br><span class="hljs-keyword">public</span> View <span class="hljs-title function_">defaultErrorView</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.defaultErrorView;<br>&#125;<br><br><span class="hljs-comment">// If the user adds @EnableWebMvc then the bean name view resolver from</span><br><span class="hljs-comment">// WebMvcAutoConfiguration disappears, so add it back in to avoid disappointment.</span><br><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnMissingBean</span><br><span class="hljs-keyword">public</span> BeanNameViewResolver <span class="hljs-title function_">beanNameViewResolver</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">BeanNameViewResolver</span> <span class="hljs-variable">resolver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanNameViewResolver</span>();<br>resolver.setOrder(Ordered.LOWEST_PRECEDENCE - <span class="hljs-number">10</span>);<br><span class="hljs-keyword">return</span> resolver;<br>&#125;<br><br>&#125;     <br>   <br>    <br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StaticView</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">View</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">MediaType</span> <span class="hljs-variable">TEXT_HTML_UTF8</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaType</span>(<span class="hljs-string">&quot;text&quot;</span>, <span class="hljs-string">&quot;html&quot;</span>, StandardCharsets.UTF_8);<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Log</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LogFactory.getLog(StaticView.class);<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">render</span><span class="hljs-params">(Map&lt;String, ?&gt; model, HttpServletRequest request, HttpServletResponse response)</span><br><span class="hljs-keyword">throws</span> Exception &#123;<br><span class="hljs-keyword">if</span> (response.isCommitted()) &#123;<br><span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> getMessage(model);<br>logger.error(message);<br><span class="hljs-keyword">return</span>;<br>&#125;<br>response.setContentType(TEXT_HTML_UTF8.toString());<br><span class="hljs-type">StringBuilder</span> <span class="hljs-variable">builder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br><span class="hljs-type">Object</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> model.get(<span class="hljs-string">&quot;timestamp&quot;</span>);<br><span class="hljs-type">Object</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> model.get(<span class="hljs-string">&quot;message&quot;</span>);<br><span class="hljs-type">Object</span> <span class="hljs-variable">trace</span> <span class="hljs-operator">=</span> model.get(<span class="hljs-string">&quot;trace&quot;</span>);<br><span class="hljs-keyword">if</span> (response.getContentType() == <span class="hljs-literal">null</span>) &#123;<br>response.setContentType(getContentType());<br>&#125;<br>            <span class="hljs-comment">//ç³»ç»Ÿé»˜è®¤å¼‚å¸¸é¡µé¢htmlä»£ç </span><br>builder.append(<span class="hljs-string">&quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Whitelabel Error Page&lt;/h1&gt;&quot;</span>).append(<br><span class="hljs-string">&quot;&lt;p&gt;This application has no explicit mapping for /error, so you are seeing this as a fallback.&lt;/p&gt;&quot;</span>)<br>.append(<span class="hljs-string">&quot;&lt;div id=&#x27;created&#x27;&gt;&quot;</span>).append(timestamp).append(<span class="hljs-string">&quot;&lt;/div&gt;&quot;</span>)<br>.append(<span class="hljs-string">&quot;&lt;div&gt;There was an unexpected error (type=&quot;</span>).append(htmlEscape(model.get(<span class="hljs-string">&quot;error&quot;</span>)))<br>.append(<span class="hljs-string">&quot;, status=&quot;</span>).append(htmlEscape(model.get(<span class="hljs-string">&quot;status&quot;</span>))).append(<span class="hljs-string">&quot;).&lt;/div&gt;&quot;</span>);<br><span class="hljs-keyword">if</span> (message != <span class="hljs-literal">null</span>) &#123;<br>builder.append(<span class="hljs-string">&quot;&lt;div&gt;&quot;</span>).append(htmlEscape(message)).append(<span class="hljs-string">&quot;&lt;/div&gt;&quot;</span>);<br>&#125;<br><span class="hljs-keyword">if</span> (trace != <span class="hljs-literal">null</span>) &#123;<br>builder.append(<span class="hljs-string">&quot;&lt;div style=&#x27;white-space:pre-wrap;&#x27;&gt;&quot;</span>).append(htmlEscape(trace)).append(<span class="hljs-string">&quot;&lt;/div&gt;&quot;</span>);<br>&#125;<br>builder.append(<span class="hljs-string">&quot;&lt;/body&gt;&lt;/html&gt;&quot;</span>);<br>response.getWriter().append(builder.toString());<br>&#125;<br><br><span class="hljs-keyword">private</span> String <span class="hljs-title function_">htmlEscape</span><span class="hljs-params">(Object input)</span> &#123;<br><span class="hljs-keyword">return</span> (input != <span class="hljs-literal">null</span>) ? HtmlUtils.htmlEscape(input.toString()) : <span class="hljs-literal">null</span>;<br>&#125;<br><br><span class="hljs-keyword">private</span> String <span class="hljs-title function_">getMessage</span><span class="hljs-params">(Map&lt;String, ?&gt; model)</span> &#123;<br><span class="hljs-type">Object</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> model.get(<span class="hljs-string">&quot;path&quot;</span>);<br><span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;Cannot render error page for request [&quot;</span> + path + <span class="hljs-string">&quot;]&quot;</span>;<br><span class="hljs-keyword">if</span> (model.get(<span class="hljs-string">&quot;message&quot;</span>) != <span class="hljs-literal">null</span>) &#123;<br>message += <span class="hljs-string">&quot; and exception [&quot;</span> + model.get(<span class="hljs-string">&quot;message&quot;</span>) + <span class="hljs-string">&quot;]&quot;</span>;<br>&#125;<br>message += <span class="hljs-string">&quot; as the response has already been committed.&quot;</span>;<br>message += <span class="hljs-string">&quot; As a result, the response may have the wrong status code.&quot;</span>;<br><span class="hljs-keyword">return</span> message;<br>&#125;<br><br><span class="hljs-meta">@Override</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">getContentType</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;text/html&quot;</span>;<br>&#125;<br><br>&#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="55ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å‡ ç§å¼‚å¸¸å¤„ç†åŸç†"><a href="#55ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å‡ ç§å¼‚å¸¸å¤„ç†åŸç†" class="headerlink" title="55ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å‡ ç§å¼‚å¸¸å¤„ç†åŸç†"></a>55ã€é”™è¯¯å¤„ç†-ã€æºç æµç¨‹ã€‘å‡ ç§å¼‚å¸¸å¤„ç†åŸç†</h2><ul><li><p>è‡ªå®šä¹‰é”™è¯¯é¡µ</p><ul><li>error&#x2F;404.html   error&#x2F;5xx.htmlï¼›æœ‰ç²¾ç¡®çš„é”™è¯¯çŠ¶æ€ç é¡µé¢å°±åŒ¹é…ç²¾ç¡®ï¼Œæ²¡æœ‰å°±æ‰¾ 4xx.htmlï¼›å¦‚æœéƒ½æ²¡æœ‰å°±è§¦å‘ç™½é¡µ</li></ul></li><li><p><code>@ControllerAdvice</code>+<code>@ExceptionHandler</code>å¤„ç†å…¨å±€å¼‚å¸¸ï¼›åº•å±‚æ˜¯ <code>ExceptionHandlerExceptionResolver</code> æ”¯æŒçš„</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@ControllerAdvice</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> &#123;<br><br>    <span class="hljs-meta">@ExceptionHandler(&#123;ArithmeticException.class,NullPointerException.class&#125;)</span>  <span class="hljs-comment">//å¤„ç†å¼‚å¸¸</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">handleArithException</span><span class="hljs-params">(Exception e)</span>&#123;<br><br>        log.error(<span class="hljs-string">&quot;å¼‚å¸¸æ˜¯ï¼š&#123;&#125;&quot;</span>,e);<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;login&quot;</span>; <span class="hljs-comment">//è§†å›¾åœ°å€</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>@ResponseStatus</code>+è‡ªå®šä¹‰å¼‚å¸¸ ï¼›åº•å±‚æ˜¯ <code>ResponseStatusExceptionResolver</code> ï¼ŒæŠŠresponseStatusæ³¨è§£çš„ä¿¡æ¯åº•å±‚è°ƒç”¨ <code>response.sendError(statusCode, resolvedReason)</code>ï¼Œtomcatå‘é€çš„<code>/error</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ResponseStatus(value= HttpStatus.FORBIDDEN,reason = &quot;ç”¨æˆ·æ•°é‡å¤ªå¤š&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserTooManyException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> &#123;<br><br>    <span class="hljs-keyword">public</span>  <span class="hljs-title function_">UserTooManyException</span><span class="hljs-params">()</span>&#123;<br><br>    &#125;<br>    <span class="hljs-keyword">public</span>  <span class="hljs-title function_">UserTooManyException</span><span class="hljs-params">(String message)</span>&#123;<br>        <span class="hljs-built_in">super</span>(message);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TableController</span> &#123;<br>    <br><span class="hljs-meta">@GetMapping(&quot;/dynamic_table&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">dynamic_table</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value=&quot;pn&quot;,defaultValue = &quot;1&quot;)</span> Integer pn,Model model)</span>&#123;<br>        <span class="hljs-comment">//è¡¨æ ¼å†…å®¹çš„éå†</span><br>     List&lt;User&gt; users = Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;zhangsan&quot;</span>, <span class="hljs-string">&quot;123456&quot;</span>),<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;lisi&quot;</span>, <span class="hljs-string">&quot;123444&quot;</span>),<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;haha&quot;</span>, <span class="hljs-string">&quot;aaaaa&quot;</span>),<br>                <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;hehe &quot;</span>, <span class="hljs-string">&quot;aaddd&quot;</span>));<br>        model.addAttribute(<span class="hljs-string">&quot;users&quot;</span>,users);<br><br>        <span class="hljs-keyword">if</span>(users.size()&gt;<span class="hljs-number">3</span>)&#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserTooManyException</span>();<span class="hljs-comment">//æŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸</span><br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;table/dynamic_table&quot;</span>;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><ul><li><p>Springè‡ªå®¶å¼‚å¸¸å¦‚ <code> org.springframework.web.bind.MissingServletRequestParameterException</code>ï¼Œ<code>DefaultHandlerExceptionResolver</code> å¤„ç†Springè‡ªå®¶å¼‚å¸¸ã€‚</p></li><li><ul><li><code>response.sendError(HttpServletResponse.SC_BAD_REQUEST/*400*/, ex.getMessage());</code></li></ul></li><li><p>è‡ªå®šä¹‰å®ç° <code>HandlerExceptionResolver</code> å¤„ç†å¼‚å¸¸ï¼›å¯ä»¥ä½œä¸ºé»˜è®¤çš„å…¨å±€å¼‚å¸¸å¤„ç†è§„åˆ™</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Order(value= Ordered.HIGHEST_PRECEDENCE)</span>  <span class="hljs-comment">//ä¼˜å…ˆçº§ï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerHandlerExceptionResolver</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerExceptionResolver</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">resolveException</span><span class="hljs-params">(HttpServletRequest request,</span><br><span class="hljs-params">                                         HttpServletResponse response,</span><br><span class="hljs-params">                                         Object handler, Exception ex)</span> &#123;<br><br>        <span class="hljs-keyword">try</span> &#123;<br>            response.sendError(<span class="hljs-number">511</span>,<span class="hljs-string">&quot;æˆ‘å–œæ¬¢çš„é”™è¯¯&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndView</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>ErrorViewResolver</code>  å®ç°è‡ªå®šä¹‰å¤„ç†å¼‚å¸¸<ul><li><code>response.sendError()</code>ï¼Œerrorè¯·æ±‚å°±ä¼šè½¬ç»™controllerã€‚</li><li>ä½ çš„å¼‚å¸¸æ²¡æœ‰ä»»ä½•äººèƒ½å¤„ç†ï¼Œtomcatåº•å±‚è°ƒç”¨<code>response.sendError()</code>ï¼Œerrorè¯·æ±‚å°±ä¼šè½¬ç»™controllerã€‚</li><li><code>basicErrorController</code> è¦å»çš„é¡µé¢åœ°å€æ˜¯ <code>ErrorViewResolver</code>  ã€‚</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-meta">@RequestMapping(&quot;$&#123;server.error.path:$&#123;error.path:/error&#125;&#125;&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BasicErrorController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractErrorController</span> &#123;<br><br>    ...<br>    <br><span class="hljs-meta">@RequestMapping(produces = MediaType.TEXT_HTML_VALUE)</span><br><span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title function_">errorHtml</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response)</span> &#123;<br><span class="hljs-type">HttpStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> getStatus(request);<br>Map&lt;String, Object&gt; model = Collections<br>.unmodifiableMap(getErrorAttributes(request, getErrorAttributeOptions(request, MediaType.TEXT_HTML)));<br>response.setStatus(status.value());<br><span class="hljs-type">ModelAndView</span> <span class="hljs-variable">modelAndView</span> <span class="hljs-operator">=</span> resolveErrorView(request, response, status, model);<br><span class="hljs-keyword">return</span> (modelAndView != <span class="hljs-literal">null</span>) ? modelAndView : <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelAndView</span>(<span class="hljs-string">&quot;error&quot;</span>, model);<br>&#125;<br>    <br>    <span class="hljs-keyword">protected</span> ModelAndView <span class="hljs-title function_">resolveErrorView</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, HttpStatus status,</span><br><span class="hljs-params">Map&lt;String, Object&gt; model)</span> &#123;<br>        <span class="hljs-comment">//è¿™é‡Œç”¨åˆ°ErrorViewResolveræ¥å£</span><br><span class="hljs-keyword">for</span> (ErrorViewResolver resolver : <span class="hljs-built_in">this</span>.errorViewResolvers) &#123;<br><span class="hljs-type">ModelAndView</span> <span class="hljs-variable">modelAndView</span> <span class="hljs-operator">=</span> resolver.resolveErrorView(request, status, model);<br><span class="hljs-keyword">if</span> (modelAndView != <span class="hljs-literal">null</span>) &#123;<br><span class="hljs-keyword">return</span> modelAndView;<br>&#125;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@FunctionalInterface</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ErrorViewResolver</span> &#123;<br><br>ModelAndView <span class="hljs-title function_">resolveErrorView</span><span class="hljs-params">(HttpServletRequest request, HttpStatus status, Map&lt;String, Object&gt; model)</span>;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="56ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-åŸç”Ÿæ³¨è§£ä¸Springæ–¹å¼æ³¨å…¥"><a href="#56ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-åŸç”Ÿæ³¨è§£ä¸Springæ–¹å¼æ³¨å…¥" class="headerlink" title="56ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-åŸç”Ÿæ³¨è§£ä¸Springæ–¹å¼æ³¨å…¥"></a>56ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-åŸç”Ÿæ³¨è§£ä¸Springæ–¹å¼æ³¨å…¥</h2><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#howto-add-a-servlet-filter-or-listener">å®˜æ–¹æ–‡æ¡£ - Servlets, Filters, and listeners</a></p><h3 id="ä½¿ç”¨åŸç”Ÿçš„æ³¨è§£"><a href="#ä½¿ç”¨åŸç”Ÿçš„æ³¨è§£" class="headerlink" title="ä½¿ç”¨åŸç”Ÿçš„æ³¨è§£"></a>ä½¿ç”¨åŸç”Ÿçš„æ³¨è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@WebServlet(urlPatterns = &quot;/my&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HttpServlet</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doGet</span><span class="hljs-params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="hljs-keyword">throws</span> ServletException, IOException &#123;<br>        resp.getWriter().write(<span class="hljs-string">&quot;66666&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@WebFilter(urlPatterns=&#123;&quot;/css/*&quot;,&quot;/images/*&quot;&#125;)</span> <span class="hljs-comment">//my</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Filter</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">(FilterConfig filterConfig)</span> <span class="hljs-keyword">throws</span> ServletException &#123;<br>        log.info(<span class="hljs-string">&quot;MyFilteråˆå§‹åŒ–å®Œæˆ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doFilter</span><span class="hljs-params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="hljs-keyword">throws</span> IOException, ServletException &#123;<br>        log.info(<span class="hljs-string">&quot;MyFilterå·¥ä½œ&quot;</span>);<br>        chain.doFilter(request,response);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">destroy</span><span class="hljs-params">()</span> &#123;<br>        log.info(<span class="hljs-string">&quot;MyFilteré”€æ¯&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@WebListener</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyServletContextListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ServletContextListener</span> &#123;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextInitialized</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;MySwervletContextListenerç›‘å¬åˆ°é¡¹ç›®åˆå§‹åŒ–å®Œæˆ&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextDestroyed</span><span class="hljs-params">(ServletContextEvent sce)</span> &#123;<br>        log.info(<span class="hljs-string">&quot;MySwervletContextListenerç›‘å¬åˆ°é¡¹ç›®é”€æ¯&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æœ€åè¿˜è¦åœ¨ä¸»å¯åŠ¨ç±»æ·»åŠ æ³¨è§£<code>@ServletComponentScan</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ServletComponentScan(basePackages = &quot;com.lun&quot;)</span><span class="hljs-comment">//</span><br><span class="hljs-meta">@SpringBootApplication(exclude = RedisAutoConfiguration.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Boot05WebAdminApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(Boot05WebAdminApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Springæ–¹å¼æ³¨å…¥"><a href="#Springæ–¹å¼æ³¨å…¥" class="headerlink" title="Springæ–¹å¼æ³¨å…¥"></a>Springæ–¹å¼æ³¨å…¥</h3><p><code>ServletRegistrationBean</code>, <code>FilterRegistrationBean</code>, and <code>ServletListenerRegistrationBean</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration(proxyBeanMethods = true)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyRegistConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title function_">myServlet</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">MyServlet</span> <span class="hljs-variable">myServlet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyServlet</span>();<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>(myServlet,<span class="hljs-string">&quot;/my&quot;</span>,<span class="hljs-string">&quot;/my02&quot;</span>);<br>    &#125;<br><br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title function_">myFilter</span><span class="hljs-params">()</span>&#123;<br><br>        <span class="hljs-type">MyFilter</span> <span class="hljs-variable">myFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyFilter</span>();<br><span class="hljs-comment">//        return new FilterRegistrationBean(myFilter,myServlet());</span><br>        <span class="hljs-type">FilterRegistrationBean</span> <span class="hljs-variable">filterRegistrationBean</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterRegistrationBean</span>(myFilter);<br>        filterRegistrationBean.setUrlPatterns(Arrays.asList(<span class="hljs-string">&quot;/my&quot;</span>,<span class="hljs-string">&quot;/css/*&quot;</span>));<br>        <span class="hljs-keyword">return</span> filterRegistrationBean;<br>    &#125;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletListenerRegistrationBean <span class="hljs-title function_">myListener</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">MySwervletContextListener</span> <span class="hljs-variable">mySwervletContextListener</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MySwervletContextListener</span>();<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletListenerRegistrationBean</span>(mySwervletContextListener);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="57ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-ã€æºç åˆ†æã€‘DispatcherServletæ³¨å…¥åŸç†"><a href="#57ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-ã€æºç åˆ†æã€‘DispatcherServletæ³¨å…¥åŸç†" class="headerlink" title="57ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-ã€æºç åˆ†æã€‘DispatcherServletæ³¨å…¥åŸç†"></a>57ã€åŸç”Ÿç»„ä»¶æ³¨å…¥-ã€æºç åˆ†æã€‘DispatcherServletæ³¨å…¥åŸç†</h2><p><code>org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration</code>é…ç½®ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)</span><br><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@ConditionalOnWebApplication(type = Type.SERVLET)</span><br><span class="hljs-meta">@ConditionalOnClass(DispatcherServlet.class)</span><br><span class="hljs-meta">@AutoConfigureAfter(ServletWebServerFactoryAutoConfiguration.class)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServletAutoConfiguration</span> &#123;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * The bean name for a DispatcherServlet that will be mapped to the root URL &quot;/&quot;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_DISPATCHER_SERVLET_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dispatcherServlet&quot;</span>;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * The bean name for a ServletRegistrationBean for the DispatcherServlet &quot;/&quot;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;dispatcherServletRegistration&quot;</span>;<br><br><span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@Conditional(DefaultDispatcherServletCondition.class)</span><br><span class="hljs-meta">@ConditionalOnClass(ServletRegistration.class)</span><br><span class="hljs-meta">@EnableConfigurationProperties(WebMvcProperties.class)</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServletConfiguration</span> &#123;<br><br>        <span class="hljs-comment">//åˆ›å»ºDispatcherServletç±»çš„Bean</span><br><span class="hljs-meta">@Bean(name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)</span><br><span class="hljs-keyword">public</span> DispatcherServlet <span class="hljs-title function_">dispatcherServlet</span><span class="hljs-params">(WebMvcProperties webMvcProperties)</span> &#123;<br><span class="hljs-type">DispatcherServlet</span> <span class="hljs-variable">dispatcherServlet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DispatcherServlet</span>();<br>dispatcherServlet.setDispatchOptionsRequest(webMvcProperties.isDispatchOptionsRequest());<br>dispatcherServlet.setDispatchTraceRequest(webMvcProperties.isDispatchTraceRequest());<br>dispatcherServlet.setThrowExceptionIfNoHandlerFound(webMvcProperties.isThrowExceptionIfNoHandlerFound());<br>dispatcherServlet.setPublishEvents(webMvcProperties.isPublishRequestHandledEvents());<br>dispatcherServlet.setEnableLoggingRequestDetails(webMvcProperties.isLogRequestDetails());<br><span class="hljs-keyword">return</span> dispatcherServlet;<br>&#125;<br><br><span class="hljs-meta">@Bean</span><br><span class="hljs-meta">@ConditionalOnBean(MultipartResolver.class)</span><br><span class="hljs-meta">@ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME)</span><br><span class="hljs-keyword">public</span> MultipartResolver <span class="hljs-title function_">multipartResolver</span><span class="hljs-params">(MultipartResolver resolver)</span> &#123;<br><span class="hljs-comment">// Detect if the user has created a MultipartResolver but named it incorrectly</span><br><span class="hljs-keyword">return</span> resolver;<br>&#125;<br><br>&#125;<br>    <br>    <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span><br><span class="hljs-meta">@Conditional(DispatcherServletRegistrationCondition.class)</span><br><span class="hljs-meta">@ConditionalOnClass(ServletRegistration.class)</span><br><span class="hljs-meta">@EnableConfigurationProperties(WebMvcProperties.class)</span><br><span class="hljs-meta">@Import(DispatcherServletConfiguration.class)</span><br><span class="hljs-keyword">protected</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DispatcherServletRegistrationConfiguration</span> &#123;<br><br>        <span class="hljs-comment">//æ³¨å†ŒDispatcherServletç±»</span><br><span class="hljs-meta">@Bean(name = DEFAULT_DISPATCHER_SERVLET_REGISTRATION_BEAN_NAME)</span><br><span class="hljs-meta">@ConditionalOnBean(value = DispatcherServlet.class, name = DEFAULT_DISPATCHER_SERVLET_BEAN_NAME)</span><br><span class="hljs-keyword">public</span> DispatcherServletRegistrationBean <span class="hljs-title function_">dispatcherServletRegistration</span><span class="hljs-params">(DispatcherServlet dispatcherServlet,</span><br><span class="hljs-params">WebMvcProperties webMvcProperties, ObjectProvider&lt;MultipartConfigElement&gt; multipartConfig)</span> &#123;<br><span class="hljs-type">DispatcherServletRegistrationBean</span> <span class="hljs-variable">registration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DispatcherServletRegistrationBean</span>(dispatcherServlet,<br>webMvcProperties.getServlet().getPath());<br>registration.setName(DEFAULT_DISPATCHER_SERVLET_BEAN_NAME);<br>registration.setLoadOnStartup(webMvcProperties.getServlet().getLoadOnStartup());<br>multipartConfig.ifAvailable(registration::setMultipartConfig);<br><span class="hljs-keyword">return</span> registration;<br>&#125;<br><br>&#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p><code>DispatcherServlet</code>é»˜è®¤æ˜ å°„çš„æ˜¯ <code>/</code> è·¯å¾„ï¼Œå¯ä»¥é€šè¿‡åœ¨é…ç½®æ–‡ä»¶ä¿®æ”¹<code>spring.mvc.servlet.path=/mvc</code>ã€‚</p><h2 id="58ã€åµŒå…¥å¼Servletå®¹å™¨-ã€æºç åˆ†æã€‘åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–"><a href="#58ã€åµŒå…¥å¼Servletå®¹å™¨-ã€æºç åˆ†æã€‘åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–" class="headerlink" title="58ã€åµŒå…¥å¼Servletå®¹å™¨-ã€æºç åˆ†æã€‘åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–"></a>58ã€åµŒå…¥å¼Servletå®¹å™¨-ã€æºç åˆ†æã€‘åˆ‡æ¢webæœåŠ¡å™¨ä¸å®šåˆ¶åŒ–</h2><ul><li><p>é»˜è®¤æ”¯æŒçš„WebServer</p><ul><li><code>Tomcat</code>, <code>Jetty</code>, or <code>Undertow</code>ã€‚</li><li><code>ServletWebServerApplicationContext </code>å®¹å™¨å¯åŠ¨å¯»æ‰¾<code>ServletWebServerFactory</code> å¹¶å¼•å¯¼åˆ›å»ºæœåŠ¡å™¨ã€‚</li></ul></li><li><p>åŸç†</p><ul><li>SpringBootåº”ç”¨å¯åŠ¨å‘ç°å½“å‰æ˜¯Webåº”ç”¨ï¼Œwebåœºæ™¯åŒ…-å¯¼å…¥tomcatã€‚</li><li>webåº”ç”¨ä¼šåˆ›å»ºä¸€ä¸ªwebç‰ˆçš„IOCå®¹å™¨ <code>ServletWebServerApplicationContext</code> ã€‚</li><li><code>ServletWebServerApplicationContext</code>  å¯åŠ¨çš„æ—¶å€™å¯»æ‰¾ <code>ServletWebServerFactory</code> ï¼ˆServlet çš„webæœåŠ¡å™¨å·¥å‚â€”â€”&gt;Servlet çš„webæœåŠ¡å™¨ï¼‰ã€‚</li><li>SpringBootåº•å±‚é»˜è®¤æœ‰å¾ˆå¤šçš„WebServerå·¥å‚ï¼ˆ<code>ServletWebServerFactoryConfiguration</code>å†…åˆ›å»ºBeanï¼‰ï¼Œå¦‚ï¼š<ul><li><code>TomcatServletWebServerFactory</code></li><li><code>JettyServletWebServerFactory</code></li><li><code>UndertowServletWebServerFactory</code></li></ul></li><li>åº•å±‚ç›´æ¥ä¼šæœ‰ä¸€ä¸ªè‡ªåŠ¨é…ç½®ç±»<code>ServletWebServerFactoryAutoConfiguration</code>ã€‚</li><li><code>ServletWebServerFactoryAutoConfiguration</code>å¯¼å…¥äº†<code>ServletWebServerFactoryConfiguration</code>ï¼ˆé…ç½®ç±»ï¼‰ã€‚</li><li><code>ServletWebServerFactoryConfiguration  </code>æ ¹æ®åŠ¨æ€åˆ¤æ–­ç³»ç»Ÿä¸­åˆ°åº•å¯¼å…¥äº†é‚£ä¸ªWebæœåŠ¡å™¨çš„åŒ…ã€‚ï¼ˆé»˜è®¤æ˜¯web-starterå¯¼å…¥tomcatåŒ…ï¼‰ï¼Œå®¹å™¨ä¸­å°±æœ‰ <code>TomcatServletWebServerFactory</code></li><li><code>TomcatServletWebServerFactory </code>åˆ›å»ºå‡ºTomcatæœåŠ¡å™¨å¹¶å¯åŠ¨ï¼›<code>TomcatWebServer</code> çš„æ„é€ å™¨æ‹¥æœ‰åˆå§‹åŒ–æ–¹æ³•initializeâ€”â€”<code>this.tomcat.start();</code></li><li>å†…åµŒæœåŠ¡å™¨ï¼Œä¸ä»¥å‰æ‰‹åŠ¨æŠŠå¯åŠ¨æœåŠ¡å™¨ç›¸æ¯”ï¼Œæ”¹æˆç°åœ¨ä½¿ç”¨ä»£ç å¯åŠ¨ï¼ˆtomcatæ ¸å¿ƒjaråŒ…å­˜åœ¨ï¼‰ã€‚</li></ul></li></ul><p>Spring Booté»˜è®¤ä½¿ç”¨TomcatæœåŠ¡å™¨ï¼Œè‹¥éœ€æ›´æ”¹å…¶ä»–æœåŠ¡å™¨ï¼Œåˆ™ä¿®æ”¹å·¥ç¨‹pom.xmlï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#howto-use-another-web-server">å®˜æ–¹æ–‡æ¡£ - Use Another Web Server</a></p><h3 id="å®šåˆ¶Servletå®¹å™¨"><a href="#å®šåˆ¶Servletå®¹å™¨" class="headerlink" title="å®šåˆ¶Servletå®¹å™¨"></a>å®šåˆ¶Servletå®¹å™¨</h3><ul><li><p>å®ç°<code>WebServerFactoryCustomizer&lt;ConfigurableServletWebServerFactory&gt;</code> </p></li><li><ul><li>æŠŠé…ç½®æ–‡ä»¶çš„å€¼å’Œ<code>ServletWebServerFactory</code>è¿›è¡Œç»‘å®š</li></ul></li><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>server.xxx</code></p></li><li><p>ç›´æ¥è‡ªå®šä¹‰ <code>ConfigurableServletWebServerFactory</code></p></li></ul><p><code>xxxxxCustomizer</code>ï¼šå®šåˆ¶åŒ–å™¨ï¼Œå¯ä»¥æ”¹å˜xxxxçš„é»˜è®¤è§„åˆ™</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.web.server.WebServerFactoryCustomizer;<br><span class="hljs-keyword">import</span> org.springframework.boot.web.servlet.server.ConfigurableServletWebServerFactory;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomizationBean</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebServerFactoryCustomizer</span>&lt;ConfigurableServletWebServerFactory&gt; &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">customize</span><span class="hljs-params">(ConfigurableServletWebServerFactory server)</span> &#123;<br>        server.setPort(<span class="hljs-number">9000</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="59ã€å®šåˆ¶åŒ–åŸç†-SpringBootå®šåˆ¶åŒ–ç»„ä»¶çš„å‡ ç§æ–¹å¼ï¼ˆå°ç»“ï¼‰"><a href="#59ã€å®šåˆ¶åŒ–åŸç†-SpringBootå®šåˆ¶åŒ–ç»„ä»¶çš„å‡ ç§æ–¹å¼ï¼ˆå°ç»“ï¼‰" class="headerlink" title="59ã€å®šåˆ¶åŒ–åŸç†-SpringBootå®šåˆ¶åŒ–ç»„ä»¶çš„å‡ ç§æ–¹å¼ï¼ˆå°ç»“ï¼‰"></a>59ã€å®šåˆ¶åŒ–åŸç†-SpringBootå®šåˆ¶åŒ–ç»„ä»¶çš„å‡ ç§æ–¹å¼ï¼ˆå°ç»“ï¼‰</h2><h3 id="å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼"><a href="#å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼" class="headerlink" title="å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼"></a>å®šåˆ¶åŒ–çš„å¸¸è§æ–¹å¼</h3><ul><li><p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p></li><li><p><code>xxxxxCustomizer</code></p></li><li><p>ç¼–å†™è‡ªå®šä¹‰çš„é…ç½®ç±»  <code>xxxConfiguration</code> + <code>@Bean</code>æ›¿æ¢ã€å¢åŠ å®¹å™¨ä¸­é»˜è®¤ç»„ä»¶ï¼Œè§†å›¾è§£æå™¨</p></li><li><p>Webåº”ç”¨ ç¼–å†™ä¸€ä¸ªé…ç½®ç±»å®ç° <code>WebMvcConfigurer</code> å³å¯å®šåˆ¶åŒ–webåŠŸèƒ½ + <code>@Bean</code>ç»™å®¹å™¨ä¸­å†æ‰©å±•ä¸€äº›ç»„ä»¶</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminWebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span>&#123;<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><code>@EnableWebMvc</code> + <code>WebMvcConfigurer</code> â€” <code>@Bean</code>  å¯ä»¥å…¨é¢æ¥ç®¡SpringMVCï¼Œæ‰€æœ‰è§„åˆ™å…¨éƒ¨è‡ªå·±é‡æ–°é…ç½®ï¼› å®ç°å®šåˆ¶å’Œæ‰©å±•åŠŸèƒ½ï¼ˆ<strong>é«˜çº§åŠŸèƒ½ï¼Œåˆå­¦è€…é€€é¿ä¸‰èˆ</strong>ï¼‰ã€‚<ul><li>åŸç†ï¼š<ol><li><code>WebMvcAutoConfiguration</code>é»˜è®¤çš„SpringMVCçš„è‡ªåŠ¨é…ç½®åŠŸèƒ½ç±»ï¼Œå¦‚é™æ€èµ„æºã€æ¬¢è¿é¡µç­‰ã€‚</li><li>ä¸€æ—¦ä½¿ç”¨ <code>@EnableWebMvc</code> ï¼Œä¼š<code>@Import(DelegatingWebMvcConfiguration.class)</code>ã€‚</li><li><code>DelegatingWebMvcConfiguration</code>çš„ä½œç”¨ï¼Œåªä¿è¯SpringMVCæœ€åŸºæœ¬çš„ä½¿ç”¨<ul><li>æŠŠæ‰€æœ‰ç³»ç»Ÿä¸­çš„<code>WebMvcConfigurer</code>æ‹¿è¿‡æ¥ï¼Œæ‰€æœ‰åŠŸèƒ½çš„å®šåˆ¶éƒ½æ˜¯è¿™äº›<code>WebMvcConfigurer</code>åˆèµ·æ¥ä¸€èµ·ç”Ÿæ•ˆã€‚</li><li>è‡ªåŠ¨é…ç½®äº†ä¸€äº›éå¸¸åº•å±‚çš„ç»„ä»¶ï¼Œå¦‚<code>RequestMappingHandlerMapping</code>ï¼Œè¿™äº›ç»„ä»¶ä¾èµ–çš„ç»„ä»¶éƒ½æ˜¯ä»å®¹å™¨ä¸­è·å–å¦‚ã€‚</li><li><code>public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport</code>ã€‚</li></ul></li><li><code>WebMvcAutoConfiguration</code>é‡Œé¢çš„é…ç½®è¦èƒ½ç”Ÿæ•ˆå¿…é¡»  <code>@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</code>ã€‚</li><li>@EnableWebMvc å¯¼è‡´äº†WebMvcAutoConfiguration  æ²¡æœ‰ç”Ÿæ•ˆã€‚</li></ol></li></ul></li></ul><h3 id="åŸç†åˆ†æå¥—è·¯"><a href="#åŸç†åˆ†æå¥—è·¯" class="headerlink" title="åŸç†åˆ†æå¥—è·¯"></a>åŸç†åˆ†æå¥—è·¯</h3><p>åœºæ™¯starter - <code>xxxxAutoConfiguration</code> - å¯¼å…¥xxxç»„ä»¶ - ç»‘å®š<code>xxxProperties</code> - ç»‘å®šé…ç½®æ–‡ä»¶é¡¹ã€‚</p><h2 id="60ã€æ•°æ®è®¿é—®-æ•°æ®åº“åœºæ™¯çš„è‡ªåŠ¨é…ç½®åˆ†æä¸æ•´åˆæµ‹è¯•"><a href="#60ã€æ•°æ®è®¿é—®-æ•°æ®åº“åœºæ™¯çš„è‡ªåŠ¨é…ç½®åˆ†æä¸æ•´åˆæµ‹è¯•" class="headerlink" title="60ã€æ•°æ®è®¿é—®-æ•°æ®åº“åœºæ™¯çš„è‡ªåŠ¨é…ç½®åˆ†æä¸æ•´åˆæµ‹è¯•"></a>60ã€æ•°æ®è®¿é—®-æ•°æ®åº“åœºæ™¯çš„è‡ªåŠ¨é…ç½®åˆ†æä¸æ•´åˆæµ‹è¯•</h2><h3 id="å¯¼å…¥JDBCåœºæ™¯"><a href="#å¯¼å…¥JDBCåœºæ™¯" class="headerlink" title="å¯¼å…¥JDBCåœºæ™¯"></a>å¯¼å…¥JDBCåœºæ™¯</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p>æ¥ç€å¯¼å…¥æ•°æ®åº“é©±åŠ¨åŒ…ï¼ˆMySQLä¸ºä¾‹ï¼‰ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-comment">&lt;!--é»˜è®¤ç‰ˆæœ¬ï¼š--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mysql.version</span>&gt;</span>8.0.22<span class="hljs-tag">&lt;/<span class="hljs-name">mysql.version</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--&lt;version&gt;5.1.49&lt;/version&gt;--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--</span><br><span class="hljs-comment">æƒ³è¦ä¿®æ”¹ç‰ˆæœ¬</span><br><span class="hljs-comment">1ã€ç›´æ¥ä¾èµ–å¼•å…¥å…·ä½“ç‰ˆæœ¬ï¼ˆmavençš„å°±è¿‘ä¾èµ–åŸåˆ™ï¼‰</span><br><span class="hljs-comment">2ã€é‡æ–°å£°æ˜ç‰ˆæœ¬ï¼ˆmavençš„å±æ€§çš„å°±è¿‘ä¼˜å…ˆåŸåˆ™ï¼‰</span><br><span class="hljs-comment">--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mysql.version</span>&gt;</span>5.1.49<span class="hljs-tag">&lt;/<span class="hljs-name">mysql.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ç›¸å…³æ•°æ®æºé…ç½®ç±»"><a href="#ç›¸å…³æ•°æ®æºé…ç½®ç±»" class="headerlink" title="ç›¸å…³æ•°æ®æºé…ç½®ç±»"></a>ç›¸å…³æ•°æ®æºé…ç½®ç±»</h3><ul><li><p><code>DataSourceAutoConfiguration</code> ï¼š æ•°æ®æºçš„è‡ªåŠ¨é…ç½®ã€‚</p><ul><li>ä¿®æ”¹æ•°æ®æºç›¸å…³çš„é…ç½®ï¼š<code>spring.datasource</code>ã€‚</li><li><strong>æ•°æ®åº“è¿æ¥æ± çš„é…ç½®ï¼Œæ˜¯è‡ªå·±å®¹å™¨ä¸­æ²¡æœ‰DataSourceæ‰è‡ªåŠ¨é…ç½®çš„</strong>ã€‚</li><li>åº•å±‚é…ç½®å¥½çš„è¿æ¥æ± æ˜¯ï¼š<code>HikariDataSource</code>ã€‚</li></ul></li><li><p><code>DataSourceTransactionManagerAutoConfiguration</code>ï¼š äº‹åŠ¡ç®¡ç†å™¨çš„è‡ªåŠ¨é…ç½®ã€‚</p></li><li><p><code>JdbcTemplateAutoConfiguration</code>ï¼š <code>JdbcTemplate</code>çš„è‡ªåŠ¨é…ç½®ï¼Œå¯ä»¥æ¥å¯¹æ•°æ®åº“è¿›è¡ŒCRUDã€‚</p><ul><li>å¯ä»¥ä¿®æ”¹å‰ç¼€ä¸º<code>spring.jdbc</code>çš„é…ç½®é¡¹æ¥ä¿®æ”¹<code>JdbcTemplate</code>ã€‚</li><li><code>@Bean @Primary JdbcTemplate</code>ï¼šSpringå®¹å™¨ä¸­æœ‰è¿™ä¸ª<code>JdbcTemplate</code>ç»„ä»¶ï¼Œä½¿ç”¨<code>@Autowired</code>ã€‚</li></ul></li><li><p><code>JndiDataSourceAutoConfiguration</code>ï¼š JNDIçš„è‡ªåŠ¨é…ç½®ã€‚</p></li><li><p><code>XADataSourceAutoConfiguration</code>ï¼š åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³çš„ã€‚</p></li></ul><h3 id="ä¿®æ”¹é…ç½®é¡¹"><a href="#ä¿®æ”¹é…ç½®é¡¹" class="headerlink" title="ä¿®æ”¹é…ç½®é¡¹"></a>ä¿®æ”¹é…ç½®é¡¹</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db_account</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br></code></pre></td></tr></table></figure><h3 id="å•å…ƒæµ‹è¯•æ•°æ®æº"><a href="#å•å…ƒæµ‹è¯•æ•°æ®æº" class="headerlink" title="å•å…ƒæµ‹è¯•æ•°æ®æº"></a>å•å…ƒæµ‹è¯•æ•°æ®æº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><span class="hljs-keyword">import</span> org.springframework.jdbc.core.JdbcTemplate;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Boot05WebAdminApplicationTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    JdbcTemplate jdbcTemplate;<br><br>    <span class="hljs-meta">@Test</span><span class="hljs-comment">//ç”¨@org.junit.Testä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå¯èƒ½è·ŸJUnitæ–°ç‰ˆæœ¬æœ‰å…³</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-comment">//        jdbcTemplate.queryForObject(&quot;select * from account_tbl&quot;)</span><br><span class="hljs-comment">//        jdbcTemplate.queryForList(&quot;select * from account_tbl&quot;,)</span><br>        <span class="hljs-type">Long</span> <span class="hljs-variable">aLong</span> <span class="hljs-operator">=</span> jdbcTemplate.queryForObject(<span class="hljs-string">&quot;select count(*) from account_tbl&quot;</span>, Long.class);<br>        log.info(<span class="hljs-string">&quot;è®°å½•æ€»æ•°ï¼š&#123;&#125;&quot;</span>,aLong);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="61ã€æ•°æ®è®¿é—®-è‡ªå®šä¹‰æ–¹å¼æ•´åˆdruidæ•°æ®æº"><a href="#61ã€æ•°æ®è®¿é—®-è‡ªå®šä¹‰æ–¹å¼æ•´åˆdruidæ•°æ®æº" class="headerlink" title="61ã€æ•°æ®è®¿é—®-è‡ªå®šä¹‰æ–¹å¼æ•´åˆdruidæ•°æ®æº"></a>61ã€æ•°æ®è®¿é—®-è‡ªå®šä¹‰æ–¹å¼æ•´åˆdruidæ•°æ®æº</h2><p><a href="https://github.com/alibaba/druid">Druidå®˜ç½‘</a></p><h3 id="Druidæ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Druidæ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Druidæ˜¯ä»€ä¹ˆï¼Ÿ"></a>Druidæ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>å®ƒæ˜¯æ•°æ®åº“è¿æ¥æ± ï¼Œå®ƒèƒ½å¤Ÿæä¾›å¼ºå¤§çš„ç›‘æ§å’Œæ‰©å±•åŠŸèƒ½ã€‚</p><p><a href="https://github.com/alibaba/druid/wiki/Druid%E8%BF%9E%E6%8E%A5%E6%B1%A0%E4%BB%8B%E7%BB%8D">å®˜æ–¹æ–‡æ¡£ - Druidè¿æ¥æ± ä»‹ç»</a></p><p>Spring Bootæ•´åˆç¬¬ä¸‰æ–¹æŠ€æœ¯çš„ä¸¤ç§æ–¹å¼ï¼š</p><ul><li><p>è‡ªå®šä¹‰</p></li><li><p>æ‰¾starteråœºæ™¯</p></li></ul><h3 id="è‡ªå®šä¹‰æ–¹å¼"><a href="#è‡ªå®šä¹‰æ–¹å¼" class="headerlink" title="è‡ªå®šä¹‰æ–¹å¼"></a>è‡ªå®šä¹‰æ–¹å¼</h3><p><strong>æ·»åŠ ä¾èµ–</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>é…ç½®Druidæ•°æ®æº</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@ConfigurationProperties(&quot;spring.datasource&quot;)</span><span class="hljs-comment">//å¤ç”¨é…ç½®æ–‡ä»¶çš„æ•°æ®æºé…ç½®</span><br>    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">druidDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br><br><span class="hljs-comment">//        druidDataSource.setUrl();</span><br><span class="hljs-comment">//        druidDataSource.setUsername();</span><br><span class="hljs-comment">//        druidDataSource.setPassword();</span><br><br>        <span class="hljs-keyword">return</span> druidDataSource;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><a href="https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE">æ›´å¤šé…ç½®é¡¹</a></p><p><strong>é…ç½®Druidçš„ç›‘æ§é¡µåŠŸèƒ½</strong>ï¼š</p><ul><li><p>Druidå†…ç½®æä¾›äº†ä¸€ä¸ª<code>StatViewServlet</code>ç”¨äºå±•ç¤ºDruidçš„ç»Ÿè®¡ä¿¡æ¯ã€‚<a href="https://github.com/alibaba/druid/wiki/%E9%85%8D%E7%BD%AE_StatViewServlet%E9%85%8D%E7%BD%AE">å®˜æ–¹æ–‡æ¡£ - é…ç½®_StatViewServleté…ç½®</a>ã€‚è¿™ä¸ª<code>StatViewServlet</code>çš„ç”¨é€”åŒ…æ‹¬ï¼š</p><ul><li>æä¾›ç›‘æ§ä¿¡æ¯å±•ç¤ºçš„htmlé¡µé¢</li><li>æä¾›ç›‘æ§ä¿¡æ¯çš„JSON API</li></ul></li><li><p>Druidå†…ç½®æä¾›ä¸€ä¸ª<code>StatFilter</code>ï¼Œç”¨äºç»Ÿè®¡ç›‘æ§ä¿¡æ¯ã€‚<a href="https://github.com/alibaba/druid/wiki/%E9%85%8D%E7%BD%AE_StatFilter">å®˜æ–¹æ–‡æ¡£ - é…ç½®_StatFilter</a></p></li><li><p><code>WebStatFilter</code>ç”¨äºé‡‡é›†web-jdbcå…³è”ç›‘æ§çš„æ•°æ®ï¼Œå¦‚SQLç›‘æ§ã€URIç›‘æ§ã€‚<a href="https://github.com/alibaba/druid/wiki/%E9%85%8D%E7%BD%AE_%E9%85%8D%E7%BD%AEWebStatFilter">å®˜æ–¹æ–‡æ¡£ - é…ç½®_é…ç½®WebStatFilter</a></p></li><li><p>Druidæä¾›äº†<code>WallFilter</code>ï¼Œå®ƒæ˜¯åŸºäºSQLè¯­ä¹‰åˆ†ææ¥å®ç°é˜²å¾¡SQLæ³¨å…¥æ”»å‡»çš„ã€‚<a href="https://github.com/alibaba/druid/wiki/%E9%85%8D%E7%BD%AE-wallfilter">å®˜æ–¹æ–‡æ¡£ - é…ç½® wallfilter</a></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-meta">@ConfigurationProperties(&quot;spring.datasource&quot;)</span><br>    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">dataSource</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException &#123;<br>        <span class="hljs-type">DruidDataSource</span> <span class="hljs-variable">druidDataSource</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DruidDataSource</span>();<br><br>        <span class="hljs-comment">//åŠ å…¥ç›‘æ§å’Œé˜²ç«å¢™åŠŸèƒ½åŠŸèƒ½</span><br>        druidDataSource.setFilters(<span class="hljs-string">&quot;stat,wall&quot;</span>);<br>        <br>        <span class="hljs-keyword">return</span> druidDataSource;<br>    &#125;<br>    <br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * é…ç½® druidçš„ç›‘æ§é¡µåŠŸèƒ½</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title function_">statViewServlet</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">StatViewServlet</span> <span class="hljs-variable">statViewServlet</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StatViewServlet</span>();<br>        ServletRegistrationBean&lt;StatViewServlet&gt; registrationBean = <br>            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServletRegistrationBean</span>&lt;&gt;(statViewServlet, <span class="hljs-string">&quot;/druid/*&quot;</span>);<br><br>        <span class="hljs-comment">//ç›‘æ§é¡µè´¦å·å¯†ç ï¼š</span><br>        registrationBean.addInitParameter(<span class="hljs-string">&quot;loginUsername&quot;</span>,<span class="hljs-string">&quot;admin&quot;</span>);<br>        registrationBean.addInitParameter(<span class="hljs-string">&quot;loginPassword&quot;</span>,<span class="hljs-string">&quot;123456&quot;</span>);<br><br>        <span class="hljs-keyword">return</span> registrationBean;<br>    &#125;<br>    <br>     <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * WebStatFilter ç”¨äºé‡‡é›†web-jdbcå…³è”ç›‘æ§çš„æ•°æ®ã€‚</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> FilterRegistrationBean <span class="hljs-title function_">webStatFilter</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">WebStatFilter</span> <span class="hljs-variable">webStatFilter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebStatFilter</span>();<br><br>        FilterRegistrationBean&lt;WebStatFilter&gt; filterRegistrationBean = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FilterRegistrationBean</span>&lt;&gt;(webStatFilter);<br>        filterRegistrationBean.setUrlPatterns(Arrays.asList(<span class="hljs-string">&quot;/*&quot;</span>));<br>        filterRegistrationBean.addInitParameter(<span class="hljs-string">&quot;exclusions&quot;</span>,<span class="hljs-string">&quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;</span>);<br><br>        <span class="hljs-keyword">return</span> filterRegistrationBean;<br>    &#125;<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="62ã€æ•°æ®è®¿é—®-druidæ•°æ®æºstarteræ•´åˆæ–¹å¼"><a href="#62ã€æ•°æ®è®¿é—®-druidæ•°æ®æºstarteræ•´åˆæ–¹å¼" class="headerlink" title="62ã€æ•°æ®è®¿é—®-druidæ•°æ®æºstarteræ•´åˆæ–¹å¼"></a>62ã€æ•°æ®è®¿é—®-druidæ•°æ®æºstarteræ•´åˆæ–¹å¼</h2><p><a href="">å®˜æ–¹æ–‡æ¡£ - Druid Spring Boot Starter</a></p><p><strong>å¼•å…¥ä¾èµ–</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.alibaba<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.17<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>åˆ†æè‡ªåŠ¨é…ç½®</strong>ï¼š</p><ul><li>æ‰©å±•é…ç½®é¡¹ <code>spring.datasource.druid</code></li><li>è‡ªåŠ¨é…ç½®ç±»<code>DruidDataSourceAutoConfigure</code></li><li><code>DruidSpringAopConfiguration.class</code>,  ç›‘æ§SpringBeançš„ï¼›é…ç½®é¡¹ï¼š<code>spring.datasource.druid.aop-patterns</code></li><li><code>DruidStatViewServletConfiguration.class</code>, ç›‘æ§é¡µçš„é…ç½®ã€‚<code>spring.datasource.druid.stat-view-servlet</code>é»˜è®¤å¼€å¯ã€‚</li><li><code>DruidWebStatFilterConfiguration.class</code>ï¼Œwebç›‘æ§é…ç½®ã€‚<code>spring.datasource.druid.web-stat-filter</code>é»˜è®¤å¼€å¯ã€‚</li><li><code>DruidFilterConfiguration.class</code>æ‰€æœ‰Druidçš„filterçš„é…ç½®ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_STAT_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.stat&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_CONFIG_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.config&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_ENCODING_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.encoding&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_SLF4J_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.slf4j&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_LOG4J_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.log4j&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_LOG4J2_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.log4j2&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_COMMONS_LOG_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.commons-log&quot;</span>;<br><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">FILTER_WALL_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;spring.datasource.druid.filter.wall&quot;</span>;<br></code></pre></td></tr></table></figure><p><strong>é…ç½®ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/db_account</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br><br>    <span class="hljs-attr">druid:</span><br>      <span class="hljs-attr">aop-patterns:</span> <span class="hljs-string">com.atguigu.admin.*</span>  <span class="hljs-comment">#ç›‘æ§SpringBean</span><br>      <span class="hljs-attr">filters:</span> <span class="hljs-string">stat,wall</span>     <span class="hljs-comment"># åº•å±‚å¼€å¯åŠŸèƒ½ï¼Œstatï¼ˆsqlç›‘æ§ï¼‰ï¼Œwallï¼ˆé˜²ç«å¢™ï¼‰</span><br><br>      <span class="hljs-attr">stat-view-servlet:</span>   <span class="hljs-comment"># é…ç½®ç›‘æ§é¡µåŠŸèƒ½</span><br>        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">login-username:</span> <span class="hljs-string">admin</span><br>        <span class="hljs-attr">login-password:</span> <span class="hljs-string">admin</span><br>        <span class="hljs-attr">resetEnable:</span> <span class="hljs-literal">false</span><br><br>      <span class="hljs-attr">web-stat-filter:</span>  <span class="hljs-comment"># ç›‘æ§web</span><br>        <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">urlPattern:</span> <span class="hljs-string">/*</span><br>        <span class="hljs-attr">exclusions:</span> <span class="hljs-string">&#x27;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#x27;</span><br><br><br>      <span class="hljs-attr">filter:</span><br>        <span class="hljs-attr">stat:</span>    <span class="hljs-comment"># å¯¹ä¸Šé¢filtersé‡Œé¢çš„statçš„è¯¦ç»†é…ç½®</span><br>          <span class="hljs-attr">slow-sql-millis:</span> <span class="hljs-number">1000</span><br>          <span class="hljs-attr">logSlowSql:</span> <span class="hljs-literal">true</span><br>          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>        <span class="hljs-attr">wall:</span><br>          <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>          <span class="hljs-attr">config:</span><br>            <span class="hljs-attr">drop-table-allow:</span> <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><h2 id="63ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-é…ç½®ç‰ˆ"><a href="#63ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-é…ç½®ç‰ˆ" class="headerlink" title="63ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-é…ç½®ç‰ˆ"></a>63ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-é…ç½®ç‰ˆ</h2><p><a href="https://github.com/mybatis">MyBatisçš„GitHubä»“åº“</a></p><p><a href="https://mybatis.org/mybatis-3/zh/index.html">MyBatiså®˜æ–¹</a></p><p><strong>starterçš„å‘½åæ–¹å¼</strong>ï¼š</p><ol><li>SpringBootå®˜æ–¹çš„Starterï¼š<code>spring-boot-starter-*</code></li><li>ç¬¬ä¸‰æ–¹çš„ï¼š <code>*-spring-boot-starter</code></li></ol><p><strong>å¼•å…¥ä¾èµ–</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.1.4<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>é…ç½®æ¨¡å¼</strong>:</p><ul><li><p>å…¨å±€é…ç½®æ–‡ä»¶</p></li><li><p><code>SqlSessionFactory</code>ï¼šè‡ªåŠ¨é…ç½®å¥½äº†</p></li><li><p><code>SqlSession</code>ï¼šè‡ªåŠ¨é…ç½®äº†<code>SqlSessionTemplate</code> ç»„åˆäº†<code>SqlSession</code></p></li><li><p><code>@Import(AutoConfiguredMapperScannerRegistrar.class)</code></p></li><li><p><code>Mapper</code>ï¼š åªè¦æˆ‘ä»¬å†™çš„æ“ä½œMyBatisçš„æ¥å£æ ‡å‡†äº†<code>@Mapper</code>å°±ä¼šè¢«è‡ªåŠ¨æ‰«æè¿›æ¥</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@EnableConfigurationProperties(MybatisProperties.class)</span> ï¼š MyBatisé…ç½®é¡¹ç»‘å®šç±»ã€‚<br><span class="hljs-meta">@AutoConfigureAfter(&#123; DataSourceAutoConfiguration.class, MybatisLanguageDriverAutoConfiguration.class &#125;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisAutoConfiguration</span>&#123;<br>    ...<br>&#125;<br><br><span class="hljs-meta">@ConfigurationProperties(prefix = &quot;mybatis&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisProperties</span>&#123;<br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><hr><p><strong>é…ç½®æ–‡ä»¶</strong>ï¼š</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">spring:</span><br>  <span class="hljs-attr">datasource:</span><br>    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span><br>    <span class="hljs-attr">password:</span> <span class="hljs-number">1234</span><br>    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/my</span><br>    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.jdbc.Driver</span><br><br><span class="hljs-comment"># é…ç½®mybatisè§„åˆ™</span><br><span class="hljs-attr">mybatis:</span><br>  <span class="hljs-attr">config-location:</span> <span class="hljs-string">classpath:mybatis/mybatis-config.xml</span>  <span class="hljs-comment">#å…¨å±€é…ç½®æ–‡ä»¶ä½ç½®</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mybatis/*.xml</span>  <span class="hljs-comment">#sqlæ˜ å°„æ–‡ä»¶ä½ç½®</span><br></code></pre></td></tr></table></figure><p><strong>mybatis-config.xml</strong>:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">  <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">  <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- ç”±äºSpring Bootè‡ªåŠ¨é…ç½®ç¼˜æ•…ï¼Œæ­¤å¤„ä¸å¿…é…ç½®ï¼Œåªç”¨æ¥åšåšæ ·ã€‚--&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>Mapperæ¥å£</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.lun.boot.mapper.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.lun.boot.bean.User&quot;</span>&gt;</span><br>        select * from user where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.lun.boot.bean.User;<br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Mapper;<br><br><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Integer id)</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>POJO</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>    <span class="hljs-keyword">private</span> Integer id;<br>    <span class="hljs-keyword">private</span> String name;<br>    <br><span class="hljs-comment">//getters and setters...</span><br>&#125;<br></code></pre></td></tr></table></figure><p><strong>DB</strong>ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">user</span>` (<br>  `id` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  `name` <span class="hljs-type">varchar</span>(<span class="hljs-number">45</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB AUTO_INCREMENT<span class="hljs-operator">=</span><span class="hljs-number">3</span> <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4;<br></code></pre></td></tr></table></figure><p><strong>Controller and Service</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserService userService;<br><br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-meta">@GetMapping(&quot;/user/&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Integer id)</span>&#123;<br><br>        <span class="hljs-keyword">return</span> userService.getUser(id);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> UserMapper userMapper;<span class="hljs-comment">//IDEAä¸‹æ ‡çº¢çº¿ï¼Œå¯å¿½è§†è¿™çº¢çº¿</span><br><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Integer id)</span>&#123;<br>        <span class="hljs-keyword">return</span> userMapper.getUser(id);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>é…ç½®<code>private Configuration configuration;</code> ä¹Ÿå°±æ˜¯é…ç½®<code>mybatis.configuration</code>ç›¸å…³çš„ï¼Œå°±æ˜¯ç›¸å½“äºæ”¹mybatiså…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„å€¼ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´é…ç½®äº†<code>mybatis.configuration</code>ï¼Œå°±ä¸éœ€é…ç½®mybatiså…¨å±€é…ç½®æ–‡ä»¶äº†ï¼‰</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># é…ç½®mybatisè§„åˆ™</span><br><span class="hljs-attr">mybatis:</span><br>  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mybatis/mapper/*.xml</span><br>  <span class="hljs-comment"># å¯ä»¥ä¸å†™å…¨å±€é…ç½®æ–‡ä»¶ï¼Œæ‰€æœ‰å…¨å±€é…ç½®æ–‡ä»¶çš„é…ç½®éƒ½æ”¾åœ¨configurationé…ç½®é¡¹ä¸­äº†ã€‚</span><br>  <span class="hljs-comment"># config-location: classpath:mybatis/mybatis-config.xml</span><br>  <span class="hljs-attr">configuration:</span><br>    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="å°ç»“-1"><a href="#å°ç»“-1" class="headerlink" title="å°ç»“"></a>å°ç»“</h3><ul><li>å¯¼å…¥MyBatiså®˜æ–¹Starterã€‚</li><li>ç¼–å†™Mapperæ¥å£ï¼Œéœ€<code>@Mapper</code>æ³¨è§£ã€‚</li><li>ç¼–å†™SQLæ˜ å°„æ–‡ä»¶å¹¶ç»‘å®šMapperæ¥å£ã€‚</li><li>åœ¨<code>application.yaml</code>ä¸­æŒ‡å®šMapperé…ç½®æ–‡ä»¶çš„æ‰€å¤„ä½ç½®ï¼Œä»¥åŠæŒ‡å®šå…¨å±€é…ç½®æ–‡ä»¶çš„ä¿¡æ¯ ï¼ˆå»ºè®®ï¼š**é…ç½®åœ¨<code>mybatis.configuration</code>**ï¼‰ã€‚</li></ul><h2 id="64ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-æ³¨è§£é…ç½®æ··åˆç‰ˆ"><a href="#64ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-æ³¨è§£é…ç½®æ··åˆç‰ˆ" class="headerlink" title="64ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-æ³¨è§£é…ç½®æ··åˆç‰ˆ"></a>64ã€æ•°æ®è®¿é—®-æ•´åˆMyBatis-æ³¨è§£é…ç½®æ··åˆç‰ˆ</h2><p>ä½ å¯ä»¥é€šè¿‡Spring Initializræ·»åŠ MyBatisçš„Starerã€‚</p><p><strong>æ³¨è§£ä¸é…ç½®æ··åˆæ­é…ï¼Œå¹²æ´»ä¸ç´¯</strong>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Mapper</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> &#123;<br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(Integer id)</span>;<br><br>    <span class="hljs-meta">@Select(&quot;select * from user where id=#&#123;id&#125;&quot;)</span><br>    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser2</span><span class="hljs-params">(Integer id)</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(User user)</span>;<br><br>    <span class="hljs-meta">@Insert(&quot;insert into user(`name`) values(#&#123;name&#125;)&quot;)</span><br>    <span class="hljs-meta">@Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveUser2</span><span class="hljs-params">(User user)</span>;<br><br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.lun.boot.mapper.UserMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getUser&quot;</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">&quot;com.lun.boot.bean.User&quot;</span>&gt;</span><br>        select * from user where id=#&#123;id&#125;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;saveUser&quot;</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">&quot;true&quot;</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">&quot;id&quot;</span>&gt;</span><br>        insert into user(`name`) values(#&#123;name&#125;)<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p>ç®€å•DAOæ–¹æ³•å°±å†™åœ¨æ³¨è§£ä¸Šã€‚å¤æ‚çš„å°±å†™åœ¨é…ç½®æ–‡ä»¶é‡Œã€‚</p></li><li><p>ä½¿ç”¨<code>@MapperScan(&quot;com.lun.boot.mapper&quot;)</code> ç®€åŒ–ï¼ŒMapperæ¥å£å°±å¯ä»¥ä¸ç”¨æ ‡æ³¨<code>@Mapper</code>æ³¨è§£ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@MapperScan(&quot;com.lun.boot.mapper&quot;)</span><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(MainApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="65ã€æ•°æ®è®¿é—®-æ•´åˆMyBatisPlusæ“ä½œæ•°æ®åº“"><a href="#65ã€æ•°æ®è®¿é—®-æ•´åˆMyBatisPlusæ“ä½œæ•°æ®åº“" class="headerlink" title="65ã€æ•°æ®è®¿é—®-æ•´åˆMyBatisPlusæ“ä½œæ•°æ®åº“"></a>65ã€æ•°æ®è®¿é—®-æ•´åˆMyBatisPlusæ“ä½œæ•°æ®åº“</h2><p><a href="https://plugins.jetbrains.com/plugin/10119-mybatisx">IDEAçš„MyBatisçš„æ’ä»¶ - MyBatisX</a></p><p><a href="https://baomidou.com/">MyBatisPluså®˜ç½‘</a></p><p><a href="https://baomidou.com/guide/">MyBatisPluså®˜æ–¹æ–‡æ¡£</a></p><h3 id="MyBatisPlusæ˜¯ä»€ä¹ˆ"><a href="#MyBatisPlusæ˜¯ä»€ä¹ˆ" class="headerlink" title="MyBatisPlusæ˜¯ä»€ä¹ˆ"></a>MyBatisPlusæ˜¯ä»€ä¹ˆ</h3><p><a href="https://github.com/baomidou/mybatis-plus">MyBatis-Plus</a>ï¼ˆç®€ç§° MPï¼‰æ˜¯ä¸€ä¸ª <a href="http://www.mybatis.org/mybatis-3/">MyBatis</a>çš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚</p><hr><p>æ·»åŠ ä¾èµ–ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><p><code>MybatisPlusAutoConfiguration</code>é…ç½®ç±»ï¼Œ<code>MybatisPlusProperties</code>é…ç½®é¡¹ç»‘å®šã€‚</p></li><li><p><code>SqlSessionFactory</code>è‡ªåŠ¨é…ç½®å¥½ï¼Œåº•å±‚æ˜¯å®¹å™¨ä¸­é»˜è®¤çš„æ•°æ®æºã€‚</p></li><li><p><code>mapperLocations</code>è‡ªåŠ¨é…ç½®å¥½çš„ï¼Œæœ‰é»˜è®¤å€¼<code>classpath*:/mapper/**/*.xml</code>ï¼Œè¿™è¡¨ç¤ºä»»æ„åŒ…çš„ç±»è·¯å¾„ä¸‹çš„æ‰€æœ‰mapperæ–‡ä»¶å¤¹ä¸‹ä»»æ„è·¯å¾„ä¸‹çš„æ‰€æœ‰xmléƒ½æ˜¯sqlæ˜ å°„æ–‡ä»¶ã€‚  å»ºè®®ä»¥åsqlæ˜ å°„æ–‡ä»¶æ”¾åœ¨ mapperä¸‹ã€‚</p></li><li><p>å®¹å™¨ä¸­ä¹Ÿè‡ªåŠ¨é…ç½®å¥½äº†<code>SqlSessionTemplate</code>ã€‚</p></li><li><p><code>@Mapper</code> æ ‡æ³¨çš„æ¥å£ä¹Ÿä¼šè¢«è‡ªåŠ¨æ‰«æï¼Œå»ºè®®ç›´æ¥ <code>@MapperScan(&quot;com.lun.boot.mapper&quot;)</code>æ‰¹é‡æ‰«æã€‚</p></li><li><p>MyBatisPlus<strong>ä¼˜ç‚¹</strong>ä¹‹ä¸€ï¼šåªéœ€è¦æˆ‘ä»¬çš„Mapperç»§æ‰¿MyBatisPlusçš„<code>BaseMapper</code> å°±å¯ä»¥æ‹¥æœ‰CRUDèƒ½åŠ›ï¼Œå‡è½»å¼€å‘å·¥ä½œã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;<br><span class="hljs-keyword">import</span> com.lun.hellomybatisplus.model.User;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;User&gt; &#123;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="66ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-æ•°æ®åˆ—è¡¨å±•ç¤º"><a href="#66ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-æ•°æ®åˆ—è¡¨å±•ç¤º" class="headerlink" title="66ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-æ•°æ®åˆ—è¡¨å±•ç¤º"></a>66ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-æ•°æ®åˆ—è¡¨å±•ç¤º</h2><p><a href="https://baomidou.com/guide/crud-interface.html">å®˜æ–¹æ–‡æ¡£ - CRUDæ¥å£</a></p><p>ä½¿ç”¨MyBatis Plusæä¾›çš„<code>IService</code>ï¼Œ<code>ServiceImpl</code>ï¼Œå‡è½»Serviceå±‚å¼€å‘å·¥ä½œã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.lun.hellomybatisplus.model.User;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.IService;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  Service çš„CRUDä¹Ÿä¸ç”¨å†™äº†</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IService</span>&lt;User&gt; &#123;<br><span class="hljs-comment">//æ­¤å¤„æ•…æ„ä¸ºç©º</span><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.lun.hellomybatisplus.model.User;<br><span class="hljs-keyword">import</span> com.lun.hellomybatisplus.mapper.UserMapper;<br><span class="hljs-keyword">import</span> com.lun.hellomybatisplus.service.UserService;<br><span class="hljs-keyword">import</span> com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Service;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-meta">@Service</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceImpl</span>&lt;UserMapper,User&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> &#123;<br><span class="hljs-comment">//æ­¤å¤„æ•…æ„ä¸ºç©º</span><br>&#125;<br></code></pre></td></tr></table></figure><p>ä¸ä¸‹ä¸€èŠ‚è”åˆåœ¨ä¸€èµ·</p><h2 id="67ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ†é¡µæ•°æ®å±•ç¤º"><a href="#67ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ†é¡µæ•°æ®å±•ç¤º" class="headerlink" title="67ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ†é¡µæ•°æ®å±•ç¤º"></a>67ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ†é¡µæ•°æ®å±•ç¤º</h2><p>ä¸ä¸‹ä¸€èŠ‚è”åˆåœ¨ä¸€èµ·</p><h2 id="68ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ é™¤ç”¨æˆ·å®Œæˆ"><a href="#68ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ é™¤ç”¨æˆ·å®Œæˆ" class="headerlink" title="68ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ é™¤ç”¨æˆ·å®Œæˆ"></a>68ã€æ•°æ®è®¿é—®-CRUDå®éªŒ-åˆ é™¤ç”¨æˆ·å®Œæˆ</h2><p>æ·»åŠ åˆ†é¡µæ’ä»¶ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisConfig</span> &#123;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * MybatisPlusInterceptor</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">paginationInterceptor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">mybatisPlusInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();<br>        <span class="hljs-comment">// è®¾ç½®è¯·æ±‚çš„é¡µé¢å¤§äºæœ€å¤§é¡µåæ“ä½œï¼Œ trueè°ƒå›åˆ°é¦–é¡µï¼Œfalse ç»§ç»­è¯·æ±‚  é»˜è®¤false</span><br>        <span class="hljs-comment">// paginationInterceptor.setOverflow(false);</span><br>        <span class="hljs-comment">// è®¾ç½®æœ€å¤§å•é¡µé™åˆ¶æ•°é‡ï¼Œé»˜è®¤ 500 æ¡ï¼Œ-1 ä¸å—é™åˆ¶</span><br>        <span class="hljs-comment">// paginationInterceptor.setLimit(500);</span><br>        <span class="hljs-comment">// å¼€å¯ count çš„ join ä¼˜åŒ–,åªé’ˆå¯¹éƒ¨åˆ† left join</span><br><br>        <span class="hljs-comment">//è¿™æ˜¯åˆ†é¡µæ‹¦æˆªå™¨</span><br>        <span class="hljs-type">PaginationInnerInterceptor</span> <span class="hljs-variable">paginationInnerInterceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaginationInnerInterceptor</span>();<br>        paginationInnerInterceptor.setOverflow(<span class="hljs-literal">true</span>);<br>        paginationInnerInterceptor.setMaxLimit(<span class="hljs-number">500L</span>);<br>        mybatisPlusInterceptor.addInnerInterceptor(paginationInnerInterceptor);<br><br>        <span class="hljs-keyword">return</span> mybatisPlusInterceptor;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;display table table-bordered table-striped&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dynamic-table&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>#<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>name<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>age<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>email<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">th</span>&gt;</span>æ“ä½œ<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;gradeX&quot;</span> <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;user: $&#123;users.records&#125;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.id&#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>[[$&#123;user.name&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.age&#125;&quot;</span>&gt;</span>Win 95+<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">th:text</span>=<span class="hljs-string">&quot;$&#123;user.email&#125;&quot;</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/user/delete/&#123;id&#125;(id=$&#123;user.id&#125;,pn=$&#123;users.current&#125;)&#125;&quot;</span> </span><br><span class="hljs-tag">                   <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn btn-danger btn-sm&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;button&quot;</span>&gt;</span>åˆ é™¤<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">tfoot</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;row-fluid&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;span6&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dataTables_info&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;dynamic-table_info&quot;</span>&gt;</span><br>            å½“å‰ç¬¬[[$&#123;users.current&#125;]]é¡µ  æ€»è®¡ [[$&#123;users.pages&#125;]]é¡µ  å…±[[$&#123;users.total&#125;]]æ¡è®°å½•<br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;span6&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dataTables_paginate paging_bootstrap pagination&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;prev disabled&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>â† å‰ä¸€é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">th:class</span>=<span class="hljs-string">&quot;$&#123;num == users.current?&#x27;active&#x27;:&#x27;&#x27;&#125;&quot;</span> </span><br><span class="hljs-tag">                    <span class="hljs-attr">th:each</span>=<span class="hljs-string">&quot;num:$&#123;#numbers.sequence(1,users.pages)&#125;&quot;</span> &gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">th:href</span>=<span class="hljs-string">&quot;@&#123;/dynamic_table(pn=$&#123;num&#125;)&#125;&quot;</span>&gt;</span>[[$&#123;num&#125;]]<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;next disabled&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span>&gt;</span>ä¸‹ä¸€é¡µ â†’ <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p><code>#numbers</code>è¡¨ç¤ºmethods for formatting numeric objects.<a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#expression-utility-objects">link</a></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@GetMapping(&quot;/user/delete/&#123;id&#125;&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable(&quot;id&quot;)</span> Long id,</span><br><span class="hljs-params">                         <span class="hljs-meta">@RequestParam(value = &quot;pn&quot;,defaultValue = &quot;1&quot;)</span>Integer pn,</span><br><span class="hljs-params">                         RedirectAttributes ra)</span>&#123;<br><br>    userService.removeById(id);<br><br>    ra.addAttribute(<span class="hljs-string">&quot;pn&quot;</span>,pn);<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;redirect:/dynamic_table&quot;</span>;<br>&#125;<br><br><span class="hljs-meta">@GetMapping(&quot;/dynamic_table&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">dynamic_table</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam(value=&quot;pn&quot;,defaultValue = &quot;1&quot;)</span> Integer pn,Model model)</span>&#123;<br>    <span class="hljs-comment">//è¡¨æ ¼å†…å®¹çš„éå†</span><br><br>    <span class="hljs-comment">//ä»æ•°æ®åº“ä¸­æŸ¥å‡ºuserè¡¨ä¸­çš„ç”¨æˆ·è¿›è¡Œå±•ç¤º</span><br><br>    <span class="hljs-comment">//æ„é€ åˆ†é¡µå‚æ•°</span><br>    Page&lt;User&gt; page = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Page</span>&lt;&gt;(pn, <span class="hljs-number">2</span>);<br>    <span class="hljs-comment">//è°ƒç”¨pageè¿›è¡Œåˆ†é¡µ</span><br>    Page&lt;User&gt; userPage = userService.page(page, <span class="hljs-literal">null</span>);<br><br>    model.addAttribute(<span class="hljs-string">&quot;users&quot;</span>,userPage);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;table/dynamic_table&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="69ã€æ•°æ®è®¿é—®-å‡†å¤‡é˜¿é‡Œäº‘Redisç¯å¢ƒ"><a href="#69ã€æ•°æ®è®¿é—®-å‡†å¤‡é˜¿é‡Œäº‘Redisç¯å¢ƒ" class="headerlink" title="69ã€æ•°æ®è®¿é—®-å‡†å¤‡é˜¿é‡Œäº‘Redisç¯å¢ƒ"></a>69ã€æ•°æ®è®¿é—®-å‡†å¤‡é˜¿é‡Œäº‘Redisç¯å¢ƒ</h2><p><strong>æ·»åŠ ä¾èµ–</strong>ï¼š</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br><span class="hljs-comment">&lt;!--å¯¼å…¥jedis--&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>redis.clients<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jedis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>RedisAutoConfiguration</code>è‡ªåŠ¨é…ç½®ç±»ï¼ŒRedisProperties å±æ€§ç±» â€“&gt; spring.redis.xxxæ˜¯å¯¹redisçš„é…ç½®ã€‚</li><li>è¿æ¥å·¥å‚<code>LettuceConnectionConfiguration</code>ã€<code>JedisConnectionConfiguration</code>æ˜¯å‡†å¤‡å¥½çš„ã€‚</li><li>è‡ªåŠ¨æ³¨å…¥äº†<code>RedisTemplate&lt;Object, Object&gt;</code>ï¼Œ<code>xxxTemplate</code>ã€‚</li><li>è‡ªåŠ¨æ³¨å…¥äº†<code>StringRedisTemplate</code>ï¼Œkeyï¼Œvalueéƒ½æ˜¯String</li><li>åº•å±‚åªè¦æˆ‘ä»¬ä½¿ç”¨<code>StringRedisTemplate</code>ã€<code>RedisTemplate</code>å°±å¯ä»¥æ“ä½œRedisã€‚</li></ul><p><strong>å¤–ç½‘Redisç¯å¢ƒæ­å»º</strong>ï¼š</p><ol><li><p>é˜¿é‡Œäº‘æŒ‰é‡ä»˜è´¹Redisï¼Œå…¶ä¸­é€‰æ‹©<strong>ç»å…¸ç½‘ç»œ</strong>ã€‚</p></li><li><p>ç”³è¯·Redisçš„å…¬ç½‘è¿æ¥åœ°å€ã€‚</p></li><li><p>ä¿®æ”¹ç™½åå•ï¼Œå…è®¸<code>0.0.0.0/0</code>è®¿é—®ã€‚</p></li></ol><h2 id="70ã€æ•°æ®è®¿é—®-Redisæ“ä½œä¸ç»Ÿè®¡å°å®éªŒ"><a href="#70ã€æ•°æ®è®¿é—®-Redisæ“ä½œä¸ç»Ÿè®¡å°å®éªŒ" class="headerlink" title="70ã€æ•°æ®è®¿é—®-Redisæ“ä½œä¸ç»Ÿè®¡å°å®éªŒ"></a>70ã€æ•°æ®è®¿é—®-Redisæ“ä½œä¸ç»Ÿè®¡å°å®éªŒ</h2><p>ç›¸å…³Redisé…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java">spring:<br>  redis:<br>#   url: redis:<span class="hljs-comment">//lfy:Lfy123456@r-bp1nc7reqesxisgxpipd.redis.rds.aliyuncs.com:6379</span><br>    host: r-bp1nc7reqesxisgxpipd.redis.rds.aliyuncs.com<br>    port: <span class="hljs-number">6379</span><br>    password: lfy:Lfy123456<br>    client-type: jedis<br>    jedis:<br>      pool:<br>        max-active: <span class="hljs-number">10</span><br>#   lettuce:# å¦ä¸€ä¸ªç”¨æ¥è¿æ¥redisçš„javaæ¡†æ¶<br>#      pool:<br>#        max-active: <span class="hljs-number">10</span><br>#        min-idle: <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p>æµ‹è¯•Redisè¿æ¥ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Boot05WebAdminApplicationTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    StringRedisTemplate redisTemplate;<br><br><br>    <span class="hljs-meta">@Autowired</span><br>    RedisConnectionFactory redisConnectionFactory;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testRedis</span><span class="hljs-params">()</span>&#123;<br>        ValueOperations&lt;String, String&gt; operations = redisTemplate.opsForValue();<br><br>        operations.set(<span class="hljs-string">&quot;hello&quot;</span>,<span class="hljs-string">&quot;world&quot;</span>);<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">hello</span> <span class="hljs-operator">=</span> operations.get(<span class="hljs-string">&quot;hello&quot;</span>);<br>        System.out.println(hello);<br><br>        System.out.println(redisConnectionFactory.getClass());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>Redis Desktop Managerï¼šå¯è§†åŒ–Redisç®¡ç†è½¯ä»¶ã€‚</p><p>URLç»Ÿè®¡æ‹¦æˆªå™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisUrlCountInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    StringRedisTemplate redisTemplate;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">uri</span> <span class="hljs-operator">=</span> request.getRequestURI();<br><br>        <span class="hljs-comment">//é»˜è®¤æ¯æ¬¡è®¿é—®å½“å‰uriå°±ä¼šè®¡æ•°+1</span><br>        redisTemplate.opsForValue().increment(uri);<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨å†ŒURLç»Ÿè®¡æ‹¦æˆªå™¨ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AdminWebConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span>&#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    RedisUrlCountInterceptor redisUrlCountInterceptor;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> &#123;<br><br>        registry.addInterceptor(redisUrlCountInterceptor)<br>                .addPathPatterns(<span class="hljs-string">&quot;/**&quot;</span>)<br>                .excludePathPatterns(<span class="hljs-string">&quot;/&quot;</span>,<span class="hljs-string">&quot;/login&quot;</span>,<span class="hljs-string">&quot;/css/**&quot;</span>,<span class="hljs-string">&quot;/fonts/**&quot;</span>,<span class="hljs-string">&quot;/images/**&quot;</span>,<br>                        <span class="hljs-string">&quot;/js/**&quot;</span>,<span class="hljs-string">&quot;/aa/**&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Filterã€Interceptor å‡ ä¹æ‹¥æœ‰ç›¸åŒçš„åŠŸèƒ½ï¼Ÿ</p><ul><li>Filteræ˜¯Servletå®šä¹‰çš„åŸç”Ÿç»„ä»¶ï¼Œå®ƒçš„å¥½å¤„æ˜¯è„±ç¦»Springåº”ç”¨ä¹Ÿèƒ½ä½¿ç”¨ã€‚</li><li>Interceptoræ˜¯Springå®šä¹‰çš„æ¥å£ï¼Œå¯ä»¥ä½¿ç”¨Springçš„è‡ªåŠ¨è£…é…ç­‰åŠŸèƒ½ã€‚</li></ul><p>è°ƒç”¨Rediså†…çš„ç»Ÿè®¡æ•°æ®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Slf4j</span><br><span class="hljs-meta">@Controller</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexController</span> &#123;<br><br><span class="hljs-meta">@Autowired</span><br>    StringRedisTemplate redisTemplate;<br>    <br><span class="hljs-meta">@GetMapping(&quot;/main.html&quot;)</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">mainPage</span><span class="hljs-params">(HttpSession session,Model model)</span>&#123;<br><br>        log.info(<span class="hljs-string">&quot;å½“å‰æ–¹æ³•æ˜¯ï¼š&#123;&#125;&quot;</span>,<span class="hljs-string">&quot;mainPage&quot;</span>);<br><br>        ValueOperations&lt;String, String&gt; opsForValue =<br>                redisTemplate.opsForValue();<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> opsForValue.get(<span class="hljs-string">&quot;/main.html&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s1</span> <span class="hljs-operator">=</span> opsForValue.get(<span class="hljs-string">&quot;/sql&quot;</span>);<br><br>        model.addAttribute(<span class="hljs-string">&quot;mainCount&quot;</span>,s);<br>        model.addAttribute(<span class="hljs-string">&quot;sqlCount&quot;</span>,s1);<br><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;main&quot;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="71ã€å•å…ƒæµ‹è¯•-JUnit5ç®€ä»‹"><a href="#71ã€å•å…ƒæµ‹è¯•-JUnit5ç®€ä»‹" class="headerlink" title="71ã€å•å…ƒæµ‹è¯•-JUnit5ç®€ä»‹"></a>71ã€å•å…ƒæµ‹è¯•-JUnit5ç®€ä»‹</h2><p><strong>Spring Boot 2.2.0 ç‰ˆæœ¬å¼€å§‹å¼•å…¥ JUnit 5 ä½œä¸ºå•å…ƒæµ‹è¯•é»˜è®¤åº“</strong></p><p><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">JUnit 5å®˜æ–¹æ–‡æ¡£</a></p><p>ä½œä¸ºæœ€æ–°ç‰ˆæœ¬çš„JUnitæ¡†æ¶ï¼ŒJUnit5ä¸ä¹‹å‰ç‰ˆæœ¬çš„JUnitæ¡†æ¶æœ‰å¾ˆå¤§çš„ä¸åŒã€‚ç”±ä¸‰ä¸ªä¸åŒå­é¡¹ç›®çš„å‡ ä¸ªä¸åŒæ¨¡å—ç»„æˆã€‚</p><p><strong>JUnit 5 &#x3D; JUnit Platform + JUnit Jupiter + JUnit Vintage</strong></p><ul><li><p><strong>JUnit Platform</strong>: Junit Platformæ˜¯åœ¨JVMä¸Šå¯åŠ¨æµ‹è¯•æ¡†æ¶çš„åŸºç¡€ï¼Œä¸ä»…æ”¯æŒJunitè‡ªåˆ¶çš„æµ‹è¯•å¼•æ“ï¼Œå…¶ä»–æµ‹è¯•å¼•æ“ä¹Ÿéƒ½å¯ä»¥æ¥å…¥ã€‚</p></li><li><p><strong>JUnit Jupiter</strong>: JUnit Jupiteræä¾›äº†JUnit5çš„æ–°çš„ç¼–ç¨‹æ¨¡å‹ï¼Œæ˜¯JUnit5æ–°ç‰¹æ€§çš„æ ¸å¿ƒã€‚å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª<strong>æµ‹è¯•å¼•æ“</strong>ï¼Œç”¨äºåœ¨Junit Platformä¸Šè¿è¡Œã€‚</p></li><li><p><strong>JUnit Vintage</strong>: ç”±äºJUintå·²ç»å‘å±•å¤šå¹´ï¼Œä¸ºäº†ç…§é¡¾è€çš„é¡¹ç›®ï¼ŒJUnit Vintageæä¾›äº†å…¼å®¹JUnit4.xï¼ŒJUnit3.xçš„æµ‹è¯•å¼•æ“ã€‚</p></li></ul><p><strong>æ³¨æ„</strong>ï¼š</p><ul><li><p>SpringBoot 2.4 ä»¥ä¸Šç‰ˆæœ¬ç§»é™¤äº†é»˜è®¤å¯¹ Vintage çš„ä¾èµ–ã€‚å¦‚æœéœ€è¦å…¼å®¹JUnit4éœ€è¦è‡ªè¡Œå¼•å…¥ï¼ˆä¸èƒ½ä½¿ç”¨JUnit4çš„åŠŸèƒ½ @Testï¼‰</p></li><li><p>JUnit 5â€™s Vintageå·²ç»ä»<code>spring-boot-starter-test</code>ä»ç§»é™¤ã€‚å¦‚æœéœ€è¦ç»§ç»­å…¼å®¹Junit4éœ€è¦è‡ªè¡Œå¼•å…¥Vintageä¾èµ–ï¼š</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.junit.vintage<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit-vintage-engine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.hamcrest<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hamcrest-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>ä½¿ç”¨æ·»åŠ JUnit 5ï¼Œæ·»åŠ å¯¹åº”çš„starterï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>Springçš„JUnit 5çš„åŸºæœ¬å•å…ƒæµ‹è¯•æ¨¡æ¿ï¼ˆSpringçš„JUnit4çš„æ˜¯<code>@SpringBootTest</code>+<code>@RunWith(SpringRunner.class)</code>ï¼‰ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.Assertions;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<span class="hljs-comment">//æ³¨æ„ä¸æ˜¯org.junit.Testï¼ˆè¿™æ˜¯JUnit4ç‰ˆæœ¬çš„ï¼‰</span><br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringBootApplicationTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> Component component;<br>    <br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-comment">//@Transactional æ ‡æ³¨åè¿æ¥æ•°æ®åº“æœ‰å›æ»šåŠŸèƒ½</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>Assertions.assertEquals(<span class="hljs-number">5</span>, component.getFive());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><blockquote><p>Jupiter</p><p>è‹± [ËˆdÊ’uËpÉªtÉ™(r)]   ç¾ [ËˆdÊ’uËpÉªtÉ™r]</p><p>n. æœ¨æ˜Ÿ(å¤ªé˜³ç³»ä¸­æœ€å¤§çš„è¡Œæ˜Ÿ)</p></blockquote><blockquote><p>vintage</p><p>è‹± [ËˆvÉªntÉªdÊ’]   ç¾ [ËˆvÉªntÉªdÊ’]</p><p>n. ç‰¹å®šå¹´ä»½(æˆ–åœ°æ–¹)é…¿åˆ¶çš„é…’;é…¿é€ å¹´ä»½;é‡‡æ‘˜è‘¡è„é…¿é…’çš„æœŸé—´(æˆ–å­£èŠ‚);è‘¡è„æ”¶è·æœŸ(æˆ–å­£èŠ‚)</p><p>adj. (æŒ‡è‘¡è„é…’)ä¼˜è´¨çš„ï¼Œä¸Šç­‰çš„ï¼Œä½³é…¿çš„;å¤è‰²å¤é¦™çš„(æŒ‡1917â€“1930å¹´é—´åˆ¶é€ ï¼Œè½¦å‹å’Œå“å‘³å—äººé’ççš„);(è¿‡å»æŸä¸ªæ—¶æœŸ)å…¸å‹çš„ï¼Œä¼˜è´¨çš„;(æŸäººçš„)æœ€ä½³ä½œå“çš„</p></blockquote><h2 id="72ã€å•å…ƒæµ‹è¯•-å¸¸ç”¨æµ‹è¯•æ³¨è§£"><a href="#72ã€å•å…ƒæµ‹è¯•-å¸¸ç”¨æµ‹è¯•æ³¨è§£" class="headerlink" title="72ã€å•å…ƒæµ‹è¯•-å¸¸ç”¨æµ‹è¯•æ³¨è§£"></a>72ã€å•å…ƒæµ‹è¯•-å¸¸ç”¨æµ‹è¯•æ³¨è§£</h2><p><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations">å®˜æ–¹æ–‡æ¡£ - Annotations</a></p><ul><li><strong>@Test</strong>ï¼šè¡¨ç¤ºæ–¹æ³•æ˜¯æµ‹è¯•æ–¹æ³•ã€‚ä½†æ˜¯ä¸JUnit4çš„@Testä¸åŒï¼Œä»–çš„èŒè´£éå¸¸å•ä¸€ä¸èƒ½å£°æ˜ä»»ä½•å±æ€§ï¼Œæ‹“å±•çš„æµ‹è¯•å°†ä¼šç”±Jupiteræä¾›é¢å¤–æµ‹è¯•</li><li><strong>@ParameterizedTest</strong>ï¼šè¡¨ç¤ºæ–¹æ³•æ˜¯å‚æ•°åŒ–æµ‹è¯•ã€‚</li><li><strong>@RepeatedTest</strong>ï¼šè¡¨ç¤ºæ–¹æ³•å¯é‡å¤æ‰§è¡Œã€‚</li><li><strong>@DisplayName</strong>ï¼šä¸ºæµ‹è¯•ç±»æˆ–è€…æµ‹è¯•æ–¹æ³•è®¾ç½®å±•ç¤ºåç§°ã€‚</li><li><strong>@BeforeEach</strong>ï¼šè¡¨ç¤ºåœ¨<strong>æ¯ä¸ª</strong>å•å…ƒæµ‹è¯•<strong>ä¹‹å‰</strong>æ‰§è¡Œã€‚</li><li><strong>@AfterEach</strong>ï¼šè¡¨ç¤ºåœ¨<strong>æ¯ä¸ª</strong>å•å…ƒæµ‹è¯•<strong>ä¹‹å</strong>æ‰§è¡Œã€‚</li><li><strong>@BeforeAll</strong>ï¼šè¡¨ç¤ºåœ¨<strong>æ‰€æœ‰</strong>å•å…ƒæµ‹è¯•<strong>ä¹‹å‰</strong>æ‰§è¡Œã€‚</li><li><strong>@AfterAll</strong>ï¼šè¡¨ç¤ºåœ¨<strong>æ‰€æœ‰</strong>å•å…ƒæµ‹è¯•<strong>ä¹‹å</strong>æ‰§è¡Œã€‚</li><li><strong>@Tag</strong>ï¼šè¡¨ç¤ºå•å…ƒæµ‹è¯•ç±»åˆ«ï¼Œç±»ä¼¼äºJUnit4ä¸­çš„@Categoriesã€‚</li><li><strong>@Disabled</strong>ï¼šè¡¨ç¤ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•ä¸æ‰§è¡Œï¼Œç±»ä¼¼äºJUnit4ä¸­çš„@Ignoreã€‚</li><li><strong>@Timeout</strong>ï¼šè¡¨ç¤ºæµ‹è¯•æ–¹æ³•è¿è¡Œå¦‚æœè¶…è¿‡äº†æŒ‡å®šæ—¶é—´å°†ä¼šè¿”å›é”™è¯¯ã€‚</li><li><strong>@ExtendWith</strong>ï¼šä¸ºæµ‹è¯•ç±»æˆ–æµ‹è¯•æ–¹æ³•æä¾›æ‰©å±•ç±»å¼•ç”¨ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.junit.jupiter.api.*;<br><br><span class="hljs-meta">@DisplayName(&quot;junit5åŠŸèƒ½æµ‹è¯•ç±»&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Junit5Test</span> &#123;<br><br><br>    <span class="hljs-meta">@DisplayName(&quot;æµ‹è¯•displaynameæ³¨è§£&quot;)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testDisplayName</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-number">1</span>);<br>        System.out.println(jdbcTemplate);<br>    &#125;<br>    <br>    <span class="hljs-meta">@ParameterizedTest</span><br>    <span class="hljs-meta">@ValueSource(strings = &#123; &quot;racecar&quot;, &quot;radar&quot;, &quot;able was I ere I saw elba&quot; &#125;)</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">palindromes</span><span class="hljs-params">(String candidate)</span> &#123;<br>        assertTrue(StringUtils.isPalindrome(candidate));<br>    &#125;<br>    <br><br>    <span class="hljs-meta">@Disabled</span><br>    <span class="hljs-meta">@DisplayName(&quot;æµ‹è¯•æ–¹æ³•2&quot;)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">test2</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-number">2</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@RepeatedTest(5)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">test3</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-number">5</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * è§„å®šæ–¹æ³•è¶…æ—¶æ—¶é—´ã€‚è¶…å‡ºæ—¶é—´æµ‹è¯•å‡ºå¼‚å¸¸</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> InterruptedException</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Timeout(value = 500, unit = TimeUnit.MILLISECONDS)</span><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testTimeout</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException &#123;<br>        Thread.sleep(<span class="hljs-number">600</span>);<br>    &#125;<br><br><br>    <span class="hljs-meta">@BeforeEach</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBeforeEach</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æµ‹è¯•å°±è¦å¼€å§‹äº†...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@AfterEach</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAfterEach</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æµ‹è¯•ç»“æŸäº†...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@BeforeAll</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testBeforeAll</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰€æœ‰æµ‹è¯•å°±è¦å¼€å§‹äº†...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@AfterAll</span><br>    <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testAfterAll</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;æ‰€æœ‰æµ‹è¯•ä»¥åŠç»“æŸäº†...&quot;</span>);<br><br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="73ã€å•å…ƒæµ‹è¯•-æ–­è¨€æœºåˆ¶"><a href="#73ã€å•å…ƒæµ‹è¯•-æ–­è¨€æœºåˆ¶" class="headerlink" title="73ã€å•å…ƒæµ‹è¯•-æ–­è¨€æœºåˆ¶"></a>73ã€å•å…ƒæµ‹è¯•-æ–­è¨€æœºåˆ¶</h2><p>æ–­è¨€Assertionæ˜¯æµ‹è¯•æ–¹æ³•ä¸­çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œç”¨æ¥å¯¹æµ‹è¯•éœ€è¦æ»¡è¶³çš„æ¡ä»¶è¿›è¡ŒéªŒè¯ã€‚è¿™äº›æ–­è¨€æ–¹æ³•éƒ½æ˜¯org.junit.jupiter.api.Assertionsçš„é™æ€æ–¹æ³•ã€‚æ£€æŸ¥ä¸šåŠ¡é€»è¾‘è¿”å›çš„æ•°æ®æ˜¯å¦åˆç†ã€‚æ‰€æœ‰çš„æµ‹è¯•è¿è¡Œç»“æŸä»¥åï¼Œä¼šæœ‰ä¸€ä¸ªè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šã€‚</p><p>JUnit 5 å†…ç½®çš„æ–­è¨€å¯ä»¥åˆ†æˆå¦‚ä¸‹å‡ ä¸ªç±»åˆ«ï¼š</p><h3 id="ç®€å•æ–­è¨€"><a href="#ç®€å•æ–­è¨€" class="headerlink" title="ç®€å•æ–­è¨€"></a>ç®€å•æ–­è¨€</h3><p>ç”¨æ¥å¯¹å•ä¸ªå€¼è¿›è¡Œç®€å•çš„éªŒè¯ã€‚å¦‚ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>assertEquals</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–ä¸¤ä¸ªåŸå§‹ç±»å‹æ˜¯å¦ç›¸ç­‰</td></tr><tr><td>assertNotEquals</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–ä¸¤ä¸ªåŸå§‹ç±»å‹æ˜¯å¦ä¸ç›¸ç­‰</td></tr><tr><td>assertSame</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡</td></tr><tr><td>assertNotSame</td><td>åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡å¼•ç”¨æ˜¯å¦æŒ‡å‘ä¸åŒçš„å¯¹è±¡</td></tr><tr><td>assertTrue</td><td>åˆ¤æ–­ç»™å®šçš„å¸ƒå°”å€¼æ˜¯å¦ä¸º true</td></tr><tr><td>assertFalse</td><td>åˆ¤æ–­ç»™å®šçš„å¸ƒå°”å€¼æ˜¯å¦ä¸º false</td></tr><tr><td>assertNull</td><td>åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸º null</td></tr><tr><td>assertNotNull</td><td>åˆ¤æ–­ç»™å®šçš„å¯¹è±¡å¼•ç”¨æ˜¯å¦ä¸ä¸º null</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-meta">@DisplayName(&quot;simple assertion&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">simple</span><span class="hljs-params">()</span> &#123;<br>     assertEquals(<span class="hljs-number">3</span>, <span class="hljs-number">1</span> + <span class="hljs-number">2</span>, <span class="hljs-string">&quot;simple math&quot;</span>);<br>     assertNotEquals(<span class="hljs-number">3</span>, <span class="hljs-number">1</span> + <span class="hljs-number">1</span>);<br><br>     assertNotSame(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>(), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());<br>     <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();<br>     assertSame(obj, obj);<br><br>     assertFalse(<span class="hljs-number">1</span> &gt; <span class="hljs-number">2</span>);<br>     assertTrue(<span class="hljs-number">1</span> &lt; <span class="hljs-number">2</span>);<br><br>     assertNull(<span class="hljs-literal">null</span>);<br>     assertNotNull(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>());<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æ•°ç»„æ–­è¨€"><a href="#æ•°ç»„æ–­è¨€" class="headerlink" title="æ•°ç»„æ–­è¨€"></a>æ•°ç»„æ–­è¨€</h3><p>é€šè¿‡ assertArrayEquals æ–¹æ³•æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æˆ–åŸå§‹ç±»å‹çš„æ•°ç»„æ˜¯å¦ç›¸ç­‰ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-meta">@DisplayName(&quot;array assertion&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">array</span><span class="hljs-params">()</span> &#123;<br>assertArrayEquals(<span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[]&#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;, <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[] &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="ç»„åˆæ–­è¨€"><a href="#ç»„åˆæ–­è¨€" class="headerlink" title="ç»„åˆæ–­è¨€"></a>ç»„åˆæ–­è¨€</h3><p><code>assertAll()</code>æ–¹æ³•æ¥å—å¤šä¸ª <code>org.junit.jupiter.api.Executable</code> å‡½æ•°å¼æ¥å£çš„å®ä¾‹ä½œä¸ºè¦éªŒè¯çš„æ–­è¨€ï¼Œå¯ä»¥é€šè¿‡ lambda è¡¨è¾¾å¼å¾ˆå®¹æ˜“çš„æä¾›è¿™äº›æ–­è¨€ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-meta">@DisplayName(&quot;assert all&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">all</span><span class="hljs-params">()</span> &#123;<br> assertAll(<span class="hljs-string">&quot;Math&quot;</span>,<br>    () -&gt; assertEquals(<span class="hljs-number">2</span>, <span class="hljs-number">1</span> + <span class="hljs-number">1</span>),<br>    () -&gt; assertTrue(<span class="hljs-number">1</span> &gt; <span class="hljs-number">0</span>)<br> );<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¼‚å¸¸æ–­è¨€"><a href="#å¼‚å¸¸æ–­è¨€" class="headerlink" title="å¼‚å¸¸æ–­è¨€"></a>å¼‚å¸¸æ–­è¨€</h3><p>åœ¨JUnit4æ—¶æœŸï¼Œæƒ³è¦æµ‹è¯•æ–¹æ³•çš„å¼‚å¸¸æƒ…å†µæ—¶ï¼Œéœ€è¦ç”¨<code>@Rule</code>æ³¨è§£çš„<code>ExpectedException</code>å˜é‡è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ã€‚è€ŒJUnit5æä¾›äº†ä¸€ç§æ–°çš„æ–­è¨€æ–¹å¼<code>Assertions.assertThrows()</code>ï¼Œé…åˆå‡½æ•°å¼ç¼–ç¨‹å°±å¯ä»¥è¿›è¡Œä½¿ç”¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-meta">@DisplayName(&quot;å¼‚å¸¸æµ‹è¯•&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exceptionTest</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">ArithmeticException</span> <span class="hljs-variable">exception</span> <span class="hljs-operator">=</span> Assertions.assertThrows(<br>           <span class="hljs-comment">//æ‰”å‡ºæ–­è¨€å¼‚å¸¸</span><br>            ArithmeticException.class, () -&gt; System.out.println(<span class="hljs-number">1</span> % <span class="hljs-number">0</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¶…æ—¶æ–­è¨€"><a href="#è¶…æ—¶æ–­è¨€" class="headerlink" title="è¶…æ—¶æ–­è¨€"></a>è¶…æ—¶æ–­è¨€</h3><p>JUnit5è¿˜æä¾›äº†Assertions.assertTimeout()ä¸ºæµ‹è¯•æ–¹æ³•è®¾ç½®äº†è¶…æ—¶æ—¶é—´ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-meta">@DisplayName(&quot;è¶…æ—¶æµ‹è¯•&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">timeoutTest</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">//å¦‚æœæµ‹è¯•æ–¹æ³•æ—¶é—´è¶…è¿‡1så°†ä¼šå¼‚å¸¸</span><br>    Assertions.assertTimeout(Duration.ofMillis(<span class="hljs-number">1000</span>), () -&gt; Thread.sleep(<span class="hljs-number">500</span>));<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å¿«é€Ÿå¤±è´¥"><a href="#å¿«é€Ÿå¤±è´¥" class="headerlink" title="å¿«é€Ÿå¤±è´¥"></a>å¿«é€Ÿå¤±è´¥</h3><p>é€šè¿‡ fail æ–¹æ³•ç›´æ¥ä½¿å¾—æµ‹è¯•å¤±è´¥ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Test</span><br><span class="hljs-meta">@DisplayName(&quot;fail&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">shouldFail</span><span class="hljs-params">()</span> &#123;<br>fail(<span class="hljs-string">&quot;This should fail&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="74ã€å•å…ƒæµ‹è¯•-å‰ç½®æ¡ä»¶"><a href="#74ã€å•å…ƒæµ‹è¯•-å‰ç½®æ¡ä»¶" class="headerlink" title="74ã€å•å…ƒæµ‹è¯•-å‰ç½®æ¡ä»¶"></a>74ã€å•å…ƒæµ‹è¯•-å‰ç½®æ¡ä»¶</h2><p>Unit 5 ä¸­çš„å‰ç½®æ¡ä»¶ï¼ˆassumptionsã€å‡è®¾ã€‘ï¼‰ç±»ä¼¼äºæ–­è¨€ï¼Œä¸åŒä¹‹å¤„åœ¨äºä¸æ»¡è¶³çš„<strong>æ–­è¨€assertions</strong>ä¼šä½¿å¾—æµ‹è¯•æ–¹æ³•å¤±è´¥ï¼Œè€Œ<strong>ä¸æ»¡è¶³çš„å‰ç½®æ¡ä»¶åªä¼šä½¿å¾—æµ‹è¯•æ–¹æ³•çš„æ‰§è¡Œç»ˆæ­¢</strong>ã€‚</p><p>å‰ç½®æ¡ä»¶å¯ä»¥çœ‹æˆæ˜¯æµ‹è¯•æ–¹æ³•æ‰§è¡Œçš„å‰æï¼Œå½“è¯¥å‰æä¸æ»¡è¶³æ—¶ï¼Œå°±æ²¡æœ‰ç»§ç»­æ‰§è¡Œçš„å¿…è¦ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@DisplayName(&quot;å‰ç½®æ¡ä»¶&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AssumptionsTest</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">environment</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;DEV&quot;</span>;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-meta">@DisplayName(&quot;simple&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">simpleAssume</span><span class="hljs-params">()</span> &#123;<br>        assumeTrue(Objects.equals(<span class="hljs-built_in">this</span>.environment, <span class="hljs-string">&quot;DEV&quot;</span>));<br>        assumeFalse(() -&gt; Objects.equals(<span class="hljs-built_in">this</span>.environment, <span class="hljs-string">&quot;PROD&quot;</span>));<br>    &#125;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-meta">@DisplayName(&quot;assume then do&quot;)</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">assumeThenDo</span><span class="hljs-params">()</span> &#123;<br>        assumingThat(<br>            Objects.equals(<span class="hljs-built_in">this</span>.environment, <span class="hljs-string">&quot;DEV&quot;</span>),<br>            () -&gt; System.out.println(<span class="hljs-string">&quot;In DEV&quot;</span>)<br>        );<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>assumeTrue</code> å’Œ <code>assumFalse</code> ç¡®ä¿ç»™å®šçš„æ¡ä»¶ä¸º <code>true</code> æˆ– <code>false</code>ï¼Œä¸æ»¡è¶³æ¡ä»¶ä¼šä½¿å¾—æµ‹è¯•æ‰§è¡Œç»ˆæ­¢ã€‚</p><p><code>assumingThat</code> çš„å‚æ•°æ˜¯è¡¨ç¤ºæ¡ä»¶çš„å¸ƒå°”å€¼å’Œå¯¹åº”çš„ Executable æ¥å£çš„å®ç°å¯¹è±¡ã€‚åªæœ‰æ¡ä»¶æ»¡è¶³æ—¶ï¼Œ<code>Executable</code> å¯¹è±¡æ‰ä¼šè¢«æ‰§è¡Œï¼›å½“æ¡ä»¶ä¸æ»¡è¶³æ—¶ï¼Œæµ‹è¯•æ‰§è¡Œå¹¶ä¸ä¼šç»ˆæ­¢ã€‚</p><h2 id="75ã€å•å…ƒæµ‹è¯•-åµŒå¥—æµ‹è¯•"><a href="#75ã€å•å…ƒæµ‹è¯•-åµŒå¥—æµ‹è¯•" class="headerlink" title="75ã€å•å…ƒæµ‹è¯•-åµŒå¥—æµ‹è¯•"></a>75ã€å•å…ƒæµ‹è¯•-åµŒå¥—æµ‹è¯•</h2><p><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested">å®˜æ–¹æ–‡æ¡£ - Nested Tests</a></p><p>JUnit 5 å¯ä»¥é€šè¿‡ Java ä¸­çš„å†…éƒ¨ç±»å’Œ<code>@Nested</code> æ³¨è§£å®ç°åµŒå¥—æµ‹è¯•ï¼Œä»è€Œå¯ä»¥æ›´å¥½çš„æŠŠç›¸å…³çš„æµ‹è¯•æ–¹æ³•ç»„ç»‡åœ¨ä¸€èµ·ã€‚åœ¨å†…éƒ¨ç±»ä¸­å¯ä»¥ä½¿ç”¨<code>@BeforeEach</code> å’Œ<code>@AfterEach</code>æ³¨è§£ï¼Œè€Œä¸”åµŒå¥—çš„å±‚æ¬¡æ²¡æœ‰é™åˆ¶ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@DisplayName(&quot;A stack&quot;)</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestingAStackDemo</span> &#123;<br><br>    Stack&lt;Object&gt; stack;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-meta">@DisplayName(&quot;is instantiated with new Stack()&quot;)</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">isInstantiatedWithNew</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>    &#125;<br><br>    <span class="hljs-meta">@Nested</span><br>    <span class="hljs-meta">@DisplayName(&quot;when new&quot;)</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">WhenNew</span> &#123;<br><br>        <span class="hljs-meta">@BeforeEach</span><br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">createNewStack</span><span class="hljs-params">()</span> &#123;<br>            stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>        &#125;<br><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-meta">@DisplayName(&quot;is empty&quot;)</span><br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>            assertTrue(stack.isEmpty());<br>        &#125;<br><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-meta">@DisplayName(&quot;throws EmptyStackException when popped&quot;)</span><br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">throwsExceptionWhenPopped</span><span class="hljs-params">()</span> &#123;<br>            assertThrows(EmptyStackException.class, stack::pop);<br>        &#125;<br><br>        <span class="hljs-meta">@Test</span><br>        <span class="hljs-meta">@DisplayName(&quot;throws EmptyStackException when peeked&quot;)</span><br>        <span class="hljs-keyword">void</span> <span class="hljs-title function_">throwsExceptionWhenPeeked</span><span class="hljs-params">()</span> &#123;<br>            assertThrows(EmptyStackException.class, stack::peek);<br>        &#125;<br><br>        <span class="hljs-meta">@Nested</span><br>        <span class="hljs-meta">@DisplayName(&quot;after pushing an element&quot;)</span><br>        <span class="hljs-keyword">class</span> <span class="hljs-title class_">AfterPushing</span> &#123;<br><br>            <span class="hljs-type">String</span> <span class="hljs-variable">anElement</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;an element&quot;</span>;<br><br>            <span class="hljs-meta">@BeforeEach</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">pushAnElement</span><span class="hljs-params">()</span> &#123;<br>                stack.push(anElement);<br>            &#125;<br><br>            <span class="hljs-meta">@Test</span><br>            <span class="hljs-meta">@DisplayName(&quot;it is no longer empty&quot;)</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">isNotEmpty</span><span class="hljs-params">()</span> &#123;<br>                assertFalse(stack.isEmpty());<br>            &#125;<br><br>            <span class="hljs-meta">@Test</span><br>            <span class="hljs-meta">@DisplayName(&quot;returns the element when popped and is empty&quot;)</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">returnElementWhenPopped</span><span class="hljs-params">()</span> &#123;<br>                assertEquals(anElement, stack.pop());<br>                assertTrue(stack.isEmpty());<br>            &#125;<br><br>            <span class="hljs-meta">@Test</span><br>            <span class="hljs-meta">@DisplayName(&quot;returns the element when peeked but remains not empty&quot;)</span><br>            <span class="hljs-keyword">void</span> <span class="hljs-title function_">returnElementWhenPeeked</span><span class="hljs-params">()</span> &#123;<br>                assertEquals(anElement, stack.peek());<br>                assertFalse(stack.isEmpty());<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="76ã€å•å…ƒæµ‹è¯•-å‚æ•°åŒ–æµ‹è¯•"><a href="#76ã€å•å…ƒæµ‹è¯•-å‚æ•°åŒ–æµ‹è¯•" class="headerlink" title="76ã€å•å…ƒæµ‹è¯•-å‚æ•°åŒ–æµ‹è¯•"></a>76ã€å•å…ƒæµ‹è¯•-å‚æ•°åŒ–æµ‹è¯•</h2><p><a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests">å®˜æ–¹æ–‡æ¡£ - Parameterized Tests</a></p><p>å‚æ•°åŒ–æµ‹è¯•æ˜¯JUnit5å¾ˆé‡è¦çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒä½¿å¾—ç”¨ä¸åŒçš„å‚æ•°å¤šæ¬¡è¿è¡Œæµ‹è¯•æˆä¸ºäº†å¯èƒ½ï¼Œä¹Ÿä¸ºæˆ‘ä»¬çš„å•å…ƒæµ‹è¯•å¸¦æ¥è®¸å¤šä¾¿åˆ©ã€‚</p><p>åˆ©ç”¨@ValueSourceç­‰æ³¨è§£ï¼ŒæŒ‡å®šå…¥å‚ï¼Œæˆ‘ä»¬å°†å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°è¿›è¡Œå¤šæ¬¡å•å…ƒæµ‹è¯•ï¼Œè€Œä¸éœ€è¦æ¯æ–°å¢ä¸€ä¸ªå‚æ•°å°±æ–°å¢ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œçœå»äº†å¾ˆå¤šå†—ä½™ä»£ç ã€‚</p><p>åˆ©ç”¨**@ValueSource**ç­‰æ³¨è§£ï¼ŒæŒ‡å®šå…¥å‚ï¼Œæˆ‘ä»¬å°†å¯ä»¥ä½¿ç”¨ä¸åŒçš„å‚æ•°è¿›è¡Œå¤šæ¬¡å•å…ƒæµ‹è¯•ï¼Œè€Œä¸éœ€è¦æ¯æ–°å¢ä¸€ä¸ªå‚æ•°å°±æ–°å¢ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œçœå»äº†å¾ˆå¤šå†—ä½™ä»£ç ã€‚</p><ul><li><strong>@ValueSource</strong>: ä¸ºå‚æ•°åŒ–æµ‹è¯•æŒ‡å®šå…¥å‚æ¥æºï¼Œæ”¯æŒå…«å¤§åŸºç¡€ç±»ä»¥åŠStringç±»å‹,Classç±»å‹</li><li><strong>@NullSource</strong>: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›ä¸€ä¸ªnullçš„å…¥å‚</li><li><strong>@EnumSource</strong>: è¡¨ç¤ºä¸ºå‚æ•°åŒ–æµ‹è¯•æä¾›ä¸€ä¸ªæšä¸¾å…¥å‚</li><li><strong>@CsvFileSource</strong>ï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šCSVæ–‡ä»¶å†…å®¹ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•å…¥å‚</li><li><strong>@MethodSource</strong>ï¼šè¡¨ç¤ºè¯»å–æŒ‡å®šæ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå‚æ•°åŒ–æµ‹è¯•å…¥å‚(æ³¨æ„æ–¹æ³•è¿”å›éœ€è¦æ˜¯ä¸€ä¸ªæµ)</li></ul><p>å½“ç„¶å¦‚æœå‚æ•°åŒ–æµ‹è¯•ä»…ä»…åªèƒ½åšåˆ°æŒ‡å®šæ™®é€šçš„å…¥å‚è¿˜è¾¾ä¸åˆ°è®©æˆ‘è§‰å¾—æƒŠè‰³çš„åœ°æ­¥ã€‚è®©æˆ‘çœŸæ­£æ„Ÿåˆ°ä»–çš„å¼ºå¤§ä¹‹å¤„çš„åœ°æ–¹åœ¨äºä»–å¯ä»¥æ”¯æŒå¤–éƒ¨çš„å„ç±»å…¥å‚ã€‚å¦‚:CSV,YML,JSON æ–‡ä»¶ç”šè‡³æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿå¯ä»¥ä½œä¸ºå…¥å‚ã€‚åªéœ€è¦å»å®ç°**<code>ArgumentsProvider</code>**æ¥å£ï¼Œä»»ä½•å¤–éƒ¨æ–‡ä»¶éƒ½å¯ä»¥ä½œä¸ºå®ƒçš„å…¥å‚ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@ParameterizedTest</span><br><span class="hljs-meta">@ValueSource(strings = &#123;&quot;one&quot;, &quot;two&quot;, &quot;three&quot;&#125;)</span><br><span class="hljs-meta">@DisplayName(&quot;å‚æ•°åŒ–æµ‹è¯•1&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">parameterizedTest1</span><span class="hljs-params">(String string)</span> &#123;<br>    System.out.println(string);<br>    Assertions.assertTrue(StringUtils.isNotBlank(string));<br>&#125;<br><br><br><span class="hljs-meta">@ParameterizedTest</span><br><span class="hljs-meta">@MethodSource(&quot;method&quot;)</span>    <span class="hljs-comment">//æŒ‡å®šæ–¹æ³•å</span><br><span class="hljs-meta">@DisplayName(&quot;æ–¹æ³•æ¥æºå‚æ•°&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testWithExplicitLocalMethodSource</span><span class="hljs-params">(String name)</span> &#123;<br>    System.out.println(name);<br>    Assertions.assertNotNull(name);<br>&#125;<br><br><span class="hljs-keyword">static</span> Stream&lt;String&gt; <span class="hljs-title function_">method</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-keyword">return</span> Stream.of(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="è¿ç§»æŒ‡å—"><a href="#è¿ç§»æŒ‡å—" class="headerlink" title="è¿ç§»æŒ‡å—"></a>è¿ç§»æŒ‡å—</h3><p><a href="https://junit.org/junit5/docs/current/user-guide/#migrating-from-junit4">å®˜æ–¹æ–‡æ¡£ - Migrating from JUnit 4</a></p><p>åœ¨è¿›è¡Œè¿ç§»çš„æ—¶å€™éœ€è¦æ³¨æ„å¦‚ä¸‹çš„å˜åŒ–ï¼š</p><ul><li>æ³¨è§£åœ¨ <code>org.junit.jupiter.api</code> åŒ…ä¸­ï¼Œæ–­è¨€åœ¨ <code>org.junit.jupiter.api.Assertions</code> ç±»ä¸­ï¼Œå‰ç½®æ¡ä»¶åœ¨ <code>org.junit.jupiter.api.Assumptions</code> ç±»ä¸­ã€‚</li><li>æŠŠ<code>@Before</code> å’Œ<code>@After</code> æ›¿æ¢æˆ<code>@BeforeEach</code> å’Œ<code>@AfterEach</code>ã€‚</li><li>æŠŠ<code>@BeforeClass</code> å’Œ<code>@AfterClass</code> æ›¿æ¢æˆ<code>@BeforeAll</code> å’Œ@AfterAllã€‚</li><li>æŠŠ<code>@Ignore</code> æ›¿æ¢æˆ<code>@Disabled</code>ã€‚</li><li>æŠŠ<code>@Category</code> æ›¿æ¢æˆ<code>@Tag</code>ã€‚</li><li>æŠŠ<code>@RunWith</code>ã€<code>@Rule</code> å’Œ<code>@ClassRule</code> æ›¿æ¢æˆ<code>@ExtendWith</code>ã€‚</li></ul><h2 id="77ã€æŒ‡æ ‡ç›‘æ§-SpringBoot-Actuatorä¸Endpoint"><a href="#77ã€æŒ‡æ ‡ç›‘æ§-SpringBoot-Actuatorä¸Endpoint" class="headerlink" title="77ã€æŒ‡æ ‡ç›‘æ§-SpringBoot Actuatorä¸Endpoint"></a>77ã€æŒ‡æ ‡ç›‘æ§-SpringBoot Actuatorä¸Endpoint</h2><p>æœªæ¥æ¯ä¸€ä¸ªå¾®æœåŠ¡åœ¨äº‘ä¸Šéƒ¨ç½²ä»¥åï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹å…¶è¿›è¡Œç›‘æ§ã€è¿½è¸ªã€å®¡è®¡ã€æ§åˆ¶ç­‰ã€‚SpringBootå°±æŠ½å–äº†Actuatoråœºæ™¯ï¼Œä½¿å¾—æˆ‘ä»¬æ¯ä¸ªå¾®æœåŠ¡å¿«é€Ÿå¼•ç”¨å³å¯è·å¾—ç”Ÿäº§çº§åˆ«çš„åº”ç”¨ç›‘æ§ã€å®¡è®¡ç­‰åŠŸèƒ½ã€‚</p><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#production-ready">å®˜æ–¹æ–‡æ¡£ - Spring Boot Actuator: Production-ready Features</a></p><p><strong>1.xä¸2.xçš„ä¸åŒ</strong>ï¼š</p><ul><li><p>SpringBoot Actuator 1.x</p><ul><li>æ”¯æŒSpringMVC</li><li>åŸºäºç»§æ‰¿æ–¹å¼è¿›è¡Œæ‰©å±•</li><li>å±‚çº§Metricsé…ç½®</li><li>è‡ªå®šä¹‰Metricsæ”¶é›†</li><li>é»˜è®¤è¾ƒå°‘çš„å®‰å…¨ç­–ç•¥</li></ul></li><li><p>SpringBoot Actuator 2.x</p><ul><li>æ”¯æŒSpringMVCã€JAX-RSä»¥åŠWebflux</li><li>æ³¨è§£é©±åŠ¨è¿›è¡Œæ‰©å±•</li><li>å±‚çº§&amp;åç§°ç©ºé—´Metrics</li><li>åº•å±‚ä½¿ç”¨MicroMeterï¼Œå¼ºå¤§ã€ä¾¿æ·é»˜è®¤ä¸°å¯Œçš„å®‰å…¨ç­–ç•¥</li></ul></li></ul><h3 id="å¦‚ä½•ä½¿ç”¨"><a href="#å¦‚ä½•ä½¿ç”¨" class="headerlink" title="å¦‚ä½•ä½¿ç”¨"></a>å¦‚ä½•ä½¿ç”¨</h3><ul><li>æ·»åŠ ä¾èµ–ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>è®¿é—®<code>http://localhost:8080/actuator/**</code>ã€‚</li><li>æš´éœ²æ‰€æœ‰ç›‘æ§ä¿¡æ¯ä¸ºHTTPã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">management:</span><br>  <span class="hljs-attr">endpoints:</span><br>    <span class="hljs-attr">enabled-by-default:</span> <span class="hljs-literal">true</span> <span class="hljs-comment">#æš´éœ²æ‰€æœ‰ç«¯ç‚¹ä¿¡æ¯</span><br>    <span class="hljs-attr">web:</span><br>      <span class="hljs-attr">exposure:</span><br>        <span class="hljs-attr">include:</span> <span class="hljs-string">&#x27;*&#x27;</span>  <span class="hljs-comment">#ä»¥webæ–¹å¼æš´éœ²</span><br></code></pre></td></tr></table></figure><ul><li>æµ‹è¯•ä¾‹å­<ul><li><a href="http://localhost:8080/actuator/beans">http://localhost:8080/actuator/beans</a></li><li><a href="http://localhost:8080/actuator/configprops">http://localhost:8080/actuator/configprops</a></li><li><a href="http://localhost:8080/actuator/metrics">http://localhost:8080/actuator/metrics</a></li><li><a href="http://localhost:8080/actuator/metrics/jvm.gc.pause">http://localhost:8080/actuator/metrics/jvm.gc.pause</a></li><li><a href="http://localhost:8080/actuator/metrics/endpointName/detailPath">http://localhost:8080/actuator/metrics/endpointName/detailPath</a></li></ul></li></ul><blockquote><p>actuator</p><p>è‹± [ËˆÃ¦ktjÊŠeÉªtÉ™]   ç¾ [ËˆÃ¦ktjuËŒeÉªtÉ™r]</p><p>n. è‡´åŠ¨ï¼ˆä¿ƒåŠ¨ï¼Œæ¿€åŠ±ï¼Œè°ƒèŠ‚ï¼‰å™¨ï¼›ä¼ åŠ¨ï¼ˆè£…ç½®ï¼Œæœºæ„ï¼‰ï¼›æ‹–åŠ¨è£…ç½®ï¼›é©¬è¾¾ï¼›æ“ä½œæœºæ„ï¼›æ‰§è¡Œæœºæ„ï¼ˆå…ƒä»¶ï¼‰ï¼›ï¼ˆç”µç£é“ï¼‰èºçº¿ç®¡ï¼›æ“çºµè£…ç½®ï¼ˆé˜€é—¨ï¼‰ï¼›è°ƒé€Ÿæ§åˆ¶å™¨ï¼›å¾€å¤è¿åŠ¨æ²¹ï¼ˆæ°”ï¼‰ç¼¸ï¼›ä½œåŠ¨ç­’</p></blockquote><blockquote><p>metric</p><p>è‹± [ËˆmetrÉªk]   ç¾ [ËˆmetrÉªk]</p><p>adj. ç±³åˆ¶çš„;å…¬åˆ¶çš„;æŒ‰å…¬åˆ¶åˆ¶ä½œçš„;ç”¨å…¬åˆ¶æµ‹é‡çš„</p><p>n. åº¦é‡æ ‡å‡†;[æ•°å­¦]åº¦é‡;è¯—ä½“;éŸµæ–‡;è¯—éŸµ</p></blockquote><h2 id="78ã€æŒ‡æ ‡ç›‘æ§-å¸¸ä½¿ç”¨çš„ç«¯ç‚¹åŠå¼€å¯ä¸ç¦ç”¨"><a href="#78ã€æŒ‡æ ‡ç›‘æ§-å¸¸ä½¿ç”¨çš„ç«¯ç‚¹åŠå¼€å¯ä¸ç¦ç”¨" class="headerlink" title="78ã€æŒ‡æ ‡ç›‘æ§-å¸¸ä½¿ç”¨çš„ç«¯ç‚¹åŠå¼€å¯ä¸ç¦ç”¨"></a>78ã€æŒ‡æ ‡ç›‘æ§-å¸¸ä½¿ç”¨çš„ç«¯ç‚¹åŠå¼€å¯ä¸ç¦ç”¨</h2><h3 id="å¸¸ä½¿ç”¨çš„ç«¯ç‚¹"><a href="#å¸¸ä½¿ç”¨çš„ç«¯ç‚¹" class="headerlink" title="å¸¸ä½¿ç”¨çš„ç«¯ç‚¹"></a>å¸¸ä½¿ç”¨çš„ç«¯ç‚¹</h3><table><thead><tr><th>ID</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>auditevents</code></td><td>æš´éœ²å½“å‰åº”ç”¨ç¨‹åºçš„å®¡æ ¸äº‹ä»¶ä¿¡æ¯ã€‚éœ€è¦ä¸€ä¸ª<code>AuditEventRepositoryç»„ä»¶</code>ã€‚</td></tr><tr><td><code>beans</code></td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ‰€æœ‰Spring Beançš„å®Œæ•´åˆ—è¡¨ã€‚</td></tr><tr><td><code>caches</code></td><td>æš´éœ²å¯ç”¨çš„ç¼“å­˜ã€‚</td></tr><tr><td><code>conditions</code></td><td>æ˜¾ç¤ºè‡ªåŠ¨é…ç½®çš„æ‰€æœ‰æ¡ä»¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŒ¹é…æˆ–ä¸åŒ¹é…çš„åŸå› ã€‚</td></tr><tr><td><code>configprops</code></td><td>æ˜¾ç¤ºæ‰€æœ‰<code>@ConfigurationProperties</code>ã€‚</td></tr><tr><td><code>env</code></td><td>æš´éœ²Springçš„å±æ€§<code>ConfigurableEnvironment</code></td></tr><tr><td><code>flyway</code></td><td>æ˜¾ç¤ºå·²åº”ç”¨çš„æ‰€æœ‰Flywayæ•°æ®åº“è¿ç§»ã€‚ éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ª<code>Flyway</code>ç»„ä»¶ã€‚</td></tr><tr><td><code>health</code></td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶å†µä¿¡æ¯ã€‚</td></tr><tr><td><code>httptrace</code></td><td>æ˜¾ç¤ºHTTPè·Ÿè¸ªä¿¡æ¯ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œæœ€è¿‘100ä¸ªHTTPè¯·æ±‚-å“åº”ï¼‰ã€‚éœ€è¦ä¸€ä¸ª<code>HttpTraceRepository</code>ç»„ä»¶ã€‚</td></tr><tr><td><code>info</code></td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¿¡æ¯ã€‚</td></tr><tr><td><code>integrationgraph</code></td><td>æ˜¾ç¤ºSpring <code>integrationgraph</code> ã€‚éœ€è¦ä¾èµ–<code>spring-integration-core</code>ã€‚</td></tr><tr><td><code>loggers</code></td><td>æ˜¾ç¤ºå’Œä¿®æ”¹åº”ç”¨ç¨‹åºä¸­æ—¥å¿—çš„é…ç½®ã€‚</td></tr><tr><td><code>liquibase</code></td><td>æ˜¾ç¤ºå·²åº”ç”¨çš„æ‰€æœ‰Liquibaseæ•°æ®åº“è¿ç§»ã€‚éœ€è¦ä¸€ä¸ªæˆ–å¤šä¸ª<code>Liquibase</code>ç»„ä»¶ã€‚</td></tr><tr><td><code>metrics</code></td><td>æ˜¾ç¤ºå½“å‰åº”ç”¨ç¨‹åºçš„â€œæŒ‡æ ‡â€ä¿¡æ¯ã€‚</td></tr><tr><td><code>mappings</code></td><td>æ˜¾ç¤ºæ‰€æœ‰<code>@RequestMapping</code>è·¯å¾„åˆ—è¡¨ã€‚</td></tr><tr><td><code>scheduledtasks</code></td><td>æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­çš„è®¡åˆ’ä»»åŠ¡ã€‚</td></tr><tr><td><code>sessions</code></td><td>å…è®¸ä»Spring Sessionæ”¯æŒçš„ä¼šè¯å­˜å‚¨ä¸­æ£€ç´¢å’Œåˆ é™¤ç”¨æˆ·ä¼šè¯ã€‚éœ€è¦ä½¿ç”¨Spring Sessionçš„åŸºäºServletçš„Webåº”ç”¨ç¨‹åºã€‚</td></tr><tr><td><code>shutdown</code></td><td>ä½¿åº”ç”¨ç¨‹åºæ­£å¸¸å…³é—­ã€‚é»˜è®¤ç¦ç”¨ã€‚</td></tr><tr><td><code>startup</code></td><td>æ˜¾ç¤ºç”±<code>ApplicationStartup</code>æ”¶é›†çš„å¯åŠ¨æ­¥éª¤æ•°æ®ã€‚éœ€è¦ä½¿ç”¨<code>SpringApplication</code>è¿›è¡Œé…ç½®<code>BufferingApplicationStartup</code>ã€‚</td></tr><tr><td><code>threaddump</code></td><td>æ‰§è¡Œçº¿ç¨‹è½¬å‚¨ã€‚</td></tr></tbody></table><p>å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºæ˜¯Webåº”ç”¨ç¨‹åºï¼ˆSpring MVCï¼ŒSpring WebFluxæˆ–Jerseyï¼‰ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é™„åŠ ç«¯ç‚¹ï¼š</p><table><thead><tr><th>ID</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>heapdump</code></td><td>è¿”å›<code>hprof</code>å †è½¬å‚¨æ–‡ä»¶ã€‚</td></tr><tr><td><code>jolokia</code></td><td>é€šè¿‡HTTPæš´éœ²JMX beanï¼ˆéœ€è¦å¼•å…¥Jolokiaï¼Œä¸é€‚ç”¨äºWebFluxï¼‰ã€‚éœ€è¦å¼•å…¥ä¾èµ–<code>jolokia-core</code>ã€‚</td></tr><tr><td><code>logfile</code></td><td>è¿”å›æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ï¼ˆå¦‚æœå·²è®¾ç½®<code>logging.file.name</code>æˆ–<code>logging.file.path</code>å±æ€§ï¼‰ã€‚æ”¯æŒä½¿ç”¨HTTP<code>Range</code>æ ‡å¤´æ¥æ£€ç´¢éƒ¨åˆ†æ—¥å¿—æ–‡ä»¶çš„å†…å®¹ã€‚</td></tr><tr><td><code>prometheus</code></td><td>ä»¥PrometheusæœåŠ¡å™¨å¯ä»¥æŠ“å–çš„æ ¼å¼å…¬å¼€æŒ‡æ ‡ã€‚éœ€è¦ä¾èµ–<code>micrometer-registry-prometheus</code>ã€‚</td></tr></tbody></table><p>å…¶ä¸­æœ€å¸¸ç”¨çš„Endpointï¼š</p><ul><li><strong>Healthï¼šç›‘æ§çŠ¶å†µ</strong></li><li><strong>Metricsï¼šè¿è¡Œæ—¶æŒ‡æ ‡</strong></li><li><strong>Loggersï¼šæ—¥å¿—è®°å½•</strong></li></ul><h3 id="Health-Endpoint"><a href="#Health-Endpoint" class="headerlink" title="Health Endpoint"></a>Health Endpoint</h3><p>å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç”¨äºåœ¨äº‘å¹³å°ï¼Œå¹³å°ä¼šå®šæ—¶çš„æ£€æŸ¥åº”ç”¨çš„å¥åº·çŠ¶å†µï¼Œæˆ‘ä»¬å°±éœ€è¦Health Endpointå¯ä»¥ä¸ºå¹³å°è¿”å›å½“å‰åº”ç”¨çš„ä¸€ç³»åˆ—ç»„ä»¶å¥åº·çŠ¶å†µçš„é›†åˆã€‚</p><p>é‡è¦çš„å‡ ç‚¹ï¼š</p><ul><li>health endpointè¿”å›çš„ç»“æœï¼Œåº”è¯¥æ˜¯ä¸€ç³»åˆ—å¥åº·æ£€æŸ¥åçš„ä¸€ä¸ªæ±‡æ€»æŠ¥å‘Šã€‚</li><li>å¾ˆå¤šçš„å¥åº·æ£€æŸ¥é»˜è®¤å·²ç»è‡ªåŠ¨é…ç½®å¥½äº†ï¼Œæ¯”å¦‚ï¼šæ•°æ®åº“ã€redisç­‰ã€‚</li><li>å¯ä»¥å¾ˆå®¹æ˜“çš„æ·»åŠ è‡ªå®šä¹‰çš„å¥åº·æ£€æŸ¥æœºåˆ¶ã€‚</li></ul><h3 id="Metrics-Endpoint"><a href="#Metrics-Endpoint" class="headerlink" title="Metrics Endpoint"></a>Metrics Endpoint</h3><p>æä¾›è¯¦ç»†çš„ã€å±‚çº§çš„ã€ç©ºé—´æŒ‡æ ‡ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥è¢«pullï¼ˆä¸»åŠ¨æ¨é€ï¼‰æˆ–è€…pushï¼ˆè¢«åŠ¨è·å–ï¼‰æ–¹å¼å¾—åˆ°ï¼š</p><ul><li>é€šè¿‡Metricså¯¹æ¥å¤šç§ç›‘æ§ç³»ç»Ÿã€‚</li><li>ç®€åŒ–æ ¸å¿ƒMetricså¼€å‘ã€‚</li><li>æ·»åŠ è‡ªå®šä¹‰Metricsæˆ–è€…æ‰©å±•å·²æœ‰Metricsã€‚</li></ul><h3 id="å¼€å¯ä¸ç¦ç”¨Endpoints"><a href="#å¼€å¯ä¸ç¦ç”¨Endpoints" class="headerlink" title="å¼€å¯ä¸ç¦ç”¨Endpoints"></a>å¼€å¯ä¸ç¦ç”¨Endpoints</h3><ul><li>é»˜è®¤æ‰€æœ‰çš„Endpointé™¤è¿‡shutdownéƒ½æ˜¯å¼€å¯çš„ã€‚</li><li>éœ€è¦å¼€å¯æˆ–è€…ç¦ç”¨æŸä¸ªEndpointã€‚é…ç½®æ¨¡å¼ä¸º<code>management.endpoint.&lt;endpointName&gt;.enabled = true</code></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">management:</span><br>  <span class="hljs-attr">endpoint:</span><br>    <span class="hljs-attr">beans:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><ul><li>æˆ–è€…ç¦ç”¨æ‰€æœ‰çš„Endpointç„¶åæ‰‹åŠ¨å¼€å¯æŒ‡å®šçš„Endpointã€‚</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">management:</span><br>  <span class="hljs-attr">endpoints:</span><br>    <span class="hljs-attr">enabled-by-default:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">endpoint:</span><br>    <span class="hljs-attr">beans:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">health:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><h3 id="æš´éœ²Endpoints"><a href="#æš´éœ²Endpoints" class="headerlink" title="æš´éœ²Endpoints"></a>æš´éœ²Endpoints</h3><p>æ”¯æŒçš„æš´éœ²æ–¹å¼</p><ul><li>HTTPï¼šé»˜è®¤åªæš´éœ²healthå’Œinfoã€‚</li><li>JMXï¼šé»˜è®¤æš´éœ²æ‰€æœ‰Endpointã€‚</li><li>é™¤è¿‡healthå’Œinfoï¼Œå‰©ä¸‹çš„Endpointéƒ½åº”è¯¥è¿›è¡Œä¿æŠ¤è®¿é—®ã€‚å¦‚æœå¼•å…¥Spring Securityï¼Œåˆ™ä¼šé»˜è®¤é…ç½®å®‰å…¨è®¿é—®è§„åˆ™ã€‚</li></ul><table><thead><tr><th align="left">ID</th><th align="left">JMX</th><th align="left">Web</th></tr></thead><tbody><tr><td align="left"><code>auditevents</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>beans</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>caches</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>conditions</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>configprops</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>env</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>flyway</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>health</code></td><td align="left">Yes</td><td align="left">Yes</td></tr><tr><td align="left"><code>heapdump</code></td><td align="left">N&#x2F;A</td><td align="left">No</td></tr><tr><td align="left"><code>httptrace</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>info</code></td><td align="left">Yes</td><td align="left">Yes</td></tr><tr><td align="left"><code>integrationgraph</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>jolokia</code></td><td align="left">N&#x2F;A</td><td align="left">No</td></tr><tr><td align="left"><code>logfile</code></td><td align="left">N&#x2F;A</td><td align="left">No</td></tr><tr><td align="left"><code>loggers</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>liquibase</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>metrics</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>mappings</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>prometheus</code></td><td align="left">N&#x2F;A</td><td align="left">No</td></tr><tr><td align="left"><code>scheduledtasks</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>sessions</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>shutdown</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>startup</code></td><td align="left">Yes</td><td align="left">No</td></tr><tr><td align="left"><code>threaddump</code></td><td align="left">Yes</td><td align="left">No</td></tr></tbody></table><p>è‹¥è¦æ›´æ”¹å…¬å¼€çš„Endpointï¼Œè¯·é…ç½®ä»¥ä¸‹çš„åŒ…å«å’Œæ’é™¤å±æ€§ï¼š</p><table><thead><tr><th align="left">Property</th><th align="left">Default</th></tr></thead><tbody><tr><td align="left"><code>management.endpoints.jmx.exposure.exclude</code></td><td align="left"></td></tr><tr><td align="left"><code>management.endpoints.jmx.exposure.include</code></td><td align="left"><code>*</code></td></tr><tr><td align="left"><code>management.endpoints.web.exposure.exclude</code></td><td align="left"></td></tr><tr><td align="left"><code>management.endpoints.web.exposure.include</code></td><td align="left"><code>info, health</code></td></tr></tbody></table><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#production-ready-endpoints-exposing-endpoints">å®˜æ–¹æ–‡æ¡£ - Exposing Endpoints</a></p><h2 id="79ã€æŒ‡æ ‡ç›‘æ§-å®šåˆ¶Endpoint"><a href="#79ã€æŒ‡æ ‡ç›‘æ§-å®šåˆ¶Endpoint" class="headerlink" title="79ã€æŒ‡æ ‡ç›‘æ§-å®šåˆ¶Endpoint"></a>79ã€æŒ‡æ ‡ç›‘æ§-å®šåˆ¶Endpoint</h2><h3 id="å®šåˆ¶-Health-ä¿¡æ¯"><a href="#å®šåˆ¶-Health-ä¿¡æ¯" class="headerlink" title="å®šåˆ¶ Health ä¿¡æ¯"></a>å®šåˆ¶ Health ä¿¡æ¯</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">management:</span><br>    <span class="hljs-attr">health:</span><br>      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">show-details:</span> <span class="hljs-string">always</span> <span class="hljs-comment">#æ€»æ˜¯æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ã€‚å¯æ˜¾ç¤ºæ¯ä¸ªæ¨¡å—çš„çŠ¶æ€ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><p>é€šè¿‡å®ç°<code>HealthIndicator </code>æ¥å£ï¼Œæˆ–ç»§æ‰¿<code>MyComHealthIndicator </code>ç±»ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.actuate.health.Health;<br><span class="hljs-keyword">import</span> org.springframework.boot.actuate.health.HealthIndicator;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyHealthIndicator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HealthIndicator</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Health <span class="hljs-title function_">health</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">errorCode</span> <span class="hljs-operator">=</span> check(); <span class="hljs-comment">// perform some specific health check</span><br>        <span class="hljs-keyword">if</span> (errorCode != <span class="hljs-number">0</span>) &#123;<br>            <span class="hljs-keyword">return</span> Health.down().withDetail(<span class="hljs-string">&quot;Error Code&quot;</span>, errorCode).build();<br>        &#125;<br>        <span class="hljs-keyword">return</span> Health.up().build();<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">æ„å»ºHealth</span><br><span class="hljs-comment">Health build = Health.down()</span><br><span class="hljs-comment">                .withDetail(&quot;msg&quot;, &quot;error service&quot;)</span><br><span class="hljs-comment">                .withDetail(&quot;code&quot;, &quot;500&quot;)</span><br><span class="hljs-comment">                .withException(new RuntimeException())</span><br><span class="hljs-comment">                .build();</span><br><span class="hljs-comment">*/</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyComHealthIndicator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractHealthIndicator</span> &#123;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * çœŸå®çš„æ£€æŸ¥æ–¹æ³•</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> builder</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> Exception</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doHealthCheck</span><span class="hljs-params">(Health.Builder builder)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">//mongodbã€‚  è·å–è¿æ¥è¿›è¡Œæµ‹è¯•</span><br>        Map&lt;String,Object&gt; map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br>        <span class="hljs-comment">// æ£€æŸ¥å®Œæˆ</span><br>        <span class="hljs-keyword">if</span>(<span class="hljs-number">1</span> == <span class="hljs-number">2</span>)&#123;<br><span class="hljs-comment">//            builder.up(); //å¥åº·</span><br>            builder.status(Status.UP);<br>            map.put(<span class="hljs-string">&quot;count&quot;</span>,<span class="hljs-number">1</span>);<br>            map.put(<span class="hljs-string">&quot;ms&quot;</span>,<span class="hljs-number">100</span>);<br>        &#125;<span class="hljs-keyword">else</span> &#123;<br><span class="hljs-comment">//            builder.down();</span><br>            builder.status(Status.OUT_OF_SERVICE);<br>            map.put(<span class="hljs-string">&quot;err&quot;</span>,<span class="hljs-string">&quot;è¿æ¥è¶…æ—¶&quot;</span>);<br>            map.put(<span class="hljs-string">&quot;ms&quot;</span>,<span class="hljs-number">3000</span>);<br>        &#125;<br><br><br>        builder.withDetail(<span class="hljs-string">&quot;code&quot;</span>,<span class="hljs-number">100</span>)<br>                .withDetails(map);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®šåˆ¶infoä¿¡æ¯"><a href="#å®šåˆ¶infoä¿¡æ¯" class="headerlink" title="å®šåˆ¶infoä¿¡æ¯"></a>å®šåˆ¶infoä¿¡æ¯</h3><p>å¸¸ç”¨ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>ç¼–å†™é…ç½®æ–‡ä»¶</li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">info:</span><br>  <span class="hljs-attr">appName:</span> <span class="hljs-string">boot-admin</span><br>  <span class="hljs-attr">version:</span> <span class="hljs-number">2.0</span><span class="hljs-number">.1</span><br>  <span class="hljs-attr">mavenProjectName:</span> <span class="hljs-string">@project.artifactId@</span>  <span class="hljs-comment">#ä½¿ç”¨@@å¯ä»¥è·å–mavençš„pomæ–‡ä»¶å€¼</span><br>  <span class="hljs-attr">mavenProjectVersion:</span> <span class="hljs-string">@project.version@</span><br></code></pre></td></tr></table></figure><ul><li>ç¼–å†™InfoContributor</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Collections;<br><br><span class="hljs-keyword">import</span> org.springframework.boot.actuate.info.Info;<br><span class="hljs-keyword">import</span> org.springframework.boot.actuate.info.InfoContributor;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExampleInfoContributor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InfoContributor</span> &#123;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contribute</span><span class="hljs-params">(Info.Builder builder)</span> &#123;<br>        builder.withDetail(<span class="hljs-string">&quot;example&quot;</span>,<br>                Collections.singletonMap(<span class="hljs-string">&quot;key&quot;</span>, <span class="hljs-string">&quot;value&quot;</span>));<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p><a href="http://localhost:8080/actuator/info">http://localhost:8080/actuator/info</a> ä¼šè¾“å‡ºä»¥ä¸Šæ–¹å¼è¿”å›çš„æ‰€æœ‰infoä¿¡æ¯</p><h3 id="å®šåˆ¶Metricsä¿¡æ¯"><a href="#å®šåˆ¶Metricsä¿¡æ¯" class="headerlink" title="å®šåˆ¶Metricsä¿¡æ¯"></a>å®šåˆ¶Metricsä¿¡æ¯</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#production-ready-metrics-meter">Spring Bootæ”¯æŒçš„metrics</a></p><p>å¢åŠ å®šåˆ¶Metricsï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span>&#123;<br>    Counter counter;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyService</span><span class="hljs-params">(MeterRegistry meterRegistry)</span>&#123;<br>         counter = meterRegistry.counter(<span class="hljs-string">&quot;myservice.method.running.counter&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">hello</span><span class="hljs-params">()</span> &#123;<br>        counter.increment();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼</span><br><span class="hljs-meta">@Bean</span><br>MeterBinder <span class="hljs-title function_">queueSize</span><span class="hljs-params">(Queue queue)</span> &#123;<br>    <span class="hljs-keyword">return</span> (registry) -&gt; Gauge.builder(<span class="hljs-string">&quot;queueSize&quot;</span>, queue::size).register(registry);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="å®šåˆ¶Endpoint"><a href="#å®šåˆ¶Endpoint" class="headerlink" title="å®šåˆ¶Endpoint"></a>å®šåˆ¶Endpoint</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@Endpoint(id = &quot;container&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DockerEndpoint</span> &#123;<br><br>    <span class="hljs-meta">@ReadOperation</span><br>    <span class="hljs-keyword">public</span> Map <span class="hljs-title function_">getDockerInfo</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> Collections.singletonMap(<span class="hljs-string">&quot;info&quot;</span>,<span class="hljs-string">&quot;docker started...&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@WriteOperation</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">restartDocker</span><span class="hljs-params">()</span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;docker restarted....&quot;</span>);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><p>åœºæ™¯ï¼š</p><ul><li>å¼€å‘ReadinessEndpointæ¥ç®¡ç†ç¨‹åºæ˜¯å¦å°±ç»ªã€‚</li><li>å¼€å‘LivenessEndpointæ¥ç®¡ç†ç¨‹åºæ˜¯å¦å­˜æ´»ã€‚</li></ul><h2 id="80ã€æŒ‡æ ‡ç›‘æ§-Boot-Admin-Server"><a href="#80ã€æŒ‡æ ‡ç›‘æ§-Boot-Admin-Server" class="headerlink" title="80ã€æŒ‡æ ‡ç›‘æ§-Boot Admin Server"></a>80ã€æŒ‡æ ‡ç›‘æ§-Boot Admin Server</h2><p><a href="">å®˜æ–¹Github</a></p><p><a href="https://codecentric.github.io/spring-boot-admin/2.3.1/#getting-started">å®˜æ–¹æ–‡æ¡£</a></p><p>å¯è§†åŒ–æŒ‡æ ‡ç›‘æ§</p><blockquote><p>What is Spring Boot Admin?</p><p>codecentricâ€™s Spring Boot Admin is a community project to manage and monitor your <a href="http://projects.spring.io/spring-boot/">Spring Boot</a> Â® applications. The applications register with our Spring Boot Admin Client (via HTTP) or are discovered using Spring Cloud Â® (e.g. Eureka, Consul). The UI is just a Vue.js application on top of the Spring Boot Actuator endpoints.</p></blockquote><p><a href="https://codecentric.github.io/spring-boot-admin/2.3.1/#getting-started">å¼€å§‹ä½¿ç”¨æ–¹æ³•</a></p><h2 id="81ã€é«˜çº§ç‰¹æ€§-Profileç¯å¢ƒåˆ‡æ¢"><a href="#81ã€é«˜çº§ç‰¹æ€§-Profileç¯å¢ƒåˆ‡æ¢" class="headerlink" title="81ã€é«˜çº§ç‰¹æ€§-Profileç¯å¢ƒåˆ‡æ¢"></a>81ã€é«˜çº§ç‰¹æ€§-Profileç¯å¢ƒåˆ‡æ¢</h2><p>ä¸ºäº†æ–¹ä¾¿å¤šç¯å¢ƒé€‚é…ï¼ŒSpring Bootç®€åŒ–äº†profileåŠŸèƒ½ã€‚</p><ul><li>é»˜è®¤é…ç½®æ–‡ä»¶<code>application.yaml</code>ä»»ä½•æ—¶å€™éƒ½ä¼šåŠ è½½ã€‚</li><li>æŒ‡å®šç¯å¢ƒé…ç½®æ–‡ä»¶<code>application-&#123;env&#125;.yaml</code>ï¼Œ<code>env</code>é€šå¸¸æ›¿ä»£ä¸º<code>test</code>ï¼Œ</li><li>æ¿€æ´»æŒ‡å®šç¯å¢ƒ<ul><li>é…ç½®æ–‡ä»¶æ¿€æ´»ï¼š<code>spring.profiles.active=prod</code></li><li>å‘½ä»¤è¡Œæ¿€æ´»ï¼š<code>java -jar xxx.jar --spring.profiles.active=prod  --person.name=haha</code>ï¼ˆä¿®æ”¹é…ç½®æ–‡ä»¶çš„ä»»æ„å€¼ï¼Œ<strong>å‘½ä»¤è¡Œä¼˜å…ˆ</strong>ï¼‰</li></ul></li><li>é»˜è®¤é…ç½®ä¸ç¯å¢ƒé…ç½®åŒæ—¶ç”Ÿæ•ˆ</li><li>åŒåé…ç½®é¡¹ï¼Œprofileé…ç½®ä¼˜å…ˆ</li></ul><h3 id="Profileæ¡ä»¶è£…é…åŠŸèƒ½"><a href="#Profileæ¡ä»¶è£…é…åŠŸèƒ½" class="headerlink" title="@Profileæ¡ä»¶è£…é…åŠŸèƒ½"></a>@Profileæ¡ä»¶è£…é…åŠŸèƒ½</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Data</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(&quot;person&quot;)</span><span class="hljs-comment">//åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>&#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>&#125;<br></code></pre></td></tr></table></figure><p>application.properties</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span> <br>  <span class="hljs-attr">name:</span> <span class="hljs-string">lun</span><br>  <span class="hljs-attr">age:</span> <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><hr><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> &#123;<br><br>   String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span>;<br>   Integer <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span>;<br><br>&#125;<br><br><span class="hljs-meta">@Profile(&quot;test&quot;)</span><span class="hljs-comment">//åŠ è½½application-test.yamlé‡Œçš„</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(&quot;person&quot;)</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Worker</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Person</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>&#125;<br><br><span class="hljs-meta">@Profile(value = &#123;&quot;prod&quot;,&quot;default&quot;&#125;)</span><span class="hljs-comment">//åŠ è½½application-prod.yamlé‡Œçš„</span><br><span class="hljs-meta">@Component</span><br><span class="hljs-meta">@ConfigurationProperties(&quot;person&quot;)</span><br><span class="hljs-meta">@Data</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Boss</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Person</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> Integer age;<br>&#125;<br></code></pre></td></tr></table></figure><p>application-test.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">test-å¼ ä¸‰</span><br><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">7000</span><br></code></pre></td></tr></table></figure><p>application-prod.yaml</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">person:</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">prod-å¼ ä¸‰</span><br><br><span class="hljs-attr">server:</span><br>  <span class="hljs-attr">port:</span> <span class="hljs-number">8000</span><br></code></pre></td></tr></table></figure><p>application.properties</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># æ¿€æ´»prodé…ç½®æ–‡ä»¶</span><br><span class="hljs-attr">spring.profiles.active</span>=<span class="hljs-string">prod</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@Autowired</span><br><span class="hljs-keyword">private</span> Person person;<br><br><span class="hljs-meta">@GetMapping(&quot;/&quot;)</span><br><span class="hljs-keyword">public</span> String <span class="hljs-title function_">hello</span><span class="hljs-params">()</span>&#123;<br>    <span class="hljs-comment">//æ¿€æ´»äº†prodï¼Œåˆ™è¿”å›Bossï¼›æ¿€æ´»äº†testï¼Œåˆ™è¿”å›Worker</span><br>    <span class="hljs-keyword">return</span> person.getClass().toString();<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>@Profileè¿˜å¯ä»¥ä¿®é¥°åœ¨æ–¹æ³•ä¸Šï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Color</span> &#123;<br>&#125;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyConfig</span> &#123;<br><br>    <span class="hljs-meta">@Profile(&quot;prod&quot;)</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Color <span class="hljs-title function_">red</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Profile(&quot;test&quot;)</span><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> Color <span class="hljs-title function_">green</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>å¯ä»¥æ¿€æ´»ä¸€ç»„ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">spring.profiles.active</span>=<span class="hljs-string">production</span><br><br><span class="hljs-attr">spring.profiles.group.production[0]</span>=<span class="hljs-string">proddb</span><br><span class="hljs-attr">spring.profiles.group.production[1]</span>=<span class="hljs-string">prodmq</span><br></code></pre></td></tr></table></figure><h2 id="82ã€é«˜çº§ç‰¹æ€§-é…ç½®åŠ è½½ä¼˜å…ˆçº§"><a href="#82ã€é«˜çº§ç‰¹æ€§-é…ç½®åŠ è½½ä¼˜å…ˆçº§" class="headerlink" title="82ã€é«˜çº§ç‰¹æ€§-é…ç½®åŠ è½½ä¼˜å…ˆçº§"></a>82ã€é«˜çº§ç‰¹æ€§-é…ç½®åŠ è½½ä¼˜å…ˆçº§</h2><h3 id="å¤–éƒ¨åŒ–é…ç½®"><a href="#å¤–éƒ¨åŒ–é…ç½®" class="headerlink" title="å¤–éƒ¨åŒ–é…ç½®"></a>å¤–éƒ¨åŒ–é…ç½®</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#boot-features-external-config">å®˜æ–¹æ–‡æ¡£ - Externalized Configuration</a></p><p>Spring Boot uses a very particular <code>PropertySource</code> order that is designed to allow sensible overriding of values. Properties are considered in the following order (with values from lower items overriding earlier ones)ï¼ˆ1ä¼˜å…ˆçº§æœ€ä½ï¼Œ14ä¼˜å…ˆçº§æœ€é«˜ï¼‰:</p><ol><li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li><li><a href="https://docs.spring.io/spring/docs/5.3.3/javadoc-api/org/springframework/context/annotation/PropertySource.html"><code>@PropertySource</code></a> annotations on your <code>@Configuration</code> classes. Please note that such property sources are not added to the <code>Environment</code> until the application context is being refreshed. This is too late to configure certain properties such as <code>logging.*</code> and <code>spring.main.*</code> which are read before refresh begins.</li><li>Config data (such as <code>application.properties</code> files)</li><li>A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</li><li>OS environment variables.</li><li>Java System properties (<code>System.getProperties()</code>).</li><li>JNDI attributes from <code>java:comp/env</code>.</li><li><code>ServletContext</code> init parameters.</li><li><code>ServletConfig</code> init parameters.</li><li>Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</li><li>Command line arguments.</li><li><code>properties</code> attribute on your tests. Available on <a href="https://docs.spring.io/spring-boot/docs/2.4.2/api/org/springframework/boot/test/context/SpringBootTest.html"><code>@SpringBootTest</code></a> and the <a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests">test annotations for testing a particular slice of your application</a>.</li><li><a href="https://docs.spring.io/spring/docs/5.3.3/javadoc-api/org/springframework/test/context/TestPropertySource.html"><code>@TestPropertySource</code></a> annotations on your tests.</li><li><a href="https://docs.spring.io/spring-boot/docs/2.4.2/reference/htmlsingle/#using-boot-devtools-globalsettings">Devtools global settings properties</a> in the <code>$HOME/.config/spring-boot</code> directory when devtools is active.</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.stereotype.*;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.*;<br><br><span class="hljs-meta">@Component</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBean</span> &#123;<br><br>    <span class="hljs-meta">@Value(&quot;$&#123;name&#125;&quot;)</span><span class="hljs-comment">//ä»¥è¿™ç§æ–¹å¼å¯ä»¥è·å¾—é…ç½®å€¼</span><br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-comment">// ...</span><br><br>&#125;<br></code></pre></td></tr></table></figure><hr><ul><li>å¤–éƒ¨é…ç½®æº<ul><li>Javaå±æ€§æ–‡ä»¶ã€‚</li><li>YAMLæ–‡ä»¶ã€‚</li><li>ç¯å¢ƒå˜é‡ã€‚</li><li>å‘½ä»¤è¡Œå‚æ•°ã€‚</li></ul></li><li>é…ç½®æ–‡ä»¶æŸ¥æ‰¾ä½ç½®<ol><li>classpath æ ¹è·¯å¾„ã€‚</li><li>classpath æ ¹è·¯å¾„ä¸‹configç›®å½•ã€‚</li><li>jaråŒ…å½“å‰ç›®å½•ã€‚</li><li>jaråŒ…å½“å‰ç›®å½•çš„configç›®å½•ã€‚</li><li>&#x2F;configå­ç›®å½•çš„ç›´æ¥å­ç›®å½•ã€‚</li></ol></li><li>é…ç½®æ–‡ä»¶åŠ è½½é¡ºåºï¼š<ol><li>å½“å‰jaråŒ…å†…éƒ¨çš„<code>application.properties</code>å’Œ<code>application.yml</code>ã€‚</li><li>å½“å‰jaråŒ…å†…éƒ¨çš„<code>application-&#123;profile&#125;.properties</code> å’Œ <code>application-&#123;profile&#125;.yml</code>ã€‚</li><li>å¼•ç”¨çš„å¤–éƒ¨jaråŒ…çš„<code>application.properties</code>å’Œ<code>application.yml</code>ã€‚</li><li>å¼•ç”¨çš„å¤–éƒ¨jaråŒ…çš„<code>application-&#123;profile&#125;.properties</code>å’Œ<code>application-&#123;profile&#125;.yml</code>ã€‚</li></ol></li><li>æŒ‡å®šç¯å¢ƒä¼˜å…ˆï¼Œå¤–éƒ¨ä¼˜å…ˆï¼Œåé¢çš„å¯ä»¥è¦†ç›–å‰é¢çš„åŒåé…ç½®é¡¹ã€‚</li></ul><h2 id="83ã€é«˜çº§ç‰¹æ€§-è‡ªå®šä¹‰starterç»†èŠ‚"><a href="#83ã€é«˜çº§ç‰¹æ€§-è‡ªå®šä¹‰starterç»†èŠ‚" class="headerlink" title="83ã€é«˜çº§ç‰¹æ€§-è‡ªå®šä¹‰starterç»†èŠ‚"></a>83ã€é«˜çº§ç‰¹æ€§-è‡ªå®šä¹‰starterç»†èŠ‚</h2><h3 id="starterå¯åŠ¨åŸç†"><a href="#starterå¯åŠ¨åŸç†" class="headerlink" title="starterå¯åŠ¨åŸç†"></a>starterå¯åŠ¨åŸç†</h3><ul><li>starterçš„pom.xmlå¼•å…¥autoconfigureä¾èµ–</li></ul><pre><code class=" mermaid">graph LRA[starter] --&gt;B[autoconfigure]B --&gt; C[spring-boot-starter]</code></pre><ul><li><p>autoconfigureåŒ…ä¸­é…ç½®ä½¿ç”¨<code>META-INF/spring.factories</code>ä¸­<code>EnableAutoConfiguration</code>çš„å€¼ï¼Œä½¿å¾—é¡¹ç›®å¯åŠ¨åŠ è½½æŒ‡å®šçš„è‡ªåŠ¨é…ç½®ç±»</p></li><li><p>ç¼–å†™è‡ªåŠ¨é…ç½®ç±» <code>xxxAutoConfiguration</code> -&gt; <code>xxxxProperties</code></p></li><li><ul><li><code>@Configuration</code></li><li><code>@Conditional</code></li><li><code>@EnableConfigurationProperties</code></li><li><code>@Bean</code></li><li>â€¦â€¦</li></ul></li><li><p>å¼•å…¥starter â€” <code>xxxAutoConfiguration</code> â€” å®¹å™¨ä¸­æ”¾å…¥ç»„ä»¶ â€”- <code>ç»‘å®šxxxProperties</code> â€”- é…ç½®é¡¹</p></li></ul><h3 id="è‡ªå®šä¹‰starter"><a href="#è‡ªå®šä¹‰starter" class="headerlink" title="è‡ªå®šä¹‰starter"></a>è‡ªå®šä¹‰starter</h3><ul><li><p>ç›®æ ‡ï¼šåˆ›å»º<code>HelloService</code>çš„è‡ªå®šä¹‰starterã€‚</p></li><li><p>åˆ›å»ºä¸¤ä¸ªå·¥ç¨‹ï¼Œåˆ†åˆ«å‘½åä¸º<code>hello-spring-boot-starter</code>ï¼ˆæ™®é€šMavenå·¥ç¨‹ï¼‰ï¼Œ<code>hello-spring-boot-starter-autoconfigure</code>ï¼ˆéœ€ç”¨ç”¨åˆ°Spring Initializråˆ›å»ºçš„Mavenå·¥ç¨‹ï¼‰ã€‚</p></li><li><p><code>hello-spring-boot-starter</code>æ— éœ€ç¼–å†™ä»€ä¹ˆä»£ç ï¼Œåªéœ€è®©è¯¥å·¥ç¨‹å¼•å…¥<code>hello-spring-boot-starter-autoconfigure</code>ä¾èµ–ï¼š</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hello-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hello-spring-boot-starter-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li><code>hello-spring-boot-starter-autoconfigure</code>çš„pom.xmlå¦‚ä¸‹ï¼š</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hello-spring-boot-starter-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hello-spring-boot-starter-autoconfigure<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Boot<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>åˆ›å»º4ä¸ªæ–‡ä»¶ï¼š<ul><li><code>com/lun/hello/auto/HelloServiceAutoConfiguration</code></li><li><code>com/lun/hello/bean/HelloProperties</code></li><li><code>com/lun/hello/service/HelloService</code></li><li><code>src/main/resources/META-INF/spring.factories</code></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.lun.hello.bean.HelloProperties;<br><span class="hljs-keyword">import</span> com.lun.hello.service.HelloService;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;<br><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.EnableConfigurationProperties;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;<br><span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;<br><br><span class="hljs-meta">@Configuration</span><br><span class="hljs-meta">@ConditionalOnMissingBean(HelloService.class)</span><br><span class="hljs-meta">@EnableConfigurationProperties(HelloProperties.class)</span><span class="hljs-comment">//é»˜è®¤HelloPropertiesæ”¾åœ¨å®¹å™¨ä¸­</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloServiceAutoConfiguration</span> &#123;<br><br>    <span class="hljs-meta">@Bean</span><br>    <span class="hljs-keyword">public</span> HelloService <span class="hljs-title function_">helloService</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HelloService</span>();<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;<br><br><span class="hljs-meta">@ConfigurationProperties(&quot;hello&quot;)</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloProperties</span> &#123;<br>    <span class="hljs-keyword">private</span> String prefix;<br>    <span class="hljs-keyword">private</span> String suffix;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getPrefix</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> prefix;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPrefix</span><span class="hljs-params">(String prefix)</span> &#123;<br>        <span class="hljs-built_in">this</span>.prefix = prefix;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getSuffix</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> suffix;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setSuffix</span><span class="hljs-params">(String suffix)</span> &#123;<br>        <span class="hljs-built_in">this</span>.suffix = suffix;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.lun.hello.bean.HelloProperties;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * é»˜è®¤ä¸è¦æ”¾åœ¨å®¹å™¨ä¸­</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloService</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> HelloProperties helloProperties;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">sayHello</span><span class="hljs-params">(String userName)</span>&#123;<br>        <span class="hljs-keyword">return</span> helloProperties.getPrefix() + <span class="hljs-string">&quot;: &quot;</span> + userName + <span class="hljs-string">&quot; &gt; &quot;</span> + helloProperties.getSuffix();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment"># Auto Configure</span><br><span class="hljs-attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="hljs-string">\</span><br><span class="hljs-string">com.lun.hello.auto.HelloServiceAutoConfiguration</span><br></code></pre></td></tr></table></figure><ul><li><p>ç”¨mavenæ’ä»¶ï¼Œå°†ä¸¤å·¥ç¨‹installåˆ°æœ¬åœ°ã€‚</p></li><li><p>æ¥ä¸‹æ¥ï¼Œæµ‹è¯•ä½¿ç”¨è‡ªå®šä¹‰starterï¼Œç”¨Spring Initializråˆ›å»ºåä¸º<code>hello-spring-boot-starter-test</code>å·¥ç¨‹ï¼Œå¼•å…¥<code>hello-spring-boot-starter</code>ä¾èµ–ï¼Œå…¶pom.xmlå¦‚ä¸‹ï¼š</p></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.4.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hello-spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>hello-spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">description</span>&gt;</span>Demo project for Spring Boot<span class="hljs-tag">&lt;/<span class="hljs-name">description</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>1.8<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>        <span class="hljs-comment">&lt;!-- å¼•å…¥`hello-spring-boot-starter`ä¾èµ– --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.lun<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>hello-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure><ul><li>æ·»åŠ é…ç½®æ–‡ä»¶<code>application.properties</code>ï¼š</li></ul><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">hello.prefix</span>=<span class="hljs-string">hello</span><br><span class="hljs-attr">hello.suffix</span>=<span class="hljs-string">666</span><br></code></pre></td></tr></table></figure><ul><li>æ·»åŠ å•å…ƒæµ‹è¯•ç±»ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.lun.hello.service.HelloService;<span class="hljs-comment">//æ¥è‡ªè‡ªå®šä¹‰starter</span><br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Assertions;<br><span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;<br><span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;<br><br><span class="hljs-meta">@SpringBootTest</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloSpringBootStarterTestApplicationTests</span> &#123;<br><br>    <span class="hljs-meta">@Autowired</span><br>    <span class="hljs-keyword">private</span> HelloService helloService;<br><br>    <span class="hljs-meta">@Test</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoads</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// System.out.println(helloService.sayHello(&quot;lun&quot;));</span><br>        Assertions.assertEquals(<span class="hljs-string">&quot;hello: lun &gt; 666&quot;</span>, helloService.sayHello(<span class="hljs-string">&quot;lun&quot;</span>));<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="84ã€åŸç†è§£æ-SpringApplicationåˆ›å»ºåˆå§‹åŒ–æµç¨‹"><a href="#84ã€åŸç†è§£æ-SpringApplicationåˆ›å»ºåˆå§‹åŒ–æµç¨‹" class="headerlink" title="84ã€åŸç†è§£æ-SpringApplicationåˆ›å»ºåˆå§‹åŒ–æµç¨‹"></a>84ã€åŸç†è§£æ-SpringApplicationåˆ›å»ºåˆå§‹åŒ–æµç¨‹</h2><h3 id="SpringBootå¯åŠ¨è¿‡ç¨‹"><a href="#SpringBootå¯åŠ¨è¿‡ç¨‹" class="headerlink" title="SpringBootå¯åŠ¨è¿‡ç¨‹"></a>SpringBootå¯åŠ¨è¿‡ç¨‹</h3><p>Spring Bootåº”ç”¨çš„å¯åŠ¨ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;<br><br><span class="hljs-meta">@SpringBootApplication</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloSpringBootStarterTestApplication</span> &#123;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        SpringApplication.run(HelloSpringBootStarterTestApplication.class, args);<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringApplication</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigurableApplicationContext <span class="hljs-title function_">run</span><span class="hljs-params">(Class&lt;?&gt; primarySource, String... args)</span> &#123;<br><span class="hljs-keyword">return</span> run(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>&lt;?&gt;[] &#123; primarySource &#125;, args);<br>&#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ConfigurableApplicationContext <span class="hljs-title function_">run</span><span class="hljs-params">(Class&lt;?&gt;[] primarySources, String[] args)</span> &#123;<br><span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringApplication</span>(primarySources).run(args);<br>&#125;<br>    <br>    <span class="hljs-comment">//å…ˆçœ‹çœ‹new SpringApplication(primarySources)ï¼Œä¸‹ä¸€èŠ‚å†çœ‹çœ‹run()</span><br><span class="hljs-keyword">public</span> <span class="hljs-title function_">SpringApplication</span><span class="hljs-params">(Class&lt;?&gt;... primarySources)</span> &#123;<br><span class="hljs-built_in">this</span>(<span class="hljs-literal">null</span>, primarySources);<br>&#125;<br>    <br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SpringApplication</span><span class="hljs-params">(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources)</span> &#123;<br><span class="hljs-built_in">this</span>.resourceLoader = resourceLoader;<br>Assert.notNull(primarySources, <span class="hljs-string">&quot;PrimarySources must not be null&quot;</span>);<br><span class="hljs-built_in">this</span>.primarySources = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;(Arrays.asList(primarySources));<br>        <span class="hljs-comment">//WebApplicationTypeæ˜¯æšä¸¾ç±»ï¼Œæœ‰NONE,SERVLET,REACTIVE,ä¸‹è¡ŒwebApplicationTypeæ˜¯SERVLET</span><br><span class="hljs-built_in">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();<br>        <br>        <span class="hljs-comment">//åˆå§‹å¯åŠ¨å¼•å¯¼å™¨ï¼Œå»spring.factoriesæ–‡ä»¶ä¸­æ‰¾org.springframework.boot.Bootstrapperï¼Œä½†æˆ‘æ‰¾ä¸åˆ°å®ç°Bootstrapperæ¥å£çš„ç±»</span><br><span class="hljs-built_in">this</span>.bootstrappers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(getSpringFactoriesInstances(Bootstrapper.class));<br><br>        <span class="hljs-comment">//å»spring.factoriesæ‰¾ ApplicationContextInitializer</span><br>        setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));<br><br>        <span class="hljs-comment">//å»spring.factoriesæ‰¾ ApplicationListener</span><br>        setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));<br><br>        <span class="hljs-built_in">this</span>.mainApplicationClass = deduceMainApplicationClass();<br>&#125;<br> <br>    <span class="hljs-keyword">private</span> Class&lt;?&gt; deduceMainApplicationClass() &#123;<br><span class="hljs-keyword">try</span> &#123;<br>StackTraceElement[] stackTrace = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>().getStackTrace();<br><span class="hljs-keyword">for</span> (StackTraceElement stackTraceElement : stackTrace) &#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;main&quot;</span>.equals(stackTraceElement.getMethodName())) &#123;<br><span class="hljs-keyword">return</span> Class.forName(stackTraceElement.getClassName());<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">catch</span> (ClassNotFoundException ex) &#123;<br><span class="hljs-comment">// Swallow and continue</span><br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>&#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><p>spring.factoriesï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">...</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># Application Context Initializers</span><br><span class="hljs-attr">org.springframework.context.ApplicationContextInitializer</span>=<span class="hljs-string">\</span><br><span class="hljs-string">org.springframework.boot.context.ConfigurationWarningsApplicationContextInitializer,\</span><br><span class="hljs-string">org.springframework.boot.context.ContextIdApplicationContextInitializer,\</span><br><span class="hljs-string">org.springframework.boot.context.config.DelegatingApplicationContextInitializer,\</span><br><span class="hljs-string">org.springframework.boot.rsocket.context.RSocketPortInfoApplicationContextInitializer,\</span><br><span class="hljs-string">org.springframework.boot.web.context.ServerPortInfoApplicationContextInitializer</span><br><span class="hljs-comment"></span><br><span class="hljs-comment"># Application Listeners</span><br><span class="hljs-attr">org.springframework.context.ApplicationListener</span>=<span class="hljs-string">\</span><br><span class="hljs-string">org.springframework.boot.ClearCachesApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.builder.ParentContextCloserApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.context.FileEncodingApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.context.config.AnsiOutputApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.context.config.DelegatingApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.context.logging.LoggingApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.env.EnvironmentPostProcessorApplicationListener,\</span><br><span class="hljs-string">org.springframework.boot.liquibase.LiquibaseServiceLocatorApplicationListener</span><br><br><span class="hljs-attr">...</span><br><br></code></pre></td></tr></table></figure><h2 id="85ã€åŸç†è§£æ-SpringBootå®Œæ•´å¯åŠ¨è¿‡ç¨‹"><a href="#85ã€åŸç†è§£æ-SpringBootå®Œæ•´å¯åŠ¨è¿‡ç¨‹" class="headerlink" title="85ã€åŸç†è§£æ-SpringBootå®Œæ•´å¯åŠ¨è¿‡ç¨‹"></a>85ã€åŸç†è§£æ-SpringBootå®Œæ•´å¯åŠ¨è¿‡ç¨‹</h2><p>ç»§ç»­ä¸Šä¸€èŠ‚ï¼Œæ¥ç€è®¨è®º<code>return new SpringApplication(primarySources).run(args)</code>çš„<code>run</code>æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringApplication</span> &#123;<br>    <br>    ...<br>    <br><span class="hljs-keyword">public</span> ConfigurableApplicationContext <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> &#123;<br><span class="hljs-type">StopWatch</span> <span class="hljs-variable">stopWatch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StopWatch</span>();<span class="hljs-comment">//å¼€å§‹è®¡æ—¶å™¨</span><br>stopWatch.start();<span class="hljs-comment">//å¼€å§‹è®¡æ—¶</span><br>        <br>        <span class="hljs-comment">//1.</span><br>        <span class="hljs-comment">//åˆ›å»ºå¼•å¯¼ä¸Šä¸‹æ–‡ï¼ˆContextç¯å¢ƒï¼‰createBootstrapContext()</span><br>        <span class="hljs-comment">//è·å–åˆ°æ‰€æœ‰ä¹‹å‰çš„ bootstrappers æŒ¨ä¸ªæ‰§è¡Œ intitialize() æ¥å®Œæˆå¯¹å¼•å¯¼å¯åŠ¨å™¨ä¸Šä¸‹æ–‡ç¯å¢ƒè®¾ç½®</span><br><span class="hljs-type">DefaultBootstrapContext</span> <span class="hljs-variable">bootstrapContext</span> <span class="hljs-operator">=</span> createBootstrapContext();<br><br>        <span class="hljs-comment">//2.åˆ°æœ€åè¯¥æ–¹æ³•ä¼šè¿”å›è¿™context</span><br>        <span class="hljs-type">ConfigurableApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-comment">//3.è®©å½“å‰åº”ç”¨è¿›å…¥headlessæ¨¡å¼</span><br>        configureHeadlessProperty();<br>        <br>        <span class="hljs-comment">//4.è·å–æ‰€æœ‰ RunListenerï¼ˆè¿è¡Œç›‘å¬å™¨ï¼‰,ä¸ºäº†æ–¹ä¾¿æ‰€æœ‰Listenerè¿›è¡Œäº‹ä»¶æ„ŸçŸ¥</span><br><span class="hljs-type">SpringApplicationRunListeners</span> <span class="hljs-variable">listeners</span> <span class="hljs-operator">=</span> getRunListeners(args);<br><br>        <span class="hljs-comment">//5. éå† SpringApplicationRunListener è°ƒç”¨ starting æ–¹æ³•ï¼›</span><br><span class="hljs-comment">// ç›¸å½“äºé€šçŸ¥æ‰€æœ‰æ„Ÿå…´è¶£ç³»ç»Ÿæ­£åœ¨å¯åŠ¨è¿‡ç¨‹çš„äººï¼Œé¡¹ç›®æ­£åœ¨ startingã€‚</span><br>        listeners.starting(bootstrapContext, <span class="hljs-built_in">this</span>.mainApplicationClass);<br><span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//6.ä¿å­˜å‘½ä»¤è¡Œå‚æ•° ApplicationArguments</span><br><span class="hljs-type">ApplicationArguments</span> <span class="hljs-variable">applicationArguments</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultApplicationArguments</span>(args);<br><br>            <span class="hljs-comment">//7.å‡†å¤‡ç¯å¢ƒ</span><br>            <span class="hljs-type">ConfigurableEnvironment</span> <span class="hljs-variable">environment</span> <span class="hljs-operator">=</span> prepareEnvironment(listeners, bootstrapContext, applicationArguments);<br>configureIgnoreBeanInfo(environment);<br><br>            <span class="hljs-comment">/*æ‰“å°æ ‡å¿—</span><br><span class="hljs-comment">              .   ____          _            __ _ _</span><br><span class="hljs-comment">             /\\ / ___&#x27;_ __ _ _(_)_ __  __ _ \ \ \ \</span><br><span class="hljs-comment">            ( ( )\___ | &#x27;_ | &#x27;_| | &#x27;_ \/ _` | \ \ \ \</span><br><span class="hljs-comment">             \\/  ___)| |_)| | | | | || (_| |  ) ) ) )</span><br><span class="hljs-comment">              &#x27;  |____| .__|_| |_|_| |_\__, | / / / /</span><br><span class="hljs-comment">             =========|_|==============|___/=/_/_/_/</span><br><span class="hljs-comment">             :: Spring Boot ::                (v2.4.2)</span><br><span class="hljs-comment">            */</span><br>            <span class="hljs-type">Banner</span> <span class="hljs-variable">printedBanner</span> <span class="hljs-operator">=</span> printBanner(environment);<br>            <br>            <span class="hljs-comment">// åˆ›å»ºIOCå®¹å™¨ï¼ˆcreateApplicationContextï¼ˆï¼‰ï¼‰</span><br><span class="hljs-comment">// æ ¹æ®é¡¹ç›®ç±»å‹webApplicationTypeï¼ˆNONE,SERVLET,REACTIVEï¼‰åˆ›å»ºå®¹å™¨ï¼Œ</span><br><span class="hljs-comment">// å½“å‰ä¼šåˆ›å»º AnnotationConfigServletWebServerApplicationContext</span><br>context = createApplicationContext();<br>context.setApplicationStartup(<span class="hljs-built_in">this</span>.applicationStartup);<br>            <br>            <span class="hljs-comment">//8.å‡†å¤‡ApplicationContext IOCå®¹å™¨çš„åŸºæœ¬ä¿¡æ¯</span><br>prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);<br><span class="hljs-comment">//9.åˆ·æ–°IOCå®¹å™¨,åˆ›å»ºå®¹å™¨ä¸­çš„æ‰€æœ‰ç»„ä»¶,Springæ¡†æ¶çš„å†…å®¹</span><br>            refreshContext(context);<br><span class="hljs-comment">//è¯¥æ–¹æ³•æ²¡å†…å®¹ï¼Œå¤§æ¦‚ä¸ºå°†æ¥å¡«å…¥</span><br>afterRefresh(context, applicationArguments);<br>stopWatch.stop();<span class="hljs-comment">//åœæ­¢è®¡æ—¶</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.logStartupInfo) &#123;<span class="hljs-comment">//this.logStartupInfoé»˜è®¤æ˜¯true</span><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">StartupInfoLogger</span>(<span class="hljs-built_in">this</span>.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);<br>&#125;<br>            <span class="hljs-comment">//10.</span><br>listeners.started(context);<br>            <br>            <span class="hljs-comment">//11.è°ƒç”¨æ‰€æœ‰runners</span><br>callRunners(context, applicationArguments);<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable ex) &#123;<br>            <span class="hljs-comment">//13.</span><br>handleRunFailure(context, ex, listeners);<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(ex);<br>&#125;<br><br><span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">//12.</span><br>listeners.running(context);<br>&#125;<br><span class="hljs-keyword">catch</span> (Throwable ex) &#123;<br>            <span class="hljs-comment">//13.</span><br>handleRunFailure(context, ex, <span class="hljs-literal">null</span>);<br><span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(ex);<br>&#125;<br><span class="hljs-keyword">return</span> context;<br>&#125;<br> <br>    <span class="hljs-comment">//1. </span><br>    <span class="hljs-keyword">private</span> DefaultBootstrapContext <span class="hljs-title function_">createBootstrapContext</span><span class="hljs-params">()</span> &#123;<br><span class="hljs-type">DefaultBootstrapContext</span> <span class="hljs-variable">bootstrapContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultBootstrapContext</span>();<br><span class="hljs-built_in">this</span>.bootstrappers.forEach((initializer) -&gt; initializer.intitialize(bootstrapContext));<br><span class="hljs-keyword">return</span> bootstrapContext;<br>&#125;<br>    <br>    <span class="hljs-comment">//3.</span><br>   <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureHeadlessProperty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">//this.headlessé»˜è®¤ä¸ºtrue</span><br>System.setProperty(SYSTEM_PROPERTY_JAVA_AWT_HEADLESS,<br>System.getProperty(SYSTEM_PROPERTY_JAVA_AWT_HEADLESS, Boolean.toString(<span class="hljs-built_in">this</span>.headless)));<br>&#125;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">SYSTEM_PROPERTY_JAVA_AWT_HEADLESS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;java.awt.headless&quot;</span>;<br>    <br>    <span class="hljs-comment">//4.</span><br>    <span class="hljs-keyword">private</span> SpringApplicationRunListeners <span class="hljs-title function_">getRunListeners</span><span class="hljs-params">(String[] args)</span> &#123;<br>Class&lt;?&gt;[] types = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>&lt;?&gt;[] &#123; SpringApplication.class, String[].class &#125;;<br><span class="hljs-comment">//getSpringFactoriesInstances å» spring.factories æ‰¾ SpringApplicationRunListener</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpringApplicationRunListeners</span>(logger,<br>getSpringFactoriesInstances(SpringApplicationRunListener.class, types, <span class="hljs-built_in">this</span>, args),<br><span class="hljs-built_in">this</span>.applicationStartup);<br>&#125;<br>    <br>    <span class="hljs-comment">//7.å‡†å¤‡ç¯å¢ƒ</span><br>    <span class="hljs-keyword">private</span> ConfigurableEnvironment <span class="hljs-title function_">prepareEnvironment</span><span class="hljs-params">(SpringApplicationRunListeners listeners,</span><br><span class="hljs-params">DefaultBootstrapContext bootstrapContext, ApplicationArguments applicationArguments)</span> &#123;<br><span class="hljs-comment">// Create and configure the environment</span><br>        <span class="hljs-comment">//è¿”å›æˆ–è€…åˆ›å»ºåŸºç¡€ç¯å¢ƒä¿¡æ¯å¯¹è±¡ï¼Œå¦‚ï¼šStandardServletEnvironment, StandardReactiveWebEnvironment</span><br><span class="hljs-type">ConfigurableEnvironment</span> <span class="hljs-variable">environment</span> <span class="hljs-operator">=</span> getOrCreateEnvironment();<br>        <span class="hljs-comment">//é…ç½®ç¯å¢ƒä¿¡æ¯å¯¹è±¡,è¯»å–æ‰€æœ‰çš„é…ç½®æºçš„é…ç½®å±æ€§å€¼ã€‚</span><br>configureEnvironment(environment, applicationArguments.getSourceArgs());<br><span class="hljs-comment">//ç»‘å®šç¯å¢ƒä¿¡æ¯</span><br>        ConfigurationPropertySources.attach(environment);<br>        <span class="hljs-comment">//7.1 é€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨å½“å‰ç¯å¢ƒå‡†å¤‡å®Œæˆ</span><br>listeners.environmentPrepared(bootstrapContext, environment);<br>DefaultPropertiesPropertySource.moveToEnd(environment);<br>configureAdditionalProfiles(environment);<br>bindToSpringApplication(environment);<br><span class="hljs-keyword">if</span> (!<span class="hljs-built_in">this</span>.isCustomEnvironment) &#123;<br>environment = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EnvironmentConverter</span>(getClassLoader()).convertEnvironmentIfNecessary(environment,<br>deduceEnvironmentClass());<br>&#125;<br>ConfigurationPropertySources.attach(environment);<br><span class="hljs-keyword">return</span> environment;<br>&#125;<br>    <br>    <span class="hljs-comment">//8.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">prepareContext</span><span class="hljs-params">(DefaultBootstrapContext bootstrapContext, ConfigurableApplicationContext context,</span><br><span class="hljs-params">ConfigurableEnvironment environment, SpringApplicationRunListeners listeners,</span><br><span class="hljs-params">ApplicationArguments applicationArguments, Banner printedBanner)</span> &#123;<br><span class="hljs-comment">//ä¿å­˜ç¯å¢ƒä¿¡æ¯</span><br>        context.setEnvironment(environment);<br>        <span class="hljs-comment">//IOCå®¹å™¨çš„åç½®å¤„ç†æµç¨‹</span><br>postProcessApplicationContext(context);<br>        <span class="hljs-comment">//åº”ç”¨åˆå§‹åŒ–å™¨</span><br>applyInitializers(context);<br>        <span class="hljs-comment">//8.1 éå†æ‰€æœ‰çš„ listener è°ƒç”¨ contextPreparedã€‚</span><br>        <span class="hljs-comment">//EventPublishRunListenré€šçŸ¥æ‰€æœ‰çš„ç›‘å¬å™¨contextPrepared</span><br>listeners.contextPrepared(context);<br>bootstrapContext.close(context);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.logStartupInfo) &#123;<br>logStartupInfo(context.getParent() == <span class="hljs-literal">null</span>);<br>logStartupProfileInfo(context);<br>&#125;<br><span class="hljs-comment">// Add boot specific singleton beans</span><br><span class="hljs-type">ConfigurableListableBeanFactory</span> <span class="hljs-variable">beanFactory</span> <span class="hljs-operator">=</span> context.getBeanFactory();<br>beanFactory.registerSingleton(<span class="hljs-string">&quot;springApplicationArguments&quot;</span>, applicationArguments);<br><span class="hljs-keyword">if</span> (printedBanner != <span class="hljs-literal">null</span>) &#123;<br>beanFactory.registerSingleton(<span class="hljs-string">&quot;springBootBanner&quot;</span>, printedBanner);<br>&#125;<br><span class="hljs-keyword">if</span> (beanFactory <span class="hljs-keyword">instanceof</span> DefaultListableBeanFactory) &#123;<br>((DefaultListableBeanFactory) beanFactory)<br>.setAllowBeanDefinitionOverriding(<span class="hljs-built_in">this</span>.allowBeanDefinitionOverriding);<br>&#125;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.lazyInitialization) &#123;<br>context.addBeanFactoryPostProcessor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LazyInitializationBeanFactoryPostProcessor</span>());<br>&#125;<br><span class="hljs-comment">// Load the sources</span><br>Set&lt;Object&gt; sources = getAllSources();<br>Assert.notEmpty(sources, <span class="hljs-string">&quot;Sources must not be empty&quot;</span>);<br>load(context, sources.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[<span class="hljs-number">0</span>]));<br>        <span class="hljs-comment">//8.2</span><br>listeners.contextLoaded(context);<br>&#125;<br><br>    <span class="hljs-comment">//11.è°ƒç”¨æ‰€æœ‰runners</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">callRunners</span><span class="hljs-params">(ApplicationContext context, ApplicationArguments args)</span> &#123;<br>List&lt;Object&gt; runners = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <br>        <span class="hljs-comment">//è·å–å®¹å™¨ä¸­çš„ ApplicationRunner</span><br>runners.addAll(context.getBeansOfType(ApplicationRunner.class).values());<br><span class="hljs-comment">//è·å–å®¹å™¨ä¸­çš„  CommandLineRunner</span><br>        runners.addAll(context.getBeansOfType(CommandLineRunner.class).values());<br>        <span class="hljs-comment">//åˆå¹¶æ‰€æœ‰runnerå¹¶ä¸”æŒ‰ç…§@Orderè¿›è¡Œæ’åº</span><br>AnnotationAwareOrderComparator.sort(runners);<br>        <span class="hljs-comment">//éå†æ‰€æœ‰çš„runnerã€‚è°ƒç”¨ run æ–¹æ³•</span><br><span class="hljs-keyword">for</span> (Object runner : <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedHashSet</span>&lt;&gt;(runners)) &#123;<br><span class="hljs-keyword">if</span> (runner <span class="hljs-keyword">instanceof</span> ApplicationRunner) &#123;<br>callRunner((ApplicationRunner) runner, args);<br>&#125;<br><span class="hljs-keyword">if</span> (runner <span class="hljs-keyword">instanceof</span> CommandLineRunner) &#123;<br>callRunner((CommandLineRunner) runner, args);<br>&#125;<br>&#125;<br>&#125;<br>    <br>    <span class="hljs-comment">//13.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRunFailure</span><span class="hljs-params">(ConfigurableApplicationContext context, Throwable exception,</span><br><span class="hljs-params">SpringApplicationRunListeners listeners)</span> &#123;<br><span class="hljs-keyword">try</span> &#123;<br><span class="hljs-keyword">try</span> &#123;<br>handleExitCode(context, exception);<br><span class="hljs-keyword">if</span> (listeners != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-comment">//14.</span><br>listeners.failed(context, exception);<br>&#125;<br>&#125;<br><span class="hljs-keyword">finally</span> &#123;<br>reportFailure(getExceptionReporters(context), exception);<br><span class="hljs-keyword">if</span> (context != <span class="hljs-literal">null</span>) &#123;<br>context.close();<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">catch</span> (Exception ex) &#123;<br>logger.warn(<span class="hljs-string">&quot;Unable to close ApplicationContext&quot;</span>, ex);<br>&#125;<br>ReflectionUtils.rethrowRuntimeException(exception);<br>&#125;<br>    <br>    ...<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//2. new SpringApplication(primarySources).run(args) æœ€åè¿”å›çš„æ¥å£ç±»å‹</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ConfigurableApplicationContext</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ApplicationContext</span>, Lifecycle, Closeable &#123;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">CONFIG_LOCATION_DELIMITERS</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;,; \t\n&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">CONVERSION_SERVICE_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;conversionService&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">LOAD_TIME_WEAVER_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;loadTimeWeaver&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">ENVIRONMENT_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;environment&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">SYSTEM_PROPERTIES_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;systemProperties&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">SYSTEM_ENVIRONMENT_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;systemEnvironment&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">APPLICATION_STARTUP_BEAN_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;applicationStartup&quot;</span>;<br>    <span class="hljs-type">String</span> <span class="hljs-variable">SHUTDOWN_HOOK_THREAD_NAME</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;SpringContextShutdownHook&quot;</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String var1)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setParent</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> ApplicationContext var1)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setEnvironment</span><span class="hljs-params">(ConfigurableEnvironment var1)</span>;<br><br>    ConfigurableEnvironment <span class="hljs-title function_">getEnvironment</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setApplicationStartup</span><span class="hljs-params">(ApplicationStartup var1)</span>;<br><br>    ApplicationStartup <span class="hljs-title function_">getApplicationStartup</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addBeanFactoryPostProcessor</span><span class="hljs-params">(BeanFactoryPostProcessor var1)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addApplicationListener</span><span class="hljs-params">(ApplicationListener&lt;?&gt; var1)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">setClassLoader</span><span class="hljs-params">(ClassLoader var1)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProtocolResolver</span><span class="hljs-params">(ProtocolResolver var1)</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">refresh</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> BeansException, IllegalStateException;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerShutdownHook</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">close</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">isActive</span><span class="hljs-params">()</span>;<br><br>    ConfigurableListableBeanFactory <span class="hljs-title function_">getBeanFactory</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IllegalStateException;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">#4.</span><br><span class="hljs-comment">#spring.factories</span><br><span class="hljs-comment"># Run Listeners</span><br><span class="hljs-attr">org.springframework.boot.SpringApplicationRunListener</span>=<span class="hljs-string">\</span><br><span class="hljs-string">org.springframework.boot.context.event.EventPublishingRunListener</span><br></code></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringApplicationRunListeners</span> &#123;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Log log;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;SpringApplicationRunListener&gt; listeners;<br><br><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApplicationStartup applicationStartup;<br><br>SpringApplicationRunListeners(Log log, Collection&lt;? <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SpringApplicationRunListener</span>&gt; listeners,<br>ApplicationStartup applicationStartup) &#123;<br><span class="hljs-built_in">this</span>.log = log;<br><span class="hljs-built_in">this</span>.listeners = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(listeners);<br><span class="hljs-built_in">this</span>.applicationStartup = applicationStartup;<br>&#125;<br><br>    <span class="hljs-comment">//5.éå† SpringApplicationRunListener è°ƒç”¨ starting æ–¹æ³•ï¼›</span><br><span class="hljs-comment">//ç›¸å½“äºé€šçŸ¥æ‰€æœ‰æ„Ÿå…´è¶£ç³»ç»Ÿæ­£åœ¨å¯åŠ¨è¿‡ç¨‹çš„äººï¼Œé¡¹ç›®æ­£åœ¨ startingã€‚</span><br><span class="hljs-keyword">void</span> <span class="hljs-title function_">starting</span><span class="hljs-params">(ConfigurableBootstrapContext bootstrapContext, Class&lt;?&gt; mainApplicationClass)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.starting&quot;</span>, (listener) -&gt; listener.starting(bootstrapContext),<br>(step) -&gt; &#123;<br><span class="hljs-keyword">if</span> (mainApplicationClass != <span class="hljs-literal">null</span>) &#123;<br>step.tag(<span class="hljs-string">&quot;mainApplicationClass&quot;</span>, mainApplicationClass.getName());<br>&#125;<br>&#125;);<br>&#125;<br>    <br>    <span class="hljs-comment">//7.1</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">environmentPrepared</span><span class="hljs-params">(ConfigurableBootstrapContext bootstrapContext, ConfigurableEnvironment environment)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.environment-prepared&quot;</span>,<br>(listener) -&gt; listener.environmentPrepared(bootstrapContext, environment));<br>&#125;<br>    <br>    <span class="hljs-comment">//8.1</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextPrepared</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.context-prepared&quot;</span>, (listener) -&gt; listener.contextPrepared(context));<br>&#125;<br>    <br>    <span class="hljs-comment">//8.2</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoaded</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.context-loaded&quot;</span>, (listener) -&gt; listener.contextLoaded(context));<br>&#125;<br>    <br>    <span class="hljs-comment">//10.</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">started</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.started&quot;</span>, (listener) -&gt; listener.started(context));<br>&#125;<br>    <br>    <span class="hljs-comment">//12.</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">running</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.running&quot;</span>, (listener) -&gt; listener.running(context));<br>&#125;<br>    <br>    <span class="hljs-comment">//14.</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">failed</span><span class="hljs-params">(ConfigurableApplicationContext context, Throwable exception)</span> &#123;<br>doWithListeners(<span class="hljs-string">&quot;spring.boot.application.failed&quot;</span>,<br>(listener) -&gt; callFailedListener(listener, context, exception), (step) -&gt; &#123;<br>step.tag(<span class="hljs-string">&quot;exception&quot;</span>, exception.getClass().toString());<br>step.tag(<span class="hljs-string">&quot;message&quot;</span>, exception.getMessage());<br>&#125;);<br>&#125;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doWithListeners</span><span class="hljs-params">(String stepName, Consumer&lt;SpringApplicationRunListener&gt; listenerAction,</span><br><span class="hljs-params">Consumer&lt;StartupStep&gt; stepAction)</span> &#123;<br><span class="hljs-type">StartupStep</span> <span class="hljs-variable">step</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.applicationStartup.start(stepName);<br><span class="hljs-built_in">this</span>.listeners.forEach(listenerAction);<br><span class="hljs-keyword">if</span> (stepAction != <span class="hljs-literal">null</span>) &#123;<br>stepAction.accept(step);<br>&#125;<br>step.end();<br>&#125;<br>    <br>    ...<br>    <br>&#125;<br></code></pre></td></tr></table></figure><h2 id="86ã€åŸç†è§£æ-è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬ç»„ä»¶"><a href="#86ã€åŸç†è§£æ-è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬ç»„ä»¶" class="headerlink" title="86ã€åŸç†è§£æ-è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬ç»„ä»¶"></a>86ã€åŸç†è§£æ-è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬ç»„ä»¶</h2><p><code>MyApplicationContextInitializer.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContextInitializer;<br><span class="hljs-keyword">import</span> org.springframework.context.ConfigurableApplicationContext;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationContextInitializer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationContextInitializer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">(ConfigurableApplicationContext applicationContext)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MyApplicationContextInitializer ....initialize.... &quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>MyApplicationListener.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationEvent;<br><span class="hljs-keyword">import</span> org.springframework.context.ApplicationListener;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationListener</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onApplicationEvent</span><span class="hljs-params">(ApplicationEvent event)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MyApplicationListener.....onApplicationEvent...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>MyApplicationRunner.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.ApplicationArguments;<br><span class="hljs-keyword">import</span> org.springframework.boot.ApplicationRunner;<br><span class="hljs-keyword">import</span> org.springframework.core.annotation.Order;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><br><br><span class="hljs-meta">@Order(1)</span><br><span class="hljs-meta">@Component</span><span class="hljs-comment">//æ”¾å…¥å®¹å™¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplicationRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationRunner</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(ApplicationArguments args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        System.out.println(<span class="hljs-string">&quot;MyApplicationRunner...run...&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>MyCommandLineRunner.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.CommandLineRunner;<br><span class="hljs-keyword">import</span> org.springframework.core.annotation.Order;<br><span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åº”ç”¨å¯åŠ¨åšä¸€ä¸ªä¸€æ¬¡æ€§äº‹æƒ…</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">@Order(2)</span><br><span class="hljs-meta">@Component</span><span class="hljs-comment">//æ”¾å…¥å®¹å™¨</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyCommandLineRunner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CommandLineRunner</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">(String... args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        System.out.println(<span class="hljs-string">&quot;MyCommandLineRunner....run....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>MySpringApplicationRunListener.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> org.springframework.boot.ConfigurableBootstrapContext;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;<br><span class="hljs-keyword">import</span> org.springframework.boot.SpringApplicationRunListener;<br><span class="hljs-keyword">import</span> org.springframework.context.ConfigurableApplicationContext;<br><span class="hljs-keyword">import</span> org.springframework.core.env.ConfigurableEnvironment;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MySpringApplicationRunListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">SpringApplicationRunListener</span> &#123;<br><br>    <span class="hljs-keyword">private</span> SpringApplication application;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MySpringApplicationRunListener</span><span class="hljs-params">(SpringApplication application, String[] args)</span>&#123;<br>        <span class="hljs-built_in">this</span>.application = application;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">starting</span><span class="hljs-params">(ConfigurableBootstrapContext bootstrapContext)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....starting....&quot;</span>);<br><br>    &#125;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">environmentPrepared</span><span class="hljs-params">(ConfigurableBootstrapContext bootstrapContext, ConfigurableEnvironment environment)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....environmentPrepared....&quot;</span>);<br>    &#125;<br><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextPrepared</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....contextPrepared....&quot;</span>);<br><br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">contextLoaded</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....contextLoaded....&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">started</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....started....&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">running</span><span class="hljs-params">(ConfigurableApplicationContext context)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....running....&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">failed</span><span class="hljs-params">(ConfigurableApplicationContext context, Throwable exception)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;MySpringApplicationRunListener....failed....&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>æ³¨å†Œ<code>MyApplicationContextInitializer</code>ï¼Œ<code>MyApplicationListener</code>ï¼Œ<code>MySpringApplicationRunListener</code>:</p><p><code>resources / META-INF / spring.factories</code>:</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">org.springframework.context.ApplicationContextInitializer</span>=<span class="hljs-string">\</span><br><span class="hljs-string">  com.lun.boot.listener.MyApplicationContextInitializer</span><br><br><span class="hljs-attr">org.springframework.context.ApplicationListener</span>=<span class="hljs-string">\</span><br><span class="hljs-string">  com.lun.boot.listener.MyApplicationListener</span><br><br><span class="hljs-attr">org.springframework.boot.SpringApplicationRunListener</span>=<span class="hljs-string">\</span><br><span class="hljs-string">  com.lun.boot.listener.MySpringApplicationRunListener</span><br></code></pre></td></tr></table></figure><h2 id="87ã€åä¼šæœ‰æœŸ"><a href="#87ã€åä¼šæœ‰æœŸ" class="headerlink" title="87ã€åä¼šæœ‰æœŸ"></a>87ã€åä¼šæœ‰æœŸ</h2><blockquote><p>è·¯æ¼«æ¼«å…¶ä¿®è¿œå…®ï¼Œå¾å°†ä¸Šä¸‹è€Œæ±‚ç´¢ã€‚</p></blockquote><blockquote><p>çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</p></blockquote><ul><li><p>Spring Boot 2 åœºæ™¯æ•´åˆç¯‡</p><ul><li>è™šæ‹ŸåŒ–æŠ€æœ¯</li><li>å®‰å…¨æ§åˆ¶</li><li>ç¼“å­˜æŠ€æœ¯</li><li>æ¶ˆæ¯ä¸­é—´ä»¶</li><li>å¯¹è±¡å­˜å‚¨</li><li>å®šæ—¶è°ƒåº¦</li><li>å¼‚æ­¥ä»»åŠ¡</li><li>åˆ†å¸ƒå¼ç³»ç»Ÿ</li></ul></li><li><p>Spring Boot 2 å“åº”å¼ç¼–ç¨‹</p><ul><li>å“åº”å¼ç¼–ç¨‹åŸºç¡€</li><li>Webfluxå¼€å‘Webåº”ç”¨</li><li>å“åº”å¼è®¿é—®æŒä¹…åŒ–å±‚</li><li>å“åº”å¼å®‰å…¨å¼€å‘</li><li>å“åº”å¼åŸç†</li></ul></li></ul>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
      <category>SpringBoot</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SpringBoot</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
